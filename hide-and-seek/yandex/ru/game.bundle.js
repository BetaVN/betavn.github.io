(function(){var e={481:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var n=atob(this.toDataURL(t,i).split(",")[1]),s=n.length,a=s>>2,r=new Uint8Array(s),o=new Uint32Array(r.buffer,0,a),c=0,h=0;c<a;c++)o[c]=n.charCodeAt(h++)|n.charCodeAt(h++)<<8|n.charCodeAt(h++)<<16|n.charCodeAt(h++)<<24;for(var u=3&s;u--;)r[h]=n.charCodeAt(h++);e(new Blob([r],{type:t||"image/png"}))}})},621:function(e,t,i){"use strict";i.d(t,{J:function(){return m}});var n=i(24),s=i(64),a=i.n(s),r=i(47),o=i.n(r),c=i(21),h=i.n(c),u=i(31),l=i(216),d=i(94),p=GameCore.Configs.Notification,f=p.GameTitle,g=p.GameImage,m=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),v=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var e=(0,n.Z)(h().mark((function e(i){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:i});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),n=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:i,config:{tournamentTitle:n+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!GameCore.Utils.Valid.isGameSDKError(e.t0)){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!GameCore.Utils.Valid.isGameSDKError(e.t0)){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,n.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return i=e.sent,n=[],i.forEach((function(e){var i=e.getID();if(i!==t){var s=e.getName();if(s){var a=e.getPhoto();n.push(new l.Z(i,s,a).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(n));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,n.Z)(h().mark((function e(t){var i,n,s,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.data,n=t.image,s=t.template,a=t.cta,r=t.text,o={data:i,image:n,action:"CUSTOM",template:s,cta:a,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,n.Z)(h().mark((function e(){var t,i,n,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,"ANDROID"!==GameSDK.getPlatform()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(i=e.t0,!(n=i.lastCallCreateShortcut)||!(0,d.Gm)(+n)){e.next=15;break}return e.abrupt("return",!1);case 15:if(s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),a()(t=GameSDK.getSupportedAPIs()).call(t,"canCreateShortcutAsync")){e.next=20;break}return e.abrupt("return",!1);case 20:return e.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!e.sent){e.next=40;break}return r=u._.SHORTCUT_CREATE,o=u._.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=27,e.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return e.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 36:return e.prev=36,e.t1=e.catch(27),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 40:return e.abrupt("return",!1);case 43:return e.prev=43,e.t2=e.catch(2),e.abrupt("return",!1);case 46:case"end":return e.stop()}}),e,this,[[2,43],[27,36]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,n.Z)(h().mark((function e(){var t,i,n,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,a()(t=GameSDK.getSupportedAPIs()).call(t,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(i=e.t0,!(n=i.lastCallSubscribeBot)||!(0,d.Gm)(+n)){e.next=19;break}return e.abrupt("return",!1);case 19:return s=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:s}),r=u._.BOT_SUBSCRIBE,o=u._.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,n.Z)(h().mark((function e(t,i,n){var s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a()(s=GameSDK.getSupportedAPIs()).call(s,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,i,n);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,i,n){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,i.e(543).then(i.bind(i,647));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new m;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,n.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.message,n=t.delayTime,e.next=5,FBInstant.graphApi.requestAsync("/me/notifications","POST",{message:o()({title:f,body:i,media_url:g}),schedule_interval:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}();t.Z=v},482:function(e,t,i){"use strict";var n=i(116),s=i.n(n),a=i(39),r=i.n(a),o=function(e,t){return void 0===t&&(t=1),s()({length:Math.ceil(e.length/t)},(function(i,n){return r()(e).call(e,n*t,n*t+t)}))},c=i(99),h=i.n(c),u=i(64),l=i.n(u),d=function(e,t){return h()(e).call(e,(function(e){return!l()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),n=[e[i],e[t]];e[t]=n[0],e[i]=n[1]}},f=i(46),g=i.n(f),m=function(e,t,i){return g()(i).call(i,e)===t&&null!==e&&void 0!==e},v=function(e){return h()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p,unique:v},E=i(48),S=i.n(E),T=i(289),b=i.n(T),A=b()((function(e,t){if("string"===typeof e){var i=t[e.toLowerCase()];if("string"===typeof i)return i}return"?"})),C=b()((function(e){for(var t=null,i=[],n=/:([A-Z0-9?]+)/gm;null!==(t=n.exec(e));)i.push(t[1]);return i})),O=b()((function(e){for(var t=null,i=[],n=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=n.exec(e));){var s=t[0];if(s.length>=2){var a,o=s.length,c=r()(s).call(s,0,o-1),h=s[o-1],u=S()(a=new Array(+c)).call(a,h);i.push.apply(i,u)}else i.push(s)}return i})),I=function(e,t){var i=e,n=GameCore.Utils.Object.invert(t),s={},a=0,r=0;return C(i).forEach((function(e){a=0,r++,s[r]||(s[r]={}),O(e).forEach((function(e){a++,s[r][a]=A(e,n)}))})),s},w=b()((function(e,t){var i=t[e];return"string"===typeof i?""+i.toUpperCase():"?"})),P=function e(t,i,n){void 0===n&&(n=!1);var s="";if(!GameCore.Utils.Valid.isObject(t))return s;var a="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var h=t[c];if(GameCore.Utils.Valid.isObject(h))s+=":"+e(h,i,!0);else if(GameCore.Utils.Valid.isString(h)){var u=w(h,i);u===a?(o++,s=r()(s).call(s,0,-2)):o=1,s+=""+o+u,a=u}}return s=s.replace(/1([A-Z])/g,"$1")},_=function(e){try{return atob(e)}catch(t){return""}},R={decodeMap:I,encodeMap:P,hashToString:_,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},k=function(e){try{return JSON.parse(e)}catch(t){return null}},x=i(47),L=i.n(x),D=function(e){try{return L()(e,null,0)}catch(t){return""}},B=function(e){return k(D(e))},N={clone:B,decode:k,encode:D},M=function(e){var t="object"===typeof e||"function"===typeof e,i=Array.isArray(e);return null!==e&&t&&!i},Z=function(e){return void 0===e||null===e},G=function e(t){if(!M(t))return t;for(var i in t){Z(t[i])&&delete t[i];var n=t[i];M(n)&&(t[i]=e(n))}return t},F=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=i(98),H=i.n(U),j=function(e){var t={};return H()(e).forEach((function(i){if(F(e,i)){var n=e[i];"string"===typeof n&&(t[n]=i)}})),t},Y=function(e,t){if(!Array.isArray(e))return{};var i={};return e.forEach((function(e){if(F(e,t)){var n=e[t];"string"===typeof n&&(i[n]=e)}})),i},K={clear:G,hasOwn:F,invert:j,keyBy:Y},W=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},V=function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return t},z=i(130),X=i.n(z),J=function(e){var t;return X()(t=H()(e)).call(t,(function(t,i){var n=e[i];return void 0!==n&&t.push(i+"="+n),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,i=0;i<6;i++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",n="",s=e;void 0!=t&&(s-=t.length,n+=t);for(var a=0;a<s;a++){var r=Math.floor(67*Math.random());n+=i.charAt(r)}return n},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=i(55),te=i.n(ee),ie=i(292),ne=i.n(ie),se=function(e,t){var i,n=e.split(" "),s=(n.length<=1?te()(i=[]).call(i,n):[n[0],n.pop()]).join(" "),a=ne()(s).call(s," ")||0,r=a>=0?a:t;return(s.length>t?s.substring(0,r):s).substring(0,t)},ae=i(297),re=i.n(ae),oe={capitalize:W,hashCode:V,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q,removeDiacritics:$,getShortName:se,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},he=function(){return false},ue=function(e){return"function"===typeof e},le=function(e){return M(e)&&F(e,"code")},de=function(e){return"number"===typeof e},pe=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},fe=function(e){return"string"===typeof e},ge=i(56),me=i.n(ge),ve=function(e,t,i){var n=i||{},s=n.timeout,a=void 0===s?1e3:s,r=n.checkInterval,o=void 0===r?100:r;return new(me())((function(i){var n=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(n),i(!0))}),o);a>0&&setTimeout((function(){clearInterval(n),i(!1)}),a)}))},ye=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},Ee=function(e,t){var i=t||{},n=i.fractionalDigits,s=void 0===n?0:n,a=i.startAbbreviate,r=void 0===a?1e3:a,o=i.abbreviateStep,c=void 0===o?3:o,h=i.maxLength,u=void 0===h?-1:h,l=i.removeLastZero,d=void 0===l||l,p=i.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,g=-1===u?99999999:u;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(s),E=g-f[v].length,S=y.substring(0,E);return(d?ye(S):S)+f[v]}var T=e.toFixed(s),b=g-f[0].length,A=T.substring(0,b);return d?ye(A):A+f[0]},Se={Array:y,Hash:R,Json:N,Object:K,String:oe,Valid:{isBoolean:ce,isDebugger:he,isFunction:ue,isGameSDKError:le,isNumber:de,isObject:M,isPropertyKey:pe,isString:fe,isValueChangeAsync:ve},Image:{drawCircle:function(e){var t=e.scene,i=e.key,n=e.newKey,s=t.textures.get(i).getSourceImage();if(!s)return!1;var a=Math.min(s.width,s.height);n||t.textures.removeKey(i);var r=t.textures.createCanvas(n||i,a,a),o=r.context;return o.beginPath(),o.arc(a/2,a/2,a/2,0,2*Math.PI,!1),o.clip(),r.draw((s.width-a)/2,(s.height-a)/2,s),!0},drawBorder:function(e){var t=e.scene,i=e.key,n=e.newKey,s=e.radius,a=e.width,r=e.height,o=t.textures.get(i).getSourceImage();if(!o)return!1;a||(a=o.width),r||(r=o.height),n||t.textures.removeKey(i);var c=t.textures.createCanvas(n||i,a,r),h=c.context,u=Math.min(a,r)/100*s/2;return h.beginPath(),h.moveTo(0+u,0),h.lineTo(0+a-u,0),h.quadraticCurveTo(0+a,0,0+a,0+u),h.lineTo(0+a,0+r-u),h.quadraticCurveTo(0+a,0+r,0+a-u,0+r),h.lineTo(0+u,0+r),h.quadraticCurveTo(0,0+r,0,0+r-u),h.lineTo(0,0+u),h.quadraticCurveTo(0,0,0+u,0),h.closePath(),h.clip(),c.draw(0,0,o),!0},getImageScale:function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}},Number:{toAbbreviatedString:Ee,padStart:function(e,t,i){void 0===i&&(i="0");for(var n=e.toString(),s=n.length,a=0;a<t-s;a++)n=i+n;return n},padEnd:function(e,t,i){void 0===i&&(i="0");for(var n=e.toString(),s=n.length,a=0;a<t-s;a++)n+=i;return n}},Device:i(451).Z},Te=i(45),be=i(139),Ae={AppId:"3520483494721183",Ads:{Enabled:!0,Mockup:{Enable:!0,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM"},RewardAdOptions:{pID:"123"},InterstitialAdOptions:{pID:"456"},BannerAdOptions:[{placementId:"789",bannerHeight:50,platform:"MOBILE",secondsReload:50},{placementId:"012",bannerHeight:50,platform:"DESKTOP",secondsReload:70}]}},Ce={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards",LeaderboardId:"611a22653f2485dac948cbae"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},Oe={ENV:"development",AppId:"3520483494721183",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!1,DisableSendNotification:!0,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{DefaultLevel:1,AlwayStartDefaultLevel:!1,StartScore:0,StartCoins:0,NormalMaxLevel:250,EndlessMaxLevel:50,GiftTime:10800,RescueCoins:500,FreeItems:!1,DelayStart:1500,DelayLevelUp:1800,DelayLevelFailed:1500,DelayLevelCompleted:2e3,DelayGameOver:2e3,MaxRescueCount:1,RescueGamePopupTimeout:15,EnableVibrate:!0,EndlessDistanceLog:[5,15,30,60,120,180,240,300,420,600,900,1200,1500,1800,2400,3e3,3600,7200,10800,14400,18e3,21600,25200,28800,32400,36e3,39600,43200,46800,50400]},Tutorial:{ForceUseTutorial:!1},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,DisableLandscape:!0,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!0,ShowMonitoring:!0,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},LevelBuilder:{Enable:!1,Opacity:.8,Expanded:!0},Match:{ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!0,secondsFirstTime:120,secondsBetweenAds:120},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"",bannerHeight:50,platform:"MOBILE",secondsReload:50},{placementId:"",bannerHeight:50,platform:"DESKTOP",secondsReload:70}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0},ProfilerPlugin:{Enable:!1}};Oe=(0,be.TS)((0,Te.Z)({},Oe),Ce);var Ie=Oe=(0,be.TS)((0,Te.Z)({},Oe),Ae),we=function(e){return function(t){try{var i=window.game,n=t.module;if(i.scene.getScenes(!0)[0].scene.key!==e)return;var s=n.default;i.scene.remove(e),i.scene.add(e,s,!0),i.scene.bringToTop(i.globalScene)}catch(r){var a;null==(a=void 0)||a.invalidate()}}},Pe=i(513),_e=i.n(Pe),Re=i(515),ke=i.n(Re),xe=i(517),Le=i.n(xe),De=i(215),Be=!1,Ne=function e(t,i,n){i.forEach((function(i){if(i.name){var s=null;if(s=n?n.getByName(i.name):t.children.getByName(i.name)){if("Container"===i.type){var a=s,r=i.getAll();if(e(t,r,a),!a.hotContainer)return}var o=_e()(i),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=h()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!s)return!1;var t=ke()(i,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===ke()(s,e))))}));u.length<1||u.forEach((function(e){if(s){var t=ke()(i,e);ke()(s,e),Le()(s,e,t)}}))}}}))},Me={Configs:Ie,Utils:Se,LiveUpdate:{Scene:we,SceneObjects:function(e,t){return void 0===t&&(t=Be),function(i){try{var n=window.game,s=i.module,a=n.scene.getScenes(!0)[0];if(a.scene.key!==e)return;Be=t;var r=s.default,o=e+"-draft";n.scene.remove(o);var c=n.scene.add(o,r);a=n.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,De.D)((function(){var e=c.children.getAll();Ne(a,e),n.scene.remove(o)})),50),n.scene.run(o),n.scene.bringToTop(a),n.scene.bringToTop(n.globalScene)}catch(h){}}}}};window.GameCore=Me},638:function(e,t,i){"use strict";var n=i(24),s=i(2),a=i(21),r=i.n(a),o=i(464),c=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).instance=void 0,n.placementId=void 0,n.instance=null,n.placementId=i,n}(0,s.Z)(t,e),t.setGame=function(e){self.game=e};var i=t.prototype;return i.loadAsync=function(){var e=(0,n.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),i.showAsync=function(){var e=(0,n.Z)(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.INTERSTITIAL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=22;break;case 15:throw e.prev=15,e.t0=e.catch(0),(0,GameCore.Utils.Valid.isGameSDKError)(e.t0)&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),i=this.getSceneName(),self.game.analytics.showAdFail(this.type,i,e.t0),e.t0;case 22:return e.prev=22,window.focus(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,15,22,25]])})));return function(){return e.apply(this,arguments)}}(),i.getStatus=function(){return this.status},i.createInstanceByType=function(){var e=(0,n.Z)(r().mark((function e(t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.REWARDED?4:e.t0===GameCore.Ads.Types.INTERSTITIAL?7:10;break;case 4:return e.next=6,i.getRewardedVideoAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,i.getInterstitialAdAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},142:function(e,t,i){"use strict";i.d(t,{U:function(){return T},v:function(){return b}});var n=i(45),s=i(24),a=i(21),r=i.n(a),o=i(47),c=i.n(o),h=i(2),u=i(53),l=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="BadRequest",n.message=t||"This request is bad",n.payload=i,n}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="RequestTimeout",n.message=t||"This request is timeout",n.payload=i,n}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),p=i(94),f=GameCore.Configs,g=f.AppId,m=f.Network,v=function(e){if(!e.ok)throw new l(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},E=function(e,t,i,n){return(0,s.Z)(r().mark((function s(){var a,o,h,u,p;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a=e+"/apps/"+g+"/"+t,o=new AbortController,i.signal=o.signal,h=setTimeout((function(){o.abort()}),i.timeout),GameCore.Utils.Valid.isObject(n)&&(i.body=c()(n)),s.next=8,fetch(a,i);case 8:return u=s.sent,clearTimeout(h),v(u),s.next=13,u.json();case 13:if(s.t0=s.sent,s.t0){s.next=16;break}s.t0={};case 16:return p=s.t0,s.abrupt("return",p);case 20:if(s.prev=20,s.t1=s.catch(0),!(s.t1 instanceof l)){s.next=24;break}return s.abrupt("return",null);case 24:if(!(s.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(s.t1,"name"))){s.next=27;break}if("AbortError"!==s.t1.name){s.next=27;break}throw new d(null);case 27:throw s.t1;case 28:case"end":return s.stop()}}),s,null,[[0,20]])})))},S=function(){var e=(0,s.Z)(r().mark((function e(t,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&i>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,S(t,i-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,i){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)(r().mark((function e(t,i,s,a){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===a&&(a=m.Retries),e.prev=2,o=(0,n.Z)({},y(),i,{method:"GET"}),c=E(s,t,o),e.next=7,S(c,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,i,n,s){return e.apply(this,arguments)}}(),b=function(){var e=(0,s.Z)(r().mark((function e(t,i,s,a,o){var c,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,n.Z)({},y(),s,{method:"POST"}),h=E(a,t,c,i),e.next=7,S(h,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,i,n,s,a){return e.apply(this,arguments)}}()},141:function(e,t,i){"use strict";i.d(t,{DW:function(){return c},EH:function(){return a},fJ:function(){return s},kL:function(){return n},qj:function(){return r},rh:function(){return o}});var n="CONTEXT_RECEIVED",s="CONTEXT_PROCESSED",a="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},96:function(e,t,i){"use strict";i.d(t,{Sb:function(){return a},W6:function(){return n},lB:function(){return r},nx:function(){return s}});var n="share_invite",s="tournament",a="challenge_friend_match",r="matching_group_match"},144:function(e,t,i){"use strict";i.d(t,{U:function(){return a}});var n=i(216),s=i(140),a=new n.Z("10","Your Friend",s.Z.AVATAR.FILE).toObject()},626:function(e,t,i){"use strict";var n=i(2),s=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="LoadMapJsonFail",n.message=t||"Load map json fail",n.payload=i,n}return(0,n.Z)(t,e),t}((0,i(53).Z)(Error));t.Z=s},224:function(e,t,i){"use strict";var n=i(2),s=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="WideFrameRenderFail",n.message=t||"Wide frame render fail",n.payload=i,n}return(0,n.Z)(t,e),t}((0,i(53).Z)(Error));t.Z=s},37:function(e,t,i){"use strict";var n=i(139),s=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var i=this.config.targets[0].scene;i&&(this.scene=i,this.isStarted=!1,this.tween=i.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,n.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=s},228:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(2),s=i(37),a=i(207),r={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:i.n(a)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},o=function(e){function t(t){return e.call(this,r,t)||this}return(0,n.Z)(t,e),t}(s.Z)},477:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(37),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var i,s,a;return(a=e.call(this,r,t)||this).posX=void 0,a.handleSwitchPosition=function(){var e;a.posX=-a.posX,null==(e=a.tween)||e.updateTo("x",-a.posX)},null!=(i=a.config)&&i.props?(a.posX=a.config.props.x,null==(s=a.tween)||s.on(Phaser.Tweens.Events.TWEEN_REPEAT,a.handleSwitchPosition),a):(0,n.Z)(a)}return(0,s.Z)(t,e),t}(a.Z);t.Z=o},465:function(e,t,i){"use strict";var n=i(2),s=i(37),a={targets:[],duration:400,ease:i(466).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,a,t)||this}return(0,n.Z)(t,e),t}(s.Z);t.Z=r},466:function(e,t,i){"use strict";var n=i(207),s=i.n(n)()(.48,1.57,.6,.83);t.Z=s},113:function(e,t,i){"use strict";var n=i(2),s=i(37),a={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,a,t)||this}return(0,n.Z)(t,e),t}(s.Z);t.Z=r},114:function(e,t,i){"use strict";var n=i(2),s=i(37),a={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,a,t)||this}return(0,n.Z)(t,e),t}(s.Z);t.Z=r},112:function(e,t,i){"use strict";var n=i(2),s=i(37),a={targets:[],duration:300,ease:i(466).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,a,t)||this}return(0,n.Z)(t,e),t}(s.Z);t.Z=r},630:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(37),r={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},o=function(e){function t(t){var i,s;(s=e.call(this,r,t)||this).spline=void 0,s.createCounter=function(e,t){var i=s.config.onCurveUpdate,n="function"===typeof i?i:null;t.forEach((function(t,i){if(s.scene){var a=e.data[i],r=a.duration,o=a.delay,c=new Phaser.Math.Vector2;s.scene.tweens.addCounter({delay:o,duration:r,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){s.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,n&&n(t)}})}}))};var a=s.config.curve;return a?(s.spline=new Phaser.Curves.Spline(a),null==(i=s.tween)||i.on(Phaser.Tweens.Events.TWEEN_START,s.createCounter),s):(0,n.Z)(s)}return(0,s.Z)(t,e),t}(a.Z);t.Z=o},148:function(e,t,i){"use strict";var n=i(2),s=i(37),a={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,a,t)||this}return(0,n.Z)(t,e),t}(s.Z);t.Z=r},78:function(e,t,i){"use strict";var n=i(95),s=i(17),a=i(2),r=i(31),o=i(465),c=i(63),h=i(79),u=i(54),l=function(e){function t(t,i,n,a,r,u){var l;return void 0===u&&(u=!1),(l=e.call(this,t)||this).useSound=!0,l.isClicked=!1,l.scaleUp=-1,l.scaleDown=-1,l.button=void 0,l.upAnimation=void 0,l.downAnimation=void 0,l.isUsePixelPerfect=!1,l.hitArea=void 0,l.hitZone=void 0,l.scaleDownPress=void 0,l.parentName=void 0,l.handelObjectDestroy=function(){l.scene&&l.scene.events.off(Phaser.Scenes.Events.SLEEP,l.handleSceneSleep)},l.handleSceneSleep=function(){l.scene&&l.scene.tweens.killTweensOf((0,s.Z)(l))},l.handlePointerDown=function(){var e,t;l.isClicked||null!=(e=l.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(l.isClicked=!0,l.runDownAnimation())},l.handleOnClick=function(e){return function(){var t,i,n,s;l.isClicked&&(null!=(t=l.upAnimation)&&null!=(i=t.tween)&&i.isPlaying()||(l.isClicked=!1,l.runUpAnimation(),null==(n=l.upAnimation)||null==(s=n.tween)||s.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){l.logButtonEvent(),l.addDebugData(),l.processCallback(e)}))))}},l.handlePointerOut=function(){var e,t;l.isClicked&&(null!=(e=l.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(l.isClicked=!1,l.runUpAnimation()))},l.runDownAnimation=function(){var e;-1===l.scaleDown&&(l.scaleUp=l.scale,l.scaleDown=l.scaleDownPress),l.useSound&&l.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=l.downAnimation)||e.remove(),l.downAnimation=new o.Z({targets:[(0,s.Z)(l)],duration:150,props:{scale:l.scaleDown},onUpdate:function(){l.hitZone.scale=1/l.scale}}),l.downAnimation.play()},l.runUpAnimation=function(){var e;-1!==l.scaleUp&&(null==(e=l.upAnimation)||e.remove(),l.upAnimation=new o.Z({targets:[(0,s.Z)(l)],duration:150,props:{scale:l.scaleUp},onUpdate:function(){l.hitZone.scale=1/l.scale}}),l.upAnimation.play())},l.isUsePixelPerfect=u,l.setDepth(c.Z.BUTTON),l.createButton(i,n,a,r),l.updateSize(),l.listenEvents(),l.scene.add.existing((0,s.Z)(l)),l}(0,a.Z)(t,e);var i=t.prototype;return i.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},i.processCallback=function(e){var t,i,n;null==(t=this.upAnimation)||t.stop(),null==(i=this.downAnimation)||i.stop(),null==(n=this.scene)||n.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},i.setDisabled=function(e){var t,i;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(i=this.hitArea)||i.setInteractive())},i.createButton=function(e,t,i,n){this.button=this.scene.add.image(0,0,e,t),i&&n&&this.button.setWorldSize(i,n),this.scaleDownPress=this.scale-.1;var s=this.button,a=s.displayWidth,r=s.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:a,displayHeight:r}),this.add([this.button,this.hitZone])},i.updateSize=function(){var e=this.button,t=e.width,i=e.height,n=t/100*10,s=i/100*10,a=n<10?n:10,r=s<10?s:10;this.setSize(t+a,i+r),this.hitZone.setSize(t+a,i+r)},i.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,u.sw)("ui-click",e+":"+t)},i.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},i.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,n.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=l},147:function(e,t,i){"use strict";var n=i(2),s=function(e){function t(t,i){var n,s=i.key,a=i.frame,r=i.width,o=i.height,c=i.usePixelPerfect;(n=e.call(this,t,s,a,r,o,c)||this).paddingZone=void 0,n.showDebugZone=void 0,n.debugZone=void 0;var h=i.paddingZone,u=void 0===h?0:h,l=i.showDebugZone,d=void 0!==l&&l;return n.paddingZone=u,n.showDebugZone=d,n}return(0,n.Z)(t,e),t.prototype.updateSize=function(){e.prototype.updateSize.call(this);var t,i=this.width,n=this.height,s=i+this.paddingZone,a=n+this.paddingZone;(this.setSize(s,a),this.hitZone.setSize(s,a),this.showDebugZone)&&(null==(t=this.debugZone)||t.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))},t}(i(78).Z);t.Z=s},226:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(17),s=i(2),a=i(20),r=i(37),o={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},c=function(e){function t(t){return e.call(this,o,t)||this}return(0,s.Z)(t,e),t}(r.Z),h=a.Z.DEFAULT,u=h.KEY,l=h.FRAME,d=function(e){function t(t){var i;return(i=e.call(this,t,0,0,u,l.PRELOADER)||this).anim=void 0,i.runAnimation(),i.setWorldSize(50,50),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new c({targets:[this],repeat:-1,duration:1200}),this.anim.play()},i.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image)},227:function(e,t,i){"use strict";var n=i(95),s=i(17),a=i(2),r=i(63),o=i(20).Z.DEFAULT,c=o.KEY,h=o.FRAME,u=function(e){function t(t,i,n,a,o){var c;return(c=e.call(this,t,i,n)||this).barTopLeft=void 0,c.barTopMid=void 0,c.barTopRight=void 0,c.barMidLeft=void 0,c.barMidBg=void 0,c.barMidRight=void 0,c.barBottomLeft=void 0,c.barBottomMid=void 0,c.barBottomRight=void 0,c.setSize(a,o),c.setDepth(r.Z.POPUP),c.createPopup(),c.scene.add.existing((0,s.Z)(c)),c}(0,a.Z)(t,e);var i=t.prototype;return i.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},i.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,c,h.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,c,h.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,c,h.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,c,h.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,c,h.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,c,h.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,c,h.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,c,h.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,c,h.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(64,43),this.barTopMid.setWorldSize(65,47),this.barTopRight.setWorldSize(64,43),this.barMidLeft.setWorldSize(64,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(64,48),this.barBottomLeft.setWorldSize(64,43),this.barBottomMid.setWorldSize(65,47),this.barBottomRight.setWorldSize(64,43),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},i.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-128,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-86),this.barMidBg.setWorldSize(this.width-128,this.height-86),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-86),this.barBottomMid.setWorldSize(this.width-128,this.barBottomMid.height)},i.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,n.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container);t.Z=u},637:function(e,t,i){"use strict";var n=i(45),s=i(95),a=i(17),r=i(2),o=i(38),c=i.n(o),h=i(130),u=i.n(h),l=i(48),d=i.n(l),p=i(99),f=i.n(p),g=i(39),m=i.n(g),v=i(116),y=i.n(v),E=i(100),S=i.n(E),T=i(151),b=i.n(T),A=i(63),C=i(215);function O(e,t){var i="undefined"!==typeof S()&&b()(e)||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){var i;if(!e)return;if("string"===typeof e)return I(e,t);var n=m()(i=Object.prototype.toString.call(e)).call(i,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return y()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var w=function(e){function t(t,i){var s,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,C.D)((function(e,t,i){if(r.isEnable){var n;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(n=r.lastScrollY).call(n,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-i*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),i=e.position,n=e.prevPosition,s=(i.y-n.y)/t,a=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=s,r.isReachTop()&&s>=0){var c=(a-(r.value-r.marginTop))/a;o=Math.min(o,c)}if(r.isReachBottom()&&s<=0){var h=(a-(-r.maxHeight-r.value))/a;o=Math.min(o,h)}var u=s*o,l=r.maxScrollOver*r.height;r.value+u>r.marginTop+l?r.value=r.marginTop+l:r.value+u<-r.maxHeight-l?r.value=-r.maxHeight-l:r.value+=u,r.callOnScrollEvents(r.value,u)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var i=u()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(i*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,n.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},i);var o=i.width,h=i.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(s=new Array(3)).call(s,0),r.setSize(o,h),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,a.Z)(r)),r}(0,r.Z)(t,e);var i=t.prototype;return i.onScroll=function(e){this.onScrollEvents.push(e)},i.gotoTop=function(){this.value=this.config.marginTop},i.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},i.createDebug=function(){this.drawDebugBox(16711680,.8)},i.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},i.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},i.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var i=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,i),0),this.updateObjectVisible()},i.clearItem=function(){this.objects.clear(!0,!0),this.reset()},i.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},i.createBound=function(e,t,i,n){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(n),this.boundBottom.setTint(n),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(A.Z.PRIORITY),this.boundBottom.setDepth(A.Z.PRIORITY);var s=this.width,a=i,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(s,a),this.boundBottom.setDisplaySize(s,a),this.boundTop.setY(-this.displayHeight/2+a/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-a/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},i.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,i=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-i/2,t,i,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},i.updateMask=function(){var e=this.getWorldPosition(),t=e.x,i=e.y;this.maskGraphics.setPosition(t,i)},i.createGroup=function(){this.objects=this.scene.make.group({})},i.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},i.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var i=e[t];i.y+i.height<-this.height/2||i.y-i.height>this.height/2?i.setVisible(!1):i.setVisible(!0)}},i.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},i.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},i.callOnScrollEvents=function(e,t){for(var i,n=O(this.onScrollEvents);!(i=n()).done;){(0,i.value)(this,e,t)}},i.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},i.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},i.stopScrollingBack=function(){this.isScrollingBack=!1},i.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var i=Math.abs(this.velocity)/this.velocity;this.velocity-=i*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},i.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},i.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},i.isReachTop=function(){return this.value>this.marginTop},i.isReachBottom=function(){return-this.value>this.maxHeight},(0,s.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=w},467:function(e,t,i){"use strict";var n=i(2),s=i(31),a=i(20),r=i(78),o=a.Z.DEFAULT.KEY,c=function(e){function t(t,i){var n;(n=e.call(this,t,o,i.framePanelOn)||this).options=void 0,n.icon=void 0,n.getFrameByStatus=function(){var e=n.options,t=e.enable,i=e.frameOn,s=e.frameOff;return t?i:s},n.options=i,n.createIcon();var s=n.options.enable;return n.updateButtonState(s),n}(0,n.Z)(t,e);var i=t.prototype;return i.updateButtonState=function(e){this.updateStatus(e),this.updateFramePanel(e),this.alignSwitch()},i.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),this.updateFramePanel(!t),this.alignSwitch(),e(!t)},i.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t)},i.updateFramePanel=function(e){this.button.setFrame(e?this.options.framePanelOn:this.options.framePanelOff)},i.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:o,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},i.alignSwitch=function(){this.options.enable?(this.icon.setOrigin(1,.5),this.button.setOrigin(.5,.5),this.icon.setPosition(34,0)):(this.icon.setOrigin(0,.5),this.icon.setPosition(-34,0))},i.logButtonEvent=function(){var e=this.getParentName(),t=this.name,i=!this.options.enable;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:i})},t}(r.Z);t.Z=c},478:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.TUTORIAL,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t)||this).hand=void 0,i.name="TapTutorialHand",i.addHand(),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.addHand=function(){this.hand=this.scene.make.image({key:r,frame:o.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},i.playAnimation=function(e,t){var i,n=this;void 0===e&&(e=0),void 0===t&&(t=800);var s=1/GameCore.Utils.Image.getImageScale();this.hand.angle=30,null==(i=this.scene)||i.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,value:1,duration:200},scale:{duration:400,start:1.6*s,to:1.2*s},angle:{from:30,value:0,duration:400}},onComplete:function(){var e;null==(e=n.scene)||e.tweens.add({targets:[n.hand],delay:200,duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){n.hand.x=0,n.hand.y=0,n.hand.scale=s,n.playAnimation(t)}})}})},i.stopAnimation=function(){this.scene.tweens.killTweensOf(this.hand)},i.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container);t.Z=c},474:function(e,t,i){"use strict";var n=i(95),s=i(17),a=i(2),r=i(31),o=i(97),c=i(79),h=function(e){function t(t,i,n){var a;return(a=e.call(this,t)||this).maxValue=void 0,a.key=void 0,a.frames=void 0,a.bar=void 0,a.icon=void 0,a.button=void 0,a.value=void 0,a.key=i,a.frames=n,a.maxValue=1e4,a.createBar(),a.createValue(),a.createIcon(),a.createButton(),a.alignObject(),a.scene.add.existing((0,s.Z)(a)),a}(0,a.Z)(t,e);var i=t.prototype;return i.setValue=function(e){var t=""+e;e>=this.maxValue&&(t=Math.floor(e/1e3)+"k"),this.value.setText(t)},i.alignObject=function(){var e=this.bar,t=e.width,i=e.height;this.setSize(t,i),Phaser.Display.Align.In.Center(this.value,this.bar,2,2),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar,10),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},i.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},i.createValue=function(){this.value=this.scene.make.bitmapText({font:o.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.setValue(0),this.add(this.value)},i.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},i.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},i.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},i.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,n.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e(),t.scene.audio.playSound(c.Z.BUTTON_CLICK)})))}}]),t}(Phaser.GameObjects.Container);t.Z=h},628:function(e,t,i){"use strict";var n=i(20).Z.EFFECTS,s=n.KEY,a=n.FRAME,r={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:s,PREFIX:a.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:s,PREFIX:a.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:s,PREFIX:a.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:s,PREFIX:a.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:s,PREFIX:a.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:s,PREFIX:a.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:s,PREFIX:a.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}};t.Z=r},63:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,COIN_EATED:250,ON_TOP:1e4}},97:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"myriad-normal",TEXTURE:"./assets/fonts/myriad-normal.png",DATA:"./assets/fonts/myriad-normal.xml"},BLUE_STROKE:{KEY:"myriad-blue-stroke",TEXTURE:"./assets/fonts/myriad-blue-stroke.png",DATA:"./assets/fonts/myriad-blue-stroke.xml"},GREEN_STROKE:{KEY:"myriad-green-stroke",TEXTURE:"./assets/fonts/myriad-green-stroke.png",DATA:"./assets/fonts/myriad-green-stroke.xml"},BROWN_STROKE:{KEY:"myriad-brown-stroke",TEXTURE:"./assets/fonts/myriad-brown-stroke.png",DATA:"./assets/fonts/myriad-brown-stroke.xml"},FONT_FAMILY:"Myriad Pro",SYSTEM_FAMILY_FONT:"-apple-system,BlinkMacSystemFont,sans-serif"}},140:function(e,t){"use strict";GameCore.Utils.Image.getImageScale();t.Z={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}}}},20:function(e,t,i){"use strict";var n=i(45),s=GameCore.Utils.Image.getImageScale(),a={MOUSE_SPINE:{KEY:"mouse-spine",jsonPATH:"./assets/textures/mouse.json",atlasPATH:"./assets/textures/mouse.atlas"},OBJ_JSON:{KEY:"obj-json",PATH:"./assets/textures/"+s+"x/",JSON:"./assets/textures/"+s+"x/objects.json",DATA:{COLLECT_OBJ:"collect-obj-resources",DECOR_BEHIND_OBJ:"decor-obj-behind-resources",MOVEMENT_MODIFIER_OBJ:"movement-modifier-obj-resources",MOVING_OBJ:"moving-obj-resources",OTHER_OBJ:"other-obj-resources",PLAYER:"player-resources",STATIC_OBJ:"static-obj-resources",SUDDEN_OBJ:"sudden-obj-resources",WATCHER:"watcher-resources",MONKEY:"monkey-resources",CRAB:"crab-resources",BALLOON:"balloon-resources",SPACESHIP:"spaceship-resources",OWL:"owl-resources"}},TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+s+"x/tutorial-resources.png",JSON:"./assets/textures/"+s+"x/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",TUTORIAL_SIGHT_STEP_2:"tutorial-sight-1",TUTORIAL_SIGHT_STEP_3:"tutorial-sight-2",TUTORIAL_OBJECT_ARROW:"arrow"}},DEFAULT:{KEY:"default-resources",JSON:"./assets/textures/"+s+"x/default-resources.json",TEXTURE:"./assets/textures/"+s+"x/default-resources.png",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",LOGO_RU:"title-logo-ru",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",PREFIX_MISSION_:"daily-missions/",MISSION_BLOCK_BG:"daily-missions/bg-block",MISSION_CLOCK_BG:"daily-missions/bg-clock",MISSION_COLLECT_COIN:"daily-missions/coin",MISSION_FINISH_LEVEL:"daily-missions/cup",MISSION_CHALLENGE_FRIENDS:"daily-missions/invite-friend",MISSION_SECOND_CHANCE:"daily-missions/reach-score",DAILY_DAY_BG_GREY:"daily-rewards/bg-grey",DAILY_DAY_BG_GREEN:"daily-rewards/bg-green",DAILY_DAY_BG_BLUE:"daily-rewards/bg-blue",LOADING_MOUSE:"loading/mouse",LOADING_BACK_ICON:"loading/back-icon",LOADING_INVITE_FRIEND_ICON:"loading/invite-friend-loading",CONGRATULATION_STAR:"congratulation/star",CONGRATULATION_MOUSE:"congratulation/mouse",CONGRATULATION_RIBBON:"congratulation/ribbon",CONGRATULATION_STAR_FX:"congratulation/star-fx",RESCUE_COIN:"rescue/coin",RIBBON_RED:"ribbon/red",RIBBON_BLUE:"ribbon/blue",RIBBON_GREY:"ribbon/grey",RIBBON_PANEL:"ribbon/panel",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",MOUSE_SAD:"logo/mouse-sad",MOUSE_HAPPY:"logo/mouse-happy",MOUSE_RUN:"logo/mouse-run",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_COIN_1:"logo/coin-1",LOGO_COIN_2:"logo/coin-2",LOGO_COIN_3:"logo/coin-3",LOGO_COIN_4:"logo/coin-4",LOGO_COIN_5:"logo/coin-5",LOGO_COIN_6:"logo/coin-6",POPUP_YELLOW:"popup/yellow",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",POPUP_BG_BLOCK:"popup/bg-block ",RESULT_YELLOW_BG:"result/bg-block",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_VIB:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_SOUND:"icons/sound",ICON_FLAT_NEXT:"icons/flat-next",ICON_RESUME:"icons/flat-resume",ICON_FLAT_SHARE:"icons/flat-share",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_COIN:"icons/coin",ICON_INVITE_FRIEND:"icons/invite-friend",ICON_PAUSE:"icons/pause",ICON_HOME:"icons/home",ICON_ENDLESS_MODE:"icons/endless-icon",BUTTON_CLOSE:"buttons/close",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_BIG:"buttons/blue-big",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_BIG:"buttons/green-big",BUTTON_GREEN_SMALL:"buttons/green-small",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_BLUE_SMALL:"buttons/blue-small",BUTTON_BLUE_DASHBOARD:"buttons/blue-dashboard",BUTTON_GREEN_DASHBOARD:"buttons/green-dashboard",BUTTON_GREEN_LONG_LEADERBOARD:"buttons/green-long-leaderboard",BUTTON_BLUE_BACK:"buttons/blue-back",BUTTON_BLUE_INVITE:"buttons/blue-invite",BUTTON_GREEN_LONG_2:"buttons/green-long-2",BUTTON_GREEN_REVIVE:"buttons/green-revive",BUTTON_GREEN_REVIVE_2:"buttons/green-revive-2",BUTTON_BLUE_REVIVE:"buttons/blue-revive",SWITCH_ON:"switch/on",SWITCH_OFF:"switch/off",SWITCH_PANEL_ON:"switch/panel-on",SWITCH_PANEL_OFF:"switch/panel-off",NO_THANKS_TEXT:"texts/no-thanks",NO_THANKS_TEXT_RU:"texts/no-thanks-ru",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",JSON:"./assets/textures/"+s+"x/effects-resources.json",TEXTURE:"./assets/textures/"+s+"x/effects-resources.png",FRAME:{BLANK:"blank",AURA:"aura",GLOW:"glow",FX_COMET:"comet",FX_SPARK:"spark",FX_STAR_YELLOW:"star-yellow",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+s+"x/",JSON:"./assets/textures/"+s+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_STAR_WHITE:"star-white",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle"}},GAMEPLAY:{KEY:"gameplay-resources",JSON:"./assets/textures/"+s+"x/gameplay-resources.json",TEXTURE:"./assets/textures/"+s+"x/gameplay-resources.png",FRAME:{BLANK:"blank",TOP_BG_LONG:"top-bg-long",TEXT_FAILED:"text/failed",TEXT_GAMEOVER:"text/gameover",TEXT_FAILED_RU:"text/failed-ru",TEXT_GAMEOVER_RU:"text/gameover-ru",ICON_COIN:"icons/coin",ICON_PAUSE:"icons/pause",ICON_DOUBT:"icons/doubt",ICON_EXCLAMATION:"icons/exclamation",OTHER_COIN_SHADOW:"other/coin-shadow",BACKGROUND_BG_1:"background/bg-1",BACKGROUND_TABLE_TOP:"background/table-1",BACKGROUND_TABLE_MIDDLE:"background/table-2",BACKGROUND_TABLE_BOTTOM:"background/table-3",BACKGROUND_TABLE_SIDE:"background/side",BACKGROUND_BRICK_FLOOR:"background/whole-brick",LEVEL_PROGRESS_BG_LEFT:"level-progress/bg-left",LEVEL_PROGRESS_BG_MID:"level-progress/bg-middle",LEVEL_PROGRESS_BG_RIGHT:"level-progress/bg-right",LEVEL_PROGRESS_BAR_LEFT:"level-progress/bar-left",LEVEL_PROGRESS_BAR_MID:"level-progress/bar-middle",LEVEL_PROGRESS_BAR_RIGHT:"level-progress/bar-right",LEVEL_PROGRESS_MOUSE_HEAD:"level-progress/head-mouse",LEVEL_PROGRESS_CHEESE_ICON:"level-progress/cheese"}},COLLECT_OBJECTS:{KEY:"collect-obj-resources",FRAME:{COLLECT_COIN:"coin",COLLECT_GIFT_HEART:"gift-heart",COLLECT_GIFT_SQUARE:"gift-square",COLLECT_GIFT_CIRCLE:"gift-circle",COIN_PREFIX:"coin/coin-"}},DECOR_OBJECTS_BEHIND:{KEY:"decor-obj-resources",FRAME:{DECOR_BEHIND_FORK:"fork",DECOR_BEHIND_GLOVE:"glove",DECOR_BEHIND_KNIFE:"knife",DECOR_BEHIND_SPOON:"spoon",DECOR_BEHIND_FORK_2:"fork-2",DECOR_BEHIND_BOOK_1:"book-1",DECOR_BEHIND_BOOK_2:"book-2",DECOR_BEHIND_BOOK_3:"book-3",DECOR_BEHIND_BOOK_4:"book-4",DECOR_BEHIND_BOOK_5:"book-5",DECOR_BEHIND_SANDWICH:"sandwich",DECOR_BEHIND_COOKIES_1:"cookies-1",DECOR_BEHIND_COOKIES_2:"cookies-2",DECOR_BEHIND_WOOD_SPOON:"wood-spoon",DECOR_BEHIND_ROLLING_PIN:"rolling-pin",DECOR_BEHIND_CRAYON_BLUE:"crayon-blue",DECOR_BEHIND_CRAYON_GREEN:"crayon-green",DECOR_BEHIND_CRAYON_PINK_YELLOW:"crayon-pink-yellow"}},MOVEMENT_MODIFIER_OBJECTS:{KEY:"movement-modifier-obj-resources",FRAME:{MOVEMENT_MODIFIER_LIQUID:"liquid",MOVEMENT_MODIFIER_LIQUID_1:"liquid-1",MOVEMENT_MODIFIER_LIQUID_2:"liquid-2",MOVEMENT_MODIFIER_LIQUID_3:"liquid-3",MOVEMENT_MODIFIER_LIQUID_4:"liquid-4",MOVEMENT_MODIFIER_LIQUID_5:"liquid-5",MOVEMENT_MODIFIER_BOXING:"boxing",MOVEMENT_MODIFIER_CONVEYOR:"conveyor",BOXING_PREFIX:"boxing/boxing-",CONVEYOR_PREFIX:"conveyor/conveyor-"}},MOVING_OBJECTS:{KEY:"moving-obj-resources",FRAME:{MOVING_TANK:"tank",MOVING_ICECREAM_TRUCK:"icecream-truck",TANK_PREFIX:"tank/tank-",ICECREAM_TRUCK_PREFIX:"ice-cream-truck/icecream-truck-"}},STATIC_OBJECTS:{KEY:"static-obj-resources",FRAME:{STATIC_TOY:"toy",STATIC_COCA:"coca",STATIC_BALL:"ball",STATIC_CHEST:"chest",STATIC_BOOKS:"books",STATIC_APPLE:"apple",STATIC_FRIES:"fries",STATIC_CLOCK:"clock",STATIC_HOTDOG:"hotdog",STATIC_BANANA:"banana",STATIC_ORANGE:"orange",STATIC_ERASER:"eraser",STATIC_CACTUS:"cactus",STATIC_PENCIL:"pencil",STATIC_CUPCAKE:"cupcake",STATIC_CHEST_2:"chest-2",STATIC_TOASTER:"toaster",STATIC_SANDWICH:"sandwich",STATIC_MILK_TEA:"milk-tea",STATIC_HAMBURGER:"hamburger",STATIC_MILK_GLASS:"milk-glass",STATIC_MILK_TEA_2:"milk-tea-2",STATIC_SOFT_DRINK:"soft-drink-1",STATIC_MILK_BOTTLE:"milk-bottle",STATIC_GUMMY_CANDY:"gummy-candy",STATIC_WATERMELON_2:"watermelon-2",STATIC_ORANGE_JUICE:"orange-juice",STATIC_GAVEL_BOTTLE:"gavel-bottle",STATIC_CANDY_BOTTLE:"candy-bottle",STATIC_WATERMELON_1:"watermelon-1",STATIC_SUGAR_BOTTLE:"sugar-bottle",STATIC_CRAB:"crab",STATIC_SPACESHIP:"spaceship",STATIC_BALLOON:"balloon",STATIC_CANDY_STAR:"candy-star",STATIC_CANDY_UMBRELLA:"candy-umbrella",STATIC_CAT_MASK:"cat-mask",STATIC_DESK_PHONE:"desk-phone",STATIC_DYING_TREE:"dying-tree",STATIC_ECLOCK:"eclock",STATIC_GIFT_BOX:"gift-box",STATIC_KING_CHESS_PIECE:"king",STATIC_KNIGHT_CHESS_PIECE:"knight",STATIC_MARBLE_BALL:"marble-ball",STATIC_MARBLE_BALL_GROUP:"marble-ball-group",STATIC_ORIGAMI_BIRD:"origami-bird",STATIC_ORIGAMI_RABBIT:"origami-rabbit",STATIC_PIGGY_BANK:"piggy-bank",STATIC_QUEEN_CHESS_PIECE:"queen",STATIC_SQUARE_ORIGAMI:"square-origami",STATIC_TEDDY_BEAR:"teddy-bear",STATIC_ZIPPO_LIGHTER:"zippo"}},SUDDEN_OBJECTS:{KEY:"sudden-obj-resources",FRAME:{SUDDEN_SANDWICH:"sandwich",SUDDEN_FALLING_BREAD:"falling-bread",SUDDEN_FALLING_BREAD_PREFIX:"sandwich/falling-bread-",SUDDEN_SANDWICH_PREFIX:"sandwich/sandwich-"}},WATCHER:{KEY:"watcher-resources",FRAME:{BOY_HAND_LEFT:"boy/hand-left",BOY_HAND_RIGHT:"boy/hand-right",BOY_HAND_UP_LEFT:"boy/hand-up-left",BOY_HAND_UP_RIGHT:"boy/hand-up-right",BOY_HEAD_NORMAL:"boy/head-normal",BOY_HEAD_LOOKING:"boy/head-looking",BOY_HEAD_MISSING:"boy/head-missing",BOY_HEAD_EMPTY_FACE:"boy/lookActionComponents/head",BOY_EYE:"boy/lookActionComponents/eye",BOY_IRIS:"boy/lookActionComponents/iris",BOY_HEAD_DETECTED:"boy/detect/detect-1",SQUID_GAME_GIRL_HAND_LEFT:"squid-game-girl/hand-left",SQUID_GAME_GIRL_HAND_RIGHT:"squid-game-girl/hand-right",SQUID_GAME_GIRL_HAND_UP_LEFT:"squid-game-girl/hand-up-left",SQUID_GAME_GIRL_HAND_UP_RIGHT:"squid-game-girl/hand-up-right",SQUID_GAME_GIRL_HEAD_NORMAL:"squid-game-girl/head-normal",SQUID_GAME_GIRL_HEAD_LOOKING:"squid-game-girl/head-looking",SQUID_GAME_GIRL_HEAD_MISSING:"squid-game-girl/head-missing",SQUID_GAME_GIRL_HEAD_DETECTED:"squid-game-girl/detect/detect-1",BOY_DETECT_PREFIX:"boy/detect/detect-",SQUID_GAME_GIRL_DETECT_PREFIX:"squid-game-girl/detect/detect-"}},OTHER_OBJECTS:{KEY:"other-obj-resources",FRAME:{DECOR_HANDKERCHIEF_1:"decor-obj/handkerchief-1",DECOR_HANDKERCHIEF_2:"decor-obj/handkerchief-2",DECOR_HANDKERCHIEF_3:"decor-obj/handkerchief-3",DECOR_HANDKERCHIEF_4:"decor-obj/handkerchief-4",DECOR_HANDKERCHIEF_5:"decor-obj/handkerchief-5",DECOR_HANDKERCHIEF_6:"decor-obj/handkerchief-6",GOAL_CHEESE_1:"goal-obj/cheese-1",GOAL_CHEESE_2:"goal-obj/cheese-2",GOAL_CHEESE_3:"goal-obj/cheese-3",INTERACTABLE_JOYSTICK:"interactable-obj/joystick",INTERACTABLE_RED_BUTTON_UP:"interactable-obj/red-button-up",INTERACTABLE_JOYSTICK_DOWN:"interactable-obj/joystick-down",INTERACTABLE_BLUE_BUTTON_UP:"interactable-obj/blue-button-up",INTERACTABLE_RED_BUTTON_DOWN:"interactable-obj/red-button-down",INTERACTABLE_BLUE_BUTTON_DOWN:"interactable-obj/blue-button-down",SEETHROUGH_GLASS:"seethrough-obj/glass",SEETHROUGH_GLASSES:"seethrough-obj/glasses",SEETHROUGH_CRYSTALL_BALL:"seethrough-obj/crystall-ball",SEETHROUGH_EMPTY_BOTTLE_1:"seethrough-obj/empty-bottle-1",SEETHROUGH_EMPTY_BOTTLE_2:"seethrough-obj/empty-bottle-2",SEETHROUGH_KING_CHESS_PIECE:"seethrough-obj/king",SEETHROUGH_KNIGHT_CHESS_PIECE:"seethrough-obj/knight",SEETHROUGH_QUEEN_CHESS_PIECE:"seethrough-obj/queen",SPEED_MOD_CHOCOLATE_1:"speed-modifier-obj/chocolate",SPEED_MOD_CHOCOLATE_2:"speed-modifier-obj/chocolate-2",SPEED_MOD_CHOCOLATE_3:"speed-modifier-obj/chocolate-3",SPEED_MOD_CHOCOLATE_4:"speed-modifier-obj/chocolate-4",SPEED_MOD_CHOCOLATE_5:"speed-modifier-obj/chocolate-5",SPEED_MOD_SKATEBOARD:"speed-modifier-obj/skateboard",UNKNOWN_ALIEN:"unknown-obj/alien"}},MONKEY:{KEY:"monkey-resources",FRAME:{OBSTRUCTING_MONKEY:"monkey-1",MONKEY_PREFIX:"monkey-"}},OWL:{KEY:"owl-resources",FRAME:{OBSTRUCTING_OWL:"owl-1",OWL_PREFIX:"owl-"}},BALLOON:{KEY:"balloon-resources",FRAME:{TRAP_BALLOON:"balloon-1",BALLOON_PREFIX:"balloon-"}},SPACESHIP:{KEY:"spaceship-resources",FRAME:{TRAP_SPACESHIP:"spaceship-1",SPACESHIP_PREFIX:"spaceship-"}},CRAB:{KEY:"crab-resources",FRAME:{TRAP_CRAB:"crab-1",CRAB_PREFIX:"crab-"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(a.EFFECTS.FRAME=(0,n.Z)({},a.ANIMATION_SCENE.FRAME,a.EFFECTS.FRAME)),t.Z=a},143:function(e,t,i){"use strict";i.d(t,{C:function(){return s},K:function(){return a}});var n=i(100),s={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},a={SWITCH:i.n(n)()("SWITCH")}},62:function(e,t,i){"use strict";i.d(t,{Ks:function(){return a},o4:function(){return s}});var n=i(219),s={READY_SCREEN:"READY_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",ENDLESS_RESULT_SCREEN:"ENDLESS_RESULT_SCREEN",GAME_UI_SCREEN:"GAME_UI_SCREEN",GAMEPLAY_SCREEN:"GAMEPLAY_SCENE",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",LEADERBOARDS_SCREEN:"LEADERBOARDS_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",CONGRATULATION_SCREEN:"CONGRATULATION_SCREEN",NOT_ENOUGH_COINS_SCREEN:"NOT_ENOUGH_COINS_SCREEN",TUTORIAL_SCREEN:"TUTORIAL_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN"},a={UI_SCREEN:n.Z.PLAYER-1,SCREEN:200,POPUP:300,PRIORITY:999}},79:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",DAILY_REWARD:"daily_reward",DIAMONDS_EAT:"diamonds_eat",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",START_GAME:"start_game",BEEP:"beep",WATCHER_DETECTED:"watcher_detected",WATCHER_NOT_DETECTED:"watcher_not_detected",WATCHER_SIGHT:"watcher_sight",LEVEL_COMPLETE:"level_complete",LEVEL_FAIL:"level_fail",BREAD_FALL:"bread_fall",ROCKET_LAUNCH:"rocket_launch",COIN_COLLECT:"coin_collect",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small"}},634:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var n=i(17),s=i(2),a=i(20),r=i(63),o=a.Z.DEFAULT,c=o.KEY,h=o.FRAME,u=function(e){function t(t,i){var s;return(s=e.call(this,t,0,0,c,h.ICON_COIN)||this).onUpdate=void 0,s.onComplete=void 0,s.positions=void 0,s.eatAnimation=void 0,s.setWorldSize(28,28),s.positions=i,s.setDepth(r.Z.PRIORITY),s.createAnimation(),s.scene.add.existing((0,n.Z)(s)),s}(0,s.Z)(t,e);var i=t.prototype;return i.createAnimation=function(){var e=this,t=1/GameCore.Utils.Image.getImageScale(),i=this.positions,n=i.from,s=i.to;this.eatAnimation=this.scene.add.tween({targets:this,duration:1125,ease:"Circ.easeInOut",paused:!0,props:{x:{from:n.x,to:s.x},y:{from:n.y,to:s.y},scale:{from:t,to:t}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},i.run=function(){this.eatAnimation.play()},t}(Phaser.GameObjects.Image),l=a.Z.DEFAULT,d=l.KEY,p=l.FRAME,f=function(e){function t(t,i,s){var a;return(a=e.call(this,t,d,p.ICON_COIN)||this).onUpdate=void 0,a.onComplete=void 0,a.emitter=void 0,a.circle=void 0,a.createEmitters(i,s),a.setActive(!1),a.setVisible(!1),a.scene.add.existing((0,n.Z)(a)),a}(0,s.Z)(t,e);var i=t.prototype;return i.createEmitters=function(e,t){var i=this,n=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:p.ICON_COIN,angle:{min:0,max:360},speed:{min:210,max:340},scale:{start:n,end:n},lifespan:5e3,emitCallback:function(e){e.accelerationX=-e.velocityX/1.2,e.accelerationY=-e.velocityY/1.2},deathCallback:function(n){var s=new u(i.scene,{from:{x:n.x,y:n.y},to:{x:e,y:t}});s.onUpdate=function(){"function"===typeof i.onUpdate&&i.onUpdate()},s.onComplete=function(){"function"===typeof i.onComplete&&i.onComplete()},s.setDepth(r.Z.ON_TOP),s.run()}})},i.explode=function(e,t,i,n){void 0===n&&(n=100),this.setActive(!0),this.setVisible(!0),this.circle||(this.circle=new Phaser.Geom.Circle(t,i,n)),this.emitter.deathZone=new Phaser.GameObjects.Particles.Zones.DeathZone(this.circle,!1),this.emitter.explode(e,t,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},631:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.EFFECTS,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,i.emitter=void 0,i.createEmitZone(),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},i.run=function(e,t,i,n,s){this.stop(),this.reset(),this.emitZone.setSize(n,s),this.emitZone.setPosition(t-n/2,i-s/2),this.emitter.setQuantity(e),this.emitter.start()},i.explode=function(e,t,i){this.emitter||this.reset(),this.emitter.explode(e,t,i)},i.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},i.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},629:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.EFFECTS,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t,r,o.FX_SPARK)||this).deathZone=void 0,i.emitter=void 0,i.createDeathZone(),i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},i.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.ANIMATION_STAR_X+"1",speed:{min:85,max:150},alpha:{start:1,end:0},tint:[8443204,2928867,12013036,16376097,15285798],scale:e/2,deathZone:{source:this.deathZone,type:"onLeave"},lifespan:1e3})},i.explode=function(e,t,i,n){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=n,this.deathZone.setPosition(t,i),this.emitter.explode(e,t,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},627:function(e,t,i){"use strict";i.d(t,{Z:function(){return Te}});var n=i(45),s=i(17),a=i(2),r=i(20),o=i(628),c=o.Z.RIBBON_A,h=c.KEY,u=c.TEXTURE,l=c.FRAME_RATE,d=c.END,p=c.PREFIX,f=c.ZERO_PAD,g=function(e){function t(t){var i={repeat:-1,frameRate:l,frames:t.generateFrameNames(u,{prefix:p,end:d,zeroPad:f,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,h,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),m=o.Z.RIBBON_B,v=m.KEY,y=m.TEXTURE,E=m.FRAME_RATE,S=m.END,T=m.PREFIX,b=m.ZERO_PAD,A=function(e){function t(t){var i={repeat:-1,frameRate:E,frames:t.generateFrameNames(y,{prefix:T,end:S,zeroPad:b,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,v,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),C=o.Z.RIBBON_C,O=C.KEY,I=C.TEXTURE,w=C.FRAME_RATE,P=C.END,_=C.PREFIX,R=C.ZERO_PAD,k=function(e){function t(t){var i={repeat:-1,frameRate:w,frames:t.generateFrameNames(I,{prefix:_,end:P,zeroPad:R,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,O,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),x=o.Z.RIBBON_D,L=x.KEY,D=x.TEXTURE,B=x.FRAME_RATE,N=x.END,M=x.PREFIX,Z=x.ZERO_PAD,G=function(e){function t(t){var i={repeat:-1,frameRate:B,frames:t.generateFrameNames(D,{prefix:M,end:N,zeroPad:Z,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,L,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),F=o.Z.CONFETTI_STAR_X,U=F.KEY,H=F.TEXTURE,j=F.FRAME_RATE,Y=F.END,K=F.PREFIX,W=F.ZERO_PAD,V=function(e){function t(t){var i={repeat:-1,frameRate:j,frames:t.generateFrameNames(H,{prefix:K,end:Y,zeroPad:W,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,U,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),z=o.Z.CONFETTI_STAR_Y,X=z.KEY,J=z.TEXTURE,q=z.FRAME_RATE,Q=z.END,$=z.PREFIX,ee=z.ZERO_PAD,te=function(e){function t(t){var i={repeat:-1,frameRate:q,frames:t.generateFrameNames(J,{prefix:$,end:Q,zeroPad:ee,start:1}),showOnStart:!0};return e.call(this,t,X,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),ie=i(38),ne=i.n(ie),se=i(48),ae=i.n(se),re=i(39),oe=i.n(re),ce=i(116),he=i.n(ce),ue=i(100),le=i.n(ue),de=i(151),pe=i.n(de);function fe(e,t){var i="undefined"!==typeof le()&&pe()(e)||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){var i;if(!e)return;if("string"===typeof e)return ge(e,t);var n=oe()(i=Object.prototype.toString.call(e)).call(i,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return he()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var me=function(e){function t(t){var i,n,s;return(s=e.call(this,t)||this).scene=void 0,s.ribbon=void 0,s.graphics=void 0,s.colorUse=void 0,s.lastChange=void 0,s.currentFrame=void 0,s.isYoyo=void 0,s.isGravityChanged=void 0,s.points=void 0,s.scene=t.manager.scene,s.points=ne()(i=ae()(n=new Array(10)).call(n,null)).call(i,(function(){return{x:0,y:0}})),s.isYoyo=!1,s.isGravityChanged=!1,s.lastChange=0,s.currentFrame=-1,s.createGraphics(),s.randomRibbonUsedWhenFall(),s}(0,a.Z)(t,e);var i=t.prototype;return i.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){case 0:default:this.ribbon=this.scene.anims.get(o.Z.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(o.Z.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(o.Z.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(o.Z.RIBBON_D.KEY)}},i.setRibbonPosition=function(e,t){var i;ne()(i=this.points).call(i,(function(i){i.x=e,i.y=t}))},i.createGraphics=function(){var e=[8443204,2928867,12013036,16376097,15285798];this.colorUse=e[Phaser.Math.Between(0,e.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var t=this.emitter.manager,i=t.x,n=t.y,s=t.depth;this.graphics.setDepth(s),this.graphics.setPosition(i,n)},i.update=function(t,i,n){var s=e.prototype.update.call(this,t,i,n);return this.updateFrames(t),this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity(),this.updateColor(),s},i.updateFrames=function(e){this.lastChange+=e,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},i.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},i.updateGraphics=function(){if(this.graphics.visible){for(var e,t=fe(this.points);!(e=t()).done;){if(0===e.value.y)return}this.graphics.clear(),this.graphics.strokePoints(this.points)}},i.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},i.updateVelocity=function(){this.graphics.visible&&(this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-12,12):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-10,6):this.velocityX+=Phaser.Math.Between(-6,10))},i.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},t}(Phaser.GameObjects.Particles.Particle),ve=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.isYoyo=void 0,i.isGravityChanged=void 0,i.lastChange=void 0,i.currentFrame=void 0,i.star=void 0,i.starX=void 0,i.starY=void 0,i.isYoyo=!1,i.isGravityChanged=!1,i.lastChange=0,i.currentFrame=-1,i.scene=t.manager.scene,i.starX=i.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY),i.starY=i.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY),i.star=i.starX,i}(0,a.Z)(t,e);var i=t.prototype;return i.update=function(t,i,n){var s=e.prototype.update.call(this,t,i,n);return this.updateGravity(),this.updateVelocity(),this.updateFrameRate(),this.updateFrames(t),s},i.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},i.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},i.updateFrames=function(e){if(this.lastChange+=e,this.lastChange>=this.star.msPerFrame){var t=Phaser.Math.RND.between(0,1);this.star=t>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},i.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},t}(Phaser.GameObjects.Particles.Particle),ye=r.Z.EFFECTS,Ee=ye.KEY,Se=ye.FRAME,Te=function(e){function t(t){var i;return(i=e.call(this,t,Ee,Se.BLANK)||this).emitterConfetti=void 0,i.emitterRibbons=void 0,i.ribbonConfig=void 0,i.confettiConfig=void 0,i.width=void 0,i.height=void 0,i.emitterRibbons=[],i.emitterConfetti=[],i.createConfigs(),i.createAnimations(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.createConfigs=function(){var e=1/GameCore.Utils.Image.getImageScale();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:Se.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4e3,max:6e3},rotate:{start:0,end:1800,random:!0},scale:{min:.6*e,max:e},particleClass:me},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:Se.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:8e3},rotate:{start:0,end:1080},scale:{min:.6*e,max:e},particleClass:ve}},i.createAnimations=function(){if(!this.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY)){var e=new V(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_X.KEY,e)}if(!this.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY)){var t=new te(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(o.Z.RIBBON_A.KEY)){var i=new g(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_A.KEY,i)}if(!this.scene.anims.get(o.Z.RIBBON_B.KEY)){var n=new A(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_B.KEY,n)}if(!this.scene.anims.get(o.Z.RIBBON_C.KEY)){var s=new k(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_C.KEY,s)}if(!this.scene.anims.get(o.Z.RIBBON_D.KEY)){var a=new G(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_D.KEY,a)}},i.run=function(e,t,i,n){this.setPosition(e,t),this.width=i,this.height=n,this.createEmitters(),this.emitterConfetti.forEach((function(e){e.emitParticle(25)})),this.emitterRibbons.forEach((function(e){e.emitParticle(20)}))},i.stop=function(){this.emitterConfetti.forEach((function(e){e.killAll()})),this.emitterRibbons.forEach((function(e){e.killAll()})),this.kill()},i.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},i.createConfettiLeftEmitter=function(){var e=(0,n.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),t=this.createEmitter(e);this.emitterConfetti.push(t)},i.createConfettiRightEmitter=function(){var e=this.width,t=(0,n.Z)({},this.confettiConfig,{x:e,speedX:{min:-5,max:-90}}),i=this.createEmitter(t);this.emitterConfetti.push(i)},i.createRibbonLeftEmitter=function(){var e=(0,n.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(e){e.setRibbonPosition(0,0)}}),t=this.createEmitter(e);this.emitterRibbons.push(t)},i.createRibbonRightEmitter=function(){var e=this.width,t=(0,n.Z)({},this.ribbonConfig,{x:e,speedX:{min:-20,max:-80},emitCallback:function(t){t.setRibbonPosition(e,0)}}),i=this.createEmitter(t);this.emitterRibbons.push(i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},633:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.EFFECTS,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t,r,o.FX_SPARK)||this).deathZone=void 0,i.emitter=void 0,i.createDeathZone(),i.createEmitters(),i.setActive(!1),i.setVisible(!1),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},i.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},i.explode=function(e,t,i,n){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=n,this.deathZone.setPosition(t,i),this.emitter.explode(e,t,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},636:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.EFFECTS,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,i.emitter=void 0,i.createEmitZone(),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},i.run=function(e,t,i,n,s){this.stop(),this.reset(),this.emitZone.setSize(n,s),this.emitZone.setPosition(t-n/2,i-s/2),this.emitter.setQuantity(e),this.emitter.start()},i.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},i.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},632:function(e,t,i){"use strict";var n=i(17),s=i(2),a=i(20).Z.EFFECTS,r=a.KEY,o=a.FRAME,c=function(e){function t(t){var i;return(i=e.call(this,t,r,o.FX_COMET)||this).emitZone=void 0,i.emitter=void 0,i.createEmitZone(),i.createEmitters(),i.scene.add.existing((0,n.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},i.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},i.run=function(e,t,i,n,s){this.stop(),this.emitZone.setSize(n,s),this.emitZone.setPosition(t-n/2,i-s/2),this.emitter.setQuantity(e),this.emitter.start()},i.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},470:function(e,t,i){"use strict";var n=i(20),s={BOY_DETECT:{KEY:"boy-detect",TEXTURE:n.Z.WATCHER.KEY,PREFIX:n.Z.WATCHER.FRAME.BOY_DETECT_PREFIX,FRAME_RATE:2,START:1,END:4,ZERO_PAD:1},SQUID_GAME_GIRL_DETECT:{KEY:"squid-game-girl-detect",TEXTURE:n.Z.WATCHER.KEY,PREFIX:n.Z.WATCHER.FRAME.SQUID_GAME_GIRL_DETECT_PREFIX,FRAME_RATE:2,START:1,END:4,ZERO_PAD:1},PLAYER_IDLE:{KEY:"idle"},PLAYER_HIDE:{KEY:"hide_loop"},PLAYER_HIDE_START:{KEY:"hide_start"},PLAYER_RUNNING:{KEY:"skateboard"},PLAYER_WALKING:{KEY:"move"},PLAYER_LUMBERING:{KEY:"move_coca"},PLAYER_STARTLE:{KEY:"scare"},PLAYER_ESCAPE:{KEY:"turn_left"},PLAYER_CONGRATULATION:{KEY:"celebrate"},PLAYER_SLIDE:{KEY:"move_water"},PLAYER_PUSH:{KEY:"boxing_punch"},COIN:{KEY:"coin",TEXTURE:n.Z.COLLECT_OBJECTS.KEY,PREFIX:n.Z.COLLECT_OBJECTS.FRAME.COIN_PREFIX,FRAME_RATE:8,START:1,END:8,ZERO_PAD:1},COIN_FASTER_X10:{KEY:"coin-faster-x10",TEXTURE:n.Z.COLLECT_OBJECTS.KEY,PREFIX:n.Z.COLLECT_OBJECTS.FRAME.COIN_PREFIX,FRAME_RATE:24,START:1,END:8,ZERO_PAD:1},TANK:{KEY:"tank",TEXTURE:n.Z.MOVING_OBJECTS.KEY,PREFIX:n.Z.MOVING_OBJECTS.FRAME.TANK_PREFIX,FRAME_RATE:7,START:1,END:7,ZERO_PAD:1},CRAB:{KEY:"crab",TEXTURE:n.Z.CRAB.KEY,PREFIX:n.Z.CRAB.FRAME.CRAB_PREFIX,FRAME_RATE:20,START:1,END:12,ZERO_PAD:1},MONKEY:{KEY:"monkey",TEXTURE:n.Z.MONKEY.KEY,PREFIX:n.Z.MONKEY.FRAME.MONKEY_PREFIX,FRAME_RATE:4,START:1,END:8,ZERO_PAD:1},OWL:{KEY:"owl",TEXTURE:n.Z.OWL.KEY,PREFIX:n.Z.OWL.FRAME.OWL_PREFIX,FRAME_RATE:8,START:1,END:32,ZERO_PAD:1},BALLOON:{KEY:"balloon",TEXTURE:n.Z.BALLOON.KEY,PREFIX:n.Z.BALLOON.FRAME.BALLOON_PREFIX,FRAME_RATE:12,START:1,END:17,ZERO_PAD:1},SPACESHIP:{KEY:"spaceship",TEXTURE:n.Z.SPACESHIP.KEY,PREFIX:n.Z.SPACESHIP.FRAME.SPACESHIP_PREFIX,FRAME_RATE:9,START:1,END:10,ZERO_PAD:1},ICECREAM_TRUCK:{KEY:"icecream-truck",TEXTURE:n.Z.MOVING_OBJECTS.KEY,PREFIX:n.Z.MOVING_OBJECTS.FRAME.ICECREAM_TRUCK_PREFIX,FRAME_RATE:9,START:1,END:9,ZERO_PAD:1},BOXING:{KEY:"boxing",TEXTURE:n.Z.MOVEMENT_MODIFIER_OBJECTS.KEY,PREFIX:n.Z.MOVEMENT_MODIFIER_OBJECTS.FRAME.BOXING_PREFIX,FRAME_RATE:20,START:1,END:6,ZERO_PAD:1},CONVEYOR_OPERATE:{KEY:"conveyor-operate",TEXTURE:n.Z.MOVEMENT_MODIFIER_OBJECTS.KEY,PREFIX:n.Z.MOVEMENT_MODIFIER_OBJECTS.FRAME.CONVEYOR_PREFIX,FRAME_RATE:6,START:1,END:3,ZERO_PAD:1}};t.Z=s},469:function(e,t){"use strict";for(var i=GameCore.Configs.Gameplay.NormalMaxLevel,n=[{key:"level-test",mapJson:"./assets/jsons/levels/level-test.json",backgroundId:"kitchen"}],s=1;s<=i;s++)n.push({key:"level-"+s,mapJson:"./assets/jsons/levels/level"+s+".json",backgroundId:"kitchen"});n.push({key:"level-from-json",mapJson:"",backgroundId:"kitchen"}),t.Z=n},219:function(e,t){"use strict";var i=function(e){return e[e.BACKGROUND=0]="BACKGROUND",e[e.WATCHER=1]="WATCHER",e[e.WATCHER_EYE=2]="WATCHER_EYE",e[e.WATCHER_MARK=3]="WATCHER_MARK",e[e.TABLE=4]="TABLE",e[e.DECOR=5]="DECOR",e[e.DECOR_BEHIND=6]="DECOR_BEHIND",e[e.GROUND=7]="GROUND",e[e.SPEED_MOD_LOW=8]="SPEED_MOD_LOW",e[e.MOVEMENT=9]="MOVEMENT",e[e.SIGHT=10]="SIGHT",e[e.GOAL=11]="GOAL",e[e.MOVING=12]="MOVING",e[e.TRAP=13]="TRAP",e[e.SEETHROUGH=14]="SEETHROUGH",e[e.STATIC=15]="STATIC",e[e.SPEED_MOD=16]="SPEED_MOD",e[e.INTERACTABLE=17]="INTERACTABLE",e[e.COLLECTIBLE=18]="COLLECTIBLE",e[e.UNKNOWN=19]="UNKNOWN",e[e.PLAYER=20]="PLAYER",e[e.FOREGROUND=21]="FOREGROUND",e[e.OBSTRUCT=22]="OBSTRUCT",e}(i||{});t.Z=i},229:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(2),s=i(31),a=function(e){function t(t,i,n){var s;return(s=e.call(this,t,0,0,i,n)||this).setOrigin(0,0),s}return(0,n.Z)(t,e),t}(Phaser.GameObjects.Zone),r=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,n.Z)(t,e);var i=t.prototype;return i.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},i.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),i=this.world.getWorldSize(),n=i.width,s=i.height;e.setZoom(t),e.centerOn(n/2,s/2)},i.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,i=e.height;this.gameZone=new a(this,t,i)},i.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},i.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},i.fontSize=function(e){return e/1.5},i.createBackground=function(e,t,i,n){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var s=this.gameZone,a=s.displayWidth,r=s.displayHeight,o=Math.max(a/this.background.width,r/this.background.height);this.background.setScale(o),GameCore.Utils.Valid.isNumber(i)&&this.background.setAlpha(i),GameCore.Utils.Valid.isNumber(n)&&this.background.setTint(n),Phaser.Display.Align.In.Center(this.background,this.gameZone)},i.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var i=e.selector,n=e.callback,s=t.storage.watch(i,n);t.unsubscribeList.push(s)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},i.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},i.logEventOpen=function(){this.analytics.event(s._.SCREEN_OPEN,{screen_name:this.getSceneName()})},i.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},635:function(e,t,i){"use strict";i.d(t,{Z:function(){return te}});var n=i(24),s=i(2),a=i(21),r=i.n(a),o=i(56),c=i.n(o),h=i(55),u=i.n(h),l=i(206),d=i.n(l),p=i(48),f=i.n(p),g=i(113),m=i(114),v=i(112),y=i(148),E=i(78),S=i(147),T=i(226),b=i(227),A=i(97),C=i(20),O=i(62),I=i(79),w=i(45),P=i(38),_=i.n(P),R=[{id:1,type:"coin",value:50},{id:2,type:"coin",value:75},{id:3,type:"coin",value:100},{id:4,type:"coin",value:125},{id:5,type:"coin",value:150},{id:6,type:"coin",value:200}],k=function(){var e=(0,n.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=i(457),L={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},D=i(61),B=i(456),N=(0,D.P1)([function(e){var t;return null==(t=e[B.L])?void 0:t.rewards}],(function(e){return e})),M=(0,D.P1)([function(e){var t;return null==(t=e[B.L])?void 0:t.isRequesting}],(function(e){return e})),Z=GameCore.Configs.DailyRewards,G=function(e){return function(t){var i,n=window.game.player.getCustomData("dailyRewarded")||{},s=n.logDays,a=void 0===s?[]:s,r=n.lastRewarded,o=void 0===r?0:r,c=new Date,h=new Date(o),l=new Date(h.toDateString()),d=Math.abs(c.valueOf()-l.valueOf()),p=Math.floor(d/864e5)>1,f=Z.CheckInterrupt&&p||a.length>=Z.MaxDays,g=f?[!1]:u()(i=[]).call(i,a,[!1]);F(g);var m=_()(e).call(e,(function(e,t){var i=t<g.length,n=g.length===t+1,s=!1===g[t],a=L.WAITING;return n?a=L.READY:f?a=L.WAITING:i&&s?a=L.SKIPPED:i&&(a=L.REWARDED),(0,w.Z)({},e,{status:a})}));t({type:x.m,payload:{rewards:m}})}},F=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},U=i(94),H=i(636),j=C.Z.DEFAULT,Y=j.KEY,K=j.FRAME,W=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.blockBg=void 0,n.titleText=void 0,n.iconStatus=void 0,n.currencyIcon=void 0,n.currencyText=void 0,n.starTwinkle=void 0,n.payload=i,n.setName("Day: "+i.day),n.draw(),n.setStatus(),n}(0,s.Z)(t,e);var i=t.prototype;return i.setStatus=function(){switch(this.payload.status){case L.READY:this.setStatusReady(),this.runAnimations();break;case L.SKIPPED:this.setStatusSkipped();break;case L.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},i.setStatusReady=function(){this.blockBg.setFrame(K.DAILY_DAY_BG_BLUE),this.setCurrentIconByDay(this.payload.day)},i.setStatusRewarded=function(){this.iconStatus.setVisible(!0),this.iconStatus.setFrame(K.ICON_CHECK),this.iconStatus.setWorldSize(38,30),this.blockBg.setFrame(K.DAILY_DAY_BG_GREEN),this.setCurrentIconByDay(this.payload.day)},i.setStatusSkipped=function(){this.iconStatus.setVisible(!0),this.iconStatus.setFrame(K.ICON_CANCEL),this.iconStatus.setWorldSize(30,31),this.blockBg.setFrame(K.DAILY_DAY_BG_GREY),this.setCurrentIconByDay(this.payload.day)},i.setStatusWaiting=function(){this.setCurrentIconByDay(this.payload.day)},i.setCurrentIconByDay=function(e){var t=K.LOGO_COIN_1;switch(e){case 1:t=K.LOGO_COIN_1,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38,38);break;case 2:t=K.LOGO_COIN_2,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(54,37.5);break;case 3:t=K.LOGO_COIN_3,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(53.5,45.5);break;case 4:t=K.LOGO_COIN_4,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(65.5,47.5);break;case 5:t=K.LOGO_COIN_5,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(65.5,50.5);break;case 6:t=K.LOGO_COIN_6,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(70,47.5)}},i.draw=function(){this.createBlockBG(),this.updateBlockSize(),this.createTitleText(),this.createCurrencyText(),this.createCurrencyIcon(),this.createIconStatus()},i.createBlockBG=function(){this.blockBg=this.scene.make.image({key:Y,frame:K.DAILY_DAY_BG_GREY}),this.blockBg.setWorldSize(79,95),this.add(this.blockBg)},i.updateBlockSize=function(){var e=this.blockBg,t=e.width,i=e.height;this.setSize(t,i)},i.createTitleText=function(){var e=this.payload.day,t=this.scene.lang.getText({key:"DAY_X",variables:[e]});this.titleText=this.scene.make.bitmapText({font:A.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),this.titleText.setY(-36),this.add(this.titleText)},i.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:Y,frame:K.LOGO_COIN_1}),this.currencyIcon.setWorldSize(38.5,36.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.blockBg)},i.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:Y,frame:K.ICON_CHECK}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(41,32),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,0,10)},i.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:A.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"+"+e,origin:{x:.5,y:.5}}),this.currencyText.setY(35),this.currencyText.setAlpha(.8),this.currencyText.setTint(9661216),this.add(this.currencyText)},i.runAnimations=function(){this.runSparksIdle()},i.runSparksIdle=function(){this.starTwinkle||(this.starTwinkle=new H.Z(this.scene),this.add(this.starTwinkle));var e=this.currencyIcon,t=e.x,i=e.y,n=e.width,s=e.height;this.starTwinkle.run(1,t,i,n,s),this.starTwinkle.emitter.setLifespan({min:4e3,max:5e3}),this.starTwinkle.emitter.setFrequency(400)},t}(Phaser.GameObjects.Container),V=C.Z.DEFAULT,z=V.KEY,X=V.FRAME,J=GameCore.Configs,q=J.Network,Q=J.DailyRewards,$={id:0,type:"coin",value:0},ee=function(e){function t(t,i,s,a){var o;return(o=e.call(this,t,i,s,a)||this).onReward=void 0,o.onSkipAd=void 0,o.onNoAd=void 0,o.logDays=void 0,o.rewardsData=void 0,o.popup=void 0,o.loading=void 0,o.dayBlocks=void 0,o.claimButton=void 0,o.claimButton2X=void 0,o.backgroundFadeInAnimation=void 0,o.popupShowUpAnimation=void 0,o.popupExitsAnimation=void 0,o.contentShowUpAnimation=void 0,o.adsTimer=void 0,o.handleClosePopup=function(){o.runCloseAnimation()},o.handleOnClaim=function(){var e=o.getCurrentRewardValue();o.claimReward(e)},o.handleOnClaimX2=(0,n.Z)(r().mark((function e(){var t,i,n,s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.scene,i=t.audio,n=t.game,e.prev=1,o.claimButton.setDisabled(!0),o.claimButton2X.setDisabled(!0),n.globalScene.screen.open(O.o4.NOTIFY_SCREEN,{message:o.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=9,new(c())((function(e,t){var i;null==(i=o.adsTimer)||i.remove(),o.adsTimer=o.scene.time.delayedCall(q.Timeout,t),o.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?o.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):o.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,o.scene.ads.showRewardedVideoAsync();case 11:n.globalScene.screen.close(O.o4.NOTIFY_SCREEN),s=o.getCurrentRewardValue(),o.claimReward(2*s),e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(1),o.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,o.getScreenName(),e.t0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return o.onSkipAd(),e.abrupt("return");case 23:o.onNoAd();case 24:return e.prev=24,null==(a=o.adsTimer)||a.destroy(),i.unmuteAll(),i.playMusic(),o.claimButton.setDisabled(!1),o.claimButton2X.setDisabled(!1),e.finish(24);case 31:case"end":return e.stop()}}),e,null,[[1,16,24,31]])}))),o.updateRewardsData=(0,n.Z)(r().mark((function e(){var t,i,s,a,c,h,l,d,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.scene,s=i.storage,a=i.player,e.next=3,s.dispatch(function(){var e=(0,n.Z)(r().mark((function e(t,i){var n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i(),!M(n)){e.next=4;break}return e.abrupt("return");case 4:return t({type:x.I,payload:{}}),e.next=7,k();case 7:s=e.sent,t(G(s));case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}());case 3:if(c=s.getState(),!((null==(h=N(c)||[])?void 0:h.length)<1)){e.next=7;break}return e.abrupt("return");case 7:o.rewardsData=h,l=a.getCustomData("dailyRewarded"),d=(l||{}).logDays,p=void 0===d?[]:d,o.logDays=u()(t=[]).call(t,p);case 11:case"end":return e.stop()}}),e)}))),o.checkOpenable=(0,n.Z)(r().mark((function e(){var t,i,n,s,a,c,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.scene.player,i=t.getCustomData("dailyRewarded"),s=(n=i||{}).logDays,a=void 0===s?[]:s,c=n.lastRewarded,h=void 0===c?0:c,!(a.length>Q.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(Q.MockTime>0)){e.next=9;break}if(!(Date.now()-h>=1e3*Q.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,U.Gm)(h)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),o.rewardsData=[],o.createPopup(),o.createCloseButton(),o.createPopupContents(),o.setDepth(O.Ks.POPUP),o.background.setAlpha(.8),o}(0,s.Z)(t,e);var i=t.prototype;return i.open=function(){var t=(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this),t.next=3,this.updateRewardsData();case 3:this.createDayBlocks(),this.runOpenAnimation();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.claimReward=function(e){var t;"function"===typeof this.onReward&&((null==(t=this.logDays)?void 0:t.length)<1||(this.logDays[this.logDays.length-1]=!0,F(this.logDays),this.onReward(e),this.scene.audio.playSound(I.Z.DAILY_REWARD),this.runCloseAnimation()))},i.getCurrentRewardValue=function(){var e,t=d()(e=this.rewardsData).call(e,(function(e){return e.status===L.READY}));return(null==t?void 0:t.value)||0},i.getRewardByDay=function(e){var t;return d()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||$},i.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(I.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},i.runCloseAnimation=function(){this.scene.audio.playSound(I.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},i.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new g.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}}})),this.backgroundFadeInAnimation.play()},i.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new y.Z({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},i.runPopupContentEntrancesAnimation=function(e,t){var i,n=this.dayBlocks.getChildren();n.length<1||(null==(i=this.contentShowUpAnimation)||i.remove(),this.contentShowUpAnimation=new v.Z({targets:n,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupExitsAnimation||(this.popupExitsAnimation=new m.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.scene.screen.close(i.name)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},i.createPopup=function(){this.popup=new b.Z(this.scene,0,0,302,350),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},i.createCloseButton=function(){var e=new S.Z(this.scene,{key:z,frame:X.BUTTON_CLOSE,width:32,height:31});e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,14,11),this.popup.add(e)},i.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},i.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:z,frame:X.RIBBON_BLUE});t.setWorldSize(261,79);var i=25;if("ru"===this.scene.lang.getCurrentLanguage())i=19;var n=this.scene.make.bitmapText({font:A.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(i),text:this.scene.lang.Text.DAILY_REWARDS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(n,t,0,-12),e.add([t,n]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,7)},i.createLoading=function(){this.loading=new T.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},i.createDayBlocks=function(){var e,t,i=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var n=Q.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:n}),f()(t=new Array(n)).call(t,null).forEach((function(e,t){var n=i.createDayBlock(t+1);i.dayBlocks.add(n)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:92,cellHeight:112,x:-86.5,y:-75})},i.createDayBlock=function(e){var t=this.getRewardByDay(e),i=t.type,n=t.value,s=t.status,a=void 0===s?"":s,r=new W(this.scene,{day:e,type:i,value:n,status:a});return r.setAlpha(0),this.popup.add(r),r},i.createClaimButton=function(){this.claimButton=new E.Z(this.scene,z,X.BUTTON_BLUE,93.5,41),this.claimButton.setName("Claim");var e=22;if("ru"===this.scene.lang.getCurrentLanguage())e=16;var t=this.scene.make.bitmapText({font:A.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,this.claimButton,0,1),this.claimButton.setPosition(-80,130),this.claimButton.add(t),this.popup.add(this.claimButton),this.claimButton.onClick=this.handleOnClaim},i.createClaimX2Button=function(){this.claimButton2X=new E.Z(this.scene,z,X.BUTTON_GREEN_LONG,136.5,40),this.claimButton2X.setName("ClaimX2");var e=22;if("ru"===this.scene.lang.getCurrentLanguage())e=16;var t=this.scene.make.bitmapText({font:A.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM+" x2",origin:{x:.5,y:.5}}),i=this.scene.make.image({key:z,frame:X.ICON_ADS});i.setPosition(-40,0),i.setWorldSize(37,29),Phaser.Display.Align.In.Center(t,this.claimButton2X,24,1),this.claimButton2X.add([t,i]),this.claimButton2X.setPosition(60,130),this.popup.add(this.claimButton2X),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),te=ee},468:function(e,t,i){"use strict";i.d(t,{Z:function(){return dE}});for(var n=i(24),s=i(17),a=i(2),r=i(21),o=i.n(r),c=i(55),h=i.n(c),u=i(38),l=i.n(u),d=i(115),p=i.n(d),f=i(113),g=i(20),m=i(37),v={targets:[],repeat:3,duration:33,ease:Phaser.Math.Easing.Expo.InOut,props:{y:5},yoyo:!0},y=function(e){function t(t){var i,n,a;return(a=e.call(this,v,t)||this).targetY=void 0,a.shakeAmount=void 0,a.handleSwitchPosition=function(){var e;a.shakeAmount*=.7,null==(e=a.tween)||e.updateTo("y",a.targetY+a.shakeAmount)},null!=(i=a.config)&&i.props?(a.targetY=a.config.targets[0].y,a.shakeAmount=a.config.props.y-a.targetY,null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_REPEAT,a.handleSwitchPosition),a):(0,s.Z)(a)}return(0,a.Z)(t,e),t}(m.Z),E=g.Z.GAMEPLAY,S=E.KEY,T=(E.FRAME,function(e){function t(t){var i,n=t.scene,a=t.x,r=t.y;return(i=e.call(this,n,a,r,S,n.lang.Texture.FAILED)||this).initImage(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.initImage=function(){var e=121.5;if("ru"===this.scene.lang.getCurrentLanguage())e=266.5/321*121.5;this.setWorldSize(266.5,e)},i.runAnimation=function(){new y({targets:[this],repeat:5,duration:60,props:{y:this.y+15}}).play()},t}(Phaser.GameObjects.Image)),b=i(478),A=i(63),C=i(97),O=i(62),I=GameCore.Configs.Gameplay.EndlessMaxLevel,w=[{key:"level-test",mapJson:"./assets/jsons/levels/level-test.json",backgroundId:"kitchen"}],P=1;P<=I;P++)w.push({key:"endless-level-"+P,mapJson:"./assets/jsons/levels/endless-level-"+P+".json",backgroundId:"kitchen"});w.push({key:"level-from-json",mapJson:"",backgroundId:"kitchen"});var _=w,R=i(469),k=GameCore.Configs.Gameplay,x=function(){function e(e){this.scene=void 0,this.level=0,this.currentEndlessLevel=0,this.targetScore=0,this.levelConfig=void 0,this.endlessLevelConfig=void 0,this.scene=e}var t=e.prototype;return t.init=function(){var e=this.scene.player.getCustomData("level");this.level=e||k.DefaultLevel,k.AlwayStartDefaultLevel&&(this.level=k.DefaultLevel),this.setConfig(this.level)},t.getConfig=function(){return this.levelConfig},t.getConfigByLevel=function(e){return R.Z[e]||null},t.getEndlessLevelConfig=function(e){return this.currentEndlessLevel=e,this.endlessLevelConfig=_[e],_[e]},t.getCurrentEndlessLevelConfig=function(){return this.endlessLevelConfig},t.nextLevel=function(){var e=this.canLevelUp(this.level);return e===this.level?(this.scene.player.setCustomData("level",k.DefaultLevel),this.setConfig(k.DefaultLevel),!0):(this.scene.player.setCustomData("level",e),this.setConfig(e),!0)},t.canLevelUp=function(e){var t=e+1;return t>R.Z.length-2?e:!!R.Z[t]?t:e},t.setConfig=function(e,t){void 0===t&&(t=!1);var i=t?R.Z.length-1:R.Z.length-2,n=e>i?i:e;this.level=n,this.levelConfig=R.Z[n]},t.isLastLevel=function(e){return e===R.Z.length-2},e}(),L=x,D={READY:"ready",COLLECTED:"collected"},B=i(219),N=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.isActivated=void 0,r.status=void 0,r.collectibleType=void 0,r.payload=void 0,r.id=a.id,r.payload=a,r.isActivated=!1,r.collectibleType="collectible",r.status=D.READY,r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isCollected=function(){return this.status===D.COLLECTED},i.reuseObject=function(e,t){this.isActivated=!1,this.alpha=1,this.status=D.READY,this.revive(),this.setPosition(e,t)},i.initSprite=function(){this.setOrigin(.5,1),this.setDepth(B.Z.COLLECTIBLE),this.scene.physics.world.enable(this)},i.getValue=function(){return this.payload.value},i.activateCollectible=function(){var e=this.payload,t=e.callback,i=e.value;this.isActivated||(t(i),this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),this.scene.tweens.add({targets:this,alpha:0,duration:300,ease:"Power2",onComplete:this.endCollectible.bind(this)}),this.isActivated=!0)},i.endCollectible=function(){this.kill(),this.anims.stop(),this.status=D.COLLECTED},t}(Phaser.GameObjects.Sprite),M=N,Z={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden"},G=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.decorBehindType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=Z.READY,r.decorBehindType="decorBehind",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===Z.READY},i.isActive=function(){return this.status===Z.ACTIVE},i.isInactive=function(){return this.status===Z.INACTIVE},i.isHidden=function(){return this.status===Z.HIDDEN},i.reuseObject=function(e,t){this.status=Z.READY,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=Z.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=Z.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=Z.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.DECOR)},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),F=G,U=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.decorType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=Z.READY,r.decorType="decor",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===Z.READY},i.isActive=function(){return this.status===Z.ACTIVE},i.isInactive=function(){return this.status===Z.INACTIVE},i.isHidden=function(){return this.status===Z.HIDDEN},i.reuseObject=function(e,t){this.status=Z.READY,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=Z.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=Z.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=Z.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.DECOR)},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),H=U,j={ACTIVE:"active",INACTIVE:"inactive"},Y=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.goalType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.goalType="goal",r.status=j.ACTIVE,r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.GOAL),this.scene.physics.world.enable(this)},i.isActive=function(){return this.status===j.ACTIVE},i.isInactive=function(){return this.status===j.INACTIVE},i.reuseObject=function(e,t){this.status=j.ACTIVE,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=j.INACTIVE,this.kill()},t}(Phaser.GameObjects.Sprite),K=Y,W={READY:"ready",ACTIVATED:"activated"},V=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.status=void 0,r.interactableType=void 0,r.id=a.id,r.payload=a,r.interactableType="interactable",r.status=W.READY,r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.activateTrigger=function(){this.status=W.ACTIVATED},i.isReady=function(){return this.status===W.READY},i.isActivated=function(){return this.status===W.ACTIVATED},i.getTriggerID=function(){var e=this.payload.triggerID;if("number"==typeof e)return[e];var t=e.split(", "),i=[];return t.forEach((function(e){var t=parseInt(e);i.push(t)})),i},i.reuseObject=function(e,t,i){this.revive(),this.status=W.READY,this.setPosition(e,t),this.payload.triggerID=i},i.hideObject=function(){this.status=W.ACTIVATED,this.kill()},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.INTERACTABLE),this.scene.physics.world.enable(this)},t}(Phaser.GameObjects.Sprite),z=V,X={STANDING:"standing",RUNNING:"running",STOPPED:"stopped"},J=i(470),q=function(e){this.movingObject=void 0,this.movingObject=e},Q=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.movingObject.play(t,!0),this.movingObject.setStatus(i)},t}(q),$=Q,ee=function(){function e(e){this.movingObject=void 0,this.runCommand=void 0,this.movingObject=e,this.addRunCommand(),this.movingObject.setStatus(X.STANDING)}var t=e.prototype;return t.run=function(){this.runCommand.execute()},t.stop=function(){this.movingObject.setStatus(X.STOPPED)},t.addRunCommand=function(){this.runCommand=new $(this.movingObject,{status:X.RUNNING,animKey:J.Z.ICECREAM_TRUCK.KEY})},e}(),te=ee,ie=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).isActive=void 0,r.hasTriggerObject=void 0,r.actions=void 0,r.payload=void 0,r.blockLine=void 0,r.status=void 0,r.movingObjectType=void 0,r.leftBlockLineOffset=void 0,r.rightBlockLineOffset=void 0,r.blockHeight=void 0,r.payload=a,r.hasTriggerObject=!1,r.movingObjectType="moving",r.leftBlockLineOffset=0,r.rightBlockLineOffset=0,r.blockHeight=.5,r.initSprite(),r.createBlockLine(),r.initState(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.initState=function(){this.actions=new te(this)},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.MOVING),this.scene.physics.world.enable(this);var e=this.payload,t=e.isAffectedByGravity,i=e.direction;this.body.setAllowGravity(t),"left"===i&&this.setFlipX(!0)},i.createBlockLine=function(){var e=this.payload,t=e.bodyWidth,i=e.bodyHeight;this.blockLine=new Phaser.Geom.Line(this.x-this.leftBlockLineOffset,this.y-i*this.blockHeight,this.x+t-this.rightBlockLineOffset,this.y-i*this.blockHeight)},i.getStatus=function(){return this.status},i.getDirection=function(){return this.payload.direction},i.setStatus=function(e){this.status=e},i.getID=function(){return this.payload.id},i.isTriggeredByInteractable=function(){return this.hasTriggerObject},i.setTriggeredByInteractable=function(){this.hasTriggerObject=!0},i.getBlockLine=function(){return this.blockLine},i.getSpeed=function(){return this.payload.speed},i.getMaximumDistance=function(){return this.payload.maximumDistance},i.isStanding=function(){return this.status===X.STANDING},i.isRunning=function(){return this.status===X.RUNNING},i.isStopped=function(){return this.status===X.STOPPED},i.reuseObject=function(e,t,i,n,s){this.setStatus(X.STANDING),this.revive(),this.setPosition(t,i),this.hasTriggerObject=!1,this.payload.id=e,this.payload.speed=n,this.payload.maximumDistance=s},i.hideObject=function(){this.setStatus(X.STOPPED),this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),this.kill()},i.onTouch=function(){this.actions.run()},i.update=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);if(this.isActive=e,e){var t=this.payload,i=t.bodyWidth,n=t.bodyHeight;this.blockLine.setTo(this.x+this.leftBlockLineOffset,this.y-n*this.blockHeight,this.x+i-this.rightBlockLineOffset,this.y-n*this.blockHeight)}else this.isStopped()&&this.kill()},t}(Phaser.GameObjects.Sprite),ne=ie,se={READY:"ready",ACTIVATED:"activated"},ae=function(e){function t(t,i){var n;return(n=e.call(this,t,0,0)||this).payload=void 0,n.status=void 0,n.symbolType=void 0,n.payload=i,n.symbolType="frontTrigger",n.status=se.READY,n.initArea(),n.scene.add.existing((0,s.Z)(n)),n}(0,a.Z)(t,e);var i=t.prototype;return i.initArea=function(){this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.isReady=function(){return this.status===se.READY},i.isActivated=function(){return this.status===se.ACTIVATED},i.reuseObject=function(e,t,i){this.revive(),this.payload.duration=i,this.status=se.READY,this.setPosition(e,t)},i.hideObject=function(){this.status=se.ACTIVATED,this.kill()},i.onPlayerTouch=function(){this.createFrontObstructingObject(),this.hideObject()},t}(Phaser.GameObjects.Rectangle),re=ae,oe={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden"},ce=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.seethroughObjectType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=oe.READY,r.seethroughObjectType="seethrough",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.SEETHROUGH),this.scene.physics.world.enable(this)},i.isReady=function(){return this.status===oe.READY},i.isActive=function(){return this.status===oe.ACTIVE},i.isInactive=function(){return this.status===oe.INACTIVE},i.isHidden=function(){return this.status===oe.HIDDEN},i.reuseObject=function(e,t){this.status=oe.READY,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=oe.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=oe.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=oe.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),he=ce,ue={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden"},le=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.speedModType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=ue.READY,r.speedModType="speedmod",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===ue.READY},i.isActive=function(){return this.status===ue.ACTIVE},i.isInactive=function(){return this.status===ue.INACTIVE},i.isHidden=function(){return this.status===ue.HIDDEN},i.reuseObject=function(e,t,i,n){this.status=ue.READY,this.revive(),this.setPosition(e,t),this.payload.speedBonusPercent=i,this.payload.speedDuration=n},i.hideObject=function(){this.status=ue.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=ue.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=ue.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.SPEED_MOD),this.scene.physics.world.enable(this)},i.getSpeedDuration=function(){return this.payload.speedDuration},i.getSpeedBonusPercent=function(){return this.payload.speedBonusPercent},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),de=le,pe={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden"},fe=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.status=void 0,r.staticObjectType=void 0,r.payload=void 0,r.blockLine=void 0,r.leftBlockLineOffset=void 0,r.rightBlockLineOffset=void 0,r.blockHeight=void 0,r.id=a.id,r.payload=a,r.status=pe.READY,r.staticObjectType="static",r.leftBlockLineOffset=0,r.rightBlockLineOffset=0,r.blockHeight=.5,r.initSprite(),r.createBlockLine(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===pe.READY},i.isActive=function(){return this.status===pe.ACTIVE},i.isInactive=function(){return this.status===pe.INACTIVE},i.isHidden=function(){return this.status===pe.HIDDEN},i.reuseObject=function(e,t){this.status=pe.READY,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=pe.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=pe.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=pe.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.STATIC),this.scene.physics.world.enable(this)},i.createBlockLine=function(){var e=this.payload,t=e.bodyWidth,i=e.bodyHeight;this.blockLine=new Phaser.Geom.Line(this.x+this.leftBlockLineOffset,this.y-i*this.blockHeight,this.x+t-this.rightBlockLineOffset,this.y-i*this.blockHeight)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload,t=e.bodyWidth,i=e.bodyHeight;this.blockLine.setTo(this.x+this.leftBlockLineOffset,this.y-i*this.blockHeight,this.x+t-this.rightBlockLineOffset,this.y-i*this.blockHeight)}this.isInactive()&&this.hideObject()},i.getBlockLine=function(){return this.blockLine},t}(Phaser.GameObjects.Sprite),ge=fe,me=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.id=a.id,r.payload=a,r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}return(0,a.Z)(t,e),t.prototype.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.UNKNOWN)},t}(Phaser.GameObjects.Image),ve=me,ye=function(e){function t(t,i){var n;return(n=e.call(this,t,0,0,i.width,i.height)||this).id=void 0,n.payload=void 0,n.status=void 0,n.symbolType=void 0,n.id=i.id,n.payload=i,n.status=se.READY,n.symbolType="watcherActivation",n.initArea(),n.scene.add.existing((0,s.Z)(n)),n}(0,a.Z)(t,e);var i=t.prototype;return i.initArea=function(){this.setOrigin(0,1),this.scene.physics.world.enable(this)},i.isReady=function(){return this.status===se.READY},i.isActivated=function(){return this.status===se.ACTIVATED},i.reuseObject=function(e,t){this.revive(),this.status=se.READY,this.setPosition(e,t)},i.hideObject=function(){this.status=se.ACTIVATED,this.kill()},i.onPlayerTouch=function(){if(!this.isActivated()){var e=this.payload.callback;"function"===typeof e&&e(),this.hideObject()}},t}(Phaser.GameObjects.Rectangle),Ee=ye,Se=function(){function e(e){this.scene=void 0,this.lastCheck=void 0,this.scene=e}var t=e.prototype;return t.init=function(){var e=this,t=this.scene.objectManager,i=t.goalList,n=t.decorList,s=t.symbolList,a=t.staticList,r=t.movingList,o=t.collectList,c=t.speedModList,h=t.seethroughList,u=t.decorBehindList,l=t.interactableList;this.lastCheck=0,n.setVisible(!1),n.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)})),u.setVisible(!1),u.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)})),s.getChildren().forEach((function(e){e instanceof ve||(e.body.enable=!1)})),i.setVisible(!1),i.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof K&&(t.body.enable=!1)})),a.setVisible(!1),a.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof ge&&(t.body.enable=!1)})),r.setVisible(!1),r.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof ne&&(t.body.enable=!1)})),o.setVisible(!1),o.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof M&&(t.body.enable=!1)})),c.setVisible(!1),c.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof de&&(t.body.enable=!1)})),h.setVisible(!1),h.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof he&&(t.body.enable=!1)})),l.setVisible(!1),l.getChildren().forEach((function(t){e.setVisibleIfUnknownObj(t)||t instanceof z&&(t.body.enable=!1)}))},t.setVisibleIfUnknownObj=function(e){return e instanceof ve&&(e.setVisible(!0),!0)},t.update=function(){var e=Date.now();e-this.lastCheck<100||(this.lastCheck=e,this.updateVisibleState())},t.updateVisibleState=function(){var e=this,t=this.scene.objectManager,i=t.goalList,n=t.decorList,s=t.symbolList,a=t.staticList,r=t.movingList,o=t.collectList,c=t.speedModList,h=t.seethroughList,u=t.decorBehindList,l=t.interactableList,d=this.scene.mapToolManager.isPlayerMoveBackward;i.getChildren().forEach((function(t){t instanceof K&&((!t.visible&&t.active||d)&&e.isInCamera(t)&&(t.revive(),t.body.enable=!0))})),n.getChildren().forEach((function(t){t instanceof H&&(t.isHidden()&&!d||!e.isInCamera(t)||(t.revive(),t.isReady()))})),s.getChildren().forEach((function(t){(t instanceof Ee||t instanceof re)&&!t.body.enable&&e.isInCamera(t)&&(t.body.enable=!0)})),a.getChildren().forEach((function(t){t instanceof ge&&(t.isHidden()&&!d||!e.isInCamera(t)||(t.revive(),t.isReady(),t.body.enable=!0))})),r.getChildren().forEach((function(t){t instanceof ne&&(t.isStopped()&&!d||!e.isInCamera(t)||(t.revive(),t.isRunning(),t.body.enable=!0))})),o.getChildren().forEach((function(t){t instanceof M&&(!t.isCollected()&&e.isInCamera(t)&&(t.revive(),t.body.enable=!0))})),c.getChildren().forEach((function(t){t instanceof de&&(t.isHidden()&&!d||!e.isInCamera(t)||(t.revive(),t.isReady(),t.body.enable=!0))})),h.getChildren().forEach((function(t){t instanceof he&&(t.isHidden()&&!d||!e.isInCamera(t)||(t.revive(),t.isReady(),t.body.enable=!0))})),u.getChildren().forEach((function(t){t instanceof F&&(t.isHidden()&&!d||!e.isInCamera(t)||(t.revive(),t.isReady()))})),l.getChildren().forEach((function(t){t instanceof z&&((!t.visible&&t.active||d)&&e.isInCamera(t)&&(t.revive(),t.body.enable=!0))}))},t.isInCamera=function(e){var t=this.scene.mapToolManager.isPlayerMoveBackward?300:-300;return this.scene.cameras.main.worldView.contains(e.x,e.y)||this.scene.cameras.main.worldView.contains(e.x+t,e.y)},t.getStatistics=function(){var e=this.scene.objectManager,t=e.goalList,i=e.decorList,n=e.symbolList,s=e.staticList,a=e.movingList,r=e.collectList,o=e.speedModList,c=e.seethroughList,h=e.decorBehindList,u=e.interactableList,l=t.getLength()+i.getLength()+n.getLength()+s.getLength()+a.getLength()+r.getLength()+o.getLength()+c.getLength()+h.getLength()+u.getLength();return[t.getMatching("visible",!0).length+i.getMatching("visible",!0).length+n.getMatching("visible",!0).length+s.getMatching("visible",!0).length+a.getMatching("visible",!0).length+r.getMatching("visible",!0).length+o.getMatching("visible",!0).length+c.getMatching("visible",!0).length+h.getMatching("visible",!0).length+u.getMatching("visible",!0).length,l]},e}(),Te=Se,be={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Ae=be.STATUS,Ce=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Ae.READY)},t.start=function(){this.isRunning()||this.setState(Ae.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Ae.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Ae.READY},t.isRunning=function(){return this.state===Ae.RUNNING},t.isStopped=function(){return this.state===Ae.STOPPED},e}(),Oe=Ce,Ie=J.Z.BALLOON,we=Ie.KEY,Pe=Ie.TEXTURE,_e=Ie.FRAME_RATE,Re=Ie.START,ke=Ie.END,xe=Ie.PREFIX,Le=Ie.ZERO_PAD,De=function(e){function t(t){var i={repeat:0,frameRate:_e,frames:t.generateFrameNames(Pe,{prefix:xe,start:Re,end:ke,zeroPad:Le}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,we,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Be=De,Ne=J.Z.BOY_DETECT,Me=Ne.KEY,Ze=Ne.TEXTURE,Ge=Ne.FRAME_RATE,Fe=Ne.START,Ue=Ne.END,He=Ne.PREFIX,je=Ne.ZERO_PAD,Ye=function(e){function t(t){var i={repeat:0,frameRate:Ge,frames:t.generateFrameNames(Ze,{prefix:He,start:Fe,end:Ue,zeroPad:je}),showOnStart:!0,hideOnComplete:!1,skipMissedFrames:!0};return e.call(this,t,Me,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Ke=Ye,We=J.Z.COIN,Ve=We.KEY,ze=We.TEXTURE,Xe=We.FRAME_RATE,Je=We.START,qe=We.END,Qe=We.PREFIX,$e=We.ZERO_PAD,et=function(e){function t(t){var i={repeat:-1,frameRate:Xe,frames:t.generateFrameNames(ze,{prefix:Qe,start:Je,end:qe,zeroPad:$e}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Ve,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),tt=et,it=J.Z.CRAB,nt=it.KEY,st=it.TEXTURE,at=it.FRAME_RATE,rt=it.START,ot=it.END,ct=it.PREFIX,ht=it.ZERO_PAD,ut=function(e){function t(t){var i={repeat:-1,frameRate:at,frames:t.generateFrameNames(st,{prefix:ct,start:rt,end:ot,zeroPad:ht}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,nt,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),lt=ut,dt=J.Z.ICECREAM_TRUCK,pt=dt.KEY,ft=dt.TEXTURE,gt=dt.FRAME_RATE,mt=dt.START,vt=dt.END,yt=dt.PREFIX,Et=dt.ZERO_PAD,St=function(e){function t(t){var i={repeat:-1,frameRate:gt,frames:t.generateFrameNames(ft,{prefix:yt,start:mt,end:vt,zeroPad:Et}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,pt,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Tt=St,bt=J.Z.MONKEY,At=bt.KEY,Ct=bt.TEXTURE,Ot=bt.FRAME_RATE,It=bt.START,wt=bt.END,Pt=bt.PREFIX,_t=bt.ZERO_PAD,Rt=function(e){function t(t){var i={repeat:-1,frameRate:Ot,frames:t.generateFrameNames(Ct,{prefix:Pt,start:It,end:wt,zeroPad:_t}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,At,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),kt=Rt,xt=J.Z.SPACESHIP,Lt=xt.KEY,Dt=xt.TEXTURE,Bt=xt.FRAME_RATE,Nt=xt.START,Mt=xt.END,Zt=xt.PREFIX,Gt=xt.ZERO_PAD,Ft=function(e){function t(t){var i={repeat:0,frameRate:Bt,frames:t.generateFrameNames(Dt,{prefix:Zt,start:Nt,end:Mt,zeroPad:Gt}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Lt,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Ut=Ft,Ht=J.Z.TANK,jt=Ht.KEY,Yt=Ht.TEXTURE,Kt=Ht.FRAME_RATE,Wt=Ht.START,Vt=Ht.END,zt=Ht.PREFIX,Xt=Ht.ZERO_PAD,Jt=function(e){function t(t){var i={repeat:-1,frameRate:Kt,frames:t.generateFrameNames(Yt,{prefix:zt,start:Wt,end:Vt,zeroPad:Xt}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,jt,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),qt=Jt,Qt=J.Z.COIN_FASTER_X10,$t=Qt.KEY,ei=Qt.TEXTURE,ti=Qt.FRAME_RATE,ii=Qt.PREFIX,ni=Qt.ZERO_PAD,si=Qt.START,ai=Qt.END,ri=function(e){function t(t){var i={repeat:-1,frameRate:ti,frames:t.generateFrameNames(ei,{prefix:ii,zeroPad:ni,start:si,end:ai}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,$t,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),oi=ri,ci=J.Z.BOXING,hi=ci.KEY,ui=ci.TEXTURE,li=ci.FRAME_RATE,di=ci.START,pi=ci.END,fi=ci.PREFIX,gi=ci.ZERO_PAD,mi=function(e){function t(t){var i={repeat:0,frameRate:li,frames:t.generateFrameNames(ui,{prefix:fi,start:di,end:pi,zeroPad:gi}),showOnStart:!0,hideOnComplete:!1,skipMissedFrames:!0};return e.call(this,t,hi,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),vi=mi,yi=J.Z.CONVEYOR_OPERATE,Ei=yi.KEY,Si=yi.TEXTURE,Ti=yi.FRAME_RATE,bi=yi.START,Ai=yi.END,Ci=yi.PREFIX,Oi=yi.ZERO_PAD,Ii=function(e){function t(t){var i={repeat:-1,frameRate:Ti,frames:t.generateFrameNames(Si,{prefix:Ci,start:bi,end:Ai,zeroPad:Oi}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Ei,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),wi=Ii,Pi=J.Z.SQUID_GAME_GIRL_DETECT,_i=Pi.KEY,Ri=Pi.TEXTURE,ki=Pi.FRAME_RATE,xi=Pi.START,Li=Pi.END,Di=Pi.PREFIX,Bi=Pi.ZERO_PAD,Ni=function(e){function t(t){var i={repeat:0,frameRate:ki,frames:t.generateFrameNames(Ri,{prefix:Di,start:xi,end:Li,zeroPad:Bi}),showOnStart:!0,hideOnComplete:!1,skipMissedFrames:!0};return e.call(this,t,_i,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Mi=Ni,Zi=J.Z.OWL,Gi=Zi.KEY,Fi=Zi.TEXTURE,Ui=Zi.FRAME_RATE,Hi=Zi.START,ji=Zi.END,Yi=Zi.PREFIX,Ki=Zi.ZERO_PAD,Wi=function(e){function t(t){var i={repeat:-1,frameRate:Ui,frames:t.generateFrameNames(Fi,{prefix:Yi,start:Hi,end:ji,zeroPad:Ki}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Gi,i)||this}return(0,a.Z)(t,e),t}(Phaser.Animations.Animation),Vi=Wi,zi=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.scene=t,i.createAnimations(),i}(0,a.Z)(t,e);var i=t.prototype;return i.createAnimations=function(){var e=J.Z.COIN,t=J.Z.COIN_FASTER_X10,i=J.Z.BOXING,n=J.Z.TANK,s=J.Z.ICECREAM_TRUCK,a=J.Z.CONVEYOR_OPERATE,r=J.Z.BOY_DETECT,o=J.Z.SQUID_GAME_GIRL_DETECT;if(!this.scene.anims.exists(r.KEY)){var c=new Ke(this.scene.anims);this.scene.anims.add(r.KEY,c)}if(!this.scene.anims.exists(o.KEY)){var h=new Mi(this.scene.anims);this.scene.anims.add(o.KEY,h)}if(!this.scene.anims.exists(e.KEY)){var u=new tt(this.scene.anims);this.scene.anims.add(e.KEY,u)}if(!this.scene.anims.exists(t.KEY)){var l=new oi(this.scene.anims);this.scene.anims.add(t.KEY,l)}if(!this.scene.anims.exists(i.KEY)){var d=new vi(this.scene.anims);this.scene.anims.add(i.KEY,d)}if(!this.scene.anims.exists(n.KEY)){var p=new qt(this.scene.anims);this.scene.anims.add(n.KEY,p)}if(!this.scene.anims.exists(s.KEY)){var f=new Tt(this.scene.anims);this.scene.anims.add(s.KEY,f)}if(!this.scene.anims.exists(a.KEY)){var g=new wi(this.scene.anims);this.scene.anims.add(a.KEY,g)}},i.addOwlAnimation=function(){var e=J.Z.OWL;if(!this.scene.anims.exists(e.KEY)){var t=new Vi(this.scene.anims);this.scene.anims.add(e.KEY,t)}},i.addMonkeyAnimation=function(){var e=J.Z.MONKEY;if(!this.scene.anims.exists(e.KEY)){var t=new kt(this.scene.anims);this.scene.anims.add(e.KEY,t)}},i.addBalloonAnimation=function(){var e=J.Z.BALLOON;if(!this.scene.anims.exists(e.KEY)){var t=new Be(this.scene.anims);this.scene.anims.add(e.KEY,t)}},i.addSpaceshipAnimation=function(){var e=J.Z.SPACESHIP;if(!this.scene.anims.exists(e.KEY)){var t=new Ut(this.scene.anims);this.scene.anims.add(e.KEY,t)}},i.addCrabAnimation=function(){var e=J.Z.CRAB;if(!this.scene.anims.exists(e.KEY)){var t=new lt(this.scene.anims);this.scene.anims.add(e.KEY,t)}},t}(Oe),Xi=zi,Ji=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.scene=t,i}return(0,a.Z)(t,e),t}(Oe),qi=Ji,Qi=i(46),$i=i.n(Qi),en=i(54),tn=i(53),nn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="MapWithInvalidObjects",n.message=t||"Create map with invalid objects",n.payload=i,n}return(0,a.Z)(t,e),t}((0,tn.Z)(Error)),sn=nn,an=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="CreateMapFail",n.message=t||"Create map fail",n.payload=i,n}return(0,a.Z)(t,e),t}((0,tn.Z)(Error)),rn=an,on=g.Z.GAMEPLAY,cn=on.KEY,hn=on.FRAME,un=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).kitchenBG=void 0,n.setName(i),n.createKitchenBG(),n.scene.add.existing((0,s.Z)(n)),n}(0,a.Z)(t,e);var i=t.prototype;return i.updateBackgroundSize=function(){var e=this.kitchenBG,t=e.displayWidth,i=e.displayHeight;this.setSize(t,i)},i.createKitchenBG=function(){this.kitchenBG=this.scene.make.image({key:cn,frame:hn.BACKGROUND_BG_1}),this.add(this.kitchenBG),this.kitchenBG.setOrigin(0,0),this.kitchenBG.setWorldSize(380,265),this.updateBackgroundSize()},t}(Phaser.GameObjects.Container),ln=un,dn=g.Z.GAMEPLAY,pn=dn.KEY,fn=dn.FRAME,gn=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.map=void 0,i.tileset=void 0,i.tableLayer=void 0,i.background=void 0,i.tableTop=void 0,i.tableMiddle=void 0,i.tableBottom=void 0,i.tableSideBottom=void 0,i.leftBrickFloorImages=void 0,i.rightBrickFloorImages=void 0,i.scene=t,i.leftBrickFloorImages=[],i.rightBrickFloorImages=[],i}(0,a.Z)(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.createMap(),this.createBackground(),this.createTable(),this.createFloor()},i.createMap=function(){try{var e,t,i=this.scene,n=i.levelHandler,s=i.isEndlessMode?n.getCurrentEndlessLevelConfig():n.getConfig();null==(e=l()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:s.key}),l()(this).objects=l()(t=l()(this).objects).call(t,(function(e){var t;return $i()(t=e.name).call(t,"objects/objects/")>=0&&(e.name=e.name.replace(/^.*objects\/([^/]+)$/,"objects/$1")),e}));var a={level:n.level,layers:null};l()(this).objects.forEach((function(e){e.objects.forEach((function(t){var i=t||{},n=i.x,s=i.y,r=i.width,o=i.height;n&&s&&r&&o||(a.layers||(a.layers={}),a.layers[e.name]?a.layers[e.name].push(t):a.layers[e.name]=[t])}))})),a.layers&&(0,en.R0)(new sn("[DEBUG] Create map with invalid objects"),{debugData:a})}catch(r){(0,en.R0)(new rn,{error:r})}},i.createBackground=function(){var e=this.scene,t=e.levelHandler,i=e.isEndlessMode?t.getCurrentEndlessLevelConfig():t.getConfig();this.background||(this.background=new ln(this.scene,i.backgroundId)),this.background.revive(),this.background.setDepth(B.Z.BACKGROUND)},i.createTable=function(){this.tableTop||(this.tableTop=this.scene.make.image({key:pn,origin:{x:0,y:0}})),this.tableTop.setVisible(!0),this.tableTop.setFrame(fn.BACKGROUND_TABLE_TOP),this.tableTop.setWorldSize(375,31),this.tableTop.setPosition(this.background.x,this.background.y+this.background.height),this.tableTop.setDepth(B.Z.TABLE),this.tableMiddle||(this.tableMiddle=this.scene.make.image({key:pn,origin:{x:0,y:0}})),this.tableMiddle.setVisible(!0),this.tableMiddle.setFrame(fn.BACKGROUND_TABLE_MIDDLE),this.tableMiddle.setWorldSize(375,75.5),this.tableMiddle.setPosition(this.background.x,this.tableTop.y+this.tableTop.height),this.tableMiddle.setDepth(B.Z.TABLE),this.tableBottom||(this.tableBottom=this.scene.make.image({key:pn,origin:{x:0,y:0}})),this.tableBottom.setVisible(!0),this.tableBottom.setFrame(fn.BACKGROUND_TABLE_BOTTOM),this.tableBottom.setWorldSize(375,125.5),this.tableBottom.setPosition(this.background.x,this.tableMiddle.y+this.tableMiddle.height),this.tableBottom.setDepth(B.Z.TABLE),this.tableSideBottom||(this.tableSideBottom=this.scene.make.image({key:pn,origin:{x:0,y:0}})),this.tableSideBottom.setVisible(!0),this.tableSideBottom.setFrame(fn.BACKGROUND_TABLE_SIDE),this.tableSideBottom.setWorldSize(375,58),this.tableSideBottom.setPosition(this.background.x,this.tableBottom.y+this.tableBottom.height),this.tableSideBottom.setDepth(B.Z.TABLE)},i.createFloor=function(){if(0==this.leftBrickFloorImages.length)for(var e=0;e<3;e++){var t=this.scene.make.image({key:pn,origin:{x:0,y:0}});t.setVisible(!0),t.setFrame(fn.BACKGROUND_BRICK_FLOOR),t.setWorldSize(375,116),t.setPosition(this.background.x,this.tableSideBottom.y+this.tableSideBottom.height+e*t.height),t.setDepth(B.Z.TABLE),this.leftBrickFloorImages.push(t)}var i=this.leftBrickFloorImages[0].x+this.leftBrickFloorImages[0].width;if(0==this.rightBrickFloorImages.length)for(var n=0;n<3;n++){var s=this.scene.make.image({key:pn,origin:{x:0,y:0}});s.setVisible(!0),s.setFrame(fn.BACKGROUND_BRICK_FLOOR),s.setWorldSize(375,116),s.setPosition(i,this.tableSideBottom.y+this.tableSideBottom.height+n*s.height),s.setDepth(B.Z.TABLE),this.rightBrickFloorImages.push(s)}},t}(Oe),mn=gn,vn=i(39),yn=i.n(vn),En=i(626),Sn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="PlayInWrongState",n.message=t||"Play in wrong state",n.payload=i,n}return(0,a.Z)(t,e),t}((0,tn.Z)(Error)),Tn=Sn,bn=Phaser.Input.Keyboard.Events,An=bn.KEY_UP,Cn=bn.KEY_DOWN,On=bn.COMBO_MATCH,In=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.isPlayerStand=void 0,i.isPlayerImmortal=void 0,i.isPlayerMoveBackward=void 0,i.touchZone=void 0,i.loadMapForm=void 0,i.loadMapInput=void 0,i.keystrokeLoadMapTimer=void 0,i.handleTogglePlayerStand=function(){i.isPlayerStand=!i.isPlayerStand,i.isPlayerStand?i.scene.mousePlayer.actions.hide():i.scene.mousePlayer.actions.walk()},i.handleTogglePlayerImmortal=function(){i.isPlayerImmortal=!i.isPlayerImmortal,i.isPlayerImmortal?i.scene.mousePlayer.spine.setAlpha(.5):i.scene.mousePlayer.spine.setAlpha(1)},i.handleMovePlayerBackward=function(){i.isPlayerMoveBackward=!0,i.scene.boyWatcher.actions.hide(),i.scene.mousePlayer.actions.hide(),i.scene.mousePlayer.x<200||(i.scene.mousePlayer.x-=15)},i.handleMovePlayerForward=function(){i.isPlayerMoveBackward=!1,i.scene.boyWatcher.actions.hide(),i.scene.mousePlayer.actions.hide(),i.scene.mousePlayer.x>l()(i.scene.mapManager).widthInPixels-550||(i.scene.mousePlayer.x+=15)},i.handleToggleWatcherStand=function(){i.scene.boyWatcher.actions.stand()},i.handleToggleWatcherHide=function(){i.scene.boyWatcher.actions.hide()},i.handleToggleWatcherDetect=function(){i.scene.boyWatcher.actions.detect()},i.handleToggleWatcherLook=function(){i.scene.boyWatcher.actions.look()},i.handleLoadMapNumber=function(e){var t;null==(t=i.keystrokeLoadMapTimer)||t.destroy(),i.keystrokeLoadMapTimer=i.scene.time.delayedCall(500,(function(){var t;if(!(e.size<4)){var n=yn()(t=e.keyCodes).call(t,3,e.size),s=+String.fromCharCode.apply(String,n);i.scene.stateManager.levelComplete(),i.scene.levelHandler.setConfig(s),i.scene.stateManager.nextLevel()}}))},i.handleShowLoadMapInput=function(){i.scene.boyWatcher.actions.hide(),i.scene.mousePlayer.actions.hide(),i.loadMapInput.style.display="flex"},i.handleStartLoadMapById=function(){try{i.loadMapInput.style.display="none";var e=document.getElementById("map-id");if(!e)return;var t=JSON.parse(e.value);i.scene.stateManager.levelComplete(),i.scene.levelHandler.setConfig(t),i.scene.stateManager.nextLevel()}catch(n){}},i.handleShowLoadMapForm=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.scene.boyWatcher.actions.hide(),i.scene.mousePlayer.actions.hide(),i.loadMapForm.style.display="flex";case 3:case"end":return e.stop()}}),e)}))),i.handleHideLoadMapForm=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.scene.stateManager.isRescuingState()&&(0,en.R0)(new Tn("Play in load map form"),{}),i.scene.stateManager.play(),i.loadMapForm.style.display="none";case 3:case"end":return e.stop()}}),e)}))),i.handleStartLoadMapJson=function(){var e=document.getElementById("map-json");if(e){var t=JSON.parse(e.value);i.scene.screen.open(O.o4.READY_SCREEN),i.scene.load.tilemapTiledJSON({key:"level-from-json",url:t}),i.scene.load.once(Phaser.Loader.Events.COMPLETE,i.handleLoadJsonMapCompleted),i.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){(0,en.R0)(new En.Z("Load next map json fail"),{file:null==e?void 0:e.url})})),i.scene.load.start()}},i.handleLoadJsonMapCompleted=function(){i.loadMapForm.style.display="none";var e=R.Z.length-1;i.scene.levelHandler.setConfig(e,!0),i.scene.startGame()},i.handleGameFail=function(){i.scene.stateManager.levelFail()},i.handleGameWin=function(){i.scene.stateManager.levelComplete()},i.scene=t,GameCore.Utils.Valid.isDebugger()?(i.createCombos(),i.createTouchZone(),i.createLoadMapForm(),i.createLoadMapInput(),i):(0,s.Z)(i)}(0,a.Z)(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.isPlayerStand=!1,this.isPlayerImmortal=!1,this.isPlayerMoveBackward=!1,this.scene.mousePlayer.spine.setAlpha(1),GameCore.Utils.Valid.isDebugger()&&(this.addKeystrokePlayerStand(),this.addKeystrokePlayerImmortal(),this.addKeystrokeWatcherStand(),this.addKeystrokeWatcherHide(),this.addKeystrokeWatcherDetect(),this.addKeystrokeWatcherLook(),this.addKeystrokeLoadMapByInput(),this.addKeystrokeLoadMapJson(),this.addKeystrokeStartMapNumber(),this.addKeystrokeGameResult())},i.stop=function(){e.prototype.stop.call(this),this.removeKeystrokePlayerStand(),this.removeKeystrokePlayerImmortal(),this.removeKeystrokePlayerMoveForward(),this.removeKeystrokePlayerMoveBackward(),this.removeKeystrokeWatcherStand(),this.removeKeystrokeWatcherHide(),this.removeKeystrokeWatcherDetect(),this.removeKeystrokeWatcherLook(),this.removeKeystrokeLoadMapByInput(),this.removeKeystrokeLoadMapJson(),this.removeKeystrokeLoadMapNumber(),this.removeKeystrokeGameResult()},i.addKeystrokePlayerStand=function(){this.scene.input.keyboard.on(An+"S",this.handleTogglePlayerStand)},i.removeKeystrokePlayerStand=function(){this.scene.input.keyboard.off(An+"S",this.handleTogglePlayerStand)},i.addKeystrokePlayerImmortal=function(){this.scene.input.keyboard.on(An+"I",this.handleTogglePlayerImmortal)},i.removeKeystrokePlayerImmortal=function(){this.scene.input.keyboard.off(An+"I",this.handleTogglePlayerImmortal)},i.addKeystrokePlayerMoveBackward=function(){this.scene.input.keyboard.on(Cn+"A",this.handleMovePlayerBackward)},i.removeKeystrokePlayerMoveBackward=function(){this.scene.input.keyboard.off(Cn+"A",this.handleMovePlayerBackward)},i.addKeystrokePlayerMoveForward=function(){this.scene.input.keyboard.on(Cn+"D",this.handleMovePlayerForward)},i.removeKeystrokePlayerMoveForward=function(){this.scene.input.keyboard.off(Cn+"D",this.handleMovePlayerForward)},i.addKeystrokeWatcherStand=function(){this.scene.input.keyboard.on(Cn+"UP",this.handleToggleWatcherStand)},i.removeKeystrokeWatcherStand=function(){this.scene.input.keyboard.off(Cn+"UP",this.handleToggleWatcherStand)},i.addKeystrokeWatcherHide=function(){this.scene.input.keyboard.on(Cn+"DOWN",this.handleToggleWatcherHide)},i.removeKeystrokeWatcherHide=function(){this.scene.input.keyboard.off(Cn+"DOWN",this.handleToggleWatcherHide)},i.addKeystrokeWatcherDetect=function(){this.scene.input.keyboard.on(Cn+"LEFT",this.handleToggleWatcherDetect)},i.removeKeystrokeWatcherDetect=function(){this.scene.input.keyboard.off(Cn+"LEFT",this.handleToggleWatcherDetect)},i.addKeystrokeWatcherLook=function(){this.scene.input.keyboard.on(Cn+"RIGHT",this.handleToggleWatcherLook)},i.removeKeystrokeWatcherLook=function(){this.scene.input.keyboard.off(Cn+"RIGHT",this.handleToggleWatcherLook)},i.createCombos=function(){for(var e=0;e<R.Z.length;e++)this.scene.input.keyboard.createCombo("map"+e,{resetOnMatch:!0,resetOnWrongKey:!0})},i.addKeystrokeStartMapNumber=function(){this.scene.input.keyboard.on(On,this.handleLoadMapNumber)},i.removeKeystrokeLoadMapNumber=function(){this.scene.input.keyboard.off(On,this.handleLoadMapNumber)},i.createTouchZone=function(){var e=this;this.touchZone=this.scene.add.zone(0,0,250,50),this.touchZone.setOrigin(0,.5),this.touchZone.setDepth(A.Z.ON_TOP),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.touchZone.x=e.scene.cameraFocus.x}))},i.createLoadMapInput=function(){this.loadMapInput=document.createElement("div"),this.loadMapInput.id="input-map",this.loadMapInput.style.height="100vh",this.loadMapInput.style.width="calc(100vw - 20px)",this.loadMapInput.style.padding="10px",this.loadMapInput.style.display="flex",this.loadMapInput.style.flexFlow="column",this.loadMapInput.style.position="absolute",this.loadMapInput.style.justifyContent="center",this.loadMapInput.style.backgroundColor="#000000cc",this.loadMapInput.innerHTML='<input id="map-id" style="height: 50px;text-align: center;font-size: 30px;"></input><input type="button" id="load-map-id" value="Load map" style="height:50px">',document.body.appendChild(this.loadMapInput);var e=document.getElementById("load-map-id");null==e||e.addEventListener("click",this.handleStartLoadMapById),this.loadMapInput.style.display="none"},i.addKeystrokeLoadMapByInput=function(){this.touchZone.setInteractive(),this.touchZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleShowLoadMapInput)},i.removeKeystrokeLoadMapByInput=function(){var e,t;null==(e=this.touchZone)||e.disableInteractive(),null==(t=this.touchZone)||t.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleShowLoadMapInput)},i.createLoadMapForm=function(){this.loadMapForm=document.createElement("div"),this.loadMapForm.id="form-json-map",this.loadMapForm.style.height="100vh",this.loadMapForm.style.width="calc(100vw - 20px)",this.loadMapForm.style.padding="10px",this.loadMapForm.style.display="flex",this.loadMapForm.style.flexFlow="column",this.loadMapForm.style.position="absolute",this.loadMapForm.style.justifyContent="center",this.loadMapForm.style.backgroundColor="#000000cc",this.loadMapForm.innerHTML='<textarea id="map-json" rows="15"></textarea><input type="button" id="load-map" value="Load map" style="height:50px">',document.body.appendChild(this.loadMapForm);var e=document.getElementById("load-map");null==e||e.addEventListener("click",this.handleStartLoadMapJson),this.loadMapForm.style.display="none"},i.addKeystrokeLoadMapJson=function(){this.scene.input.keyboard.on(An+"Q",this.handleHideLoadMapForm),this.scene.input.keyboard.on(An+"E",this.handleShowLoadMapForm)},i.removeKeystrokeLoadMapJson=function(){this.scene.input.keyboard.off(An+"Q",this.handleHideLoadMapForm),this.scene.input.keyboard.off(An+"E",this.handleShowLoadMapForm)},i.addKeystrokeGameResult=function(){this.scene.input.keyboard.on(An+"K",this.handleGameWin),this.scene.input.keyboard.on(An+"L",this.handleGameFail)},i.removeKeystrokeGameResult=function(){this.scene.input.keyboard.off(An+"K",this.handleGameWin),this.scene.input.keyboard.off(An+"L",this.handleGameFail)},t}(Oe),wn=In,Pn=i(64),_n=i.n(Pn),Rn={READY:"ready",PLAYING:"playing",ENDED:"ended"},kn=function(e){this.frontObstructingObject=void 0,this.frontObstructingObject=e},xn=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.frontObstructingObject.play(t,!0),this.frontObstructingObject.setStatus(i)},t}(kn),Ln=xn,Dn=function(){function e(e){this.frontObstructingObject=void 0,this.playCommand=void 0,this.frontObstructingObject=e,this.addPlayCommand(),this.frontObstructingObject.setStatus(Rn.READY),this.play()}var t=e.prototype;return t.play=function(){this.playCommand.execute()},t.end=function(){this.frontObstructingObject.setStatus(Rn.ENDED),this.frontObstructingObject.kill(),this.frontObstructingObject.anims.stop()},t.addPlayCommand=function(){this.playCommand=new Ln(this.frontObstructingObject,{status:Rn.PLAYING,animKey:J.Z.MONKEY.KEY})},e}(),Bn=Dn,Nn=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).payload=void 0,r.status=void 0,r.actions=void 0,r.frontObjectType=void 0,r.playerPosition=void 0,r.payload=a,r.frontObjectType="front",r.initSprite(),r.initState(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setDepth(B.Z.OBSTRUCT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.setPlayerPosition=function(e){this.playerPosition=e},i.initState=function(){this.actions=new Bn(this)},i.isReady=function(){return this.status===Rn.READY},i.isPlaying=function(){return this.status===Rn.PLAYING},i.isEnded=function(){return this.status===Rn.ENDED},i.setStatus=function(e){this.status=e},i.getStatus=function(){return this.status},i.getActiveDuration=function(){return this.payload.duration},i.reuseObject=function(e){this.setStatus(Rn.READY),this.revive(),this.payload.duration=e},i.hideObject=function(){this.actions.end()},i.update=function(){var e={x:this.playerPosition.x?this.playerPosition.x:0,y:this.playerPosition.y?this.playerPosition.y:0};this.setPosition(e.x,e.y)},t}(Phaser.GameObjects.Sprite),Mn=Nn,Zn=g.Z.STATIC_OBJECTS,Gn=Zn.KEY,Fn=Zn.FRAME,Un=function(e){function t(t,i){var n;return(n=e.call(this,t,Gn,Fn.STATIC_APPLE,i)||this).staticObjectType="apple",n.blockHeight=.42,n.leftBlockLineOffset=4,n}return(0,a.Z)(t,e),t}(ge),Hn=Un,jn=g.Z.STATIC_OBJECTS,Yn=jn.KEY,Kn=jn.FRAME,Wn=function(e){function t(t,i){var n;return(n=e.call(this,t,Yn,Kn.STATIC_BALL,i)||this).staticObjectType="ball",n.blockHeight=.52,n}return(0,a.Z)(t,e),t}(ge),Vn=Wn,zn=g.Z.STATIC_OBJECTS,Xn=zn.KEY,Jn=zn.FRAME,qn=function(e){function t(t,i){var n;return(n=e.call(this,t,Xn,Jn.STATIC_BANANA,i)||this).staticObjectType="banana",n.blockHeight=.45,n.rightBlockLineOffset=15,n}return(0,a.Z)(t,e),t}(ge),Qn=qn,$n=g.Z.STATIC_OBJECTS,es=$n.KEY,ts=$n.FRAME,is=function(e){function t(t,i){var n;return(n=e.call(this,t,es,ts.STATIC_BOOKS,i)||this).staticObjectType="books",n.blockHeight=.38,n.leftBlockLineOffset=9,n}return(0,a.Z)(t,e),t}(ge),ns=is,ss=g.Z.STATIC_OBJECTS,as=ss.KEY,rs=ss.FRAME,os=function(e){function t(t,i){var n;return(n=e.call(this,t,as,rs.STATIC_CACTUS,i)||this).staticObjectType="cactus",n.blockHeight=.53,n}return(0,a.Z)(t,e),t}(ge),cs=os,hs=g.Z.STATIC_OBJECTS,us=hs.KEY,ls=hs.FRAME,ds=function(e){function t(t,i){var n;return(n=e.call(this,t,us,ls.STATIC_CANDY_BOTTLE,i)||this).staticObjectType="candy-bottle",n.blockHeight=.16,n.leftBlockLineOffset=2,n.rightBlockLineOffset=2,n}return(0,a.Z)(t,e),t}(ge),ps=ds,fs=g.Z.STATIC_OBJECTS,gs=fs.KEY,ms=fs.FRAME,vs=function(e){function t(t,i){var n;return(n=e.call(this,t,gs,ms.STATIC_CHEST,i)||this).staticObjectType="chest",n.blockHeight=.53,n}return(0,a.Z)(t,e),t}(ge),ys=vs,Es=g.Z.STATIC_OBJECTS,Ss=Es.KEY,Ts=Es.FRAME,bs=function(e){function t(t,i){var n;return(n=e.call(this,t,Ss,Ts.STATIC_CHEST_2,i)||this).staticObjectType="chest-2",n.leftBlockLineOffset=15,n.rightBlockLineOffset=23,n}return(0,a.Z)(t,e),t}(ge),As=bs,Cs=g.Z.STATIC_OBJECTS,Os=Cs.KEY,Is=Cs.FRAME,ws=function(e){function t(t,i){var n;return(n=e.call(this,t,Os,Is.STATIC_CLOCK,i)||this).staticObjectType="clock",n.blockHeight=.42,n}return(0,a.Z)(t,e),t}(ge),Ps=ws,_s=g.Z.STATIC_OBJECTS,Rs=_s.KEY,ks=_s.FRAME,xs=function(e){function t(t,i){var n;return(n=e.call(this,t,Rs,ks.STATIC_COCA,i)||this).staticObjectType="coca",n.leftBlockLineOffset=2,n.rightBlockLineOffset=3,n.blockHeight=.08,n}return(0,a.Z)(t,e),t}(ge),Ls=xs,Ds=g.Z.STATIC_OBJECTS,Bs=Ds.KEY,Ns=Ds.FRAME,Ms=function(e){function t(t,i){var n;return(n=e.call(this,t,Bs,Ns.STATIC_CUPCAKE,i)||this).staticObjectType="cupcake",n}return(0,a.Z)(t,e),t}(ge),Zs=Ms,Gs=g.Z.STATIC_OBJECTS,Fs=Gs.KEY,Us=Gs.FRAME,Hs=function(e){function t(t,i){var n;return(n=e.call(this,t,Fs,Us.STATIC_ERASER,i)||this).staticObjectType="eraser",n}return(0,a.Z)(t,e),t}(ge),js=Hs,Ys=g.Z.STATIC_OBJECTS,Ks=Ys.KEY,Ws=Ys.FRAME,Vs=function(e){function t(t,i){var n;return(n=e.call(this,t,Ks,Ws.STATIC_FRIES,i)||this).staticObjectType="fries",n.leftBlockLineOffset=2,n.rightBlockLineOffset=4,n}return(0,a.Z)(t,e),t}(ge),zs=Vs,Xs=g.Z.STATIC_OBJECTS,Js=Xs.KEY,qs=Xs.FRAME,Qs=function(e){function t(t,i){var n;return(n=e.call(this,t,Js,qs.STATIC_GAVEL_BOTTLE,i)||this).staticObjectType="gavel-bottle",n.blockHeight=.15,n.rightBlockLineOffset=1,n}return(0,a.Z)(t,e),t}(ge),$s=Qs,ea=g.Z.STATIC_OBJECTS,ta=ea.KEY,ia=ea.FRAME,na=function(e){function t(t,i){var n;return(n=e.call(this,t,ta,ia.STATIC_GUMMY_CANDY,i)||this).staticObjectType="gummy-candy",n.blockHeight=.45,n.leftBlockLineOffset=2,n.rightBlockLineOffset=4,n}return(0,a.Z)(t,e),t}(ge),sa=na,aa=g.Z.STATIC_OBJECTS,ra=aa.KEY,oa=aa.FRAME,ca=function(e){function t(t,i){var n;return(n=e.call(this,t,ra,oa.STATIC_HAMBURGER,i)||this).staticObjectType="hamburger",n.blockHeight=.42,n}return(0,a.Z)(t,e),t}(ge),ha=ca,ua=g.Z.STATIC_OBJECTS,la=ua.KEY,da=ua.FRAME,pa=function(e){function t(t,i){var n;return(n=e.call(this,t,la,da.STATIC_HOTDOG,i)||this).staticObjectType="hotdog",n.leftBlockLineOffset=3,n.rightBlockLineOffset=7,n}return(0,a.Z)(t,e),t}(ge),fa=pa,ga=g.Z.STATIC_OBJECTS,ma=ga.KEY,va=ga.FRAME,ya=function(e){function t(t,i){var n;return(n=e.call(this,t,ma,va.STATIC_MILK_BOTTLE,i)||this).staticObjectType="milk-bottle",n.blockHeight=.33,n.leftBlockLineOffset=15,n}return(0,a.Z)(t,e),t}(ge),Ea=ya,Sa=g.Z.STATIC_OBJECTS,Ta=Sa.KEY,ba=Sa.FRAME,Aa=function(e){function t(t,i){var n;return(n=e.call(this,t,Ta,ba.STATIC_MILK_GLASS,i)||this).staticObjectType="milk-glass",n.leftBlockLineOffset=6,n.rightBlockLineOffset=6,n.blockHeight=.17,n}return(0,a.Z)(t,e),t}(ge),Ca=Aa,Oa=g.Z.STATIC_OBJECTS,Ia=Oa.KEY,wa=Oa.FRAME,Pa=function(e){function t(t,i){var n;return(n=e.call(this,t,Ia,wa.STATIC_MILK_TEA,i)||this).staticObjectType="milk-tea",n.leftBlockLineOffset=4,n.rightBlockLineOffset=4,n}return(0,a.Z)(t,e),t}(ge),_a=Pa,Ra=g.Z.STATIC_OBJECTS,ka=Ra.KEY,xa=Ra.FRAME,La=function(e){function t(t,i){var n;return(n=e.call(this,t,ka,xa.STATIC_MILK_TEA_2,i)||this).staticObjectType="milk-tea-2",n.rightBlockLineOffset=53,n}return(0,a.Z)(t,e),t}(ge),Da=La,Ba=g.Z.STATIC_OBJECTS,Na=Ba.KEY,Ma=Ba.FRAME,Za=function(e){function t(t,i){var n;return(n=e.call(this,t,Na,Ma.STATIC_ORANGE,i)||this).staticObjectType="orange",n.blockHeight=.44,n.leftBlockLineOffset=9,n}return(0,a.Z)(t,e),t}(ge),Ga=Za,Fa=g.Z.STATIC_OBJECTS,Ua=Fa.KEY,Ha=Fa.FRAME,ja=function(e){function t(t,i){var n;return(n=e.call(this,t,Ua,Ha.STATIC_ORANGE_JUICE,i)||this).staticObjectType="orange-juice",n.blockHeight=.14,n.leftBlockLineOffset=1,n.rightBlockLineOffset=1,n}return(0,a.Z)(t,e),t}(ge),Ya=ja,Ka=g.Z.STATIC_OBJECTS,Wa=Ka.KEY,Va=Ka.FRAME,za=function(e){function t(t,i){var n;return(n=e.call(this,t,Wa,Va.STATIC_PENCIL,i)||this).staticObjectType="pencil",n.blockHeight=.1,n.leftBlockLineOffset=3,n.rightBlockLineOffset=3,n}return(0,a.Z)(t,e),t}(ge),Xa=za,Ja=g.Z.STATIC_OBJECTS,qa=Ja.KEY,Qa=Ja.FRAME,$a=function(e){function t(t,i){var n;return(n=e.call(this,t,qa,Qa.STATIC_SANDWICH,i)||this).staticObjectType="sandwiches",n.blockHeight=.43,n.rightBlockLineOffset=6,n}return(0,a.Z)(t,e),t}(ge),er=$a,tr=g.Z.STATIC_OBJECTS,ir=tr.KEY,nr=tr.FRAME,sr=function(e){function t(t,i){var n;return(n=e.call(this,t,ir,nr.STATIC_SOFT_DRINK,i)||this).staticObjectType="soft-drink-1",n.blockHeight=.1,n.leftBlockLineOffset=4,n.rightBlockLineOffset=5,n}return(0,a.Z)(t,e),t}(ge),ar=sr,rr=g.Z.STATIC_OBJECTS,or=rr.KEY,cr=rr.FRAME,hr=function(e){function t(t,i){var n;return(n=e.call(this,t,or,cr.STATIC_SUGAR_BOTTLE,i)||this).staticObjectType="sugar-bottle",n.blockHeight=.17,n}return(0,a.Z)(t,e),t}(ge),ur=hr,lr=g.Z.STATIC_OBJECTS,dr=lr.KEY,pr=lr.FRAME,fr=function(e){function t(t,i){var n;return(n=e.call(this,t,dr,pr.STATIC_TOASTER,i)||this).staticObjectType="toaster",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+1,this.y-35,this.x+e-2,this.y-58)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+1,this.y-35,this.x+e-2,this.y-58)}this.isInactive()&&this.hideObject()},t}(ge),gr=fr,mr=g.Z.STATIC_OBJECTS,vr=mr.KEY,yr=mr.FRAME,Er=function(e){function t(t,i){var n;return(n=e.call(this,t,vr,yr.STATIC_TOY,i)||this).staticObjectType="toy",n.blockHeight=.46,n.leftBlockLineOffset=18,n.rightBlockLineOffset=3,n}return(0,a.Z)(t,e),t}(ge),Sr=Er,Tr=g.Z.STATIC_OBJECTS,br=Tr.KEY,Ar=Tr.FRAME,Cr=function(e){function t(t,i){var n;return(n=e.call(this,t,br,Ar.STATIC_WATERMELON_1,i)||this).staticObjectType="watermelon-1",n.blockHeight=.35,n.leftBlockLineOffset=9,n}return(0,a.Z)(t,e),t}(ge),Or=Cr,Ir=g.Z.STATIC_OBJECTS,wr=Ir.KEY,Pr=Ir.FRAME,_r=function(e){function t(t,i){var n;return(n=e.call(this,t,wr,Pr.STATIC_WATERMELON_2,i)||this).staticObjectType="watermelon-2",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x,this.y-44,this.x+e,this.y-17)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x,this.y-44,this.x+e,this.y-17)}this.isInactive()&&this.hideObject()},t}(ge),Rr=_r,kr=g.Z.STATIC_OBJECTS,xr=kr.KEY,Lr=kr.FRAME,Dr=function(e){function t(t,i){var n;return(n=e.call(this,t,xr,Lr.STATIC_CANDY_STAR,i)||this).staticObjectType="candy-star",n.blockHeight=.24,n.leftBlockLineOffset=7,n.rightBlockLineOffset=8,n}return(0,a.Z)(t,e),t}(ge),Br=Dr,Nr=g.Z.STATIC_OBJECTS,Mr=Nr.KEY,Zr=Nr.FRAME,Gr=function(e){function t(t,i){var n;return(n=e.call(this,t,Mr,Zr.STATIC_CANDY_UMBRELLA,i)||this).staticObjectType="candy-umbrella",n.blockHeight=.24,n.leftBlockLineOffset=7,n.rightBlockLineOffset=8,n}return(0,a.Z)(t,e),t}(ge),Fr=Gr,Ur=g.Z.STATIC_OBJECTS,Hr=Ur.KEY,jr=Ur.FRAME,Yr=function(e){function t(t,i){var n;return(n=e.call(this,t,Hr,jr.STATIC_CAT_MASK,i)||this).staticObjectType="cat-mask",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+40,this.y-27,this.x+e,this.y-47)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+40,this.y-27,this.x+e,this.y-47)}this.isInactive()&&this.hideObject()},t}(ge),Kr=Yr,Wr=g.Z.STATIC_OBJECTS,Vr=Wr.KEY,zr=Wr.FRAME,Xr=function(e){function t(t,i){var n;return(n=e.call(this,t,Vr,zr.STATIC_DESK_PHONE,i)||this).staticObjectType="desk-phone",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+39,this.y-31,this.x+e-17,this.y-52)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+39,this.y-31,this.x+e-17,this.y-52)}this.isInactive()&&this.hideObject()},t}(ge),Jr=Xr,qr=g.Z.STATIC_OBJECTS,Qr=qr.KEY,$r=qr.FRAME,eo=function(e){function t(t,i){var n;return(n=e.call(this,t,Qr,$r.STATIC_DYING_TREE,i)||this).staticObjectType="dying-tree",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+100,this.y-15,this.x+e-70,this.y-27)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+100,this.y-15,this.x+e-70,this.y-27)}this.isInactive()&&this.hideObject()},t}(ge),to=eo,io=g.Z.STATIC_OBJECTS,no=io.KEY,so=io.FRAME,ao=function(e){function t(t,i){var n;return(n=e.call(this,t,no,so.STATIC_ECLOCK,i)||this).staticObjectType="eclock",n.blockHeight=.2,n.leftBlockLineOffset=2,n.rightBlockLineOffset=2,n}return(0,a.Z)(t,e),t}(ge),ro=ao,oo=g.Z.STATIC_OBJECTS,co=oo.KEY,ho=oo.FRAME,uo=function(e){function t(t,i){var n;return(n=e.call(this,t,co,ho.STATIC_GIFT_BOX,i)||this).staticObjectType="gift-box",n.blockHeight=.25,n.leftBlockLineOffset=10,n.rightBlockLineOffset=3,n}return(0,a.Z)(t,e),t}(ge),lo=uo,po=g.Z.STATIC_OBJECTS,fo=po.KEY,go=po.FRAME,mo=function(e){function t(t,i){var n;return(n=e.call(this,t,fo,go.STATIC_MARBLE_BALL,i)||this).staticObjectType="marble-ball",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x,this.y-18,this.x+e,this.y-22)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x,this.y-18,this.x+e,this.y-22)}this.isInactive()&&this.hideObject()},t}(ge),vo=mo,yo=g.Z.STATIC_OBJECTS,Eo=yo.KEY,So=yo.FRAME,To=function(e){function t(t,i){var n;return(n=e.call(this,t,Eo,So.STATIC_MARBLE_BALL_GROUP,i)||this).staticObjectType="marble-ball-group",n.blockHeight=.11,n.leftBlockLineOffset=1,n}return(0,a.Z)(t,e),t}(ge),bo=To,Ao=g.Z.STATIC_OBJECTS,Co=Ao.KEY,Oo=Ao.FRAME,Io=function(e){function t(t,i){var n;return(n=e.call(this,t,Co,Oo.STATIC_ORIGAMI_BIRD,i)||this).staticObjectType="origami-bird",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+30,this.y-36,this.x+e-40,this.y-33)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+30,this.y-36,this.x+e-40,this.y-33)}this.isInactive()&&this.hideObject()},t}(ge),wo=Io,Po=g.Z.STATIC_OBJECTS,_o=Po.KEY,Ro=Po.FRAME,ko=function(e){function t(t,i){var n;return(n=e.call(this,t,_o,Ro.STATIC_ORIGAMI_RABBIT,i)||this).staticObjectType="origami-rabbit",n.blockHeight=.5,n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+14,this.y-50,this.x+e,this.y-36)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+14,this.y-50,this.x+e,this.y-36)}this.isInactive()&&this.hideObject()},t}(ge),xo=ko,Lo=g.Z.STATIC_OBJECTS,Do=Lo.KEY,Bo=Lo.FRAME,No=function(e){function t(t,i){var n;return(n=e.call(this,t,Do,Bo.STATIC_PIGGY_BANK,i)||this).staticObjectType="piggy-bank",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+25,this.y-37,this.x+e,this.y-42)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+25,this.y-37,this.x+e,this.y-42)}this.isInactive()&&this.hideObject()},t}(ge),Mo=No,Zo=g.Z.STATIC_OBJECTS,Go=Zo.KEY,Fo=Zo.FRAME,Uo=function(e){function t(t,i){var n;return(n=e.call(this,t,Go,Fo.STATIC_SQUARE_ORIGAMI,i)||this).staticObjectType="square-origami",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+7,this.y-24,this.x+e,this.y-52)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+7,this.y-24,this.x+e,this.y-52)}this.isInactive()&&this.hideObject()},t}(ge),Ho=Uo,jo=g.Z.STATIC_OBJECTS,Yo=jo.KEY,Ko=jo.FRAME,Wo=function(e){function t(t,i){var n;return(n=e.call(this,t,Yo,Ko.STATIC_TEDDY_BEAR,i)||this).staticObjectType="teddy-bear",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x,this.y-23,this.x+e-19,this.y-20)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x,this.y-23,this.x+e-19,this.y-20)}this.isInactive()&&this.hideObject()},t}(ge),Vo=Wo,zo=g.Z.STATIC_OBJECTS,Xo=zo.KEY,Jo=zo.FRAME,qo=function(e){function t(t,i){var n;return(n=e.call(this,t,Xo,Jo.STATIC_ZIPPO_LIGHTER,i)||this).staticObjectType="zippo",n.blockHeight=.16,n.leftBlockLineOffset=3,n.rightBlockLineOffset=11,n}return(0,a.Z)(t,e),t}(ge),Qo=qo,$o=g.Z.STATIC_OBJECTS,ec=$o.KEY,tc=$o.FRAME,ic=function(e){function t(t,i){var n;return(n=e.call(this,t,ec,tc.STATIC_CRAB,i)||this).staticObjectType="crab",n}(0,a.Z)(t,e);var i=t.prototype;return i.createBlockLine=function(){var e=this.payload.bodyWidth;this.blockLine=new Phaser.Geom.Line(this.x+51,this.y-34,this.x+e-30,this.y-31)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload.bodyWidth;this.blockLine.setTo(this.x+51,this.y-34,this.x+e-30,this.y-31)}this.isInactive()&&this.hideObject()},t}(ge),nc=ic,sc=g.Z.STATIC_OBJECTS,ac=sc.KEY,rc=sc.FRAME,oc=function(e){function t(t,i){var n;return(n=e.call(this,t,ac,rc.STATIC_SPACESHIP,i)||this).staticObjectType="spaceship",n.blockHeight=.24,n}return(0,a.Z)(t,e),t}(ge),cc=oc,hc=g.Z.OTHER_OBJECTS,uc=hc.KEY,lc=hc.FRAME,dc=function(e){function t(t,i){var n;return(n=e.call(this,t,uc,lc.UNKNOWN_ALIEN,i)||this).typeText=void 0,n.setPosition=function(t,i,a,r){return e.prototype.setPosition.call((0,s.Z)(n),t,i,a,r),n.typeText||n.createIdText(),n.typeText.setPosition(t,i),(0,s.Z)(n)},n}return(0,a.Z)(t,e),t.prototype.createIdText=function(){var e;this.typeText=this.scene.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:(null==(e=this.payload)?void 0:e.type)||"unknown type",origin:{x:.5,y:.5}}),this.typeText.setTint(15138816),this.typeText.setDepth(A.Z.PRIORITY)},t}(ve),pc=dc,fc=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,a.Z)(t,e),t}(Phaser.GameObjects.Group),gc=fc,mc=g.Z.STATIC_OBJECTS,vc=mc.KEY,yc=mc.FRAME,Ec=function(e){function t(t,i){var n;return(n=e.call(this,t,vc,yc.STATIC_BALLOON,i)||this).staticObjectType="balloon",n.blockHeight=.12,n.leftBlockLineOffset=40,n.rightBlockLineOffset=49,n}return(0,a.Z)(t,e),t}(ge),Sc=Ec,Tc=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i=null,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"apple":i=new Hn(this.scene,e);break;case"ball":i=new Vn(this.scene,e);break;case"banana":i=new Qn(this.scene,e);break;case"books":i=new ns(this.scene,e);break;case"cactus":i=new cs(this.scene,e);break;case"candy-bottle":i=new ps(this.scene,e);break;case"chest":i=new ys(this.scene,e);break;case"chest-2":i=new As(this.scene,e);break;case"clock":i=new Ps(this.scene,e);break;case"coca":i=new Ls(this.scene,e);break;case"cupcake":i=new Zs(this.scene,e);break;case"eraser":i=new js(this.scene,e);break;case"fries":i=new zs(this.scene,e);break;case"gavel-bottle":i=new $s(this.scene,e);break;case"gummy-candy":i=new sa(this.scene,e);break;case"hamburger":i=new ha(this.scene,e);break;case"hotdog":i=new fa(this.scene,e);break;case"milk-bottle":i=new Ea(this.scene,e);break;case"milk-glass":i=new Ca(this.scene,e);break;case"milk-tea":i=new _a(this.scene,e);break;case"milk-tea-2":i=new Da(this.scene,e);break;case"orange":i=new Ga(this.scene,e);break;case"orange-juice":i=new Ya(this.scene,e);break;case"pencil":i=new Xa(this.scene,e);break;case"sandwiches":i=new er(this.scene,e);break;case"soft-drink-1":i=new ar(this.scene,e);break;case"sugar-bottle":i=new ur(this.scene,e);break;case"toaster":i=new gr(this.scene,e);break;case"toy":i=new Sr(this.scene,e);break;case"watermelon-1":i=new Or(this.scene,e);break;case"watermelon-2":i=new Rr(this.scene,e);break;case"candy-star":i=new Br(this.scene,e);break;case"candy-umbrella":i=new Fr(this.scene,e);break;case"cat-mask":i=new Kr(this.scene,e);break;case"desk-phone":i=new Jr(this.scene,e);break;case"dying-tree":i=new to(this.scene,e);break;case"eclock":i=new ro(this.scene,e);break;case"gift-box":i=new lo(this.scene,e);break;case"marble-ball":i=new vo(this.scene,e);break;case"marble-ball-group":i=new bo(this.scene,e);break;case"origami-bird":i=new wo(this.scene,e);break;case"origami-rabbit":i=new xo(this.scene,e);break;case"piggy-bank":i=new Mo(this.scene,e);break;case"square-origami":i=new Ho(this.scene,e);break;case"teddy-bear":i=new Vo(this.scene,e);break;case"zippo":i=new Qo(this.scene,e);break;case"spaceship":i=new cc(this.scene,e);break;case"crab":i=new nc(this.scene,e);break;case"balloon":i=new Sc(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"static-obj:"+c})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("staticObjectType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isHidden()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof ge&&(e.isHidden()||e.hideObject())}))},t}(gc),bc=Tc,Ac=g.Z.OTHER_OBJECTS,Cc=Ac.KEY,Oc=Ac.FRAME,Ic=function(e){function t(t,i){var n;return(n=e.call(this,t,Cc,Oc.SEETHROUGH_CRYSTALL_BALL,i)||this).seethroughObjectType="crystall-ball",n}return(0,a.Z)(t,e),t}(he),wc=Ic,Pc=g.Z.OTHER_OBJECTS,_c=Pc.KEY,Rc=Pc.FRAME,kc=function(e){function t(t,i){var n;return(n=e.call(this,t,_c,Rc.SEETHROUGH_EMPTY_BOTTLE_1,i)||this).seethroughObjectType="empty-bottle-1",n}return(0,a.Z)(t,e),t}(he),xc=kc,Lc=g.Z.OTHER_OBJECTS,Dc=Lc.KEY,Bc=Lc.FRAME,Nc=function(e){function t(t,i){var n;return(n=e.call(this,t,Dc,Bc.SEETHROUGH_EMPTY_BOTTLE_2,i)||this).seethroughObjectType="empty-bottle-2",n}return(0,a.Z)(t,e),t}(he),Mc=Nc,Zc=g.Z.OTHER_OBJECTS,Gc=Zc.KEY,Fc=Zc.FRAME,Uc=function(e){function t(t,i){var n;return(n=e.call(this,t,Gc,Fc.SEETHROUGH_GLASS,i)||this).seethroughObjectType="glass",n}return(0,a.Z)(t,e),t}(he),Hc=Uc,jc=g.Z.OTHER_OBJECTS,Yc=jc.KEY,Kc=jc.FRAME,Wc=function(e){function t(t,i){var n;return(n=e.call(this,t,Yc,Kc.SEETHROUGH_GLASSES,i)||this).seethroughObjectType="glasses",n}return(0,a.Z)(t,e),t}(he),Vc=Wc,zc=g.Z.OTHER_OBJECTS,Xc=zc.KEY,Jc=zc.FRAME,qc=function(e){function t(t,i){var n;return(n=e.call(this,t,Xc,Jc.SEETHROUGH_KING_CHESS_PIECE,i)||this).seethroughObjectType="king",n}return(0,a.Z)(t,e),t}(he),Qc=qc,$c=g.Z.OTHER_OBJECTS,eh=$c.KEY,th=$c.FRAME,ih=function(e){function t(t,i){var n;return(n=e.call(this,t,eh,th.SEETHROUGH_KNIGHT_CHESS_PIECE,i)||this).seethroughObjectType="knight",n}return(0,a.Z)(t,e),t}(he),nh=ih,sh=g.Z.OTHER_OBJECTS,ah=sh.KEY,rh=sh.FRAME,oh=function(e){function t(t,i){var n;return(n=e.call(this,t,ah,rh.SEETHROUGH_QUEEN_CHESS_PIECE,i)||this).seethroughObjectType="queen",n}return(0,a.Z)(t,e),t}(he),ch=oh,hh=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY;switch(t.type){case"crystall-ball":i=new wc(this.scene,e);break;case"empty-bottle-1":i=new xc(this.scene,e);break;case"empty-bottle-2":i=new Mc(this.scene,e);break;case"glass":i=new Hc(this.scene,e);break;case"glasses":i=new Vc(this.scene,e);break;case"king":i=new Qc(this.scene,e);break;case"knight":i=new nh(this.scene,e);break;case"queen":i=new ch(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"seethrough-obj"})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("seethroughObjectType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isHidden()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof he&&(e.isHidden()||e.hideObject())}))},t}(gc),uh=hh,lh=function(e){function t(t){return e.call(this,t)||this}(0,a.Z)(t,e);var i=t.prototype;return i.run=function(){var t=this;if(!this.movingObject.isStopped()&&!this.movingObject.isRunning()){e.prototype.run.call(this);var i=this.movingObject.getMaximumDistance()/this.movingObject.getSpeed()*1e3,n="left"===this.movingObject.getDirection()?this.movingObject.x-this.movingObject.getMaximumDistance():this.movingObject.x+this.movingObject.getMaximumDistance();this.movingObject.scene.tweens.add({targets:this.movingObject,x:n,duration:i,ease:"Power0",onComplete:function(){t.movingObject.isRunning()&&t.stop()}})}},i.stop=function(){this.movingObject.anims.stop(),e.prototype.stop.call(this)},i.addRunCommand=function(){this.runCommand=new $(this.movingObject,{status:X.RUNNING,animKey:J.Z.ICECREAM_TRUCK.KEY})},t}(te),dh=lh,ph=g.Z.MOVING_OBJECTS,fh=ph.KEY,gh=ph.FRAME,mh=function(e){function t(t,i){var n;return(n=e.call(this,t,fh,gh.MOVING_ICECREAM_TRUCK,i)||this).movingObjectType="icecream-truck",n.blockHeight=.34,n.leftBlockLineOffset=2,n}(0,a.Z)(t,e);var i=t.prototype;return i.initState=function(){this.actions=new dh(this)},i.hideObject=function(){this.anims.stop(),this.setFrame(gh.MOVING_ICECREAM_TRUCK),this.body.setVelocityX(0),e.prototype.hideObject.call(this)},t}(ne),vh=mh,yh=function(e){function t(t){return e.call(this,t)||this}(0,a.Z)(t,e);var i=t.prototype;return i.run=function(){var t=this;if(!this.movingObject.isStopped()&&!this.movingObject.isRunning()){e.prototype.run.call(this);var i=this.movingObject.getMaximumDistance()/this.movingObject.getSpeed()*1e3,n="left"===this.movingObject.getDirection()?this.movingObject.x-this.movingObject.getMaximumDistance():this.movingObject.x+this.movingObject.getMaximumDistance();this.movingObject.scene.tweens.add({targets:this.movingObject,x:n,duration:i,ease:"Power0",onComplete:function(){t.movingObject.isRunning()&&t.stop()}})}},i.stop=function(){this.movingObject.anims.stop(),e.prototype.stop.call(this)},i.addRunCommand=function(){this.runCommand=new $(this.movingObject,{status:X.RUNNING,animKey:J.Z.TANK.KEY})},t}(te),Eh=yh,Sh=g.Z.MOVING_OBJECTS,Th=Sh.KEY,bh=Sh.FRAME,Ah=function(e){function t(t,i){var n;return(n=e.call(this,t,Th,bh.MOVING_TANK,i)||this).movingObjectType="tank",n.blockHeight=.35,n.leftBlockLineOffset=12,n.rightBlockLineOffset=20,n}(0,a.Z)(t,e);var i=t.prototype;return i.initState=function(){this.actions=new Eh(this)},i.hideObject=function(){this.anims.stop(),this.setFrame(bh.MOVING_TANK),this.body.setVelocityX(0),e.prototype.hideObject.call(this)},t}(ne),Ch=Ah,Oh=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"icecream-truck":i=new vh(this.scene,e);break;case"tank":i=new Ch(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"moving-obj:"+c})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("movingObjectType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isStopped()&&!t&&(t=!0,i.reuseObject(e.id,e.x,e.y,e.speed,e.maximumDistance))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof ne&&(e.isStopped()||e.hideObject())}))},t}(gc),Ih=Oh,wh=g.Z.OTHER_OBJECTS,Ph=wh.KEY,_h=wh.FRAME,Rh=function(e){function t(t,i){var n;return(n=e.call(this,t,Ph,_h.DECOR_HANDKERCHIEF_2,i)||this).decorType="handkerchief-2",n}return(0,a.Z)(t,e),t}(H),kh=Rh,xh=g.Z.OTHER_OBJECTS,Lh=xh.KEY,Dh=xh.FRAME,Bh=function(e){function t(t,i){var n;return(n=e.call(this,t,Lh,Dh.DECOR_HANDKERCHIEF_5,i)||this).decorType="handkerchief-5",n}return(0,a.Z)(t,e),t}(H),Nh=Bh,Mh=g.Z.OTHER_OBJECTS,Zh=Mh.KEY,Gh=Mh.FRAME,Fh=function(e){function t(t,i){var n;return(n=e.call(this,t,Zh,Gh.DECOR_HANDKERCHIEF_6,i)||this).decorType="handkerchief-6",n}return(0,a.Z)(t,e),t}(H),Uh=Fh,Hh=g.Z.OTHER_OBJECTS,jh=Hh.KEY,Yh=Hh.FRAME,Kh=function(e){function t(t,i){var n;return(n=e.call(this,t,jh,Yh.DECOR_HANDKERCHIEF_4,i)||this).decorType="handkerchief-4",n}return(0,a.Z)(t,e),t}(H),Wh=Kh,Vh=g.Z.OTHER_OBJECTS,zh=Vh.KEY,Xh=Vh.FRAME,Jh=function(e){function t(t,i){var n;return(n=e.call(this,t,zh,Xh.DECOR_HANDKERCHIEF_3,i)||this).decorType="handkerchief-3",n}return(0,a.Z)(t,e),t}(H),qh=Jh,Qh=g.Z.OTHER_OBJECTS,$h=Qh.KEY,eu=Qh.FRAME,tu=function(e){function t(t,i){var n;return(n=e.call(this,t,$h,eu.DECOR_HANDKERCHIEF_1,i)||this).decorType="handkerchief-1",n}return(0,a.Z)(t,e),t}(H),iu=tu,nu=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.x,s=t.y,a=t.id,r=t.type,o=t.worldSizeX,c=t.worldSizeY;switch(r){case"handkerchief-1":i=new iu(this.scene,e);break;case"handkerchief-2":i=new kh(this.scene,e);break;case"handkerchief-3":i=new qh(this.scene,e);break;case"handkerchief-4":i=new Wh(this.scene,e);break;case"handkerchief-5":i=new Nh(this.scene,e);break;case"handkerchief-6":i=new Uh(this.scene,e);break;default:i=new pc(this.scene,{id:a,type:"decor-obj:"+r})}i.setPosition(n,s),i.setWorldSize(o,c),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("decorType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isHidden()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof H&&(e.isHidden()||e.hideObject())}))},t}(gc),su=nu,au=g.Z.OTHER_OBJECTS,ru=au.KEY,ou=au.FRAME,cu=function(e){function t(t,i){var n;return(n=e.call(this,t,ru,ou.SPEED_MOD_CHOCOLATE_1,i)||this).speedModType="chocolate",n.setDepth(B.Z.SPEED_MOD_LOW),n}return(0,a.Z)(t,e),t}(de),hu=cu,uu=g.Z.OTHER_OBJECTS,lu=uu.KEY,du=uu.FRAME,pu=function(e){function t(t,i){var n;return(n=e.call(this,t,lu,du.SPEED_MOD_CHOCOLATE_2,i)||this).speedModType="chocolate-2",n.setDepth(B.Z.SPEED_MOD_LOW),n}return(0,a.Z)(t,e),t}(de),fu=pu,gu=g.Z.OTHER_OBJECTS,mu=gu.KEY,vu=gu.FRAME,yu=function(e){function t(t,i){var n;return(n=e.call(this,t,mu,vu.SPEED_MOD_CHOCOLATE_3,i)||this).speedModType="chocolate-3",n.setDepth(B.Z.SPEED_MOD_LOW),n}return(0,a.Z)(t,e),t}(de),Eu=yu,Su=g.Z.OTHER_OBJECTS,Tu=Su.KEY,bu=Su.FRAME,Au=function(e){function t(t,i){var n;return(n=e.call(this,t,Tu,bu.SPEED_MOD_CHOCOLATE_4,i)||this).speedModType="chocolate-4",n.setDepth(B.Z.SPEED_MOD_LOW),n}return(0,a.Z)(t,e),t}(de),Cu=Au,Ou=g.Z.OTHER_OBJECTS,Iu=Ou.KEY,wu=Ou.FRAME,Pu=function(e){function t(t,i){var n;return(n=e.call(this,t,Iu,wu.SPEED_MOD_CHOCOLATE_5,i)||this).speedModType="chocolate-5",n.setDepth(B.Z.SPEED_MOD_LOW),n}return(0,a.Z)(t,e),t}(de),_u=Pu,Ru=g.Z.OTHER_OBJECTS,ku=Ru.KEY,xu=Ru.FRAME,Lu=function(e){function t(t,i){var n;return(n=e.call(this,t,ku,xu.SPEED_MOD_SKATEBOARD,i)||this).speedModType="skateboard",n}(0,a.Z)(t,e);var i=t.prototype;return i.activateSlideEffect=function(){this.isActive()&&this.hideObject()},i.update=function(){this.setCurrentStatus(),!Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView)&&this.isInactive()&&this.hideObject()},i.hideObject=function(){this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),e.prototype.hideObject.call(this)},t}(de),Du=Lu,Bu=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"chocolate-1":i=new hu(this.scene,e);break;case"chocolate-2":i=new fu(this.scene,e);break;case"chocolate-3":i=new Eu(this.scene,e);break;case"chocolate-4":i=new Cu(this.scene,e);break;case"chocolate-5":i=new _u(this.scene,e);break;case"skateboard":i=new Du(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"speed-modifier-obj:"+c})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("speedModType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isHidden()&&!t&&(t=!0,i.reuseObject(e.x,e.y,e.speedBonusPercent,e.speedDuration))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof de&&e.hideObject()}))},t}(gc),Nu=Bu,Mu=g.Z.COLLECT_OBJECTS,Zu=Mu.KEY,Gu=Mu.FRAME,Fu=function(e){function t(t,i){var n;return(n=e.call(this,t,Zu,Gu.COLLECT_GIFT_CIRCLE,i)||this).collectibleType="gift-circle",n}return(0,a.Z)(t,e),t}(M),Uu=Fu,Hu=g.Z.COLLECT_OBJECTS,ju=Hu.KEY,Yu=Hu.FRAME,Ku=function(e){function t(t,i){var n;return(n=e.call(this,t,ju,Yu.COLLECT_COIN,i)||this).collectibleType="coin",n}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){e.prototype.initSprite.call(this),this.play(J.Z.COIN.KEY)},i.reuseObject=function(t,i){e.prototype.reuseObject.call(this,t,i),this.setTexture(Yu.COLLECT_COIN),this.play(J.Z.COIN.KEY)},t}(M),Wu=Ku,Vu=g.Z.COLLECT_OBJECTS,zu=Vu.KEY,Xu=Vu.FRAME,Ju=function(e){function t(t,i){var n;return(n=e.call(this,t,zu,Xu.COLLECT_GIFT_HEART,i)||this).collectibleType="gift-heart",n}return(0,a.Z)(t,e),t}(M),qu=Ju,Qu=g.Z.COLLECT_OBJECTS,$u=Qu.KEY,el=Qu.FRAME,tl=function(e){function t(t,i){var n;return(n=e.call(this,t,$u,el.COLLECT_GIFT_SQUARE,i)||this).collectibleType="gift-square",n}return(0,a.Z)(t,e),t}(M),il=tl,nl=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"gift-circle":i=new Uu(this.scene,e);break;case"coin":i=new Wu(this.scene,e);break;case"gift-heart":i=new qu(this.scene,e);break;case"gift-square":i=new il(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"collect-obj:"+c})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("collectibleType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isCollected()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof M&&(e.isCollected()||e.endCollectible())}))},t}(gc),sl=nl,al=function(e){function t(t){return e.call(this,t)||this}(0,a.Z)(t,e);var i=t.prototype;return i.play=function(){var t=this;if(!this.frontObstructingObject.isPlaying()&&!this.frontObstructingObject.isEnded()){e.prototype.play.call(this);var i=this.frontObstructingObject.getActiveDuration();this.addDelayCalled(i,(function(){t.frontObstructingObject.isEnded()||t.end()}))}},i.addDelayCalled=function(e,t){this.frontObstructingObject.scene.time.delayedCall(e,t)},i.end=function(){e.prototype.end.call(this)},i.addPlayCommand=function(){this.playCommand=new Ln(this.frontObstructingObject,{status:Rn.PLAYING,animKey:J.Z.MONKEY.KEY})},t}(Bn),rl=al,ol=g.Z.MONKEY,cl=ol.KEY,hl=ol.FRAME,ul=function(e){function t(t,i){var n;return(n=e.call(this,t,cl,hl.OBSTRUCTING_MONKEY,i)||this).frontObjectType="monkey",n}(0,a.Z)(t,e);var i=t.prototype;return i.initState=function(){this.actions=new rl(this)},i.reuseObject=function(t){e.prototype.reuseObject.call(this,t),this.actions.play()},i.update=function(){var e=this.playerPosition.x?this.playerPosition.x:0;this.playerPosition.y&&this.playerPosition.y;this.setPosition(e-30,600)},t}(Mn),ll=ul,dl=function(e){function t(t){return e.call(this,t)||this}(0,a.Z)(t,e);var i=t.prototype;return i.play=function(){var t=this;if(!this.frontObstructingObject.isPlaying()&&!this.frontObstructingObject.isEnded()){e.prototype.play.call(this);var i=this.frontObstructingObject.getActiveDuration();this.addDelayCalled(i,(function(){t.frontObstructingObject.isEnded()||t.end()}))}},i.addDelayCalled=function(e,t){this.frontObstructingObject.scene.time.delayedCall(e,t)},i.end=function(){e.prototype.end.call(this)},i.addPlayCommand=function(){this.playCommand=new Ln(this.frontObstructingObject,{status:Rn.PLAYING,animKey:J.Z.OWL.KEY})},t}(Bn),pl=dl,fl=g.Z.OWL,gl=fl.KEY,ml=fl.FRAME,vl=function(e){function t(t,i){var n;return(n=e.call(this,t,gl,ml.OBSTRUCTING_OWL,i)||this).frontObjectType="owl",n}(0,a.Z)(t,e);var i=t.prototype;return i.initState=function(){this.actions=new pl(this)},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.OBSTRUCT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.reuseObject=function(t){e.prototype.reuseObject.call(this,t),this.actions.play()},i.update=function(){var e=this.playerPosition.x?this.playerPosition.x:0;this.playerPosition.y&&this.playerPosition.y;this.setPosition(e-180,560)},t}(Mn),yl=vl,El=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){var i,n;if(!this.reuseInactiveObjects(t)){var s,a=t.type;switch(a){case"monkey":s=new ll(this.scene,e),i=321,n=370.5;break;case"owl":s=new yl(this.scene,e),i=393.8,n=287.2;break;default:s=new pc(this.scene,{id:0,type:"front-obj:"+a}),i=0,n=0}s.setPosition(0,0),s.setWorldSize(i,n),this.add(s)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("frontObjectType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isEnded()&&!t&&(t=!0,i.reuseObject(e.duration))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof Mn&&(e.isEnded()||e.hideObject())}))},t}(gc),Sl=El,Tl=g.Z.DECOR_OBJECTS_BEHIND,bl=Tl.KEY,Al=Tl.FRAME,Cl=function(e){function t(t,i){var n;return(n=e.call(this,t,bl,Al.DECOR_BEHIND_BOOK_1,i)||this).decorBehindType="book-1",n}return(0,a.Z)(t,e),t}(F),Ol=Cl,Il=g.Z.DECOR_OBJECTS_BEHIND,wl=Il.KEY,Pl=Il.FRAME,_l=function(e){function t(t,i){var n;return(n=e.call(this,t,wl,Pl.DECOR_BEHIND_BOOK_5,i)||this).decorBehindType="book-5",n}return(0,a.Z)(t,e),t}(F),Rl=_l,kl=g.Z.DECOR_OBJECTS_BEHIND,xl=kl.KEY,Ll=kl.FRAME,Dl=function(e){function t(t,i){var n;return(n=e.call(this,t,xl,Ll.DECOR_BEHIND_BOOK_2,i)||this).decorBehindType="book-2",n}return(0,a.Z)(t,e),t}(F),Bl=Dl,Nl=g.Z.DECOR_OBJECTS_BEHIND,Ml=Nl.KEY,Zl=Nl.FRAME,Gl=function(e){function t(t,i){var n;return(n=e.call(this,t,Ml,Zl.DECOR_BEHIND_BOOK_3,i)||this).decorBehindType="book-3",n}return(0,a.Z)(t,e),t}(F),Fl=Gl,Ul=g.Z.DECOR_OBJECTS_BEHIND,Hl=Ul.KEY,jl=Ul.FRAME,Yl=function(e){function t(t,i){var n;return(n=e.call(this,t,Hl,jl.DECOR_BEHIND_BOOK_4,i)||this).decorBehindType="book-4",n}return(0,a.Z)(t,e),t}(F),Kl=Yl,Wl=g.Z.DECOR_OBJECTS_BEHIND,Vl=Wl.KEY,zl=Wl.FRAME,Xl=function(e){function t(t,i){var n;return(n=e.call(this,t,Vl,zl.DECOR_BEHIND_COOKIES_1,i)||this).decorBehindType="cookies-1",n}return(0,a.Z)(t,e),t}(F),Jl=Xl,ql=g.Z.DECOR_OBJECTS_BEHIND,Ql=ql.KEY,$l=ql.FRAME,ed=function(e){function t(t,i){var n;return(n=e.call(this,t,Ql,$l.DECOR_BEHIND_COOKIES_2,i)||this).decorBehindType="cookies-2",n}return(0,a.Z)(t,e),t}(F),td=ed,id=g.Z.DECOR_OBJECTS_BEHIND,nd=id.KEY,sd=id.FRAME,ad=function(e){function t(t,i){var n;return(n=e.call(this,t,nd,sd.DECOR_BEHIND_CRAYON_BLUE,i)||this).decorBehindType="crayon-blue",n}return(0,a.Z)(t,e),t}(F),rd=ad,od=g.Z.DECOR_OBJECTS_BEHIND,cd=od.KEY,hd=od.FRAME,ud=function(e){function t(t,i){var n;return(n=e.call(this,t,cd,hd.DECOR_BEHIND_CRAYON_GREEN,i)||this).decorBehindType="crayon-green",n}return(0,a.Z)(t,e),t}(F),ld=ud,dd=g.Z.DECOR_OBJECTS_BEHIND,pd=dd.KEY,fd=dd.FRAME,gd=function(e){function t(t,i){var n;return(n=e.call(this,t,pd,fd.DECOR_BEHIND_CRAYON_PINK_YELLOW,i)||this).decorBehindType="crayon-pink-yellow",n}return(0,a.Z)(t,e),t}(F),md=gd,vd=g.Z.DECOR_OBJECTS_BEHIND,yd=vd.KEY,Ed=vd.FRAME,Sd=function(e){function t(t,i){var n;return(n=e.call(this,t,yd,Ed.DECOR_BEHIND_FORK,i)||this).decorBehindType="fork",n}return(0,a.Z)(t,e),t}(F),Td=Sd,bd=g.Z.DECOR_OBJECTS_BEHIND,Ad=bd.KEY,Cd=bd.FRAME,Od=function(e){function t(t,i){var n;return(n=e.call(this,t,Ad,Cd.DECOR_BEHIND_FORK_2,i)||this).decorBehindType="fork-2",n}return(0,a.Z)(t,e),t}(F),Id=Od,wd=g.Z.DECOR_OBJECTS_BEHIND,Pd=wd.KEY,_d=wd.FRAME,Rd=function(e){function t(t,i){var n;return(n=e.call(this,t,Pd,_d.DECOR_BEHIND_GLOVE,i)||this).decorBehindType="glove",n}return(0,a.Z)(t,e),t}(F),kd=Rd,xd=g.Z.DECOR_OBJECTS_BEHIND,Ld=xd.KEY,Dd=xd.FRAME,Bd=function(e){function t(t,i){var n;return(n=e.call(this,t,Ld,Dd.DECOR_BEHIND_KNIFE,i)||this).decorBehindType="knife",n}return(0,a.Z)(t,e),t}(F),Nd=Bd,Md=g.Z.DECOR_OBJECTS_BEHIND,Zd=Md.KEY,Gd=Md.FRAME,Fd=function(e){function t(t,i){var n;return(n=e.call(this,t,Zd,Gd.DECOR_BEHIND_ROLLING_PIN,i)||this).decorBehindType="rolling-pin",n}return(0,a.Z)(t,e),t}(F),Ud=Fd,Hd=g.Z.DECOR_OBJECTS_BEHIND,jd=Hd.KEY,Yd=Hd.FRAME,Kd=function(e){function t(t,i){var n;return(n=e.call(this,t,jd,Yd.DECOR_BEHIND_SANDWICH,i)||this).decorBehindType="sandwich",n}return(0,a.Z)(t,e),t}(F),Wd=Kd,Vd=g.Z.DECOR_OBJECTS_BEHIND,zd=Vd.KEY,Xd=Vd.FRAME,Jd=function(e){function t(t,i){var n;return(n=e.call(this,t,zd,Xd.DECOR_BEHIND_SPOON,i)||this).decorBehindType="spoon",n}return(0,a.Z)(t,e),t}(F),qd=Jd,Qd=g.Z.DECOR_OBJECTS_BEHIND,$d=Qd.KEY,ep=Qd.FRAME,tp=function(e){function t(t,i){var n;return(n=e.call(this,t,$d,ep.DECOR_BEHIND_WOOD_SPOON,i)||this).decorBehindType="wood-spoon",n}return(0,a.Z)(t,e),t}(F),ip=tp,np=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"book-1":i=new Ol(this.scene,e);break;case"book-2":i=new Bl(this.scene,e);break;case"book-3":i=new Fl(this.scene,e);break;case"book-4":i=new Kl(this.scene,e);break;case"book-5":i=new Rl(this.scene,e);break;case"cookies-1":i=new Jl(this.scene,e);break;case"cookies-2":i=new td(this.scene,e);break;case"crayon-blue":i=new rd(this.scene,e);break;case"crayon-green":i=new ld(this.scene,e);break;case"crayon-pink-yellow":i=new md(this.scene,e);break;case"fork":i=new Td(this.scene,e);break;case"fork-2":i=new Id(this.scene,e);break;case"glove":i=new kd(this.scene,e);break;case"knife":i=new Nd(this.scene,e);break;case"rolling-pin":i=new Ud(this.scene,e);break;case"sandwich":i=new Wd(this.scene,e);break;case"spoon":i=new qd(this.scene,e);break;case"wood-spoon":i=new ip(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"decor-behind-obj:"+c})}i.setPosition(s,a-14),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("decorBehindType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isHidden()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof F&&(e.isHidden()||e.hideObject())}))},t}(gc),sp=np,ap={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden",ACTIVATED:"activated"},rp=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.movementModObjectType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=ap.READY,r.movementModObjectType="pushing",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===ap.READY},i.isActive=function(){return this.status===ap.ACTIVE},i.isInactive=function(){return this.status===ap.INACTIVE},i.isHidden=function(){return this.status===ap.HIDDEN},i.reuseObject=function(e,t,i,n){this.status=ap.READY,this.revive(),this.setPosition(e,t),this.payload.pushingSpeed=i,this.payload.direction=n},i.hideObject=function(){this.status=ap.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=ap.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=ap.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.MOVEMENT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.getPushingSpeed=function(){var e=this.payload,t=e.pushingSpeed,i=void 0===t?0:t,n=e.direction;return i*("right"===(void 0===n?"right":n)?1:-1)},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),op=rp,cp=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.movementModObjectType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=ap.READY,r.movementModObjectType="slippery",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===ap.READY},i.isActive=function(){return this.status===ap.ACTIVE},i.isInactive=function(){return this.status===ap.INACTIVE},i.isHidden=function(){return this.status===ap.HIDDEN},i.reuseObject=function(e,t,i,n){this.status=ap.READY,this.revive(),this.setPosition(e,t),this.payload.slippingSpeed=i,this.payload.slippingFriction=n},i.hideObject=function(){this.status=ap.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=ap.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=ap.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.MOVEMENT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.getSlippingSpeed=function(){var e=this.payload.slippingSpeed;return void 0===e?0:e},i.getSlippingFriction=function(){var e=this.payload.slippingFriction;return void 0===e?0:e},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),hp=cp,up=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.movementModObjectType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=ap.READY,r.movementModObjectType="forcePush",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===ap.READY},i.isActive=function(){return this.status===ap.ACTIVE},i.isInactive=function(){return this.status===ap.INACTIVE},i.isHidden=function(){return this.status===ap.HIDDEN},i.isActivated=function(){return this.status===ap.ACTIVATED},i.activateForcePush=function(){this.status=ap.ACTIVATED},i.reuseObject=function(e,t,i,n,s){this.status=ap.READY,this.revive(),this.setPosition(e,t),this.payload.forcePushSpeed=i,this.payload.forcePushDuration=n,"left"===s?this.setFlipX(!0):this.setFlipX(!1),this.payload.direction=s},i.hideObject=function(){this.status=ap.HIDDEN,this.kill()},i.playPushAnimation=function(){},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=ap.ACTIVE),(this.isActive()||this.isActivated())&&!e&&this.isOutOfLeftOfCamera()&&(this.status=ap.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.MOVEMENT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1);var e=this.payload.direction;"left"===(void 0===e?"right":e)&&this.setFlipX(!0)},i.getForcePushSpeed=function(){var e=this.payload,t=e.forcePushSpeed,i=void 0===t?0:t,n=e.direction,s=i;return"left"===(void 0===n?"right":n)&&(s*=-1),s},i.getDirection=function(){var e=this.payload.direction;return void 0===e?"right":e},i.getForcePushDuration=function(){var e=this.payload.forcePushDuration;return void 0===e?0:e},i.update=function(){this.setCurrentStatus(),this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),lp=up,dp=g.Z.MOVEMENT_MODIFIER_OBJECTS,pp=dp.KEY,fp=dp.FRAME,gp=function(e){function t(t,i){var n;return(n=e.call(this,t,pp,fp.MOVEMENT_MODIFIER_BOXING,i)||this).movementModObjectType="boxing",n}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){var e=this.payload.direction;"left"===(void 0===e?"right":e)?(this.setOrigin(1,1),this.setFlipX(!0)):this.setOrigin(0,1),this.setDepth(B.Z.MOVEMENT),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.reuseObject=function(t,i,n,s,a){e.prototype.reuseObject.call(this,t,i,n,s,a),this.setFrame(fp.MOVEMENT_MODIFIER_BOXING)},i.playPushAnimation=function(){this.anims.play(J.Z.BOXING.KEY,!0)},t}(lp),mp=gp,vp=g.Z.MOVEMENT_MODIFIER_OBJECTS,yp=vp.KEY,Ep=vp.FRAME,Sp=J.Z.CONVEYOR_OPERATE,Tp=function(e){function t(t,i){var n;return(n=e.call(this,t,yp,Ep.MOVEMENT_MODIFIER_CONVEYOR,i)||this).movementModObjectType="conveyor",n.playAnimation(i.direction),n}(0,a.Z)(t,e);var i=t.prototype;return i.reuseObject=function(t,i,n,s){e.prototype.reuseObject.call(this,t,i,n,s),this.playAnimation(s)},i.hideObject=function(){e.prototype.hideObject.call(this),this.stop()},i.playAnimation=function(e){"left"===e?this.playReverse(Sp.KEY,!0):"right"===e&&this.play(Sp.KEY,!0)},t}(op),bp=g.Z.MOVEMENT_MODIFIER_OBJECTS,Ap=bp.KEY,Cp=bp.FRAME,Op=function(e){function t(t,i){var n;return(n=e.call(this,t,Ap,Cp.MOVEMENT_MODIFIER_LIQUID,i)||this).movementModObjectType="liquid",n}return(0,a.Z)(t,e),t}(hp),Ip=Op,wp=g.Z.MOVEMENT_MODIFIER_OBJECTS,Pp=wp.KEY,_p=wp.FRAME,Rp=function(e){function t(t,i){var n;return(n=e.call(this,t,Pp,_p.MOVEMENT_MODIFIER_LIQUID_1,i)||this).movementModObjectType="liquid-1",n}return(0,a.Z)(t,e),t}(hp),kp=Rp,xp=g.Z.MOVEMENT_MODIFIER_OBJECTS,Lp=xp.KEY,Dp=xp.FRAME,Bp=function(e){function t(t,i){var n;return(n=e.call(this,t,Lp,Dp.MOVEMENT_MODIFIER_LIQUID_2,i)||this).movementModObjectType="liquid-2",n}return(0,a.Z)(t,e),t}(hp),Np=Bp,Mp=g.Z.MOVEMENT_MODIFIER_OBJECTS,Zp=Mp.KEY,Gp=Mp.FRAME,Fp=function(e){function t(t,i){var n;return(n=e.call(this,t,Zp,Gp.MOVEMENT_MODIFIER_LIQUID_3,i)||this).movementModObjectType="liquid-3",n}return(0,a.Z)(t,e),t}(hp),Up=Fp,Hp=g.Z.MOVEMENT_MODIFIER_OBJECTS,jp=Hp.KEY,Yp=Hp.FRAME,Kp=function(e){function t(t,i){var n;return(n=e.call(this,t,jp,Yp.MOVEMENT_MODIFIER_LIQUID_4,i)||this).movementModObjectType="liquid-4",n}return(0,a.Z)(t,e),t}(hp),Wp=Kp,Vp=g.Z.MOVEMENT_MODIFIER_OBJECTS,zp=Vp.KEY,Xp=Vp.FRAME,Jp=function(e){function t(t,i){var n;return(n=e.call(this,t,zp,Xp.MOVEMENT_MODIFIER_LIQUID_5,i)||this).movementModObjectType="liquid-5",n}return(0,a.Z)(t,e),t}(hp),qp=Jp,Qp=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type,h=t.direction,u=void 0===h?"right":h;switch(c){case"liquid":i=new Ip(this.scene,e);break;case"liquid-1":i=new kp(this.scene,e);break;case"liquid-2":i=new Np(this.scene,e);break;case"liquid-3":i=new Up(this.scene,e);break;case"liquid-4":i=new Wp(this.scene,e);break;case"liquid-5":i=new qp(this.scene,e);break;case"conveyor":i=new Tp(this.scene,e);break;case"boxing":i=new mp(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"movement-mod-obj:"+c})}i instanceof mp&&"left"===u?i.setPosition(s+r,a):i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("movementModObjectType",e.type);if(0==i.length)return!1;var n=e.x,s=e.y,a=e.worldSizeX,r=e.slippingFriction,o=void 0===r?0:r,c=e.slippingSpeed,h=void 0===c?0:c,u=e.pushingSpeed,l=void 0===u?0:u,d=e.forcePushSpeed,p=void 0===d?0:d,f=e.forcePushDuration,g=void 0===f?500:f,m=e.direction,v=void 0===m?"right":m;return i.forEach((function(e){(e instanceof hp||e instanceof op)&&e.isHidden()&&!t&&(t=!0,e instanceof hp&&e.reuseObject(n,s,h,o),e instanceof op&&e.reuseObject(n,s,l,v),e instanceof mp&&e.reuseObject(n-a/2,s,p,g,v))})),t},i.killAndHideAll=function(){this.children.each((function(e){(e instanceof hp||e instanceof op)&&(e.isHidden()||e.hideObject())}))},t}(gc),$p=Qp,ef=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return(0,a.Z)(t,e),t.prototype.activateTrigger=function(){this.isActivated()||e.prototype.activateTrigger.call(this)},t}(z),tf=ef,nf=g.Z.OTHER_OBJECTS,sf=nf.KEY,af=nf.FRAME,rf=function(e){function t(t,i){var n;return(n=e.call(this,t,sf,af.INTERACTABLE_BLUE_BUTTON_UP,i)||this).interactableType="blue-button-up",n}(0,a.Z)(t,e);var i=t.prototype;return i.activateTrigger=function(){e.prototype.activateTrigger.call(this),this.setFrame(af.INTERACTABLE_BLUE_BUTTON_DOWN)},i.reuseObject=function(t,i,n){this.setFrame(af.INTERACTABLE_BLUE_BUTTON_UP),e.prototype.reuseObject.call(this,t,i,n)},t}(tf),of=rf,cf=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return(0,a.Z)(t,e),t.prototype.activateTrigger=function(){this.isActivated()||e.prototype.activateTrigger.call(this)},t}(z),hf=cf,uf=g.Z.OTHER_OBJECTS,lf=uf.KEY,df=uf.FRAME,pf=function(e){function t(t,i){var n;return(n=e.call(this,t,lf,df.INTERACTABLE_JOYSTICK,i)||this).interactableType="joystick",n}(0,a.Z)(t,e);var i=t.prototype;return i.activateTrigger=function(){e.prototype.activateTrigger.call(this),this.setFrame(df.INTERACTABLE_JOYSTICK_DOWN)},i.reuseObject=function(t,i,n){this.setFrame(df.INTERACTABLE_JOYSTICK),e.prototype.reuseObject.call(this,t,i,n)},t}(hf),ff=pf,gf=g.Z.OTHER_OBJECTS,mf=gf.KEY,vf=gf.FRAME,yf=function(e){function t(t,i){var n;return(n=e.call(this,t,mf,vf.INTERACTABLE_RED_BUTTON_UP,i)||this).interactableType="red-button-up",n}(0,a.Z)(t,e);var i=t.prototype;return i.activateTrigger=function(){e.prototype.activateTrigger.call(this),this.setFrame(vf.INTERACTABLE_RED_BUTTON_DOWN)},i.reuseObject=function(t,i,n){this.setFrame(vf.INTERACTABLE_RED_BUTTON_UP),e.prototype.reuseObject.call(this,t,i,n)},t}(tf),Ef=yf,Sf=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"joystick":i=new ff(this.scene,e);break;case"blue-button-up":i=new of(this.scene,e);break;case"red-button-up":i=new Ef(this.scene,e);break;default:i=new pc(this.scene,{id:n,type:"interactable-obj:"+c})}i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("interactableType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isActivated()&&!t&&(t=!0,i.reuseObject(e.x,e.y,e.triggerID))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof z&&e.hideObject()}))},t}(gc),Tf=Sf,bf=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).symbolType="monkey-trigger",n}return(0,a.Z)(t,e),t.prototype.createFrontObstructingObject=function(){var e=this.payload,t=e.callback,i=e.duration;"function"===typeof t&&t("monkey",{duration:i}),this.destroy()},t}(re),Af=bf,Cf=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).symbolType="owl-trigger",n}return(0,a.Z)(t,e),t.prototype.createFrontObstructingObject=function(){var e=this.payload,t=e.callback,i=e.duration;"function"===typeof t&&t("owl",{duration:i}),this.destroy()},t}(re),Of=Cf,If=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).symbolType="end-watch-trigger",n}return(0,a.Z)(t,e),t.prototype.onPlayerTouch=function(){if(!this.isActivated()){var e=this.payload.callback;"function"===typeof e&&e(),this.hideObject()}},t}(Ee),wf=If,Pf=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).payload=void 0,n.payload=i,n.symbolType="fall-trigger",n}(0,a.Z)(t,e);var i=t.prototype;return i.onPlayerTouch=function(){var e=this.payload,t=e.duration,i=e.callback,n=e.watcherHeight;"function"===typeof i&&i(t,n),this.destroy()},i.reuseFall=function(e,t){this.payload.duration=e,this.payload.watcherHeight=t},t}(Ee),_f=Pf,Rf=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).symbolType="watch-trigger",n}(0,a.Z)(t,e);var i=t.prototype;return i.onPlayerTouch=function(){var e=this.payload,t=e.winkDuration,i=e.beamDuration,n=e.beamHoldDuration,s=e.confuseDuration,a=e.fallDuration,r=e.callback;"function"===typeof r&&r(t,i,n,s,a),this.destroy()},i.reuseMovingSightTrigger=function(e,t,i,n,s){var a=this.payload;a.winkDuration=e,a.beamDuration=t,a.beamHoldDuration=i,a.confuseDuration=n,a.fallDuration=s},t}(Ee),kf=Rf,xf=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).payload=void 0,n.payload=i,n.symbolType="stand-trigger",n}(0,a.Z)(t,e);var i=t.prototype;return i.onPlayerTouch=function(){var e=this.payload,t=e.duration,i=e.callback,n=e.watcherHeight;"function"===typeof i&&i(t,n),this.destroy()},i.reuseRise=function(e,t){this.payload.duration=e,this.payload.watcherHeight=t},t}(Ee),Lf=xf,Df=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).symbolType="stare-trigger",n}(0,a.Z)(t,e);var i=t.prototype;return i.onPlayerTouch=function(){var e=this.payload,t=e.winkDuration,i=e.beamDuration,n=e.beamHoldDuration,s=e.confuseDuration,a=e.fallDuration,r=e.callback;"function"===typeof r&&r(t,i,n,s,a),this.destroy()},i.reuseStaticSightTrigger=function(e,t,i,n,s){var a=this.payload;a.winkDuration=e,a.beamDuration=t,a.beamHoldDuration=i,a.confuseDuration=n,a.fallDuration=s},t}(Ee),Bf=Df,Nf=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(this.scene instanceof dE&&!this.reuseInactiveObjects(t)){var i,n=e.id,s=e.width,a=e.height,r=t.x,o=t.y,c=t.type,h=t.frontObjectDuration,u=void 0===h?0:h,l=t.riseDuration,d=void 0===l?0:l,p=t.beamHoldDuration,f=void 0===p?0:p,g=t.beamDuration,m=void 0===g?0:g,v=t.winkDuration,y=void 0===v?0:v,E=t.fallDuration,S=void 0===E?0:E,T=t.confuseDuration,b=void 0===T?0:T,A=t.riseHeight,C=void 0===A?0:A,O=t.fallHeight,I=void 0===O?0:O;switch(c){case"watch-trigger":var w={id:n,width:s,height:a,callback:this.scene.movingSightTriggerCallback,winkDuration:y,beamDuration:m,beamHoldDuration:f,confuseDuration:b,fallDuration:S};i=new kf(this.scene,w);break;case"end-trigger":var P={id:n,width:s,height:a,callback:this.scene.boyWatcher.immediateSightEnd};i=new wf(this.scene,P);break;case"stare-trigger":var _={id:n,width:s,height:a,callback:this.scene.staticSightTriggerCallback,winkDuration:y,beamDuration:m,beamHoldDuration:f,confuseDuration:b,fallDuration:S};i=new Bf(this.scene,_);break;case"rise":var R={id:n,width:s,height:a,watcherHeight:C,duration:d,callback:this.scene.standTriggerCallback};i=new Lf(this.scene,R);break;case"fall":var k={id:n,width:s,height:a,watcherHeight:I,duration:S,callback:this.scene.fallTriggerCallback};i=new _f(this.scene,k);break;case"start-point":this.scene.startPoint={x:r,y:o};break;case"monkey-trigger":var x=this.scene,L={callback:function(e,t){var i={type:e,duration:t.duration};x.objectManager.addFrontObstructingObjects(t,i)},duration:u};i=new Af(this.scene,L);break;case"owl-trigger":var D=this.scene,B={callback:function(e,t){var i={type:e,duration:t.duration};D.objectManager.addFrontObstructingObjects(t,i)},duration:u};i=new Of(this.scene,B);break;default:i=new pc(this.scene,{id:n,type:"symbol:"+c})}i&&(i.setPosition(r,o),this.add(i))}},i.reuseInactiveObjects=function(e){var t=this;if(0==this.children.size)return!1;var i=!1,n=e.x,s=e.y,a=e.type,r=e.frontObjectDuration,o=void 0===r?0:r,c=e.riseDuration,h=void 0===c?0:c,u=e.beamHoldDuration,l=void 0===u?0:u,d=e.beamDuration,p=void 0===d?0:d,f=e.winkDuration,g=void 0===f?0:f,m=e.fallDuration,v=void 0===m?0:m,y=e.confuseDuration,E=void 0===y?0:y,S=e.riseHeight,T=void 0===S?0:S,b=e.fallHeight,A=void 0===b?0:b,C=this.getMatching("symbolType",a);return 0!=C.length&&(C.forEach((function(e){switch(a){case"watch-trigger":e instanceof kf&&e.isActivated()&&!i&&(e.reuseObject(n,s),e.reuseMovingSightTrigger(g,p,l,E,v),i=!0);break;case"end-trigger":e instanceof wf&&e.isActivated()&&!i&&(e.reuseObject(n,s),i=!0);break;case"stare-trigger":e instanceof Bf&&e.isActivated()&&!i&&(e.reuseObject(n,s),e.reuseStaticSightTrigger(g,p,l,E,v),i=!0);break;case"rise":e instanceof Lf&&e.isActivated()&&!i&&(e.reuseObject(n,s),e.reuseRise(h,T),i=!0);break;case"fall":e instanceof _f&&e.isActivated()&&!i&&(e.reuseObject(n,s),e.reuseFall(v,A),i=!0);break;case"start-point":t.scene.startPoint={x:n,y:s};break;case"monkey-trigger":e instanceof Af&&e.isActivated()&&!i&&(e.reuseObject(n,s,o),i=!0)}})),i)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof(Ee||re)&&(e.isActivated()||e.hideObject())}))},t}(gc),Mf=Nf,Zf=g.Z.OTHER_OBJECTS,Gf=Zf.KEY,Ff=Zf.FRAME,Uf=function(e){function t(t,i){var n;return(n=e.call(this,t,Gf,Ff.GOAL_CHEESE_3,i)||this).goalType="cheese-3",n}return(0,a.Z)(t,e),t}(K),Hf=Uf,jf=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(t.y=481,!this.reuseInactiveObjects(t)){var i,n=t.x,s=t.y,a=t.id,r=t.type;switch(r){case"cheese-1":case"cheese-2":i=new Hf(this.scene,e);break;default:i=new pc(this.scene,{id:a,type:"goal-obj:"+r})}i.setPosition(n,s),i.setWorldSize(195.5,481),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("goalType",e.type);return 0!=i.length&&(i.forEach((function(i){i.isInactive()&&!t&&(t=!0,i.reuseObject(e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof K&&(e.isInactive()||e.hideObject())}))},i.getGoalPosition=function(){var e=this.getMatching("status",j.ACTIVE);if(0==e.length)return 0;var t=e[0];return t instanceof K?t.x:0},t}(gc),Yf=jf,Kf={READY:"ready",ACTIVE:"active",ACTIVATED:"activated"},Wf=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.payload=void 0,r.trapObjectType=void 0,r.status=void 0,r.id=a.id,r.payload=a,r.status=Kf.READY,r.trapObjectType="trap",r.initSprite(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.isReady=function(){return this.status===Kf.READY},i.isActivated=function(){return this.status===Kf.ACTIVATED},i.isActive=function(){return this.status===Kf.ACTIVE},i.reuseObject=function(e,t){this.status=Kf.READY,this.revive(),this.setPosition(e,t)},i.hideObject=function(){this.status=Kf.ACTIVATED,this.kill()},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.TRAP),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.update=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=Kf.ACTIVE),!e&&(this.isActivated()||this.isActive())&&this.isOutOfLeftOfCamera()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),Vf=Wf,zf={DELAY_TRAP_OBJECT:1500},Xf=g.Z.BALLOON,Jf=Xf.KEY,qf=Xf.FRAME,Qf=function(e){function t(t,i){var n;return(n=e.call(this,t,Jf,qf.TRAP_BALLOON,i)||this).trapObjectType="balloon",n}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setDepth(B.Z.TRAP),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.activateTrapObject=function(){var e=this;this.scene.time.delayedCall(zf.DELAY_TRAP_OBJECT,(function(){e.anims.play(J.Z.BALLOON.KEY,!0)})),this.status=Kf.ACTIVATED},i.hideObject=function(){this.anims.stop(),this.setFrame(qf.TRAP_BALLOON),e.prototype.hideObject.call(this)},t}(Vf),$f=Qf,eg=g.Z.CRAB,tg=eg.KEY,ig=eg.FRAME,ng=function(e){function t(t,i){var n;return(n=e.call(this,t,tg,ig.TRAP_CRAB,i)||this).trapObjectType="crab",n}(0,a.Z)(t,e);var i=t.prototype;return i.activateTrapObject=function(){var e=this;this.scene.time.delayedCall(zf.DELAY_TRAP_OBJECT,(function(){e.anims.play(J.Z.CRAB.KEY,!0);var t=e.x;e.scene.tweens.add({targets:e,x:t-720,duration:3e3,ease:"Power0"})})),this.status=Kf.ACTIVATED},i.hideObject=function(){this.anims.stop(),this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),this.setFrame(ig.TRAP_CRAB),e.prototype.hideObject.call(this)},t}(Vf),sg=ng,ag=i(79),rg=g.Z.SPACESHIP,og=rg.KEY,cg=rg.FRAME,hg=function(e){function t(t,i){var n;return(n=e.call(this,t,og,cg.TRAP_SPACESHIP,i)||this).hideObjectAfterActivation=function(){n.anims.currentAnim.key==J.Z.SPACESHIP.KEY&&(n.setFrame(cg.TRAP_SPACESHIP),e.prototype.hideObject.call((0,s.Z)(n)))},n.trapObjectType="spaceship",n}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setDepth(B.Z.TRAP),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.activateTrapObject=function(){var e=this;this.scene.time.delayedCall(zf.DELAY_TRAP_OBJECT,(function(){e.anims.play(J.Z.SPACESHIP.KEY,!0),e.isOutOfLeftOfCamera()||e.scene.audio.playSound(ag.Z.ROCKET_LAUNCH,{volume:.7}),e.on("animationComplete",e.hideObjectAfterActivation,e)})),this.status=Kf.ACTIVATED},i.hideObject=function(){this.anims.stop(),this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),this.setFrame(cg.TRAP_SPACESHIP),e.prototype.hideObject.call(this)},t}(Vf),ug=hg,lg=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;switch(c){case"crab":(i=new sg(this.scene,e)).setPosition(s,a);break;case"spaceship":(i=new ug(this.scene,e)).setPosition(s+r/2,a);break;case"balloon":(i=new $f(this.scene,e)).setPosition(s+r/2,a);break;default:(i=new pc(this.scene,{id:n,type:"decor-behind-obj:"+c})).setPosition(s,a)}i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("trapObjectType",e.type);if(0==i.length)return!1;var n=e.x,s=e.y,a=e.type,r=e.worldSizeX;return i.forEach((function(e){if(e.isActivated()&&!t){if(t=!0,"spaceship"===a||"balloon"===a)return void e.reuseObject(n+r/2,s);e.reuseObject(n,s)}})),t},i.killAndHideAll=function(){this.children.each((function(e){e instanceof Vf&&e.hideObject()}))},t}(gc),dg=lg,pg={READY:"ready",INACTIVE:"inactive",ACTIVE:"active",HIDDEN:"hidden"},fg=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,0,0,i,n)||this).id=void 0,r.status=void 0,r.suddenObjectType=void 0,r.payload=void 0,r.blockLine=void 0,r.leftBlockLineOffset=void 0,r.rightBlockLineOffset=void 0,r.blockHeight=void 0,r.id=a.id,r.payload=a,r.status=pg.READY,r.suddenObjectType="sudden",r.leftBlockLineOffset=0,r.rightBlockLineOffset=0,r.blockHeight=.5,r.initSprite(),r.createBlockLine(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var i=t.prototype;return i.getID=function(){return this.payload.id},i.isReady=function(){return this.status===pg.READY},i.isActive=function(){return this.status===pg.ACTIVE},i.isInactive=function(){return this.status===pg.INACTIVE},i.isHidden=function(){return this.status===pg.HIDDEN},i.reuseObject=function(e,t,i){this.status=pg.READY,this.payload.id=e,this.revive(),this.setVisible(!1),this.setPosition(t,i)},i.hideObject=function(){this.status=pg.HIDDEN,this.kill()},i.setCurrentStatus=function(){var e=Phaser.Geom.Intersects.RectangleToRectangle(this.getBounds(),this.scene.cameras.main.worldView);this.isReady()&&e&&(this.status=pg.ACTIVE),this.isActive()&&!e&&this.isOutOfLeftOfCamera()&&(this.status=pg.INACTIVE)},i.isOutOfLeftOfCamera=function(){return this.getRightCenter().x<this.scene.cameras.main.worldView.left},i.initSprite=function(){this.setOrigin(0,1),this.setDepth(B.Z.STATIC),this.scene.physics.world.enable(this)},i.createBlockLine=function(){var e=this.payload,t=e.bodyWidth,i=e.bodyHeight;this.blockLine=new Phaser.Geom.Line(this.x+this.leftBlockLineOffset,this.y-i*this.blockHeight,this.x+t-this.rightBlockLineOffset,this.y-i*this.blockHeight)},i.update=function(){if(this.setCurrentStatus(),this.isActive()){var e=this.payload,t=e.bodyWidth,i=e.bodyHeight;this.blockLine.setTo(this.x+this.leftBlockLineOffset,this.y-i*this.blockHeight,this.x+t-this.rightBlockLineOffset,this.y-i*this.blockHeight)}this.isInactive()&&this.hideObject()},t}(Phaser.GameObjects.Sprite),gg=fg,mg=g.Z.SUDDEN_OBJECTS,vg=mg.KEY,yg=mg.FRAME,Eg={FALL_HEIGHT:600,SLICE_HEIGHT:[0,19,46,57,78],SLICE_CENTER_OFFSET:[0,1,-2,4,1],DELAY_BETWEEN_SLICE:110,SLICE_WORLD_SIZE_X:[115,110,115.5,110,117],SLICE_WORLD_SIZE_Y:[57,69,55,69,69.5],SANDWICH_WORLD_SIZE_X:139.5,SANDWICH_WORLD_SIZE_Y:151.5},Sg=function(e){function t(t,i){var n;(n=e.call(this,t,vg,yg.SUDDEN_SANDWICH,i)||this).sandwichSliceSprites=void 0,n.fallingBreadFrames=void 0,n.setVisible(!1),n.sandwichSliceSprites=[],n.fallingBreadFrames=[],n.suddenObjectType="fallingBread",n.blockHeight=.43,n.rightBlockLineOffset=15,n.leftBlockLineOffset=25;for(var s=0;s<5;s++){var a=new Phaser.GameObjects.Image(n.scene,n.x,n.y,vg,yg.SUDDEN_FALLING_BREAD_PREFIX+(s+1).toString());a.setDepth(B.Z.STATIC),a.setOrigin(0,1),a.setWorldSize(Eg.SLICE_WORLD_SIZE_X[s],Eg.SLICE_WORLD_SIZE_Y[s]),n.scene.add.existing(a),a.kill(),n.sandwichSliceSprites.push(a)}return n}(0,a.Z)(t,e);var i=t.prototype;return i.activateObject=function(){var e=this;if(this.isReady()||this.isActive())for(var t=function(t){var i=e.y-Eg.FALL_HEIGHT,n=e.y-Eg.SLICE_HEIGHT[t],s=e.sandwichSliceSprites[t];s.setPosition(e.x+Eg.SLICE_CENTER_OFFSET[t],i),e.scene.tweens.getTweensOf(s).forEach((function(e){e.stop()}));var a=e.scene.tweens.createTimeline();a.add({targets:s,y:n,delay:0+t*Eg.DELAY_BETWEEN_SLICE,duration:600-Eg.SLICE_HEIGHT[t],onStart:function(){s.revive()},onComplete:function(){e.scene.audio.playSound(ag.Z.BREAD_FALL)}});var r=s.scaleX,o=s.scaleY;a.add({targets:s,y:n-40,scaleY:.95*o,scaleX:1.3*r,duration:100,ease:"Sine.easeInOut",yoyo:!0}),a.add({targets:s,y:n-20,duration:100,ease:"Sine.easeInOut",onComplete:function(){s.kill(),!e.visible&&e.active&&e.setVisible(!0),e.setFrame(yg.SUDDEN_SANDWICH_PREFIX+(t+1).toString()),e.setWorldSize(Eg.SANDWICH_WORLD_SIZE_X,Eg.SANDWICH_WORLD_SIZE_Y),s.setY(e.y)},yoyo:!0}),a.play()},i=0;i<this.sandwichSliceSprites.length;i++)t(i)},i.createBlockLine=function(){this.blockLine=new Phaser.Geom.Line(this.x+this.leftBlockLineOffset,this.y-this.height*this.blockHeight,this.x+this.width-this.rightBlockLineOffset,this.y-this.height*this.blockHeight)},i.update=function(){this.setCurrentStatus(),this.isActive()&&this.blockLine.setTo(this.x+this.leftBlockLineOffset,this.y-this.height*this.blockHeight,this.x+this.width-this.rightBlockLineOffset,this.y-this.height*this.blockHeight),this.isInactive()&&this.hideObject()},i.hideObject=function(){this.status=pg.HIDDEN,this.setFrame(yg.SUDDEN_SANDWICH,!0);for(var t=0;t<this.sandwichSliceSprites.length;t++){var i=this.sandwichSliceSprites[t];this.scene.tweens.getTweensOf(i).forEach((function(e){e.stop()})),this.setWorldSize(Eg.SANDWICH_WORLD_SIZE_X,Eg.SANDWICH_WORLD_SIZE_Y),i.setY(this.y),i.kill()}e.prototype.hideObject.call(this)},i.getBlockLine=function(){return this.visible?this.blockLine:null},t}(gg),Tg=Sg,bg=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var i=t.prototype;return i.addNewChild=function(e,t){if(!this.reuseInactiveObjects(t)){var i=null,n=t.id,s=t.x,a=t.y,r=t.worldSizeX,o=t.worldSizeY,c=t.type;if("fallingBread"===c)i=new Tg(this.scene,e);else i=new pc(this.scene,{id:n,type:"sudden-obj:"+c});i.setPosition(s,a),i.setWorldSize(r,o),this.add(i)}},i.reuseInactiveObjects=function(e){if(0==this.children.size)return!1;var t=!1,i=this.getMatching("suddenObjectType",e.type);return 0!=i.length&&(i.forEach((function(i){i instanceof gg&&i.isHidden()&&!t&&(t=!0,i.reuseObject(e.id,e.x,e.y))})),t)},i.killAndHideAll=function(){this.children.each((function(e){e instanceof gg&&(e.isHidden()||e.hideObject())}))},t}(gc),Ag=bg,Cg=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.symbolList=void 0,i.speedModList=void 0,i.seethroughList=void 0,i.collectList=void 0,i.interactableList=void 0,i.goalList=void 0,i.movingList=void 0,i.staticList=void 0,i.decorBehindList=void 0,i.decorList=void 0,i.frontObjectList=void 0,i.movementModObjectList=void 0,i.trapObjectList=void 0,i.suddenObjectList=void 0,i.scene=t,i.createGroups(),i}(0,a.Z)(t,e);var i=t.prototype;return i.createGroups=function(){this.goalList=new Yf(this.scene),this.decorList=new su(this.scene,{runChildUpdate:!0}),this.symbolList=new Mf(this.scene),this.movingList=new Ih(this.scene,{runChildUpdate:!0}),this.staticList=new bc(this.scene,{runChildUpdate:!0}),this.collectList=new sl(this.scene,{runChildUpdate:!0}),this.speedModList=new Nu(this.scene,{runChildUpdate:!0}),this.seethroughList=new uh(this.scene,{runChildUpdate:!0}),this.decorBehindList=new sp(this.scene,{runChildUpdate:!0}),this.interactableList=new Tf(this.scene),this.frontObjectList=new Sl(this.scene,{runChildUpdate:!0}),this.movementModObjectList=new $p(this.scene,{runChildUpdate:!0}),this.trapObjectList=new dg(this.scene,{runChildUpdate:!0}),this.suddenObjectList=new Ag(this.scene,{runChildUpdate:!0}),this.scene.add.existing(this.staticList),this.scene.add.existing(this.seethroughList),this.scene.add.existing(this.movingList),this.scene.add.existing(this.decorList),this.scene.add.existing(this.decorBehindList),this.scene.add.existing(this.speedModList),this.scene.add.existing(this.collectList),this.scene.add.existing(this.frontObjectList),this.scene.add.existing(this.movementModObjectList),this.scene.add.existing(this.interactableList),this.scene.add.existing(this.symbolList),this.scene.add.existing(this.goalList),this.scene.add.existing(this.trapObjectList),this.scene.add.existing(this.suddenObjectList)},i.init=function(){this.addSymbolObjects(),this.addGoalObjects(),this.addStaticObjects(),this.addMovingObjects(),this.addCollectObjects(),this.addSpeedModObjects(),this.addMovementModObjects(),this.addSeethroughObjects(),this.addDecorBehindObjects(),this.addInteractableObjects(),this.addTrapObjects(),this.addSuddenObject(),this.setTriggeredByInteractableForMovingObject()},i.hideAllObjects=function(){this.goalList.killAndHideAll(),this.decorBehindList.killAndHideAll(),this.staticList.killAndHideAll(),this.movingList.killAndHideAll(),this.collectList.killAndHideAll(),this.seethroughList.killAndHideAll(),this.movementModObjectList.killAndHideAll(),this.decorList.killAndHideAll(),this.interactableList.killAndHideAll(),this.symbolList.killAndHideAll(),this.speedModList.killAndHideAll(),this.collectList.killAndHideAll(),this.frontObjectList.killAndHideAll(),this.trapObjectList.killAndHideAll(),this.suddenObjectList.killAndHideAll()},i.getProperties=function(e){var t={};return e.properties?(e.properties.forEach((function(e){var i=e.name,n=e.value;t[i]=n})),t):t},i.addSymbolObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.symbolList.killAndHideAll();var n=i.getObjectLayer("symbol");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c,h,u=e.scene.physics.world.fps;switch(n){case"watch-trigger":var l=e.getProperties(t),d=l.winkDuration,p=void 0===d?0:d,f=l.beamDuration,g=void 0===f?0:f,m=l.beamHoldDuration,v=void 0===m?0:m,y=l.fallDuration,E=void 0===y?0:y,S=l.confuseDuration;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,winkDuration:1e3*p,beamDuration:1e3*g,beamHoldDuration:v*u,confuseDuration:1e3*(void 0===S?0:S),fallDuration:1e3*E};break;case"stare-trigger":var T=e.getProperties(t),b=T.winkDuration,A=void 0===b?0:b,C=T.beamDuration,O=void 0===C?0:C,I=T.beamHoldDuration,w=void 0===I?0:I,P=T.confuseDuration,_=void 0===P?0:P,R=T.fallDuration;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,winkDuration:1e3*A,beamDuration:1e3*O,beamHoldDuration:w*u,confuseDuration:1e3*_,fallDuration:1e3*(void 0===R?0:R)};break;case"end-trigger":c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};break;case"rise":var k=e.getProperties(t),x=k.duration,L=void 0===x?0:x,D=k.height;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,riseDuration:1e3*L,riseHeight:void 0===D?100:D};break;case"fall":var B=e.getProperties(t),N=B.duration,M=void 0===N?0:N,Z=B.height;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,fallDuration:1e3*M,fallHeight:void 0===Z?0:Z};break;case"start-point":e.scene.startPoint={x:s,y:a};break;case"monkey-trigger":var G=e.getProperties(t).duration;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,frontObjectDuration:1e3*(void 0===G?0:G)};break;case"owl-trigger":var F=e.getProperties(t).duration;c={id:i,width:r,height:o},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,frontObjectDuration:1e3*(void 0===F?0:F)}}c&&h&&e.symbolList.addNewChild(c,h)}}))}},i.addGoalObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.goalList.killAndHideAll();var n=i.getObjectLayer("objects/goal-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c={id:i},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.goalList.addNewChild(c,h)}}))}},i.addDecorObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.decorList.killAndHideAll();var n=i.getObjectLayer("objects/decor-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c={id:i},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.decorList.addNewChild(c,h)}}))}},i.addStaticObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.staticList.killAndHideAll();var n=i.getObjectLayer("objects/static-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t).isAffectedByGravity,h={id:i,bodyWidth:r,bodyHeight:o,isAffectedByGravity:void 0!==c&&c},u={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.staticList.addNewChild(h,u)}}))}},i.addCollectObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.collectList.killAndHideAll();var n=i.getObjectLayer("objects/collect-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t).value,h={id:i,value:void 0===c?0:c,callback:e.scene.collectibleCallback},u={id:i,type:n,x:s+r/2,y:a,worldSizeX:r,worldSizeY:o};e.collectList.addNewChild(h,u)}}))}},i.addSpeedModObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.speedModList.killAndHideAll();var n=i.getObjectLayer("objects/speed-modifier-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t),h=c.speedBonusPercent,u=void 0===h?0:h,l=c.speedDuration,d=void 0===l?0:l,p={id:i,speedDuration:1e3*d,speedBonusPercent:u},f={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,speedBonusPercent:u,speedDuration:1e3*d};e.speedModList.addNewChild(p,f)}}))}},i.addMovementModObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.movementModObjectList.killAndHideAll();var n=i.getObjectLayer("objects/movement-modifier-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t),h=c.slippingSpeed,u=void 0===h?0:h,l=c.slippingFriction,d=void 0===l?0:l,p=c.speed,f=void 0===p?0:p,g=c.forcePushDuration,m=void 0===g?.5:g,v=c.direction,y=void 0===v?"right":v,E={id:i,slippingSpeed:u,slippingFriction:d,pushingSpeed:f,forcePushDuration:1e3*m,forcePushSpeed:f,direction:y},S={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,slippingSpeed:u,slippingFriction:d,pushingSpeed:f,forcePushDuration:1e3*m,forcePushSpeed:f,direction:y};e.movementModObjectList.addNewChild(E,S)}}))}},i.addSeethroughObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.seethroughList.killAndHideAll();var n=i.getObjectLayer("objects/seethrough-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t).isAffectedByGravity,h={id:i,bodyWidth:r,bodyHeight:o,isAffectedByGravity:void 0!==c&&c},u={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.seethroughList.addNewChild(h,u)}}))}},i.addMovingObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.movingList.killAndHideAll();var n=i.getObjectLayer("objects/moving-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t),h=c.isAffectedByGravity,u=void 0===h||h,l=c.movingLimit,d=void 0===l?0:l,p=c.speed,f=void 0===p?0:p,g=c.direction,m={id:i,bodyWidth:r,bodyHeight:o,isAffectedByGravity:u,speed:f,maximumDistance:d,direction:void 0===g?"right":g},v={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,speed:f,maximumDistance:d};e.movingList.addNewChild(m,v)}}))}},i.addDecorBehindObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.decorBehindList.killAndHideAll();var n=i.getObjectLayer("objects/decor-obj-behind");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c={id:i},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.decorBehindList.addNewChild(c,h)}}))}},i.addInteractableObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.interactableList.killAndHideAll();var n=i.getObjectLayer("objects/interactable-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t).triggerID,h=void 0===c?-1:c,u={id:i,triggerID:h},l={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o,triggerID:h};e.interactableList.addNewChild(u,l)}}))}},i.setPlayerInfoToObjects=function(e){var t=this;e.active&&(this.frontObjectList.getChildren().forEach((function(t){t.setPlayerPosition({x:e.x,y:500})})),this.decorBehindList.getChildren().forEach((function(i){var n=i,s=e.getPlayerSpeed(),a=t.scene.game.loop.delta,r=void 0===a?0:a,o=n.x;0===s||n.isInactive()||n.isHidden()||n.setX(o+.5*s/1e3*r)})))},i.addTrapObjects=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.trapObjectList.killAndHideAll();var n=i.getObjectLayer("objects/trap-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c={id:i},h={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.trapObjectList.addNewChild(c,h)}}))}},i.addSuddenObject=function(){var e=this,t=this.scene.mapManager,i=l()(t);this.suddenObjectList.killAndHideAll();var n=i.getObjectLayer("objects/sudden-obj");if(null!=n&&n.visible){var s=n.objects,a=void 0===s?[]:s;a&&a.forEach((function(t){var i=t.id,n=t.type,s=t.x,a=t.y,r=t.width,o=t.height;if(t.visible&&s&&a&&r&&o){var c=e.getProperties(t).isAffectedByGravity,h={id:i,bodyWidth:r,bodyHeight:o,isAffectedByGravity:void 0!==c&&c},u={id:i,type:n,x:s,y:a,worldSizeX:r,worldSizeY:o};e.suddenObjectList.addNewChild(h,u)}}))}},i.addFrontObstructingObjects=function(e,t){this.frontObjectList.getChildren().forEach((function(e){if(e instanceof Mn){var t=e;t.isPlaying()&&t.actions.end()}})),this.frontObjectList.addNewChild(e,t)},i.getGoalPosition=function(){return this.goalList.getGoalPosition()},i.setTriggeredByInteractableForMovingObject=function(){var e=[];this.interactableList.getChildren().forEach((function(t){t instanceof z&&(t.isActivated()||(e=h()(e).call(e,t.getTriggerID())))})),0!=e.length&&this.movingList.getChildren().forEach((function(t){t instanceof ne&&t.isStanding()&&_n()(e).call(e,t.getID())&&t.setTriggeredByInteractable()}))},i.onGameScenePause=function(){var e=this;this.trapObjectList.getChildren().forEach((function(t){t instanceof Vf&&(t.isActivated()&&t.visible&&(t.anims.pause(),e.scene.tweens.getTweensOf(t).forEach((function(e){e.isPlaying()&&e.pause()}))))})),this.movingList.getChildren().forEach((function(t){t instanceof ne&&(t.isRunning()&&(t.anims.pause(),e.scene.tweens.getTweensOf(t).forEach((function(e){e.isPlaying()&&e.pause()}))))}))},i.onGameSceneResume=function(){var e=this;this.trapObjectList.getChildren().forEach((function(t){t instanceof Vf&&(t.isActivated()&&t.visible&&(t.anims.resume(),e.scene.tweens.getTweensOf(t).forEach((function(e){e.isPaused()&&e.resume()}))))})),this.movingList.getChildren().forEach((function(t){t instanceof ne&&(t.isRunning()&&(t.anims.resume(),e.scene.tweens.getTweensOf(t).forEach((function(e){e.isPaused()&&e.resume()}))))}))},i.runMovingObjectByID=function(e){this.movingList.getChildren().forEach((function(t){if(t instanceof ne&&t.isStanding()){var i=t.getID();_n()(e).call(e,i)&&t.onTouch()}}))},i.activateSuddenObjectByID=function(e){this.suddenObjectList.getChildren().forEach((function(t){if(t instanceof gg&&(t.isReady()||t.isActive())){var i=t.getID();_n()(e).call(e,i)&&t.activateObject()}}))},t}(Oe),Og=Cg,Ig={HIDE:"hide",READY:"ready",ESCAPE:"escape",WALKING:"walking",RUNNING:"running",STARTLE:"startle",CONGRATS:"congrats",SLIPPING:"slipping",LUMBERING:"lumbering",IMPULSIVE:"impulsive",PRE_RUNNING:"pre_running",FORCE_PUSHED:"force_pushed"},wg=function(){function e(e){this.player=void 0,this.slipperyObjectCollision=void 0,this.pushingObjectCollision=void 0,this.player=e,this.slipperyObjectCollision=!1,this.pushingObjectCollision=!1}var t=e.prototype;return t.isOnSlipperyObject=function(){return this.slipperyObjectCollision},t.isOnPushingObject=function(){return this.pushingObjectCollision},t.setSlipperyObjectCollision=function(){this.slipperyObjectCollision=!0},t.setPushingObjectCollision=function(){this.pushingObjectCollision=!0},t.resetCollisionData=function(){this.slipperyObjectCollision=!1,this.pushingObjectCollision=!1},e}(),Pg=wg,_g=function(){function e(e){this.player=void 0,this.baseSpeed=void 0,this.pushSpeed=void 0,this.slippingSpeed=void 0,this.slippingFriction=void 0,this.speedBonusPercent=void 0,this.speedBonusDuration=void 0,this.forcePushSpeed=void 0,this.baseSpeed=240,this.speedBonusPercent=1,this.speedBonusDuration=0,this.slippingSpeed=0,this.slippingFriction=0,this.player=e}var t=e.prototype;return t.setSlippingSpeed=function(e){this.slippingSpeed=e},t.setSlippingFriction=function(e){this.slippingFriction=e},t.setSpeedBonusPercent=function(e){this.speedBonusPercent=e},t.setSpeedBonusDuration=function(e){this.speedBonusDuration=e},t.setPushSpeed=function(e){this.pushSpeed=e},t.getSpeedBonusDuration=function(){return this.speedBonusDuration},t.getSpeedBonusPercent=function(){return this.speedBonusPercent},t.setForcePushSpeed=function(e){this.forcePushSpeed=e},t.calculateSpeed=function(){var e=this.player.scene.game.loop.delta,t=void 0===e?0:e,i=this.player.scene.physics.world.fps;if(this.player.isPreRunning())return 0;if(this.player.isHide())return this.slippingSpeed>this.slippingFriction?(this.slippingSpeed-=this.slippingFriction*i/1e3*t,this.slippingSpeed+this.pushSpeed):(this.slippingSpeed=0,this.slippingFriction=0,this.pushSpeed);if(this.player.isWalking()){var n=this.pushSpeed;return this.baseSpeed+n}if(this.player.isSlipping()){var s=this.slippingSpeed;return this.baseSpeed+s}if(this.player.isImpulsive()){var a=this.pushSpeed;return this.baseSpeed+a}return this.player.isForcePushed()?this.baseSpeed+this.forcePushSpeed:this.player.isRunning()||this.player.isLumbering()?this.baseSpeed*this.speedBonusPercent:0},t.resetData=function(){this.pushSpeed=0,this.player.isForcePushed()||(this.forcePushSpeed=0)},e}(),Rg=_g,kg=function(e){this.player=void 0,this.player=e},xg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i),this.player.body.setVelocityX(0)},t}(kg),Lg=xg,Dg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=.7,this.player.setStatus(i),this.player.body.setVelocityX(0)},t}(kg),Bg=Dg,Ng=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.hideLoop=function(){var e=n.payload.animLoopKey;n.player.spine.play(e,!0,!0),n.player.spine.timeScale=1},n.payload=i,n}(0,a.Z)(t,e);var i=t.prototype;return i.execute=function(){var e=this.payload,t=e.animStartKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i),this.player.setSpeedBonusDuration(0),this.addAnimEvent({completeCallback:this.hideLoop})},i.addAnimEvent=function(e){var t=this,i={event:function(){},start:function(){t.player.spine.state.removeListener(i),e.startCallback&&e.startCallback()},end:function(){e.endCallback&&e.endCallback()},interrupt:function(){t.player.spine.state.removeListener(i),e.interruptCallback&&e.interruptCallback()},dispose:function(){e.disposeCallback&&e.disposeCallback()},complete:function(){t.player.spine.state.removeListener(i),e.completeCallback&&e.completeCallback()}};this.player.spine.state.addListener(i)},t}(kg),Mg=Ng,Zg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i)},t}(kg),Gg=Zg,Fg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!0,!1),this.player.spine.timeScale=1,this.player.setStatus(i),this.player.setFlipX(!1),this.player.body.setVelocityX(0)},t}(kg),Ug=Fg,Hg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.startRun=function(){var e=n.payload.status;n.player.setStatus(e)},n.payload=i,n}(0,a.Z)(t,e);var i=t.prototype;return i.execute=function(){var e=this.payload,t=e.animKey,i=e.preStatus;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i),this.addAnimEvent({eventCallback:this.startRun})},i.addAnimEvent=function(e){var t=this,i={event:function(n,s){"start_move"===s.data.name&&(t.player.spine.state.removeListener(i),e.eventCallback&&e.eventCallback())},start:function(){e.startCallback&&e.startCallback()},end:function(){e.endCallback&&e.endCallback()},interrupt:function(){t.player.spine.state.removeListener(i),e.interruptCallback&&e.interruptCallback()},dispose:function(){e.disposeCallback&&e.disposeCallback()},complete:function(){t.player.spine.state.removeListener(i),e.completeCallback&&e.completeCallback()}};this.player.spine.state.addListener(i)},t}(kg),jg=Hg,Yg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.playRunAnimation=function(){var e=n.payload,t=(e.animKeyRun,e.status);n.player.spine.play("move",!0,!0),n.player.spine.timeScale=1,n.player.setStatus(t),n.player.setFlipX(!0),n.player.body.setVelocityX(-500)},n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i),this.player.body.setVelocityX(-300),this.player.setStatus(i)},t}(kg),Kg=Yg,Wg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!0,!0),this.player.spine.timeScale=1,this.player.setStatus(i)},t}(kg),Vg=Wg,zg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!0,!0),this.player.spine.timeScale=1,this.player.setStatus(i)},t}(kg),Xg=zg,Jg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!0,!0),this.player.spine.timeScale=1,this.player.setStatus(i),this.player.setSpeedBonusDuration(0)},t}(kg),qg=Jg,Qg=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.player.spine.play(t,!1,!0),this.player.spine.timeScale=1,this.player.setStatus(i)},t}(kg),$g=Qg,em=function(){function e(e){this.player=void 0,this.runCommand=void 0,this.walkCommand=void 0,this.hideCommand=void 0,this.readyCommand=void 0,this.startleCommand=void 0,this.escapeCommand=void 0,this.congratsCommand=void 0,this.sluggishCommand=void 0,this.slideCommand=void 0,this.pushCommand=void 0,this.forcePushCommand=void 0,this.player=e,this.addRunCommand(),this.addWalkCommand(),this.addHideCommand(),this.addReadyCommand(),this.addStartleCommand(),this.addEscapeCommand(),this.addCongratsCommand(),this.addSluggishCommand(),this.addSlideCommand(),this.addPushCommand(),this.addForcePushCommand()}var t=e.prototype;return t.run=function(){this.runCommand.execute()},t.walk=function(){this.player.isStartled()||this.walkCommand.execute()},t.hide=function(){this.hideCommand.execute()},t.ready=function(){this.readyCommand.execute()},t.escape=function(){this.escapeCommand.execute()},t.startle=function(){this.startleCommand.execute()},t.congrats=function(){this.congratsCommand.execute()},t.sluggish=function(){this.sluggishCommand.execute()},t.slide=function(){this.slideCommand.execute()},t.push=function(){this.pushCommand.execute()},t.forcePush=function(){this.forcePushCommand.execute()},t.addRunCommand=function(){this.runCommand=new jg(this.player,{preStatus:Ig.PRE_RUNNING,status:Ig.RUNNING,animKey:J.Z.PLAYER_RUNNING.KEY})},t.addWalkCommand=function(){this.walkCommand=new qg(this.player,{status:Ig.WALKING,animKey:J.Z.PLAYER_WALKING.KEY})},t.addHideCommand=function(){this.hideCommand=new Mg(this.player,{status:Ig.HIDE,animStartKey:J.Z.PLAYER_HIDE_START.KEY,animLoopKey:J.Z.PLAYER_HIDE.KEY})},t.addReadyCommand=function(){this.readyCommand=new Ug(this.player,{status:Ig.READY,animKey:J.Z.PLAYER_IDLE.KEY})},t.addStartleCommand=function(){this.startleCommand=new Bg(this.player,{status:Ig.STARTLE,animKey:J.Z.PLAYER_STARTLE.KEY})},t.addEscapeCommand=function(){this.escapeCommand=new Kg(this.player,{status:Ig.ESCAPE,animKey:J.Z.PLAYER_ESCAPE.KEY,animKeyRun:J.Z.PLAYER_RUNNING.KEY})},t.addCongratsCommand=function(){this.congratsCommand=new Lg(this.player,{status:Ig.CONGRATS,animKey:J.Z.PLAYER_CONGRATULATION.KEY})},t.addSluggishCommand=function(){this.sluggishCommand=new Xg(this.player,{status:Ig.LUMBERING,animKey:J.Z.PLAYER_LUMBERING.KEY})},t.addSlideCommand=function(){this.slideCommand=new Vg(this.player,{status:Ig.SLIPPING,animKey:J.Z.PLAYER_SLIDE.KEY})},t.addPushCommand=function(){this.pushCommand=new Gg(this.player,{status:Ig.IMPULSIVE,animKey:J.Z.PLAYER_PUSH.KEY})},t.addForcePushCommand=function(){this.forcePushCommand=new $g(this.player,{status:Ig.FORCE_PUSHED,animKey:J.Z.PLAYER_PUSH.KEY})},e}(),tm=em,im=function(e){function t(t){var i;return(i=e.call(this,t)||this).lastSpeedModDelayCall=void 0,i.forcePushID=void 0,i.forcePushID=0,i}(0,a.Z)(t,e);var i=t.prototype;return i.run=function(t,i){var n=this;this.player.isStartled()||this.player.isEscape()||this.player.isRunning()||this.player.isPreRunning()||(t&&this.player.setSpeedBonusPercent(t),e.prototype.run.call(this),i&&this.addSpeedModEndDelay(i,(function(){n.speedModEnd()})))},i.walk=function(){if(this.lastSpeedModDelayCall&&!this.lastSpeedModDelayCall.hasDispatched){if(this.lastSpeedModDelayCall.paused=!1,this.player.getSpeedBonusPercent()>1)return this.lastSpeedModDelayCall.remove(!0),void e.prototype.walk.call(this);if(this.player.getSpeedBonusPercent()<1)return void this.sluggish()}e.prototype.walk.call(this)},i.hide=function(){this.player.isForcePushed()||e.prototype.hide.call(this)},i.ready=function(){e.prototype.ready.call(this)},i.escape=function(){this.player.isEscape()||e.prototype.escape.call(this)},i.congrats=function(){var t=this;this.player.isCongrats()||(e.prototype.congrats.call(this),this.addDelayCalled(500,(function(){t.player.body.setVelocityX(30),t.addDelayCalled(500,(function(){t.player.body.setVelocityX(0)}))})))},i.sluggish=function(t,i){var n=this;this.player.isStartled()||this.player.isEscape()||this.player.isLumbering()||(t&&this.player.setSpeedBonusPercent(t),e.prototype.sluggish.call(this),i&&this.addSpeedModEndDelay(i,(function(){n.speedModEnd()})))},i.slide=function(t,i){this.player.isStartled()||this.player.isEscape()||(t&&this.player.setSlippingSpeed(t),i&&this.player.setSlippingFriction(i),this.player.isSlipping()||e.prototype.slide.call(this))},i.push=function(t){if(!this.player.isEscape()){if(t)this.player.setPushingSpeed(t);else{if(this.player.isHide())return;e.prototype.walk.call(this)}this.player.isImpulsive()||this.player.isHide()||e.prototype.push.call(this)}},i.forcePush=function(t,i){var n=this;if(!this.player.isStartled()&&!this.player.isEscape()&&!this.player.isForcePushed()&&t&&0!=t){this.player.setForcePushSpeed(t),e.prototype.forcePush.call(this);var s=this.forcePushID,a=i||500;this.addDelayCalled(a,(function(){n.forcePushEnd(s)}))}},i.startle=function(){e.prototype.startle.call(this)},i.addSpeedModEndDelay=function(e,t){this.lastSpeedModDelayCall&&!this.lastSpeedModDelayCall.hasDispatched&&this.lastSpeedModDelayCall.remove(),this.lastSpeedModDelayCall=this.player.scene.time.delayedCall(e,t)},i.addDelayCalled=function(e,t){this.player.scene.time.delayedCall(e,t)},i.speedModEnd=function(){this.player.setSpeedBonusPercent(1),(this.player.isRunning()||this.player.isPreRunning()||this.player.isLumbering())&&this.walk()},i.forcePushEnd=function(t){t==this.forcePushID&&this.player.isForcePushed()&&(this.player.setForcePushSpeed(0),e.prototype.walk.call(this))},t}(tm),nm=im,sm=g.Z.MOUSE_SPINE.KEY,am=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).spine=void 0,i.actions=void 0,i.status=void 0,i.speed=void 0,i.collisionData=void 0,i.initState(),i.initSpine(),i.initBody(),i.initActions(),i.setDepth(B.Z.PLAYER),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.setFlipX=function(e){e?this.spine.setScale(-.5,.5):this.spine.setScale(.5)},i.setBodySize=function(e,t){this.body.setSize(e,t,!1),this.body.setOffset(.5*-e,-t)},i.getCenter=function(){return new Phaser.Math.Vector2(this.x,this.y-this.spine.height/2)},i.initState=function(){this.speed=new Rg(this),this.collisionData=new Pg(this)},i.initSpine=function(){this.spine=this.scene.add.spine(0,0,sm,J.Z.PLAYER_IDLE.KEY,!0),this.spine.setScale(.5);var e=this.spine;this.add(e)},i.initBody=function(){this.scene.physics.world.enable(this);var e=this.spine.getBounds(),t=.15*e.size.x,i=.8*e.size.y;this.setBodySize(t,i)},i.initActions=function(){this.actions=new nm(this)},i.getStatus=function(){return this.status},i.setStatus=function(e){this.status=e},i.isHide=function(){return this.status===Ig.HIDE},i.isEscape=function(){return this.status===Ig.ESCAPE},i.isWalking=function(){return this.status===Ig.WALKING},i.isPreRunning=function(){return this.status===Ig.PRE_RUNNING},i.isRunning=function(){return this.status===Ig.RUNNING},i.isCongrats=function(){return this.status===Ig.CONGRATS},i.isSlipping=function(){return this.status===Ig.SLIPPING},i.isImpulsive=function(){return this.status===Ig.IMPULSIVE},i.isStartled=function(){return this.status===Ig.STARTLE},i.isForcePushed=function(){return this.status===Ig.FORCE_PUSHED},i.isLumbering=function(){return this.status===Ig.LUMBERING},i.setPushingSpeed=function(e){this.collisionData.setPushingObjectCollision(),this.speed.setPushSpeed(e)},i.setSpeedBonusPercent=function(e){this.speed.setSpeedBonusPercent(e<=0?0:e)},i.setSpeedBonusDuration=function(e){this.speed.setSpeedBonusDuration(e<=0?0:e)},i.setSlippingSpeed=function(e){this.collisionData.setSlipperyObjectCollision(),this.speed.setSlippingSpeed(e)},i.setSlippingFriction=function(e){this.speed.setSlippingFriction(e)},i.setForcePushSpeed=function(e){this.speed.setForcePushSpeed(e)},i.getSpeedBonusDuration=function(){return this.speed.getSpeedBonusDuration()},i.getSpeedBonusPercent=function(){return this.speed.getSpeedBonusPercent()},i.getPlayerSpeed=function(){return this.speed.calculateSpeed()},i.setRunningSpeed=function(){var e=this.speed.calculateSpeed(),t=this.scene.game.loop.delta,i=void 0===t?0:t,n=this.x;this.setX(n+e/1e3*i),this.speed.resetData()},i.skateboardAnimation=function(){var e=this.y;this.scene.add.tween({targets:this,y:e-20,duration:100,ease:"Power0",yoyo:!0})},i.resetIllegalMovementState=function(){this.isSlipping()&&!this.collisionData.isOnSlipperyObject()&&this.actions.walk(),this.isImpulsive()&&!this.collisionData.isOnPushingObject()&&this.actions.walk()},i.update=function(){this.active&&(this.resetIllegalMovementState(),this.setRunningSpeed(),this.collisionData.resetCollisionData())},t}(Phaser.GameObjects.Container),rm=am,om=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.goalTouch=function(e,t){if(e instanceof rm&&t instanceof K){var n=t;e.x<n.x+15||i.scene.levelComplete()}},i.speedChange=function(e,t){var i;if(e instanceof rm&&t instanceof de){var n=e,s=t;if(!s.isHidden()){s.getSpeedDuration();var a=s.getSpeedBonusPercent(),r=s.x+.925*s.displayWidth,o=n.actions;if(s instanceof Du){var c=s.x+.5*s.displayWidth;if(n.x<c)return;if(!s.isActive())return;if(n.isHide())return;o.run(a,3780),s.activateSlideEffect(),n.skateboardAnimation()}if(_n()(i=s.speedModType).call(i,"chocolate")){if(n.x>=r)return n.setSpeedBonusPercent(1),void(n.isLumbering()&&o.walk());if(n.isHide())return;o.sluggish(a)}}}},i.interactableTouch=function(e,t){if(e instanceof rm&&t instanceof z){var n=e,s=t,a=s.x+.9*s.displayWidth,r=s.x+.2*s.displayWidth,o=i.scene.objectManager;if(s instanceof hf){if(a=s.x+s.displayWidth,r=s.x,n.x+.15*n.displayWidth<r||n.x>a)return;n.isHide()&&!s.isActivated()&&(s.activateTrigger(),o.runMovingObjectByID(s.getTriggerID()),o.activateSuddenObjectByID(s.getTriggerID()))}else if(s instanceof tf){if(n.x>a||n.x<r)return;if(s.isActivated())return;s.activateTrigger(),o.runMovingObjectByID(s.getTriggerID()),o.activateSuddenObjectByID(s.getTriggerID())}}},i.trapObjectTouch=function(e,t){if(t instanceof Vf){var i=t;i.isActive()&&(i.isActivated()||i.activateTrapObject())}},i.collectibleTouch=function(e,t){if(t instanceof M){var i=t;i.isCollected()||i.activateCollectible()}},i.symbolTouch=function(e,t){if(t instanceof Lf){if(t.isActivated())return;t.onPlayerTouch()}if(t instanceof Ee){if(t.isActivated())return;t.onPlayerTouch()}if(t instanceof re){if(t.isActivated())return;t.onPlayerTouch()}},i.scene=t,i}(0,a.Z)(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.scene.physics.pause(),this.scene.physics.world.colliders.destroy()},i.start=function(){this.addOverlaps(),this.scene.physics.resume(),e.prototype.start.call(this)},i.addOverlaps=function(){var e=this.scene,t=e.mousePlayer,i=e.objectManager,n=i.goalList,s=i.collectList,a=i.speedModList,r=i.interactableList,o=i.symbolList,c=i.movementModObjectList,h=i.movingList,u=i.trapObjectList;this.scene.physics.add.overlap(t,n,this.goalTouch),this.scene.physics.add.overlap(t,o,this.symbolTouch),this.scene.physics.add.overlap(t,a,this.speedChange),this.scene.physics.add.overlap(t,s,this.collectibleTouch),this.scene.physics.add.overlap(t,h,this.movingCoverTouch),this.scene.physics.add.overlap(t,r,this.interactableTouch),this.scene.physics.add.overlap(t,c,this.movementModObjectTouch),this.scene.physics.add.overlap(t,u,this.trapObjectTouch)},i.movingCoverTouch=function(e,t){if(e instanceof rm&&t instanceof ne){var i=t;i.isStanding()&&!i.isTriggeredByInteractable()&&i.onTouch()}},i.movementModObjectTouch=function(e,t){if(e instanceof rm){var i=e,n=t,s=n.x+.95*n.displayWidth,a=n.x+n.displayWidth/2*.3;if(n instanceof hp){if(n.isHidden())return;var r=i.actions;if(i.x>=s)return i.setSlippingFriction(0),i.setSlippingSpeed(0),void(i.isSlipping()&&r.walk());if(i.isHide())return;r.slide(n.getSlippingSpeed(),n.getSlippingFriction())}if(n instanceof op){if(n.isHidden())return;if(i.x<=a)return;var o=i.actions;if(i.x>=s)return i.setPushingSpeed(0),void(i.isImpulsive()&&o.walk());var c=n.getPushingSpeed();c>0?o.push(n.getPushingSpeed()):i.setPushingSpeed(c)}if(n instanceof lp){if(n.isHidden()||n.isActivated())return;if(i.isStartled())return;var h="right"===n.getDirection()?n.x+n.displayWidth:n.x-n.displayWidth,u="right"===n.getDirection()?i.x>=h:i.x<=h,l=i.actions;u&&(n.playPushAnimation(),n.activateForcePush(),l.forcePush(n.getForcePushSpeed(),n.getForcePushDuration()))}}},t}(Oe),cm=om,hm=function(e){this.scene=void 0,this.scene=e},um=i(111),lm=i(627),dm=i(473),pm=i(472),fm=i(471),gm=i(145),mm=i(221),vm=GameCore.Configs.Gameplay,ym=function(e){function t(t){var i,s;(s=e.call(this,t)||this).confetti=void 0,s.resultTimer=void 0,s.runConfettiCelebration(),s.scene.stopManager(),s.scene.disablePlayerInput(),s.scene.mousePlayer.actions.congrats(),s.scene.boyWatcher.actions.destroySight(),s.scene.audio.pauseMusic(),s.scene.audio.playSound(ag.Z.LEVEL_COMPLETE),(0,fm.Z)(300);var a=s.scene,r=a.eatCoins,c=a.levelHandler,h=c.level;return null==(i=s.resultTimer)||i.destroy(),s.resultTimer=s.scene.time.delayedCall(vm.DelayLevelCompleted,(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene.updateCoinsToPlayerProfile(),s.scene.updateCoinsCollectedToMissionTask(),e.next=4,s.scene.handleShowAdWhenEndGame();case 4:s.scene.storage.dispatch((0,gm.RM)()),c.isLastLevel(h)?s.scene.screen.open(O.o4.CONGRATULATION_SCREEN):s.scene.isEndlessMode?s.scene.screen.open(O.o4.RESULT_SCREEN,{result:"congratulation",gameMode:"endless"}):s.scene.screen.open(O.o4.RESULT_SCREEN,{level:h,score:r,result:"win",gameMode:"single"}),s.scene.children.bringToTop(s.confetti);case 7:case"end":return e.stop()}}),e)})))),s.scene.levelHandler.nextLevel(),pm.Z.emit(dm.Z.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1}),s.scene.analytics.levelComplete(h,r,"level_"+h,um.oN),s.scene.checkAndAddShortcut(),s.updateBestScoreLevelToProfile(),s}(0,a.Z)(t,e);var i=t.prototype;return i.updateBestScoreLevelToProfile=function(){var e=this.scene,t=e.levelHandler,i=e.isEndlessMode,n=t.level,s=i?Math.floor(this.scene.getEndlessModeDistanceTravelled()):n;i?this.scene.storage.dispatch((0,mm.eG)({endlessScore:s})):this.scene.storage.dispatch((0,mm.eG)({score:s,level:n}))},i.runConfettiCelebration=function(){var e=this.scene.cameraFocus,t=this.scene.gameZone.displayWidth;this.confetti=new lm.Z(this.scene),this.confetti.setDepth(A.Z.ON_TOP),this.confetti.run(e.x-t/2,680,380,680)},i.ready=function(){},i.play=function(){},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){var e;null==(e=this.resultTimer)||e.destroy();var t=new Dm(this.scene);this.scene.stateManager.transitionTo(t)},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){},i.update=function(){},t}(hm),Em=ym,Sm=function(e){function t(t){return e.call(this,t)||this}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){},i.play=function(){},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){var e=new Dm(this.scene);this.scene.stateManager.transitionTo(e)},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){},i.update=function(){},t}(hm),Tm=Sm,bm=GameCore.Configs.Gameplay,Am=function(e){function t(t){var i,s=(i=e.call(this,t)||this).scene,a=s.eatCoins,r=s.levelHandler,c=s.cameraFocus,h=s.isEndlessMode,u=r.level,l=r.currentEndlessLevel;i.scene.stopManager(),i.scene.disablePlayerInput(),i.scene.audio.pauseMusic(),i.scene.audio.playSound(ag.Z.LEVEL_FAIL),h?i.scene.time.delayedCall(200,i.scene.runGameOverNotification):i.scene.time.delayedCall(200,i.scene.runFailNotification),i.scene.mousePlayer.actions.escape(),i.scene.boyWatcher.actions.follow(),i.scene.resultScreen.setX(c.x),i.scene.time.delayedCall(bm.DelayGameOver,(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.scene.updateCoinsToPlayerProfile(),i.scene.updateCoinsCollectedToMissionTask(),e.next=4,i.scene.handleShowAdWhenEndGame();case 4:i.scene.storage.dispatch((0,gm.RM)()),i.scene.hideFailNotification(),i.scene.hideGameOverNotification(),i.scene.isEndlessMode?i.scene.screen.open(O.o4.RESULT_SCREEN,{result:"congratulation",gameMode:"endless"}):i.scene.screen.open(O.o4.RESULT_SCREEN,{level:u,score:a,result:"lose",gameMode:"single"});case 9:case"end":return e.stop()}}),e)}))));var d=i.scene.isEndlessMode?i.scene.getEndlessModeDistanceTravelled():u;return h?i.scene.storage.dispatch((0,mm.eG)({endlessScore:d})):i.scene.storage.dispatch((0,mm.eG)({score:d})),h?i.scene.analytics.levelFail(l,a,"level_"+u,um.UQ):i.scene.analytics.levelFail(u,a,"level_"+u,um.oN),i}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){},i.play=function(){},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){var e=new Dm(this.scene);this.scene.stateManager.transitionTo(e)},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){var e=new Tm(this.scene);this.scene.stateManager.transitionTo(e)},i.update=function(){},t}(hm),Cm=Am,Om=i(222),Im=GameCore.Configs.Gameplay,wm=function(e){function t(t){var i;(i=e.call(this,t)||this).scene.stopManager(),i.scene.disablePlayerInput();var n=i.scene.storage.getState();if((0,Om.t1)(n)<Im.MaxRescueCount){var a=i.scene.cameraFocus.x;i.scene.rescueScreen.setX(a),i.scene.screen.open(O.o4.RESCUE_SCREEN);var r=i.scene,o=r.eatCoins,c=r.levelHandler,h=r.isEndlessMode,u=c.level,l=c.currentEndlessLevel;return h?i.scene.analytics.levelRescue(l,o,"level_"+u,um.UQ):i.scene.analytics.levelRescue(u,o,"level_"+u,um.oN),(0,s.Z)(i)}return i.scene.gameOver(),i}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){},i.play=function(){var e=new km(this.scene);this.scene.stateManager.transitionTo(e)},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){},i.rescue=function(){},i.gameOver=function(){var e=new Cm(this.scene);this.scene.stateManager.transitionTo(e)},i.quit=function(){},i.update=function(){},t}(hm),Pm=GameCore.Configs.Gameplay,_m=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene.disablePlayerInput(),i.scene.boyWatcher.actions.detect(),i.scene.boyWatcher.actions.destroySight(),i.scene.mousePlayer.actions.startle(),(0,fm.Z)(300),i.scene.time.delayedCall(Pm.DelayLevelFailed,i.scene.die),i}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){},i.play=function(){},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){},i.rescue=function(){var e=new wm(this.scene);this.scene.stateManager.transitionTo(e)},i.gameOver=function(){var e=new Cm(this.scene);this.scene.stateManager.transitionTo(e)},i.quit=function(){},i.update=function(){},t}(hm),Rm=function(e){function t(t){var i;(i=e.call(this,t)||this).scene.disablePlayerInput(),i.scene.mousePlayer.actions.hide();var n=i.scene.game.globalScene,a=n.screen.get(O.o4.TUTORIAL_SCREEN);return null!=a&&a.visible?(0,s.Z)(i):(n.screen.open(O.o4.PAUSE_SCREEN),i)}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){},i.play=function(){var e=new km(this.scene);this.scene.stateManager.transitionTo(e)},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){var e=new Dm(this.scene);this.scene.stateManager.transitionTo(e)},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){var e=new Tm(this.scene);this.scene.stateManager.transitionTo(e)},i.update=function(){this.scene.updateWatcher()},t}(hm),km=function(e){function t(t){var i;return(i=e.call(this,t)||this).endlessDistanceTier=void 0,i.scene.startManager(),i.scene.enablePlayerInput(),i.endlessDistanceTier=0,i}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new xm(this.scene);this.scene.stateManager.transitionTo(e)}},i.play=function(){},i.pause=function(){var e=new Rm(this.scene);this.scene.stateManager.transitionTo(e)},i.levelComplete=function(){var e=new Em(this.scene);this.scene.stateManager.transitionTo(e)},i.levelFail=function(){var e=new _m(this.scene);this.scene.stateManager.transitionTo(e)},i.levelLoading=function(){},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){},i.update=function(){this.scene.updateCamera(),this.scene.updateText(),this.scene.updateScreen(),this.scene.updateInputZone(),this.scene.updateMapGraphics(),this.scene.updatePlayerInfoToObjects(),this.scene.updatePlayer(),this.scene.updateWatcher(),this.scene.updateObjectHandler(),this.scene.gameUIScreen.updateLevelProgress(),this.scene.gameUIScreen.setEndlessDistanceTravelled(),this.endlessAnalyticsLog(),this.scene.gameOverCheck()},i.endlessAnalyticsLog=function(){var e=this.scene,t=e.isEndlessMode,i=e.levelHandler;if(t){var n=GameCore.Configs.Gameplay.EndlessDistanceLog,s=i.currentEndlessLevel;if(this.endlessDistanceTier!=n.length-1){var a=n[this.endlessDistanceTier];if(this.scene.getEndlessModeDistanceTravelled()>=a){if(this.scene.analytics.levelComplete(this.endlessDistanceTier+1,0,"level_"+s,um.UQ),this.endlessDistanceTier++,this.endlessDistanceTier>=n.length)return;this.scene.analytics.levelStart(this.endlessDistanceTier+1,0,"level_"+s,um.UQ)}}}},t}(hm),xm=function(e){function t(t){var i;(i=e.call(this,t)||this).checkForBigAssets=function(){var e=i.scene,t=e.levelHandler,n=e.bigAssetHandler,s=t.level+1;n.checkForBigAssets(!1,s)},i.scene.eatCoins=0,i.scene.coinsPostedToCollectMission=0,i.scene.startPoint={x:0,y:0},i.scene.initManager(),i.scene.initObjectHandler(),i.scene.gameUIScreen.updateUI(),i.scene.gameUIScreen.setLevelDistance(),i.scene.disablePlayerInput(),i.scene.initPlayer(),i.scene.initWatcher(),i.scene.initCamera(),i.scene.audio.playSound(ag.Z.START_GAME);var n=i.scene.levelHandler,s=n.level,a=n.currentEndlessLevel;return i.scene.isEndlessMode?i.scene.analytics.levelStart(1,0,"level_"+a,um.UQ):(i.scene.gameUIScreen.setLevel(s),i.scene.analytics.levelStart(s,0,"level_"+s,um.oN)),i.preloadRewardAd(),i.preloadNextLevel(),i}(0,a.Z)(t,e);var i=t.prototype;return i.preloadRewardAd=function(){this.scene.ads.preloadRewardedVideoAsync().catch((function(e){}))},i.preloadNextLevel=function(){if(!this.scene.isEndlessMode){var e=this.scene.levelHandler,t=e.level+1,i=e.getConfigByLevel(t);if(i){var n=i.key,s=i.mapJson;"level-from-json"!==n&&(this.scene.cache.tilemap.exists(n)||(this.scene.load.tilemapTiledJSON(n,s),this.scene.load.start(),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.checkForBigAssets)))}}},i.ready=function(){},i.play=function(){var e=new km(this.scene);this.scene.stateManager.transitionTo(e)},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){var e=new Tm(this.scene);this.scene.stateManager.transitionTo(e)},i.update=function(){this.scene.updateCamera(),this.scene.updateText(),this.scene.updateScreen(),this.scene.updateInputZone(),this.scene.updateMapGraphics(),this.scene.updatePlayer(),this.scene.updateWatcher(),this.scene.updateObjectHandler(),this.scene.gameUIScreen.updateLevelProgress(),this.scene.gameUIScreen.setEndlessDistanceTravelled()},t}(hm),Lm=GameCore.Configs.Gameplay.EndlessMaxLevel,Dm=function(e){function t(t){var i;(i=e.call(this,t)||this).endlessLevel=void 0,i.checkForBigAssetsBeforeStart=function(){var e=i.scene,t=e.bigAssetHandler;e.isEndlessMode?t.checkForBigAssets(!0,i.endlessLevel):t.checkForBigAssets(!0)};var n,a=i.scene,r=a.isEndlessMode,o=a.levelHandler,c=a.gameUIScreen;a.audio.playMusic(),i.scene.screen.open(O.o4.READY_SCREEN),r?(i.endlessLevel=Math.floor(Math.random()*(Lm-1))+1,n=o.getEndlessLevelConfig(i.endlessLevel)):(i.endlessLevel=0,n=o.getConfig());var h=n,u=h.key,l=h.mapJson;if(c.setCurrentEndlessMap(u),i.scene.cache.tilemap.exists(u)){var d=i.scene,p=d.bigAssetHandler;return d.firstLevelLoadingCheck&&!r?(p.checkForBigAssets(!0),i.scene.firstLevelLoadingCheck=!1,(0,s.Z)(i)):(i.scene.time.delayedCall(100,i.scene.startGame),(0,s.Z)(i))}return i.scene.load.once(Phaser.Loader.Events.COMPLETE,i.checkForBigAssetsBeforeStart),i.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){(0,en.R0)(new En.Z("Load current map json fail"),{file:null==e?void 0:e.url})})),i.scene.load.tilemapTiledJSON(u,l),i.scene.load.start(),i}(0,a.Z)(t,e);var i=t.prototype;return i.ready=function(){var e=new xm(this.scene);this.scene.stateManager.transitionTo(e)},i.play=function(){},i.pause=function(){},i.levelComplete=function(){},i.levelFail=function(){},i.levelLoading=function(){},i.rescue=function(){},i.gameOver=function(){},i.quit=function(){},i.update=function(){this.scene.updateCamera(),this.scene.updateMapGraphics(),this.scene.updateScreen()},t}(hm),Bm=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.gameState=void 0,i.firstLevelLoadingCheck=void 0,i.scene=t,i.firstLevelLoadingCheck=!0,i}(0,a.Z)(t,e);var i=t.prototype;return i.transitionTo=function(e){this.gameState=e},i.init=function(){if(!this.gameState){var e=new Dm(this.scene);this.transitionTo(e)}this.gameState.levelLoading()},i.isPlayingState=function(){return this.gameState instanceof km},i.isRescuingState=function(){return this.gameState instanceof wm},i.ready=function(){this.gameState.ready()},i.play=function(){this.gameState.play()},i.pause=function(){this.gameState.pause()},i.levelComplete=function(){this.gameState.levelComplete()},i.levelFail=function(){this.scene.mapToolManager.isPlayerImmortal||this.gameState.levelFail()},i.nextLevel=function(){this.gameState.levelLoading()},i.rescue=function(){this.gameState.rescue()},i.gameOver=function(){this.gameState.gameOver()},i.quit=function(){this.gameState.quit()},i.update=function(){this.gameState.update()},t}(Oe),Nm=be.STATUS,Mm=GameCore.Configs.Tutorial,Zm=function(e){function t(t){var i;return(i=e.call(this,t)||this).scene=void 0,i.isShowed=void 0,i.scene=t,i.isShowed=!1,i}(0,a.Z)(t,e);var i=t.prototype;return i.init=function(){this.setState(Nm.READY)},i.start=function(){this.isRunning()||(this.isValidForTutorial()||Mm.ForceUseTutorial)&&(this.setState(Nm.RUNNING),1!=this.scene.levelHandler.level||this.isShowed||(this.isShowed=!0,this.scene.game.globalScene.screen.open(O.o4.TUTORIAL_SCREEN),this.scene.player.setAsNewUser(!1)))},i.isValidForTutorial=function(){return this.scene.game.player.getPlayer().isUserNew},t}(Oe),Gm=i(476),Fm=i(218),Um=i(229),Hm=i(228),jm=i(78),Ym=i(629),Km=g.Z.EFFECTS,Wm=Km.KEY,Vm=Km.FRAME,zm=function(e){function t(t,i){var n;return(n=e.call(this,t,0,0,Wm,Vm.FX_SPARK)||this).onUpdate=void 0,n.onComplete=void 0,n.positions=void 0,n.flyAnimation=void 0,n.setWorldSize(27,27),n.positions=i,n.setVisible(!1),n.setDepth(A.Z.PRIORITY),n.createAnimation(),n.scene.add.existing((0,s.Z)(n)),n}(0,a.Z)(t,e);var i=t.prototype;return i.createAnimation=function(){var e=this,t=this.positions,i=t.from,n=t.to;this.flyAnimation=this.scene.add.tween({targets:this,duration:2e3,paused:!0,props:{alpha:{duration:1e3,ease:Phaser.Math.Easing.Linear,value:{from:0,to:1}},x:{getStart:function(){return i.x},getEnd:function(){return n.x}},y:{ease:Phaser.Math.Easing.Expo.In,value:{getStart:function(){return i.y},getEnd:function(){return n.y}}}},onStart:function(){e.setVisible(!0)},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},i.run=function(){this.flyAnimation.play()},t}(Phaser.GameObjects.Image),Xm=i(146),Jm=g.Z.DEFAULT,qm=Jm.KEY,Qm=Jm.FRAME,$m=g.Z.EFFECTS,ev=$m.KEY,tv=$m.FRAME,iv=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,i,n,a)||this).scene=void 0,r.titleContainer=void 0,r.mouseIconContainer=void 0,r.buttonsContainer=void 0,r.restartButton=void 0,r.confetti=void 0,r.timerConfetti=void 0,r.aura=void 0,r.starGroup=void 0,r.starFx=void 0,r.open=function(){e.prototype.open.call((0,s.Z)(r)),r.runConfetti(),r.runAnimation()},r.handleShareResult=function(){r.scene.storage.dispatch((0,Xm.w3)())},r.handleRestartGame=function(){r.stopConfetti(),r.scene.screen.close(r.name),r.scene.nextLevel()},r.runConfetti=function(){var e=Phaser.Math.Between(-r.displayWidth/2+50,r.displayWidth/2-50),t=Phaser.Math.Between(-200,0),i=Phaser.Math.Between(10,500),n=new zm(r.scene,{from:{x:e,y:t+400},to:{x:e,y:t}});n.onComplete=function(){r.confetti.explode(i,e,t,1e3)},r.add(n),n.run(),r.timerConfetti=r.scene.time.delayedCall(1e3,r.runConfetti)},r.scene=t,r.setDepth(O.Ks.POPUP),r.createMouseIcon(),r.createTitle(),r.createButtons(),r.createConfetti(),r.background.setAlpha(.8),r}(0,a.Z)(t,e);var i=t.prototype;return i.createTitle=function(){this.titleContainer=this.scene.add.container(),this.add(this.titleContainer),Phaser.Display.Align.In.Center(this.titleContainer,this.zone,0,-100);var e=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_RIBBON});e.setWorldSize(262,79),Phaser.Display.Align.In.Center(e,this.titleContainer);var t=24;if("ru"===this.scene.lang.getCurrentLanguage())t=30;var i=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.CONGRATULATION+"!",origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(i,e,0,-13);var n=this.scene.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.COMPLETED_ALL_LEVELS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(n,e,0,50),this.titleContainer.add([e,i,n])},i.createMouseIcon=function(){this.mouseIconContainer=this.scene.add.container(),this.add(this.mouseIconContainer),Phaser.Display.Align.In.Center(this.mouseIconContainer,this.zone,0,10),this.starGroup=[];var e=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_MOUSE});e.setWorldSize(272,290),Phaser.Display.Align.In.Center(e,this.mouseIconContainer,0,0),this.aura=this.scene.make.image({key:ev,frame:tv.AURA}),this.aura.setWorldSize(368,332),Phaser.Display.Align.In.Center(this.aura,e,0,-40);var t=this.scene.make.image({key:ev,frame:tv.GLOW});t.setWorldSize(334,284),Phaser.Display.Align.In.Center(t,e,0,-80),this.starFx=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_STAR_FX}),this.starFx.setWorldSize(236,108),Phaser.Display.Align.In.Center(this.starFx,e,0,-80);var i=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_STAR});i.setWorldSize(38,38),i.setFlipX(!0),Phaser.Display.Align.In.Center(i,this.starFx,-110,-12),this.starGroup.push(i);var n=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_STAR});n.setWorldSize(38,38),Phaser.Display.Align.In.Center(n,this.starFx,90,15),this.starGroup.push(n);var s=this.scene.make.image({key:qm,frame:Qm.CONGRATULATION_STAR});s.setWorldSize(29,29),Phaser.Display.Align.In.Center(s,this.starFx,80,-44),this.starGroup.push(s),this.mouseIconContainer.add([this.aura,t,this.starFx,i,n,s,e])},i.createButtons=function(){this.buttonsContainer=this.scene.add.container(),this.add(this.buttonsContainer),Phaser.Display.Align.In.Center(this.buttonsContainer,this.zone,0,85),this.createRestartButton()},i.createShareButton=function(){},i.createRestartButton=function(){this.restartButton=new jm.Z(this.scene,qm,Qm.BUTTON_GREEN_LONG,136.5,40),this.restartButton.setName("Restart");var e=this.scene.make.image({key:qm,frame:Qm.ICON_RESUME});e.setX(-48),e.setWorldSize(28,27);var t=22;if("ru"===this.scene.lang.getCurrentLanguage())t=15;var i=this.scene.make.bitmapText({font:C.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.RESTART,alpha:.8});Phaser.Display.Align.In.Center(i,this.restartButton,15,1),this.restartButton.add([e,i]),this.restartButton.setPosition(55,75),this.restartButton.onClick=this.handleRestartGame,Phaser.Display.Align.In.Center(this.restartButton,this.buttonsContainer),this.buttonsContainer.add(this.restartButton)},i.stopConfetti=function(){this.timerConfetti.remove()},i.createConfetti=function(){this.confetti||(this.confetti=new Ym.Z(this.scene),this.add(this.confetti))},i.runAnimation=function(){this.scene.add.tween({targets:[this.aura],duration:1e4,props:{angle:360},repeat:-1}),this.scene.add.tween({targets:this.starGroup,duration:1e3,props:{angle:10},yoyo:!0,repeat:-1});var e=this.starFx.scale;this.scene.add.tween({targets:this.starFx,duration:1e3,props:{scaleX:e-.01},yoyo:!0,repeat:-1}),new Hm.Z({targets:[this.restartButton],duration:1e3,props:{scale:"-=0.05"}}).play()},t}(GameCore.Screen),nv=function(e){function t(t,i){var n;return(n=e.call(this,t,0,0,J.Z.COIN_FASTER_X10.KEY)||this).onStart=void 0,n.onUpdate=void 0,n.onComplete=void 0,n.positions=void 0,n.animation=void 0,n.standAnimation=void 0,n.finalAnimation=void 0,n.play(J.Z.COIN_FASTER_X10.KEY),n.setWorldSize(27,27.5),n.positions=i,n.setDepth(A.Z.COIN_EATED),n.createAnimation(),n.scene.add.existing((0,s.Z)(n)),n}(0,a.Z)(t,e);var i=t.prototype;return i.createAnimation=function(){var e=this,t=this.positions,i=t.from,n=t.to,s=t.final;this.animation=this.scene.add.tween({targets:this,duration:200,paused:!0,ease:Phaser.Math.Easing.Expo.Out,props:{x:{getStart:function(){return i.x}},y:{value:{getStart:function(){return i.y},getEnd:function(){return n.y}}}},onStart:function(){e.scene.audio.playSound(ag.Z.COIN_COLLECT,{volume:.3}),"function"===typeof e.onStart&&e.onStart()},onComplete:function(){e.standAnimation.play()}}),this.standAnimation=this.scene.add.tween({targets:this,duration:300,paused:!0,onComplete:function(){e.stopOnFrame(e.anims.currentAnim.frames[0]),e.finalAnimation.play()}}),this.finalAnimation=this.scene.add.tween({targets:this,duration:600,paused:!0,props:{x:{ease:Phaser.Math.Easing.Cubic.InOut,getEnd:function(){return s.x}},y:{value:{ease:Phaser.Math.Easing.Cubic.InOut,getEnd:function(){return s.y}}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.setVisible(!1),e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},i.run=function(){this.animation.play()},i.updateToPropertyPosition=function(e,t){this.finalAnimation.updateTo("x",e),this.finalAnimation.updateTo("y",t)},t}(Phaser.GameObjects.Sprite),sv=i(147),av=g.Z.GAMEPLAY,rv=av.KEY,ov=av.FRAME,cv=function(e){function t(t){var i;return(i=e.call(this,t,{key:rv,frame:ov.ICON_PAUSE,width:35,height:37,paddingZone:20})||this).setName("Pause"),i}return(0,a.Z)(t,e),t}(sv.Z),hv=i(474),uv=g.Z.GAMEPLAY,lv=uv.KEY,dv=uv.FRAME,pv=function(e){function t(t){var i;return(i=e.call(this,t,lv,{background:dv.TOP_BG_LONG,icon:dv.ICON_COIN})||this).coins=void 0,i.setName("CoinBar"),i.bar.setWorldSize(93,27.5),i.icon.setWorldSize(28,28),i.value.setTint(9463836),i.coins=0,i.alignObject(),Phaser.Display.Align.In.Center(i.value,i.bar,2,0),i}(0,a.Z)(t,e);var i=t.prototype;return i.setValue=function(t){e.prototype.setValue.call(this,t),this.coins=t},i.getValue=function(){return this.coins},i.increaseValueBy=function(e){this.coins+=e,this.setValue(this.coins)},t}(hv.Z),fv=g.Z.GAMEPLAY,gv=fv.KEY,mv=fv.FRAME,vv=GameCore.Configs.Gameplay.NormalMaxLevel,yv=function(e){function t(t){var i;return(i=e.call(this,t)||this).levelDistance=void 0,i.currentPlayerToGoalDistance=void 0,i.baseMouseHeadIconPosition=void 0,i.levelProgressBoxLeft=void 0,i.levelProgressBoxMid=void 0,i.levelProgressBoxRight=void 0,i.levelProgressBarLeft=void 0,i.levelProgressBarMid=void 0,i.levelProgressBarRight=void 0,i.leftLevelText=void 0,i.rightLevelText=void 0,i.cheeseIcon=void 0,i.mouseHeadIcon=void 0,i.setSize(140,13.5),i.createProgressBox(),i.createProgressBar(),i.createMouseHeadIcon(),i.createLevelText(),i.createContainer(),i}(0,a.Z)(t,e);var i=t.prototype;return i.setLevelDistance=function(e){this.levelDistance=e,this.currentPlayerToGoalDistance=e},i.setLevel=function(e){this.leftLevelText.setText(e.toString()),e===vv?(this.cheeseIcon.setVisible(!0),this.rightLevelText.setVisible(!1)):(this.cheeseIcon.setVisible(!1),this.rightLevelText.setVisible(!0),this.rightLevelText.setText((e+1).toString()))},i.setPlayerToGoalDistance=function(e){this.currentPlayerToGoalDistance=e},i.updateLevelProgress=function(){var e=(this.levelDistance-this.currentPlayerToGoalDistance)/this.levelDistance*123;this.mouseHeadIcon.setX(this.baseMouseHeadIconPosition+e)},i.createProgressBox=function(){this.levelProgressBoxLeft=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BG_LEFT}),this.levelProgressBoxLeft.setOrigin(0,.5),this.levelProgressBoxLeft.setWorldSize(6.5,13.5),this.levelProgressBoxRight=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BG_RIGHT}),this.levelProgressBoxRight.setOrigin(0,.5),this.levelProgressBoxRight.setWorldSize(6.5,13.5),this.levelProgressBoxMid=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BG_MID}),this.levelProgressBoxMid.setOrigin(0,.5),this.levelProgressBoxMid.setWorldSize(127,13.5),Phaser.Display.Align.In.Center(this.levelProgressBoxMid,this,0,0),Phaser.Display.Align.In.LeftCenter(this.levelProgressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.levelProgressBoxRight,this,0,0)},i.createProgressBar=function(){this.levelProgressBarLeft=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BAR_LEFT}),this.levelProgressBarLeft.setOrigin(0,.5),this.levelProgressBarLeft.setWorldSize(4.5,9.5),this.levelProgressBarRight=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BAR_RIGHT}),this.levelProgressBarRight.setOrigin(0,.5),this.levelProgressBarRight.setWorldSize(4.5,9.5),this.levelProgressBarMid=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_BAR_MID}),this.levelProgressBarMid.setOrigin(0,.5),this.levelProgressBarMid.setWorldSize(128,9.5);Phaser.Display.Align.In.LeftCenter(this.levelProgressBarMid,this,-6),Phaser.Display.Align.In.LeftCenter(this.levelProgressBarLeft,this,-2),Phaser.Display.Align.In.RightCenter(this.levelProgressBarRight,this,-2)},i.createLevelText=function(){this.leftLevelText=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(40),text:"",origin:{x:.5,y:.5}}),this.rightLevelText=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(40),text:"",origin:{x:.5,y:.5}}),this.cheeseIcon=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_CHEESE_ICON}),this.cheeseIcon.setOrigin(0,.5),this.cheeseIcon.setWorldSize(30,26.5),this.cheeseIcon.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftLevelText,this,30,0),Phaser.Display.Align.In.RightCenter(this.rightLevelText,this,30,0),Phaser.Display.Align.In.RightCenter(this.cheeseIcon,this,37,0)},i.createMouseHeadIcon=function(){this.mouseHeadIcon=this.scene.make.image({key:gv,frame:mv.LEVEL_PROGRESS_MOUSE_HEAD}),this.mouseHeadIcon.setOrigin(0,.5),this.mouseHeadIcon.setWorldSize(30.5,25.5),Phaser.Display.Align.In.LeftCenter(this.mouseHeadIcon,this,7,-4),this.baseMouseHeadIconPosition=this.mouseHeadIcon.x},i.createContainer=function(){this.add([this.levelProgressBoxMid,this.levelProgressBoxLeft,this.levelProgressBoxRight,this.levelProgressBarMid,this.levelProgressBarLeft,this.levelProgressBarRight,this.mouseHeadIcon,this.leftLevelText,this.rightLevelText,this.cheeseIcon]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),Ev=function(e){function t(t){var i;return(i=e.call(this,t)||this).coinBar=void 0,i.pauseButton=void 0,i.levelProgressBar=void 0,i.endlessDistanceText=void 0,i.endlessMapDebugText=void 0,i.setSize(375,50),i.createCoinBar(),i.createPauseIcon(),i.createLevelProgress(),i.createEndlessDistanceText(),i.createEndlessMapDebugText(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.createPauseIcon=function(){this.pauseButton=new cv(this.scene),this.add(this.pauseButton),this.pauseButton.useSound=!1,this.pauseButton.setPosition(-140,5)},i.createCoinBar=function(){this.coinBar=new pv(this.scene),this.add(this.coinBar),Phaser.Display.Align.In.RightCenter(this.coinBar,this,-25)},i.createLevelProgress=function(){this.levelProgressBar=new yv(this.scene),this.add(this.levelProgressBar),Phaser.Display.Align.In.Center(this.levelProgressBar,this,0,50)},i.createEndlessDistanceText=function(){this.endlessDistanceText=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(45),text:"",origin:{x:.5,y:.5}}),this.add(this.endlessDistanceText),Phaser.Display.Align.In.Center(this.endlessDistanceText,this,0,50)},i.createEndlessMapDebugText=function(){GameCore.Utils.Valid.isDebugger()&&(this.endlessMapDebugText=this.scene.add.text(0,0,"",{fontFamily:C.Z.FONT_FAMILY,fontSize:"12px",color:"#00ff",align:"left"}),this.endlessMapDebugText.setHighQuality(),this.endlessMapDebugText.setOrigin(0,0),this.add(this.endlessMapDebugText),Phaser.Display.Align.In.LeftCenter(this.endlessMapDebugText,this,-10,75))},i.hideProgressBar=function(){this.levelProgressBar.kill()},i.showProgressBar=function(){this.levelProgressBar.revive()},i.hideEndlessModeText=function(){var e,t;null==(e=this.endlessDistanceText)||e.kill(),null==(t=this.endlessMapDebugText)||t.kill()},i.showEndlessModeText=function(){var e,t;null==(e=this.endlessDistanceText)||e.revive(),null==(t=this.endlessMapDebugText)||t.revive()},t}(Phaser.GameObjects.Container),Sv=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).scene=void 0,a.header=void 0,a.currentCoin=void 0,a.eatCoins=function(e){1==e?a.createCoinsEffect(1,e):a.createCoinsEffect(5,e);var t=a.currentCoin+Math.floor(e);a.setCoins(t)},a.handlePauseGame=function(){a.scene.objectManager.onGameScenePause(),a.scene.stateManager.pause()},a.scene=t,a.createContent(),a.currentCoin=0,a.setDepth(O.Ks.UI_SCREEN),a.background.kill(),a.updateUI(),a}(0,a.Z)(t,e);var i=t.prototype;return i.updateUI=function(){this.updateCurrentCoins(),this.scene.isEndlessMode?(this.header.hideProgressBar(),this.header.showEndlessModeText()):(this.header.showProgressBar(),this.header.hideEndlessModeText())},i.getCurrentCoins=function(){return this.currentCoin},i.setCurrentCoinsAndUpdateCoinBar=function(e){this.setCoins(e),this.updateCoinBarValue(e)},i.setCurrentEndlessMap=function(e){var t;null==(t=this.header.endlessMapDebugText)||t.setText("Current map: "+e)},i.createContent=function(){this.createHeaderBar()},i.createHeaderBar=function(){this.header=new Ev(this.scene),this.add(this.header),this.header.setDepth(A.Z.BUTTON),this.header.pauseButton.onClick=this.handlePauseGame,Phaser.Display.Align.In.TopCenter(this.header,this.zone)},i.createCoinsEffect=function(e,t){var i=this,n=this.header.coinBar.getWorldPosition(),s=n.x,a=n.y,r=this.scene.mousePlayer.getCenter(),o=r.x,c=r.y;this.scene.tweens.addCounter({duration:0,repeat:e,repeatDelay:60,onRepeat:function(){var n=new nv(i.scene,{from:{x:o,y:c},to:{x:o,y:c-100},final:{x:s-45,y:a+7}});n.onUpdate=function(){var e=i.header.coinBar.getWorldPosition(),t=e.x,s=e.y;n.updateToPropertyPosition(t-40,s+7)},n.onComplete=function(){var n=Math.floor(t/e);i.updateCoinBarValueIncreaseBy(n)},n.run()}})},i.updateCurrentCoins=function(){var e=this.scene.player.getCoins();this.setCoins(e),this.updateCoinBarValue(this.currentCoin)},i.updateLevelProgress=function(){if(!this.scene.isEndlessMode){var e=this.scene.getPlayerToGoalDistance();this.header.levelProgressBar.setPlayerToGoalDistance(e),this.header.levelProgressBar.updateLevelProgress()}},i.setLevelDistance=function(){var e=this.scene.getLevelDistance();this.scene.isEndlessMode||this.header.levelProgressBar.setLevelDistance(e)},i.setLevel=function(e){this.scene.isEndlessMode||this.header.levelProgressBar.setLevel(e)},i.setEndlessDistanceTravelled=function(){if(this.scene.isEndlessMode){var e=this.scene.getEndlessModeDistanceTravelled();this.header.endlessDistanceText.setText(e+" m")}},i.setCoins=function(e){var t=e<0?0:e;this.currentCoin=t},i.updateCoinBarValue=function(e){this.header.coinBar.setValue(e)},i.updateCoinBarValueIncreaseBy=function(e){this.header.coinBar.increaseValueBy(e)},i.logPageviewOnOpen=function(){},i.logPageviewOnClose=function(){},t}(GameCore.Screen),Tv=i(143),bv=i(475),Av=g.Z.DEFAULT,Cv=Av.KEY,Ov=Av.FRAME,Iv=GameCore.Configs.Gameplay,wv=function(e){function t(t,i,n,a){var r;return(r=e.call(this,t,i,n,a)||this).scene=void 0,r.mouseIcon=void 0,r.loadingText=void 0,r.footer=void 0,r.backButton=void 0,r.playButton=void 0,r.abovePlayText=void 0,r.playButtonAnimation=void 0,r.open=function(){e.prototype.open.call((0,s.Z)(r)),r.updateCurrentLevelPlaying(),r.background.setAlpha(.8),r.mouseIcon.setVisible(!0),r.loadingText.setVisible(!0),r.hideFooterButtons()},r.handleBackClick=function(){r.scene.screen.close(r.name),r.scene.scene.switch(Tv.C.DASHBOARD_SCENE)},r.handleInviteIconClick=function(){r.scene.storage.dispatch((0,bv.y)())},r.handleStartGame=function(){r.scene.screen.close(r.name),r.scene.startLevel(),r.setPauseButtonVisible(!0)},r.showFooterButtons=function(){r.scene.add.tween({targets:[r.footer],onStart:function(){r.loadingText.setVisible(!1),r.mouseIcon.setVisible(!1),r.showFooter()},props:{y:{duration:500,ease:Phaser.Math.Easing.Quintic.Out,getStart:function(){return r.footer.y+200},getEnd:function(){return r.footer.y}}}}),r.scene.add.tween({targets:[r.playButton,r.abovePlayText],onStart:function(){r.playButton.setAlpha(0),r.abovePlayText.setAlpha(0)},props:{alpha:{delay:250,duration:300,from:0,to:1},y:{delay:250,duration:350,ease:Phaser.Math.Easing.Quintic.Out,getStart:function(e){return e.y+200},getEnd:function(e){return e.y}}}})},r.runPlayButtonAnimation=function(){r.playButtonAnimation||(r.playButtonAnimation=new Hm.Z({targets:[r.playButton],duration:500,props:{scale:"-=0.03"}})),r.playButtonAnimation.play()},r.scene=t,r.background.setAlpha(.8),r.setDepth(O.Ks.POPUP),r.createMouseIcon(),r.createLoadingText(),r.createFooter(),r.runPlayButtonAnimation(),r}(0,a.Z)(t,e);var i=t.prototype;return i.showContent=function(e){e.startImmediately?this.scene.time.delayedCall(800,this.handleStartGame):(this.showFooterButtons(),this.hideBackgroundAnimation(),this.setPauseButtonVisible(!1))},i.createMouseIcon=function(){var e=this.scene.make.image({key:Cv,frame:Ov.LOADING_MOUSE});this.add(e),e.setWorldSize(78,90.5),this.scene.tweens.add({targets:e,alpha:.5,duration:700,ease:function(e){return Math.pow(Math.sin(3*e),2)},yoyo:!0,repeat:-1}),Phaser.Display.Align.In.Center(e,this.zone,0,-100),this.mouseIcon=e},i.createLoadingText=function(){this.loadingText=this.scene.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.LOADING,origin:{x:.5,y:.5}}),this.loadingText.setTint(16637302),this.add(this.loadingText),Phaser.Display.Align.In.Center(this.loadingText,this.zone,0,-20)},i.createFooter=function(){this.footer=this.scene.make.container({}),this.createBackButton(),this.createPlayButton(),this.createAbovePlayText(),this.setFooterOriginPosition(),this.add(this.footer)},i.createBackButton=function(){this.backButton=new jm.Z(this.scene,Cv,Ov.BUTTON_BLUE_BACK,75.5,44),this.backButton.setName("Back");var e=this.scene.make.image({key:Cv,frame:Ov.LOADING_BACK_ICON});e.setY(-6),e.setWorldSize(31.5,23.5);var t=this.scene.make.bitmapText({font:C.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(15),text:this.scene.lang.Text.BACK,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,this.backButton,0,14),this.backButton.add([e,t]),this.backButton.onClick=this.handleBackClick,Phaser.Display.Align.In.LeftCenter(this.backButton,this.zone,10),this.backButton.setY(this.footer.y),this.footer.add(this.backButton)},i.createInviteButton=function(){},i.createPlayButton=function(){this.playButton=new jm.Z(this.scene,Cv,Ov.BUTTON_GREEN_DASHBOARD,127,57),this.playButton.setAlpha(0),this.playButton.setName("Play");var e=this.scene.make.image({key:Cv,frame:Ov.ICON_FLAT_NEXT});e.setX(-28),e.setWorldSize(22.5,28);var t=40;if("ru"===this.scene.lang.getCurrentLanguage())t=30;var i=this.scene.make.bitmapText({font:C.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.GO,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(i,this.playButton,20,1),this.playButton.add([e,i]),this.playButton.onClick=this.handleStartGame,Phaser.Display.Align.In.BottomCenter(this.playButton,this,0,-50),this.add(this.playButton)},i.createAbovePlayText=function(){this.abovePlayText=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(22),text:"",origin:{x:.5,y:.5}}),this.abovePlayText.setAlpha(0),Phaser.Display.Align.In.Center(this.abovePlayText,this.playButton,0,-40),this.add(this.abovePlayText)},i.updateCurrentLevelPlaying=function(){var e=this.scene.player.getCustomData("level")||Iv.DefaultLevel;this.abovePlayText.setText(this.scene.lang.Text.LEVEL+" "+e),this.scene instanceof dE&&this.scene.isEndlessMode&&this.abovePlayText.setText("Endless"),Phaser.Display.Align.In.Center(this.abovePlayText,this.playButton,0,-40)},i.setFooterOriginPosition=function(){Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-80)},i.hideFooterButtons=function(){this.footer.setVisible(!1),this.playButton.setAlpha(0),this.abovePlayText.setAlpha(0)},i.showFooter=function(){this.footer.setVisible(!0)},i.logPageviewOnOpen=function(){},i.logPageviewOnClose=function(){},i.setPauseButtonVisible=function(e){this.scene.gameUIScreen.header.pauseButton.setVisible(e)},i.hideBackgroundAnimation=function(){var e=this;this.scene.add.tween({targets:this.background,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Expo.In,getStart:function(){return e.background.alpha},getEnd:function(){return 0}}}})},t}(GameCore.Screen),Pv=i(112),_v=g.Z.DEFAULT,Rv=_v.KEY,kv=_v.FRAME,xv=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).headerText=void 0,a.contentLeftText=void 0,a.iconContentText=void 0,a.contentRightText=void 0,a.openAnimation=void 0,a.closeTimerEvent=void 0,a.addHeaderText(),a.addLeftContentText(),a.addIconContentText(),a.addContentRightText(),a.setDepth(O.Ks.PRIORITY),a.background.setAlpha(.8),a}(0,a.Z)(t,e);var i=t.prototype;return i.open=function(t){var i,n=this;e.prototype.open.call(this,t);var s=this.getData(["headerText","contentLeftText","contentRightText","duration","loading"]),a=s[0],r=void 0===a?"":a,o=s[1],c=void 0===o?"":o,h=s[2],u=void 0===h?"":h,l=s[3],d=void 0===l?0:l;this.setMessage(r,c,u),null==(i=this.closeTimerEvent)||i.remove(),d>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:d,callback:function(){n.visible&&n.scene.screen.close(n.name)}})),this.background.setInteractive(),this.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){n.visible&&n.scene.screen.close(n.name)})),this.runOpenAnimation()},i.addHeaderText=function(){this.headerText=this.scene.add.text(0,0,"",{fontFamily:C.Z.FONT_FAMILY,fontSize:"20px",color:"#ffffff",stroke:"#503621",strokeThickness:3}),this.headerText.setHighQuality(),this.headerText.setOrigin(.5,.5),Phaser.Display.Align.In.Center(this.headerText,this.zone,0,-20),this.add(this.headerText)},i.addLeftContentText=function(){this.contentLeftText=this.scene.add.text(0,0,"",{fontFamily:C.Z.FONT_FAMILY,fontSize:"20px",color:"#cd7f32",stroke:"#503621",strokeThickness:3}),this.contentLeftText.setHighQuality(),this.contentLeftText.setOrigin(.5,.5),Phaser.Display.Align.In.Center(this.contentLeftText,this.zone,-30,50),this.add(this.contentLeftText)},i.addIconContentText=function(){this.iconContentText=this.scene.make.image({key:Rv,frame:kv.ICON_COIN}),Phaser.Display.Align.In.Center(this.iconContentText,this.zone,35,50),this.iconContentText.setWorldSize(27.5,27.5),this.add(this.iconContentText)},i.addContentRightText=function(){this.contentRightText=this.scene.add.text(0,0,"0",{fontFamily:C.Z.FONT_FAMILY,fontSize:"20px",color:"#ffd700",stroke:"#503621",strokeThickness:3}),this.contentRightText.setHighQuality(),this.contentRightText.setOrigin(.5,.5),Phaser.Display.Align.In.Center(this.contentRightText,this.zone,70,50),this.add(this.contentRightText)},i.setMessage=function(e,t,i){this.headerText.setText(e),Phaser.Display.Align.In.Center(this.headerText,this.zone,0,-20),this.contentLeftText.setText(t),Phaser.Display.Align.In.Center(this.contentLeftText,this.zone,-30,50),this.contentRightText.setText(i),Phaser.Display.Align.In.Center(this.contentRightText,this.zone,70,50)},i.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new Pv.Z({targets:[this.contentLeftText,this.contentRightText,this.headerText,this.iconContentText],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},i.logPageviewOnOpen=function(){},i.logPageviewOnClose=function(){},t}(GameCore.Screen),Lv=i(56),Dv=i.n(Lv),Bv=g.Z.DEFAULT,Nv=Bv.KEY,Mv=Bv.FRAME,Zv=GameCore.Configs,Gv=Zv.Network,Fv=Zv.Gameplay,Uv=function(e){function t(t,i,a,r){var c;return(c=e.call(this,t,i,a,r)||this).scene=void 0,c.isTimeout=void 0,c.isUseRescue=void 0,c.progressColor=0,c.progressTween=void 0,c.progressCircle=void 0,c.progressAngle=void 0,c.progressSize=void 0,c.progressRadius=void 0,c.countdownText=void 0,c.countdownTimer=void 0,c.countdownCount=void 0,c.skipText=void 0,c.continueButton=void 0,c.useCoin=void 0,c.buttonsAnimation=void 0,c.adsTimer=void 0,c.open=function(){e.prototype.open.call((0,s.Z)(c)),c.progressColor=4249855,c.isTimeout=!1,c.isUseRescue=!1,c.useCoin.revive(),Phaser.Display.Align.In.Center(c.useCoin,c.zone,0,70),c.continueButton.revive(),Phaser.Display.Align.In.Center(c.continueButton,c.zone,0,145),c.countdownCount=Fv.RescueGamePopupTimeout,c.setTime(c.countdownCount),c.runCountdown(),c.runButtonsAnimation(),c.scene.audio.playSound(ag.Z.POPUP_SHOW)},c.handleShowRewardedVideoAd=(0,n.Z)(o().mark((function e(){var t,i,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.scene.game,i=t.globalScene,n=t.audio,e.prev=1,!c.isTimeout){e.next=4;break}return e.abrupt("return");case 4:if(!c.isUseRescue){e.next=6;break}return e.abrupt("return");case 6:return c.isUseRescue=!0,c.progressTween.pause(),c.countdownTimer.paused=!0,i.screen.open(O.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=14,new(Dv())((function(e,t){var i;null==(i=c.adsTimer)||i.remove(),c.adsTimer=c.scene.time.delayedCall(Gv.Timeout,t),c.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?c.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):c.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 14:return e.next=16,c.scene.ads.showRewardedVideoAsync();case 16:c.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),c.countdownTimer.remove(),c.scene.storage.dispatch((0,gm.Wv)()),pm.Z.emit(dm.Z.SECOND_CHANCE_USE.EVENTS.SECOND_CHANCE_USED,{type:"second_chance",value:1}),c.scene.screen.close(c.name),i.screen.close(O.o4.NOTIFY_SCREEN),n.playSound(ag.Z.DAILY_REWARD),i.screen.close(O.o4.NOTIFY_SCREEN),c.scene.rescuing(),e.next=35;break;case 27:if(e.prev=27,e.t0=e.catch(1),c.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,c.getScreenName(),e.t0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=34;break}if("USER_INPUT"!==e.t0.code){e.next=34;break}return c.showNotifySkipAds(),e.abrupt("return");case 34:c.showNotifyNoAds();case 35:return e.prev=35,null==(s=c.adsTimer)||s.destroy(),c.scene.audio.unmuteAll(),c.scene.audio.playMusic(),e.finish(35);case 40:case"end":return e.stop()}}),e,null,[[1,27,35,40]])}))),c.handleUseCoinToRescue=(0,n.Z)(o().mark((function e(){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.scene.game.audio,!c.isTimeout){e.next=3;break}return e.abrupt("return");case 3:if(!c.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:c.isUseRescue=!0,c.progressTween.pause(),c.countdownTimer.paused=!0,t.pauseMusic(),(i=c.scene.getCurrentCoinsInCurrentLevel())>=Fv.RescueCoins?(i-=Fv.RescueCoins,c.scene.setCurrentCoinsAndUpdateCoinBar(i),c.scene.storage.dispatch((0,gm.Wv)()),c.countdownTimer.remove(),pm.Z.emit(dm.Z.SECOND_CHANCE_USE.EVENTS.SECOND_CHANCE_USED,{type:"second_chance",value:1}),c.scene.screen.close(c.name),c.scene.audio.playSound(ag.Z.DAILY_REWARD),c.scene.rescuing()):(c.scene.screen.events.off(GameCore.Screens.Events.CLOSE,c.handleNotEnoughCoins),c.scene.screen.events.once(GameCore.Screens.Events.CLOSE,c.handleNotEnoughCoins),c.scene.notEnoughCoinScreen.setX(c.scene.cameraFocus.x),c.scene.screen.open(O.o4.NOT_ENOUGH_COINS_SCREEN,{headerText:"YOU DON'T HAVE ENOUGH COINS",contentLeftText:"YOU HAVE:",contentRightText:i.toString()})),c.scene.audio.playMusic();case 12:case"end":return e.stop()}}),e)}))),c.showNotifyNoAds=function(){var e=c.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE,c.handleCloseNotifyNoAds),e.screen.events.once(GameCore.Screens.Events.CLOSE,c.handleCloseNotifyNoAds),e.screen.open(O.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.NO_ADS,duration:2e3,loading:!1})},c.showNotifySkipAds=function(){var e=c.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE,c.handleCloseNotifySkipAds),e.screen.events.once(GameCore.Screens.Events.CLOSE,c.handleCloseNotifySkipAds),e.screen.open(O.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.SORRY_NO_REWARDS+"\n"+c.scene.lang.Text.CANCELLED_AD,duration:3e3,loading:!1})},c.handleNotEnoughCoins=function(){c.isTimeout||(c.isUseRescue=!1,c.progressTween.resume(),c.countdownTimer.paused=!1,c.useCoin.kill(),c.isAvailableToRescue()&&c.scene.add.tween({targets:c.continueButton,props:{y:"-=37.5"},duration:100}))},c.handleCloseNotifyNoAds=function(){c.isTimeout||(c.isUseRescue=!1,c.progressTween.resume(),c.countdownTimer.paused=!1,c.continueButton.kill(),c.isAvailableToRescue()&&c.scene.add.tween({targets:c.useCoin,props:{y:"+=37.5"},duration:100}))},c.handleCloseNotifySkipAds=function(){c.isTimeout||c.gameOver()},c.handleClickSkip=function(){c.isTimeout||c.gameOver()},c.handleRunCountdown=function(){if(c.countdownCount-=1,c.countdownCount<=0)return c.isTimeout=!0,c.countdownTimer.remove(),c.progressTween.complete(),void c.handleRescueTimeout();c.setTime(c.countdownCount)},c.scene=t,c.progressColor=0,c.progressAngle=-90,c.progressSize=10,c.progressRadius=70,c.countdownCount=Fv.MaxRescueCount,c.setDepth(O.Ks.POPUP),c.background.setAlpha(.8),c.createContent(),c}(0,a.Z)(t,e);var i=t.prototype;return i.isAvailableToRescue=function(){return!(!this.continueButton.active&&!this.useCoin.active)||(this.handleRescueFail(),!1)},i.handleRescueTimeout=function(){this.isUseRescue||this.gameOver()},i.handleRescueFail=function(){this.isUseRescue||this.gameOver()},i.gameOver=function(){this.scene.game.globalScene.screen.events.off(GameCore.Screens.Events.CLOSE),this.progressTween.pause(),this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.gameOver()},i.createContent=function(){this.createProgressCircle(),this.createTitle(),this.createCountdown(),this.createContinueButton(),this.createUseCoinButton(),this.createSkipText()},i.createTitle=function(){var e=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(35),text:this.scene.lang.Text.SECOND_CHANCE});e.setTint(1506047),Phaser.Display.Align.In.Center(e,this.zone,0,-180),this.add(e)},i.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(90),text:"",origin:{x:.5,y:.5}}),this.countdownText.setTint(16702232),this.add(this.countdownText),this.setTime(this.countdownCount)},i.runCountdown=function(){var e,t={delay:1e3,loop:!0,callback:this.handleRunCountdown};null==(e=this.countdownTimer)||e.remove(),this.countdownTimer=this.scene.time.addEvent(t),this.startProgressCircle()},i.setProgressCircle=function(e){var t=this.countdownText,i=t.x,n=t.y,s=Phaser.Math.DegToRad(this.progressAngle),a=Phaser.Math.DegToRad(this.progressAngle-e);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(i,n-2,this.progressRadius,s,a,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},i.setTime=function(e){this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-60)},i.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},i.startProgressCircle=function(){var e,t=this;null==(e=this.progressTween)||e.remove(),this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*Fv.RescueGamePopupTimeout,onUpdate:function(e){var i=+e.getValue().toFixed(2);t.setProgressCircle(i)}})},i.createContinueButton=function(){this.continueButton=new jm.Z(this.scene,Nv,Mv.BUTTON_GREEN_REVIVE_2,163,56.5),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Nv,Mv.ICON_ADS);Phaser.Display.Align.In.Center(e,this.continueButton),e.setWorldSize(37,29),e.setX(-50),this.continueButton.add(e);var t=25,i=1;if("ru"===this.scene.lang.getCurrentLanguage())t=20,i=0;var n=this.scene.make.bitmapText({font:C.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.CONTINUE,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(n,this.continueButton,22,i),this.continueButton.add(n),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,145)},i.createUseCoinButton=function(){this.useCoin=new jm.Z(this.scene,Nv,Mv.BUTTON_BLUE_REVIVE,96.5,48.5),this.useCoin.setName("useCoin"),this.add(this.useCoin),this.useCoin.onClick=this.handleUseCoinToRescue;var e=this.scene.add.image(0,0,Nv,Mv.ICON_COIN);Phaser.Display.Align.In.Center(e,this.useCoin,-20),e.setWorldSize(27.5,27.5),this.useCoin.add(e);var t=this.scene.make.bitmapText({font:C.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(25),text:""+Fv.RescueCoins,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,this.useCoin,15,1),this.useCoin.add(t),Phaser.Display.Align.In.Center(this.useCoin,this.zone,0,70)},i.createSkipText=function(){var e=87,t=22;if("ru"===this.scene.lang.getCurrentLanguage())e=109,t=20;this.skipText=new jm.Z(this.scene,Nv,this.scene.lang.Texture.NO_THANKS,e,t),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleClickSkip,Phaser.Display.Align.In.Center(this.skipText,this.zone,0,210)},i.runButtonsAnimation=function(){var e;this.buttonsAnimation||(this.buttonsAnimation=new Hm.Z({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(e=this.buttonsAnimation)||e.play()},t}(GameCore.Screen),Hv=i(114),jv=i(148),Yv=g.Z.DEFAULT,Kv=Yv.KEY,Wv=Yv.FRAME,Vv=function(e){function t(t){var i;return(i=e.call(this,t)||this).animShow=void 0,i.mouse=void 0,i.createMouse(),i.runMouseAnimation(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.createMouse=function(){this.mouse=this.scene.make.image({key:Kv,frame:Wv.MOUSE_SAD,origin:{x:.5,y:1}}),this.mouse.setWorldSize(136,188),this.mouse.setY(this.mouse.height/2),this.add(this.mouse)},i.runMouseAnimation=function(){new Hm.Z({targets:[this.mouse],duration:1e3,props:{scale:"+=0.02"}}).play()},i.createAnimationShow=function(){var e=this.y,t=this.scale;this.animShow=new jv.Z({paused:!0,targets:[this],delay:200,duration:300,props:{y:{from:350,to:e},alpha:{start:0,from:0,to:1},scale:{start:0,from:0,to:t}}})},t}(Phaser.GameObjects.Container),zv=g.Z.DEFAULT,Xv=zv.KEY,Jv=zv.FRAME,qv=function(e){function t(t){var i;return(i=e.call(this,t)||this).animShow=void 0,i.mouse=void 0,i.createMouse(),i.runMouseAnimation(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.createMouse=function(){this.mouse=this.scene.make.image({key:Xv,frame:Jv.MOUSE_HAPPY,origin:{x:.5,y:1}}),this.mouse.setWorldSize(240.5,181),this.mouse.setY(this.mouse.height/2),this.add(this.mouse)},i.runMouseAnimation=function(){new Hm.Z({targets:[this.mouse],duration:1e3,props:{scale:"+=0.02"}}).play()},i.createAnimationShow=function(){var e=this.y,t=this.scale;this.animShow=new jv.Z({paused:!0,targets:[this],delay:200,duration:300,props:{y:{from:350,to:e},alpha:{start:0,from:0,to:1},scale:{start:0,from:0,to:t}}})},t}(Phaser.GameObjects.Container),Qv=i(634),$v=Phaser.GameObjects.Container,ey=g.Z.DEFAULT,ty=ey.KEY,iy=ey.FRAME,ny=25,sy=50,ay=75,ry=function(e){function t(t){var i;return(i=e.call(this,t)||this).luckyArrow=void 0,i.createObjects(),i}(0,a.Z)(t,e);var i=t.prototype;return i.updateArrow=function(e){var t=180*e/2/100;this.luckyArrow.setAngle(t);var i=Math.abs(e);return i<ny?5:i<sy?4:i<ay?3:2},i.createObjects=function(){var e=this.scene.make.image({key:ty,frame:iy.ARC_LUCKY_BAR});e.setOrigin(.5,0),e.setDisplaySize(217,103.5),this.add(e);var t=this.scene.make.image({key:ty,frame:iy.ARC_ARROW});t.setOrigin(.5,.8),t.setDisplaySize(20,59.5),t.setAngle(30),this.add(t),t.setY(e.y+90),this.luckyArrow=t},t}($v),oy=g.Z.DEFAULT,cy=oy.KEY,hy=oy.FRAME,uy=GameCore.Configs.Network,ly=function(e){function t(t,i,a,r){var c;return(c=e.call(this,t,i,a,r)||this).scene=void 0,c.theMouse=void 0,c.sadMouse=void 0,c.title=void 0,c.ribbon=void 0,c.levelText=void 0,c.coinIcon=void 0,c.coinText=void 0,c.collectButton=void 0,c.collectButtonTitle=void 0,c.coinBar=void 0,c.skipText=void 0,c.currentCoin=void 0,c.restartButton=void 0,c.backButton=void 0,c.titleContainer=void 0,c.rewardContainer=void 0,c.footerButtonsContainer=void 0,c.luckyContainer=void 0,c.luckyTween=void 0,c.luckyTimer=void 0,c.baseValue=void 0,c.multiply=1,c.isLeft=!1,c.adsTimer=void 0,c.coinEffect=void 0,c.popupShowUpAnimation=void 0,c.popupFadeOutAnimation=void 0,c.buttonsAnimation=void 0,c.open=function(t){e.prototype.open.call((0,s.Z)(c),t),c.updateState(),c.updateScreen(),c.updateCurrentCoins(),c.runOpenAnimation()},c.handleClickSkip=function(){"endless"===c.getData(["gameMode"])[0]?c.handleRestartGame():c.handleNextLevel()},c.handleOnViewAds=function(){c.luckyTween.complete(),c.viewAdsReward()},c.calculateMultiply=function(e){var t=c.luckyContainer.updateArrow(c.isLeft?-e:e);c.multiply=t,c.coinText.setText(""+c.baseValue*t),c.collectButtonTitle.setText("x "+t)},c.viewAdsReward=(0,n.Z)(o().mark((function e(){var t,i,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c.scene,i=t.audio,n=t.game,c.collectButton.setDisabled(!0),n.globalScene.screen.open(O.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),i.pauseMusic(),e.next=7,new(Dv())((function(e,t){var i;null==(i=c.adsTimer)||i.remove(),c.adsTimer=c.scene.time.delayedCall(uy.Timeout,t),c.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?c.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):c.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return c.scene.analytics.showRewardedVideoAd(c.getScreenName()),e.next=10,c.scene.ads.showRewardedVideoAsync();case 10:n.globalScene.screen.close(O.o4.NOTIFY_SCREEN),c.handleLuckyReward(),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(0),c.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,c.getScreenName(),e.t0),!GameCore.Utils.Valid.isGameSDKError(e.t0)){e.next=21;break}if("USER_INPUT"!==e.t0.code){e.next=21;break}return c.showNotifySkipAds(),e.abrupt("return");case 21:c.handleFailedAdsReward();case 22:return e.prev=22,null==(s=c.adsTimer)||s.destroy(),c.scene.audio.playMusic(),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[0,14,22,26]])}))),c.showNotifySkipAds=function(){var e=c.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE,c.handleCloseNotifySkipAds),e.screen.events.once(GameCore.Screens.Events.CLOSE,c.handleCloseNotifySkipAds),e.screen.open(O.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.SORRY_NO_REWARDS+"\n"+c.scene.lang.Text.CANCELLED_AD,duration:3e3,loading:!1})},c.handleCloseNotifySkipAds=function(){"endless"===c.getData(["gameMode"])[0]?c.handleRestartGame():c.handleNextLevel()},c.handleFailedAdsReward=function(){var e=c.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE,c.handleCloseNotifyNoAds),e.screen.events.once(GameCore.Screens.Events.CLOSE,c.handleCloseNotifyNoAds),e.screen.open(O.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.NO_ADS,duration:2e3,loading:!1})},c.handleCloseNotifyNoAds=function(){"endless"===c.getData(["gameMode"])[0]?c.handleRestartGame():c.handleNextLevel()},c.handleLuckyReward=function(){c.skipText.setDisabled(!0),c.eatCoins(c.baseValue*c.multiply),c.scene.time.delayedCall(2e3,(function(){c.skipText.setDisabled(!1),"endless"===c.getData(["gameMode"])[0]?c.handleRestartGame():c.handleNextLevel()}))},c.handleClose=function(){c.runCloseAnimation()},c.handleInviteIconClick=function(){c.scene.storage.dispatch((0,Xm.uF)()),pm.Z.emit(dm.Z.SHARE_GAME.EVENTS.SHARE_GAME,{type:"share",value:1})},c.handleRestartGame=function(){var e=c.scene,t=e.storage;e.isEndlessMode?t.dispatch((0,gm.cN)()):t.dispatch((0,gm.Ad)()),c.scene.screen.close(c.name),c.scene.replay()},c.scene=t,c.currentCoin=0,c.setDepth(O.Ks.POPUP),c.background.setAlpha(.8),c.createContent(),c}(0,a.Z)(t,e);var i=t.prototype;return i.updateScreen=function(){var e,t;this.baseValue=100,null==(e=this.luckyTween)||e.stop(),null==(t=this.luckyTimer)||t.remove(),this.collectButton.setDisabled(!0),this.calculateMultiply(0),this.isLeft=!1},i.updateState=function(){var e=this.getData(["level","result"]),t=e[0],i=e[1];this.updateLevelText(i,t),this.updateMouse(i),this.updateTitle(i),this.updateUI(i)},i.updateCurrentCoins=function(){var e=this.scene.player.getCoins();this.setCoins(e),this.updateCoinBarValue(this.currentCoin)},i.setCoins=function(e){var t=e<0?0:e;this.currentCoin=t},i.updateCoinBarValue=function(e){this.coinBar.setValue(e)},i.eatCoins=function(e){this.createCoinsEffect(e);var t=this.currentCoin+Math.floor(e);this.setCoins(t),this.updateCoinBarValue(this.currentCoin),this.scene.player.setCustomData("coin",this.currentCoin)},i.createCoinsEffect=function(e){var t,i=this.coinBar.getWorldPosition(),n=i.x,s=i.y,a=this.coinIcon.getWorldPosition(),r=a.x,o=a.y;null==(t=this.coinEffect)||t.destroy(),this.coinEffect=new Qv.Z(this.scene,n-43,s+4),this.coinEffect.setDepth(A.Z.ON_TOP),this.coinEffect.explode(e/15,r,o,60)},i.updateLevelText=function(e,t){if("congratulation"===e){var i=this.scene.gameUIScreen.header.endlessDistanceText;return this.levelText.setText(i.text),this.levelText.setFontSize(this.scene.fontSize(45)),void this.levelText.setPosition(0,-25)}this.levelText.setText(this.scene.lang.Text.LEVEL+" "+t),this.levelText.setFontSize(this.scene.fontSize(35)),"win"===e?this.levelText.setPosition(0,-25):this.levelText.setPosition(0,0)},i.updateMouse=function(e){"win"===e||"congratulation"===e?(this.sadMouse.kill(),this.theMouse.revive()):(this.theMouse.kill(),this.sadMouse.revive())},i.updateTitle=function(e){var t=24;if("ru"===this.scene.lang.getCurrentLanguage())t=30;"win"===e?(this.title.setFontSize(this.scene.fontSize(30)),this.title.setText(this.scene.lang.Text.COMPLETED),this.ribbon.setFrame(hy.RIBBON_RED)):"congratulation"===e?(this.title.setFontSize(this.scene.fontSize(t)),this.title.setText(this.scene.lang.Text.CONGRATULATION),this.ribbon.setFrame(hy.RIBBON_RED)):(this.title.setFontSize(this.scene.fontSize(30)),this.title.setText(this.scene.lang.Text.FAILED),this.ribbon.setFrame(hy.RIBBON_GREY)),Phaser.Display.Align.In.Center(this.title,this.ribbon,0,-13)},i.updateUI=function(e){"win"===e||"congratulation"===e?(this.luckyContainer.revive(),this.collectButton.revive(),this.coinIcon.revive(),this.coinText.revive(),this.coinBar.revive(),this.skipText.revive(),this.backButton.kill(),this.restartButton.kill()):(this.luckyContainer.kill(),this.collectButton.kill(),this.coinIcon.kill(),this.coinText.kill(),this.coinBar.kill(),this.skipText.kill(),this.backButton.revive(),this.restartButton.revive())},i.createMouse=function(){this.theMouse=new qv(this.scene),this.sadMouse=new Vv(this.scene),this.theMouse.setX(-7),this.theMouse.setY(-147),this.sadMouse.setY(-143),this.theMouse.createAnimationShow(),this.sadMouse.createAnimationShow(),this.titleContainer.add([this.theMouse,this.sadMouse])},i.createContent=function(){this.createCoinBar(),this.createRestartButton(),this.createTitleContainer(),this.createRewardContainer(),this.createFooterButtons()},i.createTitleContainer=function(){this.titleContainer=this.scene.make.container({}),this.titleContainer.x,this.titleContainer.y,this.createMouse(),this.createTitle(),this.createLevelText(),this.add(this.titleContainer)},i.createRewardContainer=function(){this.rewardContainer=this.scene.make.container({}),this.setArcLucky(),this.createCoinIcon(),this.createCoinValue(),this.rewardContainer.setY(50),this.add(this.rewardContainer)},i.createFooterButtons=function(){this.footerButtonsContainer=this.scene.make.container({}),this.createCollectButton(),this.createSkipText(),this.createBackButton(),this.add(this.footerButtonsContainer)},i.createTitle=function(){var e=this.scene.add.container();this.ribbon=this.scene.make.image({key:cy,frame:hy.RIBBON_RED}),this.ribbon.setWorldSize(261,79),this.title=this.scene.make.bitmapText({font:C.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(30),text:"",origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.title,this.ribbon,0,-13),e.add([this.ribbon,this.title]),Phaser.Display.Align.In.Center(e,this,0,-65),this.titleContainer.add(e)},i.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.scene.fontSize(35),text:"Level 0",origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.levelText,this,0,-25),this.titleContainer.add(this.levelText)},i.createCoinIcon=function(){this.coinIcon=this.scene.make.image({key:cy,frame:hy.ICON_COIN}),this.coinIcon.setWorldSize(27.5,27.5),this.rewardContainer.add(this.coinIcon),Phaser.Display.Align.In.Center(this.coinIcon,this.rewardContainer,-30,20)},i.createCoinValue=function(){this.coinText=this.scene.make.bitmapText({size:this.scene.fontSize(45),font:C.Z.PRIMARY.KEY,origin:{x:.5,y:.5},text:"0"}),this.coinText.setTint(16777215),this.rewardContainer.add(this.coinText),Phaser.Display.Align.In.RightCenter(this.coinText,this.coinIcon,40,3)},i.createCollectButton=function(){this.collectButton=new jm.Z(this.scene,cy,hy.BUTTON_GREEN_DASHBOARD,127,57),this.collectButton.setName("Collect"),this.collectButtonTitle=this.scene.make.bitmapText({font:C.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(32),text:"x 1",origin:{x:.5,y:.5}}),this.collectButtonTitle.setName("title");var e=this.scene.make.image({key:cy,frame:hy.ICON_ADS});e.setWorldSize(36.5,29),Phaser.Display.Align.In.Center(e,this.collectButton,-30,1),Phaser.Display.Align.In.Center(this.collectButtonTitle,this.collectButton,20,2),this.collectButton.add([this.collectButtonTitle,e]),this.collectButton.onClick=this.handleOnViewAds,this.footerButtonsContainer.add(this.collectButton),Phaser.Display.Align.In.BottomCenter(this.collectButton,this.luckyContainer,0,180)},i.createCoinBar=function(){this.coinBar=new pv(this.scene),this.add(this.coinBar),Phaser.Display.Align.In.TopCenter(this.coinBar,this,115,-12)},i.createSkipText=function(){var e=87,t=22;if("ru"===this.scene.lang.getCurrentLanguage())e=109,t=20;this.skipText=new jm.Z(this.scene,cy,this.scene.lang.Texture.NO_THANKS,e,t),this.skipText.setName("NoThanks"),this.skipText.onClick=this.handleClickSkip,this.footerButtonsContainer.add(this.skipText),Phaser.Display.Align.In.Center(this.skipText,this.collectButton,0,65)},i.setArcLucky=function(){var e;null==(e=this.luckyContainer)||e.destroy(),this.luckyContainer=new ry(this.scene),this.rewardContainer.add(this.luckyContainer),this.luckyContainer.setY(50)},i.createBackButton=function(){this.backButton=new jm.Z(this.scene,cy,hy.BUTTON_BLUE_BACK,75.5,44);var e=this.scene.make.image({key:cy,frame:hy.LOADING_BACK_ICON});e.setY(-6),e.setWorldSize(31.5,23.5);var t=this.scene.make.bitmapText({font:C.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(15),text:this.scene.lang.Text.BACK,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,this.backButton,0,14),this.backButton.add([e,t]),this.backButton.onClick=this.handleClose,Phaser.Display.Align.In.BottomLeft(this.backButton,this.zone,7,-80),this.footerButtonsContainer.add(this.backButton)},i.createInviteButton=function(){},i.createRestartButton=function(){this.restartButton=new jm.Z(this.scene,cy,hy.BUTTON_GREEN_LONG,136.5,40),this.restartButton.setName("Restart");var e=this.scene.make.image({key:cy,frame:hy.ICON_RESUME});e.setX(-48),e.setWorldSize(28,27);var t=22;if("ru"===this.scene.lang.getCurrentLanguage())t=15;var i=this.scene.make.bitmapText({font:C.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.RESTART,alpha:.8});Phaser.Display.Align.In.Center(i,this.restartButton,15,1),this.restartButton.add([e,i]),this.restartButton.setPosition(55,75),this.restartButton.onClick=this.handleRestartGame,this.restartButton.setPosition(0,70),this.add(this.restartButton)},i.handleNextLevel=function(){this.scene.screen.close(this.name),this.scene.nextLevel()},i.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ag.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runContainerEntrancesAnimation(0,800))},i.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new f.Z({targets:[this],delay:e,duration:t,props:{alpha:{start:0,from:0,to:1}}})),this.popupShowUpAnimation.play()},i.runContainerEntrancesAnimation=function(e,t){var i=this,n=this.getData(["result"])[0],s="lose"===n?-100:100,a="lose"===n?2*t:t;this.scene.tweens.add({targets:[this.titleContainer,this.rewardContainer,this.footerButtonsContainer],ease:Phaser.Math.Easing.Back.Out,delay:this.scene.tweens.stagger(100,{start:e}),duration:a,props:{y:{start:s,from:s,to:0}},onComplete:function(){i.runLucky(),i.runButtonsAnimation(),i.collectButton.setDisabled(!1)}}),"lose"===n&&(this.restartButton.setAlpha(0),this.scene.tweens.add({targets:[this.restartButton],ease:Phaser.Math.Easing.Cubic.Out,delay:e+a,duration:300,props:{alpha:{start:0,from:0,to:1}}}))},i.runLucky=function(){var e=this;this.collectButton.setDisabled(!0),this.isLeft=!1,this.luckyTween=this.scene.tweens.addCounter({from:0,to:95,duration:500,delay:200,yoyo:!0,repeat:-1,ease:"Sine.easeOut",onUpdate:function(t){e.calculateMultiply(t.getValue()||0)},onRepeat:function(){e.isLeft=!e.isLeft}})},i.runButtonsAnimation=function(){var e;this.buttonsAnimation||(this.buttonsAnimation=new Hm.Z({targets:[this.collectButton,this.restartButton],props:{scale:"-=0.05"}})),null==(e=this.buttonsAnimation)||e.play()},i.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ag.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Hv.Z({targets:[this],delay:e,duration:t,props:{alpha:0},onComplete:function(){i.scene.screen.close(i.name),i.scene.scene.switch(Tv.C.DASHBOARD_SCENE)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),dy=i(47),py=i.n(dy),fy=i(99),gy=i.n(fy),my=i(149),vy=i.n(my),yy=function(){function e(e){var t=this;this.scene=void 0,this.levelList=void 0,this.usedLevels=void 0,this.currentPositionOffset=void 0,this.currentEndPoint=void 0,this.currentIDOffset=void 0,this.currentLevelID=void 0,this.outputLevelObj=void 0,this.outputObjectGroup=void 0,this.outputSymbolLayer=void 0,this.buildLevel=function(){if(!(t.levelList.length<1)){t.levelLoadingFaultCheck();var e=t.getLevelJSON(t.levelList[0]);if(!e){var i=Math.floor(Math.random()*(t.usedLevels.length-1));e=t.getLevelJSON(t.usedLevels[i])}t.outputLevelObj=JSON.parse(py()(e)),t.currentLevelID=t.levelList[0];var n=t.getLevelObjectGroup(t.outputLevelObj),s=t.getSymbolLayer(t.outputLevelObj),a=t.getLevelGoalObject(t.outputLevelObj);if(n&&s&&a){t.outputObjectGroup=n,t.outputSymbolLayer=s,t.currentEndPoint=a,t.currentPositionOffset=t.currentEndPoint.x+t.currentEndPoint.width,t.currentIDOffset=t.outputLevelObj.nextobjectid,t.removeGoalObjectGroup(),t.objectLayerNameFix();for(var r=1;r<t.levelList.length;r++){var o=!1,c=t.getLevelJSON(t.levelList[r]);if(!c){var h=Math.floor(Math.random()*(t.usedLevels.length-1));c=t.getLevelJSON(t.usedLevels[h])}t.currentLevelID=t.levelList[r],r==t.levelList.length-1&&(o=!0),t.mergeLevelJSON(c,o)}t.currentIDOffset=0,t.currentPositionOffset=0,t.scene.load.once(Phaser.Loader.Events.COMPLETE,(function(){t.scene.bigAssetHandler.customMapAssetCheck()})),t.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){(0,en.R0)(new En.Z("Load next map json fail"),{file:null==e?void 0:e.url})})),t.scene.cache.tilemap.exists("level-from-json")&&t.scene.cache.tilemap.remove("level-from-json"),t.scene.load.tilemapTiledJSON({key:"level-from-json",url:t.outputLevelObj}),t.scene.load.start()}}},this.scene=e}var t=e.prototype;return t.generateLevelList=function(e){this.levelList=[];for(var t=0;t<e;t++)this.levelList.push(Math.floor(100*Math.random())+1)},t.getLevelJSON=function(e){var t=this.scene.levelHandler.getConfigByLevel(e);if(!t)return!1;var i=t.key,n=this.scene.cache.tilemap.get(i);return!(!n||!n.data)&&n.data},t.levelLoadingFaultCheck=function(){var e,t=this,i=[];if(this.usedLevels.forEach((function(e){t.getLevelJSON(e)||$i()(i).call(i,e)||i.push(e)})),0!==i.length){var n=gy()(e=this.usedLevels).call(e,(function(e){return-1===$i()(i).call(i,e)}));this.usedLevels=n}},t.loadLevels=function(){var e,t=this;this.usedLevels=gy()(e=this.levelList).call(e,(function(e,t,i){return $i()(i).call(i,e)===t}));var i=!1,n=this.scene.levelHandler;this.usedLevels.forEach((function(e){var s=n.getConfigByLevel(e);if(s){var a=s.key,r=s.mapJson;t.scene.cache.tilemap.exists(a)||(i=!0,t.scene.load.tilemapTiledJSON(a,r))}})),i?(this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.buildLevel),this.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){(0,en.R0)(new En.Z("Load current map json fail"),{file:null==e?void 0:e.url})})),this.scene.load.start()):this.buildLevel()},t.initLevelBuilding=function(e){this.generateLevelList(e),this.loadLevels()},t.appendNewSymbols=function(e){var t=this;e.objects&&JSON.parse(py()(e)).objects.forEach((function(e){var i;"start-point"!==e.name&&(e.x+=t.currentPositionOffset,e.id+=t.currentIDOffset,null==(i=t.outputSymbolLayer.objects)||i.push(e))}))},t.appendNewObjects=function(e,t){var i=this;e.layers&&e.layers.forEach((function(e){var n,s,a=JSON.parse(py()(e));if((t||!_n()(n=a.name).call(n,"goal-obj"))&&a.objects){var r,o,c=!1;if(null==(s=i.outputObjectGroup.layers)||s.forEach((function(e){var t,i;_n()(t=a.name).call(t,e.name)&&(_n()(i=a.name).call(i,"decor-obj-behind")&&"decor-obj"===e.name||(r=e,c=!0))})),c)a.objects.forEach((function(e){var t;if(e.x+=i.currentPositionOffset,e.id+=i.currentIDOffset,e.visible){if(_n()(t=a.name).call(t,"interactable-obj")){if(!e.properties)return;e.properties.forEach((function(e){if("triggerID"===e.name){var t=e.value,n=i.triggerIDHandle(t);if(!n)return;e.value=n}}))}r.objects&&r.objects.push(e)}}));else a.objects.forEach((function(e){var t;if(e.x+=i.currentPositionOffset,e.id+=i.currentIDOffset,e.visible&&_n()(t=a.name).call(t,"interactable-obj")){if(!e.properties)return;e.properties.forEach((function(e){if("triggerID"===e.name){var t=e.value,n=i.triggerIDHandle(t);if(!n)return;e.value=n}}))}})),null==(o=i.outputObjectGroup.layers)||o.push(a)}}))},t.mergeLevelJSON=function(e,t){var i=this.getLevelObjectGroup(e),n=this.getSymbolLayer(e),s=this.getLevelGoalObject(e);i&&n&&s&&(this.appendNewObjects(i,t),this.appendNewSymbols(n),this.currentEndPoint=s,this.currentPositionOffset+=this.currentEndPoint.x+this.currentEndPoint.width,this.currentIDOffset+=e.nextobjectid,this.outputLevelObj.width+=e.width)},t.getLevelObjectGroup=function(e){var t=e.layers[0],i=!1;if(e.layers.forEach((function(e){"objects"===e.name&&(t=e,i=!0)})),i)return t},t.getSymbolLayer=function(e){var t=e.layers[0],i=!1;if(e.layers.forEach((function(e){"symbol"===e.name&&(t=e,i=!0)})),i)return t},t.removeGoalObjectGroup=function(){var e,t,i=-1;(null==(e=this.outputObjectGroup.layers)||e.forEach((function(e,t){var n;_n()(n=e.name).call(n,"goal-obj")&&(i=t)})),i>=0)&&(null==(t=this.outputObjectGroup.layers)||vy()(t).call(t,i,1))},t.getLevelGoalObject=function(e){var t,i,n=e.layers[0],s=!1;if(e.layers.forEach((function(e){"objects"===e.name&&(n=e,s=!0)})),s&&n){var a=n,r=!1;if(null==(t=n.layers)||t.forEach((function(e){var t;_n()(t=e.name).call(t,"goal-obj")&&(a=e,r=!0)})),r&&a.objects){var o=a.objects[0],c=!1;if(null==(i=a.objects)||i.forEach((function(e){e.visible&&(o=e,c=!0)})),c)return o}}},t.objectLayerNameFix=function(){var e;null==(e=this.outputObjectGroup.layers)||e.forEach((function(e){var t=e.name.split("/");e.name=t[t.length-1]}))},t.triggerIDHandle=function(e){var t=this;if("number"!=typeof e&&"string"!=typeof e)return 0;if("number"==typeof e)return e+this.currentIDOffset;var i=e.split(", "),n=[];i.forEach((function(e){var i=parseInt(e)+t.currentIDOffset;n.push(i)}));for(var s="",a=0;a<n.length;a++)s+=n[a],a<n.length-1&&(s+=", ");return s},e}(),Ey=yy,Sy=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.getLevelJSON=function(e){var t,i=this.scene,n=i.levelHandler,s=i.isEndlessMode;if(!(t=e?s?n.getEndlessLevelConfig(e):n.getConfigByLevel(e):n.getConfig()))return!1;var a=t.key;return this.scene.cache.tilemap.get(a)},t.checkForBigAssets=function(e,t){var i=this,n=this.getLevelJSON(t);if(!n)return!1;var s=this.checkForOwlUsage(n),a=this.checkForMonkeyUsage(n),r=this.checkForSpaceshipUsage(n),o=this.checkForCrabUsage(n),c=this.checkForBalloonUsage(n);if(s||a||r||o||c)return this.scene.load.once(Phaser.Loader.Events.COMPLETE,(function(){var t=i.scene.animationManager;s&&t.addOwlAnimation(),a&&t.addMonkeyAnimation(),r&&t.addSpaceshipAnimation(),o&&t.addCrabAnimation(),c&&t.addBalloonAnimation(),e&&i.scene.startGame()})),void this.scene.load.start();e&&this.scene.time.delayedCall(100,this.scene.startGame)},t.customMapAssetCheck=function(){var e=this,t=this.scene.cache.tilemap.get("level-from-json");if(!t)return!1;var i=this.checkForOwlUsage(t),n=this.checkForMonkeyUsage(t),s=this.checkForSpaceshipUsage(t),a=this.checkForCrabUsage(t),r=this.checkForBalloonUsage(t),o=i||n||s||a||r,c=R.Z.length-1;if(this.scene.levelHandler.setConfig(c,!0),o)return this.scene.load.once(Phaser.Loader.Events.COMPLETE,(function(){var t=e.scene.animationManager;i&&t.addOwlAnimation(),n&&t.addMonkeyAnimation(),s&&t.addSpaceshipAnimation(),a&&t.addCrabAnimation(),r&&t.addBalloonAnimation(),e.scene.startGame()})),void this.scene.load.start();this.scene.time.delayedCall(100,this.scene.startGame)},t.checkForObjectUsage=function(e,t,i){if(!i.data.layers)return!1;var n,s=!1;return i.data.layers.forEach((function(e){"objects"===e.name&&(n=e)})),!!n&&(n.layers.forEach((function(i){var n;if(i.name!==e)return!1;null==(n=i.objects)||n.forEach((function(e){s||e.type===t&&(s=!0)}))})),s)},t.checkForSymbolUsage=function(e,t){if(!t.data.layers)return!1;var i,n=!1;return t.data.layers.forEach((function(e){"symbol"===e.name&&(i=e)})),!!i&&(i.objects.forEach((function(t){t.name===e&&(n=!0)})),n)},t.checkForOwlUsage=function(e){if(this.scene.textures.exists(g.Z.OWL.KEY))return!1;if(!this.checkForSymbolUsage("owl-trigger",e))return!1;var t=this.scene.cache.json.get(g.Z.OBJ_JSON.KEY),i=g.Z.OBJ_JSON.DATA;return this.scene.load.multiatlas({key:g.Z.OWL.KEY,path:g.Z.OBJ_JSON.PATH,atlasURL:t[i.OWL]}),!0},t.checkForMonkeyUsage=function(e){if(this.scene.textures.exists(g.Z.MONKEY.KEY))return!1;if(!this.checkForSymbolUsage("monkey-trigger",e))return!1;var t=this.scene.cache.json.get(g.Z.OBJ_JSON.KEY),i=g.Z.OBJ_JSON.DATA;return this.scene.load.multiatlas({key:g.Z.MONKEY.KEY,path:g.Z.OBJ_JSON.PATH,atlasURL:t[i.MONKEY]}),!0},t.checkForSpaceshipUsage=function(e){if(this.scene.textures.exists(g.Z.SPACESHIP.KEY))return!1;if(!this.checkForObjectUsage("trap-obj","spaceship",e))return!1;var t=this.scene.cache.json.get(g.Z.OBJ_JSON.KEY),i=g.Z.OBJ_JSON.DATA;return this.scene.load.multiatlas({key:g.Z.SPACESHIP.KEY,path:g.Z.OBJ_JSON.PATH,atlasURL:t[i.SPACESHIP]}),!0},t.checkForCrabUsage=function(e){if(this.scene.textures.exists(g.Z.CRAB.KEY))return!1;if(!this.checkForObjectUsage("trap-obj","crab",e))return!1;var t=this.scene.cache.json.get(g.Z.OBJ_JSON.KEY),i=g.Z.OBJ_JSON.DATA;return this.scene.load.multiatlas({key:g.Z.CRAB.KEY,path:g.Z.OBJ_JSON.PATH,atlasURL:t[i.CRAB]}),!0},t.checkForBalloonUsage=function(e){if(this.scene.textures.exists(g.Z.BALLOON.KEY))return!1;if(!this.checkForObjectUsage("trap-obj","balloon",e))return!1;var t=this.scene.cache.json.get(g.Z.OBJ_JSON.KEY),i=g.Z.OBJ_JSON.DATA;return this.scene.load.multiatlas({key:g.Z.BALLOON.KEY,path:g.Z.OBJ_JSON.PATH,atlasURL:t[i.BALLOON]}),!0},e}(),Ty={HIDE:"hide",READY:"ready",STAND:"stand",FOLLOW:"follow",LOOKING:"looking",DETECTED:"detected",DISSEMBLE:"dissemble"},by=function(e){this.watcher=void 0,this.watcher=e},Ay=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.frame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),Cy=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.frame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),Oy=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.animKey,i=e.status;this.watcher.play(t),this.watcher.setStatus(i)},t}(by),Iy=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.bodyFrame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),wy=Iy,Py=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.frame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),_y=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.frame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),Ry=_y,ky=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.payload=i,n}return(0,a.Z)(t,e),t.prototype.execute=function(){var e=this.payload,t=e.bodyFrame,i=e.status;this.watcher.setFrame(t),this.watcher.setStatus(i)},t}(by),xy=g.Z.WATCHER.FRAME,Ly=function(){function e(e){this.watcher=void 0,this.hideCommand=void 0,this.lookCommand=void 0,this.readyCommand=void 0,this.standCommand=void 0,this.detectCommand=void 0,this.followCommand=void 0,this.dissembleCommand=void 0,this.watcher=e,this.addHideCommand(),this.addLookCommand(),this.addReadyCommand(),this.addStandCommand(),this.addDetectCommand(),this.addFollowCommand(),this.addDissembleCommand()}var t=e.prototype;return t.hide=function(){this.hideCommand.execute()},t.ready=function(){this.readyCommand.execute()},t.stand=function(){this.standCommand.execute()},t.look=function(){this.lookCommand.execute()},t.detect=function(){this.watcher.scene.audio.playSound(ag.Z.WATCHER_DETECTED),this.detectCommand.execute()},t.follow=function(){this.followCommand.execute()},t.dissemble=function(){this.watcher.scene.audio.playSound(ag.Z.WATCHER_NOT_DETECTED),this.dissembleCommand.execute()},t.addHideCommand=function(){this.hideCommand=new wy(this.watcher,{status:Ty.HIDE,bodyFrame:xy.BOY_HEAD_NORMAL})},t.addLookCommand=function(){this.lookCommand=new Py(this.watcher,{status:Ty.LOOKING,frame:xy.BOY_HEAD_EMPTY_FACE})},t.addReadyCommand=function(){this.readyCommand=new Ry(this.watcher,{status:Ty.READY,frame:xy.BOY_HEAD_NORMAL})},t.addStandCommand=function(){this.standCommand=new ky(this.watcher,{status:Ty.STAND,bodyFrame:xy.BOY_HEAD_NORMAL})},t.addDetectCommand=function(){this.detectCommand=new Ay(this.watcher,{status:Ty.DETECTED,frame:xy.BOY_HEAD_DETECTED})},t.addFollowCommand=function(){this.followCommand=new Oy(this.watcher,{status:Ty.FOLLOW,animKey:J.Z.BOY_DETECT.KEY})},t.addDissembleCommand=function(){this.dissembleCommand=new Cy(this.watcher,{status:Ty.DISSEMBLE,frame:xy.BOY_HEAD_MISSING})},e}(),Dy=function(){this.winkDuration=void 0,this.remainingBeamHoldDuration=void 0,this.beamDuration=void 0,this.confuseDuration=void 0,this.fallDuration=void 0,this.lastUsedSightType=void 0,this.winkDuration=0,this.remainingBeamHoldDuration=0,this.beamDuration=0,this.confuseDuration=0,this.fallDuration=0,this.lastUsedSightType=""},By=function(e){function t(t,i,n){var a;return(a=e.call(this,t,0,0,i,n)||this).actions=void 0,a.movingSight=void 0,a.staticSight=void 0,a.newSightAcquired=void 0,a.currentSightData=void 0,a.status=void 0,a.focusPointOffset=void 0,a.playerPosition=void 0,a.cameraBoundLeft=void 0,a.cameraBoundRight=void 0,a.activeCoverList=void 0,a.extraEyePoints=void 0,a.initSprite(),a.initActions(),a.currentSightData=new Dy,a.scene.add.existing((0,s.Z)(a)),a}(0,a.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setDepth(B.Z.WATCHER),this.scene.physics.world.enable(this),this.body.setAllowGravity(!1)},i.initActions=function(){this.actions=new Ly(this)},i.getStatus=function(){return this.status},i.setStatus=function(e){this.status=e},i.isHide=function(){return this.status===Ty.HIDE},i.isReady=function(){return this.status===Ty.READY},i.isStand=function(){return this.status===Ty.STAND},i.isLooking=function(){return this.status===Ty.LOOKING},i.isDetected=function(){return this.status===Ty.DETECTED},i.isFollow=function(){return this.status===Ty.FOLLOW},i.isDissemble=function(){return this.status===Ty.DISSEMBLE},i.getMovingSight=function(){return this.movingSight},i.getStaticSight=function(){return this.staticSight},i.setActiveCovers=function(e){this.activeCoverList=e},i.setPositions=function(e,t,i){this.playerPosition=e,this.cameraBoundLeft=Math.floor(t),this.cameraBoundRight=Math.floor(i)},i.saveRemainingSightTimeAfterGameFail=function(){this.staticSight.isInactive()||(this.currentSightData.remainingBeamHoldDuration=this.staticSight.getRemainingSightTime(),this.currentSightData.lastUsedSightType="static"),this.movingSight.isInactive()||(this.currentSightData.remainingBeamHoldDuration=this.movingSight.getRemainingSightTime(),this.currentSightData.lastUsedSightType="moving")},i.update=function(){if(this.active){var e={x:this.x,y:this.y+this.focusPointOffset};if(this.movingSight.setPositions(this.playerPosition,this.cameraBoundLeft,this.cameraBoundRight,e),this.staticSight.setPositions(this.playerPosition,this.cameraBoundLeft,this.cameraBoundRight,e),this.scene.stateManager.isPlayingState()){var t=this.movingSight.filterLineTween;this.movingSight.getCovers(this.activeCoverList),t&&t.isPaused()&&t.resume(),this.movingSight.update(),t=this.staticSight.filterLineTween,this.staticSight.getCovers(this.activeCoverList),t&&t.isPaused()&&t.resume(),this.staticSight.update()}else{var i=this.movingSight.filterLineTween;i&&i.isPlaying()&&i.pause(),(i=this.staticSight.filterLineTween)&&i.isPlaying()&&i.pause()}}},t}(Phaser.GameObjects.Sprite),Ny=g.Z.WATCHER.FRAME,My=function(e){function t(t){var i;return(i=e.call(this,t)||this).watcher=void 0,i.scene=void 0,i.playOffHandAnimation=function(){var e=i.watcher,t=e.leftHand,n=e.rightHand;t.setDepth(B.Z.WATCHER),n.setDepth(B.Z.WATCHER),i.watcher.scene.add.tween({targets:[t,n],duration:300,props:{y:300}})},i.playPutHandOnTableAnimation=function(){var e=i.watcher,t=e.leftHand,n=e.rightHand;t.setDepth(B.Z.DECOR),n.setDepth(B.Z.DECOR),i.watcher.scene.add.tween({targets:[t,n],duration:500,props:{y:260}})},i.watcher=t,i.scene=i.watcher.scene,i}(0,a.Z)(t,e);var i=t.prototype;return i.hide=function(){e.prototype.hide.call(this),this.initHands(),this.initHead(),this.runHideAnimation(),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),this.watcher.doubtMark.kill(),this.watcher.detectedMark.kill(),this.hideEye()},i.customHide=function(t,i){e.prototype.hide.call(this),this.initHands(),this.initHead(),this.customHideAnimation(t,i),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),this.watcher.doubtMark.kill(),this.watcher.detectedMark.kill(),this.hideEye()},i.runHideAnimation=function(){this.watcher.scene.tweens.killTweensOf(this.watcher);this.watcher.scene.add.tween({targets:this.watcher,duration:800,paused:!1,props:{y:{ease:Phaser.Math.Easing.Cubic.In,value:417}}}),this.playPutHandTableAnimation()},i.customHideAnimation=function(e,t){this.scene.tweens.killTweensOf(this.watcher);var i=e>0?e:1500,n=267+150*(100-t)/100;this.scene.add.tween({targets:this.watcher,duration:i,paused:!1,props:{y:{ease:Phaser.Math.Easing.Cubic.In,value:n}}}),this.playPutHandTableAnimation()},i.playPutHandTableAnimation=function(){var e=this.watcher,t=e.leftHand,i=e.rightHand;this.watcher.scene.tweens.killTweensOf([t,i]),this.watcher.scene.add.tween({targets:[t,i],duration:700,props:{y:250},onComplete:this.playOffHandAnimation})},i.ready=function(){e.prototype.ready.call(this),this.initHands(),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),this.watcher.doubtMark.kill(),this.watcher.detectedMark.kill(),this.hideEye(),this.hide()},i.initHands=function(){var e=this.watcher,t=e.leftHand,i=e.rightHand;t.setFrame(Ny.BOY_HAND_LEFT),t.setOrigin(.5,.5),t.setWorldSize(41,31),t.setDepth(B.Z.DECOR),t.setY(260),t.angle=0,i.setFrame(Ny.BOY_HAND_RIGHT),i.setOrigin(.5,.5),i.setWorldSize(42.5,32.5),i.setDepth(B.Z.DECOR),i.setY(260),i.angle=0},i.initHead=function(){var e=1/this.watcher.scene.world.getPixelRatio();this.watcher.setScale(e)},i.stand=function(t){var i=this;this.watcher.isDetected()||this.watcher.isLooking()||(this.watcher.isStand()?this.runStandAnimation():(this.hideEye(),this.watcher.isHide()&&this.runStandAnimation(),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),e.prototype.stand.call(this),t&&this.addDelayCalled(t,(function(){i.watcher.isStand()&&i.hide()}))))},i.customStand=function(t,i){this.watcher.isDetected()||this.watcher.isLooking()||(this.watcher.isStand()?this.customStandAnimation(t,i):(this.hideEye(),this.watcher.isHide()&&this.customStandAnimation(t,i),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),e.prototype.stand.call(this)))},i.runStandAnimation=function(){this.watcher.scene.tweens.killTweensOf(this.watcher),this.watcher.scene.add.tween({targets:this.watcher,duration:1500,paused:!1,props:{y:{ease:Phaser.Math.Easing.Cubic.Out,value:267}}});var e=this.watcher,t=e.leftHand,i=e.rightHand;t.setDepth(B.Z.WATCHER),i.setDepth(B.Z.WATCHER),this.playRaiseHandAnimation()},i.customStandAnimation=function(e,t){this.scene.tweens.killTweensOf(this.watcher);var i=e>0?e:1500,n=267+150*(100-t)/100;this.scene.add.tween({targets:this.watcher,duration:i,paused:!1,props:{y:{ease:Phaser.Math.Easing.Cubic.Out,value:n}}});var s=this.watcher,a=s.leftHand,r=s.rightHand;a.setDepth(B.Z.WATCHER),r.setDepth(B.Z.WATCHER),this.playRaiseHandAnimation()},i.playRaiseHandAnimation=function(){var e=this.watcher,t=e.leftHand,i=e.rightHand;this.watcher.scene.tweens.killTweensOf([t,i]),this.watcher.scene.add.tween({targets:[t,i],duration:300,props:{y:250},onComplete:this.playPutHandOnTableAnimation})},i.movingSightLook=function(t){var i=this;this.watcher.isLooking()||(this.watcher.isHide()&&this.stand(),e.prototype.look.call(this),this.showEye(),this.watcher.newSightAcquired||(this.watcher.newSightAcquired=!0,this.addDelayCalled(2e3,(function(){i.watcher.newSightAcquired=!1,i.watcher.isLooking()&&(i.scene.audio.playSound(ag.Z.WATCHER_SIGHT,{volume:.5}),i.watcher.movingSight.startSight(t))}))))},i.staticSightLook=function(t){var i=this;this.watcher.isLooking()||(this.watcher.isHide()&&this.stand(),e.prototype.look.call(this),this.showEye(),this.watcher.newSightAcquired||(this.watcher.newSightAcquired=!0,this.addDelayCalled(2e3,(function(){i.watcher.newSightAcquired=!1,i.watcher.isLooking()&&(i.scene.audio.playSound(ag.Z.WATCHER_SIGHT,{volume:.5}),i.watcher.staticSight.startSight(t))}))))},i.customMovingSightLook=function(t,i,n,s,a){var r=this;if(this.watcher.isStand()&&!this.watcher.isLooking()&&(e.prototype.look.call(this),this.showEye(),!this.watcher.newSightAcquired)){this.watcher.newSightAcquired=!0,this.watcher.setFrame(Ny.BOY_HEAD_EMPTY_FACE);var o=this.watcher.currentSightData;o.winkDuration=t,o.remainingBeamHoldDuration=n,o.beamDuration=i,o.fallDuration=a,o.confuseDuration=s,this.addDelayCalled(t,(function(){r.watcher.newSightAcquired=!1,r.watcher.isLooking()&&(r.scene.audio.playSound(ag.Z.WATCHER_SIGHT,{volume:.5}),r.watcher.movingSight.customStartSight(i,n))}))}},i.customStaticSightLook=function(t,i,n,s,a){var r=this;if(this.watcher.isStand()&&!this.watcher.isLooking()&&(e.prototype.look.call(this),this.showEye(),!this.watcher.newSightAcquired)){this.watcher.newSightAcquired=!0,this.watcher.setFrame(Ny.BOY_HEAD_EMPTY_FACE);var o=this.watcher.currentSightData;o.winkDuration=t,o.remainingBeamHoldDuration=n,o.beamDuration=i,o.fallDuration=a,o.confuseDuration=s,this.addDelayCalled(t,(function(){r.watcher.newSightAcquired=!1,r.watcher.isLooking()&&(r.scene.audio.playSound(ag.Z.WATCHER_SIGHT,{volume:.5}),r.watcher.staticSight.customStartSight(i,n))}))}},i.detect=function(){var t=this;this.watcher.isDetected()||(this.hideEye(),this.watcher.saveRemainingSightTimeAfterGameFail(),this.watcher.movingSight.isInactive()||this.watcher.movingSight.immediateSightEnd(),this.watcher.staticSight.isInactive()||this.watcher.staticSight.immediateSightEnd(),this.watcher.detectedMark.revive(),this.addDelayCalled(1500,(function(){t.watcher.detectedMark.kill()})),e.prototype.detect.call(this),this.runDetectAnimation())},i.runDetectAnimation=function(){this.initDetectHands(),this.playHandUpAnimation()},i.initDetectHands=function(){var e=this.watcher,t=e.leftHand,i=e.rightHand;t.setFrame(Ny.BOY_HAND_UP_LEFT),t.setDepth(B.Z.WATCHER),t.setY(240),t.setOrigin(.8,.5),t.setWorldSize(101,100),t.angle=-20,i.setFrame(Ny.BOY_HAND_UP_RIGHT),i.setDepth(B.Z.WATCHER),i.setY(240),i.setOrigin(.2,.5),i.setWorldSize(101,100),i.angle=20},i.playHandUpAnimation=function(){var e=1/this.watcher.scene.world.getPixelRatio(),t=this.watcher,i=t.leftHand,n=t.rightHand,s=i.y;this.watcher.scene.tweens.killTweensOf([i,n]),this.watcher.scene.add.tween({targets:[i,n],duration:200,props:{y:{ease:Phaser.Math.Easing.Bounce.In,getStart:function(){return s},getEnd:function(){return s-20}},scaleY:{getStart:function(){return e},getEnd:function(){return.8*e}},angle:{getEnd:function(){return 0}}},yoyo:!0}),this.watcher.scene.add.tween({targets:[this.watcher],duration:200,props:{scaleY:{getStart:function(){return e},getEnd:function(){return.9*e}}},yoyo:!0})},i.follow=function(){this.watcher.isFollow()||e.prototype.follow.call(this)},i.destroySight=function(){this.watcher.movingSight.setSightStatusWithoutChangeState(),this.watcher.staticSight.setSightStatusWithoutChangeState(),this.watcher.movingSight.update(),this.watcher.staticSight.update()},i.dissemble=function(){var t=this;this.watcher.isDissemble()||(e.prototype.dissemble.call(this),this.hideEye(),this.watcher.doubtMark.revive(),this.addDelayCalled(1500,(function(){t.watcher.doubtMark.kill(),t.watcher.newSightAcquired||t.watcher.actions.hide()})))},i.customDissemble=function(t,i){var n=this;this.watcher.isDissemble()||(e.prototype.dissemble.call(this),this.hideEye(),this.watcher.doubtMark.revive(),this.addDelayCalled(t,(function(){n.watcher.doubtMark.kill(),n.watcher.newSightAcquired||(-1e3==i?e.prototype.stand.call(n):n.customHide(i,0))})))},i.addDelayCalled=function(e,t){this.watcher.scene.time.delayedCall(e,t)},i.showEye=function(){this.watcher.leftIris.revive(),this.watcher.rightIris.revive(),this.watcher.leftEye.revive(),this.watcher.rightEye.revive()},i.hideEye=function(){this.watcher.leftIris.kill(),this.watcher.rightIris.kill(),this.watcher.leftEye.kill(),this.watcher.rightEye.kill()},t}(Ly),Zy={CREATED:"created",INACTIVE:"inactive",SIGHT_START:"sight_start",SIGHT_SWEEP_LEFT:"sight_sweep_left",SIGHT_SWEEP_RIGHT:"sight_sweep_right"},Gy={GROUND_POSITION_Y:495},Fy=i(48),Uy=i.n(Fy),Hy=function(e){function t(t){var i;return(i=e.call(this,t.scene,t.options)||this).path=void 0,i.setDepth(B.Z.SIGHT),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.setNewSightPolygon=function(e){this.path=e,0!=this.path.length?this.draw():this.clear()},i.killSightGraphics=function(){this.clear(),this.kill()},i.reviveSightGraphics=function(){this.clear(),this.revive()},i.draw=function(){this.clear(),this.lineStyle(1,16777215,0),this.fillStyle(16776589,.4),this.beginPath(),this.moveTo(this.path[0].x,this.path[0].y);for(var e=1;e<this.path.length;e++)this.lineTo(this.path[e].x,this.path[e].y);this.closePath(),this.strokePath(),Uy()(this).call(this)},t}(Phaser.GameObjects.Graphics),jy=function(){function e(e){this.originalBlockLines=void 0,this.groupedBlockLines=void 0,this.originalBlockLines=e,this.groupedBlockLines=[],this.handleOverlappingBlockLines()}var t=e.prototype;return t.getIntersectionFromEdge=function(e){for(var t=null,i=-1,n=0;n<this.groupedBlockLines.length;n++){var s=this.groupedBlockLines[n];if(Phaser.Geom.Intersects.LineToLine(s,e)){var a=Phaser.Geom.Intersects.GetLineToLine(s,e);(!t||a.y>t.y)&&(t=new Phaser.Geom.Point(a.x,a.y),i=n)}}return t?{intersection:t,blockLineID:i}:null},t.getMostLeftPoint=function(){return this.groupedBlockLines[0].getPoint(0)},t.getMostRightPoint=function(){var e=this.groupedBlockLines.length;return this.groupedBlockLines[e-1].getPoint(1)},t.isIntersectedWithSightPolygon=function(e){var t=this.groupedBlockLines.length,i=e.polygon,n=e.leftEdge,s=this.groupedBlockLines[0],a=this.groupedBlockLines[t-1],r=Phaser.Geom.Intersects.GetLineToPolygon(s,i),o=Phaser.Geom.Intersects.GetLineToPolygon(a,i);if(!r&&!o)return!1;var c=Phaser.Geom.Intersects.GetLineToLine(s,n);return!(c&&c.x>a.x2)},t.getPointListWithinRange=function(e,t){var i=[],n=0,s=this.groupedBlockLines.length-1;if(e){var a=e.blockLineID,r=e.intersection,o=this.groupedBlockLines[a];n=a+1,i.push(r),i.push(o.getPoint(1))}t&&(s=t.blockLineID);for(var c=n;c<s;c++){var h=this.groupedBlockLines[c];i.push(h.getPoint(0)),i.push(h.getPoint(1))}if(t){var u=t.blockLineID,l=t.intersection,d=this.groupedBlockLines[u];i.push(d.getPoint(0)),i.push(l)}else{var p=this.groupedBlockLines.length,f=this.groupedBlockLines[p-1];i.push(f.getPoint(0)),i.push(f.getPoint(1))}return i},t.handleOverlappingBlockLines=function(){for(var e=!1,t=null,i=0;i<this.originalBlockLines.length;i++){var n=this.originalBlockLines[i],s=i+1<this.originalBlockLines.length?this.originalBlockLines[i+1]:null;if(s){var a=Phaser.Geom.Intersects.GetLineToLine(n,s);a?(e&&t?this.groupedBlockLines.push(new Phaser.Geom.Line(t.x,t.y,a.x,a.y)):this.groupedBlockLines.push(new Phaser.Geom.Line(n.x1,n.y1,a.x,a.y)),e=!0,t=new Phaser.Geom.Point(a.x,a.y)):e&&t?this.groupedBlockLines.push(new Phaser.Geom.Line(t.x,t.y,n.x2,n.y2)):this.groupedBlockLines.push(n)}else e&&t?this.groupedBlockLines.push(new Phaser.Geom.Line(t.x,t.y,n.x2,n.y2)):this.groupedBlockLines.push(n)}},t.findGroundIntersection=function(e,t,i){var n=i.filterLine,s=i.leftBottomPoint,a=i.rightBottomPoint,r=i.focusPoint,o=r.x,c=r.y,h=n.getPoint(0);if(o===e)return new Phaser.Geom.Point(e,h.y);var u=(c-t)/(o-e),l=c-u*o,d=(h.y-l)/u;return d>a.x&&(d=a.x),d<s.x&&(d=s.x),new Phaser.Geom.Point(d,h.y)},t.getSightPolygonIntersection=function(e){var t=e.leftEdge,i=e.rightEdge,n=e.filterLine,s={leftEdgeBlocked:!1,rightEdgeBlocked:!1,overlapLeftPoint:!1,overlapRightPoint:!1,leftEdgeIntersectionData:null,rightEdgeIntersectionData:null,pointListOutput:[],horizontalLinesOutput:[]},a=this.getIntersectionFromEdge(t);a&&(s.leftEdgeBlocked=!0);var r=this.getIntersectionFromEdge(i);r&&(s.rightEdgeBlocked=!0),s.leftEdgeIntersectionData=a,s.rightEdgeIntersectionData=r;var o=s.leftEdgeBlocked,c=s.rightEdgeBlocked,u=s.leftEdgeIntersectionData,l=s.rightEdgeIntersectionData,d=this.getMostLeftPoint(),p=this.getMostRightPoint();if(!o&&!c){var f,g=this.findGroundIntersection(d.x,d.y,e);g.x>d.x&&(g.x=d.x),g.x==n.x1&&(s.overlapLeftPoint=!0),s.pointListOutput.push(g);var m=this.getPointListWithinRange(u,l),v=h()(f=s.pointListOutput).call(f,m);s.pointListOutput=v;var y=this.findGroundIntersection(p.x,p.y,e);y.x<p.x&&(y.x=p.x),y.x==n.x2&&(s.overlapRightPoint=!0),s.pointListOutput.push(y),s.horizontalLinesOutput.push(new Phaser.Geom.Line(d.x,d.y,g.x,g.y)),s.horizontalLinesOutput.push(new Phaser.Geom.Line(p.x,p.y,y.x,y.y))}if(o&&!c){var E,S=this.getPointListWithinRange(u,l),T=h()(E=s.pointListOutput).call(E,S);s.pointListOutput=T;var b=this.findGroundIntersection(p.x,p.y,e);b.x<p.x&&(b.x=p.x),b.x==n.x2&&(s.overlapRightPoint=!0),s.pointListOutput.push(b),s.horizontalLinesOutput.push(new Phaser.Geom.Line(p.x,p.y,b.x,b.y))}if(!o&&c){var A,C=this.findGroundIntersection(d.x,d.y,e);C.x>d.x&&(C.x=d.x),C.x==n.x1&&(s.overlapLeftPoint=!0),s.pointListOutput.push(C);var O=this.getPointListWithinRange(u,l),I=h()(A=s.pointListOutput).call(A,O);s.pointListOutput=I,s.horizontalLinesOutput.push(new Phaser.Geom.Line(d.x,d.y,C.x,C.y))}if(o&&c){var w,P=this.getPointListWithinRange(u,l),_=h()(w=s.pointListOutput).call(w,P);s.pointListOutput=_}return s},e}(),Yy=jy,Ky=function(){function e(e){this.blockLine=void 0,this.blockLine=e}var t=e.prototype;return t.isIntersectedWithSightPolygon=function(e){var t=e.polygon,i=e.leftEdge;if(!Phaser.Geom.Intersects.GetLineToPolygon(this.blockLine,t))return!1;var n=Phaser.Geom.Intersects.GetLineToLine(this.blockLine,i);return!(n&&n.x>this.blockLine.x2)},t.findGroundIntersection=function(e,t,i){var n=i.filterLine,s=i.leftBottomPoint,a=i.rightBottomPoint,r=i.focusPoint,o=r.x,c=r.y,h=n.getPoint(0);if(o===e)return new Phaser.Geom.Point(e,h.y);var u=(c-t)/(o-e),l=c-u*o,d=(h.y-l)/u;return d>a.x&&(d=a.x),d<s.x&&(d=s.x),new Phaser.Geom.Point(d,h.y)},t.getSightPolygonIntersection=function(e){var t=e.leftEdge,i=e.rightEdge,n=e.filterLine,s={leftEdgeBlocked:!1,rightEdgeBlocked:!1,overlapLeftPoint:!1,overlapRightPoint:!1,leftEdgeIntersectionData:null,rightEdgeIntersectionData:null,pointListOutput:[],horizontalLinesOutput:[]};if(Phaser.Geom.Intersects.LineToLine(this.blockLine,t)){s.leftEdgeBlocked=!0;var a=Phaser.Geom.Intersects.GetLineToLine(this.blockLine,t);s.leftEdgeIntersectionData=new Phaser.Geom.Point(a.x,a.y)}if(Phaser.Geom.Intersects.LineToLine(this.blockLine,i)){s.rightEdgeBlocked=!0;var r=Phaser.Geom.Intersects.GetLineToLine(this.blockLine,i);s.rightEdgeIntersectionData=new Phaser.Geom.Point(r.x,r.y)}var o=s.leftEdgeBlocked,c=s.rightEdgeBlocked,h=s.leftEdgeIntersectionData,u=s.rightEdgeIntersectionData,l=this.blockLine.getPoint(0),d=this.blockLine.getPoint(1);if(!o&&!c){var p=this.findGroundIntersection(l.x,l.y,e);p.x>l.x&&(p.x=l.x),p.x==n.x1&&(s.overlapLeftPoint=!0),s.pointListOutput.push(p),s.pointListOutput.push(l),s.pointListOutput.push(d);var f=this.findGroundIntersection(d.x,d.y,e);f.x<d.x&&(f.x=d.x),f.x==n.x2&&(s.overlapRightPoint=!0),s.pointListOutput.push(f),s.horizontalLinesOutput.push(new Phaser.Geom.Line(l.x,l.y,p.x,p.y)),s.horizontalLinesOutput.push(new Phaser.Geom.Line(d.x,d.y,f.x,f.y))}if(o&&!c){h&&s.pointListOutput.push(h),s.pointListOutput.push(d);var g=this.findGroundIntersection(d.x,d.y,e);g.x<d.x&&(g.x=d.x),g.x==n.x2&&(s.overlapRightPoint=!0),s.pointListOutput.push(g),s.horizontalLinesOutput.push(new Phaser.Geom.Line(d.x,d.y,g.x,g.y))}if(!o&&c){var m=this.findGroundIntersection(l.x,l.y,e);m.x>l.x&&(m.x=l.x),m.x==n.x1&&(s.overlapLeftPoint=!0),s.pointListOutput.push(m),s.pointListOutput.push(l),u&&s.pointListOutput.push(u),s.horizontalLinesOutput.push(new Phaser.Geom.Line(l.x,l.y,m.x,m.y))}return o&&c&&(h&&s.pointListOutput.push(h),u&&s.pointListOutput.push(u)),s},e}(),Wy=function(){function e(e){this.currentScene=void 0,this.eyeWidth=void 0,this.customBeamDuration=void 0,this.extraEyePoints=void 0,this.status=void 0,this.leftEyePoint=void 0,this.rightEyePoint=void 0,this.leftGroundPoint=void 0,this.rightGroundPoint=void 0,this.leftFilterPoint=void 0,this.rightFilterPoint=void 0,this.focusPoint=void 0,this.watcherFocusPoint=void 0,this.filterLineTween=void 0,this.filterLine=void 0,this.groundLine=void 0,this.leftEdge=void 0,this.rightEdge=void 0,this.sightPolygon=void 0,this.sightObject=void 0,this.playerPosition=void 0,this.cameraBoundLeft=void 0,this.cameraBoundRight=void 0,this.isSightActive=void 0,this.watcherObjectTouched=void 0,this.activeCovers=void 0,this.horizontalPolygonLines=void 0,this.polygonLinesCallback=void 0,this.activeSightDuration=void 0,this.currentSightCountdown=void 0,this.currentScene=e,this.horizontalPolygonLines=[],this.extraEyePoints=[],this.status=Zy.CREATED,this.isSightActive=!1,this.currentSightCountdown=0,this.activeSightDuration=200,this.watcherObjectTouched=!1,this.customBeamDuration=0}var t=e.prototype;return t.setConstants=function(e,t){this.eyeWidth=e,t&&(this.extraEyePoints=t)},t.setPositions=function(e,t,i,n){this.playerPosition=e,this.cameraBoundLeft=Math.floor(t),this.cameraBoundRight=Math.floor(i),this.watcherFocusPoint=n,this.isCreated()&&this.cameraBoundLeft>0&&this.cameraBoundRight>0&&this.initSight()},t.getCovers=function(e){this.activeCovers=e},t.getFilterLine=function(){return this.filterLine},t.isCreated=function(){return this.status===Zy.CREATED},t.isInactive=function(){return this.status===Zy.INACTIVE},t.isSightStart=function(){return this.status===Zy.SIGHT_START},t.isSightSweepLeft=function(){return this.status===Zy.SIGHT_SWEEP_LEFT},t.isSightSweepRight=function(){return this.status===Zy.SIGHT_SWEEP_RIGHT},t.initSight=function(){this.focusPoint=new Phaser.Geom.Point(this.watcherFocusPoint.x,this.watcherFocusPoint.y),this.leftEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x-this.eyeWidth/2),this.focusPoint.y),this.rightEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x+this.eyeWidth/2),this.focusPoint.y),this.leftGroundPoint=new Phaser.Geom.Point(this.cameraBoundLeft,Gy.GROUND_POSITION_Y),this.rightGroundPoint=new Phaser.Geom.Point(this.cameraBoundRight,Gy.GROUND_POSITION_Y),this.leftFilterPoint=new Phaser.Geom.Point(this.cameraBoundLeft-100,this.focusPoint.y+5),this.rightFilterPoint=new Phaser.Geom.Point(this.cameraBoundRight+100,this.focusPoint.y+5),this.groundLine=new Phaser.Geom.Line(this.leftGroundPoint.x,this.leftGroundPoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.leftEdge=new Phaser.Geom.Line(this.leftEyePoint.x,this.leftEyePoint.y,this.leftGroundPoint.x,this.leftGroundPoint.y),this.rightEdge=new Phaser.Geom.Line(this.rightEyePoint.x,this.rightEyePoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.filterLine=new Phaser.Geom.Line(this.leftFilterPoint.x,this.leftFilterPoint.y,this.rightFilterPoint.x,this.rightFilterPoint.y),this.sightPolygon=new Phaser.Geom.Polygon([this.leftEyePoint,this.leftGroundPoint,this.rightGroundPoint,this.rightEyePoint]),this.sightObject=new Hy({scene:this.currentScene}),this.status=Zy.INACTIVE},t.updateSightPoints=function(){this.focusPoint.setTo(this.watcherFocusPoint.x,this.watcherFocusPoint.y),this.leftEyePoint.setTo(Math.floor(this.focusPoint.x-this.eyeWidth/2),this.focusPoint.y),this.rightEyePoint.setTo(Math.floor(this.focusPoint.x+this.eyeWidth/2),this.focusPoint.y),this.rightGroundPoint.setTo(this.cameraBoundRight,Gy.GROUND_POSITION_Y),this.leftGroundPoint.setTo(this.cameraBoundLeft,Gy.GROUND_POSITION_Y),this.leftFilterPoint.x=this.cameraBoundLeft-2,this.rightFilterPoint.x=this.cameraBoundRight+2,this.filterLine.setTo(this.leftFilterPoint.x,this.leftFilterPoint.y,this.rightFilterPoint.x,this.rightFilterPoint.y),this.groundLine.setTo(this.leftGroundPoint.x,this.leftGroundPoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.leftEdge.setTo(this.leftEyePoint.x,this.leftEyePoint.y,this.leftGroundPoint.x,this.leftGroundPoint.y),this.rightEdge.setTo(this.rightEyePoint.x,this.rightEyePoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y)},t.updateSightPolygon=function(){var e=[this.leftEyePoint,this.leftGroundPoint,this.rightGroundPoint,this.rightEyePoint];this.sightPolygon.setTo(e)},t.resetFilterPoints=function(){this.leftFilterPoint.setTo(this.cameraBoundLeft-2,this.focusPoint.y+5),this.rightFilterPoint.setTo(this.cameraBoundRight+2,this.focusPoint.y+5)},t.startFilterLineTween=function(){var e=this;this.resetFilterPoints();var t=this.customBeamDuration>0?this.customBeamDuration:1083;this.filterLineTween=this.currentScene.add.tween({targets:[this.leftFilterPoint,this.rightFilterPoint],duration:t,y:Gy.GROUND_POSITION_Y,ease:Phaser.Math.Easing.Cubic.In,onStart:function(){e.status=Zy.SIGHT_START},onComplete:function(){e.status=Zy.SIGHT_SWEEP_LEFT}}),this.customBeamDuration=0},t.endFilterLineTween=function(){this.filterLineTween&&this.filterLineTween.stop()},t.update=function(){this.isCreated()||(!this.isInactive()||this.watcherObjectTouched?(this.sightObject.reviveSightGraphics(),this.horizontalPolygonLines=[],this.setSightStatus(),this.updateSightPoints(),this.updateSightPolygon(),this.drawSightGraphics()):this.sightObject.visible&&this.sightObject.killSightGraphics())},t.calculateShade=function(){if(!this.isCreated()){var e,t=!1,i=!1,n=!1,s=!1,a=[],r=[],o=Phaser.Geom.Intersects.GetLineToLine(this.filterLine,this.leftEdge);e=o?new Phaser.Geom.Point(o.x,o.y):this.leftFilterPoint.y>this.focusPoint.y?this.leftGroundPoint:this.leftEyePoint;var c,u=Phaser.Geom.Intersects.GetLineToLine(this.filterLine,this.rightEdge);c=u?new Phaser.Geom.Point(u.x,u.y):this.rightFilterPoint.y>this.focusPoint.y?this.rightGroundPoint:this.rightEyePoint;for(var l=0;l<this.activeCovers.length;l++){(this.activeCovers[l].y1<=this.activeCovers[l].y2?this.activeCovers[l].y1:this.activeCovers[l].y2)<this.filterLine.y1&&r.push(this.activeCovers[l])}for(var d=this.handleBlockLineList(r),p={polygon:this.sightPolygon,leftEdge:this.leftEdge,rightEdge:this.rightEdge,filterLine:this.filterLine,focusPoint:this.focusPoint,leftBottomPoint:e,rightBottomPoint:c},f=0;f<d.length;f++){var g,m=d[f];if(m.isIntersectedWithSightPolygon(p)){var v=m.getSightPolygonIntersection(p),y=v.leftEdgeBlocked,E=v.rightEdgeBlocked,S=v.overlapLeftPoint,T=v.overlapRightPoint,b=v.pointListOutput,A=v.horizontalLinesOutput;t=y||t,n=E||n,i=S||i,s=T||s,a=h()(a).call(a,b),this.horizontalPolygonLines=h()(g=this.horizontalPolygonLines).call(g,A)}}var C=[this.leftEyePoint];if(t||i||C.push(e),C=h()(C).call(C,a),n||s||C.push(c),C.push(this.rightEyePoint),C=h()(C).call(C,this.addExtraSightPoints()),!t){var O=new Phaser.Geom.Line(this.leftEyePoint.x,this.leftEyePoint.y,e.x,e.y);this.horizontalPolygonLines.push(O)}if(!n){var I=new Phaser.Geom.Line(this.rightEyePoint.x,this.rightEyePoint.y,c.x,c.y);this.horizontalPolygonLines.push(I)}return this.removeIllegalSightPoints(C),C}},t.removeIllegalSightPoints=function(e){var t=this,i=[];e.forEach((function(n,s){if(n.y==t.leftFilterPoint.y&&!(s+1>=e.length)){var a=e[s+1];a.y!=t.leftFilterPoint.y||a.x>n.x||i.push(s)}})),0!=i.length&&(p()(i).call(i,(function(e,t){return t-e})),i.forEach((function(t){vy()(e).call(e,t,1)})))},t.handleBlockLineList=function(e){for(var t=e.length,i=[],n=!1,s=[],a=0;a<t;a++){var r=e[a],o=a<t-1?e[a+1]:null;n?(s.push(r),(!o||r.x2+3<o.x1)&&(i.push(new Yy(s)),s=[],n=!1)):!o||r.x2+3<o.x1?i.push(new Ky(r)):(s.push(r),n=!0)}return i},t.drawSightGraphics=function(){var e=[];if(this.isSightActive){var t=this.calculateShade();e=t||[]}this.sightObject.setNewSightPolygon(e)},t.setSightStatus=function(){this.watcherObjectTouched&&(this.isSightSweepLeft()&&this.currentSightCountdown++,this.isSightActive&&this.currentSightCountdown>=this.activeSightDuration&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.sightObject.killSightGraphics(),this.currentSightCountdown=0,this.endFilterLineTween()))},t.setSightStatusWithoutChangeState=function(){this.isSightActive&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.sightObject.killSightGraphics(),this.currentSightCountdown=0,this.endFilterLineTween())},t.immediateSightEnd=function(){this.currentSightCountdown=this.activeSightDuration},t.startSight=function(e){this.activeSightDuration=e>0?e:200,this.watcherObjectTouched=!0,this.isSightActive=!0,this.currentSightCountdown=0,this.startFilterLineTween()},t.customStartSight=function(e,t){this.customBeamDuration=e,this.activeSightDuration=t>0?t:200,this.watcherObjectTouched=!0,this.isSightActive=!0,this.currentSightCountdown=0,this.startFilterLineTween()},t.getSightObjectDebug=function(){},t.getSightLines=function(){return this.horizontalPolygonLines},t.getSightStatus=function(){return this.isSightActive},t.getRemainingSightTime=function(){return this.activeSightDuration-this.currentSightCountdown},t.addExtraSightPoints=function(){return[]},e}(),Vy=function(){function e(e){this.scene=void 0,this.currentSoundPlaying=void 0,this.currentSoundStatus=void 0,this.scene=e,this.currentSoundPlaying="",this.currentSoundStatus=""}var t=e.prototype;return t.playSound=function(e,t,i){this.currentSoundStatus!==e&&(this.scene.audio.stopSound(this.currentSoundPlaying),this.scene.audio.playSound(t,i),this.currentSoundPlaying=t,this.currentSoundStatus=e)},t.stopSound=function(){""!==this.currentSoundPlaying&&(this.scene.audio.stopSound(this.currentSoundPlaying),this.currentSoundPlaying="",this.currentSoundStatus="")},e}(),zy=75,Xy=function(e){function t(t){var i;return(i=e.call(this,t)||this).sightSpeed=void 0,i.sweepDistanceLimit=void 0,i.sightSweepPauseCountdown=void 0,i.debug=void 0,i.lazeSound=void 0,i.sightSpeed=525,i.sweepDistanceLimit=500,i.sightSweepPauseCountdown=zy,i.activeSightDuration=180,i.lazeSound=new Vy(i.currentScene),i}(0,a.Z)(t,e);var i=t.prototype;return i.initSight=function(){this.focusPoint=new Phaser.Geom.Point(this.watcherFocusPoint.x,this.watcherFocusPoint.y),this.leftEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x-this.eyeWidth/2),this.focusPoint.y),this.rightEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x+this.eyeWidth/2),this.focusPoint.y),this.leftGroundPoint=new Phaser.Geom.Point(this.cameraBoundLeft+this.sweepDistanceLimit,Gy.GROUND_POSITION_Y),this.rightGroundPoint=new Phaser.Geom.Point(this.cameraBoundRight+this.sweepDistanceLimit,Gy.GROUND_POSITION_Y),this.leftFilterPoint=new Phaser.Geom.Point(this.cameraBoundLeft-this.sweepDistanceLimit-100,this.focusPoint.y+2),this.rightFilterPoint=new Phaser.Geom.Point(this.cameraBoundRight+this.sweepDistanceLimit+100,this.focusPoint.y+2),this.groundLine=new Phaser.Geom.Line(this.leftGroundPoint.x,this.leftGroundPoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.filterLine=new Phaser.Geom.Line(this.leftFilterPoint.x,this.leftFilterPoint.y,this.rightFilterPoint.x,this.rightFilterPoint.y),this.leftEdge=new Phaser.Geom.Line(this.leftEyePoint.x,this.leftEyePoint.y,this.leftGroundPoint.x,this.leftGroundPoint.y),this.rightEdge=new Phaser.Geom.Line(this.rightEyePoint.x,this.rightEyePoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.sightPolygon=new Phaser.Geom.Polygon([this.leftEyePoint,this.leftGroundPoint,this.rightGroundPoint,this.rightEyePoint]),this.sightObject=new Hy({scene:this.currentScene}),this.status=Zy.INACTIVE},i.updateSightPoints=function(){var e=this.currentScene.game.loop.delta,t=void 0===e?0:e;if(this.focusPoint=new Phaser.Geom.Point(this.watcherFocusPoint.x,this.watcherFocusPoint.y),this.leftEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x-this.eyeWidth/2),this.focusPoint.y),this.rightEyePoint=new Phaser.Geom.Point(Math.floor(this.focusPoint.x+this.eyeWidth/2),this.focusPoint.y),this.isSightStart())this.resetGroundPoints();else if(this.isSightSweepLeft()||this.isSightSweepRight()){var i=this.isSightSweepLeft()&&this.leftGroundPoint.x>=this.cameraBoundLeft-this.sweepDistanceLimit,n=this.isSightSweepRight()&&this.rightGroundPoint.x<=this.cameraBoundRight+this.sweepDistanceLimit,s=this.isSightSweepRight()&&this.rightGroundPoint.x>this.cameraBoundRight+this.sweepDistanceLimit,a=this.isSightSweepLeft()&&this.leftGroundPoint.x<this.cameraBoundLeft-this.sweepDistanceLimit;if(this.isSightStart()&&(this.status=Zy.SIGHT_SWEEP_LEFT),a&&(0==this.sightSweepPauseCountdown?(this.status=Zy.SIGHT_SWEEP_RIGHT,this.sightSweepPauseCountdown=zy):this.sightSweepPauseCountdown--),s&&(0==this.sightSweepPauseCountdown?(this.status=Zy.SIGHT_SWEEP_LEFT,this.sightSweepPauseCountdown=zy):this.sightSweepPauseCountdown--),i){var r=this.rightGroundPoint.x,o=this.sightSpeed/1e3*t;this.rightGroundPoint.setTo(r-o,Gy.GROUND_POSITION_Y),r=this.leftGroundPoint.x,this.leftGroundPoint.setTo(r-o,Gy.GROUND_POSITION_Y),r=this.leftFilterPoint.x,this.leftFilterPoint.setTo(r-o,Gy.GROUND_POSITION_Y),r=this.rightFilterPoint.x,this.rightFilterPoint.setTo(r-o,Gy.GROUND_POSITION_Y),this.status=Zy.SIGHT_SWEEP_LEFT}if(n){var c=this.rightGroundPoint.x,h=this.sightSpeed/1e3*t;this.rightGroundPoint.setTo(c+h,Gy.GROUND_POSITION_Y),c=this.leftGroundPoint.x,this.leftGroundPoint.setTo(c+h,Gy.GROUND_POSITION_Y),c=this.leftFilterPoint.x,this.leftFilterPoint.setTo(c+h,Gy.GROUND_POSITION_Y),c=this.rightFilterPoint.x,this.rightFilterPoint.setTo(c+h,Gy.GROUND_POSITION_Y),this.status=Zy.SIGHT_SWEEP_RIGHT}}this.filterLine.setTo(this.leftFilterPoint.x,this.leftFilterPoint.y,this.rightFilterPoint.x,this.rightFilterPoint.y),this.groundLine.setTo(this.leftGroundPoint.x,this.leftGroundPoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y),this.leftEdge.setTo(this.leftEyePoint.x,this.leftEyePoint.y,this.leftGroundPoint.x,this.leftGroundPoint.y),this.rightEdge.setTo(this.rightEyePoint.x,this.rightEyePoint.y,this.rightGroundPoint.x,this.rightGroundPoint.y)},i.resetFilterPoints=function(){this.leftFilterPoint.setTo(this.cameraBoundLeft-this.sweepDistanceLimit-2,this.focusPoint.y+5),this.rightFilterPoint.setTo(this.cameraBoundRight+this.sweepDistanceLimit+2,this.focusPoint.y+5)},i.resetGroundPoints=function(){this.rightGroundPoint.setTo(this.cameraBoundRight+this.sweepDistanceLimit,Gy.GROUND_POSITION_Y),this.leftGroundPoint.setTo(this.cameraBoundLeft+this.sweepDistanceLimit,Gy.GROUND_POSITION_Y)},i.startSight=function(e){this.resetGroundPoints(),this.activeSightDuration=e>0?e:180,this.watcherObjectTouched=!0,this.isSightActive=!0,this.currentSightCountdown=0,this.startFilterLineTween()},i.customStartSight=function(e,t){this.resetGroundPoints(),this.customBeamDuration=e,this.activeSightDuration=t>0?t:180,this.watcherObjectTouched=!0,this.isSightActive=!0,this.currentSightCountdown=0,this.startFilterLineTween()},i.getSightSpeed=function(){return this.sightSpeed},i.setSightStatus=function(){this.watcherObjectTouched&&((this.isSightSweepLeft()||this.isSightSweepPause()||this.isSightSweepRight())&&this.currentSightCountdown++,this.isSightActive&&this.currentSightCountdown>=this.activeSightDuration&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.resetGroundPoints(),this.currentSightCountdown=0,this.sightSweepPauseCountdown=zy,this.endFilterLineTween()))},i.setSightStatusWithoutChangeState=function(){this.isSightActive&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.resetGroundPoints(),this.currentSightCountdown=0,this.sightSweepPauseCountdown=zy,this.endFilterLineTween())},i.immediateSightEnd=function(){e.prototype.immediateSightEnd.call(this),this.sightSweepPauseCountdown=zy},i.isSightSweepPause=function(){return this.sightSweepPauseCountdown<zy},t}(Wy),Jy=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).onSightEndCallback=void 0,n.onSightEndCallback=i,n}(0,a.Z)(t,e);var i=t.prototype;return i.setSightStatus=function(){this.watcherObjectTouched&&((this.isSightSweepLeft()||this.isSightSweepPause()||this.isSightSweepRight())&&this.currentSightCountdown++,this.isSightActive&&this.currentSightCountdown>=this.activeSightDuration&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.resetGroundPoints(),this.currentSightCountdown=0,this.sightSweepPauseCountdown=75,this.endFilterLineTween(),this.onSightEndCallback()))},i.addExtraSightPoints=function(){var e,t=this.extraEyePoints[0].x?this.extraEyePoints[0].x:0,i=this.extraEyePoints[0].y?this.extraEyePoints[0].y:0,n=this.extraEyePoints[1].x?this.extraEyePoints[1].x:0,s=this.extraEyePoints[1].y?this.extraEyePoints[1].y:0,a=new Phaser.Geom.Point(this.focusPoint.x+t,this.focusPoint.y+i),r=new Phaser.Geom.Point(this.focusPoint.x+n,this.focusPoint.y+s),o=new Phaser.Geom.Line(a.x,a.y,this.rightGroundPoint.x,this.rightGroundPoint.y),c=new Phaser.Geom.Line(r.x,r.y,this.leftGroundPoint.x,this.leftGroundPoint.y);e=Phaser.Geom.Intersects.GetLineToLine(o,c)?Phaser.Geom.Intersects.GetLineToLine(o,c):Phaser.Geom.Intersects.GetLineToLine(c,o);var h=new Phaser.Geom.Point(e.x,e.y),u=Phaser.Geom.Intersects.GetLineToLine(o,this.filterLine),l=Phaser.Geom.Intersects.GetLineToLine(c,this.filterLine);if(this.filterLine.y1<e.y&&u&&l){var d=new Phaser.Geom.Point(u.x,u.y-1);return[r,new Phaser.Geom.Point(l.x,l.y-1),d,a]}return[r,h,a]},t}(Xy),qy=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).onSightEndCallback=void 0,n.onSightEndCallback=i,n}(0,a.Z)(t,e);var i=t.prototype;return i.setSightStatus=function(){this.watcherObjectTouched&&(this.isSightSweepLeft()&&this.currentSightCountdown++,this.isSightActive&&this.currentSightCountdown>=this.activeSightDuration&&(this.isSightActive=!1,this.watcherObjectTouched=!1,this.status=Zy.INACTIVE,this.resetFilterPoints(),this.sightObject.killSightGraphics(),this.currentSightCountdown=0,this.endFilterLineTween(),this.onSightEndCallback()))},i.addExtraSightPoints=function(){var e,t=this.extraEyePoints[0].x?this.extraEyePoints[0].x:0,i=this.extraEyePoints[0].y?this.extraEyePoints[0].y:0,n=this.extraEyePoints[1].x?this.extraEyePoints[1].x:0,s=this.extraEyePoints[1].y?this.extraEyePoints[1].y:0,a=new Phaser.Geom.Point(this.focusPoint.x+t,this.focusPoint.y+i),r=new Phaser.Geom.Point(this.focusPoint.x+n,this.focusPoint.y+s),o=new Phaser.Geom.Line(a.x,a.y,this.rightGroundPoint.x,this.rightGroundPoint.y),c=new Phaser.Geom.Line(r.x,r.y,this.leftGroundPoint.x,this.leftGroundPoint.y);e=Phaser.Geom.Intersects.GetLineToLine(o,c)?Phaser.Geom.Intersects.GetLineToLine(o,c):Phaser.Geom.Intersects.GetLineToLine(c,o);var h=new Phaser.Geom.Point(e.x,e.y),u=Phaser.Geom.Intersects.GetLineToLine(o,this.filterLine),l=Phaser.Geom.Intersects.GetLineToLine(c,this.filterLine);if(this.filterLine.y1<e.y&&u&&l){var d=new Phaser.Geom.Point(u.x,u.y-1);return[r,new Phaser.Geom.Point(l.x,l.y-1),d,a]}return[r,h,a]},t}(Wy),Qy=g.Z.WATCHER,$y=Qy.KEY,eE=Qy.FRAME,tE=g.Z.GAMEPLAY,iE=tE.KEY,nE=tE.FRAME,sE=function(e){function t(t){var i;return(i=e.call(this,t,$y,eE.BOY_HEAD_NORMAL)||this).baseOffset=void 0,i.baseEyeLength=void 0,i.irisOffset=void 0,i.doubtMark=void 0,i.detectedMark=void 0,i.leftEye=void 0,i.leftIris=void 0,i.rightEye=void 0,i.rightIris=void 0,i.leftHand=void 0,i.rightHand=void 0,i.sightEnd=function(){i.actions.dissemble()},i.immediateSightEnd=function(){i.movingSight.isInactive()||i.movingSight.immediateSightEnd(),i.staticSight.isInactive()||i.staticSight.immediateSightEnd()},i.initState(),i.initSight(),i.createHands(),i.createDoubtMark(),i.createDetectedMark(),i.createEyes(),i.createIris(),i}(0,a.Z)(t,e);var i=t.prototype;return i.init=function(){this.actions.destroySight(),this.newSightAcquired=!1,this.doubtMark.kill(),this.detectedMark.kill()},i.initActions=function(){this.actions=new My(this)},i.initState=function(){this.newSightAcquired=!1,this.baseEyeLength=75,this.focusPointOffset=-57.5,this.irisOffset=4,this.extraEyePoints=[{x:-13,y:0},{x:10,y:0}]},i.createHands=function(){this.leftHand=this.scene.make.image({key:$y,frame:eE.BOY_HAND_LEFT}),this.leftHand.setWorldSize(41,31),this.leftHand.setDepth(B.Z.DECOR),this.leftHand.setY(260),this.scene.add.existing(this.leftHand),this.rightHand=this.scene.make.image({key:$y,frame:eE.BOY_HAND_RIGHT}),this.rightHand.setWorldSize(41,31),this.rightHand.setDepth(B.Z.DECOR),this.rightHand.setY(260),this.scene.add.existing(this.rightHand)},i.createDoubtMark=function(){this.doubtMark=this.scene.make.image({key:iE,frame:nE.ICON_DOUBT}),this.doubtMark.kill(),this.doubtMark.setDepth(B.Z.WATCHER_MARK),this.doubtMark.setWorldSize(57,87)},i.createEyes=function(){this.leftEye=this.scene.make.image({key:$y,frame:eE.BOY_EYE}),this.leftEye.setDepth(B.Z.WATCHER_EYE),this.leftEye.setWorldSize(28,5),this.rightEye=this.scene.make.image({key:$y,frame:eE.BOY_EYE}),this.rightEye.setDepth(B.Z.WATCHER_EYE),this.rightEye.setWorldSize(28,5)},i.createIris=function(){this.leftIris=this.scene.make.image({key:$y,frame:eE.BOY_IRIS}),this.leftIris.kill(),this.leftIris.setDepth(B.Z.WATCHER_EYE),this.leftIris.setWorldSize(2.5,3.5),this.rightIris=this.scene.make.image({key:$y,frame:eE.BOY_IRIS}),this.rightIris.kill(),this.rightIris.setDepth(B.Z.WATCHER_EYE),this.rightIris.setWorldSize(2.5,3.5)},i.createDetectedMark=function(){this.detectedMark=this.scene.make.image({key:iE,frame:nE.ICON_EXCLAMATION}),this.detectedMark.kill(),this.detectedMark.setDepth(B.Z.WATCHER_MARK),this.detectedMark.setWorldSize(48,68.5)},i.initSight=function(){this.movingSight=new Jy(this.scene,this.sightEnd),this.movingSight.setConstants(this.baseEyeLength,this.extraEyePoints),this.staticSight=new qy(this.scene,this.sightEnd),this.staticSight.setConstants(this.baseEyeLength,this.extraEyePoints);var e={x:this.x,y:this.y+this.focusPointOffset};this.movingSight.setPositions(this.playerPosition,this.cameraBoundLeft,this.cameraBoundRight,e),this.staticSight.setPositions(this.playerPosition,this.cameraBoundLeft,this.cameraBoundRight,e)},i.update=function(){e.prototype.update.call(this),this.updateEmotionIcon(),this.updateStaticEyes(),this.updateMovingEyes(),this.updateHands()},i.updateEmotionIcon=function(){var e=this.x,t=this.y;this.doubtMark.setPosition(e,t-180),this.detectedMark.setPosition(e+95,t-130)},i.updateStaticEyes=function(){this.leftEye.setPosition(this.x-26,this.y+this.focusPointOffset),this.rightEye.setPosition(this.x+20,this.y+this.focusPointOffset)},i.updateMovingEyes=function(){if(this.movingSight.isSightSweepPause())return this.leftIris.setPosition(this.leftEye.x+this.irisOffset,this.leftEye.y),void this.rightIris.setPosition(this.rightEye.x+this.irisOffset,this.rightEye.y);var e=this.scene.game.loop.delta,t=void 0===e?0:e,i=this.movingSight.getSightSpeed()/1e3*t;this.movingSight.isSightSweepLeft()?this.scene instanceof dE&&this.scene.stateManager.isPlayingState()&&(this.irisOffset-=i/120,this.irisOffset<-4&&(this.irisOffset=-4),this.leftIris.setPosition(this.leftEye.x+this.irisOffset,this.leftEye.y),this.rightIris.setPosition(this.rightEye.x+this.irisOffset,this.rightEye.y)):this.movingSight.isSightStart()?(this.leftIris.setPosition(this.leftEye.x+this.irisOffset,this.leftEye.y),this.rightIris.setPosition(this.rightEye.x+this.irisOffset,this.rightEye.y),this.irisOffset=4):this.movingSight.isSightSweepRight()?this.scene instanceof dE&&this.scene.stateManager.isPlayingState()&&(this.irisOffset+=i/120,this.irisOffset>4&&(this.irisOffset=4),this.leftIris.setPosition(this.leftEye.x+this.irisOffset,this.leftEye.y),this.rightIris.setPosition(this.rightEye.x+this.irisOffset,this.rightEye.y)):(this.leftIris.setPosition(this.leftEye.x,this.leftEye.y),this.rightIris.setPosition(this.rightEye.x,this.rightEye.y),this.irisOffset=4)},i.updateHands=function(){this.leftHand.setX(this.x-80),this.rightHand.setX(this.x+65)},i.hideWatcher=function(){this.setVisible(!1),this.leftHand.setVisible(!1),this.rightHand.setVisible(!1)},i.revealWatcher=function(){this.setVisible(!0),this.leftHand.setVisible(!0),this.rightHand.setVisible(!0)},i.restartSightAfterRescue=function(){var e=this.scene.physics.world.fps,t=this.currentSightData,i=t.remainingBeamHoldDuration,n=t.lastUsedSightType;if(i>=2*e)switch(n){case"static":this.actions.staticSightLook(i);break;case"moving":this.actions.movingSightLook(i)}this.currentSightData.remainingBeamHoldDuration=0,this.currentSightData.lastUsedSightType=""},t}(By),aE=g.Z.GAMEPLAY,rE=aE.KEY,oE=(aE.FRAME,function(e){function t(t){var i,n=t.scene,a=t.x,r=t.y;return(i=e.call(this,n,a,r,rE,n.lang.Texture.GAME_OVER)||this).initImage(),i.scene.add.existing((0,s.Z)(i)),i}(0,a.Z)(t,e);var i=t.prototype;return i.initImage=function(){var e=86.5;if("ru"===this.scene.lang.getCurrentLanguage())e=259.5/317*73;this.setWorldSize(259.5,e)},i.runAnimation=function(){new y({targets:[this],repeat:5,duration:60,props:{y:this.y+15}}).play()},t}(Phaser.GameObjects.Image)),cE=GameCore.Configs,hE=cE.Gameplay,uE=cE.Ads,lE=function(e){function t(){for(var t,i,a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(i=e.call.apply(e,h()(t=[this]).call(t,r))||this).readyScreen=void 0,i.gameUIScreen=void 0,i.rescueScreen=void 0,i.resultScreen=void 0,i.rewardScreen=void 0,i.congratulationScreen=void 0,i.notEnoughCoinScreen=void 0,i.endlessResultScreen=void 0,i.levelHandler=void 0,i.objectHandler=void 0,i.bigAssetHandler=void 0,i.endlessLevelHandler=void 0,i.mapManager=void 0,i.itemManager=void 0,i.stateManager=void 0,i.objectManager=void 0,i.physicManager=void 0,i.mapToolManager=void 0,i.tutorialManager=void 0,i.animationManager=void 0,i.gameMode=void 0,i.eatCoins=void 0,i.coinsPostedToCollectMission=void 0,i.startPoint=void 0,i.cameraFocus=void 0,i.timeStep=void 0,i.inputZone=void 0,i.currentLevelText=void 0,i.currentScoreText=void 0,i.objectStatisticsText=void 0,i.boyWatcher=void 0,i.mousePlayer=void 0,i.fadeAnimation=void 0,i.countdownText=void 0,i.countdownTimer=void 0,i.countdownCount=void 0,i.tapHand=void 0,i.failImage=void 0,i.gameOverImage=void 0,i.isEndlessMode=void 0,i.firstLevelLoadingCheck=void 0,i.isPlayWithoutWait=void 0,i.create=function(){e.prototype.create.call((0,s.Z)(i));var t=i.storage.getState();i.isEndlessMode=(0,Om.fQ)(t)===um.UQ,i.isPlayWithoutWait=!0,i.physics.world.fixedStep=!1,i.createUI(),i.createCamera(),i.createPlayer(),i.createWatcher(),i.createHandler(),i.createManager(),i.createFlags(),i.createFailNotification(),i.createGameOverNotification(),i.createTapHand(),i.createCountdown(),i.createInputZone(),i.listenGlobalEvents()},i.handleOnHidden=function(){var e=i.game.globalScene.screen.get(O.o4.TUTORIAL_SCREEN);null!=e&&e.active||(i.objectManager.onGameScenePause(),i.stateManager.pause())},i.run=function(){var e=i.storage.getState();i.gameMode=(0,Om.fQ)(e),i.isEndlessMode=i.gameMode===um.UQ,i.isPlayWithoutWait=!0,i.physics.world.fixedStep=!1,i.scene.resume(),i.isEndlessMode||i.levelHandler.init(),i.stateManager.init()},i.quit=function(){i.stateManager.quit()},i.startGame=function(){i.ads.preloadInterstitialAdAsync().catch((function(){})),i.stateManager.ready(),i.readyScreen.showContent({startImmediately:i.isPlayWithoutWait&&i.isEndlessMode}),i.isPlayWithoutWait=!1},i.runFailNotification=function(){var e=i.inputZone,t=e.x,n=e.y;i.failImage.setVisible(!0),i.failImage.setPosition(t,n-100),i.failImage.runAnimation()},i.runGameOverNotification=function(){var e=i.inputZone,t=e.x,n=e.y;i.gameOverImage.setVisible(!0),i.gameOverImage.setPosition(t,n-100),i.gameOverImage.runAnimation()},i.handleRunCountdown=function(){if(i.countdownCount-=1,i.countdownCount<=0)return i.countdownTimer.remove(),i.countdownText.setVisible(!1),void i.handleCountDownEndAfterPauseGame();i.setTime(i.countdownCount)},i.handlePointerUp=function(){var e;null==(e=i.mousePlayer)||e.actions.walk(),i.mapToolManager.isPlayerMoveBackward=!1},i.handlePointerDown=function(){var e;null==(e=i.mousePlayer)||e.actions.hide()},i.movingSightTriggerCallback=function(e,t,n,s,a){i.boyWatcher.actions.customMovingSightLook(e,t,n,s,a)},i.staticSightTriggerCallback=function(e,t,n,s,a){i.boyWatcher.actions.customStaticSightLook(e,t,n,s,a)},i.standTriggerCallback=function(e,t){i.boyWatcher.actions.customStand(e,t)},i.fallTriggerCallback=function(e,t){i.boyWatcher.actions.customHide(e,t)},i.collectibleCallback=function(e){i.eatCoins+=e,i.gameUIScreen.eatCoins(e)},i.tutorialCallback=function(){},i.die=function(){i.stopManager();var e=i.storage.getState(),t=(0,Om.t1)(e);t<hE.MaxRescueCount&&i.ads.preloadRewardedVideoAsync(),t<hE.MaxRescueCount&&uE.Enabled?i.stateManager.rescue():i.stateManager.gameOver()},i.handlePointerDownAfterPauseGame=function(){i.countdownCount-=1,i.countdownCount>0&&i.countdownText.setText(""+i.countdownCount)},i.handleCountDownEndAfterPauseGame=function(){i.tapHand&&(i.tapHand.destroy(),i.tapHand=void 0),i.stopFadeInPlayerAnim(),i.input.off(Phaser.Input.Events.POINTER_DOWN,i.handlePointerDownAfterPauseGame),i.stateManager.isRescuingState()&&(0,en.R0)(new Tn("Play in after pause game"),{}),i.stateManager.play(),i.objectManager.onGameSceneResume(),i.mousePlayer.actions.walk()},i.gameOver=function(){i.stateManager.gameOver()},i.levelComplete=function(){i.stateManager.levelComplete()},i.handleShowAdWhenEndGame=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==i.ads.canbeShowInterstitialAd()){e.next=2;break}return e.abrupt("return");case 2:return i.audio.pauseMusic(),e.prev=3,i.analytics.showInterstitialAd(i.getSceneName()),e.next=7,i.ads.showInterstitialAdAsync();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i.analytics.showAdFail(GameCore.Ads.Types.INTERSTITIAL,i.getSceneName(),e.t0);case 12:i.audio.playMusic(),i.ads.preloadInterstitialAdAsync().catch((function(){}));case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),i}(0,a.Z)(t,e);var i=t.prototype;return i.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.quit)},i.createHandler=function(){this.levelHandler=new L(this),this.objectHandler=new Te(this),this.bigAssetHandler=new Sy(this),this.endlessLevelHandler=new Ey(this)},i.createManager=function(){this.mapManager=new mn(this),this.itemManager=new qi(this),this.stateManager=new Bm(this),this.objectManager=new Og(this),this.physicManager=new cm(this),this.mapToolManager=new wn(this),this.tutorialManager=new Zm(this),this.animationManager=new Xi(this)},i.createFlags=function(){this.firstLevelLoadingCheck=!0},i.initManager=function(){this.mapManager.init(),this.itemManager.init(),this.objectManager.init(),this.physicManager.init(),this.mapToolManager.init(),this.tutorialManager.init(),this.animationManager.init()},i.initObjectHandler=function(){this.objectHandler.init()},i.stopManager=function(){this.mapManager.stop(),this.itemManager.stop(),this.objectManager.stop(),this.physicManager.stop(),this.mapToolManager.stop(),this.tutorialManager.stop(),this.animationManager.stop()},i.startManager=function(){this.mapManager.start(),this.itemManager.start(),this.objectManager.start(),this.physicManager.start(),this.mapToolManager.start(),this.tutorialManager.start(),this.animationManager.start()},i.listenGlobalEvents=function(){this.game.events.on(Phaser.Core.Events.HIDDEN,this.handleOnHidden)},i.removeListenGlobalEvents=function(){this.game.events.off(Phaser.Core.Events.HIDDEN,this.handleOnHidden)},i.startLevel=function(){this.stateManager.play(),this.mousePlayer.actions.walk()},i.createUI=function(){this.createReadyScreen(),this.createGameUIScreen(),this.createRewardScreen(),this.createRescueScreen(),this.createResultScreen(),this.createCongratulationScreen(),this.createNotEnoughCoinsScreen(),this.createDevTools()},i.createGameUIScreen=function(){var e=this.gameZone.width;this.gameUIScreen=this.screen.add(O.o4.GAME_UI_SCREEN,Sv,e+20),this.screen.open(O.o4.GAME_UI_SCREEN)},i.createReadyScreen=function(){var e=this.gameZone.width;this.readyScreen=this.screen.add(O.o4.READY_SCREEN,wv,e+20)},i.createCongratulationScreen=function(){var e=this.gameZone.width;this.congratulationScreen=this.screen.add(O.o4.CONGRATULATION_SCREEN,iv,e+20)},i.createNotEnoughCoinsScreen=function(){var e=this.gameZone.width;this.notEnoughCoinScreen=this.screen.add(O.o4.NOT_ENOUGH_COINS_SCREEN,xv,e+20)},i.createRewardScreen=function(){var e=this.gameZone.width;this.rewardScreen=this.screen.add(O.o4.REWARD_SCREEN,Gm.Z,e+20)},i.createRescueScreen=function(){var e=this.gameZone.width;this.rescueScreen=this.screen.add(O.o4.RESCUE_SCREEN,Uv,e+20)},i.createResultScreen=function(){var e=this.gameZone.width;this.resultScreen=this.screen.add(O.o4.RESULT_SCREEN,ly,e+20)},i.createTexts=function(){this.currentLevelText=this.make.bitmapText({y:50,font:C.Z.PRIMARY.KEY,size:this.fontSize(15),depth:A.Z.TEXT,visible:!1}),this.currentScoreText=this.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.fontSize(15),depth:A.Z.TEXT,visible:!1}),this.objectStatisticsText=this.make.bitmapText({font:C.Z.PRIMARY.KEY,size:this.fontSize(15),depth:A.Z.TEXT,visible:!1}),this.currentLevelText.setTint(1973790),this.currentScoreText.setTint(1973790),this.objectStatisticsText.setTint(3563263),Phaser.Display.Align.In.Center(this.currentScoreText,this.currentLevelText,0,15),Phaser.Display.Align.In.Center(this.objectStatisticsText,this.currentScoreText,0,15)},i.createDevTools=function(){GameCore.Utils.Valid.isDebugger()&&this.createTexts()},i.createCamera=function(){this.cameraFocus=new Phaser.Geom.Point(0,0)},i.createPlayer=function(){this.mousePlayer=new rm(this)},i.createWatcher=function(){this.boyWatcher=new sE(this)},i.initCamera=function(){var e=l()(this.mapManager);this.cameraFocus.x=Math.floor(this.mousePlayer.x),this.cameraFocus.y=Math.floor(this.mousePlayer.y-200),this.cameras.main.startFollow(this.cameraFocus),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels)},i.initPlayer=function(){var e=l()(this.mapManager).getObjectLayer("player").objects;if(!(e.length<1)){var t=e[0],i=t.type,n=t.y,s=t.width,a=t.height;if(s&&a&&"player"===i){var r=this.startPoint.x;this.mousePlayer.setVisible(!0),this.mousePlayer.setPosition(r+s/2,n),this.mousePlayer.actions.ready()}}},i.initWatcher=function(){var e=l()(this.mapManager).getObjectLayer("watcher").objects;if(!(e.length<1)){var t=e[0],i=t.type,n=t.x,s=t.y,a=t.width,r=t.height;n&&s&&a&&r&&"watcher"===i&&(this.boyWatcher.init(),this.boyWatcher.setPosition(n,s+3),this.boyWatcher.setOrigin(.5,1),this.boyWatcher.setWorldSize(a,r),this.boyWatcher.revealWatcher(),this.boyWatcher.actions.ready())}},i.hidePlayer=function(){this.mousePlayer.setVisible(!1)},i.hideWatcher=function(){this.boyWatcher.hideWatcher()},i.getPlayerToGoalDistance=function(){return this.objectManager.getGoalPosition()-this.mousePlayer.x},i.getLevelDistance=function(){return this.objectManager.getGoalPosition()-this.startPoint.x},i.getEndlessModeDistanceTravelled=function(){var e=this.mousePlayer.x,t=this.startPoint.x;return Math.floor((e-t)/300)},i.update=function(){this.stateManager.update()},i.updateText=function(){if(GameCore.Utils.Valid.isDebugger()){var e=this.cameraFocus.x-this.gameZone.width/2+10;this.currentScoreText.setX(e),this.currentLevelText.setX(e),this.objectStatisticsText.setX(e),this.currentScoreText.setText("Score: "+this.eatCoins),this.currentLevelText.setText("Level: "+this.levelHandler.level);var t=this.objectHandler.getStatistics();this.objectStatisticsText.setText("Active/total objects: "+t[0]+" / "+t[1])}},i.updateCamera=function(){this.cameraFocus.setTo(Math.floor(this.mousePlayer.x+8),this.cameraFocus.y)},i.updatePlayerInfoToObjects=function(){this.objectManager.setPlayerInfoToObjects(this.mousePlayer)},i.updateScreen=function(){var e=this.gameZone.width,t=this.cameraFocus.x,i=e/2;t<i&&(t=i),this.readyScreen.setX(t),this.gameUIScreen.setX(t),this.rescueScreen.setX(t),this.resultScreen.setX(t),this.rewardScreen.setX(t),this.congratulationScreen.setX(t),this.notEnoughCoinScreen.setX(t)},i.updateInputZone=function(){var e=this.cameraFocus.x,t=this.gameZone.height;this.inputZone.setX(e),this.inputZone.setY(t-this.inputZone.height/2)},i.updatePlayer=function(){this.mousePlayer.update()},i.updateWatcher=function(){var e=this.cameraFocus.x;this.boyWatcher.setX(e),this.boyWatcher.setPositions(this.mousePlayer.getCenter(),this.cameras.main.worldView.left,this.cameras.main.worldView.right),this.boyWatcher.setActiveCovers(this.getActiveCovers()),this.boyWatcher.update()},i.updateMapGraphics=function(){var e=this.mapManager,t=e.background,i=e.tableTop,n=e.tableBottom,s=e.tableMiddle,a=e.tableSideBottom,r=e.leftBrickFloorImages,o=e.rightBrickFloorImages;if(t){var c=this.cameraFocus.x;t.setX(c-t.width/2),i.setX(c-i.width/2),n.setX(c-n.width/2),s.setX(c-s.width/2),a.setX(c-a.width/2);var h=r[0],u=o[0],l=h.x+h.width<=c-h.width/2,d=h.x>c-h.width/2||u.x+u.width<c+u.width/2;if(l||d)for(var p=0;p<3;p++){var f=r[p],g=o[p];f.setX(c-f.width/2),g.setX(c+f.width/2)}}},i.updateObjectHandler=function(){this.objectHandler.update()},i.createFailNotification=function(){this.failImage=new T({scene:this,x:150,y:200}),this.failImage.setDepth(A.Z.POPUP),this.failImage.setVisible(!1)},i.createGameOverNotification=function(){this.gameOverImage=new oE({scene:this,x:150,y:200}),this.gameOverImage.setDepth(A.Z.POPUP),this.gameOverImage.setVisible(!1)},i.hideFailNotification=function(){this.failImage.setVisible(!1)},i.hideGameOverNotification=function(){this.gameOverImage.setVisible(!1)},i.createTapHand=function(){this.tapHand=new b.Z(this);var e=this.cameraFocus.x+this.gameZone.width/2,t=this.gameZone.height;this.tapHand.setPosition(e-50,t-150),this.tapHand.playAnimation(300),this.tapHand.setDepth(A.Z.PRIORITY),this.tapHand.kill()},i.createFadeInPlayerAnim=function(){this.fadeAnimation=new f.Z({targets:[this.mousePlayer.spine],yoyo:!0,repeat:-1,duration:150,props:{alpha:{start:1,from:1,to:0}}})},i.createCountdown=function(){this.countdownText=this.add.text(0,0,"999",{fontFamily:C.Z.FONT_FAMILY,fontSize:"65px",color:"#FEDB18",stroke:"#5a5b06",strokeThickness:4}),this.countdownText.setHighQuality(),this.countdownText.setTint(16702232),this.countdownText.setDepth(A.Z.PRIORITY),this.countdownText.setVisible(!1)},i.setTime=function(e){this.countdownText.setVisible(!0),this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.mousePlayer,0,-60)},i.runCountdown=function(){this.countdownCount=3,this.setTime(this.countdownCount);var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.time.addEvent(e)},i.createInputZone=function(){var e=this.gameZone,t=e.width,i=e.height;this.inputZone=this.add.zone(0,0,t,i-60),this.inputZone.setDepth(A.Z.ON_TOP),this.inputZone.setInteractive({useHandCursor:!0}),this.inputZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.inputZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown)},i.disablePlayerInput=function(){this.inputZone.disableInteractive()},i.enablePlayerInput=function(){this.input.setTopOnly(!0),this.inputZone.setInteractive()},i.getActiveCovers=function(){var e=[],t=this.objectManager,i=t.staticList,n=t.movingList,s=t.suddenObjectList;return i.getChildren().forEach((function(t){t instanceof ge&&t.isActive()&&e.push(t.getBlockLine())})),n.getChildren().forEach((function(t){t instanceof ne&&t.visible&&e.push(t.getBlockLine())})),s.getChildren().forEach((function(t){if(t instanceof gg&&t.visible){var i=t.getBlockLine();i&&e.push(i)}})),p()(e).call(e,(function(e,t){return(e.x1+e.x2)/2-(t.x1+t.x2)/2})),e},i.getCameraFocusPos=function(){return{x:this.cameraFocus.x,y:this.cameraFocus.y}},i.gameOverCheck=function(){if(!this.boyWatcher.getMovingSight().isInactive()||!this.boyWatcher.getStaticSight().isInactive()){var e=(this.boyWatcher.getMovingSight().isInactive()?this.boyWatcher.getStaticSight():this.boyWatcher.getMovingSight()).getSightLines(),t=new Phaser.Geom.Line(this.mousePlayer.x-10,this.mousePlayer.y+10,this.mousePlayer.x+1e3,this.mousePlayer.y+10),i=new Phaser.Geom.Line(this.mousePlayer.x+10,this.mousePlayer.y+10,this.mousePlayer.x+1e3,this.mousePlayer.y+10),n=new Phaser.Geom.Line(this.mousePlayer.x,this.mousePlayer.y+10,this.mousePlayer.x+1e3,this.mousePlayer.y+10),s=0,a=0,r=0;e.forEach((function(e){Phaser.Geom.Intersects.LineToLine(t,e)&&a++,Phaser.Geom.Intersects.LineToLine(i,e)&&r++,Phaser.Geom.Intersects.LineToLine(n,e)&&s++})),(a%2>0||r%2>0||s%2>0)&&this.stateManager.levelFail()}},i.rescuing=function(){var e=this;this.boyWatcher.actions.hide(),this.mousePlayer.actions.ready(),this.runFadeInPlayerAnim(),this.time.addEvent({delay:hE.DelayStart,callback:function(){e.stopFadeInPlayerAnim(),e.stateManager.play(),e.mousePlayer.actions.walk(),e.boyWatcher.restartSightAfterRescue()}})},i.replay=function(){this.scene.resume(),this.isEndlessMode&&(this.hidePlayer(),this.hideWatcher(),this.objectManager.hideAllObjects()),this.isEndlessMode||this.levelHandler.init(),this.stateManager.init()},i.resume=function(){this.scene.resume(),this.runTapHandAnimation(),this.runFadeInPlayerAnim(),this.input.on(Phaser.Input.Events.POINTER_DOWN,this.handlePointerDownAfterPauseGame),this.runCountdown()},i.runTapHandAnimation=function(){if(this.tapHand){var e=this.cameraFocus.x+this.gameZone.width/2,t=this.gameZone.height;this.tapHand.revive(),this.tapHand.setPosition(e-50,t-150)}},i.runFadeInPlayerAnim=function(){var e;null==(e=this.fadeAnimation)||e.remove(),this.createFadeInPlayerAnim(),this.fadeAnimation.play()},i.stopFadeInPlayerAnim=function(){this.fadeAnimation.stop(),this.mousePlayer.spine.setAlpha(1)},i.nextLevel=function(){this.isEndlessMode?this.game.storage.dispatch((0,gm.cN)()):this.game.storage.dispatch((0,gm.Ad)()),this.hidePlayer(),this.hideWatcher(),this.objectManager.hideAllObjects(),this.stateManager.nextLevel()},i.updateCoinsToPlayerProfile=function(){var e=this.gameUIScreen.getCurrentCoins();this.player.setCustomData("coin",e)},i.getCurrentCoinsInCurrentLevel=function(){return this.gameUIScreen.getCurrentCoins()},i.setCurrentCoinsAndUpdateCoinBar=function(e){this.gameUIScreen.setCurrentCoinsAndUpdateCoinBar(e)},i.updateCoinsCollectedToMissionTask=function(){if(!(this.coinsPostedToCollectMission>=this.eatCoins)){var e=this.eatCoins-this.coinsPostedToCollectMission;this.coinsPostedToCollectMission=this.eatCoins,pm.Z.emit(dm.Z.COLLECT_COINS.EVENTS.COLLECT_COINS,{type:"coin",value:e})}},i.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();(0,Fm.F)(e)!=um.kC&&this.facebook.attemptToAddShortcut()}},t}(Um.Z);var dE=lE},464:function(e,t,i){"use strict";i.d(t,{Z:function(){return He}});var n=i(95),s=i(2),a=i(55),r=i.n(a),o=i(113),c=i(114),h=i(20),u=i(143),l=i(62),d=i(459),p=(0,i(61).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),f=i(54),g=i(229),m=i(17),v=i(97),y=i(63),E=h.Z.DEFAULT,S=E.KEY,T=E.FRAME,b=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).fps=0,i.fpsString="FPS: %1",i.fpsText=void 0,i.background=void 0,i.lastUpdate=void 0,i.update=function(e){if(!(e-i.lastUpdate<800)){i.lastUpdate=e;var t=Math.floor(i.scene.game.loop.actualFps);i.setFps(t)}},i.createFps(),i.setDepth(y.Z.DEBUG),i.scene.add.existing((0,m.Z)(i)),i.scene.events.on(Phaser.Scenes.Events.UPDATE,i.update),i}(0,s.Z)(t,e);var i=t.prototype;return i.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},i.createFps=function(){this.background=this.scene.make.image({key:S,frame:T.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),A=function(e){function t(t){var i;if((i=e.call(this,t,0,0)||this).performance=void 0,i.memory=0,i.maxMemoryLimit=void 0,i.maxPercentThreshold=void 0,i.normalColor=3459162,i.warningColor=16768343,i.alarmColor=15812200,i.memoryString="Memory: %1MB / %2MB",i.memoryText=void 0,i.lastUpdate=void 0,i.update=function(e){if(!(e-i.lastUpdate<1e3)){i.lastUpdate=e;var t=i.performance.memory.usedJSHeapSize,n=1048576*i.maxMemoryLimit,s=Math.round(t/1048576);i.setMemory(s),i.memoryText.setTint(i.normalColor),t>i.maxPercentThreshold/100*n&&i.memoryText.setTint(i.warningColor),t>n&&i.memoryText.setTint(i.alarmColor)}},i.performance=window.performance,i.createMemory(),i.setDepth(y.Z.DEBUG),i.scene.add.existing((0,m.Z)(i)),!i.isSupport())return i.memoryText.setText("Memory: not supported!"),(0,m.Z)(i);var n=i.performance.memory.jsHeapSizeLimit;return i.maxPercentThreshold=90,i.setMaxMemory(n/1048576),i.scene.events.on(Phaser.Scenes.Events.UPDATE,i.update),i}(0,s.Z)(t,e);var i=t.prototype;return i.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},i.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},i.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},i.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=i(226),O=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).loadingIcon=void 0,a.messageText=void 0,a.openAnimation=void 0,a.closeTimerEvent=void 0,a.addLoadingIcon(),a.addMessageText(),a.setDepth(l.Ks.PRIORITY),a.background.setAlpha(.8),a}(0,s.Z)(t,e);var i=t.prototype;return i.open=function(t){var i,n=this;e.prototype.open.call(this,t);var s=this.getData(["message","duration","loading"]),a=s[0],r=void 0===a?"":a,o=s[1],c=void 0===o?0:o,h=s[2],u=void 0!==h&&h;this.setMessage(r),this.showLoading(u),null==(i=this.closeTimerEvent)||i.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){n.visible&&n.scene.screen.close(n.name)}}))},i.addLoadingIcon=function(){this.loadingIcon=new C.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},i.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(28),font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},i.setMessage=function(e){this.messageText.setText(e)},i.showLoading=function(e){e?this.loadingIcon.revive():this.loadingIcon.kill();var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,-5,t)},i.logPageviewOnOpen=function(){},i.logPageviewOnClose=function(){},t}(GameCore.Screen),I=i(24),w=i(21),P=i.n(w),_=i(112),R=i(148),k=i(78),x=i(147),L=i(227),D=i(467),B=i(79),N=i(145),M=i(468),Z=h.Z.DEFAULT,G=Z.KEY,F=Z.FRAME,U=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).scene=void 0,a.popup=void 0,a.title=void 0,a.contents=void 0,a.settingMusic=void 0,a.settingSound=void 0,a.settingVibrate=void 0,a.blockMusic=void 0,a.blockSound=void 0,a.blockVibrate=void 0,a.homeButton=void 0,a.restartButton=void 0,a.popupShowUpAnimation=void 0,a.popupFadeOutAnimation=void 0,a.contentShowUpAnimation=void 0,a.handleClose=function(){a.runCloseAnimation(),a.gameScene.resume()},a.handleMusicSetting=function(e){a.scene.player.setSetting("music",e),e?a.scene.audio.playMusic():a.scene.audio.pauseMusic()},a.handleSoundSetting=function(e){a.scene.player.setSetting("sound",e)},a.handleVibrateSetting=function(e){a.scene.player.setSetting("vibrate",e)},a.handleOnHomeClick=function(){a.popup.setY(0),a.scene.screen.close(a.name),a.updateCoinsToPlayerProfile(),a.updateCoinsCollectedToMissionTask(),a.scene.scene.get(u.C.GAME_SCENE).isEndlessMode=!1,a.scene.game.globalScene.events.emit(u.K.SWITCH,u.C.DASHBOARD_SCENE)},a.handleRestartGame=(0,I.Z)(P().mark((function e(){var t,i,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.runCloseAnimation(),a.updateCoinsToPlayerProfile(),a.updateCoinsCollectedToMissionTask(),t=a.scene.storage,i=a.scene.scene.get(u.C.GAME_SCENE),n=i.isEndlessMode,e.next=8,t.dispatch((0,d.I)(u.C.GAME_SCENE));case 8:if(!n){e.next=13;break}return e.next=11,t.dispatch((0,N.cN)());case 11:e.next=15;break;case 13:return e.next=15,t.dispatch((0,N.Ad)());case 15:a.gameScene.replay();case 16:case"end":return e.stop()}}),e)}))),a.scene=t,a.createPopup(),a.createTitle(),a.createBoard(),a.createButtons(),a.createCloseButton(),a.createContactInfo(),a.addItem(),a.createInput(),a.setDepth(l.Ks.POPUP),a.background.setAlpha(.8),a}(0,s.Z)(t,e);var i=t.prototype;return i.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),i=t.music,n=t.sound,s=t.vibrate;this.settingMusic.updateButtonState(i),this.settingSound.updateButtonState(n),this.settingVibrate.updateButtonState(s),this.runOpenAnimation(),this.scene.scene.pause(u.C.GAME_SCENE)},i.createInput=function(){this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},i.createCloseButton=function(){var e=new x.Z(this.scene,{key:G,frame:F.BUTTON_CLOSE,width:32,height:31,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,e.setPosition(150,-118),this.popup.add(e)},i.createContactInfo=function(){var e=this.scene.player.getPlayerId(),t=this.scene.lang.Text.PLAYER_ID+": "+e+"\n"+this.scene.lang.Text.CONTACT+": support@citigovietnam.com",i=this.scene.make.bitmapText({font:v.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});i.setTint(5194031),i.setAlpha(.5),i.setCenterAlign(),this.popup.add(i),Phaser.Display.Align.In.BottomCenter(i,this.popup,0,-10)},i.createPopup=function(){this.popup=new L.Z(this.scene,0,0,310,290),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},i.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:G,frame:F.RIBBON_PANEL});e.setWorldSize(232,63);var t=this.scene.make.bitmapText({font:v.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(25),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-5),this.title.add([e,t]),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},i.createBoard=function(){var e=this.scene.make.image({key:G,frame:F.POPUP_BG_BLOCK});e.setWorldSize(256,120),e.setPosition(0,-20),this.popup.add(e)},i.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,i=e.sound,n=e.vibrate;this.createSoundButton(i),this.createMusicButton(t),this.createVibrateButton(n),this.createHomeButton(),this.createRestartButton()},i.createSoundButton=function(e){this.blockSound=this.scene.make.container({}),this.settingSound=new D.Z(this.scene,{enable:e,frameOn:F.SWITCH_ON,frameOff:F.SWITCH_OFF,framePanelOn:F.SWITCH_PANEL_ON,framePanelOff:F.SWITCH_PANEL_OFF}),this.settingSound.setName("Sound"),this.settingSound.setPosition(65,0),this.settingSound.icon.setWorldSize(25,24),this.settingSound.button.setWorldSize(55,21);var t=this.scene.make.image({key:G,frame:F.ICON_SOUND});t.setPosition(-85,0),t.setWorldSize(31,30);var i=this.scene.make.bitmapText({font:v.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.SOUND,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockSound.add([t,i,this.settingSound]),this.blockSound.setPosition(0,-20)},i.createMusicButton=function(e){this.blockMusic=this.scene.make.container({}),this.settingMusic=new D.Z(this.scene,{enable:e,frameOn:F.SWITCH_ON,frameOff:F.SWITCH_OFF,framePanelOn:F.SWITCH_PANEL_ON,framePanelOff:F.SWITCH_PANEL_OFF}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(65,0),this.settingMusic.icon.setWorldSize(25,24),this.settingMusic.button.setWorldSize(55,21);var t=this.scene.make.image({key:G,frame:F.ICON_MUSIC});t.setPosition(-85,0),t.setWorldSize(30,28);var i=this.scene.make.bitmapText({font:v.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.MUSIC,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockMusic.add([t,i,this.settingMusic]),this.blockMusic.setPosition(0,-58)},i.createVibrateButton=function(e){this.blockVibrate=this.scene.make.container({}),this.settingVibrate=new D.Z(this.scene,{enable:e,frameOn:F.SWITCH_ON,frameOff:F.SWITCH_OFF,framePanelOn:F.SWITCH_PANEL_ON,framePanelOff:F.SWITCH_PANEL_OFF}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.setPosition(65,0),this.settingVibrate.icon.setWorldSize(25,24),this.settingVibrate.button.setWorldSize(55,21);var t=this.scene.make.image({key:G,frame:F.ICON_VIB});t.setPosition(-85,0),t.setWorldSize(37,29);var i=this.scene.make.bitmapText({font:v.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.VIBRATE,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockVibrate.add([t,i,this.settingVibrate]),this.blockVibrate.setPosition(0,18)},i.createHomeButton=function(){this.homeButton=new k.Z(this.scene,G,F.BUTTON_BLUE,93.5,41),this.homeButton.setName("Home");var e=this.scene.make.image({key:G,frame:F.ICON_HOME});e.setX(-28),e.setWorldSize(30,25);var t=22;if("ru"===this.scene.lang.getCurrentLanguage())t=20;var i=this.scene.make.bitmapText({font:v.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.HOME,alpha:.8});Phaser.Display.Align.In.Center(i,this.homeButton,15,2),this.homeButton.add([e,i]),this.homeButton.setPosition(-75,75),this.homeButton.onClick=this.handleOnHomeClick},i.createRestartButton=function(){this.restartButton=new k.Z(this.scene,G,F.BUTTON_GREEN_LONG,136.5,40),this.restartButton.setName("Restart");var e=this.scene.make.image({key:G,frame:F.ICON_RESUME});e.setX(-48),e.setWorldSize(28,27);var t=22;if("ru"===this.scene.lang.getCurrentLanguage())t=15;var i=this.scene.make.bitmapText({font:v.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.RESTART,alpha:.8});Phaser.Display.Align.In.Center(i,this.restartButton,15,2),this.restartButton.add([e,i]),this.restartButton.setPosition(55,75),this.restartButton.onClick=this.handleRestartGame},i.updateCoinsToPlayerProfile=function(){var e=this.scene.scene.get(u.C.GAME_SCENE);e instanceof M.Z&&e.updateCoinsToPlayerProfile()},i.updateCoinsCollectedToMissionTask=function(){var e=this.scene.scene.get(u.C.GAME_SCENE);e instanceof M.Z&&e.updateCoinsCollectedToMissionTask()},i.addItem=function(){this.popup.add([this.title,this.blockMusic,this.blockSound,this.blockVibrate,this.homeButton,this.restartButton]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.blockMusic,this.blockSound,this.blockVibrate,this.homeButton,this.restartButton])},i.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(B.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},i.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(B.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},i.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var i=this.popup,n=i.y,s=i.scale;this.popupShowUpAnimation=new R.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:n},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:s}}})}this.popupShowUpAnimation.play()},i.runPopupContentEntrancesAnimation=function(e,t){var i;null==(i=this.contentShowUpAnimation)||i.remove(),this.contentShowUpAnimation=new _.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new c.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0),i.scene.screen.close(i.name)}})),this.popupFadeOutAnimation.play()},(0,n.Z)(t,[{key:"gameScene",get:function(){return this.scene.scene.get(u.C.GAME_SCENE)}}]),t}(GameCore.Screen),H=i(64),j=i.n(H),Y=i(31),K=h.Z.GAMEPLAY,W=K.KEY,V=K.FRAME,z=function(e){function t(t){var i;return(i=e.call(this,t)||this).kitchenBG=void 0,i.createKitchenBG(),i.scene.add.existing((0,m.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.updateBackgroundSize=function(){var e=this.kitchenBG,t=e.displayWidth,i=e.displayHeight;this.setSize(t,i)},i.createKitchenBG=function(){this.kitchenBG=this.scene.make.image({key:W,frame:V.BACKGROUND_BG_1}),this.add(this.kitchenBG),this.kitchenBG.setOrigin(.5,0),this.kitchenBG.setWorldSize(262.5,153),this.updateBackgroundSize()},t}(Phaser.GameObjects.Container),X=h.Z.GAMEPLAY,J=X.KEY,q=X.FRAME,Q=function(e){function t(t){var i;return(i=e.call(this,t)||this).tableTopImages=void 0,i.tableMiddleImages=void 0,i.tableBottomImages=void 0,i.tableTopImages=[],i.tableMiddleImages=[],i.tableBottomImages=[],i.createForeground(),i.updateBackgroundSize(),i.scene.add.existing((0,m.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.updateBackgroundSize=function(){var e=2*this.tableTopImages[0].displayWidth,t=this.tableTopImages[0].displayHeight+this.tableMiddleImages[0].displayHeight+this.tableBottomImages[0].displayHeight+21;this.setSize(e,t)},i.createForeground=function(){if(0==this.tableTopImages.length)for(var e=0;e<2;e++){var t=this.scene.make.image({key:J,origin:{x:0,y:0}});t.setVisible(!0),t.setFrame(q.BACKGROUND_TABLE_TOP),t.setWorldSize(262.5,27),t.setPosition(e*t.width,-5.6),this.tableTopImages.push(t),this.add(t)}var i=this.tableTopImages[0].y+this.tableTopImages[0].height;if(0==this.tableMiddleImages.length)for(var n=0;n<2;n++){var s=this.scene.make.image({key:J,origin:{x:0,y:0}});s.setVisible(!0),s.setFrame(q.BACKGROUND_TABLE_MIDDLE),s.setWorldSize(262.5,62.7),s.setPosition(n*s.width,i-8.4),this.tableMiddleImages.push(s),this.add(s)}var a=this.tableMiddleImages[0].y+this.tableMiddleImages[0].height;if(0==this.tableBottomImages.length)for(var r=0;r<2;r++){var o=this.scene.make.image({key:J,origin:{x:0,y:0}});o.setVisible(!0),o.setFrame(q.BACKGROUND_TABLE_BOTTOM),o.setWorldSize(262.5,93.1),o.setPosition(r*o.width,a-7),this.tableBottomImages.push(o),this.add(o)}},i.runAnimation=function(){for(var e=this,t=function(){var t=e.tableTopImages[i],n=t.x;e.scene.add.tween({targets:t,duration:6e3,x:n-t.width,ease:"Power0",repeat:-1,onComplete:function(){t.x+=t.width}});var s=e.tableMiddleImages[i];n=s.x,e.scene.add.tween({targets:s,duration:3e3,x:n-s.width,ease:"Power0",repeat:-1,onComplete:function(){s.x+=s.width}});var a=e.tableBottomImages[i];n=a.x,e.scene.add.tween({targets:a,duration:1500,x:n-a.width,ease:"Power0",repeat:-1,onComplete:function(){a.x+=a.width}})},i=0;i<2;i++)t()},i.pauseAnimation=function(){for(var e=0;e<2;e++){var t=this.tableTopImages[e],i=this.scene.tweens.getTweensOf(t);i.forEach((function(e){e.pause()}));var n=this.tableMiddleImages[e];(i=this.scene.tweens.getTweensOf(n)).forEach((function(e){e.pause()}));var s=this.tableBottomImages[e];(i=this.scene.tweens.getTweensOf(s)).forEach((function(e){e.pause()}))}},i.resumeAnimation=function(){for(var e=0;e<2;e++){var t=this.tableTopImages[e],i=this.scene.tweens.getTweensOf(t);i.forEach((function(e){e.resume()}));var n=this.tableMiddleImages[e];(i=this.scene.tweens.getTweensOf(n)).forEach((function(e){e.resume()}));var s=this.tableBottomImages[e];(i=this.scene.tweens.getTweensOf(s)).forEach((function(e){e.resume()}))}},i.stopAnimation=function(){for(var e=0;e<2;e++){var t=this.tableTopImages[e],i=this.scene.tweens.getTweensOf(t);i.forEach((function(e){e.stop()}));var n=this.tableMiddleImages[e];(i=this.scene.tweens.getTweensOf(n)).forEach((function(e){e.stop()}));var s=this.tableBottomImages[e];(i=this.scene.tweens.getTweensOf(s)).forEach((function(e){e.stop()}))}},i.resetPositions=function(){for(var e=0;e<2;e++){var t=this.tableTopImages[e];t.setPosition(e*t.width,-5.6);var i=this.tableMiddleImages[e],n=this.tableTopImages[e].y+this.tableTopImages[e].height;i.setPosition(e*i.width,n-8.4);var s=this.tableBottomImages[e],a=this.tableMiddleImages[e].y+this.tableMiddleImages[e].height;s.setPosition(e*s.width,a-7)}},t}(Phaser.GameObjects.Container),$=h.Z.TUTORIAL,ee=$.KEY,te=$.FRAME,ie=function(e){function t(t){var i;return(i=e.call(this,t,0,0,ee,te.HAND)||this).initSprite(),i.scene.add.existing((0,m.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setWorldSize(45.9,38.9),this.angle=36},i.holdAnimation=function(){this.scene.add.tween({targets:this,ease:Phaser.Math.Easing.Cubic.Out,props:{angle:{from:36,value:-4,duration:200}}})},i.releaseAnimation=function(){this.scene.add.tween({targets:this,ease:Phaser.Math.Easing.Cubic.Out,props:{angle:{from:-4,value:36,duration:200}}})},i.resetAngle=function(){this.angle=36},t}(Phaser.GameObjects.Sprite),ne=i(470),se=h.Z.MOUSE_SPINE.KEY,ae=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).spine=void 0,i.initSpine(),i.scene.add.existing((0,m.Z)(i)),i}(0,s.Z)(t,e);var i=t.prototype;return i.initSpine=function(){this.spine=this.scene.add.spine(0,35,se,ne.Z.PLAYER_IDLE.KEY,!0),this.spine.setScale(.4);var e=this.spine;this.add(e)},i.setFlipX=function(e){e?this.spine.setScale(-.4,.4):this.spine.setScale(.4)},i.runAction=function(){this.spine.state.timeScale=1,this.spine.play(ne.Z.PLAYER_WALKING.KEY,!0)},i.hideAction=function(){this.spine.play(ne.Z.PLAYER_HIDE.KEY,!0)},i.caughtAction=function(){this.spine.play(ne.Z.PLAYER_STARTLE.KEY)},i.escapeAction=function(){this.spine.play(ne.Z.PLAYER_ESCAPE.KEY)},t}(Phaser.GameObjects.Container),re=h.Z.STATIC_OBJECTS,oe=re.KEY,ce=re.FRAME,he=function(e){function t(t){var i;return(i=e.call(this,t,0,0,oe,ce.STATIC_MILK_BOTTLE)||this).initSprite(),i.scene.add.existing((0,m.Z)(i)),i}return(0,s.Z)(t,e),t.prototype.initSprite=function(){this.setOrigin(.5,1),this.setWorldSize(98.4,118.8)},t}(Phaser.GameObjects.Sprite),ue=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).innerCircle=void 0,i.outerCircle=void 0,i.innerCircleTween=void 0,i.outerCircleTween=void 0,i.outerCircleColor=void 0,i.innerCircle=new Phaser.GameObjects.Arc(i.scene,0,0,0,0,360,!1,16777215,0),i.innerCircle.setStrokeStyle(5,44975),i.add(i.innerCircle),i.outerCircle=new Phaser.GameObjects.Arc(i.scene,0,0,25,0,360,!1,16777215,0),i.outerCircle.setStrokeStyle(5,44975),i.add(i.outerCircle),Phaser.Display.Align.In.Center(i.innerCircle,(0,m.Z)(i),0,0),Phaser.Display.Align.In.Center(i.outerCircle,(0,m.Z)(i),0,0),i.scene.add.existing((0,m.Z)(i)),i.setSize(50,50),i.initAnimation(),i}(0,s.Z)(t,e);var i=t.prototype;return i.initAnimation=function(){var e=this;this.innerCircleTween=this.scene.add.tween({targets:this.innerCircle,props:{radius:{from:0,value:25,duration:500}},ease:"Power0",repeat:-1}),this.innerCircleTween.pause();var t=Phaser.Display.Color.ValueToColor(44975),i=Phaser.Display.Color.ValueToColor(16777215);this.outerCircleColor=this.scene.tweens.addCounter({from:0,to:100,duration:500,ease:Phaser.Math.Easing.Sine.InOut,repeat:-1,onUpdate:function(n){var s=n.getValue(),a=Phaser.Display.Color.Interpolate.ColorWithColor(t,i,100,s),r=Phaser.Display.Color.GetColor(a.r,a.g,a.b);e.outerCircle.strokeColor=r}}),this.outerCircleColor.pause(),this.outerCircleTween=this.scene.add.tween({targets:this.outerCircle,props:{radius:{from:25,value:50,duration:500}},ease:"Power0",repeat:-1}),this.outerCircleTween.pause()},i.startAnimation=function(){this.innerCircleTween.play(),this.outerCircleTween.play(),this.outerCircleColor.play()},i.resetAnimation=function(){this.innerCircleTween.complete(),this.outerCircleTween.complete(),this.outerCircleColor.complete()},i.stopAnimation=function(){this.innerCircleTween.stop(),this.outerCircleTween.stop(),this.outerCircleColor.stop()},i.resetCircles=function(){this.innerCircle.radius=1,this.outerCircle.radius=25},t}(Phaser.GameObjects.Container),le=h.Z.WATCHER,de=le.KEY,pe=le.FRAME,fe=function(e){function t(t){var i;return(i=e.call(this,t,0,0,de,pe.BOY_HEAD_NORMAL)||this).initSprite(),i}(0,s.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setWorldSize(185.9,117.3)},i.prepareAnimation=function(){this.setFrame(pe.BOY_HEAD_LOOKING)},i.missingAnimation=function(){this.setFrame(pe.BOY_HEAD_MISSING)},i.normalAnimation=function(){this.setFrame(pe.BOY_HEAD_NORMAL)},i.detectAnimation=function(){this.setFrame(pe.BOY_DETECT_PREFIX+"1")},i.riseAction=function(){var e=this;this.scene.add.tween({targets:this,duration:1e3,y:this.y-70,ease:"Power0",onComplete:function(){e.prepareAnimation()}})},i.hideAction=function(){var e=this;this.scene.add.tween({targets:this,duration:1e3,y:this.y+70,ease:"Power0",onStart:function(){e.normalAnimation()}})},i.stopAnimations=function(){this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()}))},t}(Phaser.GameObjects.Sprite),ge=h.Z.WATCHER,me=ge.KEY,ve=ge.FRAME,ye=function(e){function t(t,i){var n;if("left"===i)(n=e.call(this,t,0,0,me,ve.BOY_HAND_LEFT)||this).isLeftHand=void 0,n.isLeftHand=!0;else(n=e.call(this,t,0,0,me,ve.BOY_HAND_RIGHT)||this).isLeftHand=void 0,n.isLeftHand=!1;return n.initSprite(),n}(0,s.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1),this.setWorldSize(31.2,22.8)},i.raiseAnimation=function(){this.isLeftHand?this.setFrame(ve.BOY_HAND_UP_LEFT):this.setFrame(ve.BOY_HAND_UP_RIGHT)},i.normalAnimation=function(){this.isLeftHand?this.setFrame(ve.BOY_HAND_LEFT):this.setFrame(ve.BOY_HAND_RIGHT)},t}(Phaser.GameObjects.Sprite),Ee=h.Z.TUTORIAL,Se=Ee.KEY,Te=Ee.FRAME,be=function(e){function t(t){var i;return(i=e.call(this,t,0,0,Se,Te.TUTORIAL_SIGHT_STEP_2)||this).sightTween=void 0,i.initSprite(),i.hideSight(),i}(0,s.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,0),this.setWorldSize(262.5,186),this.setAlpha(.3)},i.setTutorialStep=function(e){if(3===e)this.setFrame(Te.TUTORIAL_SIGHT_STEP_3);else this.setFrame(Te.TUTORIAL_SIGHT_STEP_2)},i.revealSight=function(){var e=this;this.sightTween=this.scene.tweens.addCounter({from:0,to:186,duration:1e3,ease:"Power0",onUpdate:function(t){var i=t.getValue();e.setCrop(0,0,262.5,i)}})},i.hideSight=function(){this.sightTween&&this.sightTween.stop(),this.setCrop(0,0,262.5,0)},i.stopAnimations=function(){this.scene.tweens.getTweensOf(this).forEach((function(e){e.stop()})),this.hideSight()},t}(Phaser.GameObjects.Sprite),Ae=h.Z.TUTORIAL,Ce=Ae.KEY,Oe=Ae.FRAME,Ie=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).leftArrow=void 0,i.middleArrow=void 0,i.rightArrow=void 0,i.arrowScale=void 0,i.leftArrowTween=void 0,i.middleArrowTween=void 0,i.rightArrowTween=void 0,i.setSize(50,20),i.leftArrow=new Phaser.GameObjects.Sprite(i.scene,0,0,Ce,Oe.TUTORIAL_OBJECT_ARROW),i.leftArrow.setWorldSize(7.5,15),i.arrowScale=i.leftArrow.scale,i.leftArrow.angle=-30,i.add(i.leftArrow),Phaser.Display.Align.In.LeftCenter(i.leftArrow,(0,m.Z)(i),0,5),i.middleArrow=new Phaser.GameObjects.Sprite(i.scene,0,0,Ce,Oe.TUTORIAL_OBJECT_ARROW),i.middleArrow.setWorldSize(7.5,15),i.add(i.middleArrow),Phaser.Display.Align.In.Center(i.middleArrow,(0,m.Z)(i),0,0),i.rightArrow=new Phaser.GameObjects.Sprite(i.scene,0,0,Ce,Oe.TUTORIAL_OBJECT_ARROW),i.rightArrow.setWorldSize(7.5,15),i.rightArrow.angle=30,i.add(i.rightArrow),Phaser.Display.Align.In.RightCenter(i.rightArrow,(0,m.Z)(i),0,5),i.scene.add.existing((0,m.Z)(i)),i.initAnimations(),i}(0,s.Z)(t,e);var i=t.prototype;return i.initAnimations=function(){this.leftArrowTween=this.scene.add.tween({targets:this.leftArrow,scale:1.3*this.leftArrow.scale,duration:200,ease:"Power0",yoyo:!0,repeat:-1}),this.leftArrowTween.pause(),this.middleArrowTween=this.scene.add.tween({targets:this.middleArrow,scale:1.3*this.middleArrow.scale,duration:200,ease:"Power0",yoyo:!0,repeat:-1}),this.middleArrowTween.pause(),this.rightArrowTween=this.scene.add.tween({targets:this.rightArrow,scale:1.3*this.rightArrow.scale,duration:200,ease:"Power0",yoyo:!0,repeat:-1}),this.rightArrowTween.pause()},i.startAnimation=function(){this.leftArrowTween.play(),this.middleArrowTween.play(),this.rightArrowTween.play()},i.resetAnimation=function(){this.leftArrowTween.complete(),this.middleArrowTween.complete(),this.rightArrowTween.complete()},i.stopAnimation=function(){this.leftArrowTween.stop(),this.middleArrowTween.stop(),this.rightArrowTween.stop()},i.resetArrows=function(){this.leftArrow.scale=this.arrowScale,this.rightArrow.scale=this.arrowScale,this.middleArrow.scale=this.arrowScale},t}(Phaser.GameObjects.Container),we=h.Z.GAMEPLAY,Pe=we.KEY,_e=(we.FRAME,function(e){function t(t){var i;return(i=e.call(this,t,0,0,Pe,t.lang.Texture.FAILED)||this).initSprite(),i.setAlpha(0),i}(0,s.Z)(t,e);var i=t.prototype;return i.initSprite=function(){this.setOrigin(.5,1);var e=85.1;if("ru"===this.scene.lang.getCurrentLanguage())e=266.5/321*85.1;this.setWorldSize(186.6,e)},i.revealFailedText=function(){this.scene.add.tween({targets:this,alpha:1,y:this.y+60,duration:200,ease:"Power0"})},t}(Phaser.GameObjects.Sprite)),Re=function(e){function t(t,i,n){var s;return(s=e.call(this,t,i,n)||this).tutorialText=void 0,s.demoGameplayMask=void 0,s.background=void 0,s.foreground=void 0,s.mouse=void 0,s.staticObject=void 0,s.hand=void 0,s.touchCircle=void 0,s.watcherHead=void 0,s.leftWatcherHand=void 0,s.rightWatcherHand=void 0,s.sight=void 0,s.objectArrows=void 0,s.failedText=void 0,s.createTutorialText(),s.createBackgroundImage(),s.createDemoWatcherHead(),s.createForegroundImage(),s.createDemoWatcherHand(),s.createDemoFailedText(),s.createDemoSight(),s.createDemoObject(),s.createDemoObjectArrows(),s.createDemoTouchCircle(),s.createDemoHand(),s.createDemoMouse(),s.createDemoGameplayMask(),s.setDepth(y.Z.POPUP),s.scene.add.existing((0,m.Z)(s)),s}(0,s.Z)(t,e);var i=t.prototype;return i.createTutorialText=function(){this.tutorialText=this.scene.make.bitmapText({font:v.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(28),text:"Press and hold on the screen\n to stop the mouse and hide\n behind objects.",origin:{x:.5,y:.5}}),this.tutorialText.setCenterAlign(),this.add(this.tutorialText),Phaser.Display.Align.In.TopCenter(this.tutorialText,this,0,22)},i.createBackgroundImage=function(){this.background=new z(this.scene),this.add(this.background),Phaser.Display.Align.To.BottomCenter(this.background,this.tutorialText,0,-70)},i.createForegroundImage=function(){this.foreground=new Q(this.scene),this.add(this.foreground),Phaser.Display.Align.To.BottomCenter(this.foreground,this.background,-1*this.foreground.displayWidth/4,-27)},i.createDemoMouse=function(){this.mouse=new ae(this.scene),this.add(this.mouse),Phaser.Display.Align.To.BottomCenter(this.mouse,this.background,0,170)},i.createDemoObject=function(){this.staticObject=new he(this.scene),this.add(this.staticObject),Phaser.Display.Align.To.BottomCenter(this.staticObject,this.background,480,100)},i.createDemoObjectArrows=function(){this.objectArrows=new Ie(this.scene),this.add(this.objectArrows),Phaser.Display.Align.To.BottomCenter(this.objectArrows,this.background,10,65)},i.createDemoHand=function(){this.hand=new ie(this.scene),this.add(this.hand),Phaser.Display.Align.To.BottomCenter(this.hand,this.background,90,100)},i.createDemoTouchCircle=function(){this.touchCircle=new ue(this.scene),this.touchCircle.setVisible(!1),this.add(this.touchCircle),Phaser.Display.Align.To.BottomCenter(this.touchCircle,this.background,75,80)},i.createDemoWatcherHead=function(){this.watcherHead=new fe(this.scene),this.add(this.watcherHead),Phaser.Display.Align.To.BottomCenter(this.watcherHead,this.background,0,45)},i.createDemoSight=function(){this.sight=new be(this.scene),this.add(this.sight),Phaser.Display.Align.To.BottomCenter(this.sight,this.background,-2,50)},i.createDemoWatcherHand=function(){this.leftWatcherHand=new ye(this.scene,"left"),this.rightWatcherHand=new ye(this.scene,"right"),this.add(this.leftWatcherHand),this.add(this.rightWatcherHand),Phaser.Display.Align.To.BottomCenter(this.leftWatcherHand,this.background,-60,60),Phaser.Display.Align.To.BottomCenter(this.rightWatcherHand,this.background,50,60)},i.createDemoFailedText=function(){this.failedText=new _e(this.scene),this.add(this.failedText),Phaser.Display.Align.To.BottomCenter(this.failedText,this.background,0,-50)},i.createDemoGameplayMask=function(){var e=new Phaser.GameObjects.Graphics(this.scene),t=this.background.x+58,i=this.background.y,n=this.background.displayWidth-5,s=this.background.displayHeight+this.foreground.displayHeight+200;e.fillStyle(16777215,1),e.fillRect(t,i,n,s),this.demoGameplayMask=e.createGeometryMask(),this.background.setMask(this.demoGameplayMask),this.foreground.setMask(this.demoGameplayMask),this.staticObject.setMask(this.demoGameplayMask),this.sight.setMask(this.demoGameplayMask),this.mouse.setMask(this.demoGameplayMask)},i.setTutorialText=function(e){this.tutorialText.setText(e)},i.resetTutorial=function(){this.foreground.resetPositions(),this.touchCircle.resetCircles(),this.touchCircle.setVisible(!1),Phaser.Display.Align.To.BottomCenter(this.staticObject,this.background,480,140),Phaser.Display.Align.To.BottomCenter(this.mouse,this.background,0,170),this.mouse.runAction(),Phaser.Display.Align.To.BottomCenter(this.watcherHead,this.background,0,45),this.watcherHead.normalAnimation(),Phaser.Display.Align.To.BottomCenter(this.leftWatcherHand,this.background,-50,60),Phaser.Display.Align.To.BottomCenter(this.rightWatcherHand,this.background,50,60),Phaser.Display.Align.To.BottomCenter(this.failedText,this.background,0,-50),this.failedText.setAlpha(0)},t}(Phaser.GameObjects.Container),ke=function(e){function t(t,i,n){var s;return(s=e.call(this,t,i,n)||this).tutorialTimeline=void 0,s.objectStartingPosX=void 0,s.watcherStartingPosY=void 0,s.sight.setTutorialStep(2),s.setTutorialText(s.scene.lang.Text.TUTORIAL_STEP_2),s.leftWatcherHand.setVisible(!1),s.rightWatcherHand.setVisible(!1),s.objectArrows.setVisible(!1),s.objectStartingPosX=s.staticObject.x,s.watcherStartingPosY=s.watcherHead.y,s}(0,s.Z)(t,e);var i=t.prototype;return i.startAnimations=function(){this.foreground.runAnimation(),this.mouse.runAction(),this.watcherHead.riseAction(),this.startObjectMovement()},i.startObjectMovement=function(){var e=this,t=this.scene.tweens.createTimeline({loop:-1,onLoop:function(){e.watcherHead.riseAction()}});t.add({targets:this.staticObject,duration:500,x:this.staticObject.x-120,ease:"Power0",onComplete:function(){e.leftWatcherHand.setVisible(!0),e.rightWatcherHand.setVisible(!0)}}),t.add({targets:this.staticObject,duration:1300,x:this.staticObject.x-432,ease:"Power0",onComplete:function(){e.hand.holdAnimation(),e.sight.revealSight()}}),t.add({targets:this.staticObject,duration:200,x:this.staticObject.x-480,ease:"Power0",onComplete:function(){e.touchCircle.setVisible(!0),e.touchCircle.startAnimation(),e.foreground.pauseAnimation(),e.mouse.hideAction(),e.objectArrows.setVisible(!0),e.objectArrows.startAnimation()}}),t.add({targets:this.staticObject,delay:2e3,x:this.staticObject.x-480,onComplete:function(){e.sight.hideSight(),e.watcherHead.missingAnimation()}}),t.add({targets:this.staticObject,delay:1e3,x:this.staticObject.x-480,onComplete:function(){e.watcherHead.hideAction(),e.leftWatcherHand.setVisible(!1),e.rightWatcherHand.setVisible(!1),e.foreground.resumeAnimation(),e.mouse.runAction(),e.hand.releaseAnimation(),e.touchCircle.resetAnimation(),e.touchCircle.setVisible(!1),e.objectArrows.resetAnimation(),e.objectArrows.setVisible(!1)}}),t.add({targets:this.staticObject,duration:2e3,x:this.staticObject.x-960,ease:"Power0",onComplete:function(){e.staticObject.x+=960}}),t.play(),this.tutorialTimeline=t},i.closeTutorial=function(){this.tutorialTimeline.stop(),this.foreground.stopAnimation(),this.foreground.resetPositions(),this.watcherHead.stopAnimations(),this.watcherHead.y=this.watcherStartingPosY,this.watcherHead.normalAnimation(),this.leftWatcherHand.setVisible(!1),this.rightWatcherHand.setVisible(!1),this.mouse.spine.state.timeScale=0,this.touchCircle.stopAnimation(),this.touchCircle.resetCircles(),this.touchCircle.setVisible(!1),this.objectArrows.stopAnimation(),this.objectArrows.resetArrows(),this.objectArrows.setVisible(!1),this.sight.stopAnimations(),this.staticObject.x=this.objectStartingPosX;var e=this.scene.tweens.getTweensOf(this.staticObject);e.forEach((function(e){e.stop()})),(e=this.scene.tweens.getTweensOf(this.hand)).forEach((function(e){e.stop()})),this.hand.angle=36},t}(Re),xe=function(e){function t(t,i,n){var s;return(s=e.call(this,t,i,n)||this).tutorialTimeline=void 0,s.playerPosY=void 0,s.staticObject.kill(),s.leftWatcherHand.kill(),s.rightWatcherHand.kill(),s.objectArrows.kill(),s.setTutorialText(s.scene.lang.Text.TUTORIAL_STEP_1),s.playerPosY=s.mouse.y,s}(0,s.Z)(t,e);var i=t.prototype;return i.startAnimations=function(){this.foreground.runAnimation(),this.mouse.runAction(),this.startObjectMovement()},i.startObjectMovement=function(){var e=this,t=this.scene.tweens.createTimeline({loop:-1});t.add({targets:this.staticObject,duration:1800,x:this.staticObject.x-432,ease:"Power0",onComplete:function(){e.hand.holdAnimation()}}),t.add({targets:this.staticObject,duration:200,x:this.staticObject.x-480,ease:"Power0",onComplete:function(){e.touchCircle.setVisible(!0),e.touchCircle.startAnimation(),e.foreground.pauseAnimation(),e.mouse.hideAction()}}),t.add({targets:this.staticObject,duration:3500,x:this.staticObject.x-480,ease:"Power0",onComplete:function(){e.foreground.resumeAnimation(),e.mouse.runAction(),e.hand.releaseAnimation(),e.touchCircle.resetAnimation(),e.touchCircle.setVisible(!1)}}),t.add({targets:this.staticObject,duration:2e3,x:this.staticObject.x-960,ease:"Power0",onComplete:function(){e.staticObject.x+=960}}),t.play(),this.tutorialTimeline=t},i.closeTutorial=function(){this.tutorialTimeline.stop(),this.foreground.stopAnimation(),this.foreground.resetPositions(),this.mouse.spine.state.timeScale=0,this.mouse.y=this.playerPosY,this.touchCircle.stopAnimation(),this.touchCircle.resetCircles(),this.touchCircle.setVisible(!1);var e=this.scene.tweens.getTweensOf(this.staticObject);e.forEach((function(e){e.stop()})),(e=this.scene.tweens.getTweensOf(this.hand)).forEach((function(e){e.stop()})),this.hand.angle=36},t}(Re),Le=function(e){function t(t,i,n){var s;return(s=e.call(this,t,i,n)||this).tutorialTimeline=void 0,s.playerPosX=void 0,s.failedTextY=void 0,s.watcherStartingPosY=void 0,s.objectStartingPosX=void 0,s.sight.setTutorialStep(3),s.setTutorialText(s.scene.lang.Text.TUTORIAL_STEP_3),s.objectArrows.setVisible(!1),s.hand.setVisible(!1),Phaser.Display.Align.To.BottomCenter(s.watcherHead,s.background,0,-25),s.watcherHead.prepareAnimation(),Phaser.Display.Align.To.BottomCenter(s.staticObject,s.background,240,100),s.playerPosX=s.mouse.x,s.failedTextY=s.failedText.y,s.watcherStartingPosY=s.watcherHead.y,s.objectStartingPosX=s.staticObject.x,s}(0,s.Z)(t,e);var i=t.prototype;return i.startAnimations=function(){this.foreground.runAnimation(),this.mouse.runAction(),this.startObjectMovement()},i.startObjectMovement=function(){var e=this,t=this.scene.tweens.createTimeline();t.add({targets:this.staticObject,duration:1500,x:this.staticObject.x-360,ease:"Power0",onComplete:function(){e.sight.revealSight()}}),t.add({targets:this.staticObject,duration:500,x:this.staticObject.x-480,ease:"Power0",onComplete:function(){e.sight.hideSight(),e.mouse.caughtAction(),e.watcherHead.detectAnimation(),e.foreground.pauseAnimation()}}),t.add({targets:this.staticObject,delay:500,x:this.staticObject.x-480,onComplete:function(){e.failedText.revealFailedText(),e.mouse.setFlipX(!0),e.mouse.runAction()}}),t.add({targets:this.mouse,duration:2e3,x:this.mouse.x-480,ease:"Power0"}),t.play(),this.tutorialTimeline=t},i.closeTutorial=function(){this.tutorialTimeline.stop(),this.foreground.stopAnimation(),this.foreground.resetPositions(),this.watcherHead.stopAnimations(),this.watcherHead.y=this.watcherStartingPosY,this.watcherHead.prepareAnimation(),this.mouse.spine.state.timeScale=0,this.mouse.x=this.playerPosX,this.mouse.setFlipX(!1),this.sight.stopAnimations(),this.failedText.y=this.failedTextY,this.failedText.setAlpha(0),this.staticObject.x=this.objectStartingPosX,this.scene.tweens.getTweensOf(this.staticObject).forEach((function(e){e.stop()}))},t}(Re),De=h.Z.DEFAULT,Be=De.KEY,Ne=De.FRAME,Me=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).popup=void 0,a.title=void 0,a.holdTutorial=void 0,a.hidingTutorial=void 0,a.losingTutorial=void 0,a.playButton=void 0,a.tutorialTimeline=void 0,a.currentStep=void 0,a.tutorialsDisplayed=[],a.popupShowUpAnimation=void 0,a.popupFadeOutAnimation=void 0,a.handleClose=function(){switch(a.runCloseAnimation(),a.tutorialTimeline.stop(),a.currentStep){case 1:a.holdTutorial.closeTutorial();break;case 2:a.hidingTutorial.closeTutorial(),a.hidingTutorial.setVisible(!1),a.holdTutorial.setVisible(!0);break;case 3:a.losingTutorial.closeTutorial(),a.losingTutorial.setVisible(!1),a.holdTutorial.setVisible(!0)}a.currentStep=1,a.playButton.setVisible(!1),a.playButton.setDisabled(!0),a.scene.scene.resume(u.C.GAME_SCENE),a.scene.analytics.event(Y._.TUTORIAL_COMPLETE)},a.createPopup(),a.createTitle(),a.createTutorialContent(),a.createCloseButton(),a.createPlayButton(),a.addItem(),a.setDepth(l.Ks.POPUP),a.background.setAlpha(.8),a}(0,s.Z)(t,e);var i=t.prototype;return i.createPopup=function(){this.popup=new L.Z(this.scene,0,0,310,525),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},i.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Be,frame:Ne.RIBBON_PANEL});e.setWorldSize(232,63);var t=this.scene.make.bitmapText({font:v.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.TUTORIAL,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-5),this.title.add([e,t]),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},i.createTutorialContent=function(){this.holdTutorial=new xe(this.scene,0,0),this.hidingTutorial=new ke(this.scene,0,0),this.losingTutorial=new Le(this.scene,0,0),this.popup.add(this.holdTutorial),Phaser.Display.Align.In.TopCenter(this.holdTutorial,this.popup,0,-80),this.popup.add(this.hidingTutorial),this.hidingTutorial.setVisible(!1),Phaser.Display.Align.In.TopCenter(this.hidingTutorial,this.popup,0,-80),this.popup.add(this.losingTutorial),this.losingTutorial.setVisible(!1),Phaser.Display.Align.In.TopCenter(this.losingTutorial,this.popup,0,-80),this.currentStep=1},i.createCloseButton=function(){var e=new x.Z(this.scene,{key:Be,frame:Ne.BUTTON_CLOSE,width:32,height:31,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,e.setPosition(150,-260),this.popup.add(e)},i.createPlayButton=function(){this.playButton=new k.Z(this.scene,Be,Ne.BUTTON_GREEN,137.5,41),this.playButton.setName("Play");var e=this.scene.make.bitmapText({font:v.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.PLAY,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(e,this.playButton,0,1),this.playButton.add(e),this.playButton.setPosition(0,223),this.playButton.onClick=this.handleClose,this.playButton.setVisible(!1),this.playButton.setDisabled(!0)},i.addItem=function(){this.popup.add([this.title,this.playButton])},i.open=function(){e.prototype.open.call(this),this.runOpenAnimation(),this.showTutorial(),this.scene.scene.pause(u.C.GAME_SCENE),this.scene.analytics.event(Y._.TUTORIAL_BEGIN)},i.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(B.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400))},i.showTutorial=function(){var e=this,t=this.scene.tweens.createTimeline({loop:-1,onStart:function(){e.holdTutorial.startAnimations(),e.addToAnalytics(e.currentStep.toString())}});t.add({targets:this.holdTutorial,x:this.holdTutorial.x,delay:5e3,ease:"Power0",onComplete:function(){e.currentStep=2,e.holdTutorial.closeTutorial(),e.holdTutorial.setVisible(!1),e.hidingTutorial.startAnimations(),e.hidingTutorial.setVisible(!0),e.addToAnalytics(e.currentStep.toString())}}),t.add({targets:this.holdTutorial,x:this.holdTutorial.x,delay:5e3,ease:"Power0",onComplete:function(){e.currentStep=3,e.playButton.visible||(e.playButton.setVisible(!0),e.playButton.setDisabled(!1)),e.hidingTutorial.closeTutorial(),e.hidingTutorial.setVisible(!1),e.losingTutorial.startAnimations(),e.losingTutorial.setVisible(!0),e.addToAnalytics(e.currentStep.toString())}}),t.add({targets:this.holdTutorial,x:this.holdTutorial.x,delay:5e3,ease:"Power0",onComplete:function(){e.currentStep=1,e.losingTutorial.closeTutorial(),e.losingTutorial.setVisible(!1),e.holdTutorial.startAnimations(),e.holdTutorial.setVisible(!0)}}),t.play(),this.tutorialTimeline=t},i.addToAnalytics=function(e){var t;j()(t=this.tutorialsDisplayed).call(t,e)||(this.tutorialsDisplayed.push(e),this.scene.analytics.event(Y._.TUTORIAL_STEP,{tutorial_step:e}))},i.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(B.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},i.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var i=this.popup,n=i.y,s=i.scale;this.popupShowUpAnimation=new R.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:n},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:s}}})}this.popupShowUpAnimation.play()},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new c.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0),i.scene.screen.close(i.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Ze=h.Z.DEFAULT,Ge=Ze.KEY,Fe=Ze.FRAME,Ue=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,r()(t=[this]).call(t,s))||this).mask=void 0,i.fadeInAnim=void 0,i.fadeOutAnim=void 0,i.fpsMeter=void 0,i.memoryMeter=void 0,i.switchScene=function(e){i.currentScene.switch(e)},i.emitGameEventStartScene=function(e){var t=e.scene.key;i.updateSceneState(),i.runMaskFadeOutAnimation(),i.updateActiveSceneKey(t),i.game.events.emit(Phaser.Scenes.Events.START,t),(0,f.sw)("scene","Start scene: "+t)},i.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(i.runMaskFadeInAnimation(),i.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},i.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(i.updateSceneState(),i.runMaskFadeOutAnimation(),i.updateActiveSceneKey(t),i.game.events.emit(Phaser.Scenes.Events.WAKE,t))},i.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;i.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},i.emitGameEventResumeScene=function(e){var t=e.scene.key;i.game.events.emit(Phaser.Scenes.Events.RESUME,t)},i.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;i.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},i}(0,s.Z)(t,e);var i=t.prototype;return i.init=function(){this.listenScenesEvents(),this.game.globalScene=this},i.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addPauseScreen(),this.addTutorialScreen(),this.addFPS(),this.addMemory()},i.addNotifyScreen=function(){var e=this.screen.add(l.o4.NOTIFY_SCREEN,O);Phaser.Display.Align.In.Center(e,this.gameZone)},i.addPauseScreen=function(){var e=this.screen.add(l.o4.PAUSE_SCREEN,U);Phaser.Display.Align.In.Center(e,this.gameZone)},i.addTutorialScreen=function(){var e=this.screen.add(l.o4.TUTORIAL_SCREEN,Me);Phaser.Display.Align.In.Center(e,this.gameZone)},i.addMask=function(){this.mask=this.make.image({key:Ge,frame:Fe.BLANK});var e=this.gameZone,t=e.width,i=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,i)},i.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new b(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},i.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new A(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},i.updateSceneState=function(){this.setGlobalSceneOnTop()},i.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},i.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},i.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},i.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(u.K.SWITCH,this.switchScene)},i.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},i.getCurrentScene=function(){return this.currentScene},i.updateActiveSceneKey=function(e){e!==u.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},i.logEventOpen=function(){},i.logPageviewOnOpen=function(){},(0,n.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),He=Ue},476:function(e,t,i){"use strict";var n=i(24),s=i(17),a=i(2),r=i(21),o=i.n(r),c=i(56),h=i.n(c),u=i(31),l=i(228),d=i(477),p=i(465),f=i(113),g=i(114),m=i(112),v=i(630),y=i(78),E=i(478),S=i(63),T=i(97),b=i(20),A=i(62),C=i(79),O=i(631),I=i(633),w=i(632),P=GameCore.Configs.Network,_=b.Z.DEFAULT,R=_.KEY,k=_.FRAME,x=function(e){function t(t,i,a,r){var c;return(c=e.call(this,t,i,a,r)||this).rewardValue=void 0,c.onReward=void 0,c.hand=void 0,c.viewAdButton=void 0,c.skipButton=void 0,c.giftIcon=void 0,c.giftIconWhite=void 0,c.currencyIcon=void 0,c.currencyText=void 0,c.popupContents=void 0,c.cometTwinkle=void 0,c.starTwinkleUp=void 0,c.sparksExplosive=void 0,c.popupFadeOutAnimation=void 0,c.backgroundFadeInAnimation=void 0,c.contentShowUpAnimation=void 0,c.giftEntrancesAnimation=void 0,c.giftAttentionAnimation=void 0,c.iconAttentionAnimation=void 0,c.giftShakeAnimation=void 0,c.giftOpenAnimation=void 0,c.adsTimer=void 0,c.buttonsAnimation=void 0,c.open=function(t){e.prototype.open.call((0,s.Z)(c),t);var i=c.getData("awardCoins");c.setRewardValue(i),c.runOpenAnimation()},c.handleClosePopup=function(){c.runCloseAnimation()},c.handleShowRewardedVideoAd=(0,n.Z)(o().mark((function e(){var t,i,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.scene,i=t.audio,n=t.game,e.prev=1,c.viewAdButton.setDisabled(!0),n.globalScene.screen.open(A.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=8,new(h())((function(e,t){var i;null==(i=c.adsTimer)||i.remove(),c.adsTimer=c.scene.time.delayedCall(P.Timeout,t),c.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?c.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):c.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,c.scene.ads.showRewardedVideoAsync();case 10:n.globalScene.screen.close(A.o4.NOTIFY_SCREEN),c.starTwinkleUp.stop(),c.popupContents.killGroup(),c.scene.audio.playSound(C.Z.DAILY_REWARD),c.runTheGiftEntrancesAnimation(0,1500),e.next=25;break;case 17:if(e.prev=17,e.t0=e.catch(1),c.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,c.getScreenName(),e.t0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=24;break}if("USER_INPUT"!==e.t0.code){e.next=24;break}return c.showNotifySkipAds(),e.abrupt("return");case 24:c.showNotifyNoAds();case 25:return e.prev=25,null==(s=c.adsTimer)||s.destroy(),i.unmuteAll(),i.playMusic(),c.viewAdButton.setDisabled(!1),e.finish(25);case 31:case"end":return e.stop()}}),e,null,[[1,17,25,31]])}))),c.handleTheGiftClick=function(){c.setTheGiftClickable(!1),c.logButtonEvent("OpenGift"),c.hand.kill(),c.giftIconWhite.revive(),c.scene.tweens.killTweensOf(c.giftIcon),Phaser.Display.Align.In.Center(c.giftIconWhite,c.giftIcon),c.scene.audio.playSound(C.Z.GIFT_CHARGE),c.runShakeTheGift(),c.runOpenTheGift()},c.showNotifyNoAds=function(e){e&&e.name!==A.o4.NOTIFY_SCREEN||c.scene.game.globalScene.screen.open(A.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.NO_ADS,duration:1200,loading:!1})},c.showNotifySkipAds=function(){c.scene.game.globalScene.screen.open(A.o4.NOTIFY_SCREEN,{message:c.scene.lang.Text.SORRY_NO_REWARDS+"\n"+c.scene.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},c.runCloseAnimation=function(){c.runExitsAnimation(0,200)},c.setDepth(A.Ks.POPUP),c.background.setAlpha(.8),c.createViewAdsButton(),c.createSkipButton(),c.createCurrencyIcon(),c.createCurrencyText(),c.createEffects(),c.createGiftIcon(),c.createHand(),c.createContentsGroup(),c}(0,a.Z)(t,e);var i=t.prototype;return i.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},i.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(u._.BUTTON_CLICK,{button_name:e,screen_name:t})},i.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500),this.runButtonsAnimation(500)},i.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new f.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},i.runPopupContentEntrancesAnimation=function(e,t){var i;null==(i=this.contentShowUpAnimation)||i.remove(),this.contentShowUpAnimation=new m.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},i.runLogoAttentionAnimation=function(e){var t=this.currencyIcon,i=t.x,n=t.y,s=t.width,a=t.height;this.starTwinkleUp.run(1,i,n,s,a),this.iconAttentionAnimation||(this.iconAttentionAnimation=new l.Z({targets:[this.currencyIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},i.runTheGiftEntrancesAnimation=function(e,t){var i,n=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(i=this.giftEntrancesAnimation)||i.remove();var s=this.giftIcon,a=s.x,r=s.y,o=this.currencyText,c={x:a,y:r},h={x:o.x,y:o.y},u=1/GameCore.Utils.Image.getImageScale();this.giftEntrancesAnimation=new v.Z({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[h.x,h.y]],props:{scale:{start:.5*u,to:u},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),i=e.y+Phaser.Math.RND.between(-40,40);n.cometTwinkle.explode(1,t,i)},onComplete:function(){n.scene.audio.playSound(C.Z.GIFT_REVEAL);n.starTwinkleUp.setScale(1.5);var e=n.giftIcon,t=e.x,i=e.y,s=e.width,a=e.height;n.starTwinkleUp.run(1,t,i,s/1.5,a/1.5),n.moveTo(n.starTwinkleUp,n.length-1),n.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},i.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new l.Z({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),this.hand.playAnimation(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},i.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new d.Z({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},i.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/GameCore.Utils.Image.getImageScale();this.giftOpenAnimation=new p.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.scene.audio.playSound(C.Z.GIFT_EXPLODE),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},i.runExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new g.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){i.scene.screen.close(i.name)}})),this.popupFadeOutAnimation.play()},i.createHand=function(){this.hand=new E.Z(this.scene),this.add(this.hand)},i.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},i.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,R,k.LOGO_GIFT_ADS),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-100),this.add(this.currencyIcon)},i.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(32),font:T.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},i.setRewardValue=function(e){this.rewardValue=e;var t=this.scene.lang.getText({key:"WATCH_VIDEO",variables:[e]});this.currencyText.setText(t),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,72)},i.createViewAdsButton=function(){this.viewAdButton=new y.Z(this.scene,R,k.BUTTON_GREEN_REVIVE,151.5,49),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,R,k.ICON_ADS);e.setWorldSize(37,29),Phaser.Display.Align.In.Center(e,this.viewAdButton),e.setX(-47),this.viewAdButton.add(e);var t=23;if("ru"===this.scene.lang.getCurrentLanguage())t=24;var i=this.scene.make.bitmapText({font:T.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.GET});Phaser.Display.Align.In.Center(i,this.viewAdButton,t,2),this.viewAdButton.add(i),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},i.createSkipButton=function(){var e=87,t=22;if("ru"===this.scene.lang.getCurrentLanguage())e=109,t=20;this.skipButton=new y.Z(this.scene,R,this.scene.lang.Texture.NO_THANKS,e,t),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},i.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:R,frame:k.LOGO_GIFT_WHITE,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(S.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:R,frame:k.LOGO_GIFT,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},i.createEffects=function(){this.cometTwinkle=new O.Z(this.scene),this.starTwinkleUp=new w.Z(this.scene),this.sparksExplosive=new I.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},i.runButtonsAnimation=function(e){var t;this.buttonsAnimation||(this.buttonsAnimation=new l.Z({targets:[this.viewAdButton],delay:e,props:{scale:"-=0.03"}})),null==(t=this.buttonsAnimation)||t.play()},t}(GameCore.Screen);t.Z=x},613:function(e,t,i){"use strict";var n=i(54),s=i(625),a=i(45),r=i(24),o=i(2),c=i(21),h=i.n(c),u=i(621),l=0,d=0,p=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;d=30;!function i(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(d)),d+=30/t,t--,i()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!d||d<30)&&(d=60),l=d;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(d)),d+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-d,i=Math.round(e*t+d);i>l&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(i)},e}(),f=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,i){void 0===i&&(i=2),this.setSize(e*i,t*i),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var i=this.x,n=this.y,s=this.width,a=this.height,r=this.depth,o=this.originX,c=this.originY,h=this.scene.add.rectangle(i,n,s,a,e,t);h.setName("Debug Box"),h.setDepth(r);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&h.setOrigin(o,c),h},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),g=f,m=i(55),v=i.n(m),y=GameCore.Configs.Ads.Mockup.GiphyApiKey,E=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t,i,n,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(i=document.getElementById("mock-banner-ads"))){e.next=11;break}if((n=i.getElementsByTagName("img"))&&!(n.length<=0)){e.next=8;break}return e.abrupt("return");case 8:n[0].src=t,e.next=27;break;case 11:(s=document.createElement("div")).id="mock-banner-ads",s.style.width="100%",s.style.height="50px",s.style.bottom="var(--sab)",s.style.position="fixed",s.style.background="#fff url("+t+") center center/auto no-repeat",s.style.outline="2px solid #ffffff40",s.style.outlineOffset="-2px",a=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(a),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",a.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),s.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(s);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t,i,n,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+y+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return i=e.sent,e.next=6,i.json();case 6:if(n=e.sent,GameCore.Utils.Valid.isObject(n)){e.next=9;break}return e.abrupt("return","");case 9:return s=n.data,a=Math.floor(Math.random()*s.length),e.abrupt("return",s[a].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),S={LOADED:"loaded",DISPLAYED:"displayed"},T=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(T||{}),b=T,A=function(e){return e.REWARDED="rewarded",e.INTERSTITIAL="interstitial",e}(A||{}),C=A,O=i(53),I=function(e){function t(t,i){var n;return(n=e.call(this,i)||this).code=void 0,n.code=t,n.message=i,n}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),w=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=b.IDLE};GameCore.Ads={Types:C,Status:b,Events:S,AdError:I,AdInstance:w};var P=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).events=void 0,i.enabled=void 0,i.config=void 0,i.lastInterAdShownTime=void 0,i.lastRewardAdShownTime=void 0,i.interstitial=void 0,i.rewardedVideo=void 0,i.safeAreaBottom=void 0,i.showingBannerAd=void 0,i.reloadBannerAdIntervals=void 0,i.bannerAdConfig=void 0,i.isHaveBannerAdOptions=void 0,i}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},i.setAdInstance=function(e){var t=this.config,i=t.rewardAdOptions,n=t.interstitialAdOptions;this.interstitial=new e(C.INTERSTITIAL,i.pID),this.rewardedVideo=new e(C.REWARDED,n.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new I("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(C.INTERSTITIAL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new I("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(C.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,i=e-this.lastRewardAdShownTime;return i<t?t-i:0},i.preloadAdAsync=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new I("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(i=this.getAdInstanceByType(t))){e.next=5;break}throw new I("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return e.next=7,i.loadAsync();case 7:this.events.emit(S.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new I("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(i=this.getAdInstanceByType(t))){e.next=5;break}throw new I("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t===C.INTERSTITIAL&&(this.lastInterAdShownTime=window.performance.now()/1e3),t===C.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,i.showAsync();case 9:this.events.emit(S.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e){switch(e){case C.INTERSTITIAL:return this.interstitial;case C.REWARDED:return this.rewardedVideo;default:return null}},i.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,i=t.secondsFirstTime,n=t.secondsBetweenAds,s=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?s>=n:s>=i},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,i=t.secondsFirstTime,n=t.secondsBetweenAds,s=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?s>=n:s>=i},i.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),i=0;i<e.length;i++){var n=e[i],s=n.platform;if("ALL"==s||"DESKTOP"==s&&t||"MOBILE"==s&&!t)return this.bannerAdConfig=n,!0}return!1},i.showBannerAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t,i,n,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,i=t.placementId,n=t.secondsReload,i&&""!=i){e.next=8;break}return e.abrupt("return");case 8:if(!(n>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[i]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(i),this.reloadBannerAdIntervals[i]=setInterval((function(){s.loadBannerAdAsync(i)}),1e3*n),e.abrupt("return");case 14:return this.loadBannerAdAsync(i),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,E.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,E.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var i=e.placementId,n=t.reloadBannerAdIntervals[i];n&&(clearInterval(n),t.reloadBannerAdIntervals[i]=null),t.showingBannerAd[i]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;var e=(this.bannerAdConfig||{}).bannerHeight,t=(void 0===e?0:e)+this.safeAreaBottom;if(this.game.world){var i=this.game.world,n=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(t,n/s)}return t},t}(Phaser.Plugins.BasePlugin),_=P,R=function(){function e(e,t,i){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=i||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,i){this.processEvent(e,t,i),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.setTrafficSource=function(e){this.processTrafficSource(e),this.selfLog},t.levelStart=function(e,t,i,n){this.processLevelStart(e,t,i),this.selfLog},t.levelFail=function(e,t,i,n){this.processLevelFail(e,t,i),this.selfLog},t.levelRescue=function(e,t,i,n){this.processLevelRescue(e,t,i),this.selfLog},t.levelComplete=function(e,t,i,n){this.processLevelComplete(e,t,i),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.showAdFail=function(e,t,i){this.processShowAdFail(e,t,i),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,i){},t.processLevelFail=function(e,t,i){},t.processLevelRescue=function(e,t,i){},t.processLevelComplete=function(e,t,i){},t.processShowInterstitialAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,i){},e}();GameCore.Analytics={BaseAnalytics:R};var k=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).analytics=void 0,i.pageview=function(e){i.isActive()&&i.analytics.forEach((function(t){t.pageview(e)}))},i}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.analytics=[]},i.add=function(e){this.analytics.push(e)},i.event=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.event(e,t,i)}))},i.levelStart=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.levelStart(e,t,i)}))},i.levelRescue=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.levelRescue(e,t,i)}))},i.levelFail=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.levelFail(e,t,i)}))},i.levelComplete=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.levelComplete(e,t,i)}))},i.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},i.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},i.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},i.showAdFail=function(e,t,i){this.isActive()&&this.analytics.forEach((function(n){n.showAdFail(e,t,i)}))},i.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),x=k,L={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECT_FILES:{button_click:"./assets/sounds/button_click.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",diamonds_eat:"./assets/sounds/diamonds_eat.mp3",gift_charge:"./assets/sounds/gift_charge.mp3",gift_explode:"./assets/sounds/gift_explode.mp3",gift_reveal:"./assets/sounds/gift_reveal.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",start_game:"./assets/sounds/start_game.mp3",beep:"./assets/sounds/beep.mp3",level_complete:"./assets/sounds/level_complete.mp3",level_fail:"./assets/sounds/level_fail.mp3",watcher_detected:"./assets/sounds/watcher_detected.mp3",watcher_not_detected:"./assets/sounds/watcher_not_detected.mp3",bread_fall:"./assets/sounds/bread_fall.mp3",rocket_launch:"./assets/sounds/rocket_launch.mp3",coin_collect:"./assets/sounds/coin_collect.mp3",watcher_sight:"./assets/sounds/watcher_sight.mp3"}},D=i(479),B=i.n(D),N=L.EFFECT_FILES,M=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(B())}var t=e.prototype;return t.play=function(e,t){var i=this,n=(0,a.Z)({volume:this.volume},t||{});n.volume!==this.volume&&(n.volume*=this.volume);var s=this.audios.get(e);s?s.play(void 0,n):(this.game.globalScene.load.audio(e,N[e]),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=i.game.sound.add(e);i.audios.set(e,t),t.play(void 0,n)})),this.game.globalScene.load.start())},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),Z=M,G=function(){function e(e,t,i){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=i,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var i,n,s,r=(0,a.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(n=this.audio)?void 0:n.seek)>0?void this.audio.resume():void(null==(s=this.audio)||s.play(e,r));this.createMaker(e),null==(i=this.markers[e])||i.play(e,r)},t.pause=function(e){var t,i;this.isSprite?null==(t=this.markers[e])||t.pause():null==(i=this.audio)||i.pause()},t.stop=function(e){var t,i;this.isSprite?null==(t=this.markers[e])||t.stop():null==(i=this.audio)||i.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),F=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).soundManager=void 0,i.musicManager=void 0,i.isMuteAll=void 0,i.initMusic=function(e){i.musicManager=new G(i.game,e,!1),i.setMusicVolume(1)},i.initSound=function(){i.soundManager=new Z(i.game),i.setSoundVolume(1)},i}(0,o.Z)(t,e);var i=t.prototype;return i.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(i){}},i.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},i.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,a.Z)({loop:!0,volume:.4},e))}catch(t){}},i.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},i.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},i.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},i.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},i.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},i.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},i.muteAll=function(){this.isMuteAll=!0,this.setMusicVolume(0),this.setSoundVolume(0),this.game.sound.mute=!0},i.unmuteAll=function(e){void 0===e&&(e=1),this.isMuteAll=!1,this.setMusicVolume(e),this.setSoundVolume(e),this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),U=F,H=i(95),j="AUTH_TOKEN_REQUEST",Y="AUTH_TOKEN_RECEIVED",K=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.name="RequestTokenFail",n.message=t||"Request token fail",n.payload=i||{},n}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),W=i(61),V="auth",z=(0,W.P1)([function(e){return e[V].token}],(function(e){return e})),X=(0,W.P1)([function(e){return e[V].isRequesting}],(function(e){return e})),J=function(e){return{type:Y,payload:{token:e}}},q=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.requestToken=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t,i){var s,a,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=window.game.facebook,a=i(),r=z(a),!X(a)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:j,payload:{}}),e.next=10,s.getPlayerToken();case 10:o=e.sent,t(J(o)),e.next=24;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(c=GameCore.Utils.Valid.isGameSDKError)(e.t0)||"PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(J("")),!c(e.t0)||"string"!==typeof e.t0.message){e.next=23;break}return(0,n.tO)(new Error(e.t0.message)),e.abrupt("return");case 23:(0,n.tO)(new K);case 24:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,i){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getToken=function(){return z(this.state)},(0,H.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Q=q,$=i(98),ee=i.n($),te=i(56),ie=i.n(te),ne=function(e,t){void 0===t&&(t=1);var i=new Image;i.onload=function(){var e,i;e=this.width*t,i=this.height*t,Math.floor(i/2),Math.floor(e/2)},i.src=e},se=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).width=void 0,i.height=void 0,i.renderOptions=void 0,i.canvas=void 0,i}(0,o.Z)(t,e);var i=t.prototype;return i.preload=function(e){var t=this,i=ee()(e);i.length<1||(i.forEach((function(i){t.scene.load.image(i,e[i])})),this.scene.load.start())},i.capture=function(){var e=(0,r.Z)(h().mark((function e(t){var i,n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.width,n=t.height,s=t.renderOptions,this.width=i,this.height=n,this.renderOptions=s,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},i.loadImages=function(){var e=this;return new(ie())((function(t,i){for(var n in e.renderOptions){var s=e.renderOptions[n],a=s.name,r=s.image;if(r)e.scene.textures.get(a).key!==a&&e.scene.load.image(a,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");i(e)})),e.scene.load.start()}))},i.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},i.drawText=function(e){var t=this.canvas.context,i=e.x,n=e.y,s=e.font,a=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=s+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(a,i,n)},i.drawImage=function(e){var t=this.canvas.context,i=e.x,n=e.y,s=e.name,a=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,h=this.scene.textures.get(s),u=h.getSourceImage(a);"__MISSING"===h.key&&c&&(u=(h=this.scene.textures.get(c)).getSourceImage()),t.drawImage(u,i,n,r,o)},i.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&ne(e),e},t}(Phaser.Plugins.ScenePlugin),ae=se,re=i(64),oe=i.n(re),ce=function(e){function t(t,i,n){var s;return(s=e.call(this)||this).game=void 0,s.options=void 0,s.performance=void 0,s.isRunning=!1,s.checkTimer=void 0,s.fpsHistory=void 0,s.start=function(){if(!s.isRunning){s.isRunning=!0;var e=s.options.checkInterval;s.checkTimer=e,s.fpsHistory=[],s.game.events.on(Phaser.Core.Events.POST_STEP,s.onPostStep)}},s.stop=function(){s.isRunning&&(s.isRunning=!1,s.game.events.off(Phaser.Core.Events.POST_STEP,s.onPostStep),s.options.onlyUpdateWhenSwitchScene&&s.checkFps())},s.onPostStep=function(e,t){if(s.checkTimer-=t,!(s.checkTimer>0)){var i=s.options,n=i.checkInterval,a=i.onlyUpdateWhenSwitchScene;s.checkTimer+=n,s.fpsHistory.push(s.game.loop.actualFps),!1===a&&s.fpsHistory.length>=5&&s.checkFps()}},s.game=t,s.options=n,s.performance=i,s}(0,o.Z)(t,e);var i=t.prototype;return i.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},i.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},i.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},i.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),he=ce,ue=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],le=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).fpsTracker=void 0,i.pixelRatio=void 0,i.minQuality=void 0,i.maxQuality=void 0,i.qualityAdjustStep=void 0,i.trackingSceneKeys=[],i.trackingScene=function(e){var t;if(oe()(t=i.trackingSceneKeys).call(t,e)){var n=i.game.scene.getScene(e);n.events.once(Phaser.Scenes.Events.UPDATE,i.fpsTracker.start),n.events.once(Phaser.Scenes.Events.SLEEP,i.fpsTracker.stop)}},i}(0,o.Z)(t,e);var i=t.prototype;return i.configure=function(e){var t=e.pixelRatio,i=e.minQuality,n=e.maxQuality,a=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,s.Z)(e,ue);this.pixelRatio=t,this.minQuality=i,this.maxQuality=n,this.qualityAdjustStep=a,this.trackingSceneKeys=r,this.fpsTracker=new he(this.game,this,o)},i.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},i.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},i.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),de=le,pe={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},fe=i(99),ge=i.n(fe),me=i(38),ve=i.n(me),ye=pe.sound,Ee=pe.music,Se=pe.vibrate,Te=pe.language,be=pe.theme,Ae=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},i=t.sound,n=t.music,s=t.vibrate,a=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(i)?i:ye,this.music=GameCore.Utils.Valid.isBoolean(n)?n:Ee,this.vibrate=GameCore.Utils.Valid.isBoolean(s)?s:Se,this.language=GameCore.Utils.Valid.isString(a)?a:Te,this.theme=GameCore.Utils.Valid.isString(r)?r:be}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Ce=GameCore.Utils,Oe=Ce.Valid,Ie=Ce.Object,we=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.endlessScore=void 0,this.setupDefaultData(),this.updateScore(e),this.updateEndlessScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.endlessScore=0,this.settings=(0,a.Z)({},pe),this.gameData={coin:0,level:1,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Oe.isNumber(t)&&(this.score=t)},t.updateEndlessScore=function(e){var t=e.endlessScore;!1!==Oe.isNumber(t)&&(this.endlessScore=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Oe.isObject(t)){var i=new Ae(t).toObject();this.settings=i}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Oe.isObject(t)){if(Ie.hasOwn(t,"coin")&&Oe.isNumber(t.coin)&&(this.gameData.coin=t.coin),Ie.hasOwn(t,"level")&&Oe.isNumber(t.level)&&t.level>0&&(this.gameData.level=t.level),Ie.hasOwn(t,"diamond")&&Oe.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Ie.hasOwn(t,"lastReceiveGift")&&Oe.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Ie.hasOwn(t,"dailyRewarded")&&Oe.isObject(t.dailyRewarded)){var i=t.dailyRewarded;Ie.hasOwn(i,"lastRewarded")&&Oe.isNumber(i.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=i.lastRewarded),Ie.hasOwn(i,"logDays")&&Array.isArray(i.logDays)&&(this.gameData.dailyRewarded.logDays=i.logDays)}if(Ie.hasOwn(t,"dailyTasks")&&Oe.isObject(t.dailyTasks)){var n=t.dailyTasks;Ie.hasOwn(n,"startedTime")&&Oe.isNumber(n.startedTime)&&(this.gameData.dailyTasks.startedTime=n.startedTime),Ie.hasOwn(n,"logTasks")&&Oe.isObject(n.logTasks)&&(this.gameData.dailyTasks.logTasks=n.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==Oe.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays,endlessScore:this.endlessScore}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coin,i=e.diamond,n=e.dailyTasks,s=e.dailyRewarded,a=e.lastReceiveGift,r=e.level;return{score:this.score,settings:this.settings,customFields:{coin:t,level:r,diamond:i,dailyTasks:n,dailyRewarded:s,lastReceiveGift:a},userGuideDisplays:this.userGuideDisplays,endlessScore:this.endlessScore}},t.convertToFacebookData=function(e){var t=e.score,i=e.settings,n=e.customFields,s=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:i}),this.updateGameData({gameData:n}),this.updateUserGuideDisplays({userGuideDisplays:s}),this.toObject()},e}(),Pe=(GameCore.Configs.ApiHost,function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_e=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re="PLAYER_RECEIVED",ke="PLAYER_DATA_UPDATE",xe="PLAYER_SCORE_UPDATE",Le="PLAYER_ENDLESS_SCORE_UPDATE",De="PLAYER_PROFILE_UPDATE",Be="PLAYER_SETTING_UPDATE",Ne="PLAYER_CONNECTED_PLAYERS_UPDATE",Me=i(216),Ze=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).payload=void 0,n.name="PlayerDataNameNotSupport",n.message=t||"The name of player data is not supported",n.payload=i||{},n}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Ge=i(39),Fe=i.n(Ge),Ue="player",He=(0,W.P1)([function(e){return e[Ue]}],(function(e){return e})),je=(0,W.P1)([He],(function(e){return e.playerId})),Ye=(0,W.P1)([He],(function(e){return e.ASID})),Ke=(0,W.P1)([function(e){return e[Ue].data}],(function(e){return e})),We=((0,W.P1)([Ke],(function(e){return e.settings})),(0,W.P1)([function(e){return e[Ue].connectedPlayers}],(function(e){return e}))),Ve=(0,W.P1)([We,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,i){if("number"!==typeof t)return[];if("number"!==typeof i)return[];var n=ee()(e);return Fe()(n).call(n,i,t+i)||[]})),ze=(0,W.P1)([Ke],(function(e){return e.score})),Xe=(0,W.P1)([Ke],(function(e){return e.endlessScore})),Je=(0,W.P1)([Ke],(function(e){return e.customFields})),qe=GameCore.Configs,Qe=qe.AppId,$e=qe.Tutorial,et=function(e,t){return function(i){var n=e.playerId,s=e.name,a=e.photo,r=e.locale;i({type:Re,payload:{playerId:n,name:s,photo:a,locale:r,data:t||{}}})}},tt=function(e){return{type:Ne,payload:{connectedPlayers:e}}},it=function(e,t){return function(){var i=(0,r.Z)(h().mark((function i(s,a){var r,o,c;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,s({type:Be,payload:{name:e,value:t}});case 3:r=a(),o=Ke(r),c=new we({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(0),(0,n.tO)(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,9]])})));return function(e,t){return i.apply(this,arguments)}}()},nt=function(e,t){return function(){var i=(0,r.Z)(h().mark((function i(s,a){var r,o,c,u,l;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o={customFields:(r={},r[e]=t,r)},i.next=4,s(at(o));case 4:c=a(),u=Ke(c),l=new we({}).convertToFacebookData(u),FBInstant.player.setDataAsync(l),i.next=15;break;case 10:if(i.prev=10,i.t0=i.catch(0),!(i.t0 instanceof Ze)){i.next=14;break}return i.abrupt("return");case 14:(0,n.tO)(i.t0);case 15:case"end":return i.stop()}}),i,null,[[0,10]])})));return function(e,t){return i.apply(this,arguments)}}()},st=function(e){return function(){var t=(0,r.Z)(h().mark((function t(i,s){var a,r,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,i(at(a));case 4:r=s(),o=Ke(r),c=new we({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Ze)){t.next=15;break}return t.abrupt("return");case 15:(0,n.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,i){return t.apply(this,arguments)}}()},at=function(e){return{type:ke,payload:{data:e}}},rt=function(e){return function(){var t=(0,r.Z)(h().mark((function t(i,s){var a,r,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i({type:xe,payload:{score:e}});case 3:Pe({score:e}),a=s(),r=Ke(a),o=new we({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,n.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,i){return t.apply(this,arguments)}}()},ot=function(e){return function(){var t=(0,r.Z)(h().mark((function t(i,s){var a,r,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i({type:Le,payload:{endlessScore:e}});case 3:Pe({endlessScore:e}),a=s(),r=Ke(a),o=new we({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,n.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,i){return t.apply(this,arguments)}}()},ct=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.incUserGuideDisplays=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t,i){var s,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!$e.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(at({userGuideDisplays:1}));case 5:s=i(),a=je(s),r=Ke(s),o=new we({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),_e(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,n.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,i){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.setAsNewUser=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(nt("userGuideDisplays",0));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.receiveData=function(){var e=(0,r.Z)(h().mark((function e(t,i){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(et(t,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),i.updateData=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t,i){var s,a,r,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=i(),a=He(s),r=a.playerId,o=a.name,c=a.photo,u=a.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:Qe,playerId:r,name:o,photo:c,locale:u,ASID:l},e.next=10,t({type:De,payload:{profile:d}});case 10:return e.next=12,Pe(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,n.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,i){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.setScore=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(rt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.setEndlessScore=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ot(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.setSetting=function(){var e=(0,r.Z)(h().mark((function e(t,i){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(it(t,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),i.setCustomData=function(){var e=(0,r.Z)(h().mark((function e(t,i){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(nt(t,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),i.setMultiCustomData=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(st(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.requestConnectedPlayers=function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t){var i,s,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game.facebook,e.next=4,new(ie())((function(e,t){s.once("players",(function(t){e(t)})),s.once("playersfail",(function(){return t([])})),s.getPlayers()}));case 4:if(a=e.sent,r=function(e){return!!e},o=ge()(i=ve()(a).call(a,(function(e){var t=e.getID(),i=e.getName(),n=e.getPhoto();return t&&i&&n?new Me.Z(t,i,n).toObject():null}))).call(i,r),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(tt(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,n.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.updateConnectedPlayers=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getPlayer=function(){return He(this.state)},i.getPlayerId=function(){return this.getPlayer().playerId},i.getPlayerASID=function(){return Ye(this.state)},i.getPlayerData=function(){return this.getPlayer().data},i.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(pe,e)?pe[e]:null},i.getPlayerSettings=function(){return this.getPlayerData().settings},i.getPlayerIsNew=function(){return this.getPlayer().isUserNew},i.getCoins=function(){var e=this.getCustomData("coin");return GameCore.Utils.Valid.isNumber(e)?e:0},i.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},i.getBestScore=function(){return ze(this.state)},i.getBestEndlessScore=function(){return Xe(this.state)},i.getCustomData=function(e){var t=Je(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},i.getConnectedPlayers=function(){return We(this.state)},i.getConnectedPlayerIds=function(e,t){return Ve(this.state,{limit:e,offset:t})},(0,H.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ht=ct,ut=i(142),lt=GameCore.Configs.ApiHost,dt=function(){var e=(0,r.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=GameCore.Utils.String.params(t),e.next=3,(0,ut.U)("players?"+i,{},lt);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt="PROFILES_DATA_UPDATE",ft="profile",gt=(0,W.P1)([function(e){return e[ft].data}],(function(e){return e})),mt=(0,W.P1)([function(e){return e[ft].profileIds}],(function(e){return e})),vt=function(e){return function(){var t=(0,r.Z)(h().mark((function t(i,s){var a,r,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=s(),r=mt(a),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,dt({playerIds:o});case 8:c=t.sent,i({type:pt,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,n.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,i){return t.apply(this,arguments)}}()},yt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.requestProfiles=function(){var e=(0,r.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(vt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getProfiles=function(){return gt(this.state)},(0,H.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Et=yt,St=i(47),Tt=i.n(St),bt=i(46),At=i.n(bt),Ct=i(233),Ot=i.n(Ct),It=["player","match"],wt="null",Pt=GameCore.Configs.Rollbar,_t=Pt.UseMockup,Rt=Pt.FilterError,kt=Pt.ListPlayerDevIds,xt=function(e){function t(){for(var t,i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(i=e.call.apply(e,v()(t=[this]).call(t,a))||this).enable=void 0,i.rollbar=void 0,i.events=[],i.beforeSend=function(e,t,n){_t&&i.showPopupError(n)},i.checkIgnore=function(e,t,n){try{return!!i.isErrorIgnore(t)}catch(s){return!1}},i.showPopupError=function(e){var t,n,s,a,r,o=null==e||null==(t=e.body)||null==(n=t.trace)?void 0:n.exception;o&&i.events.push(o);var c=(null==e||null==(s=e.body)||null==(a=s.trace)?void 0:a.frames)||[];(r=i.events).push.apply(r,c);var h=document.getElementById("popup-error");h||((h=document.createElement("div")).id="popup-error",document.body.appendChild(h)),h.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+Tt()(i.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',h.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var u=document.getElementById("close");u&&(u.onclick=i.closePopup)},i.closePopup=function(){i.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},i.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},i.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,n=e[0];return n instanceof Object&&(t=i.isIgnoreByCode(n)||i.isIgnoreByMessage(n)),t},i.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,i=Rt.Codes,n=i.accepted,s=i.ignored;if("string"===typeof t){if(At()(n).call(n,t)>=0)return!1;if(At()(s).call(s,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var a=e.name,r=Rt.Codes,o=r.accepted,c=r.ignored;if("string"===typeof a){if(At()(o).call(o,a)>=0)return!1;if(At()(c).call(c,a)>=0)return!0}}return!1},i.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,i=Rt.Messages,n=i.accepted,s=i.ignored;if("string"===typeof t){if(At()(n).call(n,t)>=0)return!1;if(At()(s).call(s,t)>=0)return!0}}return!1},i.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,n=e.match,a=(0,s.Z)(e,It);i.rollbar.configure({payload:{player:t,match:n,other:a}})}catch(r){}},i}(0,o.Z)(t,e);var i=t.prototype;return i.setup=function(){this.rollbar=new(Ot())({accessToken:wt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"1"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},i.configure=function(e){this.rollbar&&this.rollbar.configure(e)},i.sendTestException=function(){var e=this.game.facebook.getPlayerID();oe()(kt).call(kt,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},i.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Lt=xt,Dt=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,i){return e.prototype.emit.call(this,t,i)},t}(Phaser.Events.EventEmitter),Bt=Dt,Nt=i(31),Mt=function(e){function t(t,i,n,s){var a;(a=e.call(this,t)||this).zone=void 0,a.background=void 0,a.setName(i),a.setVisible(!1);var r=a.scene.world.getWorldSize(),o=r.width,c=r.height;return a.setSize(n||o,s||c),a.addZone(),a.addBackground(),a}(0,o.Z)(t,e);var i=t.prototype;return i.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},i.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},i.incY=function(e){this.y+=e,this.background.y-=e},i.incX=function(e){this.x+=e,this.background.x-=e},i.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},i.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},i.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},i.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,i=this.height+2,n=this.scene.add.graphics();n.fillStyle(0,1),n.fillRect(0,0,t,i),n.generateTexture(e,t,i),n.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},i.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},i.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},i.logEventOpen=function(){this.scene.analytics.event(Nt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},i.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Zt=Mt,Gt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Zt,GameCore.Screens={Events:Gt};var Ft=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).events=void 0,i}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){this.events=new Bt,this.registryScreenFactory()},i.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},i.add=function(e,t,i,n){var s=this.get(e);return s||(s=this.scene.add.screen(e,t,i,n),this.events.emit(GameCore.Screens.Events.CREATED,s),s)},i.open=function(e,t){var i=this.get(e);return!!i&&(i.open(t),i.emit(GameCore.Screens.Events.OPEN,i),this.events.emit(GameCore.Screens.Events.OPEN,i),!0)},i.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},i.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},i.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},i.createScreen=function(e,t,i,n){var s=new t(this.scene,e,i,n);return Phaser.Display.Align.In.Center(s,this.scene.gameZone),this.existing(s),s},t}(Phaser.Plugins.ScenePlugin),Ut=Ft,Ht=i(432),jt=i.n(Ht),Yt=i(622),Kt=i(623),Wt=i(141),Vt=i(624),zt={currentSceneKey:"",prevSceneKey:""};(0,Vt.pV)();var Xt,Jt,qt,Qt,$t,ei,ti,ii,ni,si={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},ai=si,ri={data:{}},oi={token:"",isRequesting:!1},ci=((Xt={})[V]=function(e,t){return void 0===e&&(e=oi),(0,Vt.ZP)(e,(function(e){var i=t.payload;if(i){var n=i.token;switch(t.type){case j:e.isRequesting=!0;break;case Y:e.token=n,e.isRequesting=!1}}}))},Xt),hi=i(139),ui={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:pe,userGuideDisplays:0,customFields:{},endlessScore:0},isUserNew:!0},li=((Jt={})[Ue]=function(e,t){return void 0===e&&(e=ui),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.name,a=n.value,r=n.data,o=void 0===r?{}:r,c=n.score,h=n.connectedPlayers,u=void 0===h?[]:h,l=(n.isUserNew,n.endlessScore),d=n.profile;switch(t.type){case Re:var p=n.playerId,f=n.name,g=n.photo,m=n.locale,v=n.data;if(i.playerId=p,i.name=f,i.photo=g,i.locale=m,GameCore.Utils.Valid.isObject(v)){var y=v;i.data=(0,hi.TS)(e.data,y)}v.userGuideDisplays>0&&(i.isUserNew=!1);break;case De:var E=d.playerId,S=d.name,T=d.photo,b=d.locale,A=d.ASID;i.ASID=A,i.playerId=E,i.name=S,i.photo=T,i.locale=b;break;case xe:i.data.score=c;break;case Le:i.data.endlessScore=l;break;case Be:if(!GameCore.Utils.Object.hasOwn(i.data.settings,s))break;i.data.settings[s]=a;break;case ke:i.data=(0,hi.TS)(e.data,o),o.userGuideDisplays>0&&(i.isUserNew=!1);break;case Ne:if(u.length<=0)break;var C=GameCore.Utils.Object.keyBy(u,"playerId");i.connectedPlayers=(0,hi.TS)(e.connectedPlayers,C)}}}))},Jt),di=i(614),pi=i.n(di),fi={data:{},profileIds:[]},gi=((qt={})[ft]=function(e,t){return void 0===e&&(e=fi),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.data,r=void 0===s?[]:s;if(t.type===pt){var o,c,h=GameCore.Utils.Object.keyBy(r,"playerId"),u=ee()(h);i.data=(0,hi.TS)((0,a.Z)({},e.data),h),i.profileIds=v()(o=[]).call(o,new(pi())(v()(c=[]).call(c,e.profileIds,u)))}}}))},qt),mi=i(453),vi=i(217),yi=i(454),Ei={mode:"",status:yi.ys,rescued:0,startAt:0,finishAt:0},Si={single:{_id:"",data:{fen:""},playerId:"",status:yi.ys},group:{status:yi.ys,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:yi.ys,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:yi.ys,players:{}},updateAt:0,isRequesting:!1},Ti={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},bi=((Qt={})[mi.L]=(0,Yt.UY)({gameplay:function(e,t){return void 0===e&&(e=Ei),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.mode,a=n.status;switch(t.type){case vi.Er:i.status=yi.ys,i.mode=Ei.mode,i.rescued=Ei.rescued,i.startAt=Ei.startAt,i.finishAt=Ei.finishAt,i.opponentInfo=Ei.opponentInfo;break;case vi.tk:i.mode=s,i.status=yi.kR,i.rescued=Ei.rescued,i.startAt=Date.now();break;case vi.qm:i.mode="string"===typeof s?s:e.mode,i.status=a||e.status;break;case vi.Mg:i.status=yi.o3,i.finishAt=Date.now();break;case vi.XW:i.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Si),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.match,r=n.opponentInfo,o=n.players;switch(t.type){case vi.xm:case vi.AJ:case vi.Qi:case vi.DI:case vi.ar:i.isRequesting=!0;break;case vi.T7:i.single=(0,a.Z)({},e.single,s),i.updateAt=Date.now();break;case vi.Uo:i.isRequesting=!1,i.single=s||Si.single;break;case vi.zu:i.isRequesting=!1,i.single=Si.single;break;case vi.tU:case vi.f3:i.isRequesting=!0,i.challenge.opponentInfo=r;break;case vi.AO:i.isRequesting=!1,i.challenge=(0,a.Z)({},s||Si.challenge),i.challenge.opponentInfo=e.challenge.opponentInfo;break;case vi.Un:i.isRequesting=!1,i.challenge=Si.challenge;break;case vi.Vj:i.group.status=yi.kR,r&&(i.group.opponentInfo=r);break;case vi.Sl:i.group.status=yi.o3;break;case vi.UK:i.online.status=Si.online.status,i.online.players=Si.online.players;break;case vi.li:i.online.status=yi.kR,i.online.players=o;break;case vi.NW:i.online.status=yi.o3}}}))},stats:function(e,t){return void 0===e&&(e=Ti),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.playerId,r=n.stats,o=n.match,c=n.current,h=n.players,u=n.leaders;switch(t.type){case vi.VY:delete i.data[s],i.current=Ti.current;break;case vi.go:i.data=Ti.data,i.isRequesting=!0;break;case vi.PM:i.data=r,i.isRequesting=!1;break;case vi.HV:i.data[s]=r;break;case vi.DP:i.current=(0,hi.TS)((0,a.Z)({},e.current),r);break;case vi.li:ee()(h).forEach((function(e){i.data[e]={score:0}}));break;case vi.Ly:u.forEach((function(e){var t=e.playerId,n=e.score,s=e.rank;i.data[t]={score:n,rank:s}}));break;case vi.AO:var l=o||{},d=l.blackPlayerId,p=l.blackPlayerScore,f=l.whitePlayerId,g=l.whitePlayerScore,m=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!d||!f)break;c&&(i.current=c),i.data[d]={score:p,level:v},i.data[f]={score:g,level:m}}}}))}}),Qt),Ai=i(455),Ci={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},Oi=(($t={}).tournament=function(e,t){return void 0===e&&(e=Ci),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.score,a=void 0===s?0:s,r=n.tournamentId;switch(t.type){case Ai.Cg:i.active=!0,i.tournamentId=r;break;case Ai.DK:i.isRequesting=!0;break;case Ai.ge:i.isRequesting=!1,a>e.bestSessionScore&&(i.bestSessionScore=a)}}}))},$t),Ii="leaderboards",wi=i(480),Pi=i.n(wi),_i=i(115),Ri=i.n(_i),ki="LEADERBOARD_DATA_REQUEST",xi="LEADERBOARD_DATA_UPDATE",Li="LEADERBOARD_DATA_CLEAR",Di={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Bi=((ei={})[Ii]=function(e,t){return void 0===e&&(e=Di),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.leaderboardId,r=n.type,o=n.limit,c=n.offset,h=n.leaders;switch(t.type){case ki:e.type!==r&&0===c&&(i.leaders=Di.leaders),i.isRequesting=!0,i.leaderboardId=s,i.type=r,i.limit=o,i.offset=c;break;case xi:if(i.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,a.Z)({},e.leaders,h)),l=Pi()(u),d=ge()(l).call(l,(function(e){return!!e.name&&!!e.photo}));Ri()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,n){t.rank=n+1,e.leaders[t.playerId]||(i.leaders[t.playerId]=t)}));break;case Li:i.isRequesting=!1,i.type=Di.type,i.limit=Di.limit,i.offset=Di.offset,i.leaders=Di.leaders,i.leaderboardId=Di.leaderboardId}}}))},ei),Ni="missions",Mi="MISSIONS_DATA_REQUEST",Zi="MISSIONS_DATA_RECEIVE",Gi="MISSION_UPDATE",Fi="MISSION_COMPLETED",Ui={mission:null,missions:null,isRequesting:!1},Hi=((ti={})[Ni]=function(e,t){return void 0===e&&(e=Ui),(0,Vt.ZP)(e,(function(i){var n,s,a=t.payload;if(a){var r=a.name,o=a.type,c=a.value,h=a.missions;switch(t.type){case Mi:i.isRequesting=!0;break;case Zi:if(i.isRequesting=!1,h.length<1)return;i.missions={},h.forEach((function(e){i.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[r];i.mission={name:r,process:{},require:u.require,reward:u.reward},ee()(u.require).forEach((function(e){i.mission.process[e]=0}));break;case Gi:if((null==(n=e.mission)?void 0:n.name)!==r)break;i.mission.process[o]+=c;break;case Fi:if((null==(s=e.mission)?void 0:s.name)!==r)break;i.mission=null}}}))},ti),ji="dailyTasks",Yi="DAILY_TASKS_DATA_REQUEST",Ki="DAILY_TASKS_DATA_RECEIVE",Wi="DAILY_TASKS_PROCESS_UPDATE",Vi="DAILY_TASK_VALUE_ADD",zi="DAILY_TASK_REWARDED",Xi="DAILY_TASKS_SEEN",Ji="DAILY_TASK_FINISHED",qi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Qi=((ii={})[ji]=function(e,t){return void 0===e&&(e=qi),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.id,a=n.type,r=n.value,o=n.tasks,c=n.process;switch(t.type){case Yi:i.isRequesting=!0;break;case Ki:i.isRequesting=!1,i.tasks=o;break;case Wi:i.process=c;break;case Vi:if(!e.process[s])break;i.process[s][a]+=r;break;case zi:if(!e.process[s])break;i.process[s].rewarded=!0;break;case Xi:i.isNotice=!1;break;case Ji:i.isNotice=!0}}}))},ii),$i=i(456),en=i(457),tn={rewards:[],isRequesting:!1},nn=((ni={})[$i.L]=function(e,t){return void 0===e&&(e=tn),(0,Vt.ZP)(e,(function(e){var i=t.payload;if(i){var n=i.rewards;switch(t.type){case en.I:e.isRequesting=!0;break;case en.m:e.isRequesting=!1,e.rewards=n}}}))},ni),sn=(0,Yt.UY)((0,a.Z)({scene:function(e,t){return void 0===e&&(e=zt),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.sceneKey;if(t.type===Wt.DW)i.currentSceneKey=s,i.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=si),(0,Vt.ZP)(e,(function(e){var i=t.payload;if(i){var n=i.gameMode,s=i.contextId,a=i.contextType,r=i.entryPointData;switch(t.type){case Wt.kL:e.contextId=s,e.contextType=a,e.entryPointData=r;break;case Wt.fJ:e.contextId=s,e.contextType=a,e.processed=!0;break;case Wt.EH:e.currentGameMode=n}}}))},messages:function(e,t){return void 0===e&&(e=ri),(0,Vt.ZP)(e,(function(i){var n=t.payload;if(n){var s=n.opponentId;if("string"===typeof s)switch(t.type){case Wt.qj:e.data[s]?i.data[s].sent=!0:i.data[s]={sent:!0};break;case Wt.rh:e.data[s]?i.data[s].sent=!1:i.data[s]={sent:!1}}}}))}},ci,li,gi,bi,Oi,Bi,Hi,Qi,nn)),an=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,rn=Yt.qC,on=function(e){an&&(rn=an({trace:!0,traceLimit:25})||Yt.qC);var t=rn((0,Yt.md)(Kt.Z));return(0,Yt.MT)(sn,e,t)},cn=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).store=void 0,i.initiator=void 0,i.dispatch=function(e){return i.store.dispatch(e)},i.getState=function(){return i.store.getState()},i.subscribe=function(e){return i.store.subscribe(e)},i.watch=function(e,t){var n=jt()((function(){var t=i.getState();return e(t)}));return i.subscribe(n((function(e){t(e)})))},i}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.store=on({})},i.setInitiator=function(e){this.initiator=e},i.syncStore=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),hn=cn,un=i(619),ln=i.n(un),dn=function(e){function t(t,i){var n;return(n=e.call(this,t,{type:"webfont",key:i.type})||this).payload=void 0,n.payload=i,n}(0,o.Z)(t,e);var i=t.prototype;return i.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}ln().load(e)},i.getGoogleFontConfig=function(e){var t=this,i=e.character,n=e.fontName,s=e.fontWeight;return{google:{families:[n+":"+(void 0===s?400:s)],text:i},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},i.getLocalFontConfig=function(e){var t=this,i=e.fontName,n=e.fontType,s=document.createElement("style");document.head.appendChild(s);var a=s.sheet;if(a){var r='@font-face { font-family: "'+i+'"; src: url("assets/fonts/'+i+("opentype"===n?".otf":".ttf")+'") format("'+n+'"); }';a.insertRule(r,0)}return{custom:{families:[i]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),pn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new dn(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),fn=pn,gn=i(215),mn=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).portraitRatio=void 0,i.portraitWidth=void 0,i.portraitHeight=void 0,i.landscapeRatio=void 0,i.landscapeWidth=void 0,i.landscapeHeight=void 0,i.worldWidth=void 0,i.worldHeight=void 0,i.worldRatio=void 0,i.autoResize=void 0,i.disableLandscape=void 0,i.fullSizeOnLandscape=void 0,i.forcePixelRatio=void 0,i.handleResize=(0,gn.D)((function(){i.resize()}),300),i}(0,o.Z)(t,e);var i=t.prototype;return i.configure=function(e){var t=e.autoResize,i=e.portraitRatio,n=e.portraitWidth,s=e.portraitHeight,a=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=i,this.portraitWidth=n,this.portraitHeight=s,this.landscapeRatio=o,this.landscapeWidth=a,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},i.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var i=this.getCanvasSizeFixedRatio(this.worldRatio),n=i.width,s=i.height;this.resizeCanvas(n,s),this.game.scene.scenes.forEach((function(e){var i=e.cameras.main;if(i){var n=t.getZoomRatio(),s=t.getWorldSize(),a=s.width,r=s.height;i.setZoom(n),i.centerOn(a/2,r/2)}}))},i.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},i.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},i.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,i=e.height,n=this.getZoomRatio();this.worldWidth=t/n,this.worldHeight=i/n}this.worldRatio=this.worldWidth/this.worldHeight},i.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},i.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},i.isDesktop=function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)},i.getPhysicPixels=function(e,t){return e*t},i.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),i=this.getScreenWidth()*t,n=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?n=i/e:i=n*e,{width:i,height:n}},i.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},i.getScreenHeight=function(){var e=document,t=e.body,i=e.documentElement,n=t.clientHeight,s=i.clientHeight;return Math.max(s,n)||0},i.getScreenWidth=function(){var e=document,t=e.body,i=e.documentElement,n=t.clientWidth,s=i.clientWidth;return Math.max(s,n)||0},i.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},i.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},i.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),vn=mn,yn=function(){function e(e,t,i){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||ai.contextId,this.contextType=t||ai.contextType,this.entryPointData=i||ai.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),En=i(461),Sn=i(458),Tn={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays",endlessScore:"endlessScore"},bn=GameCore.Configs.SyncProfileFromAPI,An=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),i=window.GameSDK.context.getType(),n=window.GameSDK.getEntryPointData(),s=new yn(e,i,n).toObject(),a=s.contextId,r=s.contextType,o=s.entryPointData;t.game.storage.dispatch((0,Sn.U1)(a,r,o))},this.initPlayer=(0,r.Z)(h().mark((function e(){var i,n,s,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.game.player,n=t.getPlayerInfo(),s=Pi()(Tn),e.next=5,FBInstant.player.getDataAsync(s);case 5:return a=e.sent,r=new we(a),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,i.receiveData(n,r.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(h().mark((function e(t){var i,n,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,bn){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(i=e.t0,!0!==(i.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(n=i.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(s=t.convertToPlayerData()).customFields=n,r=new we({}).convertToFacebookData(s),e.next=20,FBInstant.player.setDataAsync((0,a.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new we(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),i=window.GameSDK.player.getPhoto(),n=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new En.Z(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Me.Z(e,t,i,n).toObject()}catch(s){return new Me.Z("123","You").toObject()}},this.game=e},Cn=i(143),On=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).Text=void 0,i.Texture=void 0,i.currentLocale=void 0,i.supportedLanguages=void 0,i.data=void 0,i.options=void 0,i}(0,o.Z)(t,e);var i=t.prototype;return i.configure=function(e){this.applyOptions(e)},i.getCurrentLanguage=function(){return this.currentLocale},i.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},i.getText=function(e){if("object"==typeof e){var t=e.key,i=e.variables,n=void 0===i?[]:i,s=e.locale,a=void 0===s?this.currentLocale:s,r=this.getCorrectLocale(a),o=this.data[r].Text[t];return this.replaceVariables(o,n)}return this.Text[e]},i.getTexture=function(e){if("object"==typeof e){var t=e.key,i=e.variables,n=void 0===i?[]:i,s=e.locale,a=void 0===s?this.currentLocale:s,r=this.getCorrectLocale(a),o=this.data[r].Texture[t];return this.replaceVariables(o,n)}return this.Texture[e]},i.isSupportLanguage=function(e){var t;return At()(t=this.supportedLanguages).call(t,e)>=0},i.applyOptions=function(e){this.options=(0,a.Z)({},e);var t=e.data,i=e.locale,n=void 0===i?"en":i,s=e.upperCaseText,r=void 0!==s&&s;this.data=t,this.supportedLanguages=ee()(t);var o=this.getCorrectLocale(n);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,r)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},i.makeText=function(e,t){var i,n=t.maxWidth,s=void 0===n?Phaser.Math.MAX_SAFE_INTEGER:n,a=t.maxHeight,r=void 0===a?Phaser.Math.MAX_SAFE_INTEGER:a,o=t.align,c=void 0===o?"center":o,h=t.drawMaxBoxDebug,u=void 0!==h&&h,l=e.make.bitmapText(t);for("center"===c?l.setCenterAlign():"left"===c?l.setLeftAlign():"right"===c&&l.setRightAlign(),At()(i=t.text||"").call(i," ")>=0&&l.setMaxWidth(s);l.width>s||l.height>=r;)l.setFontSize(.95*l.fontSize);if(u&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),l&&l.visible&&l.active){var e=l.getWorldPosition(),t=e.x,i=e.y;d.strokeRect(t-.5*s+(.5-l.originX)*l.width,i-.5*r+(.5-l.originY)*l.height,s,r)}}))}return l},i.setFontSize=function(e,t,i){var n,s=t||Phaser.Math.MAX_SAFE_INTEGER,a=i||Phaser.Math.MAX_SAFE_INTEGER;for(At()(n=e.text||"").call(n," ")>=0&&e.setMaxWidth(s);e.width>s||e.height>=a;)e.setFontSize(.95*e.fontSize)},i.replaceVariables=function(e,t){var i=t.length;if(0==i)return e;var n=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(n++,i-1)])}))},i.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),In={en:JSON.parse('{"Text":{"TITLE":"Cheese Thief","SINGLE":"Single","LEVEL":"Level","ENDLESS":"Endless","DAILY":"Daily","RANK":"Rank","SETTINGS":"Settings","HOME":"Home","LEADERBOARD":"Leaderboards","DAILY_MISSION":"Daily Missions","PASS_LEVELS":"Pass 3 Levels","COLLECT_COINS":"Collect 20 coins","USE_SECOND_CHANCE":"Use Second Chance 2 times","SOUND":"Sound","MUSIC":"Music","VIBRATE":"Vibrate","PLAYER_ID":"Player ID","CONTACT":"Contact","GO":"Go","BACK":"Back","SECOND_CHANCE":"Second chance?","CONTINUE":"Continue","NO THANKS":"No Thanks!","FAILED":"Failed!","RESTART":"Restart","CONGRATULATION":"Congratulation","COMPLETED":"Completed","GAME_OVER":"Game Over!","LOADING":"Loading...","SORRY_NO_REWARDS":"Sorry, No Rewards!","CANCELLED_AD":"You have cancelled the ad!","NO_ADS":"No ads to display!","COMPLETED_ALL_LEVELS":"You\'ve completed all the levels!","WATCH_VIDEO":"Watch a video to get\\n{x} coins!","GET":"Get Now!","LOADING_ADS":"Loading ads...","DAILY_REWARDS":"Daily Rewards","DAY_X":"Day {x}","CLAIM":"Claim","TUTORIAL":"Tutorial","TUTORIAL_STEP_1":"Hold FINGER on SCREEN to\\n STOP running.","PLAY":"Play","TUTORIAL_STEP_2":"HIDE behind OBJECTS to\\n not get CAUGHT","TUTORIAL_STEP_3":"YOU will LOSE if you\\n get CAUGHT!"},"Texture":{"TITLE":"title-logo","NO_THANKS":"texts/no-thanks","FAILED":"text/failed","GAME_OVER":"text/gameover"}}'),ru:JSON.parse('{"Text":{"TITLE":"\u0412\u043e\u0440 \u0441\u044b\u0440\u0430","SINGLE":"\u0418\u0413\u0420\u0410\u0422\u042c","LEVEL":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","ENDLESS":"\u0411\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u0430\u044f","DAILY":"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439","RANK":"\u0420\u0430\u043d\u0433","SETTINGS":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","HOME":"\u0414\u041e\u041c\u041e\u0419","LEADERBOARD":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u041b\u0438\u0434\u0435\u0440\u043e\u0432","DAILY_MISSION":"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u0432\u044b\u0437\u043e\u0432","PASS_LEVELS":"\u041f\u0440\u043e\u0439\u0442\u0438 3 \u0443\u0440\u043e\u0432\u043d\u044f","COLLECT_COINS":"\u0421\u043e\u0431\u0440\u0430\u0442\u044c 20 \u043c\u043e\u043d\u0435\u0442","USE_SECOND_CHANCE":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0439 \\n\u0448\u0430\u043d\u0441 2 \u0440\u0430\u0437\u0430","SOUND":"\u0417\u0432\u0443\u043a\u043e\u0432\u044b\u0435","MUSIC":"\u041c\u0443\u0437\u044b\u043a\u0430","VIBRATE":"\u0412\u0438\u0431\u0440\u0430\u0446\u0438\u044f","PLAYER_ID":"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0438\u0433\u0440\u043e\u043a\u0430","CONTACT":"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","GO":"\u0418\u0434\u0442\u0438","BACK":"\u041d\u0430\u0437\u0430\u0434","SECOND_CHANCE":"\u0412\u0442\u043e\u0440\u043e\u0439 \u0448\u0430\u043d\u0441?","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","NO THANKS":"\u041d\u0435\u0442, \u0441\u043f\u0430\u0441\u0438\u0431\u043e!","FAILED":"\u041f\u0420\u041e\u0412\u0410\u041b\u0415\u041d","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410","CONGRATULATION":"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c","COMPLETED":"\u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041d","GAME_OVER":"\u0418\u0413\u0420\u0410 \u0417\u0410\u041a\u041e\u041d\u0427\u0415\u041d\u0410","LOADING":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...","SORRY_NO_REWARDS":"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043d\u0430\u0433\u0440\u0430\u0434 \u043d\u0435\u0442!","CANCELLED_AD":"\u0412\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u043b\u0438 \u0440\u0435\u043a\u043b\u0430\u043c\u0443!","NO_ADS":"\u041d\u0435\u0442 \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439 \u0414\u043b\u044f \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","COMPLETED_ALL_LEVELS":"\u0412\u044b \u043f\u0440\u043e\u0448\u043b\u0438 \u0432\u0441\u0435 \u0443\u0440\u043e\u0432\u043d\u0438!","WATCH_VIDEO":"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0432\u0438\u0434\u0435\u043e, \u0447\u0442\u043e\u0431\u044b\\n\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c {x} \u043c\u043e\u043d\u0435\u0442!","GET":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c!","LOADING_ADS":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439...","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","DAY_X":"\u0414\u0415\u041d\u042c {x}","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","TUTORIAL":"\u041e\u0411\u0423\u0427\u0415\u041d\u0418\u0415","TUTORIAL_STEP_1":"\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0430\u043b\u0435\u0446 \u043d\u0430\\n\u044d\u043a\u0440\u0430\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\\n\u0431\u0435\u0433","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","TUTORIAL_STEP_2":"\u041f\u0440\u044f\u0447\u044c\u0442\u0435\u0441\u044c \u0437\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430\u043c\u0438,\\n\u0447\u0442\u043e\u0431\u044b \u0432\u0430\u0441 \u043d\u0435 \u043f\u043e\u0439\u043c\u0430\u043b\u0438","TUTORIAL_STEP_3":"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u0435\u0442\u0435,\\n\u0435\u0441\u043b\u0438 \u0432\u0430\u0441 \u043f\u043e\u0439\u043c\u0430\u044e\u0442!"},"Texture":{"TITLE":"title-logo-ru","NO_THANKS":"texts/no-thanks-ru","FAILED":"text/failed-ru","GAME_OVER":"text/gameover-ru"}}')},wn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,a.Z)({data:In,locale:"en",upperCaseText:!1},t))},t}(On),Pn=wn,_n=i(218),Rn=[Nt._.SCREEN_OPEN],kn=(function(e){function t(t,i){var n;(n=e.call(this,"GoogleAnalytics",(0,a.Z)({},i),"#E35335")||this).game=void 0,n.trackingId=void 0,n.currentPath="/";var s=i.trackingId;n.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return n.selfLog=!!r,n.trackingId=s,n}(0,o.Z)(t,e);var i=t.prototype;i.processEvent=function(e,t,i){if(!(At()(Rn).call(Rn,e)>=0)){var n=this.formatEventName(e),s=t?(0,a.Z)({},t):{};s=i?(0,a.Z)({},s,{value:i}):s,s=(0,a.Z)({},s,{page_path:this.currentPath,send_to:"GA"}),gtag("event",n,s)}},i.processLevelStart=function(e,t,i){this.processEvent(Nt._.LEVEL_START,{level:e,score:t,level_name:i})},i.processLevelRescue=function(e,t,i){this.processEvent(Nt._.LEVEL_RESCUE,{level:e,score:t,level_name:i})},i.processLevelFail=function(e,t,i){this.processEvent(Nt._.LEVEL_END,{level:e,score:t,level_name:i,success:!1})},i.processLevelComplete=function(e,t,i){this.processEvent(Nt._.LEVEL_END,{level:e,score:t,level_name:i,success:!0})},i.processShowInterstitialAd=function(e){this.processEvent(Nt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(Nt._.AD_IMPRESSION,{ad_format:"Interstitial"})},i.processShowRewardedVideoAd=function(e){this.processEvent(Nt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(Nt._.AD_IMPRESSION,{ad_format:"Rewarded"})},i.processShowAdFail=function(e,t){var i=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Nt._.AD_SHOW_FAILED,{ad_type:i,screen_name:""+t})},i.processPageView=function(e){var t=this.getGameplayMode(),i="/"+t+"/"+e;this.currentPath=i,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},i.getGameplayMode=function(){var e=this.game.storage.getState();return(0,_n.F)(e)},i.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},i.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},i.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(i=e.call.apply(e,v()(t=[this]).call(t,a))||this).startGame=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.auth.requestToken();case 3:return e.next=5,i.storage.syncStore();case 5:i.configureSentry(),i.configureRollbar(),i.detectGameMode(),i.initGoogleAnalytics(),i.analytics.event(Nt._.LOAD_START),i.scene.launch(Cn.C.GLOBAL_SCENE),i.scene.start(Cn.C.LOAD_SCENE),i.analytics.pageview(Cn.C.LOAD_SCENE),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),(0,n.tO)(e.t0);case 18:return e.prev=18,i.facebook.progressLoading.finishLoadingProgressFbBootScene(),i.scene.sleep(Cn.C.BOOT_SCENE),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])}))),i}(0,o.Z)(t,e);var i=t.prototype;return i.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},i.configureSentry=function(){var e=this.player.getPlayer();(0,n.Tv)({id:e.playerId,username:e.name})},i.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},i.detectGameMode=function(){this.storage.dispatch((0,Sn.qF)())},i.initGoogleAnalytics=function(){},t}(Phaser.Scene)),xn=kn,Ln=i(63),Dn=i(62),Bn=i(17),Nn=i(20),Mn=i(79),Zn=Nn.Z.DEFAULT,Gn=Zn.KEY,Fn=Zn.FRAME,Un=function(e){function t(t,i){var n;return(n=e.call(this,t,0,0,Gn,Fn.ICON_COIN)||this).onUpdate=void 0,n.onComplete=void 0,n.positions=void 0,n.visibleAnimation=void 0,n.eatAnimation=void 0,n.setWorldSize(28,28),n.positions=i,n.setVisible(!1),n.setDepth(Ln.Z.PRIORITY),n.createAnimation(),n.scene.add.existing((0,Bn.Z)(n)),n}(0,o.Z)(t,e);var i=t.prototype;return i.createAnimation=function(){var e=this,t=this.positions,i=t.from,n=t.to,s=2*this.scale,a=this.scale;this.visibleAnimation=this.scene.add.tween({targets:this,duration:1e3,paused:!0,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Cubic.Out,value:{from:0,to:1}},x:{getStart:function(){return i.x}},y:{ease:Phaser.Math.Easing.Bounce.Out,value:{getStart:function(){return i.y},getEnd:function(){return i.y+100}}},scale:{duration:400,ease:Phaser.Math.Easing.Cubic.Out,value:{from:s,to:a}}},onStart:function(){e.setVisible(!0),e.scene.audio.playSound(Mn.Z.DIAMONDS_EAT)},onComplete:function(){e.eatAnimation.play()}}),this.eatAnimation=this.scene.add.tween({targets:this,duration:500,delay:50,ease:"Circ.easeOut",paused:!0,props:{x:{getEnd:function(){return n.x}},y:{getEnd:function(){return n.y}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},i.destroyObjectAndEffect=function(){this.visibleAnimation.remove(),this.eatAnimation.remove(),this.destroy()},i.run=function(){this.visibleAnimation.play()},i.updateToPropertyPosition=function(e,t){this.eatAnimation.updateTo("x",e),this.eatAnimation.updateTo("y",t)},t}(Phaser.GameObjects.Image),Hn=Un,jn=i(219),Yn=i(116),Kn=i.n(Yn),Wn=i(100),Vn=i.n(Wn),zn=i(151),Xn=i.n(zn),Jn=i(114),qn=i(148),Qn=i(147),$n=i(227),es=i(97),ts=i(473),is=i(48),ns=i.n(is),ss=i(94),as=i(225),rs=i(463);function os(e,t){var i="undefined"!==typeof Vn()&&Xn()(e)||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){var i;if(!e)return;if("string"===typeof e)return cs(e,t);var n=Fe()(i=Object.prototype.toString.call(e)).call(i,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Kn()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cs(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var hs=GameCore.Configs.LeadersBoard,us=hs.UseMock,ls=hs.Limit,ds=function(e,t,i,s){return void 0===i&&(i=ls),void 0===s&&(s=0),function(){var a=(0,r.Z)(h().mark((function a(r){var o,c,u,l,d,p,f,g,m,v,y,E,S,T,b,A,C,O;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o=window.game.player,c=o.getPlayerId(),r(fs()),r({type:ki,payload:{leaderboardId:e,type:t,limit:i,offset:s}}),!us){a.next=12;break}return a.next=8,(0,ss.qZ)(1e3);case 8:return 145,d=ve()(u=ns()(l=new Array(i)).call(l,null)).call(u,(function(e,t){var i=(t+1)*(s+1);return{playerId:145===t?c:"0"+i,name:145===t?"Current Player":"MPlayer "+i,photo:"./assets/images/others/avatar.png",rank:i,score:Math.floor(1e5/i)}})),r(ps(d,t)),a.abrupt("return");case 12:if(p=[],t!==rs.C){a.next=19;break}return a.next=16,(0,as.H$)({limit:i,offset:s});case 16:p=a.sent,a.next=27;break;case 19:if(t!==rs.n){a.next=27;break}return(f=o.getConnectedPlayerIds(i,s)).push(c),g=GameCore.Utils.Array.unique(f),a.next=25,(0,as.tu)({playerIds:g,limit:g.length});case 25:p=a.sent,g.forEach((function(e){var t=ge()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 27:for(m={},v=os(p);!(y=v()).done;)E=y.value,S=E.playerId,T=E.score,b=E.rank,A=E.getPlayer(),C=A.getPhoto(),O=A.getName(),m[S]={playerId:S,name:O,photo:C,score:T,rank:b};r(ps(m,t)),a.next=37;break;case 33:a.prev=33,a.t0=a.catch(0),r(ps([],t)),(0,n.tO)(a.t0);case 37:case"end":return a.stop()}}),a,null,[[0,33]])})));return function(e){return a.apply(this,arguments)}}()},ps=function(e,t){return{type:xi,payload:{leaders:e,type:t}}},fs=function(){return{type:Li,payload:{}}},gs=function(e){return e[Ii]},ms=((0,W.P1)([function(e){return gs(e).leaderboardId}],(function(e){return e})),(0,W.P1)([function(e){return gs(e).leaders}],(function(e){return e}))),vs=(0,W.P1)([function(e){return gs(e).isRequesting}],(function(e){return e})),ys=i(146),Es=i(472),Ss=i(477),Ts=i(226),bs=i(637),As=(function(e){function t(t){var i;return(i=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,i}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).classType=void 0,n.listConfigs=void 0,n.padding=void 0,n.startObjectIndex=void 0,n.endObjectIndex=void 0,n.listObjects=void 0,n.classType=i.classType,n.listConfigs=i.listConfigs,n.padding=i.padding?i.padding:0,n.objects.classType=n.classType,n.updateConfig(n.listConfigs),n}(0,o.Z)(t,e);var i=t.prototype;return i.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},i.getChildren=function(){var e;return ge()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},i.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=ns()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var i=this.getEndObjectIndex();this.addObjectIndex(1,i),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},i.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&ve()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},i.setItemPosition=function(e,t){var i=e.height;e.setPosition(0,i/2+(i+this.padding)*t-this.height/2)},i.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},i.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),i=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),i!=this.endObjectIndex&&(i<this.endObjectIndex?this.killObjectIndex(i+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,i),this.endObjectIndex=i)},i.killObjectIndex=function(e,t){for(var i=e;i<=t;i++){var n=this.listObjects[i];n&&(this.objects.killAndHide(n),this.listObjects[i]=void 0)}},i.addObjectIndex=function(e,t){for(var i=e;i<=t;i++){var n=this.padding,s=this.listConfigs;if(i>=s.length)return;var a=this.objects.getFirstDead(!0),r=a.height,o=r/2+(r+n)*i+this.value-this.height/2;a.updateInfo(s[i]),a.setPosition(0,o),a.setActive(!0),a.setVisible(!0),this.addAt(a),this.listObjects[i]=a}},i.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},i.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,i=this.listConfigs,n=e+t;return Math.min(Math.floor((this.height-this.value)/n),i.length)},(0,H.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(bs.Z)),Cs=i(37),Os={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},Is=function(e){function t(t){return e.call(this,Os,t)||this}return(0,o.Z)(t,e),t}(Cs.Z),ws={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Ps=function(e){function t(t){return e.call(this,ws,t)||this}return(0,o.Z)(t,e),t}(Cs.Z),_s=i(140),Rs=function(e){function t(t,i){var n;(n=e.call(this,t)||this).payload=void 0,n.loading=void 0,n.photo=void 0,n.avtFrame=void 0,n.background=void 0,n.loadPhotoTimer=void 0,n.handleLoadPhotoAfterDelay=function(e,t){return function(){var i=n.scene.textures.get(e);i&&i.key===e?n.handleLoadComplete(e):(n.scene.load.once("filecomplete-image-"+e,n.handleLoadComplete),n.scene.load.image(e,t),n.scene.load.start())}},n.handleLoadComplete=function(e){if(n.scene){var t=n.payload,i=t.id,s=t.radius,a=void 0===s?0:s;if(i&&i===e){var r=i+"_bordered_"+a,o=a>0?r:i,c=n.scene.textures.get(o);if(c&&c.key===o)n.setPhoto(c.key);else if(0!=a&&a<100){if(!GameCore.Utils.Image.drawBorder({scene:n.scene,key:i,newKey:r,radius:a}))return void n.showLoading(!1);n.setPhoto(r)}else if(100==a){if(!GameCore.Utils.Image.drawCircle({scene:n.scene,key:i,newKey:r}))return void n.showLoading(!1);n.setPhoto(r)}else n.setPhoto(i)}}},n.handleLoadPhotoFailed=function(e){e.key===n.payload.id&&n.setDefaultAvatar(e.key)},n.scene.add.existing((0,Bn.Z)(n)),n.payload=i,n.setSize(i.width,i.height),n.createBackground(),n.createLoading(),n.createPhoto(),n.createFrame();var s=n.payload,a=s.id,r=s.url,o=s.radius;return a&&r&&n.loadPhoto(a,r,o),n.addDefaultListeners(),n}(0,o.Z)(t,e);var i=t.prototype;return i.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},i.setBackground=function(e){this.background.setFrame(e)},i.loadPhoto=function(e,t,i){var n;if(void 0===i&&(i=0),this.payload.id=e,this.payload.url=t,this.payload.radius=i,null==(n=this.loadPhotoTimer)||n.remove(),e&&t){var s=this.scene.textures.get(e);if(s&&s.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var a=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(a,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(_s.Z.AVATAR.KEY)},i.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},i.setDefaultAvatar=function(e){this.loadPhoto(e,_s.Z.AVATAR.FILE,this.payload.radius)},i.createBackground=function(){var e=this.payload,t=e.key,i=e.background;this.background=this.scene.make.image({key:t,frame:i}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},i.createLoading=function(){this.loading=new Ts.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},i.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},i.createFrame=function(){var e=this.payload,t=e.key,i=e.frame,n=e.width,s=e.height;i?(this.avtFrame=this.scene.make.image({key:t,frame:i}),this.avtFrame.setWorldSize(n,s)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},i.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},i.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,i=t.width,n=t.height,s=Math.min(i,n)-10;this.photo.setWorldSize(s,s),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),ks=Rs,xs=i(78),Ls=i(145),Ds=Nn.Z.DEFAULT,Bs=Ds.KEY,Ns=Ds.FRAME,Ms=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).buttonPlay=void 0,n.buttonShare=void 0,n.avatar=void 0,n.rankIcon=void 0,n.rankText=void 0,n.username=void 0,n.score=void 0,n.scoreText=void 0,n.background=void 0,n.showPopUp=void 0,n.showItems=void 0,n.payload=void 0,n.handleChallengeFriend=function(){var e=n.payload.playerId;n.scene.storage.dispatch((0,Ls.Xp)(e))},n.createBackground(),n.updateSize(),n.createAvatar(),n.createRank(),n.createUsername(),n.createScore(),n.createButtonPlay(),n.createButtonShare(),i&&n.updateInfo(i),n.scene.add.existing((0,Bn.Z)(n)),n}(0,o.Z)(t,e);var i=t.prototype;return i.updateInfo=function(e){this.payload=(0,a.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition(),this.updateButton()},i.updatePosition=function(){this.payload.scoreRight;var e=this.payload.useChallenge;this.buttonPlay.setVisible(!!e),Phaser.Display.Align.To.BottomCenter(this.score,this.avatar,55,-12)},i.updateButton=function(){this.payload.isHighlight?(this.buttonPlay.setVisible(!1),this.buttonShare.setVisible(!0)):(this.buttonPlay.setVisible(!0),this.buttonShare.setVisible(!1)),this.buttonPlay.kill(),this.buttonShare.kill()},i.createBackground=function(){this.background=this.scene.make.image({key:Bs,frame:Ns.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(278,57),this.add(this.background)},i.updateBackground=function(){var e=Ns.LEADERBOARD_BG_LIGHT;this.background.setFrame(e),this.background.setWorldSize(278,57)},i.updateSize=function(){var e=this.background,t=e.width,i=e.height;this.setSize(t,i)},i.createAvatar=function(){this.avatar=new ks(this.scene,{key:Bs,frame:Ns.AVATAR_FRAME_BLUE,background:Ns.AVATAR_BG_BLUE,width:44,height:43,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},i.updateAvatar=function(){var e=this.payload,t=e.playerId,i=e.photo;this.avatar.loadPhoto(t,i)},i.createRank=function(){this.createRankIcon(1),this.createRankText(1)},i.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},i.getRankIconFrame=function(e){var t=Ns.ICON_FLAG;switch(e){case 1:t=Ns.ICON_CUP_GOLD;break;case 2:t=Ns.ICON_CUP_SILVER;break;case 3:t=Ns.ICON_CUP_COPPER}return t},i.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:Bs,frame:t}),t!=Ns.ICON_FLAG?this.rankIcon.setWorldSize(25,30):this.rankIcon.setWorldSize(23,24),this.add(this.rankIcon);Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,16)},i.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=Ns.ICON_FLAG?this.rankIcon.setWorldSize(25,30):this.rankIcon.setWorldSize(23,23.5)},i.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-3)},i.updateRankText=function(e){var t=e<=3?20:18;this.rankText.setText(""+e),this.rankText.setFontSize(this.scene.fontSize(t))},i.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},i.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:es.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(9661216),this.username.setHighQuality(),Phaser.Display.Align.In.TopCenter(this.username,this.avatar,70,-3),this.add(this.username)},i.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},i.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:0,y:.5}}),this.scoreText.setTint(9661216);var e=this.scene.make.image({key:Bs,frame:Ns.ICON_CUP_MINI});e.setWorldSize(22,18),this.score.add([this.scoreText,e]),Phaser.Display.Align.In.LeftCenter(this.scoreText,e,-30),this.add(this.score),Phaser.Display.Align.In.BottomCenter(this.score,this.avatar,0)},i.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e+"m")},i.createButtonPlay=function(){this.buttonPlay=new xs.Z(this.scene,Bs,Ns.BUTTON_GREEN_SMALL,61,32),this.buttonPlay.setName("ChallengeFriend");var e=this.scene.add.text(0,0,"Play",{fontFamily:es.Z.FONT_FAMILY,fontSize:"15px",color:"#ffffff",stroke:"#503621ff",strokeThickness:4});e.setHighQuality(),Phaser.Display.Align.In.Center(e,this.buttonPlay,0,1),this.buttonPlay.add(e),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-8),this.add(this.buttonPlay),this.buttonPlay.onClick=this.handleChallengeFriend},i.createButtonShare=function(){this.buttonShare=new xs.Z(this.scene,Bs,Ns.BUTTON_BLUE_SMALL,60.5,32);var e=this.scene.add.text(0,0,"Share",{fontFamily:es.Z.FONT_FAMILY,fontSize:"15px",color:"#ffffff",stroke:"#503621ff",strokeThickness:4});e.setHighQuality(),Phaser.Display.Align.In.Center(e,this.buttonShare,0,1),this.buttonShare.add(e),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-8),this.add(this.buttonShare),this.buttonShare.onClick=this.handleChallengeFriend},i.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Ps({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},i.runShowItemAnimation=function(e,t){var i=this.getAll();this.scene.tweens.killTweensOf(i),this.showItems=new Is({targets:i,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},i.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var i=100*e;this.runShowPopUpAnimation(i,t),this.runShowItemAnimation(i,t)},t}(Phaser.GameObjects.Container),Zs=Ms,Gs=Nn.Z.DEFAULT,Fs=Gs.KEY,Us=Gs.FRAME,Hs=function(e){function t(t){var i;return(i=e.call(this,t)||this).scroller=void 0,i.createReuseScroller(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.createReuseScroller=function(){this.scroller=new As(this.scene,{classType:Zs,listConfigs:[],width:280,height:420,padding:10,marginTop:10,marginBottom:10}),this.scroller.createMask(),this.scroller.setPosition(0,5),this.scroller.createBound(Fs,Us.BLANK,20,16775127),this.add(this.scroller)},i.removeLeaders=function(){this.scroller.updateConfig([])},t}(Phaser.GameObjects.Container),js=Hs,Ys=function(e){function t(t){var i;return(i=e.call(this,t)||this).leaders=void 0,i.loading=void 0,i.message=void 0,i.messageAnimation=void 0,i.setSize(310,430),i.createLoading(),i.createMessage(),i.createContents(),i.createAnimation(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},i.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},i.createLoading=function(){this.loading=new Ts.Z(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(55,55),this.add(this.loading)},i.createMessage=function(){this.message=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message)},i.createContents=function(){this.createLeaders()},i.createLeaders=function(){this.leaders=new js(this.scene),this.add(this.leaders)},i.createTabs=function(){},i.createAnimation=function(){this.messageAnimation=new Ss.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Ks=Ys;function Ws(e,t){var i="undefined"!==typeof Vn()&&Xn()(e)||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){var i;if(!e)return;if("string"===typeof e)return Vs(e,t);var n=Fe()(i=Object.prototype.toString.call(e)).call(i,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Kn()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vs(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var zs=Nn.Z.DEFAULT,Xs=zs.KEY,Js=zs.FRAME,qs=GameCore.Configs.LeadersBoard,Qs=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).tabId=void 0,n.offset=void 0,n.isSwitchable=void 0,n.isRequesting=void 0,n.currentPlayerId=void 0,n.popup=void 0,n.board=void 0,n.popupShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.handleShareLeaderboard=function(){n.scene.storage.dispatch((0,ys.mi)()),Es.Z.emit(ts.Z.SHARE_GAME.EVENTS.SHARE_GAME,{type:"share",value:1})},n.open=function(){e.prototype.open.call((0,Bn.Z)(n)),n.isRequesting=!1,n.scene.storage.watch(vs,(function(e){if(n.isRequesting=e,!1===e){var t=n.scene.storage.getState(),i=ms(t);n.board.showLoading(e),n.updateLeadersData(i)}})),n.selectWorldTab(),n.runOpenAnimation()},n.handleClose=function(){n.runCloseAnimation()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&n.selectFriendTab()},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&n.selectWorldTab()},n.setDepth(Dn.Ks.POPUP),n.background.setAlpha(.8),n.init(),n.createPopup(),n.createTitle(),n.createCloseButton(),n.createBoard(),n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){var e=this.scene.player;this.currentPlayerId=e.getPlayerId()},i.createPopup=function(){this.popup=new $n.Z(this.scene,0,0,300,470),this.popup.setName("Popup"),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},i.createCloseButton=function(){var e=new Qn.Z(this.scene,{key:Xs,frame:Js.BUTTON_CLOSE,width:32,height:31,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,Phaser.Display.Align.In.TopRight(e,this.popup,20,20),this.popup.add(e)},i.createTitle=function(){var e=this.scene.add.container();e.setName("title");var t=this.scene.make.image({key:Xs,frame:Js.RIBBON_BLUE});t.setWorldSize(261,79);var i=this.scene.make.bitmapText({font:es.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(25),text:this.scene.lang.Text.LEADERBOARD,origin:{x:.5,y:.5}});i.setName("text"),Phaser.Display.Align.In.Center(i,t,2,-12),e.add([t,i]),e.setY(-241),this.popup.add(e)},i.createBoard=function(){this.board=new Ks(this.scene),this.popup.add(this.board)},i.createButtonShareLeaderboard=function(){},i.selectFriendTab=function(){this.tabId=rs.n,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(ds(qs.LeaderboardId,rs.n,qs.Limit,this.offset))},i.selectWorldTab=function(){this.tabId=rs.C,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(ds(qs.LeaderboardId,rs.C,qs.Limit,this.offset))},i.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=qs.Limit,this.scene.storage.dispatch(ds(qs.LeaderboardId,rs.n,qs.Limit,this.offset)))},i.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=qs.Limit,this.scene.storage.dispatch(ds(qs.LeaderboardId,rs.C,qs.Limit,this.offset)))},i.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Mn.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400))},i.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Mn.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},i.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var i=this.popup,n=i.y,s=i.scale;this.popupShowUpAnimation=new qn.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:n},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:s}}})}this.popupShowUpAnimation.play()},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Jn.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0),i.scene.screen.close(i.name)}})),this.popupFadeOutAnimation.play()},i.updateLeadersData=function(e){var t=Pi()(e)||[];if(t.length<1)return this.isSwitchable=!0,void this.board.showMessage(!0,"Leaderboard is empty!");for(var i,n=[],s=Ws(Ri()(t).call(t,(function(e,t){return+t.score-+e.score})));!(i=s()).done;){var a=i.value,r=a.playerId,o=a.photo,c=a.score,h=a.name,u=a.rank;if(r){var l=this.currentPlayerId===r,d={playerId:r,photo:o,name:h,rank:u,score:c,scoreRight:this.tabId===rs.C,useChallenge:!l&&this.tabId===rs.n,isHighlight:l};n.push(d)}}this.board.leaders.scroller.updateConfig(n),this.showLeaders()},i.getLeaders=function(){return this.board.leaders.scroller.getChildren()},i.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.isSwitchable=!0,void this.board.showMessage(!0,"Leaderboard is empty!");for(var i=t.length>6?6:t.length,n=0;n<i;n++){var s=t[n];if(!s)return;s.setVisible(!0),s.runShowUpAnimation(n,300)}this.scene.time.delayedCall(300*(i-2),(function(){e.isSwitchable=!0,e.board.leaders.scroller.setEnable(!0)}))},t}(GameCore.Screen),$s=Qs,ea=i(476),ta=i(223),ia=i(475),na=i(451),sa=i(229),aa={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},ra=function(e){function t(t){return e.call(this,aa,t)||this}return(0,o.Z)(t,e),t}(Cs.Z),oa=Nn.Z.GAMEPLAY,ca=oa.KEY,ha=oa.FRAME,ua=function(e){function t(t){var i;return(i=e.call(this,t,0,0)||this).watcher=void 0,i.background=void 0,i.tableTop=void 0,i.tableMiddle=void 0,i.tableBottom=void 0,i.tableSideBottom=void 0,i.brickFloorImages=void 0,i.brickFloorImages=[],i.createBackground(),i.createWatcher(),i.createTable(),i.createFloor(),i.playAnimation(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.playAnimation=function(){new ra({targets:[this.watcher],yoyo:!0,repeat:-1,duration:4200,ease:Phaser.Math.Easing.Quadratic.InOut,props:{y:"-=38"}}).play()},i.createWatcher=function(){var e=Nn.Z.WATCHER,t=e.KEY,i=e.FRAME;this.watcher=this.scene.make.image({key:t,frame:i.BOY_HEAD_NORMAL,origin:{x:0,y:1}}),this.watcher.setPosition(57.5,290),this.watcher.setWorldSize(260,163),this.add(this.watcher)},i.createBackground=function(){this.background=this.scene.make.image({key:ca,origin:{x:0,y:0}}),this.background.setVisible(!0),this.background.setFrame(ha.BACKGROUND_BG_1),this.background.setWorldSize(380,265),this.background.setDepth(jn.Z.BACKGROUND),this.add(this.background)},i.createTable=function(){this.tableTop=this.scene.make.image({key:ca,origin:{x:0,y:0}}),this.tableTop.setVisible(!0),this.tableTop.setFrame(ha.BACKGROUND_TABLE_TOP),this.tableTop.setWorldSize(375,31),this.tableTop.setPosition(this.background.x,this.background.y+this.background.height),this.tableTop.setDepth(jn.Z.TABLE),this.tableMiddle=this.scene.make.image({key:ca,origin:{x:0,y:0}}),this.tableMiddle.setVisible(!0),this.tableMiddle.setFrame(ha.BACKGROUND_TABLE_MIDDLE),this.tableMiddle.setWorldSize(375,75.5),this.tableMiddle.setPosition(this.background.x,this.tableTop.y+this.tableTop.height),this.tableMiddle.setDepth(jn.Z.TABLE),this.tableBottom=this.scene.make.image({key:ca,origin:{x:0,y:0}}),this.tableBottom.setVisible(!0),this.tableBottom.setFrame(ha.BACKGROUND_TABLE_BOTTOM),this.tableBottom.setWorldSize(375,125.5),this.tableBottom.setPosition(this.background.x,this.tableMiddle.y+this.tableMiddle.height),this.tableBottom.setDepth(jn.Z.TABLE),this.tableSideBottom=this.scene.make.image({key:ca,origin:{x:0,y:0}}),this.tableSideBottom.setVisible(!0),this.tableSideBottom.setFrame(ha.BACKGROUND_TABLE_SIDE),this.tableSideBottom.setWorldSize(375,58),this.tableSideBottom.setPosition(this.background.x,this.tableBottom.y+this.tableBottom.height),this.tableSideBottom.setDepth(jn.Z.TABLE),this.add([this.tableTop,this.tableMiddle,this.tableBottom,this.tableSideBottom])},i.createFloor=function(){if(0==this.brickFloorImages.length)for(var e=0;e<3;e++){var t=this.scene.make.image({key:ca,origin:{x:0,y:0}});t.setVisible(!0),t.setFrame(ha.BACKGROUND_BRICK_FLOOR),t.setWorldSize(375,116),t.setPosition(this.background.x,this.tableSideBottom.y+this.tableSideBottom.height+e*t.height),t.setDepth(jn.Z.TABLE),this.brickFloorImages.push(t)}this.add(this.brickFloorImages)},t}(Phaser.GameObjects.Container),la=ua,da=function(e){function t(t,i){var n;(n=e.call(this,t,i)||this).label=void 0;var s=i.width,a=i.height;return s&&a&&n.button.setWorldSize(s,a),n.createLabel(),n}(0,o.Z)(t,e);var i=t.prototype;return i.setLabel=function(e,t){void 0===t&&(t=16777215),this.label.setText(e),this.label.setTint(t)},i.createLabel=function(){this.label=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.label,this.button),this.label.setY(32),this.label.setAlpha(.8),this.add(this.label)},i.updateSize=function(){e.prototype.updateSize.call(this);var t,i=this.width,n=this.height,s=this.hitZone,a=s.x,r=s.y,o=this.paddingZone?this.paddingZone:0,c=i-o;(this.setSize(c,n),this.hitZone.setSize(c,n),this.hitZone.setPosition(a,r+o/2),this.showDebugZone)&&(null==(t=this.debugZone)||t.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))},t}(Qn.Z),pa=da,fa=(0,W.P1)([function(e){var t;return null==(t=e[ji])?void 0:t.tasks}],(function(e){return e})),ga=(0,W.P1)([function(e){var t;return null==(t=e[ji])?void 0:t.process}],(function(e){return e})),ma=(0,W.P1)([function(e){var t;return null==(t=e[ji])?void 0:t.isRequesting}],(function(e){return e})),va=(0,W.P1)([function(e){var t;return null==(t=e[ji])?void 0:t.isNotice}],(function(e){return e})),ya=Nn.Z.DEFAULT,Ea=ya.KEY,Sa=ya.FRAME,Ta=function(e){function t(t){var i;return(i=e.call(this,t,{key:Ea,frame:Sa.ICON_DAILY,width:34,height:37,paddingZone:19})||this).noticeIcon=void 0,i.checkNotice=function(){var e=i.scene.storage.getState(),t=va(e)||!1;i.noticeIcon.setVisible(t)},i.setName("Daily"),i.useSound=!1,i.setLabel(i.scene.lang.Text.DAILY,16774871),i.drawNoticeIcon(),i}return(0,o.Z)(t,e),t.prototype.drawNoticeIcon=function(){this.noticeIcon=this.scene.make.image({key:Ea,frame:Sa.ICON_DOT}),this.noticeIcon.setWorldSize(15,15),this.add(this.noticeIcon),Phaser.Display.Align.In.TopRight(this.noticeIcon,this.button,4,4)},t}(pa),ba=Ta,Aa=Nn.Z.DEFAULT,Ca=Aa.KEY,Oa=Aa.FRAME,Ia=function(e){function t(t){var i;return(i=e.call(this,t,{key:Ca,frame:Oa.ICON_RANK,width:37,height:38.5,paddingZone:19})||this).useSound=!1,i.setName("Rank"),i.setLabel(i.scene.lang.Text.RANK,16774871),i}return(0,o.Z)(t,e),t}(pa),wa=Ia,Pa=Nn.Z.DEFAULT,_a=Pa.KEY,Ra=Pa.FRAME,ka=function(e){function t(t){var i;return(i=e.call(this,t,{key:_a,frame:Ra.ICON_SETTING,width:35,height:37,paddingZone:19})||this).useSound=!1,i.setName("Setting"),i.setLabel(i.scene.lang.Text.SETTINGS,16774871),i}return(0,o.Z)(t,e),t}(pa),xa=ka,La=function(e){function t(t){var i;return(i=e.call(this,t)||this).rankIcon=void 0,i.dailyIcon=void 0,i.settingIcon=void 0,i.buttons=void 0,i.createButtons(),i.alignButtons(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.alignButtons=function(){var e=-(this.buttons.getLength()-1)/2*95;this.buttons.setX(e,95),this.buttons.setY(-55)},i.createButtons=function(){this.buttons=this.scene.add.group(),this.createDailyButton(),this.createRankButton(),this.createSettingsButton()},i.createRankButton=function(){this.rankIcon=new wa(this.scene),this.add(this.rankIcon),this.buttons.add(this.rankIcon)},i.createDailyButton=function(){this.dailyIcon=new ba(this.scene),this.add(this.dailyIcon),this.buttons.add(this.dailyIcon)},i.createInviteIcon=function(){},i.createSettingsButton=function(){this.settingIcon=new xa(this.scene),this.add(this.settingIcon),this.buttons.add(this.settingIcon)},t}(Phaser.GameObjects.Container),Da=La,Ba=i(474),Na=Nn.Z.DEFAULT,Ma=Na.KEY,Za=Na.FRAME,Ga=function(e){function t(t){var i,n;return(n=e.call(this,t,Ma,{background:Za.TOP_BG_LONG,icon:Za.ICON_COIN,button:Za.ICON_PLUS})||this).coins=void 0,n.setName("CoinBar"),n.bar.setWorldSize(93,27.5),n.icon.setWorldSize(28,28),null==(i=n.button)||i.setWorldSize(26,26),n.value.setTint(9463836),n.coins=0,n.alignObject(),Phaser.Display.Align.In.Center(n.value,n.bar,-2,0),n}(0,o.Z)(t,e);var i=t.prototype;return i.setValue=function(t){e.prototype.setValue.call(this,t),this.coins=t},i.getValue=function(){return this.coins},i.increaseValueBy=function(e){this.coins+=e,this.setValue(this.coins)},t}(Ba.Z),Fa=Ga,Ua=Nn.Z.DEFAULT,Ha=Ua.KEY,ja=Ua.FRAME,Ya=function(e){function t(t){var i;return(i=e.call(this,t,Ha,{background:ja.TOP_BG_LONG,icon:ja.ICON_CUP})||this).setName("ScoreBar"),i.maxValue=1e6,i.bar.setWorldSize(93,27.5),i.icon.setWorldSize(34.5,27.5),i.value.setTint(9463836),i.alignObject(),Phaser.Display.Align.In.Center(i.value,i.bar,5,0),i}return(0,o.Z)(t,e),t}(Ba.Z),Ka=Ya,Wa=function(e){function t(t){var i;(i=e.call(this,t)||this).coinBar=void 0,i.scoreBar=void 0;var n=i.scene.gameZone.width;return i.setSize(n,50),i.createComponents(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.createComponents=function(){this.createScoreBar(),this.createCoinBar()},i.createScoreBar=function(){this.scoreBar=new Ka(this.scene),this.add(this.scoreBar),Phaser.Display.Align.In.LeftCenter(this.scoreBar,this,-25)},i.createCoinBar=function(){this.coinBar=new Fa(this.scene),this.add(this.coinBar),Phaser.Display.Align.In.RightCenter(this.coinBar,this,-25)},t}(Phaser.GameObjects.Container),Va=Wa,za=i(228),Xa=Nn.Z.DEFAULT,Ja=Xa.KEY,qa=Xa.FRAME,Qa=function(e){function t(t,i,n){var s;return(s=e.call(this,t,i,n)||this).title=void 0,s.mouse=void 0,s.createMouse(),s.createTitle(),s.runAnimations(),s.setDepth(Ln.Z.LOGO),t.add.existing((0,Bn.Z)(s)),s}(0,o.Z)(t,e);var i=t.prototype;return i.createTitle=function(){this.title=this.scene.add.image(0,0,Ja,this.scene.lang.Texture.TITLE);var e=260,t=130;if("ru"===this.scene.lang.getCurrentLanguage())e=240,t=140;this.title.setWorldSize(e,t),this.title.y+=10,this.add(this.title)},i.createMouse=function(){this.mouse=this.scene.add.image(0,0,Ja,qa.MOUSE_RUN),this.mouse.setWorldSize(149.5,197),this.mouse.setPosition(-50,110),this.add(this.mouse)},i.runAnimations=function(){new za.Z({targets:[this.title],duration:4e3,props:{scale:"+=0.008"}}).play()},t}(Phaser.GameObjects.Container),$a=Qa,er=Nn.Z.DEFAULT,tr=er.KEY,ir=er.FRAME,nr=function(e){function t(t){var i;return(i=e.call(this,t,tr,ir.BUTTON_GREEN_DASHBOARD)||this).levelText=void 0,i.button.setWorldSize(127,57),i.setName("PlaySingle"),i.createText(),i.createPlayIcon(),i.playAnimation(),i}(0,o.Z)(t,e);var i=t.prototype;return i.playAnimation=function(){new za.Z({targets:[this.button],duration:1e3,props:{scale:"+=0.02"}}).play()},i.createPlayIcon=function(){var e=this.scene.make.image({key:tr,frame:ir.ICON_FLAT_NEXT});e.setWorldSize(22.5,28),Phaser.Display.Align.In.Center(e,this.button,-40,0),this.add(e)},i.createText=function(){var e=this.scene.make.bitmapText({font:es.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(25),text:this.scene.lang.Text.SINGLE,origin:{x:0,y:.5}});Phaser.Display.Align.In.Center(e,this.button,15,-9),this.add(e),this.levelText=this.scene.make.bitmapText({font:es.Z.GREEN_STROKE.KEY,size:this.scene.fontSize(20),text:"",origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.levelText,this.button,15,15),this.add(this.levelText)},i.setLevelText=function(e){this.levelText.setText(this.scene.lang.Text.LEVEL+" "+e)},t}(xs.Z),sr=nr,ar=Nn.Z.DEFAULT,rr=ar.KEY,or=ar.FRAME,cr=function(e){function t(t){var i;return(i=e.call(this,t,rr,or.BUTTON_BLUE_DASHBOARD)||this).button.setWorldSize(127,57),i.setName("PlayEndless"),i.createText(),i.createEndlessIcon(),i}(0,o.Z)(t,e);var i=t.prototype;return i.createEndlessIcon=function(){var e=this.scene.make.image({key:rr,frame:or.ICON_ENDLESS_MODE});e.setWorldSize(27,14),Phaser.Display.Align.In.Center(e,this.button,-43,0),this.add(e)},i.createText=function(){var e=26;if("ru"===this.scene.lang.getCurrentLanguage())e=17;var t=this.scene.make.bitmapText({font:es.Z.BLUE_STROKE.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.ENDLESS});Phaser.Display.Align.In.Center(t,this.button,15,1),this.add(t)},t}(xs.Z),hr=cr,ur=function(e){function t(t){var i;return(i=e.call(this,t)||this).logo=void 0,i.abovePlayButtonText=void 0,i.playSingleButton=void 0,i.playEndlessButton=void 0,i.createLogo(),i.createPlaySingleButton(),i.createPlayEndlessButton(),i.scene.add.existing((0,Bn.Z)(i)),i}(0,o.Z)(t,e);var i=t.prototype;return i.createLogo=function(){this.logo=new $a(this.scene,0,0),this.add(this.logo),this.logo.setY(-65)},i.createPlaySingleButton=function(){this.playSingleButton=new sr(this.scene),this.add(this.playSingleButton),this.playSingleButton.setPosition(-70,160);var e=this.scene.gameZone.displayHeight;e>667&&this.playSingleButton.setPosition(-80,180+(e-667)/2)},i.createPlayEndlessButton=function(){this.playEndlessButton=new hr(this.scene),this.add(this.playEndlessButton),this.playEndlessButton.setPosition(70,160);var e=this.scene.gameZone.displayHeight;e>667&&this.playEndlessButton.setPosition(80,180+(e-667)/2)},i.setCurrentLevelText=function(e){this.playSingleButton.setLevelText(e)},t}(Phaser.GameObjects.Container),lr=ur,dr=i(113),pr=i(112),fr=Nn.Z.DEFAULT.FRAME,gr=[{id:"pass-levels",title:"Pass 3 Levels",require:{level:3},reward:{coin:30},icon:fr.MISSION_FINISH_LEVEL},{id:"collect-coins",title:"Collect 20 coins",require:{coin:20},reward:{coin:20},icon:fr.MISSION_COLLECT_COIN},{id:"second-chance-use",title:"Use Second Chance 2 times",require:{second_chance:2},reward:{coin:50},icon:fr.MISSION_SECOND_CHANCE}],mr=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vr=GameCore.Configs.DailyTasks,yr=function(e){return function(t){t({type:Ki,payload:{tasks:e}});var i=window.game.player.getCustomData("dailyTasks")||{},n=i.startedTime,s=void 0===n?0:n,a=i.logTasks,r=void 0===a?{}:a;t((Date.now()-s)/1e3>vr.Duration?Er(e):Sr(r))}},Er=function(e){return function(t){var i={};e.forEach((function(e){var t=e.id,n=e.require;i[t]={},ee()(n).forEach((function(e){var n;i[t]=((n={})[e]=0,n.rewarded=!1,n)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:i,startedTime:Date.now()}),t(Sr(i)),Es.Z.emit(ts.Z.EVENTS.TASKS_RESET)}},Sr=function(e){return{type:Wi,payload:{process:e}}},Tr=function(){return function(e){e({type:Xi,payload:{}}),Es.Z.emit(ts.Z.EVENTS.NOTICE_UPDATE)}},br=function(e){function t(t,i){var n;(n=e.call(this,t)||this).payload=void 0,n.process=void 0,n.minProcess=void 0,n.maxProcess=void 0,n.progressBoxLeft=void 0,n.progressBoxBg=void 0,n.progressBoxRight=void 0,n.progressBarLeft=void 0,n.progressBarBg=void 0,n.progressBarRight=void 0,n.progressAnimation=void 0,n.payload=i;var s=i.width;return n.setSize(s,21.5),n.process=0,n.minProcess=0,n.maxProcess=1,n.createProgressBox(),n.createProgressBar(),n.createContainer(),n}(0,o.Z)(t,e);var i=t.prototype;return i.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},i.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var i=this.progressBarBg.x;this.progressBarRight.setX(i+t)},i.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},i.getDisplayWidthByProcess=function(e){return(this.width-17)*e},i.runProcessAnimation=function(e){var t,i=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=i.getCorrectValue(e);return i.getDisplayWidthByProcess(t)}},onStart:function(){var e=i.progressBarBg.displayHeight,t=i.getDisplayWidthByProcess(i.process);i.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=i.progressBarBg,t=e.x,n=e.displayWidth;i.progressBarRight.setX(t+n)},onComplete:function(){i.updateProcess()}})},i.createProgressBox=function(){var e=this.payload,t=e.key,i=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:i.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(9,16),this.progressBoxRight=this.scene.make.image({key:t,frame:i.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(9,16),this.progressBoxBg=this.scene.make.image({key:t,frame:i.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(9,16);var n=this.progressBoxBg.displayHeight,s=this.displayWidth,a=this.progressBoxLeft.displayWidth,r=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(a,n),this.progressBoxRight.setWorldSize(r,n),this.progressBoxBg.setWorldSize(s-(a+r),n),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},i.createProgressBar=function(){var e=this.payload,t=e.key,i=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:i.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(7,12),this.progressBarRight=this.scene.make.image({key:t,frame:i.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(7,12),this.progressBarBg=this.scene.make.image({key:t,frame:i.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(7,12);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-7),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,-2),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,-2),this.setProcess(0,!0)},i.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),Ar=br,Cr=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Or=Nn.Z.DEFAULT,Ir=Or.KEY,wr=Or.FRAME,Pr=function(e){function t(t,i,n){var s;return(s=e.call(this,t)||this).payload=void 0,s.process=void 0,s.isCompleted=void 0,s.background=void 0,s.logo=void 0,s.titleText=void 0,s.processText=void 0,s.progressBar=void 0,s.claimButton=void 0,s.rewardedIcon=void 0,s.dailyTaskDictionary=void 0,s.handleOnClaim=function(e){return function(){s.updateClaimButton();var t=s.payload,i=t.id,n=t.reward;s.scene.storage.dispatch(function(e){return function(t){var i=Cr();if(GameCore.Utils.Valid.isObject(i)){var n=i;GameCore.Utils.Object.hasOwn(n,e)&&(n[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:n}),t({type:zi,payload:{id:e}}))}}}(i)),ee()(n).forEach((function(t){var i=n[t];e(t,i)}))}},s.updateData=function(){var e,t,i=s.getProcessValue(),n=i.current,a=i.target,r=n/a;s.progressBar.setProcess(r,!0),s.setProcessText(n,a),s.isCompleted=n>=a&&!(null!=(e=s.process)&&e.rewarded),s.claimButton.setDisabled(!s.isCompleted),null!=(t=s.process)&&t.rewarded&&s.updateClaimButton()},s.updateClaimButton=function(){s.rewardedIcon=s.scene.make.image({key:Ir,frame:wr.ICON_CHECK}),s.rewardedIcon.setWorldSize(41,32),s.add(s.rewardedIcon),Phaser.Display.Align.In.Center(s.rewardedIcon,s.claimButton),s.claimButton.kill()},s.payload=i,s.process=n,s.setName("Task: "+i.id),s.createDailyTaskDictionary(),s.createBackground(),s.updateSize(),s.createLogo(),s.createTitle(),s.createProcessBar(),s.createProcessStatus(),s.createClaimButton(),s.updateData(),s}(0,o.Z)(t,e);var i=t.prototype;return i.setProcess=function(e){this.process=e,this.updateData()},i.getId=function(){return this.payload.id},i.createDailyTaskDictionary=function(){this.dailyTaskDictionary={"Pass 3 Levels":this.scene.lang.Text.PASS_LEVELS,"Collect 20 coins":this.scene.lang.Text.COLLECT_COINS,"Use Second Chance 2 times":this.scene.lang.Text.USE_SECOND_CHANCE}},i.getProcessValue=function(){var e=this,t=this.payload.require,i=ee()(t),n=0,s=0;return i.forEach((function(i){n=t[i]||0;var a=e.process[i];s="number"===typeof a?a:0})),{current:s,target:n}},i.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},i.createBackground=function(){this.background=this.scene.make.image({key:Ir,frame:wr.MISSION_BLOCK_BG}),this.background.setWorldSize(278,57),this.add(this.background)},i.updateSize=function(){var e=this.background,t=e.width,i=e.height;this.setSize(t,i)},i.createLogo=function(){this.logo=this.scene.make.image({key:Ir,frame:this.payload.icon}),this.logo.setWorldSize(41,40),this.add(this.logo),Phaser.Display.Align.In.LeftCenter(this.logo,this,-7)},i.getDailyTaskLocalization=function(e){if("en"===this.scene.lang.getCurrentLanguage())return e;var t=this.dailyTaskDictionary[e];return t||"Missing translation: "+e},i.createTitle=function(){var e=this.payload.title,t=this.getDailyTaskLocalization(e);this.titleText=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:t,origin:{x:0,y:.5}}),this.titleText.setTint(9661216),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this.logo,-52,-12)},i.createProcessBar=function(){this.progressBar=new Ar(this.scene,{width:135,key:Ir,frames:wr}),this.add(this.progressBar),Phaser.Display.Align.In.LeftCenter(this.progressBar,this.logo,-52,9)},i.createProcessStatus=function(){this.processText=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:.5}}),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,0)},i.createClaimButton=function(){this.claimButton=new xs.Z(this.scene,Ir,wr.BUTTON_GREEN_SMALL,60,32);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this,-6)},i.createRewardIcon=function(){var e=this.scene.make.image({key:Ir,frame:wr.ICON_COIN});e.setWorldSize(28,28),e.setScale(.7*e.scale),this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,-15)},i.createRewardValue=function(){var e=this.payload.reward,t=this.scene.add.text(0,0,""+e.coin,{fontFamily:es.Z.FONT_FAMILY,fontSize:"12px",color:"#ffffff",stroke:"#493120",strokeThickness:2});t.setHighQuality(),this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,10)},(0,H.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),_r=Pr,Rr=Nn.Z.DEFAULT,kr=Rr.KEY,xr=Rr.FRAME,Lr=GameCore.Configs.DailyTasks,Dr=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).onReward=void 0,a.missionsData=void 0,a.missionProcess=void 0,a.startedTime=void 0,a.popup=void 0,a.missionBlocks=void 0,a.countdownTimer=void 0,a.countdownText=void 0,a.countdownContainer=void 0,a.backgroundFadeInAnimation=void 0,a.popupShowUpAnimation=void 0,a.popupExitsAnimation=void 0,a.contentShowUpAnimation=void 0,a.handleClosePopup=function(){a.scene.storage.dispatch(Tr()),a.runCloseAnimation()},a.handleOnClaim=function(e,t){a.claimReward(e,t)},a.resetTaskData=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.startedTime=Date.now(),e.next=3,a.scene.storage.dispatch(Er(a.missionsData));case 3:a.updateTasksData(),a.createMissionBlocks();case 5:case"end":return e.stop()}}),e)}))),a.updateTasksData=function(){var e=a.scene,t=e.player,i=e.storage.getState(),n=fa(i)||[],s=ga(i)||{},r=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===r?0:r;a.missionsData=n,a.missionProcess=s,a.startedTime=o},a.updateCountdown=(0,r.Z)(h().mark((function e(){var t,i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),i=t-a.startedTime,!((n=1e3*Lr.Duration-i)<0)){e.next=9;break}return n=0,e.next=9,a.resetTaskData();case 9:a.countdownText.setText(""+(0,ss.F0)(n,!0));case 10:case"end":return e.stop()}}),e)}))),a.createPopup(),a.createCloseButton(),a.createPopupContents(),a.createDebugTools(),a.setDepth(Dn.Ks.POPUP),a.background.setAlpha(.8),a}(0,o.Z)(t,e);var i=t.prototype;return i.open=function(t){e.prototype.open.call(this,t),this.scene.storage.dispatch(Tr()),this.updateTasksData(),this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation()},i.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks(),this.scene.audio.playSound(Mn.Z.DAILY_REWARD))},i.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Mn.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},i.runCloseAnimation=function(){this.scene.audio.playSound(Mn.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},i.runBackgroundEntrancesAnimation=function(e,t){var i;this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new dr.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}}})),null==(i=this.backgroundFadeInAnimation)||i.play()},i.runPopupEntrancesAnimation=function(e,t){var i;if(!this.popupShowUpAnimation){var n,s=this.popup,a=s.y,r=s.scale;return this.popupShowUpAnimation=new qn.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:a},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:r}}}),void(null==(n=this.popupShowUpAnimation)||n.play())}null==(i=this.popupShowUpAnimation)||i.play()},i.runPopupContentEntrancesAnimation=function(e,t){var i,n,s=this.missionBlocks.getChildren();s.length<1||(this.missionBlocks.setAlpha(0),null==(i=this.contentShowUpAnimation)||i.remove(),this.contentShowUpAnimation=new pr.Z({targets:s,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(n=this.contentShowUpAnimation)||n.play())},i.runPopupExitsAnimation=function(e,t){var i,n,s=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new Jn.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){s.popup.setY(0),s.scene.screen.close(s.name)}}),void(null==(n=this.popupExitsAnimation)||n.play());null==(i=this.popupExitsAnimation)||i.play()},i.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new xs.Z(this.scene,kr,xr.BUTTON_CLOSE);e.setName("Reset"),e.button.setWorldSize(21,23),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-60,-90)}},i.createPopup=function(){this.popup=new $n.Z(this.scene,0,0,300,350),this.add(this.popup)},i.createCloseButton=function(){var e=new Qn.Z(this.scene,{key:kr,frame:xr.BUTTON_CLOSE,width:32,height:31,paddingZone:20});e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,24,20),this.popup.add(e)},i.createPopupContents=function(){this.createTitle(),this.createCountdown()},i.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:kr,frame:xr.RIBBON_BLUE});t.setWorldSize(261,79);var i=this.scene.make.bitmapText({font:es.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(22),text:this.scene.lang.Text.DAILY_MISSION});Phaser.Display.Align.In.Center(i,t,0,-12),e.add([t,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,7)},i.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:kr,frame:xr.MISSION_CLOCK_BG});e.setWorldSize(90,25);var t=this.scene.make.image({key:kr,frame:xr.ICON_CLOCK});t.setWorldSize(32,32),Phaser.Display.Align.In.LeftCenter(t,e,10),this.countdownText=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"00:00:00"}),this.countdownText.setTint(9661216),Phaser.Display.Align.In.Center(this.countdownText,e,10),this.countdownContainer.add([e,t,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,0,-50)},i.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},i.createMissionBlocks=function(){var e,t,i=this;null==(e=this.missionBlocks)||e.destroy(!0);var n=this.missionsData.length,s=ns()(t=new Array(n)).call(t,null);this.missionBlocks=this.scene.add.group({maxSize:n}),s.forEach((function(e,t){var n=i.creatMissionBlock(t);null!==n&&i.missionBlocks.add(n)})),this.missionBlocks.setX(0),this.missionBlocks.setY(-70,66)},i.creatMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var i=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(i))return null;var n=new _r(this.scene,this.missionsData[e],i);return n.onClaim=this.handleOnClaim,this.popup.add(n),n},i.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof _r){var i=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,i))return;var n=e.missionProcess[i];if(!GameCore.Utils.Valid.isObject(n))return;t.setProcess(n)}}))},t}(GameCore.Screen),Br=Dr,Nr=i(635),Mr=i(467),Zr=i(471),Gr=Nn.Z.DEFAULT,Fr=Gr.KEY,Ur=Gr.FRAME,Hr=function(e){function t(t,i,n,s){var a;return(a=e.call(this,t,i,n,s)||this).popup=void 0,a.title=void 0,a.contents=void 0,a.settingMusic=void 0,a.settingSound=void 0,a.settingVibrate=void 0,a.blockMusic=void 0,a.blockSound=void 0,a.blockVibrate=void 0,a.popupShowUpAnimation=void 0,a.popupFadeOutAnimation=void 0,a.contentShowUpAnimation=void 0,a.handleClose=function(){a.runCloseAnimation()},a.handleMusicSetting=function(e){a.scene.player.setSetting("music",e),e?a.scene.audio.playMusic():a.scene.audio.pauseMusic()},a.handleSoundSetting=function(e){a.scene.player.setSetting("sound",e)},a.handleVibrateSetting=function(e){a.scene.player.setSetting("vibrate",e)},a.createPopup(),a.createTitle(),a.createBoard(),a.createButtons(),a.createCloseButton(),a.createContactInfo(),a.addItem(),a.createInput(),a.setDepth(Dn.Ks.POPUP),a.background.setAlpha(.8),a}(0,o.Z)(t,e);var i=t.prototype;return i.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),i=t.music,n=t.sound,s=t.vibrate;this.settingMusic.updateButtonState(i),this.settingSound.updateButtonState(n),this.settingVibrate.updateButtonState(s),(0,Zr.O)()||(this.blockVibrate.setVisible(!1),this.blockMusic.setPosition(0,-30),this.blockSound.setPosition(0,35)),this.runOpenAnimation()},i.createInput=function(){this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},i.createCloseButton=function(){var e=new Qn.Z(this.scene,{key:Fr,frame:Ur.BUTTON_CLOSE,width:32,height:31,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,e.setPosition(150,-118),this.popup.add(e)},i.createContactInfo=function(){var e=this.scene.player.getPlayerId(),t=this.scene.lang.Text.PLAYER_ID+": "+e+"\n"+this.scene.lang.Text.CONTACT+": support@citigovietnam.com",i=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});i.setTint(5194031),i.setAlpha(.5),i.setCenterAlign(),this.popup.add(i),Phaser.Display.Align.In.BottomCenter(i,this.popup,0,-15)},i.createPopup=function(){this.popup=new $n.Z(this.scene,0,0,310,270),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},i.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Fr,frame:Ur.RIBBON_PANEL});e.setWorldSize(232,63);var t=this.scene.make.bitmapText({font:es.Z.BROWN_STROKE.KEY,size:this.scene.fontSize(25),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-5),this.title.add([e,t]),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},i.createBoard=function(){var e=this.scene.make.image({key:Fr,frame:Ur.POPUP_YELLOW});e.setWorldSize(256,150),e.setPosition(0,0),this.popup.add(e)},i.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,i=e.sound,n=e.vibrate;this.createSoundButton(i),this.createMusicButton(t),this.createVibrateButton(n)},i.createSoundButton=function(e){this.blockSound=this.scene.make.container({}),this.settingSound=new Mr.Z(this.scene,{enable:e,frameOn:Ur.SWITCH_ON,frameOff:Ur.SWITCH_OFF,framePanelOn:Ur.SWITCH_PANEL_ON,framePanelOff:Ur.SWITCH_PANEL_OFF}),this.settingSound.setName("Sound"),this.settingSound.setPosition(65,0),this.settingSound.icon.setWorldSize(25,24),this.settingSound.button.setWorldSize(55,21);var t=this.scene.make.image({key:Fr,frame:Ur.ICON_SOUND});t.setPosition(-85,0),t.setWorldSize(31,30);var i=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.SOUND,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockSound.add([t,i,this.settingSound]),this.blockSound.setPosition(0,-50)},i.createMusicButton=function(e){this.blockMusic=this.scene.make.container({}),this.settingMusic=new Mr.Z(this.scene,{enable:e,frameOn:Ur.SWITCH_ON,frameOff:Ur.SWITCH_OFF,framePanelOn:Ur.SWITCH_PANEL_ON,framePanelOff:Ur.SWITCH_PANEL_OFF}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(65,0),this.settingMusic.icon.setWorldSize(25,24),this.settingMusic.button.setWorldSize(55,21);var t=this.scene.make.image({key:Fr,frame:Ur.ICON_MUSIC});t.setPosition(-85,0),t.setWorldSize(30,28);var i=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.MUSIC,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockMusic.add([t,i,this.settingMusic]),this.blockMusic.setPosition(0,0)},i.createVibrateButton=function(e){this.blockVibrate=this.scene.make.container({}),this.settingVibrate=new Mr.Z(this.scene,{enable:e,frameOn:Ur.SWITCH_ON,frameOff:Ur.SWITCH_OFF,framePanelOn:Ur.SWITCH_PANEL_ON,framePanelOff:Ur.SWITCH_PANEL_OFF}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.setPosition(65,0),this.settingVibrate.icon.setWorldSize(25,24),this.settingVibrate.button.setWorldSize(55,21);var t=this.scene.make.image({key:Fr,frame:Ur.ICON_VIB});t.setPosition(-85,0),t.setWorldSize(37,29);var i=this.scene.make.bitmapText({font:es.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.VIBRATE,alpha:.8});i.setTint(9661216),i.setPosition(-60,-5),this.blockVibrate.add([t,i,this.settingVibrate]),this.blockVibrate.setPosition(0,50)},i.addItem=function(){this.popup.add([this.title,this.blockMusic,this.blockSound,this.blockVibrate]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.blockMusic,this.blockSound,this.blockVibrate])},i.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Mn.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},i.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Mn.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},i.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var i=this.popup,n=i.y,s=i.scale;this.popupShowUpAnimation=new qn.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:n},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:s}}})}this.popupShowUpAnimation.play()},i.runPopupContentEntrancesAnimation=function(e,t){var i;null==(i=this.contentShowUpAnimation)||i.remove(),this.contentShowUpAnimation=new pr.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},i.runPopupExitsAnimation=function(e,t){var i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Jn.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0),i.scene.screen.close(i.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),jr=Hr,Yr=GameCore.Configs.Gameplay,Kr=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).main=void 0,i.header=void 0,i.footer=void 0,i.customBackground=void 0,i.rewardScreen=void 0,i.dailyMissionScreen=void 0,i.dailyRewardsScreen=void 0,i.currentCoin=void 0,i.timerDailyRewards=void 0,i.coinsTweenCounter=void 0,i.run=function(){var e,t;i.currentCoin=0,i.audio.playMusic(),null==(e=i.footer.dailyIcon)||e.checkNotice(),Es.Z.off(ts.Z.EVENTS.NOTICE_UPDATE,i.footer.dailyIcon.checkNotice),Es.Z.on(ts.Z.EVENTS.NOTICE_UPDATE,i.footer.dailyIcon.checkNotice),i.updateCurrentBestScore(),i.updateCurrentCoins(),i.updateCurrentLevelPlaying(),null==(t=i.timerDailyRewards)||t.remove(),i.timerDailyRewards=i.time.delayedCall(300,(function(){i.screen.open(Dn.o4.DAILY_REWARD_SCREEN)}))},i.eatCoins=function(e){i.createCoinsEffect(10,e);var t=i.currentCoin+Math.floor(e);i.setCoins(t),i.player.setCustomData("coin",i.currentCoin)},i.showNotifyNoAds=function(){i.game.globalScene.screen.open(Dn.o4.NOTIFY_SCREEN,{message:i.lang.Text.NO_ADS,duration:1200,loading:!1})},i.showNotifySkipAds=function(){i.game.globalScene.screen.open(Dn.o4.NOTIFY_SCREEN,{message:i.lang.Text.SORRY_NO_REWARDS+"\n"+i.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},i.handlePlaySingle=function(){var e;null==(e=i.coinsTweenCounter)||e.remove(),i.children.getAll().forEach((function(e){e instanceof Hn&&e.destroyObjectAndEffect()})),i.storage.dispatch((0,Ls.rq)())},i.handlePlayEndless=function(){var e;null==(e=i.coinsTweenCounter)||e.remove(),i.children.getAll().forEach((function(e){e instanceof Hn&&e.destroyObjectAndEffect()})),i.storage.dispatch((0,Ls.Vn)())},i.handlePlayWithFriend=function(){i.storage.dispatch((0,Ls.hJ)())},i.handleInviteIconClick=function(){i.storage.dispatch((0,ia.y)())},i.handleSettingClick=function(){i.screen.open(Dn.o4.SETTINGS_SCREEN)},i.handleRankIconClick=function(){i.screen.open(Dn.o4.LEADERBOARDS_SCREEN)},i.handleDailyIconClick=function(){i.screen.open(Dn.o4.DAILY_MISSIONS_SCREEN)},i.handleGiftIconClick=function(){i.rewardScreen.onReward=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.eatCoins(t),e.next=3,i.player.setCustomData("lastReceiveGift",Date.now());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.screen.open(Dn.o4.REWARD_SCREEN,{awardCoins:3*Yr.RescueCoins})},i.handleDiamondBarClick=function(){i.rewardScreen.onReward=i.eatCoins,i.screen.open(Dn.o4.REWARD_SCREEN,{awardCoins:3*Yr.RescueCoins})},i}(0,o.Z)(t,e);var i=t.prototype;return i.updateCurrentBestScore=function(){var e=this.player.getBestEndlessScore(),t=this.storage.getState(),i=(0,ta.Vb)(t).bestEndlessScore,n=void 0===i?0:i,s=e>n?e:n;this.header.scoreBar.setValue(s);var a=this.header.scoreBar.value;a.setText(a.text+"m")},i.updateCurrentCoins=function(){var e=this.player.getCoins();this.setCoins(e),this.updateCoinBarValue(this.currentCoin)},i.updateCoinBarValue=function(e){this.header.coinBar.setValue(e)},i.updateCoinBarValueIncreaseBy=function(e){this.header.coinBar.increaseValueBy(e)},i.updateCurrentLevelPlaying=function(){var e=this.player.getCustomData("level")||Yr.DefaultLevel;this.main.setCurrentLevelText(e)},i.preload=function(){var e=this;this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()}))},i.create=function(){e.prototype.create.call(this),this.createCustomBackground(),this.createSettingsScreen(),this.createRewardScreen(),this.createDailyMissionScreen(),this.createDailyRewardsScreen(),this.createLeaderboardsScreen(),this.createHeaderBar(),this.createMainContent(),this.createFooterBar()},i.createCoinsEffect=function(e,t){var i,n=this,s=this.header.coinBar.getWorldPosition(),a=s.x,r=s.y,o=this.main.logo.getWorldPosition(),c=o.x,h=o.y,u=0;null==(i=this.coinsTweenCounter)||i.remove(),this.coinsTweenCounter=this.tweens.addCounter({duration:1e3/e,repeat:e,repeatDelay:30,onRepeat:function(){var i=Phaser.Math.RND.between(c-60,c+60),s=new Hn(n,{from:{x:i,y:h-80},to:{x:a-45,y:r+7}});s.setDepth(Ln.Z.ON_TOP),s.onUpdate=function(){n.header.setDepth(Ln.Z.ON_TOP)},s.onComplete=function(){var i=Math.floor(t/e);n.updateCoinBarValueIncreaseBy(i),++u>=e&&n.header.setDepth(Ln.Z.ITEM)},s.run()}})},i.setCoins=function(e){var t=e<0?0:e;this.currentCoin=t},i.createCustomBackground=function(){this.customBackground=new la(this),this.customBackground.setDepth(jn.Z.BACKGROUND)},i.createSettingsScreen=function(){this.screen.add(Dn.o4.SETTINGS_SCREEN,jr)},i.createRewardScreen=function(){this.rewardScreen=this.screen.add(Dn.o4.REWARD_SCREEN,ea.Z)},i.createDailyMissionScreen=function(){var e=this;this.dailyMissionScreen=this.screen.add(Dn.o4.DAILY_MISSIONS_SCREEN,Br),this.dailyMissionScreen.onReward=function(t,i){"coin"===t&&e.eatCoins(i)}},i.createDailyRewardsScreen=function(){var e=this;this.dailyRewardsScreen=this.screen.add(Dn.o4.DAILY_REWARD_SCREEN,Nr.Z),this.dailyRewardsScreen.onNoAd=this.showNotifyNoAds,this.dailyRewardsScreen.onSkipAd=this.showNotifySkipAds,this.dailyRewardsScreen.onReward=function(t){e.eatCoins(t)}},i.createLeaderboardsScreen=function(){this.screen.add(Dn.o4.LEADERBOARDS_SCREEN,$s)},i.createHeaderBar=function(){this.header=new Va(this),this.header.setDepth(Ln.Z.BUTTON),this.header.coinBar.onClick=this.handleDiamondBarClick,Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},i.createMainContent=function(){this.main=new lr(this),this.main.setDepth(Ln.Z.LOGO),this.main.playSingleButton.onClick=this.handlePlaySingle,this.main.playEndlessButton.onClick=this.handlePlayEndless,this.updateCurrentLevelPlaying(),Phaser.Display.Align.In.Center(this.main,this.gameZone),this.main.setY(330)},i.createFooterBar=function(){this.footer=new Da(this),this.footer.setDepth(Ln.Z.BUTTON),this.footer.rankIcon.onClick=this.handleRankIconClick,this.footer.dailyIcon.onClick=this.handleDailyIconClick,this.footer.settingIcon.onClick=this.handleSettingClick;var e=this.gameZone.displayHeight;e>667?Phaser.Display.Align.In.BottomCenter(this.footer,this.main,0,340+(e-667)/2):na.Z.isMobile()?Phaser.Display.Align.In.BottomCenter(this.footer,this.main,0,290):Phaser.Display.Align.In.BottomCenter(this.footer,this.main,0,320)},t}(sa.Z);var Wr=Kr,Vr=i(468),zr=i(464),Xr=GameCore.Configs.Notification.ApiUrl,Jr=function(){var e=(0,r.Z)(h().mark((function e(t){var i,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.playerId,e.next=3,(0,ut.v)("players/"+i,t,{},Xr,10);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qr=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="LoadResourceFail",n.message=t||"Load resource fail",n.payload=i,n}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Qr=i(206),$r=i.n(Qr),eo=function(){function e(e,t){var i=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,n=e.type,s=e.value;if(!(s<1)&&(-1!==At()(t=i.requireTypes).call(t,n)&&!i.isPassRequiredTarget(n)&&i.processMore(e))){n=e.type,s=e.value;var a=i.getCorrectValue(n,s);i.game.storage.dispatch(function(e,t,i){return function(n){var s=Cr();if(GameCore.Utils.Valid.isObject(s)){var a=s;GameCore.Utils.Object.hasOwn(a,e)&&(a[e].rewarded||(a[e][t]+=i,window.game.player.setCustomData("dailyTasks",{logTasks:a}),n({type:Vi,payload:{id:e,type:t,value:i}})))}}}(i.id,n,a)),i.isTaskFinished(n)&&i.game.storage.dispatch(function(e){return function(t){t({type:Ji,payload:{id:e}}),Es.Z.emit(ts.Z.EVENTS.NOTICE_UPDATE)}}(i.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),i=fa(t)||[];if(!((null==i?void 0:i.length)<1)){var n=null==i?void 0:$r()(i).call(i,(function(t){return t.id===e.id}));n&&(this.taskData=n,this.requireTypes=ee()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),i=ga(t),n={value:0,target:0};if(!i)return n;if(!GameCore.Utils.Object.hasOwn(i,this.taskData.id))return n;var s=i[this.taskData.id];if(GameCore.Utils.Valid.isObject(s)&&GameCore.Utils.Object.hasOwn(s,e)){var a=s[e];"number"===typeof a&&(n.value=a)}return n.target=this.taskData.require[e]||0,n},t.getCorrectValue=function(e,t){var i=this.getDataByType(e),n=i.value,s=i.target,a=t;return n+t>s&&(a=s-n),Math.round(a)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),to=ts.Z.COLLECT_COINS,io=to.ID,no=to.EVENTS,so=function(e){function t(t){return e.call(this,t,io)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(no.COLLECT_COINS,this.process),Es.Z.on(no.COLLECT_COINS,this.process)},i.processMore=function(){return!0},t}(eo),ao=ts.Z.SHARE_GAME,ro=ao.ID,oo=ao.EVENTS,co=function(e){function t(t){return e.call(this,t,ro)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(oo.SHARE_GAME,this.process),Es.Z.on(oo.SHARE_GAME,this.process)},i.processMore=function(){return!0},t}(eo),ho=ts.Z.PASS_LEVELS,uo=ho.ID,lo=ho.EVENTS,po=function(e){function t(t){return e.call(this,t,uo)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(lo.PASS_LEVEL,this.process),Es.Z.on(lo.PASS_LEVEL,this.process)},i.processMore=function(){return!0},t}(eo),fo=ts.Z.SECOND_CHANCE_USE,go=fo.ID,mo=fo.EVENTS,vo=function(e){function t(t){return e.call(this,t,go)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(mo.SECOND_CHANCE_USED,this.process),Es.Z.on(mo.SECOND_CHANCE_USED,this.process)},i.processMore=function(){return!0},t}(eo),yo=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t,i){var n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i(),!ma(n)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Yi,payload:{}}),e.next=7,mr();case 7:s=e.sent,t(yr(s));case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[ts.Z.SHARE_GAME.ID]=new co(this.game),this.eventsListener[ts.Z.PASS_LEVELS.ID]=new po(this.game),this.eventsListener[ts.Z.COLLECT_COINS.ID]=new so(this.game),this.eventsListener[ts.Z.SECOND_CHANCE_USE.ID]=new vo(this.game)},e}(),Eo=yo,So=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],To=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bo=(0,W.P1)([function(e){var t;return null==(t=e[Ni])?void 0:t.missions}],(function(e){return e})),Ao=(0,W.P1)([function(e){var t;return null==(t=e[Ni])?void 0:t.isRequesting}],(function(e){return e})),Co=((0,W.P1)([bo,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Zi,payload:{missions:e}}}),Oo={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:{}},Io=(0,W.P1)([function(e){var t;return null==(t=e[Ni])?void 0:t.mission}],(function(e){return e})),wo=((0,W.P1)([Io],(function(e){return e?e.name:null})),function(){function e(e,t,i){var n=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,i=e.type,s=e.value;s<1||n.id===t&&n.isTypeRequired(i)&&n.processMore(e)&&(n.game.storage.dispatch(function(e,t,i){return{type:Gi,payload:{name:e,type:t,value:i}}}(n.name,i,s)),n.isMissionComplete()&&(Es.Z.emit(Oo.EVENTS.MISSION_COMPLETED,{name:n.name,reward:n.reward}),n.game.storage.dispatch(function(e){return{type:Fi,payload:{name:e}}}(n.name))))},this.id=t,this.name=i,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Io(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Io(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var i=t.require[e];return{value:t.process[e],target:i}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,i=e.process,n=!0;return ee()(t).forEach((function(e){if(n){var s=t[e];i[e]<s&&(n=!1)}})),n},e}()),Po=wo,_o=Oo.EVENTS,Ro=Oo.TYPES,ko=function(e){function t(t,i){return e.call(this,t,Ro.COLLECT_GEMS,i)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(_o.MISSION_UPDATE,this.process),Es.Z.on(_o.MISSION_UPDATE,this.process)},i.processMore=function(){return!0},t}(Po),xo=Oo.EVENTS,Lo=Oo.TYPES,Do=function(e){function t(t,i){return e.call(this,t,Lo.COMBO,i)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(xo.MISSION_UPDATE,this.process),Es.Z.on(xo.MISSION_UPDATE,this.process)},i.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var i=e.type;return e.value>=t.require[i]},t}(Po),Bo=Oo.EVENTS,No=Oo.TYPES,Mo=function(e){function t(t,i){return e.call(this,t,No.USE_ITEM,i)||this}(0,o.Z)(t,e);var i=t.prototype;return i.initEvents=function(){Es.Z.off(Bo.MISSION_UPDATE,this.process),Es.Z.on(Bo.MISSION_UPDATE,this.process)},i.processMore=function(e){return!0},t}(Po),Zo=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(h().mark((function e(t,i){var n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i(),!Ao(n)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Mi,payload:{}}),e.next=7,To();case 7:s=e.sent,t(Co(s));case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),i=bo(t);i&&ee()(i).forEach((function(t){switch(i[t].id){case Oo.TYPES.COLLECT_GEMS:e.listener[t]=new ko(e.game,t);break;case Oo.TYPES.COMBO:e.listener[t]=new Do(e.game,t);break;case Oo.TYPES.USE_ITEM:e.listener[t]=new Mo(e.game,t)}}))},t.initEvents=function(){Es.Z.off(Oo.EVENTS.MISSION_START,this.startListener),Es.Z.on(Oo.EVENTS.MISSION_START,this.startListener)},e}(),Go=Zo,Fo=i(96),Uo=i(144),Ho=i(221),jo=i(111),Yo=i(460),Ko=function(e){try{var t=(0,_n.f)(e),i=window.game.player,n=t.entryPointData||{},s=n.playerId,a=n.playerName,r=n.playerPhoto;return i.getPlayer().playerId===s?Uo.U:new Me.Z(s,a,r).toObject()}catch(o){return Uo.U}},Wo=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var i=t.getID().toString();e((0,Yo.cQ)(i))})).catch((function(e){})),e((0,Ls.li)())}catch(t){}}},Vo=function(){return function(e,t){try{var i=t(),n=(0,_n.f)(i),s=window.game.player,a=s.getPlayer(),r=n.contextId,o=(n.entryPointData||{}).playerId,c=a.playerId===o,h=Ko(i);c||s.updateConnectedPlayers([h]);var u=h.playerId;e((0,Ls.hJ)(r,u,!0))}catch(l){throw new Error("processInviteMode: "+l)}}},zo=function(){return function(e,t){try{var i=t(),n=(0,_n.f)(i),s=window.game.player.getPlayer(),a=n.entryPointData||{},r=a.matchId,o=a.opponentId,c=a.playerId;e(s.playerId===c?(0,Ls.Lq)(r,o):(0,Ls.Lq)(r,c))}catch(h){throw new Error("processChallengeFriendMode: "+h)}}},Xo=function(){return function(e,t){try{var i=t(),n=(0,_n.f)(i).entryPointData||{},s=n.playerId,r=n.playerScore,o={score:r,level:0};e((0,Ho.Q0)(s,o));var c=Ko(i),h=(0,a.Z)({},c,{score:r});e((0,Ls.b6)(h))}catch(u){throw new Error("processMatchingGroupMode: "+u)}}},Jo=function(){return function(e){try{e((0,Ls.rq)())}catch(t){throw new Error("processNewUserMode: "+t)}}},qo=i(459),Qo=i(469),$o=GameCore.Configs,ec=$o.AppId,tc=$o.Notification,ic=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).handleLoadJSonCompleted=function(){var e=i.scene.isSleeping();e&&i.scene.wake();var t=i.cache.json.get(Nn.Z.OBJ_JSON.KEY),n=Nn.Z.OBJ_JSON.DATA;i.load.multiatlas({key:Nn.Z.COLLECT_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.COLLECT_OBJ]}),i.load.multiatlas({key:Nn.Z.DECOR_OBJECTS_BEHIND.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.DECOR_BEHIND_OBJ]}),i.load.multiatlas({key:Nn.Z.MOVEMENT_MODIFIER_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.MOVEMENT_MODIFIER_OBJ]}),i.load.multiatlas({key:Nn.Z.MOVING_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.MOVING_OBJ]}),i.load.multiatlas({key:Nn.Z.OTHER_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.OTHER_OBJ]}),i.load.multiatlas({key:Nn.Z.STATIC_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.STATIC_OBJ]}),i.load.multiatlas({key:Nn.Z.SUDDEN_OBJECTS.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.SUDDEN_OBJ]}),i.load.multiatlas({key:Nn.Z.WATCHER.KEY,path:Nn.Z.OBJ_JSON.PATH,atlasURL:t[n.WATCHER]}),e&&i.load.once(Phaser.Loader.Events.COMPLETE,(function(){i.scene.sleep()})),i.load.start()},i.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,i.player.requestConnectedPlayers(),i.preloadStartingLevel(),setTimeout(i.subscribebot,500)},i.processAfterUpdatePlayerProfile=function(){tc.Enable&&(i.updatePlayerProfileToNotificationService(),tc.DisableSendNotification||i.sendNotificationForNewUser())},i.startGame=function(){i.analytics.event(Nt._.APP_READY),i.storage.dispatch((0,qo.I)(Cn.C.LOAD_SCENE)),i.storage.dispatch((function(e,t){var i=window.game,n=i.player,s=i.analytics,a=i.globalScene;try{var r=t(),o=(0,_n.f)(r),c=(0,_n.F)(r),h=n.getPlayer(),u=(o.entryPointData||{}).type;if(h.isUserNew&&s.event(Nt._.NEW_USER),c===jo.kC)return void e(Wo());if(c===jo.jt){if(u===Fo.W6)return void e(Vo());if(u===Fo.Sb)return void e(zo())}if(c===jo.ey)return void e(Xo());if(h.isUserNew)return void e(Jo());a.events.emit(Cn.K.SWITCH,Cn.C.DASHBOARD_SCENE)}catch(l){a.events.emit(Cn.K.SWITCH,Cn.C.DASHBOARD_SCENE)}}))},i.subscribebot=function(){i.facebook.attemptToSubscribeBot()},i.handleLoadMusicCompleted=function(){i.audio.initMusic(L.BACKGROUND.KEY),i.audio.playMusic()},i}(0,o.Z)(t,e);var i=t.prototype;return i.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Nt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new qr("Load resources at LoadScene failed.");(0,n.R0)(t,{file:null==e?void 0:e.url})})),this.textStyler.addFont({type:"local",fontType:"opentype",fontName:es.Z.FONT_FAMILY}),this.loadFonts(),this.load.image(_s.Z.AVATAR.KEY,_s.Z.AVATAR.FILE),this.load.atlas({key:Nn.Z.DEFAULT.KEY,atlasURL:Nn.Z.DEFAULT.JSON,textureURL:Nn.Z.DEFAULT.TEXTURE}),this.load.atlas({key:Nn.Z.GAMEPLAY.KEY,atlasURL:Nn.Z.GAMEPLAY.JSON,textureURL:Nn.Z.GAMEPLAY.TEXTURE});var t=Phaser.Loader.Events.FILE_KEY_COMPLETE+"json-"+Nn.Z.OBJ_JSON.KEY;this.load.once(t,this.handleLoadJSonCompleted),this.load.json(Nn.Z.OBJ_JSON.KEY,Nn.Z.OBJ_JSON.JSON),this.load.atlas({key:Nn.Z.EFFECTS.KEY,atlasURL:Nn.Z.EFFECTS.JSON,textureURL:Nn.Z.EFFECTS.TEXTURE}),this.load.atlas({key:Nn.Z.TUTORIAL.KEY,atlasURL:Nn.Z.TUTORIAL.JSON,textureURL:Nn.Z.TUTORIAL.TEXTURE}),this.load.spine(Nn.Z.MOUSE_SPINE.KEY,Nn.Z.MOUSE_SPINE.jsonPATH,Nn.Z.MOUSE_SPINE.atlasPATH,!0),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(n.tO)},i.create=function(){this.analytics.event(Nt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.audio.initSound(),this.startGame()},i.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,i=e.name,n=e.photo,s=e.locale,a=e.ASID;Jr({appId:ec,playerId:t,name:i,photo:n,locale:s,ASID:a})},i.sendNotificationForNewUser=function(){var e=(0,r.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.getPlayerIsNew()){e.next=4;break}return e.abrupt("return");case 4:if(t=this.player.getPlayerASID()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(i=e.t0,!0!==i.isNotificationFirstSent){e.next=16;break}return e.abrupt("return");case 16:this.facebook.sendNotificationAsync({message:"Hi @["+t+"] your friends are waiting to play with you, play now!",delayTime:3600}),FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),i.setupGlobalScene=function(){var e=this.scene.get(Cn.C.GLOBAL_SCENE);e instanceof zr.Z&&e.setup()},i.initModules=function(){new Go(this.game),new Eo(this.game)},i.preloadStartingLevel=function(){var e=GameCore.Configs.Gameplay,t=this.player.getCustomData("level")||e.DefaultLevel;e.AlwayStartDefaultLevel&&(t=e.DefaultLevel);var i=Qo.Z[t]||null;if(i){var n=i.key,s=i.mapJson;this.cache.tilemap.exists(n)||this.load.tilemapTiledJSON(n,s)}},i.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},i.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+L.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(L.BACKGROUND.KEY,L.BACKGROUND.FILE),this.load.start()},i.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.png","wide-frame-final-win":"./assets/wideframes/wide-frame-final-win.png","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png"})},i.loadFonts=function(){var e=this.lang.getCurrentLanguage();if("ru"===e){var t=es.Z.PRIMARY.KEY+"-"+e;es.Z.PRIMARY={KEY:t,TEXTURE:"./assets/fonts/"+t+".png",DATA:"./assets/fonts/"+t+".xml"};var i=es.Z.GREEN_STROKE.KEY+"-"+e;es.Z.GREEN_STROKE={KEY:i,TEXTURE:"./assets/fonts/"+i+".png",DATA:"./assets/fonts/"+i+".xml"};var n=es.Z.BROWN_STROKE.KEY+"-"+e;es.Z.BROWN_STROKE={KEY:n,TEXTURE:"./assets/fonts/"+n+".png",DATA:"./assets/fonts/"+n+".xml"};var s=es.Z.BLUE_STROKE.KEY+"-"+e;es.Z.BLUE_STROKE={KEY:s,TEXTURE:"./assets/fonts/"+s+".png",DATA:"./assets/fonts/"+s+".xml"}}this.load.bitmapFont(es.Z.PRIMARY.KEY,es.Z.PRIMARY.TEXTURE,es.Z.PRIMARY.DATA),this.load.bitmapFont(es.Z.GREEN_STROKE.KEY,es.Z.GREEN_STROKE.TEXTURE,es.Z.GREEN_STROKE.DATA),this.load.bitmapFont(es.Z.BROWN_STROKE.KEY,es.Z.BROWN_STROKE.TEXTURE,es.Z.BROWN_STROKE.DATA),this.load.bitmapFont(es.Z.BLUE_STROKE.KEY,es.Z.BLUE_STROKE.TEXTURE,es.Z.BLUE_STROKE.DATA)},t}(Phaser.Scene),nc=ic,sc=function(e){function t(){for(var t,i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(i=e.call.apply(e,v()(t=[this]).call(t,s))||this).isVisible=!0,i.browserPrefixes=["moz","ms","o","","webkit"],i.visibleCallbacks=[],i.hiddenCallbacks=[],i.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?i.onVisibleEvent():i.onHiddenEvent();var t=i.getBrowserPrefix(),n=i.getHiddenPropertyName(t);return document[n]?i.onHiddenEvent():i.onVisibleEvent()},i}(0,o.Z)(t,e);var i=t.prototype;return i.configure=function(){var e=this,t=this.getBrowserPrefix(),i=this.getVisibilityEvent(t);document.addEventListener(i,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},i.addEventVisible=function(e){this.visibleCallbacks.push(e)},i.addEventHidden=function(e){this.hiddenCallbacks.push(e)},i.isGameVisible=function(){return this.isVisible},i.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},i.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},i.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},i.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},i.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),ac=sc,rc=i(638),oc=["Enable"],cc=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var c=t.prototype;return c.boot=function(){var t=(0,r.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initLevelBuilder(),this.initAdaptivePerformance(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.handleShowInterAdWhenStartGame();case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.start=function(){e.prototype.start.call(this)},c.addExtraGameObjectMethods=function(){var e=new g(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},c.addExtraFBInstantFunctions=function(){var e=new u.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new p(this)},c.addPlugins=function(){this.plugins.install("Storage",hn,!0,"storage"),this.plugins.install("Rollbar",Lt,!0,"rollbar"),this.plugins.install("AdsManager",_,!0,"ads"),this.plugins.install("AuthManager",Q,!0,"auth"),this.plugins.install("AudioManager",U,!0,"audio"),this.plugins.install("WorldManager",vn,!0,"world"),this.plugins.install("PlayerManager",ht,!0,"player"),this.plugins.install("LanguageManager",Pn,!0,"lang"),this.plugins.install("ProfileManager",Et,!0,"profile"),this.plugins.install("AnalyticsManager",x,!0,"analytics"),this.plugins.install("AdaptivePerformance",de,!0,"performance"),this.plugins.install("VisibilityChangeHandler",ac,!0,"visibility"),this.plugins.installScenePlugin("textStyler",fn,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Ut,"screen"),this.plugins.installScenePlugin("FrameCapture",ae,"frameCapture"),this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},c.addDevPlugins=function(){var e=(0,r.Z)(h().mark((function e(){var t,n,s,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([i.e(7),i.e(942)]).then(i.bind(i,639));case 4:return t=e.sent.default,e.next=7,i.e(401).then(i.bind(i,640));case 7:return n=e.sent.default,e.next=10,Promise.all([i.e(498),i.e(803)]).then(i.bind(i,641));case 10:return s=e.sent.default,e.next=13,Promise.all([i.e(498),i.e(795)]).then(i.bind(i,642));case 13:return a=e.sent.default,e.next=16,Promise.all([i.e(498),i.e(123)]).then(i.bind(i,643));case 16:r=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Statistics",n,!0,"statistics"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("LevelBuilder",a,!0,"level-builder"),this.plugins.install("Profiler",r,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.statistics=this.plugins.get("Statistics"),this.particleEditor=this.plugins.get("ParticleEditor"),this.levelBuilder=this.plugins.get("LevelBuilder"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor");case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.addScenes=function(){this.scene.add(Cn.C.BOOT_SCENE,xn,!0),this.scene.add(Cn.C.LOAD_SCENE,nc,!1),this.scene.add(Cn.C.GAME_SCENE,Vr.Z,!1),this.scene.add(Cn.C.DASHBOARD_SCENE,Wr,!1),this.scene.add(Cn.C.GLOBAL_SCENE,zr.Z,!1)},c.addDevScenes=function(){var e=(0,r.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i.e(638).then(i.bind(i,644));case 4:return t=e.sent.default,e.next=7,i.e(432).then(i.bind(i,645));case 7:n=e.sent.default,this.scene.add(Cn.C.TEST_SCENE,t,!1),this.scene.add(Cn.C.ANIMATIONS_SCENE,n,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.initAdsAsync=function(){var e=(0,r.Z)(h().mark((function e(){var t,n,s,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,rc.Z.setGame(this),n=rc.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,i.e(131).then(i.bind(i,646));case 6:s=e.sent.default,n=s;case 8:r=(0,a.Z)({},t.InterstitialAdOptions),o=GameSDK.getPlatform(),c=GameSDK.getLocale(),"WEB"===o&&"ru"===c&&(r.secondsFirstTime=60,r.secondsBetweenAds=60),r.showWhenStartGame&&(r.secondsFirstTime=0),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:r,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,i=e.PortraitRatio,n=e.PortraitWidth,s=e.PortraitHeight,a=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,u=e.FullSizeOnLandscape,l=i,d=n,p=s,f=a,g=r,m=o;this.world.configure({autoResize:c,portraitRatio:l,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:h,fullSizeOnLandscape:u}),this.world.resize(e.ForcePixelRatio)},c.initStorage=function(){var e=new An(this);this.storage.setInitiator(e)},c.initLanguage=function(){this.facebook.getLocale();this.lang.configure({locale:"ru",upperCaseText:!0})},c.initVisibilityChangeHandler=function(){this.visibility.configure()},c.initUtils=function(){this.handlePauseAudio()},c.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},c.initDebugger=function(){GameCore.Utils.Valid.isDebugger()},c.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},c.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},c.initLevelBuilder=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.LevelBuilder.Enable&&this.levelBuilder.configure(GameCore.Configs.LevelBuilder))},c.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},c.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,i=(0,s.Z)(e,oc);if(t){var n=this.world.getPixelRatio();this.performance.configure((0,a.Z)({pixelRatio:n},i)),this.performance.active()}},c.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},c.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic()}))},c.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,i=Phaser.Renderer.WebGL.Pipelines;if(i)[i.ROPE_PIPELINE,i.LIGHT_PIPELINE,i.POSTFX_PIPELINE,i.POINTLIGHT_PIPELINE,i.BITMAPMASK_PIPELINE].forEach((function(e){var i;null==(i=t.get(e))||i.destroy(),t.remove(e)}))}},c.handleShowInterAdWhenStartGame=function(){var e=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.audio.stopMusic(),this.audio.muteAll(),e.next=8,this.ads.preloadInterstitialAdAsync();case 8:return e.next=10,this.ads.showInterstitialAdAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),(0,n.tO)(e.t0);case 15:return e.prev=15,this.audio.unmuteAll(),this.audio.playMusic(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[3,12,15,19]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Game),hc=cc,uc={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},audio:{},input:{gamepad:!1,keyboard:!0,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},physics:{default:"arcade",arcade:{gravity:{y:0}}},plugins:{global:[]}},lc=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(lc),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new hc(uc);window.game=e}catch(t){(0,n.tO)(t)}}())}),50)},457:function(e,t,i){"use strict";i.d(t,{I:function(){return n},m:function(){return s}});var n="DAILY_REWARDS_REQUEST",s="DAILY_REWARDS_RECEIVE"},456:function(e,t,i){"use strict";i.d(t,{L:function(){return n}});var n="dailyRewards"},473:function(e,t){"use strict";t.Z={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_COINS:{ID:"collect-coins",EVENTS:{COLLECT_COINS:"collect-coins"}},SHARE_GAME:{ID:"share-game",EVENTS:{SHARE_GAME:"share-game"}},SECOND_CHANCE_USE:{ID:"second-chance-use",EVENTS:{SECOND_CHANCE_USED:"second-chance-used"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}}},225:function(e,t,i){"use strict";i.d(t,{H$:function(){return b},aV:function(){return R},tu:function(){return O}});var n=i(24),s=i(21),a=i.n(s),r=i(38),o=i.n(r),c=i(46),h=i.n(c),u=i(142),l=i(463),d=GameCore.Configs,p=(d.ApiHost,d.OtherHost),f=d.LeadersBoard,g=f.Prefix,m=f.LeaderboardId,v=f.Name,y=g+"/"+m+"/leaders",E=g+"/"+m+"/players",S=function(e){var t="";return m?(e===l.C?t=y:e===l.n&&(t=E),t):t},T=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game.player.getPlayerId(),n=o()(t).call(t,(function(e){var t,n=i===e.playerId?"You":(""+e.playerId).replace(/_/g," ");return h()(t=n.toLowerCase()).call(t,"guest")>-1&&(n="Anonymous"),{playerId:e.playerId,rank:e.rank,score:e.score,getScore:function(){return e.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return e.rank},getExtraData:function(){return{}},getPlayer:function(){return{getID:function(){return e.playerId},getName:function(){return n},getPhoto:function(){return"./assets/images/others/avatar.png"}}}}})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,n.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==m){e.next=3;break}return e.abrupt("return",A(t));case 3:return e.abrupt("return",C(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),i=[],n=S(l.C)){e.next=5;break}return e.abrupt("return",i);case 5:return s=GameCore.Utils.String.params(t),e.next=8,(0,u.U)(n+"?"+s,{},p);case 8:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",i);case 12:return i=o,e.abrupt("return",T(i));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),n=(i=t).limit,s=i.offset,e.next=4,window.GameSDK.getLeaderboardAsync(v);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(n,s);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,n.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==m){e.next=3;break}return e.abrupt("return",I(t));case 3:return e.abrupt("return",w(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),i=[],n=S(l.n)){e.next=5;break}return e.abrupt("return",i);case 5:return s=GameCore.Utils.String.params(t),e.next=8,(0,u.U)(n+"?"+s,{},p);case 8:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",i);case 12:return i=o,e.abrupt("return",T(i));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),n=(i=t).limit,s=i.offset,e.next=4,window.GameSDK.getLeaderboardAsync(v);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(n,s);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=(function(){var e=(0,n.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==m){e.next=2;break}return e.abrupt("return",P(t));case 2:return e.abrupt("return",_());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(n=S(l.n)){e.next=6;break}return e.abrupt("return",i);case 6:return s=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,u.U)(n+"?"+s,{},p);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return e.next=15,T(o);case 15:return i=e.sent[0],e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=function(){var e=(0,n.Z)(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(v);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,n.Z)(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==m){e.next=2;break}return e.abrupt("return",k(t,i));case 2:return e.abrupt("return",x(i));case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),k=function(){var e=(0,n.Z)(a().mark((function e(t,i){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.v)("leaderboards/"+m+"/players/"+t,{score:i},{},p);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),x=function(){var e=(0,n.Z)(a().mark((function e(t){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(v);case 2:return i=e.sent,e.next=5,i.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},463:function(e,t,i){"use strict";i.d(t,{C:function(){return n},n:function(){return s}});var n="global",s="friend"},145:function(e,t,i){"use strict";i.d(t,{Xp:function(){return Ye},Lq:function(){return Ve},RM:function(){return Je},cN:function(){return Xe},Ad:function(){return ze},Vn:function(){return je},b6:function(){return We},hJ:function(){return Ke},rq:function(){return He},li:function(){return Ue},Wv:function(){return it}});var n=i(24),s=i(21),a=i.n(s),r=i(46),o=i.n(r),c=i(31),h=i(144),u=i(2),l=i(53),d=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidContextId",n.message=t||"This contextId is not valid",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),p=i(143),f=i(62),g=i(225),m=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="NewScoreIsBad",n.message=t||"The new score is bad",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),v=i(460),y=i(458),E=i(141),S=i(96),T=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidOpponentId",n.message=t||"This opponentId is not valid",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),b=i(224),A=i(454),C=i(462),O=i(223),I=i(61),w=(0,I.P1)([function(e){return e.messages.data}],(function(e){return e})),P=(0,I.P1)([w,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),_=i(54),R=i(146),k=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new d(null,{contextId:t})},x=function(e){var t=e.opponentId,i=e.contextId;if(""===t||"string"!==typeof t)throw new T(null,{opponentId:t});if(""===i||"string"!==typeof i)throw new d(null,{contextId:i})},L=function(e){if(null===e.imageShare)throw new b.Z},D=function(e,t){return void 0===t&&(t=!0),function(i,n){var s,a=n(),r=w(a);if(t){var o;if(null!=(o=r[e])&&o.sent)return;i(B(e))}null!=(s=r[e])&&s.sent&&i(N(e))}},B=function(e){return{type:E.qj,payload:{opponentId:e}}},N=function(e){return{type:E.rh,payload:{opponentId:e}}},M=function(){var e=(0,n.Z)(a().mark((function e(t,i){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game.facebook,x({opponentId:t,contextId:i}),(s=FBInstant.context.getID())!==i||""===i){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===i){e.next=8;break}return e.abrupt("return",i);case 8:if(!i){e.next=12;break}return e.next=11,n.switchAsync(i);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,_.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,i){return e.apply(this,arguments)}}(),Z=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,o,h,u,l,d,p,f,g,m,v,y;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=window.game,o=r.player,h=r.analytics,u=r.facebook,i.prev=1,l=t.matchId,d=t.contextId,i.next=5,M(e,d);case 5:return p=i.sent,k({contextId:p}),f=s(),i.next=10,(0,R.b1)(f);case 10:return g=i.sent,L({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,i.next=15,u.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:v+" challenges you",localizations:{en_US:v+" challenges you",vi_VN:v+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:g||"",template:"challenge",data:{type:S.Sb,matchId:l,playerId:y,opponentId:e,status:A.kR}});case 15:n(D(e)),h.event(c._.MESSAGE,{message_content_type:"Invite",success:!0}),i.next=23;break;case 19:i.prev=19,i.t0=i.catch(1),h.event(c._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,_.tO)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[1,19]])})));return function(e,t){return i.apply(this,arguments)}}()},G=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,o,h,u,l,d,p,f,g,m,v,y;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=window.game,o=r.player,h=r.analytics,u=r.facebook,i.prev=1,l=t.matchId,d=t.contextId,i.next=5,M(e,d);case 5:return p=i.sent,k({contextId:p}),f=s(),i.next=10,(0,R.b1)(f);case 10:return g=i.sent,L({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,i.next=15,u.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" just finished. Check them now.",localizations:{en_US:v+" just finished. Check them now.",vi_VN:v+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:g||"",template:"finished",data:{type:S.Sb,matchId:l,playerId:y,opponentId:e,status:A.o3}});case 15:n(D(e)),h.event(c._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),i.next=23;break;case 19:i.prev=19,i.t0=i.catch(1),h.event(c._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,_.tO)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[1,19]])})));return function(e,t){return i.apply(this,arguments)}}()},F=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,o,h,u,l,d,p,f,g,m,v,y,E,T,b,C;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=window.game,o=r.player,h=r.analytics,u=r.facebook,i.prev=1,l=t.matchId,d=t.contextId,i.next=5,M(e,d);case 5:return p=i.sent,k({contextId:p}),f=s(),i.next=10,(0,R.b1)(f);case 10:return g=i.sent,L({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,E=(0,O.Jy)(f),T=E[y]||{},b=T.score,C=void 0===b?0:b,i.next=17,u.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" beat your high score. Their score: "+C,localizations:{en_US:v+" beat your high score. Their score: "+C,vi_VN:v+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+C+" \u0111i\u1ec3m!"}},image:g||"",template:"pass_score",data:{type:S.Sb,matchId:l,playerId:y,opponentId:e,status:A.o3}});case 17:n(D(e)),h.event(c._.MESSAGE,{message_content_type:"BestScore",success:!0}),i.next=25;break;case 21:i.prev=21,i.t0=i.catch(1),h.event(c._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,_.tO)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[1,21]])})));return function(e,t){return i.apply(this,arguments)}}()},U=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,o,h,u,l,p,f,g,m,v,y,E,T;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=window.game,o=r.player,h=r.analytics,u=r.facebook,i.prev=1,l=t.matchId,p=t.contextId,f=t.score,i.next=5,M(e,p);case 5:return g=i.sent,k({contextId:g}),m=s(),i.next=10,(0,R.b1)(m);case 10:return v=i.sent,L({imageShare:v}),y=o.getPlayer(),E=y.name,T=y.playerId,i.next=15,u.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:E+" got "+f+" scores. So easy! Can you?",localizations:{en_US:E+" got "+f+" scores. So easy! Can you?",vi_VN:E+" \u0111\xe3 \u0111\u1ea1t "+f+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:v||"",template:"play_turn",data:{type:S.Sb,matchId:l,playerId:T,opponentId:e,status:A.kR}});case 15:n(D(e)),h.event(c._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),i.next=25;break;case 19:if(i.prev=19,i.t0=i.catch(1),h.event(c._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(i.t0 instanceof d)){i.next=24;break}return i.abrupt("return");case 24:(0,_.tO)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[1,19]])})));return function(e,t){return i.apply(this,arguments)}}()},H=function(){var e=(0,n.Z)(a().mark((function e(t,i){var n,s,r,o,c,h,u,l,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game,s=n.player,r=n.facebook,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,l=(0,O.Vb)(i),d=l.score,p={type:S.lB,playerId:c,playerName:h,playerPhoto:u,playerScore:d},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:h+" beats your high score. Their score: "+d+".",localizations:{en_US:h+" beats your high score. Their score: "+d+".",vi_VN:h+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:p});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,_.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,i){return e.apply(this,arguments)}}(),j=function(){var e=(0,n.Z)(a().mark((function e(t,i){var n,s,r,o,c,h,u,l,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,s=n.player,r=n.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,l=(0,O.Vb)(i),d=l.score,p={type:S.lB,playerId:c,playerName:h,playerPhoto:u,playerScore:d},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+d+" scores. So easy! Can you?",localizations:{en_US:h+" got "+d+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+d+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:p});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,_.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,i){return e.apply(this,arguments)}}(),Y=i(217),K=i(111),W=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidMatchId",n.message=t||"Invalid match id",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),V=i(222),z=i(45),X=i(47),J=i.n(X),q=i(38),Q=i.n(q),$=i(48),ee=i.n($),te=i(139),ie=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(i){return null}},ne=function(e,t){try{var i=ie(e),n={};GameCore.Utils.Valid.isObject(i)&&(n=i);var s=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(s))return!1;var a=GameCore.Utils.Object.clear(s),r=(0,te.TS)(n,a),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},se=i(142),ae=GameCore.Configs.ApiHost,re=(function(){var e=(0,n.Z)(a().mark((function e(t){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,se.v)("single-matches",t,{},ae);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,se.U)("single-matches/active",{},ae);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(a().mark((function e(t,i){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/move",e.next=3,(0,se.v)(n,i,{},ae);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(a().mark((function e(t){var i,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/finish",e.next=3,(0,se.v)(i,{},{},ae);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(a().mark((function e(t){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,se.v)("matches",{opponentPlayerId:t},{},ae);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="matches/"+t+"/join",e.next=3,(0,se.v)(i,{},{},ae);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,n.Z)(a().mark((function e(t){var i,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="matches/"+t,e.next=3,(0,se.U)(i,{},ae);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,n.Z)(a().mark((function e(t,i,n,s){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="matches/"+t+"/finish",e.next=3,(0,se.v)(r,{matchId:t,score:i,level:n,extraData:s},{},ae);case 3:return o=e.sent,e.abrupt("return",(null==o?void 0:o.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,i,n,s){return e.apply(this,arguments)}}(),ue=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidMatchStatus",n.message=t||"The match status is not valid",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),le=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidOpponentId",n.message=t||"Invalid opponent id",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),de=le,pe=i(461),fe=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidBlackPlayerId",n.message=t||"Invalid black player id",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),ge=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidRequestedMatchId",n.message=t||"The matchId in match data not matched with requested matchId",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),me=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidWhitePlayerId",n.message=t||"Invalid white player id",n.payload=i,n}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),ve=function(e){var t=e.matchId,i=e.currentMatchId;if(""===t||"string"!==typeof t)throw new W(null,{matchId:t});if(""===i||"string"!==typeof i)throw new W(null,{currentMatchId:i});if(t!==i)throw new ge(null,{matchId:t,currentMatchId:i})},ye=function(e){var t=e.playerId,i=e.match,n=i._id,s=i.playerId,a=i.status;if(""===n||"string"!==typeof n)throw new W(null,{matchId:n});if("finished"===a||"string"!==typeof a)throw new ue("This match is finished",{status:a});if(s!==t)throw new pe.Z(null,{playerId:s,currentPlayerId:t})},Ee=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new de(null,{opponentId:t})},Se=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new W(null,{matchId:t})},Te=function(e){var t=e.match,i=t._id,n=t.whitePlayerId,s=t.blackPlayerId;if(""===i||"string"!==typeof i)throw new W(null,{matchId:i});if(""===n||"string"!==typeof n)throw new me(null,{whitePlayerId:n});if(""===s||"string"!==typeof s)throw new fe(null,{blackPlayerId:s})},be=GameCore.Configs.Match,Ae=function(e){try{return GameCore.Utils.Hash.stringToHash(J()(e))}catch(t){return""}},Ce=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Oe=function(){return function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=window.game,n=i.player,i.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:Y.xm,payload:{}}),s=n.getPlayerId(),r=(0,z.Z)({},be.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),ye({playerId:s,match:r}),t(we(r)),ne(be.SingleMatchStore,r),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(we(null)),!(e.t0 instanceof W)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof ue)){e.next=18;break}return e.abrupt("return");case 18:(0,_.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Ie=function(e){return function(){var t=(0,n.Z)(a().mark((function t(i,n){var s,r,o,c,h,u,l,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Se({matchId:e}),r=n(),o=(0,C.L7)(r),c=s.getPlayerId(),ve({matchId:e,currentMatchId:o}),i({type:Y.v7,payload:{matchId:e}}),h=(0,C.gd)(r),ye({playerId:c,match:h}),u=(0,z.Z)({},be.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:c,finishAt:Date.now()}),i(we(u)),l=u.data,(d=(0,z.Z)({},u)).data=Ae(l),ne(be.SingleMatchStore,d),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),i(we(null)),!(t.t0 instanceof W)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof ue)){t.next=25;break}return t.abrupt("return");case 25:(0,_.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,i){return t.apply(this,arguments)}}()},we=function(e){return{type:Y.Uo,payload:{match:e}}},Pe=function(){return{type:Y.zu,payload:{}}},_e=function(){return{type:Y.JC,payload:{}}},Re=function(e){return function(){var t=(0,n.Z)(a().mark((function t(i){var n,s,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=window.game,s=n.profile,n.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),r=e.playerId,Ee({opponentId:r}),i({type:Y.tU,payload:{opponentInfo:e}}),t.next=8,re(r);case 8:return o=t.sent,Te({match:o}),t.next=12,s.requestProfiles([r]);case 12:i(De(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),i(De(null)),!(t.t0 instanceof W)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof de)){t.next=22;break}return t.abrupt("return");case 22:(0,_.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=(0,n.Z)(a().mark((function t(i){var n,s,r,o,c,h,u,l,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=window.game,s=n.player,r=n.profile,n.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Se({matchId:e}),i({type:Y.Qi,payload:{matchId:e}}),t.next=7,oe(e);case 7:if(o=t.sent,Te({match:o}),c=o.status,h=o.whitePlayerId,u=o.blackPlayerId,c!==A.kR){t.next=16;break}return l=s.getPlayerId(),d=l===h?u:h,t.next=16,r.requestProfiles([d]);case 16:i(De(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),i(De(null)),!(t.t0 instanceof W)){t.next=24;break}return t.abrupt("return");case 24:(0,_.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n){var s,r,o,c,h,u,l,d,p;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,s=window.game,r=s.player,s.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Se({matchId:e}),n({type:Y.f3,payload:{matchId:e,opponentInfo:t}}),i.next=7,ce(e);case 7:o=i.sent,Te({match:o}),c=o.whitePlayerId,h=o.whitePlayerScore,u=o.blackPlayerScore,l=r.getPlayerId(),d=r.getPlayerData(),p=d.score,n(De(o,{score:l===c?h:u,bestScore:p})),i.next=23;break;case 17:if(i.prev=17,i.t0=i.catch(0),n(De(null)),!(i.t0 instanceof W)){i.next=22;break}return i.abrupt("return");case 22:(0,_.tO)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[0,17]])})));return function(e){return i.apply(this,arguments)}}()},Le=function(e,t,i){return function(){var s=(0,n.Z)(a().mark((function n(s){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,window.game.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Se({matchId:e}),s({type:Y.DI,payload:{matchId:e,score:t,extraData:i}}),r=i.level,n.next=8,he(e,t,r,i);case 8:return o=n.sent,Te({match:o}),n.next=12,s(De(o));case 12:n.next=20;break;case 14:if(n.prev=14,n.t0=n.catch(0),s(De(null)),!(n.t0 instanceof W)){n.next=19;break}return n.abrupt("return");case 19:(0,_.tO)(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return s.apply(this,arguments)}}()},De=function(e,t,i){return void 0===i&&(i=null),{type:Y.AO,payload:{match:e,opponentInfo:t,current:i}}},Be=function(e){return{type:Y.Vj,payload:{opponentInfo:e}}},Ne=function(e,t){return{type:Y.li,payload:{matchId:e,players:t}}},Me=i(221),Ze=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new d(null,{contextId:t})},Ge=null,Fe=function(e){clearTimeout(Ge),Ge=setTimeout((function(){window.game.globalScene.screen.close(f.o4.NOTIFY_SCREEN)}),e)},Ue=function(){return function(e){try{e(je())}catch(t){(0,_.tO)(t)}}},He=function(){return function(e){try{e(Pe()),e($e(K.oN))}catch(t){(0,_.tO)(t)}}},je=function(){return function(e){try{e(_e()),e($e(K.UQ))}catch(t){(0,_.tO)(t)}}},Ye=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(i){try{i(Ke("reset",e,t))}catch(n){(0,_.tO)(n)}}},Ke=function(e,t,i){return void 0===t&&(t="10"),void 0===i&&(i=!1),function(){var s=(0,n.Z)(a().mark((function n(s){var r,o,c,u,l,g,m,v,E,S,T,b,A,C,O,I,w;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.facebook,(u=r.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=e,g=c.contextType,t||(m=GameCore.Configs.PlayerIdMock,v=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===m?v:m),e){n.next=15;break}return n.next=9,c.chooseAsync();case 9:if(!1!==(l=n.sent)){n.next=13;break}return i&&u.events.emit(p.K.SWITCH,p.C.DASHBOARD_SCENE),n.abrupt("return");case 13:n.next=25;break;case 15:if(!t||t===h.U.playerId){n.next=23;break}return n.next=18,c.createAsync(t);case 18:if(!1!==(l=n.sent)){n.next=22;break}return i&&u.events.emit(p.K.SWITCH,p.C.DASHBOARD_SCENE),n.abrupt("return");case 22:l||"reset"===e||(l=e);case 23:g=c.contextType,s((0,y._K)(l,g));case 25:return Ze({contextId:l}),E=o.getPlayerId(),S=o.getConnectedPlayers(),n.next=30,c.getContextPlayers(E);case 30:return T=n.sent,b=h.U,t!==b.playerId&&S[t]?b=S[t]:1===T.length&&(b=T[0]),s((0,Me.$4)()),C=(A=b).playerId,O=A.name,I=A.photo,w={playerId:C,name:O,photo:I},n.next=38,s($e(K.jt,w));case 38:s((0,y._K)(l,g)),n.next=50;break;case 41:if(n.prev=41,n.t0=n.catch(0),!(n.t0 instanceof d)){n.next=45;break}return n.abrupt("return");case 45:if("USER_INPUT"!==(null==n.t0?void 0:n.t0.code)){n.next=47;break}return n.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==n.t0?void 0:n.t0.code)){n.next=49;break}return n.abrupt("return");case 49:(0,_.tO)(n.t0);case 50:return n.prev=50,Fe(1e3),n.finish(50);case 53:case"end":return n.stop()}}),n,null,[[0,41,50,53]])})));return function(e){return s.apply(this,arguments)}}()},We=function(e){return function(){var t=(0,n.Z)(a().mark((function t(i){var n,s,r,o,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=window.game,s=n.facebook,r=n.globalScene,o=n.analytics,r.screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),h=s.getContextID(),Ze({contextId:h}),o.event(c._.JOIN_GROUP,{group_id:h}),t.next=8,i($e(K.ey,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof d)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,_.tO)(t.t0);case 17:return t.prev=17,Fe(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},Ve=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,o,c,u,l,d,g,m,v,E,S,T,b,A,O;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,r=window.game,o=r.player,c=r.profile,u=r.facebook,(l=r.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),d=s(),g=o.getPlayerId(d),!((m=o.getConnectedPlayers(d)).length>0)||m[t]){i.next=9;break}return l.events.emit(p.K.SWITCH,p.C.DASHBOARD_SCENE),i.abrupt("return");case 9:return v=h.U,i.next=12,u.getContextPlayers(g);case 12:if(E=i.sent,t===g||t===v.playerId||!m[t]){i.next=17;break}v=m[t],i.next=25;break;case 17:if(1!==E.length){i.next=21;break}v=E[0],i.next=25;break;case 21:return i.next=23,c.requestProfiles([t]);case 23:(S=c.getProfiles())[t]&&(v=S[t]);case 25:return i.next=27,n(xe(e,v));case 27:if(d=s(),(0,C.B5)(d,{playerId:g})!==h.U.playerId){i.next=32;break}return i.next=32,n(ke(e));case 32:if(d=s(),(0,C.B5)(d,{playerId:g})===g||!m[t]){i.next=37;break}return n(Ye(t,!0)),i.abrupt("return");case 37:if((0,C.rl)(d)===e){i.next=41;break}return l.events.emit(p.K.SWITCH,p.C.DASHBOARD_SCENE),i.abrupt("return");case 41:if(T=(0,C.x0)(d),b=(0,C.pP)(d,{playerId:g}),n(tt({mode:K.jt,status:T})),A=u.getContextID(),O=u.contextType,n((0,y._K)(A,O)),!b){i.next=50;break}return l.events.emit(p.K.SWITCH,p.C.GAME_OVER_SCENE),i.abrupt("return");case 50:l.events.emit(p.K.SWITCH,p.C.GAME_SCENE),i.next=56;break;case 53:i.prev=53,i.t0=i.catch(0),(0,_.tO)(i.t0);case 56:return i.prev=56,Fe(1e3),i.finish(56);case 59:case"end":return i.stop()}}),i,null,[[0,53,56,59]])})));return function(e,t){return i.apply(this,arguments)}}()},ze=function(){return function(e){try{e(Oe()),e((0,Me.$4)()),e(Pe()),e($e(K.oN))}catch(t){(0,_.tO)(t)}}},Xe=function(){return function(e){try{e(Oe()),e((0,Me.$4)()),e(_e()),e($e(K.UQ))}catch(t){(0,_.tO)(t)}}},Je=function(){return function(){var e=(0,n.Z)(a().mark((function e(t,i){var s,r,o,u,l,d,p,f,g,m,y,E,S,T,b,A,I,w,P,x,D,B,N,M,Z,Y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game,r=s.analytics,o=s.facebook,u=i(),l=(0,V.fQ)(u),d=(0,O.Vb)(u),p=d.score,f=void 0===p?0:p,g=d.level,m=void 0===g?0:g,y=d.endlessScore,E=void 0===y?0:y,l===K.UQ&&(t((0,v.l6)(E)),t(Qe(E))),l!==K.UQ&&t(qe(f)),e.next=9,t(et(l,{score:f}));case 9:if(u=i(),S=(0,V.MQ)(u),T=(0,V.qr)(u),b=Math.floor((T-S)/1e3),r.event(c._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(l),level:m,level_name:"level_"+m,time_played:b}),A=o.getContextID(),l===K.ey&&A&&t(function(){var e=(0,n.Z)(a().mark((function e(t,i){var n,s,r,o,u,l,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game.analytics,e.prev=1,s=FBInstant.context.getID(),k({contextId:s}),r=i(),o=(0,C.Me)(r),u=o.playerId,l=o.score,d=(0,O.Vb)(r),p=d.score,!u||u===h.U.playerId){e.next=25;break}if(!(p>l)){e.next=18;break}return e.next=13,(0,R.BJ)(r);case 13:return f=e.sent,e.next=16,H(f,r);case 16:e.next=23;break;case 18:return e.next=20,(0,R.Q_)();case 20:return f=e.sent,e.next=23,j(f,r);case 23:e.next=30;break;case 25:return e.next=27,(0,R.Q_)();case 27:return f=e.sent,e.next=30,j(f,r);case 30:L({imageShare:f}),n.event(c._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),n.event(c._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,_.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,i){return e.apply(this,arguments)}}()),!A||l!==K.jt){e.next=25;break}if(I=(0,C.oN)(u),(w=I.playerId)&&w!==h.U.playerId){e.next=20;break}return e.abrupt("return");case 20:P=(0,O.Jy)(u),x=P[w]||{},D=x.score,B=void 0===D?0:D,N=(0,C.iq)(u),M=N._id,Z=N.whitePlayerFinish,Y=N.blackPlayerFinish,t(Z&&Y?f>B?F(w,{matchId:M,contextId:A}):G(w,{matchId:M,contextId:A}):U(w,{matchId:M,contextId:A,score:f}));case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),(0,_.tO)(e.t0);case 30:return e.prev=30,Fe(300),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[0,27,30,33]])})));return function(t,i){return e.apply(this,arguments)}}()},qe=function(e){return function(t){try{var i=window.game.player,n=i.getPlayerId(),s=i.getPlayerData(),a=s.score,r=void 0===a?0:a,o=s.level;r<e&&i.setScore(e);var c={score:e,level:o};t((0,Me.Q0)(n,c)),t((0,Me.eG)(c))}catch(h){if(h instanceof m)return;(0,_.tO)(h)}}},Qe=function(e){return function(t){try{var i=window.game.player,n=i.getPlayerId();(0,g.aV)(n,e).catch((function(e){(0,_.tO)(new Error(e))}));var s=i.getPlayerData().endlessScore;(void 0===s?0:s)<e&&i.setEndlessScore(e);var a={endlessScore:e};t((0,Me.Q0)(n,a)),t((0,Me.eG)(a))}catch(r){if(r instanceof m)return;(0,_.tO)(r)}}},$e=function(e,t){return void 0===t&&(t=null),function(){var i=(0,n.Z)(a().mark((function i(s,r){var h,u,l,d,g,m,v,E,S,T,b,A,O,I,w,R,k,x;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,u=window.game,l=u.player,d=u.analytics,g=u.facebook,m=u.globalScene,v=g.getContextID(),E=0,S=r(),d.event(c._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),s({type:Y.Er,payload:{}}),!o()(h=[K.oN,K.kC,K.UQ]).call(h,e)){i.next=16;break}return i.next=10,s((function(e){try{var t=window.game.player;e({type:Y.AJ,payload:{}});var i=t.getPlayerId(),n=ie(be.SingleMatchStore)||{},s=n.data;n.data=Ce(s),ye({playerId:i,match:n}),e(we(n))}catch(a){if(e(we(null)),a instanceof W)return;if(a instanceof pe.Z)return;if(a instanceof ue)return;(0,_.tO)(a)}}));case 10:if(S=r(),(0,C.L7)(S)){i.next=15;break}return i.next=15,s(Oe());case 15:E=(0,C.z3)(S);case 16:if(e===K.ey&&s(Be(t)),e!==K.jt){i.next=26;break}return i.next=20,s(Re(t));case 20:S=r(),T=(0,C.rl)(S),b=(0,C.oN)(S),A=b.playerId,v||(v=window.FBInstant.context.getID()),O=P(S,{opponentId:A}),v&&A&&!O&&s(Z(A,{contextId:v,matchId:T}));case 26:e===K.RK&&s(function(){var e=(0,n.Z)(a().mark((function e(t){var i,n,s,r,o,c,h,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=window.game.player,r=s.getPlayer(),o=r.playerId,c=r.name,h=r.photo,t({type:Y.ar,payload:{playerId:o}}),u={},Q()(i=ee()(n=new Array(20)).call(n,null)).call(i,(function(e,t){var i="0"+(t+1);u[i]={playerId:i,name:"MPlayer "+i,photo:"./assets/images/others/avatar.png"}})),u[o]={playerId:o,name:c,photo:h},t(Ne("mock",u));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=l.getPlayerData(S),w=I.score,R=void 0===w?0:w,k=I.endlessScore,x=void 0===k?0:k,s((0,Me.eG)({score:E,bestScore:R,bestEndlessScore:x})),s({type:Y.tk,payload:{mode:e,contextId:v}}),s((0,y.qL)(e)),m.events.emit(p.K.SWITCH,p.C.GAME_SCENE),i.next=41;break;case 34:if(i.prev=34,i.t0=i.catch(0),!(i.t0 instanceof W)){i.next=40;break}return window.game.globalScene.screen.open(f.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),i.abrupt("return");case 40:(0,_.tO)(i.t0);case 41:return i.prev=41,Fe(0),i.finish(41);case 44:case"end":return i.stop()}}),i,null,[[0,34,41,44]])})));return function(e,t){return i.apply(this,arguments)}}()},et=function(e,t){return function(){var i=(0,n.Z)(a().mark((function i(n,s){var r,c,h,u,l,d,f,g,m,v,y,E;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=window.game,h=c.player,u=c.globalScene,l=t.score,d=void 0===l?0:l,f=t.level,g=void 0===f?0:f,m=s(),!(o()(r=[K.oN,K.kC,K.UQ]).call(r,e)>=0)){i.next=7;break}return v=(0,C.L7)(m),i.next=7,n(Ie(v));case 7:if(e===K.ey&&(n({type:Y.Sl,payload:{}}),y=h.getPlayerId(),n((0,Me.Q0)(y,t))),e!==K.jt){i.next=12;break}return E=(0,C.rl)(m),i.next=12,n(Le(E,d,{level:g}));case 12:n({type:Y.Mg,payload:{mode:e}}),u.events.emit(p.K.SWITCH,p.C.GAME_OVER_SCENE);case 14:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},tt=function(e){return function(t){var i=e.mode,n=e.status;t({type:Y.qm,payload:{mode:i,status:n}}),(0,_.sw)("game-mode",i)}},it=function(){return function(e,t){var i=t(),n=(0,O.Vb)(i).level,s=void 0===n?0:n,a=(0,V.fQ)(i);window.game.analytics.event(c._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(a),level:s,level_name:"level_"+s}),e({type:Y.XW,payload:{}})}}},221:function(e,t,i){"use strict";i.d(t,{$4:function(){return s},Q0:function(){return a},eG:function(){return r}});var n=i(217),s=function(e){return{type:n.VY,payload:{playerId:e}}},a=function(e,t){return{type:n.HV,payload:{playerId:e,stats:t}}},r=function(e){return{type:n.DP,payload:{stats:e}}}},217:function(e,t,i){"use strict";i.d(t,{AJ:function(){return f},AO:function(){return C},DI:function(){return b},DP:function(){return u},Er:function(){return n},HV:function(){return h},JC:function(){return E},Ly:function(){return R},Mg:function(){return a},NW:function(){return k},PM:function(){return d},Qi:function(){return S},Sl:function(){return w},T7:function(){return m},UK:function(){return x},Un:function(){return O},Uo:function(){return v},VY:function(){return c},Vj:function(){return I},XW:function(){return o},ar:function(){return P},f3:function(){return A},go:function(){return l},li:function(){return _},qm:function(){return r},tU:function(){return T},tk:function(){return s},v7:function(){return g},xm:function(){return p},zu:function(){return y}});var n="MATCH_GAMEPLAY_INITIALIZE",s="MATCH_GAMEPLAY_START",a="MATCH_GAMEPLAY_FINISH",r="MATCH_GAMEPLAY_UPDATE",o="MATCH_GAMEPLAY_RESCUE",c="MATCH_STATS_DATA_CLEAR",h="MATCH_STATS_DATA_UPDATE",u="MATCH_STATS_CURRENT_UPDATE",l="MATCH_STATS_CONTEXT_REQUEST",d="MATCH_STATS_CONTEXT_RECEIVED",p="MATCH_SINGLE_CREATE_REQUEST",f="MATCH_SINGLE_DETAIL_REQUEST",g="MATCH_SINGLE_FINISH_REQUEST",m="MATCH_SINGLE_MOVE_UPDATED",v="MATCH_SINGLE_DATA_RECEIVED",y="MATCH_SINGLE_DATA_CLEAR",E="MATCH_ENDLESS_DATA_CLEAR",S="MATCH_CHALLENGE_JOIN_REQUEST",T="MATCH_CHALLENGE_CREATE_REQUEST",b="MATCH_CHALLENGE_FINISH_REQUEST",A="MATCH_CHALLENGE_CONTINUE_REQUEST",C="MATCH_CHALLENGE_DATA_RECEIVED",O="MATCH_CHALLENGE_DATA_CLEAR",I="MATCH_GROUP_CREATE_REQUEST",w="MATCH_GROUP_FINISH_REQUEST",P="MATCH_ONLINE_CREATE_REQUEST",_="MATCH_ONLINE_DATA_RECEIVED",R="MATCH_ONLINE_STATS_UPDATE",k="MATCH_ONLINE_FINISH_REQUEST",x="MATCH_ONLINE_DATA_CLEAR"},111:function(e,t,i){"use strict";i.d(t,{RK:function(){return c},UQ:function(){return s},ey:function(){return r},jt:function(){return a},kC:function(){return o},oN:function(){return n}});var n="single",s="endless",a="challenge-friends",r="matching-group",o="tournaments",c="online"},454:function(e,t,i){"use strict";i.d(t,{kR:function(){return s},o3:function(){return a},ys:function(){return n}});var n="open",s="active",a="finished"},453:function(e,t,i){"use strict";i.d(t,{L:function(){return n}});var n="match"},461:function(e,t,i){"use strict";var n=i(2),s=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="InvalidPlayerId",n.message=t||"The playerId is not valid",n.payload=i,n}return(0,n.Z)(t,e),t}((0,i(53).Z)(Error));t.Z=s},222:function(e,t,i){"use strict";i.d(t,{MQ:function(){return o},fQ:function(){return a},qr:function(){return c},t1:function(){return r}});var n=i(61),s=i(220),a=(0,n.P1)([function(e){return(0,s.y)(e).gameplay.mode}],(function(e){return e})),r=((0,n.P1)([function(e){return(0,s.y)(e).gameplay.status}],(function(e){return e})),(0,n.P1)([function(e){return(0,s.y)(e).gameplay.rescued}],(function(e){return e}))),o=(0,n.P1)([function(e){return(0,s.y)(e).gameplay.startAt}],(function(e){return e})),c=(0,n.P1)([function(e){return(0,s.y)(e).gameplay.finishAt}],(function(e){return e}))},220:function(e,t,i){"use strict";i.d(t,{y:function(){return s}});var n=i(453),s=function(e){return e[n.L]}},462:function(e,t,i){"use strict";i.d(t,{B5:function(){return f},L7:function(){return c},Me:function(){return v},gd:function(){return o},iq:function(){return u},oN:function(){return p},pP:function(){return g},rl:function(){return l},x0:function(){return d},z3:function(){return h},zQ:function(){return m}});var n=i(144),s=i(61),a=i(220),r=function(e,t){return t.playerId},o=((0,s.P1)([function(e){return(0,a.y)(e).match.isRequesting}],(function(e){return e})),(0,s.P1)([function(e){return(0,a.y)(e).match.single}],(function(e){return e}))),c=(0,s.P1)([function(e){return(0,a.y)(e).match.single._id}],(function(e){return e})),h=(0,s.P1)([function(e){return(0,a.y)(e).match.single.score}],(function(e){return e||0})),u=((0,s.P1)([function(e){return(0,a.y)(e).match.single.level}],(function(e){return e||0})),(0,s.P1)([function(e){var t;return null==(t=(0,a.y)(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,s.P1)([function(e){var t;return null==(t=(0,a.y)(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,s.P1)([function(e){return(0,a.y)(e).match.single.status}],(function(e){return e})),(0,s.P1)([function(e){return(0,a.y)(e).match.single.playerId}],(function(e){return e})),(0,s.P1)([function(e){return(0,a.y)(e).match.challenge}],(function(e){return e}))),l=(0,s.P1)([function(e){return(0,a.y)(e).match.challenge._id}],(function(e){return e})),d=(0,s.P1)([function(e){return(0,a.y)(e).match.challenge.status}],(function(e){return e})),p=(0,s.P1)([function(e){return(0,a.y)(e).match.challenge.opponentInfo}],(function(e){return e})),f=((0,s.P1)([function(e){return(0,a.y)(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,s.P1)([function(e){return(0,a.y)(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,s.P1)([u,r],(function(e,t){var i=e.whitePlayerId,n=e.blackPlayerId;return i!==t&&n===t?i:n!==t&&i===t?n:""})),(0,s.P1)([u,r],(function(e,t){var i=e.whitePlayerId,s=e.blackPlayerId;return i===t?i:s===t?s:n.U.playerId}))),g=(0,s.P1)([u,r],(function(e,t){var i=e.whitePlayerId,n=e.blackPlayerId,s=e.whitePlayerFinish,a=e.blackPlayerFinish;return t&&i===t?s:!(!t||n!==t)&&a})),m=(0,s.P1)([u,function(e,t){return t.opponentId}],(function(e,t){var i=e.whitePlayerId,n=e.blackPlayerId,s=e.whitePlayerFinish,a=e.blackPlayerFinish;return t&&i===t?s:!(!t||n!==t)&&a})),v=(0,s.P1)([function(e){return(0,a.y)(e).match.group.opponentInfo}],(function(e){return e}));(0,s.P1)([function(e){return(0,a.y)(e).match.online.players}],(function(e){return e}))},223:function(e,t,i){"use strict";i.d(t,{Jy:function(){return a},Vb:function(){return r}});var n=i(61),s=i(220),a=(0,n.P1)([function(e){return(0,s.y)(e).stats.data}],(function(e){return e})),r=(0,n.P1)([function(e){return(0,s.y)(e).stats.current}],(function(e){return e}));(0,n.P1)([function(e){return(0,s.y)(e).stats.isRequesting}],(function(e){return e}))},460:function(e,t,i){"use strict";i.d(t,{cQ:function(){return k},l6:function(){return N}});var n=i(24),s=i(64),a=i.n(s),r=i(21),o=i.n(r),c=i(31),h=i(96),u=i(145),l=i(111),d=i(222),p=i(54),f=i(45),g=i(38),m=i.n(g),v=i(48),y=i.n(v),E=i(142),S=i(94),T=GameCore.Configs,b=T.AppId,A=T.OtherHost,C=T.LeadersBoard,O=function(){var e=(0,n.Z)(o().mark((function e(t){var i,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={appId:b,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!C.UseMock){e.next=5;break}return e.next=4,(0,S.qZ)(1e3);case 4:return e.abrupt("return",(0,f.Z)({},i,t,{_id:C.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,E.v)("leaderboards",(0,f.Z)({},i,t),{},A);case 8:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=(function(){var e=(0,n.Z)(o().mark((function e(t,i){var n,s,a,r,c,h,u,l,d,p,f,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i={}),n=[],!C.UseMock){e.next=7;break}return e.next=5,(0,S.qZ)(1e3);case 5:return c=(r=i).limit,h=void 0===c?10:c,u=r.offset,l=void 0===u?0:u,e.abrupt("return",m()(s=y()(a=new Array(h)).call(a,null)).call(s,(function(e,t){var i=(t+1)*(l+1);return{playerId:"player-0"+i,name:"MPlayer "+i,photo:"./assets/images/others/avatar.jpg",rank:i,score:Math.floor(1e5/i+1e4*Math.random())}})));case 7:return d=GameCore.Utils.String.params(i),p="leaderboards/"+t+"/leaders",e.next=11,(0,E.U)(p+"?"+d,{},A);case 11:if((f=e.sent)&&(null==f||!f.error)){e.next=14;break}throw new Error((null==f?void 0:f.error)||"Leaderboard not found");case 14:if(!((g=(null==f?void 0:f.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",n);case 17:return n=g,e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,n.Z)(o().mark((function e(t,i,n){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.v)("leaderboards/"+t+"/players/"+i,{score:n},{},A);case 2:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}()),w=i(455),P=i(2),_=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).name="CurrentTournamentScoreIsNotBest",n.message=t||"The new score is not best",n.payload=i,n}return(0,P.Z)(t,e),t}((0,i(53).Z)(Error)),R=GameCore.Configs.Tournament.UseLeaderboard,k=function(e){return{type:w.Cg,payload:{tournamentId:e}}},x=function(e){return function(){var t=(0,n.Z)(o().mark((function t(i){var n,s,a,r,c,h,l,d,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=window.game.facebook,s=e.playerId,a=e.playerName,r=e.score,c=e.autoStartGame,h=a+"'s Tournament",l=GameCore.Utils.String.generateObjectId(),t.next=7,n.tournament.createAsync({initialScore:r,config:{title:h,tournamentTitle:h},data:{playerId:s,playerName:a,leaderboardId:l}});case 7:return d=t.sent,f=d.getID(),c&&(i(k(f)),i((0,u.li)())),t.next=12,O({_id:l,createdBy:s,name:f,description:h,expireTime:6048e5});case 12:if(t.sent._id!==l){t.next=16;break}return t.next=16,I(l,s,r);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,p.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return(0,n.Z)(o().mark((function t(){var i,n,s,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game.facebook,n=e.playerId,s=e.playerName,a=e.leaderboardId,r=e.score,a&&I(a,n,r),t.next=5,i.tournament.shareAsync({score:r,data:{type:h.nx,playerId:n,playerName:s}});case 5:I(a,n,r);case 6:case"end":return t.stop()}}),t)})))},D=function(){var e=(0,n.Z)(o().mark((function e(){var t,i,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return i=e.sent,n=JSON.parse(i.getPayload()||"{}"),e.abrupt("return",n.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,n.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=(0,n.Z)(o().mark((function t(i,n){var s,r,h,u,p,f,g,m,v,y,E,S,T,b;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null,r=window.game,h=r.player,u=r.facebook,p=r.analytics,t.prev=2,g=n(),m=(0,d.fQ)(g),a()(f=[l.oN,l.kC]).call(f,m)){t.next=7;break}return t.abrupt("return");case 7:return i({type:w.DK,payload:{}}),v=h.getPlayer(),y=v.playerId,E=v.name,t.next=11,B();case 11:if(!t.sent){t.next=24;break}if(s=c._.TOURNAMENT_SHARE,u.postSessionScoreAsync(e),!R){t.next=22;break}return t.next=18,D();case 18:return S=t.sent,T={playerId:y,playerName:E,score:e,leaderboardId:S},t.next=22,i(L(T));case 22:t.next=29;break;case 24:if(s=c._.TOURNAMENT_CREATE,!R){t.next=29;break}return b={playerId:y,playerName:E,score:e,autoStartGame:!1},t.next=29,i(x(b));case 29:if(p.event(s,{success:!0}),!1!==R){t.next=33;break}return t.next=33,u.requestTournamentAsync(e);case 33:i(M(e)),t.next=41;break;case 36:if(t.prev=36,t.t0=t.catch(2),!(t.t0 instanceof _)){t.next=40;break}return t.abrupt("return");case 40:s&&p.event(s,{success:!1});case 41:case"end":return t.stop()}}),t,null,[[2,36]])})));return function(e,i){return t.apply(this,arguments)}}()},M=function(e){return{type:w.ge,payload:{score:e}}}},455:function(e,t,i){"use strict";i.d(t,{Cg:function(){return n},DK:function(){return s},ge:function(){return a}});var n="TOURNAMENT_ACTIVE",s="TOURNAMENT_REQUEST",a="TOURNAMENT_RECEIVED"},31:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});var n={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",INVITE:"invite",MESSAGE:"message",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},216:function(e,t,i){"use strict";var n=i(140),s=function(){function e(e,t,i,s){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=i||n.Z.AVATAR.FILE,this.locale=s||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=s},458:function(e,t,i){"use strict";i.d(t,{U1:function(){return l},_K:function(){return d},qF:function(){return p},qL:function(){return f}});var n=i(46),s=i.n(n),a=i(141),r=i(96),o=i(144),c=i(111),h=i(54),u=i(218),l=function(e,t,i){return{type:a.kL,payload:{contextId:e,contextType:t,entryPointData:i}}},d=function(e,t){return{type:a.fJ,payload:{contextId:e,contextType:t}}},p=function(){return function(e,t){var i,n=t(),a=(0,u.f)(n),h=window.game.player.getPlayerId(),l=a.contextId,d=a.entryPointData||{},p=d.type,g=d.matchId,m=d.playerId,v=d.opponentId,y=void 0===v?o.U.playerId:v,E=d.tournamentContextId,S=h===m,T=y===o.U.playerId||s()(i=[y,m]).call(i,h)>=0,b=c.oN;!l||void 0!==p&&p!==r.nx||(b=c.kC),p===r.nx&&E&&(b=c.kC),l&&p===r.W6&&!S&&(b=c.jt),g&&l&&T&&p===r.Sb&&(b=c.jt),l&&p===r.lB&&(b=c.ey),e(f(b))}},f=function(e){return function(t){t({type:a.EH,payload:{gameMode:e}}),(0,h.sw)("game-mode",e)}}},475:function(e,t,i){"use strict";i.d(t,{y:function(){return p}});var n=i(24),s=i(21),a=i.n(s),r=i(31),o=i(96),c=i(224),h=i(62),u=i(54),l=i(146),d=function(e){if("string"!==typeof e||!e)throw new c.Z(null,{imageShare:e})},p=function(){return(0,n.Z)(a().mark((function e(){var t,i,n,s,c,p,f,g,m,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,i=t.player,n=t.analytics,s=t.facebook,c=t.globalScene,e.prev=1,c.screen.open(h.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,(0,l.Q_)();case 5:return p=e.sent,d(p),f=i.getPlayer(),g=f.playerId,m=f.name,v=f.photo,e.next=10,s.inviteAsync({template:o.W6,text:{default:"Easy! I have a new score!",localizations:{en_US:"Easy! I have a new score!",vi_VN:"A ha! M\xecnh v\u1eeba \u0111\u1ea1t m\u1ed9t \u0111i\u1ec3m m\u1edbi!"}},image:p||"",data:{playerId:g,playerName:m,playerPhoto:v,type:o.W6}});case 10:n.event(r._.INVITE,{invite_content_type:"CurrentScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n.event(r._.INVITE,{invite_content_type:"CurrentScore",success:!1}),(0,u.tO)(e.t0);case 17:return e.prev=17,c.screen.close(h.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))}},459:function(e,t,i){"use strict";i.d(t,{I:function(){return s}});var n=i(141),s=function(e){return{type:n.DW,payload:{sceneKey:e}}}},146:function(e,t,i){"use strict";i.d(t,{BJ:function(){return _},Q_:function(){return S},b1:function(){return P},mi:function(){return O},uF:function(){return y},w3:function(){return b}});var n=i(24),s=i(390),a=i.n(s),r=i(21),o=i.n(r),c=i(31),h=i(96),u=i(224),l=i(140),d=i(62),p=i(225),f=i(462),g=i(223),m=i(54),v=function(e){if("string"!==typeof e||!e)throw new u.Z(null,{imageShare:e})},y=function(){return(0,n.Z)(o().mark((function e(){var t,i,n,s,a,r,u,l,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,i=t.player,n=t.analytics,s=t.facebook,a=t.globalScene,e.prev=1,a.screen.open(d.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,E();case 5:return r=e.sent,v(r),u=i.getPlayer(),l=u.playerId,p=u.name,f=u.photo,e.next=10,s.shareAsync({text:"Great! I reach a best level!",intent:"SHARE",image:r||"",data:{playerId:l,playerName:p,playerPhoto:f,type:h.W6}});case 10:n.event(c._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n.event(c._.SHARE,{share_content_type:"BestScore",success:!1}),(0,m.tO)(e.t0);case 17:return e.prev=17,a.screen.close(d.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},E=function(){var e=(0,n.Z)(o().mark((function e(){var t,i,n,s,a,r,c,h,u,l,d,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,i=t.player,n=t.globalScene,s=i.getPlayer(),a=s.playerId,r=s.photo,c=window.game.storage.getState(),h=i.getBestScore(),u=(0,g.Vb)(c),l=u.bestScore,"number"!=typeof(d=void 0===l?0:l)&&(d=0),p=T({playerId:a,playerPhoto:r,playerScore:h>d?h:d})){e.next=11;break}return e.abrupt("return");case 11:return f={name:"share-best-score",width:952,height:492,renderOptions:p},e.next=14,n.frameCapture.capture(f);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,n.Z)(o().mark((function e(){var t,i,n,s,a,r,c,h,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,i=t.player,n=t.globalScene,"number"!=typeof(s=i.getCustomData("level"))&&(s=1),a=i.getPlayer(),r=a.playerId,c=a.photo,h=T({playerId:r,playerPhoto:c,playerScore:s})){e.next=8;break}return e.abrupt("return");case 8:return u={name:"share-current-score",width:952,height:492,renderOptions:h},e.next=11,n.frameCapture.capture(u);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=e.playerId,i=void 0===t?"10":t,n=e.playerPhoto,s=void 0===n?"":n,a=e.playerScore,r=void 0===a?0:a;return"string"!==typeof i||"string"!==typeof s||"number"!==typeof r?null:{avatar:{name:""+i,type:"image",x:130,y:120,image:s,width:250,height:250,fallbackWithImage:l.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:405,y:416,font:"600 48px",fillStyle:"#368EB9",text:""+r,textAlign:"center"}}},b=function(){return function(){var e=(0,n.Z)(o().mark((function e(t,i){var n,s,a,r,u,l,p,f,g,y,E;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,s=n.player,a=n.analytics,r=n.facebook,u=n.globalScene,e.prev=1,u.screen.open(d.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=i(),e.next=6,A(l);case 6:return p=e.sent,v(p),f=s.getPlayer(),g=f.playerId,y=f.name,E=f.photo,e.next=11,r.shareAsync({text:"Congratulations! You have reached the final level!",intent:"SHARE",image:p||"",data:{playerId:g,playerName:y,playerPhoto:E,type:h.W6}});case 11:a.event(c._.SHARE,{share_content_type:"FinalLevel",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),a.event(c._.SHARE,{share_content_type:"FinalLevel",success:!1}),(0,m.tO)(e.t0);case 18:return e.prev=18,u.screen.close(d.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,i){return e.apply(this,arguments)}}()},A=function(){var e=(0,n.Z)(o().mark((function e(t){var i,n,s,a,r,c,h,u,l,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game,n=i.player,s=i.globalScene,a=(0,g.Jy)(t),r=n.getPlayer(),c=r.playerId,h=r.photo,u=a[c]||{},l=u.score,d=C({playerId:c,playerPhoto:h,playerScore:l})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-final-level",width:952,height:492,renderOptions:d},e.next=11,s.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.playerId,i=void 0===t?"10":t,n=e.playerPhoto,s=void 0===n?"":n;return"string"!==typeof i||"string"!==typeof s?null:{avatar:{name:""+i,type:"image",x:130,y:120,image:s,width:250,height:250,fallbackWithImage:l.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-final-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-final-win.png",width:952,height:492}}},O=function(){return(0,n.Z)(o().mark((function e(){var t,i,n,s,a,r,u,l,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,i=t.player,n=t.analytics,s=t.facebook,a=t.globalScene,e.prev=1,a.screen.open(d.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,I();case 5:return r=e.sent,v(r),u=i.getPlayer(),l=u.playerId,p=u.name,f=u.photo,e.next=10,s.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:r||"",data:{playerId:l,playerName:p,playerPhoto:f,type:h.W6}});case 10:n.event(c._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n.event(c._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,m.tO)(e.t0);case 17:return e.prev=17,a.screen.close(d.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},I=function(){var e=(0,n.Z)(o().mark((function e(){var t,i,n,s,r,c,h,u,l,d,f,g,m,v,y,E,S,T,b,A;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,i=t.player,n=t.profile,s=t.globalScene,r=i.getPlayer(),c=r.playerId,h=r.name,u=r.photo,(l=i.getConnectedPlayerIds(99,0)).push(c),d=[],e.next=7,(0,p.tu)({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:f=e.sent,g=GameCore.Utils.Object.keyBy(f,"playerId"),m={playerId:c,name:h,photo:u,score:1},GameCore.Utils.Object.hasOwn(g,c)&&(m=g[c]),d.push(m),e.t0=a()(o()).call(o(),g);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(v=e.t1.value,!GameCore.Utils.Object.hasOwn(g,v)){e.next=25;break}if(y=g[v],3!==d.length){e.next=20;break}return e.abrupt("break",27);case 20:if(y.playerId!==c){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(y.score)>Number(m.score))){e.next=24;break}return e.abrupt("continue",14);case 24:d.push(y);case 25:e.next=14;break;case 27:return E=GameCore.Utils.Array.unique(l),e.next=30,n.requestProfiles(E);case 30:if(S=n.getProfiles(),d.forEach((function(e,t){var i=e.playerId;if(GameCore.Utils.Object.hasOwn(S,i)){var n=S[i],s=n.name,a=n.photo;d[t].name=s,d[t].photo=a}})),d.length<3)for(T=0;T<=3-d.length;)d.push({playerId:"bot"+T,name:"???",score:1,photo:"./assets/images/others/avatar.png"}),T++;if(b=w({playerId:c,playerName:h,playerPhoto:u,listLeaders:d})){e.next=37;break}return e.abrupt("return");case 37:return A={name:"share-leaderboard",width:750,height:1e3,renderOptions:b},e.next=40,s.frameCapture.capture(A);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){var t=e.playerId,i=void 0===t?"10":t,n=e.playerPhoto,s=void 0===n?"":n,a=e.listLeaders,r=void 0===a?[]:a;if(!Array.isArray(r))return null;if("string"!==typeof i)return null;if("string"!==typeof s)return null;var o={avatar:{name:""+i,type:"image",x:267.5,y:172.5,image:s,width:210,height:210,fallbackWithImage:l.Z.AVATAR.KEY}};return r.forEach((function(e,t){var i=e.playerId,n=e.photo;o["photo_"+i]={name:""+i,type:"image",x:227.5,y:646.5+95*t,image:n,width:45,height:45,fallbackWithImage:l.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3},r.forEach((function(e,t){var i=e.playerId,n=e.name,s=e.score;o["name_"+i]={type:"text",x:300,y:680+95*t,font:"600 24px",text:n,fillStyle:"#b18151"},o["score_"+i]={type:"text",x:500,y:680+95*t,font:"600 24px",text:s,fillStyle:"#b18151"}})),o},P=function(){var e=(0,n.Z)(o().mark((function e(t){var i,n,s,a,r,c,h,u,l,d,p,m,v,y,E,S,T,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game,n=i.player,s=i.globalScene,a=(0,g.Jy)(t),r=n.getPlayer(),c=r.photo,h=r.playerId,u=(0,f.oN)(t),l=u.playerId,d=u.photo,p=(0,f.pP)(t,{playerId:h}),m=(0,f.zQ)(t,{opponentId:l}),v=a[h]||{},y=v.score,E=a[l]||{},S=E.score,T=R({playerId:h,playerPhoto:c,playerScore:y,opponentId:l,opponentPhoto:d,opponentScore:S,isPlayerFinished:p,isOpponentFinished:m})){e.next=12;break}return e.abrupt("return");case 12:return b={name:"share-game-result",width:952,height:492,renderOptions:T},e.next=15,s.frameCapture.capture(b);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,n.Z)(o().mark((function e(t){var i,n,s,a,r,c,h,u,l,d,p,m,v,y,E;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game,n=i.player,s=i.globalScene,a=(0,g.Jy)(t),r=n.getPlayer(),c=r.photo,h=r.playerId,u=(0,f.Me)(t),l=u.playerId,d=u.photo,p=u.score,m=a[h]||{},v=m.score,y=R({playerId:h,playerPhoto:c,playerScore:v,opponentId:l,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return E={name:"share-group-match-result",width:952,height:492,renderOptions:y},e.next=12,s.frameCapture.capture(E);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=e.playerId,i=void 0===t?"10":t,n=e.playerPhoto,s=void 0===n?"":n,a=e.playerScore,r=void 0===a?0:a,o=e.opponentId,c=void 0===o?"20":o,h=e.opponentPhoto,u=void 0===h?"":h,d=e.opponentScore,p=void 0===d?0:d,f=e.isPlayerFinished,g=e.isOpponentFinished;if("string"!==typeof i)return null;if("string"!==typeof s)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof p)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof g)return null;var m=r===p,v=r>p,y=f||g,E=f&&g,S={leftPhoto:{name:""+i,type:"image",x:56,y:140,image:s,width:220,height:220,fallbackWithImage:l.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:690,y:140,image:u,width:220,height:220,fallbackWithImage:l.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return y&&(S.leftScoreShadow={type:"text",x:162,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:162,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:796,y:444,font:"600 70px",fillStyle:"#c4683f",text:g?""+p:"???",textAlign:"center"},S.rightScore={type:"text",x:796,y:440,font:"600 70px",fillStyle:"#f2a62e",text:g?""+p:"???",textAlign:"center"}),!m&&E&&(v?S.leftCrown={name:"crown-icon",type:"image",x:112,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}:S.rightCrown={name:"crown-icon",type:"image",x:750,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S}},218:function(e,t,i){"use strict";i.d(t,{F:function(){return a},f:function(){return s}});var n=i(61),s=(0,n.P1)([function(e){return e.context}],(function(e){return e})),a=(0,n.P1)([function(e){return e.context.currentGameMode}],(function(e){return e}))},94:function(e,t,i){"use strict";i.d(t,{F0:function(){return h},Gm:function(){return c},qZ:function(){return o}});var n=i(56),s=i.n(n),a=i(39),r=i.n(a),o=function(e){return new(s())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),i=new Date;return t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()},h=function(e,t){void 0===t&&(t=!0);var i=new Date(e).toISOString();return t?r()(i).call(i,11,-5):r()(i).call(i,14,-5)}},54:function(e,t,i){"use strict";i.d(t,{R0:function(){return a},Tv:function(){return s},sw:function(){return n},tO:function(){return r}});i(150),i(47),i(46);var n=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},a=function(e,t){e&&window.Sentry.withScope((function(e){e.setExtras(t)}))},r=function(e){}},451:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var n={isDesktop:function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)&&!/like Mac OS/.test(e)},isMobile:function(){var e=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(e)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},472:function(e,t,i){"use strict";var n=i(441),s=new(i.n(n)());t.Z=s},471:function(e,t,i){"use strict";i.d(t,{O:function(){return h}});var n=i(24),s=i(56),a=i.n(s),r=i(21),o=i.n(r),c=i(94),h=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t||e.isIOS()},u=function(){var e=(0,n.Z)(o().mark((function e(t){var i,s,r,h,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Math.round(t/80),s=0,r=function(){var e=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(s<i)){e.next=11;break}return h=r(),u=(0,c.qZ)(80),s+=1,e.next=9,a().all([h,u]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)};t.Z=function(e){try{if(!h())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?l(e):t.isIOS()&&u(e).catch((function(e){}))}catch(i){}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,i.amdO={},function(){var e=[];i.O=function(t,n,s,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],a=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var h=s();void 0!==h&&(t=h)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]}}(),i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))},i.u=function(e){return e+".bundle.js"},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";i.l=function(n,s,a,r){if(e[n])e[n].push(s);else{var o,c;if(void 0!==a)for(var h=document.getElementsByTagName("script"),u=0;u<h.length;u++){var l=h[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+a){o=l;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[s];var d=function(t,i){o.onerror=o.onload=null,clearTimeout(p);var s=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(e){return e(i)})),t)return t(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!e;)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e}(),function(){var e={757:0};i.f.j=function(t,n){var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var a=new Promise((function(i,n){s=e[t]=[i,n]}));n.push(s[2]=a);var r=i.p+i.u(t),o=new Error;i.l(r,(function(n){if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,s[1](o)}}),"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,r=n[0],o=n[1],c=n[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(c)var u=c(i)}for(t&&t(n);h<r.length;h++)a=r[h],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},n=self.webpackChunkgame_core=self.webpackChunkgame_core||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),i.O(void 0,[216,630,542],(function(){return i(648)})),i.O(void 0,[216,630,542],(function(){return i(649)})),i.O(void 0,[216,630,542],(function(){return i(481)})),i.O(void 0,[216,630,542],(function(){return i(482)})),i.O(void 0,[216,630,542],(function(){return i(650)})),i.O(void 0,[216,630,542],(function(){return i(590)})),i.O(void 0,[216,630,542],(function(){return i(651)}));var n=i.O(void 0,[216,630,542],(function(){return i(613)}));n=i.O(n)})();