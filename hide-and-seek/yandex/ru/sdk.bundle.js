"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[630],{650:function(n,t,e){var r=e(24),i=e(2),o=e(21),a=e.n(o),c=e(56),s=e.n(c),u=function(){function n(){this.payments=void 0}var t=n.prototype;return t.getLocale=function(){return null},t.getPlatform=function(){return null},t.getSDKVersion=function(){return"0.0"},t.getSupportedAPIs=function(){return[]},t.getEntryPointData=function(){return null},t.getEntryPointAsync=function(){return new(s())((function(n){n("")}))},t.canCreateShortcutAsync=function(){return new(s())((function(n,t){t(new Error("Not implemented"))}))},t.quit=function(){},t.performHapticFeedbackAsync=function(){return s().resolve()},n}(),d=function(){function n(){}var t=n.prototype;return t.getID=function(){return null},t.getType=function(){return"SOLO"},n}(),l=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.sdk=t,e}(0,i.Z)(t,n);var e=t.prototype;return e.getID=function(){return this.sdk.getID()},e.getType=function(){return this.sdk.getType()},e.isSizeBetween=function(n,t){return this.sdk.isSizeBetween(n,t)},e.switchAsync=function(n){return this.sdk.switchAsync(n)},e.chooseAsync=function(n){return this.sdk.chooseAsync(n)},e.createAsync=function(n){return this.sdk.createAsync(n)},e.getPlayersAsync=function(){return this.sdk.getPlayersAsync()},t}(d),f=l,y=function(){},h=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.sdk=t,e}(0,i.Z)(t,n);var e=t.prototype;return e.getID=function(){return this.sdk.getID()},e.getASIDAsync=function(){return this.sdk.getASIDAsync()},e.getSignedASIDAsync=function(){return this.sdk.getSignedASIDAsync()},e.getName=function(){return this.sdk.getName()},e.getPhoto=function(){return this.sdk.getPhoto()},e.getDataAsync=function(n){return this.sdk.getDataAsync(n)},e.setDataAsync=function(n){return this.sdk.setDataAsync(n)},e.flushDataAsync=function(){return this.sdk.flushDataAsync()},e.getSignedPlayerInfoAsync=function(n){return this.sdk.getSignedPlayerInfoAsync(n)},e.canSubscribeBotAsync=function(){return this.sdk.canSubscribeBotAsync()},e.subscribeBotAsync=function(){return this.sdk.subscribeBotAsync()},e.getConnectedPlayersAsync=function(){return this.sdk.getConnectedPlayersAsync()},e.isGuest=function(){return!1},t}(y),g=h,p=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.player=void 0,e.context=void 0,e.graphApi=void 0,e.tournament=void 0,e.sdk=t,e.player=new g(t.player),e.context=new f(t.context),e}(0,i.Z)(t,n);var e=t.prototype;return e.getLocale=function(){return this.sdk.getLocale()},e.getPlatform=function(){return this.sdk.getPlatform()},e.getSDKVersion=function(){return this.sdk.getSDKVersion()},e.initializeAsync=function(){return this.sdk.initializeAsync()},e.setLoadingProgress=function(n){this.sdk.setLoadingProgress(n)},e.getSupportedAPIs=function(){return this.sdk.getSupportedAPIs()},e.getEntryPointData=function(){return this.sdk.getEntryPointData()},e.getEntryPointAsync=function(){return this.sdk.getEntryPointAsync()},e.setSessionData=function(n){this.sdk.setSessionData(n)},e.startGameAsync=function(){return this.sdk.startGameAsync()},e.shareAsync=function(n){return this.sdk.shareAsync(n)},e.updateAsync=function(n){return this.sdk.updateAsync(n)},e.switchGameAsync=function(n,t){return this.sdk.switchGameAsync(n,t)},e.canCreateShortcutAsync=function(){return this.sdk.canCreateShortcutAsync()},e.createShortcutAsync=function(){return this.sdk.createShortcutAsync()},e.quit=function(){this.sdk.quit()},e.logEvent=function(n,t,e){return this.sdk.logEvent(n,t,e)},e.onPause=function(n){this.sdk.onPause(n)},e.getInterstitialAdAsync=function(n){return this.sdk.getInterstitialAdAsync(n)},e.getRewardedVideoAsync=function(n){return this.sdk.getRewardedVideoAsync(n)},e.matchPlayerAsync=function(n,t,e){return this.sdk.matchPlayerAsync(n,t,e)},e.checkCanPlayerMatchAsync=function(){return this.sdk.checkCanPlayerMatchAsync()},e.getLeaderboardAsync=function(n){return this.sdk.getLeaderboardAsync(n)},e.postSessionScoreAsync=function(n){return this.sdk.postSessionScoreAsync(n)},e.loadBannerAdAsync=function(n){return this.sdk.loadBannerAdAsync(n)},e.hideBannerAdAsync=function(){return this.sdk.hideBannerAdAsync()},e.showGameRating=function(){var n=(0,r.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s().reject(new Error("CLIENT_UNSUPPORTED_OPERATION")));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.getTournamentAsync=function(){return this.sdk.getTournamentAsync()},e.inviteAsync=function(n){return this.sdk.inviteAsync(n)},e.shareLinkAsync=function(n){return this.sdk.shareLinkAsync(n)},t}(u),A=p,v=e(39),w=e.n(v),m=e(363),S=e.n(m),k=e(38),I=e.n(k),E=e(53),D=function(){},P=function(n){function t(){var t;return(t=n.call(this)||this).code=void 0,t.name="USER_INPUT",t.code="USER_INPUT",t.message="User closed rewarded ad!",t}return(0,i.Z)(t,n),t}((0,E.Z)(Error)),b=function(n){function t(){var t;return(t=n.call(this)||this).code=void 0,t.name="INVALID_OPERATION",t.code="INVALID_OPERATION",t.message="Call show ad too fast. Min time is 120s!",t}return(0,i.Z)(t,n),t}((0,E.Z)(Error)),L=function(n){function t(t,e){var r;return(r=n.call(this)||this).ads=void 0,r.type=void 0,r.ads=e,r.type=t,r}(0,i.Z)(t,n);var e=t.prototype;return e.getPlacementID=function(){return"privateId"},e.loadAsync=function(){return new(s())((function(n){n()}))},e.showAsync=function(){var n=this;return new(s())((function(t,e){if("interstitial"===n.type){if((new Date).valueOf()-n.ads.lastShowTime<=12e4)return void e(new b);n.ads.showFullscreenAdv({callbacks:{onClose:t,onError:e}})}else if("rewarded"===n.type){var r=!1,i=!1;n.ads.showRewardedVideo({callbacks:{onOpen:function(){i=!0},onRewarded:function(){r=!0},onClose:function(){r?t():e(i?new P:new Error("Ad closes immediately!"))},onError:function(n){e(i?new P:n)}}})}else e(new Error("Unknown ad type"))}))},t}(D),_=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.sdk=t,e}(0,i.Z)(t,n);var e=t.prototype;return e.getID=function(){return null},e.getType=function(){return"SOLO"},e.isSizeBetween=function(n,t){return null},e.switchAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.chooseAsync=function(){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.createAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.getPlayersAsync=function(){return new(s())((function(n,t){t(new Error("Unsupported"))}))},t}(d),C=_,U=e(45),x=e(130),T=e.n(x),B=e(565),G=e.n(B),N=e(47),R=e.n(N),q="GuestID",O="GuestData",Z="GuestStats",M=function(){function n(){this._personalInfo=void 0,this._uniqueId=void 0,this._playerData=void 0,this._playerStats=void 0,this._uniqueId=this.checkAndGetIdFromLocalStorage(),this._personalInfo={id:this._uniqueId,avatarIdHash:"0",lang:"ru",publicName:this.getName(),uniqueID:this._uniqueId,scopePermissions:{avatar:"forbid",public_name:"forbid"}},this._playerData=this.getDataFromLocalStorage(),this._playerStats=this.getStatsFromLocalStorage()}var t=n.prototype;return t.getUniqueID=function(){return this._uniqueId},t.getName=function(){return"Guest"},t.getPhoto=function(){return""},t.getMode=function(){return""},t.getData=function(n){var t=this;if(n){var e=T()(n).call(n,(function(n,e){var r;return(0,U.Z)({},n,((r={})[e]=t._playerData[e],r))}),{});return s().resolve(e)}return s().resolve(this._playerData)},t.setData=function(n){return this._playerData=(0,U.Z)({},this._playerData,n),this.writeDataToLocalStorage(this._playerData),s().resolve(!0)},t.setStats=function(n){return this._playerStats=(0,U.Z)({},this._playerStats,n),this.writeStatsToLocalStorage(this._playerStats),s().resolve(!0)},t.incrementStats=function(n){for(var t=0,e=G()(n);t<e.length;t++){var r=e[t],i=r[0],o=r[1];this._playerStats[i]=(this._playerStats[i]||0)+o}return this.writeStatsToLocalStorage(this._playerStats),s().resolve(this._playerStats)},t.getStats=function(n){var t=this;if(n){var e=T()(n).call(n,(function(n,e){var r;return(0,U.Z)({},n,((r={})[e]=t._playerStats[e],r))}),{});return s().resolve(e)}return s().resolve(this._playerStats)},t.getIDsPerGame=function(){return s().resolve([])},t.checkAndGetIdFromLocalStorage=function(){var n=localStorage.getItem(q);if(null!=n)return n;var t=this.getRandomID();return localStorage.setItem(q,t),t},t.getRandomID=function(){return"GUEST_"+Math.random().toString(36).substr(2,15)},t.getDataFromLocalStorage=function(){var n=localStorage.getItem(O);return n?JSON.parse(n):{}},t.writeDataToLocalStorage=function(n){return localStorage.setItem(O,R()(n))},t.getStatsFromLocalStorage=function(){var n=localStorage.getItem(Z);return n?JSON.parse(n):{}},t.writeStatsToLocalStorage=function(n){return localStorage.setItem(Z,R()(n))},n}(),z=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.player=void 0,e.sdk=t,e}(0,i.Z)(t,n);var e=t.prototype;return e.initPlayerAsync=function(){var n=(0,r.Z)(a().mark((function n(){var t=this;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new(s())((function(n){t.sdk.getPlayer().then((function(n){t.player=n})).catch((function(){t.player=new M})).finally(n)})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.openAuthDialogAsync=function(){var n=(0,r.Z)(a().mark((function n(){var t=this;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new(s())((function(n,e){t.sdk.auth.openAuthDialog().then((function(){t.sdk.getPlayer().then((function(e){t.player=e,n()})).catch(e)})).catch(e)})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.rejectPlayerNotInitialized=function(){return s().reject(new Error("Player is not initialized"))},e.getID=function(){var n,t;return null!=(n=null==(t=this.player)?void 0:t.getUniqueID())?n:null},e.getASIDAsync=function(){var n;return s().resolve(null!=(n=this.getID())?n:"")},e.getSignedASIDAsync=function(){var n=this;return s().resolve({getASID:function(){var t;return null!=(t=n.getID())?t:""},getSignature:function(){return""}})},e.getName=function(){var n,t,e=null!=(n=null==(t=this.player)?void 0:t.getName())?n:null;return""===e?"Anonymous":e},e.getPhoto=function(){var n,t;return null!=(n=null==(t=this.player)?void 0:t.getPhoto())?n:null},e.getDataAsync=function(n){var t=this;return new(s())((function(e,r){t.validateIsLogged(r),t.player.getData(n).then(e).catch(r)}))},e.setDataAsync=function(n){var t=this;return new(s())((function(e,r){t.validateIsLogged(r),t.getDataAsync().then((function(i){var o=(0,U.Z)({},i,n);t.player.setData(o,!1).then((function(){e()})).catch(r)})).catch(r)}))},e.flushDataAsync=function(){var n,t;return null!=(n=null==(t=this.player)?void 0:t.setData({}).then())?n:this.rejectPlayerNotInitialized()},e.getSignedPlayerInfoAsync=function(){var n,t,e=this,r=null!=(n=null==(t=this.player)?void 0:t.getUniqueID())?n:this.rejectPlayerNotInitialized();return new(s())((function(n,t){"string"===typeof r?n({getPlayerID:function(){var n;return null!=(n=e.getID())?n:"10"},getSignature:function(){return r}}):t(new Error("Can't get player signed"))}))},e.canSubscribeBotAsync=function(){return new(s())((function(n){n(!1)}))},e.subscribeBotAsync=function(){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.getStatsAsync=function(n){var t=this;return new(s())((function(e,r){t.validateIsLogged(r),e(t.player.getStats(n))}))},e.setStatsAsync=function(n){var t=this;return new(s())((function(e,r){t.validateIsLogged(r),t.player.setStats(n).then((function(){return e()})).catch(r)}))},e.incrementStatsAsync=function(n){var t=this;return new(s())((function(e,r){t.validateIsLogged(r),t.player.incrementStats(n).then(e).catch(r)}))},e.getConnectedPlayersAsync=function(){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.isGuest=function(){if(!this.player)return!0;if("lite"===this.player.getMode())return!0;var n=this.getID();return!n||"GUEST"==w()(n).call(n,0,5)},e.validateIsLogged=function(n){this.player||n(new Error("Player is not initialized"))},t}(y),F=z,V=function(n){function t(t){var e;return(e=n.call(this)||this).sdk=void 0,e.ysdk=void 0,e.player=void 0,e.context=void 0,e.graphApi=void 0,e.tournament=void 0,e.rewardedAdInstance=void 0,e.interstitialAdInstance=void 0,e.currentPercentLoading=0,e.initSDKAsync=function(n){return new(s())((function(t){e.ysdk=n,e.player=new F(e.ysdk),e.context=new C(e.ysdk),e.rewardedAdInstance=new L("rewarded",e.ysdk.adv),e.interstitialAdInstance=new L("interstitial",e.ysdk.adv),e.player.initPlayerAsync().finally(t)}))},e.sdk=t,e.ysdk=null,e}(0,i.Z)(t,n);var e=t.prototype;return e.getLocale=function(){var n,t;return null!=(n=null==(t=this.ysdk)?void 0:t.environment.i18n.lang)?n:"ru"},e.getSDKVersion=function(){return"2.0"},e.getSupportedAPIs=function(){var n,t=["getLocale","getSDKVersion","initializeAsync","startGameAsync","setLoadingProgress","getInterstitialAdAsync","getRewardedVideoAsync","getPlatform","loadBannerAdAsync","hideBannerAdAsync","getLeaderboardAsync"];return(null==(n=this.ysdk)?void 0:n.isAvailableMethod("leaderboards.getLeaderboardPlayerEntry"))&&t.push("getPlayerEntryAsync"),t},e.initializeAsync=function(){var n=this;return new(s())((function(t,e){var r=document.getElementById("lds-content");if(r)r.hidden=!1;else{var i='<div id="lds-content"><div id="lds-dual-ring"></div><div id="lds-text"><span id="lds-percent">0</span>% \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e</div></div>';"complete"===document.readyState?n.appendHtml(document.body,i):window.addEventListener("load",(function(){n.appendHtml(document.body,i)}))}n.sdk.init({screen:{fullscreen:!0,orientation:{value:"portrait",lock:!0}}}).then((function(r){n.initSafeStorage(r).then((function(){n.initSDKAsync(r).then(t).catch(e)})).catch(e)})).catch(e)}))},e.startGameAsync=function(){var n,t=this;return this.setLoadingProgress(100),null==(n=document.getElementById("lds-content"))||n.remove(),new(s())((function(n,e){t.ysdk?n():e("Initialize Failed")}))},e.setLoadingProgress=function(n){var t=document.getElementById("lds-percent");t&&(this.currentPercentLoading=Math.round(Math.max(Math.min(n,100),this.currentPercentLoading)),t.innerHTML=""+this.currentPercentLoading,this.currentPercentLoading=n)},e.setSessionData=function(n){},e.shareAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.updateAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.switchGameAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.canCreateShortcutAsync=function(){return new(s())((function(n,t){t(!1)}))},e.createShortcutAsync=function(){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.logEvent=function(){return null},e.onPause=function(n){},e.getInterstitialAdAsync=function(n){var t=this;return new(s())((function(n){n(t.interstitialAdInstance)}))},e.getRewardedVideoAsync=function(n){var t=this;return new(s())((function(n){n(t.rewardedAdInstance)}))},e.matchPlayerAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.checkCanPlayerMatchAsync=function(){return new(s())((function(n,t){t(!1)}))},e.getLeaderboardAsync=function(n){var t=this;return new(s())((function(e,r){t.ysdk?t.ysdk.getLeaderboards().then((function(r){e(t.mapLeaderboardsAsync(r,n))})):r("Yandex not initialized")}))},e.mapLeaderboardsAsync=function(n,t){var e,r=this,i="GUEST"==(null==(e=this.player.getID())?void 0:w()(e).call(e,0,5));return{getName:function(){return t},getContextID:function(){return null},getEntryCountAsync:function(){return new(s())((function(e){n.getLeaderboardEntries(t,{includeUser:!1,quantityAround:0,quantityTop:20}).then((function(n){return e(S()(n).length)})).catch(e)}))},setScoreAsync:function(e,o){return new(s())((function(a,c){i?c(new Error("FetchError: Unauthorized")):r.wrapGetPlayerEntryAsync(n,t).then((function(i){null==i||i.getScore()<e?n.setLeaderboardScore(t,e,o).then((function(){r.wrapGetPlayerEntryAsync(n,t).then((function(n){null!=n?a(n):c(new Error("Unknown Error"))}))})).catch(c):a(i)})).catch(c)}))},getPlayerEntryAsync:function(){return new(s())((function(e,o){i?e(null):r.wrapGetPlayerEntryAsync(n,t).then(e).catch(o)}))},getEntriesAsync:function(e,i){return new(s())((function(i,o){n.getLeaderboardEntries(t,{includeUser:!1,quantityTop:Math.min(e,20)}).then((function(n){var t;i(I()(t=S()(n)).call(t,(function(n){return r.wrapLeaderboardEntry(n)})))})).catch(o)}))},getConnectedPlayerEntriesAsync:function(e,i){return new(s())((function(i,o){n.getLeaderboardEntries(t,{includeUser:!0,quantityTop:Math.min(e,20)}).then((function(n){var t;i(I()(t=S()(n)).call(t,(function(n){return r.wrapLeaderboardEntry(n)})))})).catch(o)}))}}},e.wrapGetPlayerEntryAsync=function(n,t){var e=this;return new(s())((function(r,i){n.getLeaderboardPlayerEntry(t).then((function(n){r(e.wrapLeaderboardEntry(n))})).catch((function(n){"LEADERBOARD_PLAYER_NOT_PRESENT"===n.code&&r(null),i(n)}))}))},e.wrapLeaderboardEntry=function(n){return{getScore:function(){return n.score},getFormattedScore:function(){return n.formattedScore},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return n.rank},getExtraData:function(){return n.extraData},getPlayer:function(){return{getName:function(){return n.player.publicName},getPhoto:function(){return n.player.getAvatarSrc("medium")},getID:function(){return n.player.uniqueID}}},playerId:n.player.uniqueID,score:n.score,rank:n.rank}},e.initSafeStorage=function(n){return new(s())((function(t,e){n.getStorage().then((function(n){return Object.defineProperty(window,"localStorage",{get:function(){return n}})})).then((function(){return t()})).catch(e)}))},e.postSessionScoreAsync=function(n){return new(s())((function(n,t){t(new Error("Unsupported"))}))},e.appendHtml=function(n,t){var e=document.createElement("div");for(e.innerHTML=t;e.children.length>0;)n.appendChild(e.children[0])},e.getPlatform=function(){if(!this.ysdk)return null;var n=this.ysdk.deviceInfo.isMobile(),t=this.ysdk.deviceInfo.isTablet();return n||t?"MOBILE_WEB":"WEB"},e.initAdContext=function(){var n=document.getElementById("yandexAdContextScript");n||((n=document.createElement("script")).src="https://yandex.ru/ads/system/context.js",n.async=!0,n.id="yandexAdContextScript",document.head.appendChild(n))},e.initAdElement=function(n){var t="yandex_rtb_"+n,e="yandex_rtb_wrapper_"+n,r=document.getElementById(t),i=document.getElementById(e);return r&&i||((i=document.createElement("div")).id=e,i.style.display="block",i.style.position="fixed",i.style.zIndex="10000",document.body.appendChild(i),(r=document.createElement("div")).id=t,r.classList.add("yandex-adaptive"),r.style.display="block",i.appendChild(r)),t},e.loadBannerAdAsync=function(n){var t=this;return new(s())((function(e,r){window.yaContextCb=window.yaContextCb||[],t.initAdContext();var i=t.initAdElement(n);window.yaContextCb.push((function(){window.Ya.Context.AdvManager.render({renderTo:i,blockId:n,onRender:e,onError:r})}))}))},e.hideBannerAdAsync=function(){return new(s())((function(n){document.querySelectorAll('div[id^="yandex_rtb_wrapper_"]').forEach((function(n){var t=n;t.style.bottom="",t.style.top="-"+t.style.height})),n()}))},e.showGameRating=function(){var n=(0,r.Z)(a().mark((function n(){var t=this;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new(s())((function(n){t.ysdk?t.ysdk.feedback.canReview().then((function(e){var r=e.value;e.reason;if(r){if(!t.ysdk)return void n();t.ysdk.feedback.requestReview().then((function(t){t.feedbackSent;n()})).catch((function(){n()}))}else n()})).catch((function(){n()})):n()})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.getTournamentAsync=function(){return s().reject(new Error("Unsupported"))},e.inviteAsync=function(n){return s().reject(new Error("Unsupported"))},e.shareLinkAsync=function(n){return s().reject(new Error("Unsupported"))},t}(u),j=V;"FBInstant"in window&&(window.GameSDK=new A(window.FBInstant)),"YaGames"in window&&(window.GameSDK=new j(window.YaGames)),window.FBInstant=window.GameSDK}}]);