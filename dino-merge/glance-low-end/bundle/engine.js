var Mt=(I,z)=>()=>(z||I((z={exports:{}}).exports,z),z.exports);var At=Mt((yt,Tt)=>{/*! For license information please see phaser-custom.min.js.LICENSE.txt */(function(I,z){typeof yt=="object"&&typeof Tt=="object"?Tt.exports=z():typeof define=="function"&&define.amd?define("Phaser",[],z):typeof yt=="object"?yt.Phaser=z():I.Phaser=z()})(self,function(){return function(){var I={26729:function(g){var p=Object.prototype.hasOwnProperty,i="~";function u(){}function e(s,n,r){this.fn=s,this.context=n,this.once=r||!1}function l(s,n,r,h,a){if(typeof r!="function")throw new TypeError("The listener must be a function");var c=new e(r,h||s,a),d=i?i+n:n;return s._events[d]?s._events[d].fn?s._events[d]=[s._events[d],c]:s._events[d].push(c):(s._events[d]=c,s._eventsCount++),s}function o(s,n){--s._eventsCount==0?s._events=new u:delete s._events[n]}function t(){this._events=new u,this._eventsCount=0}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(i=!1)),t.prototype.eventNames=function(){var s,n,r=[];if(this._eventsCount===0)return r;for(n in s=this._events)p.call(s,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(s)):r},t.prototype.listeners=function(s){var n=i?i+s:s,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var h=0,a=r.length,c=new Array(a);h<a;h++)c[h]=r[h].fn;return c},t.prototype.listenerCount=function(s){var n=i?i+s:s,r=this._events[n];return r?r.fn?1:r.length:0},t.prototype.emit=function(s,n,r,h,a,c){var d=i?i+s:s;if(!this._events[d])return!1;var f,v,m=this._events[d],x=arguments.length;if(m.fn){switch(m.once&&this.removeListener(s,m.fn,void 0,!0),x){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,h),!0;case 5:return m.fn.call(m.context,n,r,h,a),!0;case 6:return m.fn.call(m.context,n,r,h,a,c),!0}for(v=1,f=new Array(x-1);v<x;v++)f[v-1]=arguments[v];m.fn.apply(m.context,f)}else{var T,y=m.length;for(v=0;v<y;v++)switch(m[v].once&&this.removeListener(s,m[v].fn,void 0,!0),x){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,n);break;case 3:m[v].fn.call(m[v].context,n,r);break;case 4:m[v].fn.call(m[v].context,n,r,h);break;default:if(!f)for(T=1,f=new Array(x-1);T<x;T++)f[T-1]=arguments[T];m[v].fn.apply(m[v].context,f)}}return!0},t.prototype.on=function(s,n,r){return l(this,s,n,r,!1)},t.prototype.once=function(s,n,r){return l(this,s,n,r,!0)},t.prototype.removeListener=function(s,n,r,h){var a=i?i+s:s;if(!this._events[a])return this;if(!n)return o(this,a),this;var c=this._events[a];if(c.fn)c.fn!==n||h&&!c.once||r&&c.context!==r||o(this,a);else{for(var d=0,f=[],v=c.length;d<v;d++)(c[d].fn!==n||h&&!c[d].once||r&&c[d].context!==r)&&f.push(c[d]);f.length?this._events[a]=f.length===1?f[0]:f:o(this,a)}return this},t.prototype.removeAllListeners=function(s){var n;return s?(n=i?i+s:s,this._events[n]&&o(this,n)):(this._events=new u,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=i,t.EventEmitter=t,g.exports=t},55365:function(g){g.exports=function(p,i,u){return{instance:i,placementID:p,shown:!1,video:u}}},55625:function(g,p,i){var u=i(69186),e=i(26729),l=i(99551),o=new u({Extends:e,initialize:function(t,s){e.call(this),this.plugin=t,this.ref=s,this.name=s.getName(),this.contextID=s.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var t=this;return this.ref.getEntryCountAsync().then(function(s){t.entryCount=s,t.emit("getentrycount",s,t.name)}).catch(function(s){console.warn(s)}),this},setScore:function(t,s){s===void 0&&(s=""),typeof s=="object"&&(s=JSON.stringify(s));var n=this;return this.ref.setScoreAsync(t,s).then(function(r){if(r){var h=l(r);n.playerScore=h,n.emit("setscore",h,n.name)}else n.emit("setscore",null,n.name)}).catch(function(r){console.warn(r)}),this},getPlayerScore:function(){var t=this;return this.ref.getPlayerEntryAsync().then(function(s){if(s){var n=l(s);t.playerScore=n,t.emit("getplayerscore",n,t.name)}else t.emit("getplayerscore",null,t.name)}).catch(function(s){console.warn(s)}),this},getScores:function(t,s){t===void 0&&(t=10),s===void 0&&(s=0);var n=this;return this.ref.getEntriesAsync(t,s).then(function(r){n.scores=[],r.forEach(function(h){n.scores.push(l(h))}),n.emit("getscores",n.scores,n.name)}).catch(function(r){console.warn(r)}),this},getConnectedScores:function(){var t=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(s){t.scores=[],s.forEach(function(n){t.scores.push(l(n))}),t.emit("getconnectedscores",t.scores,t.name)}).catch(function(s){console.warn(s)}),this}});g.exports=o},99551:function(g){g.exports=function(p){return{score:p.getScore(),scoreFormatted:p.getFormattedScore(),timestamp:p.getTimestamp(),rank:p.getRank(),data:p.getExtraData(),playerName:p.getPlayer().getName(),playerPhotoURL:p.getPlayer().getPhoto(),playerID:p.getPlayer().getID()}}},7478:function(g,p,i){var u=i(25738);g.exports=function(e){return{title:u(e,"title",""),productID:u(e,"productID",""),description:u(e,"description",""),imageURI:u(e,"imageURI",""),price:u(e,"price",""),priceCurrencyCode:u(e,"priceCurrencyCode","")}}},34876:function(g,p,i){var u=i(25738);g.exports=function(e){return{developerPayload:u(e,"developerPayload",""),paymentID:u(e,"paymentID",""),productID:u(e,"productID",""),purchaseTime:u(e,"purchaseTime",""),purchaseToken:u(e,"purchaseToken",""),signedRequest:u(e,"signedRequest","")}}},68608:function(g,p,i){var u=i(92611);g.exports=function(e,l,o,t){for(var s=e[0],n=1;n<e.length;n++){var r=e[n];u(r,s,l,o,t),s=r}return e}},11461:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"angle",l,o,t,s)}},97644:function(g){g.exports=function(p,i,u){for(var e=0;e<p.length;e++){var l=p[e];i.call(u,l)}return p}},79532:function(g){g.exports=function(p,i,u){u===void 0&&(u=0);for(var e=u;e<p.length;e++){var l=p[e],o=!0;for(var t in i)l[t]!==i[t]&&(o=!1);if(o)return l}return null}},21683:function(g){g.exports=function(p,i,u){u===void 0&&(u=0);for(var e=u;e<p.length;e++){var l=p[e],o=!0;for(var t in i)l[t]!==i[t]&&(o=!1);if(o)return l}return null}},42507:function(g,p,i){var u=i(19918),e=i(68494),l=i(25738),o=i(45733),t=new(i(64043))({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1);g.exports=function(s,n){n===void 0&&(n={});var r=n.hasOwnProperty("width"),h=n.hasOwnProperty("height"),a=l(n,"width",-1),c=l(n,"height",-1),d=l(n,"cellWidth",1),f=l(n,"cellHeight",d),v=l(n,"position",e.TOP_LEFT),m=l(n,"x",0),x=l(n,"y",0),T=0,y=0,E=a*d,w=c*f;t.setPosition(m,x),t.setSize(d,f);for(var R=0;R<s.length;R++)if(u(s[R],t,v),r&&a===-1)t.x+=d;else if(h&&c===-1)t.y+=f;else if(h&&!r){if(y+=f,t.y+=f,y===w&&(y=0,T+=d,t.y=x,t.x+=d,T===E))break}else if(T+=d,t.x+=d,T===E&&(T=0,y+=f,t.x=m,t.y+=f,y===w))break;return s}},74277:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"alpha",l,o,t,s)}},92038:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"x",l,o,t,s)}},80824:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"x",l,t,n,r),u(e,"y",o,s,n,r)}},2690:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"y",l,o,t,s)}},39799:function(g){g.exports=function(p,i,u,e){u===void 0&&(u=0),e===void 0&&(e=6.28);for(var l=u,o=(e-u)/p.length,t=0;t<p.length;t++)p[t].x=i.x+i.radius*Math.cos(l),p[t].y=i.y+i.radius*Math.sin(l),l+=o;return p}},14618:function(g){g.exports=function(p,i,u,e){u===void 0&&(u=0),e===void 0&&(e=6.28);for(var l=u,o=(e-u)/p.length,t=i.width/2,s=i.height/2,n=0;n<p.length;n++)p[n].x=i.x+t*Math.cos(l),p[n].y=i.y+s*Math.sin(l),l+=o;return p}},59083:function(g,p,i){var u=i(26299);g.exports=function(e,l){for(var o=u(l,e.length),t=0;t<e.length;t++){var s=e[t],n=o[t];s.x=n.x,s.y=n.y}return e}},40898:function(g,p,i){var u=i(16178),e=i(34383),l=i(8405);g.exports=function(o,t,s){s===void 0&&(s=0);var n=u(t,!1,o.length);s>0?e(n,s):s<0&&l(n,Math.abs(s));for(var r=0;r<o.length;r++)o[r].x=n[r].x,o[r].y=n[r].y;return o}},59580:function(g,p,i){var u=i(62579);g.exports=function(e,l,o){var t=u({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},o),s=u({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},o),n=u({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},o);t.pop(),s.pop(),n.pop();for(var r=(t=t.concat(s,n)).length/e.length,h=0,a=0;a<e.length;a++){var c=e[a],d=t[Math.floor(h)];c.x=d.x,c.y=d.y,h+=r}return e}},99030:function(g){g.exports=function(p,i,u){for(var e=0;e<p.length;e++){var l=p[e];l.anims&&l.anims.play(i,u)}return p}},15759:function(g){g.exports=function(p,i,u,e,l,o){var t;e===void 0&&(e=0),l===void 0&&(l=0),o===void 0&&(o=1);var s=0,n=p.length;if(o===1)for(t=l;t<n;t++)p[t][i]+=u+s*e,s++;else for(t=l;t>=0;t--)p[t][i]+=u+s*e,s++;return p}},77449:function(g){g.exports=function(p,i,u,e,l,o){var t;e===void 0&&(e=0),l===void 0&&(l=0),o===void 0&&(o=1);var s=0,n=p.length;if(o===1)for(t=l;t<n;t++)p[t][i]=u+s*e,s++;else for(t=l;t>=0;t--)p[t][i]=u+s*e,s++;return p}},39320:function(g,p,i){var u=i(87764);g.exports=function(e,l){for(var o=0;o<e.length;o++)u(l,e[o]);return e}},55401:function(g,p,i){var u=i(49620);g.exports=function(e,l){for(var o=0;o<e.length;o++)u(l,e[o]);return e}},29226:function(g,p,i){var u=i(57747);g.exports=function(e,l){for(var o=0;o<e.length;o++)u(l,e[o]);return e}},43711:function(g,p,i){var u=i(61852);g.exports=function(e,l){for(var o=0;o<e.length;o++)u(l,e[o]);return e}},96793:function(g,p,i){var u=i(86407);g.exports=function(e,l){for(var o=0;o<e.length;o++)u(l,e[o]);return e}},56211:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"rotation",l,o,t,s)}},55833:function(g,p,i){var u=i(79749),e=i(76914);g.exports=function(l,o,t){for(var s=o.x,n=o.y,r=0;r<l.length;r++){var h=l[r];u(h,s,n,t,Math.max(1,e(h.x,h.y,s,n)))}return l}},86251:function(g,p,i){var u=i(79749);g.exports=function(e,l,o,t){var s=l.x,n=l.y;if(t===0)return e;for(var r=0;r<e.length;r++)u(e[r],s,n,o,t);return e}},43783:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"scaleX",l,o,t,s)}},57803:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"scaleX",l,t,n,r),u(e,"scaleY",o,s,n,r)}},55511:function(g,p,i){var u=i(15759);g.exports=function(e,l,o,t,s){return u(e,"scaleY",l,o,t,s)}},47040:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"alpha",l,o,t,s)}},56809:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t){return u(e,"blendMode",l,0,o,t)}},77510:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"depth",l,o,t,s)}},78672:function(g){g.exports=function(p,i,u){for(var e=0;e<p.length;e++)p[e].setInteractive(i,u);return p}},1696:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"originX",l,t,n,r),u(e,"originY",o,s,n,r),e.forEach(function(h){h.updateDisplayOrigin()}),e}},39656:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"rotation",l,o,t,s)}},66465:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"scaleX",l,t,n,r),u(e,"scaleY",o,s,n,r)}},82710:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"scaleX",l,o,t,s)}},19860:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"scaleY",l,o,t,s)}},18257:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"scrollFactorX",l,t,n,r),u(e,"scrollFactorY",o,s,n,r)}},53220:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"scrollFactorX",l,o,t,s)}},70033:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"scrollFactorY",l,o,t,s)}},29088:function(g){g.exports=function(p,i,u,e,l){for(var o=0;o<p.length;o++)p[o].setTint(i,u,e,l);return p}},9792:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t){return u(e,"visible",l,0,o,t)}},45099:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"x",l,o,t,s)}},47406:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s,n,r){return o==null&&(o=l),u(e,"x",l,t,n,r),u(e,"y",o,s,n,r)}},59843:function(g,p,i){var u=i(77449);g.exports=function(e,l,o,t,s){return u(e,"y",l,o,t,s)}},57084:function(g,p,i){var u=i(17321);g.exports=function(e,l,o,t,s){var n,r,h,a,c,d;if(t===void 0&&(t=0),s===void 0&&(s=new u),e.length>1)if(t===0){var f=e.length-1;for(n=e[f].x,r=e[f].y,h=f-1;h>=0;h--)a=(d=e[h]).x,c=d.y,d.x=n,d.y=r,n=a,r=c;e[f].x=l,e[f].y=o}else{for(n=e[0].x,r=e[0].y,h=1;h<e.length;h++)a=(d=e[h]).x,c=d.y,d.x=n,d.y=r,n=a,r=c;e[0].x=l,e[0].y=o}else n=e[0].x,r=e[0].y,e[0].x=l,e[0].y=o;return s.x=n,s.y=r,s}},10010:function(g,p,i){var u=i(80675);g.exports=function(e){return u(e)}},59901:function(g,p,i){var u=i(89989);g.exports=function(e,l,o,t,s){s===void 0&&(s=!1);var n,r=Math.abs(t-o)/e.length;if(s)for(n=0;n<e.length;n++)e[n][l]+=u(n*r,o,t);else for(n=0;n<e.length;n++)e[n][l]=u(n*r,o,t);return e}},75833:function(g,p,i){var u=i(29817);g.exports=function(e,l,o,t,s){s===void 0&&(s=!1);var n,r=Math.abs(t-o)/e.length;if(s)for(n=0;n<e.length;n++)e[n][l]+=u(n*r,o,t);else for(n=0;n<e.length;n++)e[n][l]=u(n*r,o,t);return e}},13385:function(g){g.exports=function(p,i,u,e,l){l===void 0&&(l=!1);var o,t=Math.abs(e-u)/p.length;if(l)for(o=0;o<p.length;o++)p[o][i]+=o*t+u;else for(o=0;o<p.length;o++)p[o][i]=o*t+u;return p}},25995:function(g){g.exports=function(p){for(var i=0;i<p.length;i++)p[i].visible=!p[i].visible;return p}},51601:function(g,p,i){var u=i(6704);g.exports=function(e,l,o){o===void 0&&(o=0);for(var t=0;t<e.length;t++){var s=e[t];s.x=u(s.x,l.left-o,l.right+o),s.y=u(s.y,l.top-o,l.bottom+o)}return e}},22603:function(g,p,i){g.exports={AlignTo:i(68608),Angle:i(11461),Call:i(97644),GetFirst:i(79532),GetLast:i(21683),GridAlign:i(42507),IncAlpha:i(74277),IncX:i(92038),IncXY:i(80824),IncY:i(2690),PlaceOnCircle:i(39799),PlaceOnEllipse:i(14618),PlaceOnLine:i(59083),PlaceOnRectangle:i(40898),PlaceOnTriangle:i(59580),PlayAnimation:i(99030),PropertyValueInc:i(15759),PropertyValueSet:i(77449),RandomCircle:i(39320),RandomEllipse:i(55401),RandomLine:i(29226),RandomRectangle:i(43711),RandomTriangle:i(96793),Rotate:i(56211),RotateAround:i(55833),RotateAroundDistance:i(86251),ScaleX:i(43783),ScaleXY:i(57803),ScaleY:i(55511),SetAlpha:i(47040),SetBlendMode:i(56809),SetDepth:i(77510),SetHitArea:i(78672),SetOrigin:i(1696),SetRotation:i(39656),SetScale:i(66465),SetScaleX:i(82710),SetScaleY:i(19860),SetScrollFactor:i(18257),SetScrollFactorX:i(53220),SetScrollFactorY:i(70033),SetTint:i(29088),SetVisible:i(9792),SetX:i(45099),SetXY:i(47406),SetY:i(59843),ShiftPosition:i(57084),Shuffle:i(10010),SmootherStep:i(75833),SmoothStep:i(59901),Spread:i(13385),ToggleVisible:i(25995),WrapInRectangle:i(51601)}},95018:function(g,p,i){var u=i(2543),e=i(69186),l=i(90316),o=i(81712),t=i(64909),s=i(76076),n=i(16068),r=new e({initialize:function(h,a,c){this.manager=h,this.key=a,this.type="frame",this.frames=this.getFrames(h.textureManager,s(c,"frames",[]),s(c,"defaultTextureKey",null),s(c,"sortFrames",!0)),this.frameRate=s(c,"frameRate",null),this.duration=s(c,"duration",null),this.msPerFrame,this.skipMissedFrames=s(c,"skipMissedFrames",!0),this.delay=s(c,"delay",0),this.repeat=s(c,"repeat",0),this.repeatDelay=s(c,"repeatDelay",0),this.yoyo=s(c,"yoyo",!1),this.showOnStart=s(c,"showOnStart",!1),this.hideOnComplete=s(c,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(l.PAUSE_ALL,this.pause,this),this.manager.on(l.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,a,c,d){c===null&&d===null?(h.frameRate=24,h.duration=24/a*1e3):c&&d===null?(h.duration=c,h.frameRate=a/(c/1e3)):(h.frameRate=d,h.duration=a/d*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,a){var c=this.getFrames(this.manager.textureManager,a);if(c.length>0){if(h===0)this.frames=c.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(c);else{var d=this.frames.slice(0,h),f=this.frames.slice(h);this.frames=d.concat(c,f)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,a,c,d){d===void 0&&(d=!0);var f,v,m,x,T=[],y=1;if(typeof a=="string"){x=a;var E=h.get(x).getFrameNames();d&&n(E),a=[],E.forEach(function(b){a.push({key:x,frame:b})})}if(!Array.isArray(a)||a.length===0)return T;for(m=0;m<a.length;m++){var w=a[m],R=s(w,"key",c);if(R){var C=s(w,"frame",0),A=h.getFrame(R,C);(v=new t(R,C,y,A)).duration=s(w,"duration",0),v.isFirst=!f,f&&(f.nextFrame=v,v.prevFrame=f),T.push(v),f=v,y++}}if(T.length>0){v.isLast=!0,v.nextFrame=T[0],T[0].prevFrame=v;var S=1/(T.length-1);for(m=0;m<T.length;m++)T[m].progress=m*S}return T},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=u(h,0,1),o(h,this.frames,"progress")},nextFrame:function(h){var a=h.currentFrame;a.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,a.nextFrame)},handleYoyoFrame:function(h,a){if(a||(a=!1),h.inReverse===!a&&h.repeatCounter>0)return(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=a),void this.repeatAnimation(h);if(h.inReverse===a||h.repeatCounter!==0){h.forward=a;var c=a?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,c)}else h.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var a=h.currentFrame;a.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?(h.inReverse&&!h.forward||(h.forward=!0),this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,a.prevFrame)},updateAndGetNextTick:function(h,a){h.setCurrentFrame(a),this.getNextTick(h)},removeFrame:function(h){var a=this.frames.indexOf(h);return a!==-1&&this.removeFrameAt(a),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(a){h.frames.push(a.toJSON())}),h},updateFrameSequence:function(){for(var h,a=this.frames.length,c=1/(a-1),d=0;d<a;d++)(h=this.frames[d]).index=d+1,h.isFirst=!1,h.isLast=!1,h.progress=d*c,d===0?(h.isFirst=!0,a===1?(h.isLast=!0,h.nextFrame=h,h.prevFrame=h):(h.isLast=!1,h.prevFrame=this.frames[a-1],h.nextFrame=this.frames[d+1])):d===a-1&&a>1?(h.isLast=!0,h.prevFrame=this.frames[a-2],h.nextFrame=this.frames[0]):a>1&&(h.prevFrame=this.frames[d-1],h.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(l.PAUSE_ALL,this.pause,this),this.manager.off(l.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});g.exports=r},64909:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o,t,s){s===void 0&&(s=!1),this.textureKey=e,this.textureFrame=l,this.index=o,this.frame=t,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=s},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});g.exports=u},59460:function(g,p,i){var u=i(95018),e=i(69186),l=i(21342),o=i(26729),t=i(90316),s=i(24496),n=i(25738),r=i(76076),h=i(47742),a=i(74934),c=new e({Extends:o,initialize:function(d){o.call(this),this.game=d,this.textureManager=null,this.globalTimeScale=1,this.anims=new l,this.mixes=new l,this.paused=!1,this.name="AnimationManager",d.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},addMix:function(d,f,v){var m=this.anims,x=this.mixes,T=typeof d=="string"?d:d.key,y=typeof f=="string"?f:f.key;if(m.has(T)&&m.has(y)){var E=x.get(T);E||(E={}),E[y]=v,x.set(T,E)}return this},removeMix:function(d,f){var v=this.mixes,m=typeof d=="string"?d:d.key,x=v.get(m);if(x)if(f){var T=typeof f=="string"?f:f.key;x.hasOwnProperty(T)&&delete x[T]}else f||v.delete(m);return this},getMix:function(d,f){var v=this.mixes,m=typeof d=="string"?d:d.key,x=typeof f=="string"?f:f.key,T=v.get(m);return T&&T.hasOwnProperty(x)?T[x]:0},add:function(d,f){return this.anims.has(d)?(console.warn("Animation key exists: "+d),this):(f.key=d,this.anims.set(d,f),this.emit(t.ADD_ANIMATION,d,f),this)},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,f){var v=[],m=this.game.cache.json.get(d);if(!m)return v;var x=this,T=r(m,"meta",null),y=r(m,"frames",null);return T&&y&&r(T,"frameTags",[]).forEach(function(E){var w=[],R=n(E,"name",null),C=n(E,"from",0),A=n(E,"to",0),S=n(E,"direction","forward");if(R&&(!f||f&&f.indexOf(R)>-1)){for(var b=[],_=Number.MAX_SAFE_INTEGER,P=C;P<=A;P++){var D=P.toString(),O=y[D];if(O){var F=n(O,"duration",Number.MAX_SAFE_INTEGER);F<_&&(_=F),b.push({frame:D,duration:F})}}b.forEach(function(U){w.push({key:d,frame:U.frame,duration:_-U.duration})});var N=_*w.length;S==="reverse"&&(w=w.reverse());var k={key:R,frames:w,duration:N,yoyo:S==="pingpong"},L=x.create(k);L&&v.push(L)}}),v},create:function(d){var f=d.key,v=!1;return f&&((v=this.get(f))||(v=new u(this,f,d),this.anims.set(f,v),this.emit(t.ADD_ANIMATION,f,v))),v},fromJSON:function(d,f){f===void 0&&(f=!1),f&&this.anims.clear(),typeof d=="string"&&(d=JSON.parse(d));var v=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var m=0;m<d.anims.length;m++)v.push(this.create(d.anims[m]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&d.type==="frame"&&v.push(this.create(d));return v},generateFrameNames:function(d,f){var v,m=r(f,"prefix",""),x=r(f,"start",0),T=r(f,"end",0),y=r(f,"suffix",""),E=r(f,"zeroPad",0),w=r(f,"outputArray",[]),R=r(f,"frames",!1),C=this.textureManager.get(d);if(!C)return w;if(f)for(R||(R=a(x,T)),v=0;v<R.length;v++){var A=m+h(R[v],E,"0",1)+y;C.has(A)?w.push({key:d,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+d)}else for(R=C.getFrameNames(),v=0;v<R.length;v++)w.push({key:d,frame:R[v]});return w},generateFrameNumbers:function(d,f){var v=r(f,"start",0),m=r(f,"end",-1),x=r(f,"first",!1),T=r(f,"outputArray",[]),y=r(f,"frames",!1),E=this.textureManager.get(d);if(!E)return T;x&&E.has(x)&&T.push({key:d,frame:x}),y||(m===-1&&(m=E.frameTotal-2),y=a(v,m));for(var w=0;w<y.length;w++)E.has(y[w])?T.push({key:d,frame:y[w]}):console.warn("generateFrameNumbers: Frame "+w+" missing from texture: "+d);return T},get:function(d){return this.anims.get(d)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(t.PAUSE_ALL)),this},play:function(d,f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++)f[v].anims.play(d);return this},staggerPlay:function(d,f,v,m){v===void 0&&(v=0),m===void 0&&(m=!0),Array.isArray(f)||(f=[f]);var x=f.length;m||x--;for(var T=0;T<f.length;T++){var y=v<0?Math.abs(v)*(x-T):v*T;f[T].anims.playAfterDelay(d,y)}return this},remove:function(d){var f=this.get(d);return f&&(this.emit(t.REMOVE_ANIMATION,d,f),this.anims.delete(d),this.removeMix(d)),f},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(t.RESUME_ALL)),this},toJSON:function(d){var f={anims:[],globalTimeScale:this.globalTimeScale};return d!==void 0&&d!==""?f.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(v,m){f.anims.push(m.toJSON())}),f},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});g.exports=c},56579:function(g,p,i){var u=i(69186),e=i(21342),l=i(25738),o=i(90316),t=i(95018),s=new u({initialize:function(n){this.parent=n,this.animationManager=n.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(n){var r=this.parent;if(n===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,r;Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++){var a=n[h];this.nextAnim===null?this.nextAnim=a:this.nextAnimsQueue.push(a)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(n){this.isPlaying&&this.stop();var r=this.animationManager,h=typeof n=="string"?n:l(n,"key",null),a=this.exists(h)?this.get(h):r.get(h);if(a){this.currentAnim=a;var c=a.getTotalFrames(),d=l(n,"frameRate",a.frameRate),f=l(n,"duration",a.duration);a.calculateDuration(this,c,f,d),this.delay=l(n,"delay",a.delay),this.repeat=l(n,"repeat",a.repeat),this.repeatDelay=l(n,"repeatDelay",a.repeatDelay),this.yoyo=l(n,"yoyo",a.yoyo),this.showOnStart=l(n,"showOnStart",a.showOnStart),this.hideOnComplete=l(n,"hideOnComplete",a.hideOnComplete),this.skipMissedFrames=l(n,"skipMissedFrames",a.skipMissedFrames),this.timeScale=l(n,"timeScale",this.timeScale);var v=l(n,"startFrame",0);v>a.getTotalFrames()&&(v=0);var m=a.frames[v];v!==0||this.forward||(m=a.getLastFrame()),this.currentFrame=m}else console.warn("Missing animation: "+h);return this.parent},pause:function(n){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),n!==void 0&&this.setCurrentFrame(n),this.parent},resume:function(n){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),n!==void 0&&this.setCurrentFrame(n),this.parent},playAfterDelay:function(n,r){if(this.isPlaying){var h=this.nextAnim,a=this.nextAnimsQueue;h&&a.unshift(h),this.nextAnim=n,this._pendingStop=1,this._pendingStopValue=r}else this.delayCounter=r,this.play(n,!0);return this.parent},playAfterRepeat:function(n,r){if(r===void 0&&(r=1),this.isPlaying){var h=this.nextAnim,a=this.nextAnimsQueue;h&&a.unshift(h),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this.nextAnim=n,this._pendingStop=2,this._pendingStopValue=r}else this.play(n);return this.parent},play:function(n,r){r===void 0&&(r=!1);var h=this.currentAnim,a=this.parent,c=typeof n=="string"?n:n.key;if(r&&this.isPlaying&&h.key===c)return a;if(h&&this.isPlaying){var d=this.animationManager.getMix(h.key,n);if(d>0)return this.playAfterDelay(n,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n)},playReverse:function(n,r){r===void 0&&(r=!1);var h=typeof n=="string"?n:n.key;return r&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n))},startAnimation:function(n){this.load(n);var r=this.currentAnim,h=this.parent;return r&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,r.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(n,r){var h=this.currentAnim,a=this.currentFrame,c=this.parent,d=a.textureFrame;c.emit(n,h,a,c,d),r&&c.emit(r+h.key,h,a,c,d)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var n=this.currentFrame;if(!n)return 0;var r=n.progress;return this.inReverse&&(r*=-1),r},setProgress:function(n){return this.forward||(n=1-n),this.setCurrentFrame(this.currentAnim.getFrameByProgress(n)),this.parent},setRepeat:function(n){return this.repeatCounter=n===-1?Number.MAX_VALUE:n,this.parent},globalRemove:function(n,r){r===void 0&&(r=this.currentAnim),this.isPlaying&&r.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var h=this.currentAnim,a=this.parent;return h?(r&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!n,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):a},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(n)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(n)}return this.parent},stopAfterDelay:function(n){return this._pendingStop=1,this._pendingStopValue=n,this.parent},stopAfterRepeat:function(n){return n===void 0&&(n=1),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=n,this.parent},stopOnFrame:function(n){return this._pendingStop=3,this._pendingStopValue=n,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(n,r){var h=this.currentAnim;if(this.isPlaying&&h&&!h.paused){if(this.accumulator+=r*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=r,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var a=0;do this.forward?h.nextFrame(this):h.previousFrame(this),a++;while(this.isPlaying&&this.accumulator>this.nextTick&&a<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(n){var r=this.parent;return this.currentFrame=n,r.texture=n.frame.texture,r.frame=n.frame,r.isCropped&&r.frame.updateCropUVs(r._crop,r.flipX,r.flipY),n.setAlpha&&(r.alpha=n.alpha),r.setSizeToFrame(),r._originComponent&&(n.frame.customPivot?r.setOrigin(n.frame.pivotX,n.frame.pivotY):r.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===n&&this.stop()),r},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(n){return this.anims?this.anims.get(n):null},exists:function(n){return!!this.anims&&this.anims.has(n)},create:function(n){var r=n.key,h=!1;return r&&((h=this.get(r))||(h=new t(this,r,n),this.anims||(this.anims=new e),this.anims.set(r,h))),h},generateFrameNames:function(n,r){return this.animationManager.generateFrameNames(n,r)},generateFrameNumbers:function(n,r){return this.animationManager.generateFrameNumbers(n,r)},remove:function(n){var r=this.get(n);return r&&(this.currentAnim===r&&this.stop(),this.anims.delete(n)),r},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});g.exports=s},59021:function(g){g.exports="add"},15687:function(g){g.exports="animationcomplete"},17084:function(g){g.exports="animationcomplete-"},48571:function(g){g.exports="animationrepeat"},36994:function(g){g.exports="animationrestart"},21036:function(g){g.exports="animationstart"},48492:function(g){g.exports="animationstop"},11937:function(g){g.exports="animationupdate"},18742:function(g){g.exports="pauseall"},34018:function(g){g.exports="remove"},45208:function(g){g.exports="resumeall"},90316:function(g,p,i){g.exports={ADD_ANIMATION:i(59021),ANIMATION_COMPLETE:i(15687),ANIMATION_COMPLETE_KEY:i(17084),ANIMATION_REPEAT:i(48571),ANIMATION_RESTART:i(36994),ANIMATION_START:i(21036),ANIMATION_STOP:i(48492),ANIMATION_UPDATE:i(11937),PAUSE_ALL:i(18742),REMOVE_ANIMATION:i(34018),RESUME_ALL:i(45208)}},88552:function(g,p,i){g.exports={Animation:i(95018),AnimationFrame:i(64909),AnimationManager:i(59460),AnimationState:i(56579),Events:i(90316)}},80063:function(g,p,i){var u=i(69186),e=i(21342),l=i(26729),o=i(38453),t=new u({initialize:function(){this.entries=new e,this.events=new l},add:function(s,n){return this.entries.set(s,n),this.events.emit(o.ADD,this,s,n),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var n=this.get(s);return n&&(this.entries.delete(s),this.events.emit(o.REMOVE,this,s,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});g.exports=t},95937:function(g,p,i){var u=i(80063),e=i(69186),l=i(24496),o=new e({initialize:function(t){this.game=t,this.binary=new u,this.bitmapFont=new u,this.json=new u,this.physics=new u,this.shader=new u,this.audio=new u,this.video=new u,this.text=new u,this.html=new u,this.obj=new u,this.tilemap=new u,this.xml=new u,this.custom={},this.game.events.once(l.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new u),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<t.length;s++)this[t[s]].destroy(),this[t[s]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});g.exports=o},35693:function(g){g.exports="add"},40702:function(g){g.exports="remove"},38453:function(g,p,i){g.exports={ADD:i(35693),REMOVE:i(40702)}},80425:function(g,p,i){g.exports={BaseCache:i(80063),CacheManager:i(95937),Events:i(38453)}},43929:function(g,p,i){var u=i(69186),e=i(19506),l=i(23407),o=i(26729),t=i(26088),s=i(75380),n=i(9329),r=i(58909),h=i(17321),a=new u({Extends:o,Mixins:[e.Alpha,e.Visible],initialize:function(c,d,f,v){c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=c,this._y=d,this._width=f,this._height=v,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=r("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(f/2,v/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,d){return c===void 0&&(c=.5),d===void 0&&(d=c),this.originX=c,this.originY=d,this},getScroll:function(c,d,f){f===void 0&&(f=new h);var v=.5*this.width,m=.5*this.height;return f.x=c-v,f.y=d-m,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(c){var d=.5*this.width;return this.midPoint.x=c,this.scrollX=c-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var d=.5*this.height;return this.midPoint.y=c,this.scrollY=c-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,d){return this.centerOnX(c),this.centerOnY(d),this},centerToBounds:function(){if(this.useBounds){var c=this._bounds,d=.5*this.width,f=.5*this.height;this.midPoint.set(c.centerX,c.centerY),this.scrollX=c.centerX-d,this.scrollY=c.centerY-f}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(c){if(this.disableCull)return c;var d=this.matrix.matrix,f=d[0],v=d[1],m=d[2],x=d[3],T=f*x-v*m;if(!T)return c;var y=d[4],E=d[5],w=this.scrollX,R=this.scrollY,C=this.width,A=this.height,S=this.y,b=S+A,_=this.x,P=_+C,D=this.culledObjects,O=c.length;T=1/T,D.length=0;for(var F=0;F<O;++F){var N=c[F];if(N.hasOwnProperty("width")&&!N.parentContainer){var k=N.width,L=N.height,U=N.x-w*N.scrollFactorX-k*N.originX,Y=N.y-R*N.scrollFactorY-L*N.originY;(U+k)*f+(Y+L)*m+y>_&&U*f+Y*m+y<P&&(U+k)*v+(Y+L)*x+E>S&&U*v+Y*x+E<b&&D.push(N)}else D.push(N)}return D},getWorldPoint:function(c,d,f){f===void 0&&(f=new h);var v=this.matrix.matrix,m=v[0],x=v[1],T=v[2],y=v[3],E=v[4],w=v[5],R=m*y-x*T;if(!R)return f.x=c,f.y=d,f;var C=y*(R=1/R),A=-x*R,S=-T*R,b=m*R,_=(T*w-y*E)*R,P=(x*E-m*w)*R,D=Math.cos(this.rotation),O=Math.sin(this.rotation),F=this.zoomX,N=this.zoomY,k=this.scrollX,L=this.scrollY,U=c+(k*D-L*O)*F,Y=d+(k*O+L*D)*N;return f.x=U*C+Y*S+_,f.y=U*A+Y*b+P,f},ignore:function(c){var d=this.id;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var v=c[f];Array.isArray(v)?this.ignore(v):v.isParent?this.ignore(v.getChildren()):v.cameraFilter|=d}return this},preRender:function(){this.renderList.length=0;var c=this.width,d=this.height,f=.5*c,v=.5*d,m=this.zoomX,x=this.zoomY,T=this.matrix,y=c*this.originX,E=d*this.originY,w=this.scrollX,R=this.scrollY;this.useBounds&&(w=this.clampX(w),R=this.clampY(R)),this.roundPixels&&(y=Math.round(y),E=Math.round(E)),this.scrollX=w,this.scrollY=R;var C=w+f,A=R+v;this.midPoint.set(C,A);var S=c/m,b=d/x;this.worldView.setTo(C-S/2,A-b/2,S,b),T.applyITRS(this.x+y,this.y+E,this.rotation,m,x),T.translate(-y,-E)},clampX:function(c){var d=this._bounds,f=this.displayWidth,v=d.x+(f-this.width)/2,m=Math.max(v,v+d.width-f);return c<v?c=v:c>m&&(c=m),c},clampY:function(c){var d=this._bounds,f=this.displayHeight,v=d.y+(f-this.height)/2,m=Math.max(v,v+d.height-f);return c<v?c=v:c>m&&(c=m),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return c===void 0&&(c=0),this.rotation=l(c),this},setBackgroundColor:function(c){return c===void 0&&(c="rgba(0,0,0,0)"),this.backgroundColor=r(c),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(c,d,f,v,m){return m===void 0&&(m=!1),this._bounds.setTo(c,d,f,v),this.dirty=!0,this.useBounds=!0,m?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){c===void 0&&(c=new s);var d=this._bounds;return c.setTo(d.x,d.y,d.width,d.height),c},setName:function(c){return c===void 0&&(c=""),this.name=c,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=c;var d=c.sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(c,d){return d===void 0&&(d=c),this.scrollX=c,this.scrollY=d,this},setSize:function(c,d){return d===void 0&&(d=c),this.width=c,this.height=d,this},setViewport:function(c,d,f,v){return this.x=c,this.y=d,this.width=f,this.height=v,this},setZoom:function(c,d){return c===void 0&&(c=1),d===void 0&&(d=c),c===0&&(c=.001),d===0&&(d=.001),this.zoomX=c,this.zoomY=d,this},setMask:function(c,d){return d===void 0&&(d=!0),this.mask=c,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(c){return c===void 0&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},updateSystem:function(){if(this.scaleManager){var c=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,d=this.sceneManager;c&&!this._customViewport?d.customViewports++:!c&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=c}},destroy:function(){this.emit(t.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){this._scrollX=c,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(c){this._scrollY=c,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});g.exports=a},77146:function(g,p,i){var u=i(43929),e=i(39414),l=i(2543),o=i(69186),t=i(19506),s=i(49893),n=i(26088),r=i(3821),h=i(75380),a=i(17321),c=new o({Extends:u,Mixins:[t.Flip,t.Tint,t.Pipeline],initialize:function(d,f,v,m){u.call(this,d,f,v,m),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new s.Fade(this),this.flashEffect=new s.Flash(this),this.shakeEffect=new s.Shake(this),this.panEffect=new s.Pan(this),this.rotateToEffect=new s.RotateTo(this),this.zoomEffect=new s.Zoom(this),this.lerp=new a(1,1),this.followOffset=new a,this.deadzone=null,this._follow=null},setDeadzone:function(d,f){if(d===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=d,this.deadzone.height=f):this.deadzone=new h(0,0,d,f),this._follow){var v=this.width/2,m=this.height/2,x=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(x,T),this.scrollX=x-v,this.scrollY=T-m}e(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(d,f,v,m,x,T){return this.fadeEffect.start(!1,d,f,v,m,!0,x,T)},fadeOut:function(d,f,v,m,x,T){return this.fadeEffect.start(!0,d,f,v,m,!0,x,T)},fadeFrom:function(d,f,v,m,x,T,y){return this.fadeEffect.start(!1,d,f,v,m,x,T,y)},fade:function(d,f,v,m,x,T,y){return this.fadeEffect.start(!0,d,f,v,m,x,T,y)},flash:function(d,f,v,m,x,T,y){return this.flashEffect.start(d,f,v,m,x,T,y)},shake:function(d,f,v,m,x){return this.shakeEffect.start(d,f,v,m,x)},pan:function(d,f,v,m,x,T,y){return this.panEffect.start(d,f,v,m,x,T,y)},rotateTo:function(d,f,v,m,x,T,y){return this.rotateToEffect.start(d,f,v,m,x,T,y)},zoomTo:function(d,f,v,m,x,T){return this.zoomEffect.start(d,f,v,m,x,T)},preRender:function(){this.renderList.length=0;var d=this.width,f=this.height,v=.5*d,m=.5*f,x=this.zoom,T=this.matrix,y=d*this.originX,E=f*this.originY,w=this._follow,R=this.deadzone,C=this.scrollX,A=this.scrollY;R&&e(R,this.midPoint.x,this.midPoint.y);var S=!1;if(w&&!this.panEffect.isRunning){var b=w.x-this.followOffset.x,_=w.y-this.followOffset.y;R?(b<R.x?C=r(C,C-(R.x-b),this.lerp.x):b>R.right&&(C=r(C,C+(b-R.right),this.lerp.x)),_<R.y?A=r(A,A-(R.y-_),this.lerp.y):_>R.bottom&&(A=r(A,A+(_-R.bottom),this.lerp.y))):(C=r(C,b-y,this.lerp.x),A=r(A,_-E,this.lerp.y)),S=!0}this.useBounds&&(C=this.clampX(C),A=this.clampY(A)),this.roundPixels&&(y=Math.round(y),E=Math.round(E),C=Math.round(C),A=Math.round(A)),this.scrollX=C,this.scrollY=A;var P=C+v,D=A+m;this.midPoint.set(P,D);var O=d/x,F=f/x,N=P-O/2,k=D-F/2;this.roundPixels&&(N=Math.round(N),k=Math.round(k)),this.worldView.setTo(N,k,O,F),T.applyITRS(this.x+y,this.y+E,this.rotation,x,x),T.translate(-y,-E),this.shakeEffect.preRender(),S&&this.emit(n.FOLLOW_UPDATE,this,w)},setLerp:function(d,f){return d===void 0&&(d=1),f===void 0&&(f=d),this.lerp.set(d,f),this},setFollowOffset:function(d,f){return d===void 0&&(d=0),f===void 0&&(f=0),this.followOffset.set(d,f),this},startFollow:function(d,f,v,m,x,T){f===void 0&&(f=!1),v===void 0&&(v=1),m===void 0&&(m=v),x===void 0&&(x=0),T===void 0&&(T=x),this._follow=d,this.roundPixels=f,v=l(v,0,1),m=l(m,0,1),this.lerp.set(v,m),this.followOffset.set(x,T);var y=this.width/2,E=this.height/2,w=d.x-x,R=d.y-T;return this.midPoint.set(w,R),this.scrollX=w-y,this.scrollY=R-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,f){this.visible&&(this.rotateToEffect.update(d,f),this.panEffect.update(d,f),this.zoomEffect.update(d,f),this.shakeEffect.update(d,f),this.flashEffect.update(d,f),this.fadeEffect.update(d,f))},destroy:function(){this.resetFX(),u.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});g.exports=c},8226:function(g,p,i){var u=i(77146),e=i(69186),l=i(25738),o=i(46236),t=i(26813),s=i(48958),n=i(12063),r=new e({initialize:function(h){this.scene=h,this.systems=h.sys,this.roundPixels=h.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,h.sys.events.once(n.BOOT,this.boot,this),h.sys.events.on(n.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new u(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var a=this.systems.events;a.on(n.UPDATE,this.update,this),a.once(n.SHUTDOWN,this.shutdown,this)},add:function(h,a,c,d,f,v){h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),f===void 0&&(f=!1),v===void 0&&(v="");var m=new u(h,a,c,d);return m.setName(v),m.setScene(this.scene),m.setRoundPixels(this.roundPixels),m.id=this.getNextID(),this.cameras.push(m),f&&(this.main=m),m},addExisting:function(h,a){return a===void 0&&(a=!1),this.cameras.indexOf(h)===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),a&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,a=1,c=0;c<32;c++){for(var d=!1,f=0;f<h.length;f++){var v=h[f];v&&v.id===a&&(d=!0)}if(!d)return a;a<<=1}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var a=0,c=this.cameras,d=0;d<c.length;d++){var f=c[d];(!h||h&&f.visible)&&a++}return a},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var a=this.scene.sys.scale.width,c=this.scene.sys.scale.height,d=0;d<h.length;d++){var f=h[d],v=l(f,"x",0),m=l(f,"y",0),x=l(f,"width",a),T=l(f,"height",c),y=this.add(v,m,x,T);y.name=l(f,"name",""),y.zoom=l(f,"zoom",1),y.rotation=l(f,"rotation",0),y.scrollX=l(f,"scrollX",0),y.scrollY=l(f,"scrollY",0),y.roundPixels=l(f,"roundPixels",!1),y.visible=l(f,"visible",!0);var E=l(f,"backgroundColor",!1);E&&y.setBackgroundColor(E);var w=l(f,"bounds",null);if(w){var R=l(w,"x",0),C=l(w,"y",0),A=l(w,"width",a),S=l(w,"height",c);y.setBounds(R,C,A,S)}}return this},getCamera:function(h){for(var a=this.cameras,c=0;c<a.length;c++)if(a[c].name===h)return a[c];return null},getCamerasBelowPointer:function(h){for(var a=this.cameras,c=h.x,d=h.y,f=[],v=0;v<a.length;v++){var m=a[v];m.visible&&m.inputEnabled&&t(m,c,d)&&f.unshift(m)}return f},remove:function(h,a){a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var c=0,d=this.cameras,f=0;f<h.length;f++){var v=d.indexOf(h[f]);v!==-1&&(a?d[v].destroy():d[v].renderList=[],d.splice(v,1),c++)}return!this.main&&d[0]&&(this.main=d[0]),c},render:function(h,a){for(var c=this.scene,d=this.cameras,f=0;f<this.cameras.length;f++){var v=d[f];if(v.visible&&v.alpha>0){v.preRender();var m=this.getVisibleChildren(a.getChildren(),v);h.render(c,m,v)}}},getVisibleChildren:function(h,a){for(var c=[],d=0;d<h.length;d++){var f=h[d];f.willRender(a)&&c.push(f)}return c},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,a){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(h,a)},onResize:function(h,a,c,d,f){for(var v=0;v<this.cameras.length;v++){var m=this.cameras[v];m._x===0&&m._y===0&&m._width===d&&m._height===f&&m.setSize(a.width,a.height)}},resize:function(h,a){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(h,a)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var a=this.systems.events;a.off(n.UPDATE,this.update,this),a.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",r,"cameras"),g.exports=r},10982:function(g,p,i){var u=i(2543),e=i(69186),l=i(26088),o=new e({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,s,n,r,h,a,c,d){if(t===void 0&&(t=!0),s===void 0&&(s=1e3),n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),!a&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=t,this.progress=0,this.red=n,this.green=r,this.blue=h,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d;var f=t?l.FADE_OUT_START:l.FADE_IN_START;return this.camera.emit(f,this.camera,this,s,n,r,h),this.camera},update:function(t,s){this.isRunning&&(this._elapsed+=s,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(t,s){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,r=this.red/255,h=this.green/255,a=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,s(a,h,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?l.FADE_OUT_COMPLETE:l.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=o},28980:function(g,p,i){var u=i(2543),e=i(69186),l=i(26088),o=new e({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,s,n,r,h,a,c){return t===void 0&&(t=250),s===void 0&&(s=255),n===void 0&&(n=255),r===void 0&&(r=255),h===void 0&&(h=!1),a===void 0&&(a=null),c===void 0&&(c=this.camera.scene),!h&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=s,this.green=n,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(l.FLASH_START,this.camera,this,t,s,n,r)),this.camera},update:function(t,s){this.isRunning&&(this._elapsed+=s,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var s=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(t,s){if(!this.isRunning)return!1;var n=this.camera,r=this.red/255,h=this.green/255,a=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,s(a,h,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=o},66033:function(g,p,i){var u=i(2543),e=i(69186),l=i(45044),o=i(26088),t=i(17321),s=new e({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=new t,this.current=new t,this.destination=new t,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,r,h,a,c,d,f){h===void 0&&(h=1e3),a===void 0&&(a=l.Linear),c===void 0&&(c=!1),d===void 0&&(d=null),f===void 0&&(f=this.camera.scene);var v=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(v.scrollX,v.scrollY),this.destination.set(n,r),v.getScroll(n,r,this.current),typeof a=="string"&&l.hasOwnProperty(a)?this.ease=l[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(o.PAN_START,this.camera,this,h,n,r)),v},update:function(n,r){if(this.isRunning){this._elapsed+=r;var h=u(this._elapsed/this.duration,0,1);this.progress=h;var a=this.camera;if(this._elapsed<this.duration){var c=this.ease(h);a.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*c,f=this.source.y+(this.current.y-this.source.y)*c;a.setScroll(d,f),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,h,d,f)}else a.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,h,a.scrollX,a.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=s},9783:function(g,p,i){var u=i(2543),e=i(69186),l=i(26088),o=i(45044),t=new e({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,n,r,h,a,c,d){r===void 0&&(r=1e3),h===void 0&&(h=o.Linear),a===void 0&&(a=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var f=s;s<0?(f=-1*s,this.clockwise=!1):this.clockwise=!0;var v=360*Math.PI/180;f-=Math.floor(f/v)*v;var m=this.camera;if(!a&&this.isRunning)return m;if(this.isRunning=!0,this.duration=r,this.progress=0,this.source=m.rotation,this.destination=f,typeof h=="string"&&o.hasOwnProperty(h)?this.ease=o[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.shortestPath){var x,T;(x=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+v)-this.source)<(T=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+v)-this.destination)?this.clockwise=!0:x>T&&(this.clockwise=!1)}return this.camera.emit(l.ROTATE_START,this.camera,this,r,f),m},update:function(s,n){if(this.isRunning){this._elapsed+=n;var r=u(this._elapsed/this.duration,0,1);this.progress=r;var h=this.camera;if(this._elapsed<this.duration){var a=this.ease(r);this.current=h.rotation;var c,d=360*Math.PI/180,f=this.destination,v=this.current;this.clockwise===!1&&(f=this.current,v=this.destination),c=f>=v?Math.abs(f-v):Math.abs(f+d)-v;var m;m=this.clockwise?h.rotation+c*a:h.rotation-c*a,h.rotation=m,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,r,m)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,r,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=t},68006:function(g,p,i){var u=i(2543),e=i(69186),l=i(26088),o=i(17321),t=new e({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,n,r,h,a){return s===void 0&&(s=100),n===void 0&&(n=.05),r===void 0&&(r=!1),h===void 0&&(h=null),a===void 0&&(a=this.camera.scene),!r&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=a,this.camera.emit(l.SHAKE_START,this.camera,this,s,n)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,n){if(this.isRunning)if(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var r=this.intensity,h=this.camera.width,a=this.camera.height,c=this.camera.zoom;this._offsetX=(Math.random()*r.x*h*2-r.x*h)*c,this._offsetY=(Math.random()*r.y*a*2-r.y*a)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});g.exports=t},36052:function(g,p,i){var u=i(2543),e=i(69186),l=i(45044),o=i(26088),t=new e({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,n,r,h,a,c){n===void 0&&(n=1e3),r===void 0&&(r=l.Linear),h===void 0&&(h=!1),a===void 0&&(a=null),c===void 0&&(c=this.camera.scene);var d=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=d.zoom,this.destination=s,typeof r=="string"&&l.hasOwnProperty(r)?this.ease=l[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(o.ZOOM_START,this.camera,this,n,s)),d},update:function(s,n){this.isRunning&&(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=t},49893:function(g,p,i){g.exports={Fade:i(10982),Flash:i(28980),Pan:i(66033),Shake:i(68006),RotateTo:i(9783),Zoom:i(36052)}},97451:function(g){g.exports="cameradestroy"},67998:function(g){g.exports="camerafadeincomplete"},19794:function(g){g.exports="camerafadeinstart"},70884:function(g){g.exports="camerafadeoutcomplete"},79642:function(g){g.exports="camerafadeoutstart"},56307:function(g){g.exports="cameraflashcomplete"},36063:function(g){g.exports="cameraflashstart"},96725:function(g){g.exports="followupdate"},45957:function(g){g.exports="camerapancomplete"},84011:function(g){g.exports="camerapanstart"},21180:function(g){g.exports="postrender"},54573:function(g){g.exports="prerender"},19207:function(g){g.exports="camerarotatecomplete"},51323:function(g){g.exports="camerarotatestart"},89100:function(g){g.exports="camerashakecomplete"},85444:function(g){g.exports="camerashakestart"},23984:function(g){g.exports="camerazoomcomplete"},88715:function(g){g.exports="camerazoomstart"},26088:function(g,p,i){g.exports={DESTROY:i(97451),FADE_IN_COMPLETE:i(67998),FADE_IN_START:i(19794),FADE_OUT_COMPLETE:i(70884),FADE_OUT_START:i(79642),FLASH_COMPLETE:i(56307),FLASH_START:i(36063),FOLLOW_UPDATE:i(96725),PAN_COMPLETE:i(45957),PAN_START:i(84011),POST_RENDER:i(21180),PRE_RENDER:i(54573),ROTATE_COMPLETE:i(19207),ROTATE_START:i(51323),SHAKE_COMPLETE:i(89100),SHAKE_START:i(85444),ZOOM_COMPLETE:i(23984),ZOOM_START:i(88715)}},79859:function(g,p,i){g.exports={Camera:i(77146),BaseCamera:i(43929),CameraManager:i(8226),Effects:i(49893),Events:i(26088)}},31975:function(g,p,i){var u=i(69186),e=i(76076),l=new u({initialize:function(o){this.camera=e(o,"camera",null),this.left=e(o,"left",null),this.right=e(o,"right",null),this.up=e(o,"up",null),this.down=e(o,"down",null),this.zoomIn=e(o,"zoomIn",null),this.zoomOut=e(o,"zoomOut",null),this.zoomSpeed=e(o,"zoomSpeed",.01),this.minZoom=e(o,"minZoom",.001),this.maxZoom=e(o,"maxZoom",1e3),this.speedX=0,this.speedY=0;var t=e(o,"speed",null);typeof t=="number"?(this.speedX=t,this.speedY=t):(this.speedX=e(o,"speed.x",0),this.speedY=e(o,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var t=this.camera;this.up&&this.up.isDown?t.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(t.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?t.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(t.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(t.zoom-=this.zoomSpeed,t.zoom<this.minZoom&&(t.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(t.zoom+=this.zoomSpeed,t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=l},92250:function(g,p,i){var u=i(69186),e=i(76076),l=new u({initialize:function(o){this.camera=e(o,"camera",null),this.left=e(o,"left",null),this.right=e(o,"right",null),this.up=e(o,"up",null),this.down=e(o,"down",null),this.zoomIn=e(o,"zoomIn",null),this.zoomOut=e(o,"zoomOut",null),this.zoomSpeed=e(o,"zoomSpeed",.01),this.minZoom=e(o,"minZoom",.001),this.maxZoom=e(o,"maxZoom",1e3),this.accelX=0,this.accelY=0;var t=e(o,"acceleration",null);typeof t=="number"?(this.accelX=t,this.accelY=t):(this.accelX=e(o,"acceleration.x",0),this.accelY=e(o,"acceleration.y",0)),this.dragX=0,this.dragY=0;var s=e(o,"drag",null);typeof s=="number"?(this.dragX=s,this.dragY=s):(this.dragX=e(o,"drag.x",0),this.dragY=e(o,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var n=e(o,"maxSpeed",null);typeof n=="number"?(this.maxSpeedX=n,this.maxSpeedY=n):(this.maxSpeedX=e(o,"maxSpeed.x",0),this.maxSpeedY=e(o,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var t=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(t.scrollX-=this._speedX*o|0),this._speedY!==0&&(t.scrollY-=this._speedY*o|0),this._zoom!==0&&(t.zoom+=this._zoom,t.zoom<this.minZoom?t.zoom=this.minZoom:t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=l},78241:function(g,p,i){g.exports={FixedKeyControl:i(31975),SmoothedKeyControl:i(92250)}},75527:function(g,p,i){g.exports={Controls:i(78241),Scene2D:i(79859)}},11318:function(g,p,i){var u={VERSION:"3.55.2",BlendModes:i(87626),ScaleModes:i(29718),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};g.exports=u},45279:function(g,p,i){var u=i(69186),e=i(11318),l=i(47345),o=i(25738),t=i(76076),s=i(53013),n=i(68533),r=i(45733),h=i(32122),a=i(58909),c=new u({initialize:function(d){d===void 0&&(d={}),this.width=t(d,"width",1024),this.height=t(d,"height",768),this.zoom=t(d,"zoom",1),this.parent=t(d,"parent",void 0),this.scaleMode=t(d,"scaleMode",0),this.expandParent=t(d,"expandParent",!0),this.autoRound=t(d,"autoRound",!1),this.autoCenter=t(d,"autoCenter",0),this.resizeInterval=t(d,"resizeInterval",500),this.fullscreenTarget=t(d,"fullscreenTarget",null),this.minWidth=t(d,"minWidth",0),this.maxWidth=t(d,"maxWidth",0),this.minHeight=t(d,"minHeight",0),this.maxHeight=t(d,"maxHeight",0);var f=t(d,"scale",null);f&&(this.width=t(f,"width",this.width),this.height=t(f,"height",this.height),this.zoom=t(f,"zoom",this.zoom),this.parent=t(f,"parent",this.parent),this.scaleMode=t(f,"mode",this.scaleMode),this.expandParent=t(f,"expandParent",this.expandParent),this.autoRound=t(f,"autoRound",this.autoRound),this.autoCenter=t(f,"autoCenter",this.autoCenter),this.resizeInterval=t(f,"resizeInterval",this.resizeInterval),this.fullscreenTarget=t(f,"fullscreenTarget",this.fullscreenTarget),this.minWidth=t(f,"min.width",this.minWidth),this.maxWidth=t(f,"max.width",this.maxWidth),this.minHeight=t(f,"min.height",this.minHeight),this.maxHeight=t(f,"max.height",this.maxHeight)),this.renderType=t(d,"type",e.AUTO),this.canvas=t(d,"canvas",null),this.context=t(d,"context",null),this.canvasStyle=t(d,"canvasStyle",null),this.customEnvironment=t(d,"customEnvironment",!1),this.sceneConfig=t(d,"scene",null),this.seed=t(d,"seed",[(Date.now()*Math.random()).toString()]),n.RND=new n.RandomDataGenerator(this.seed),this.gameTitle=t(d,"title",""),this.gameURL=t(d,"url","https://phaser.io"),this.gameVersion=t(d,"version",""),this.autoFocus=t(d,"autoFocus",!0),this.domCreateContainer=t(d,"dom.createContainer",!1),this.domBehindCanvas=t(d,"dom.behindCanvas",!1),this.domPointerEvents=t(d,"dom.pointerEvents","none"),this.inputKeyboard=t(d,"input.keyboard",!0),this.inputKeyboardEventTarget=t(d,"input.keyboard.target",window),this.inputKeyboardCapture=t(d,"input.keyboard.capture",[]),this.inputMouse=t(d,"input.mouse",!0),this.inputMouseEventTarget=t(d,"input.mouse.target",null),this.inputMousePreventDefaultDown=t(d,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=t(d,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=t(d,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=t(d,"input.mouse.preventDefaultWheel",!0),this.inputTouch=t(d,"input.touch",l.input.touch),this.inputTouchEventTarget=t(d,"input.touch.target",null),this.inputTouchCapture=t(d,"input.touch.capture",!0),this.inputActivePointers=t(d,"input.activePointers",1),this.inputSmoothFactor=t(d,"input.smoothFactor",0),this.inputWindowEvents=t(d,"input.windowEvents",!0),this.inputGamepad=t(d,"input.gamepad",!1),this.inputGamepadEventTarget=t(d,"input.gamepad.target",window),this.disableContextMenu=t(d,"disableContextMenu",!1),this.audio=t(d,"audio",{}),this.hideBanner=t(d,"banner",null)===!1,this.hidePhaser=t(d,"banner.hidePhaser",!1),this.bannerTextColor=t(d,"banner.text","#ffffff"),this.bannerBackgroundColor=t(d,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=t(d,"fps",null);var v=t(d,"render",d);this.pipeline=t(v,"pipeline",null),this.antialias=t(v,"antialias",!0),this.antialiasGL=t(v,"antialiasGL",!0),this.mipmapFilter=t(v,"mipmapFilter","LINEAR"),this.desynchronized=t(v,"desynchronized",!1),this.roundPixels=t(v,"roundPixels",!1),this.pixelArt=t(v,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=t(v,"transparent",!1),this.clearBeforeRender=t(v,"clearBeforeRender",!0),this.preserveDrawingBuffer=t(v,"preserveDrawingBuffer",!1),this.premultipliedAlpha=t(v,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=t(v,"failIfMajorPerformanceCaveat",!1),this.powerPreference=t(v,"powerPreference","default"),this.batchSize=t(v,"batchSize",4096),this.maxTextures=t(v,"maxTextures",-1),this.maxLights=t(v,"maxLights",10);var m=t(d,"backgroundColor",0);this.backgroundColor=a(m),this.transparent&&(this.backgroundColor=a(0),this.backgroundColor.alpha=0),this.preBoot=t(d,"callbacks.preBoot",r),this.postBoot=t(d,"callbacks.postBoot",r),this.physics=t(d,"physics",{}),this.defaultPhysicsSystem=t(this.physics,"default",!1),this.loaderBaseURL=t(d,"loader.baseURL",""),this.loaderPath=t(d,"loader.path","");var x=l.os.android?6:32;this.loaderMaxParallelDownloads=t(d,"loader.maxParallelDownloads",x),this.loaderCrossOrigin=t(d,"loader.crossOrigin",void 0),this.loaderResponseType=t(d,"loader.responseType",""),this.loaderAsync=t(d,"loader.async",!0),this.loaderUser=t(d,"loader.user",""),this.loaderPassword=t(d,"loader.password",""),this.loaderTimeout=t(d,"loader.timeout",0),this.loaderWithCredentials=t(d,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var T=t(d,"plugins",null),y=h.DefaultScene;T&&(Array.isArray(T)?this.defaultPlugins=T:s(T)&&(this.installGlobalPlugins=o(T,"global",[]),this.installScenePlugins=o(T,"scene",[]),Array.isArray(T.default)?y=T.default:Array.isArray(T.defaultMerge)&&(y=y.concat(T.defaultMerge)))),this.defaultPlugins=y;var E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=t(d,"images.default",E+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=t(d,"images.missing",E+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=t(d,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=e.WEBGL:window.FORCE_CANVAS&&(this.renderType=e.CANVAS))}});g.exports=c},68611:function(g,p,i){var u=i(42485),e=i(55579),l=i(11318),o=i(61052);g.exports=function(t){var s=t.config;if((s.customEnvironment||s.canvas)&&s.renderType===l.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==l.HEADLESS)if(s.renderType===l.CANVAS||s.renderType!==l.CANVAS&&!o.webGL){if(!o.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");s.renderType=l.CANVAS}else s.renderType=l.WEBGL;s.antialias||e.disableSmoothing();var n,r,h=t.scale.baseSize,a=h.width,c=h.height;s.canvas?(t.canvas=s.canvas,t.canvas.width=a,t.canvas.height=c):t.canvas=e.create(t,a,c,s.renderType),s.canvasStyle&&(t.canvas.style=s.canvasStyle),s.antialias||u.setCrisp(t.canvas),s.renderType!==l.HEADLESS&&(n=i(65125),r=i(58410),s.renderType===l.WEBGL?t.renderer=new r(t):(t.renderer=new n(t),t.context=t.renderer.gameContext))}},50403:function(g,p,i){var u=i(11318);g.exports=function(e){var l=e.config;if(!l.hideBanner){var o="WebGL";l.renderType===u.CANVAS?o="Canvas":l.renderType===u.HEADLESS&&(o="Headless");var t,s=l.audio,n=e.device.audio;if(t=n.webAudio&&!s.disableWebAudio?"Web Audio":s.noAudio||!n.webAudio&&!n.audioData?"No Audio":"HTML5 Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+u.VERSION+" / https://phaser.io");else{var r,h="",a=[h];Array.isArray(l.bannerBackgroundColor)?(l.bannerBackgroundColor.forEach(function(c){h=h.concat("%c "),a.push("background: "+c),r=c}),a[a.length-1]="color: "+l.bannerTextColor+"; background: "+r):(h=h.concat("%c "),a.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor)),a.push("background: transparent"),l.gameTitle&&(h=h.concat(l.gameTitle),l.gameVersion&&(h=h.concat(" v"+l.gameVersion)),l.hidePhaser||(h=h.concat(" / "))),l.hidePhaser||(h=h.concat("Phaser v"+u.VERSION+"-FB ("+o+" | "+t+")")),h=h.concat(" %c "+l.gameURL),a[0]=h,console.log.apply(console,a)}}}},61003:function(g,p,i){var u=i(21778),e=i(59460),l=i(95937),o=i(55579),t=i(69186),s=i(45279),n=i(3804),r=i(68611),h=i(92941),a=i(50403),c=i(47345),d=i(8277),f=i(26729),v=i(24496),m=i(79976),x=i(46236),T=i(87037),y=i(70360),E=i(26236),w=i(61632),R=i(64138),C=i(82140),A=i(41640),S=i(72875),b=i(54075),_=new t({initialize:function(P){this.config=new s(P),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new e(this),this.textures=new R(this),this.cache=new l(this),this.registry=new h(this),this.input=new m(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=c,this.scale=new y(this,this.config),this.sound=null,this.sound=S.create(this),this.loop=new C(this,this.config.fps),this.plugins=new T(this,this.config),this.facebook=new b(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){x.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),r(this),n(this),a(this),u(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(v.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(v.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var P=this.events;P.on(v.HIDDEN,this.onHidden,this),P.on(v.VISIBLE,this.onVisible,this),P.on(v.BLUR,this.onBlur,this),P.on(v.FOCUS,this.onFocus,this)},step:function(P,D){if(this.pendingDestroy)return this.runDestroy();var O=this.events;O.emit(v.PRE_STEP,P,D),O.emit(v.STEP,P,D),this.scene.update(P,D),O.emit(v.POST_STEP,P,D);var F=this.renderer;F.preRender(),O.emit(v.PRE_RENDER,F,P,D),this.scene.render(F),F.postRender(),O.emit(v.POST_RENDER,F,P,D)},headlessStep:function(P,D){if(this.pendingDestroy)return this.runDestroy();var O=this.events;O.emit(v.PRE_STEP,P,D),O.emit(v.STEP,P,D),this.scene.update(P,D),O.emit(v.POST_STEP,P,D),O.emit(v.PRE_RENDER),O.emit(v.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(v.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(v.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(P,D){D===void 0&&(D=!1),this.pendingDestroy=!0,this.removeCanvas=P,this.noReturn=D},runDestroy:function(){this.scene.destroy(),this.events.emit(v.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});g.exports=_},82140:function(g,p,i){var u=i(69186),e=i(76076),l=i(45733),o=i(948),t=new u({initialize:function(s,n){this.game=s,this.raf=new o,this.started=!1,this.running=!1,this.minFps=e(n,"min",5),this.targetFps=e(n,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=l,this.forceSetTimeOut=e(n,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=e(n,"deltaHistory",10),this.panicMax=e(n,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=e(n,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var s=window.performance.now();this.now=s;var n=s-this.lastTime;n<0&&(n=0),this.rawDelta=n;var r=this.deltaIndex,h=this.deltaHistory,a=this.deltaSmoothingMax,c=n,d=n;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,c=Math.min(c,this._target)),c>this._min&&(c=h[r],c=Math.min(c,this._min)),h[r]=c,this.deltaIndex++,this.deltaIndex>a&&(this.deltaIndex=0),d=0;for(var f=0;f<a;f++)d+=h[f];d/=a}this.delta=d,this.time+=this.rawDelta,s>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0),this.framesThisSecond++;var v=d/this._target;this.callback(s,d,v),this.lastTime=s,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){this.running||(s&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=l,this.raf=null,this.game=null}});g.exports=t},41640:function(g,p,i){var u=i(24496);g.exports=function(e){var l,o=e.events;document.hidden!==void 0?l="visibilitychange":["webkit","moz","ms"].forEach(function(t){document[t+"Hidden"]!==void 0&&(document.hidden=function(){return document[t+"Hidden"]},l=t+"visibilitychange")}),l&&document.addEventListener(l,function(t){document.hidden||t.type==="pause"?o.emit(u.HIDDEN):o.emit(u.VISIBLE)},!1),window.onblur=function(){o.emit(u.BLUR)},window.onfocus=function(){o.emit(u.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()}},8600:function(g){g.exports="blur"},32055:function(g){g.exports="boot"},91696:function(g){g.exports="contextlost"},90358:function(g){g.exports="contextrestored"},89703:function(g){g.exports="destroy"},74873:function(g){g.exports="focus"},61944:function(g){g.exports="hidden"},66651:function(g){g.exports="pause"},51739:function(g){g.exports="postrender"},44031:function(g){g.exports="poststep"},63372:function(g){g.exports="prerender"},25984:function(g){g.exports="prestep"},18010:function(g){g.exports="ready"},82086:function(g){g.exports="resume"},34779:function(g){g.exports="step"},16883:function(g){g.exports="visible"},24496:function(g,p,i){g.exports={BLUR:i(8600),BOOT:i(32055),CONTEXT_LOST:i(91696),CONTEXT_RESTORED:i(90358),DESTROY:i(89703),FOCUS:i(74873),HIDDEN:i(61944),PAUSE:i(66651),POST_RENDER:i(51739),POST_STEP:i(44031),PRE_RENDER:i(63372),PRE_STEP:i(25984),READY:i(18010),RESUME:i(82086),STEP:i(34779),VISIBLE:i(16883)}},91004:function(g,p,i){g.exports={Config:i(45279),CreateRenderer:i(68611),DebugHeader:i(50403),Events:i(24496),TimeStep:i(82140),VisibilityHandler:i(41640)}},48819:function(g,p,i){var u=i(99489),e=i(55579),l=i(76076);g.exports=function(o){var t=l(o,"data",[]),s=l(o,"canvas",null),n=l(o,"palette",u),r=l(o,"pixelWidth",1),h=l(o,"pixelHeight",r),a=l(o,"resizeCanvas",!0),c=l(o,"clearCanvas",!0),d=l(o,"preRender",null),f=l(o,"postRender",null),v=Math.floor(Math.abs(t[0].length*r)),m=Math.floor(Math.abs(t.length*h));s||(s=e.create2D(this,v,m),a=!1,c=!1),a&&(s.width=v,s.height=m);var x=s.getContext("2d");c&&x.clearRect(0,0,v,m),d&&d(s,x);for(var T=0;T<t.length;T++)for(var y=t[T],E=0;E<y.length;E++){var w=y[E];w!=="."&&w!==" "&&(x.fillStyle=n[w],x.fillRect(E*r,T*h,r,h))}return f&&f(s,x),s}},99489:function(g){g.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},15327:function(g,p,i){var u=i(69186),e=i(70183),l=i(23730),o=i(17321),t=new u({Extends:l,initialize:function(s,n,r,h){l.call(this,"CubicBezierCurve"),Array.isArray(s)&&(h=new o(s[6],s[7]),r=new o(s[4],s[5]),n=new o(s[2],s[3]),s=new o(s[0],s[1])),this.p0=s,this.p1=n,this.p2=r,this.p3=h},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new o);var r=this.p0,h=this.p1,a=this.p2,c=this.p3;return n.set(e(s,r.x,h.x,a.x,c.x),e(s,r.y,h.y,a.y,c.y))},draw:function(s,n){n===void 0&&(n=32);var r=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var h=1;h<r.length;h++)s.lineTo(r[h].x,r[h].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});t.fromJSON=function(s){var n=s.points,r=new o(n[0],n[1]),h=new o(n[2],n[3]),a=new o(n[4],n[5]),c=new o(n[6],n[7]);return new t(r,h,a,c)},g.exports=t},23730:function(g,p,i){var u=i(69186),e=i(79803),l=i(75380),o=i(17321),t=new u({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(s,n){return n===void 0&&(n=32),s.strokePoints(this.getPoints(n))},getBounds:function(s,n){s||(s=new l),n===void 0&&(n=16);var r=this.getLength();n>r&&(n=r/2);var h=Math.max(1,Math.round(r/n));return e(this.getSpacedPoints(h),s)},getDistancePoints:function(s){var n=this.getLength(),r=Math.max(1,n/s);return this.getSpacedPoints(r)},getEndPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n,r=[],h=this.getPoint(0,this._tmpVec2A),a=0;r.push(0);for(var c=1;c<=s;c++)a+=(n=this.getPoint(c/s,this._tmpVec2B)).distance(h),r.push(a),h.copy(n);return this.cacheArcLengths=r,r},getPointAt:function(s,n){var r=this.getUtoTmapping(s);return this.getPoint(r,n)},getPoints:function(s,n,r){r===void 0&&(r=[]),s||(s=n?this.getLength()/n:this.defaultDivisions);for(var h=0;h<=s;h++)r.push(this.getPoint(h/s));return r},getRandomPoint:function(s){return s===void 0&&(s=new o),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,n,r){r===void 0&&(r=[]),s||(s=n?this.getLength()/n:this.defaultDivisions);for(var h=0;h<=s;h++){var a=this.getUtoTmapping(h/s,null,s);r.push(this.getPoint(a))}return r},getStartPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(0,s)},getTangent:function(s,n){n===void 0&&(n=new o);var r=1e-4,h=s-r,a=s+r;return h<0&&(h=0),a>1&&(a=1),this.getPoint(h,this._tmpVec2A),this.getPoint(a,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,n){var r=this.getUtoTmapping(s);return this.getTangent(r,n)},getTFromDistance:function(s,n){return s<=0?0:this.getUtoTmapping(0,s,n)},getUtoTmapping:function(s,n,r){var h,a=this.getLengths(r),c=0,d=a.length;h=n?Math.min(n,a[d-1]):s*a[d-1];for(var f,v=0,m=d-1;v<=m;)if((f=a[c=Math.floor(v+(m-v)/2)]-h)<0)v=c+1;else{if(!(f>0)){m=c;break}m=c-1}if(a[c=m]===h)return c/(d-1);var x=a[c];return(c+(h-x)/(a[c+1]-x))/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});g.exports=t},36811:function(g,p,i){var u=i(69186),e=i(23730),l=i(23407),o=i(76076),t=i(33642),s=i(17321),n=new u({Extends:e,initialize:function(r,h,a,c,d,f,v,m){if(typeof r=="object"){var x=r;r=o(x,"x",0),h=o(x,"y",0),a=o(x,"xRadius",0),c=o(x,"yRadius",a),d=o(x,"startAngle",0),f=o(x,"endAngle",360),v=o(x,"clockwise",!1),m=o(x,"rotation",0)}else c===void 0&&(c=a),d===void 0&&(d=0),f===void 0&&(f=360),v===void 0&&(v=!1),m===void 0&&(m=0);e.call(this,"EllipseCurve"),this.p0=new s(r,h),this._xRadius=a,this._yRadius=c,this._startAngle=l(d),this._endAngle=l(f),this._clockwise=v,this._rotation=l(m)},getStartPoint:function(r){return r===void 0&&(r=new s),this.getPoint(0,r)},getResolution:function(r){return 2*r},getPoint:function(r,h){h===void 0&&(h=new s);for(var a=2*Math.PI,c=this._endAngle-this._startAngle,d=Math.abs(c)<Number.EPSILON;c<0;)c+=a;for(;c>a;)c-=a;c<Number.EPSILON&&(c=d?0:a),this._clockwise&&!d&&(c===a?c=-a:c-=a);var f=this._startAngle+r*c,v=this.p0.x+this._xRadius*Math.cos(f),m=this.p0.y+this._yRadius*Math.sin(f);if(this._rotation!==0){var x=Math.cos(this._rotation),T=Math.sin(this._rotation),y=v-this.p0.x,E=m-this.p0.y;v=y*x-E*T+this.p0.x,m=y*T+E*x+this.p0.y}return h.set(v,m)},setXRadius:function(r){return this.xRadius=r,this},setYRadius:function(r){return this.yRadius=r,this},setWidth:function(r){return this.xRadius=r/2,this},setHeight:function(r){return this.yRadius=r/2,this},setStartAngle:function(r){return this.startAngle=r,this},setEndAngle:function(r){return this.endAngle=r,this},setClockwise:function(r){return this.clockwise=r,this},setRotation:function(r){return this.rotation=r,this},x:{get:function(){return this.p0.x},set:function(r){this.p0.x=r}},y:{get:function(){return this.p0.y},set:function(r){this.p0.y=r}},xRadius:{get:function(){return this._xRadius},set:function(r){this._xRadius=r}},yRadius:{get:function(){return this._yRadius},set:function(r){this._yRadius=r}},startAngle:{get:function(){return t(this._startAngle)},set:function(r){this._startAngle=l(r)}},endAngle:{get:function(){return t(this._endAngle)},set:function(r){this._endAngle=l(r)}},clockwise:{get:function(){return this._clockwise},set:function(r){this._clockwise=r}},angle:{get:function(){return t(this._rotation)},set:function(r){this._rotation=l(r)}},rotation:{get:function(){return this._rotation},set:function(r){this._rotation=r}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:t(this._startAngle),endAngle:t(this._endAngle),clockwise:this._clockwise,rotation:t(this._rotation)}}});n.fromJSON=function(r){return new n(r)},g.exports=n},55964:function(g,p,i){var u=i(69186),e=i(23730),l=i(79803),o=i(75380),t=i(17321),s=new u({Extends:e,initialize:function(n,r){e.call(this,"LineCurve"),Array.isArray(n)&&(r=new t(n[2],n[3]),n=new t(n[0],n[1])),this.p0=n,this.p1=r,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new o),l([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new t),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,r){return r===void 0&&(r=new t),n===1?r.copy(this.p1):(r.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),r)},getPointAt:function(n,r){return this.getPoint(n,r)},getTangent:function(n,r){return r===void 0&&(r=new t),r.copy(this.p1).subtract(this.p0).normalize(),r},getUtoTmapping:function(n,r,h){var a;if(r){var c=this.getLengths(h),d=c[c.length-1];a=Math.min(r,d)/d}else a=n;return a},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(n){var r=n.points,h=new t(r[0],r[1]),a=new t(r[2],r[3]);return new s(h,a)},g.exports=s},68680:function(g,p,i){var u=i(69186),e=i(23730),l=i(67372),o=i(17321),t=new u({Extends:e,initialize:function(s,n,r){e.call(this,"QuadraticBezier"),Array.isArray(s)&&(r=new o(s[4],s[5]),n=new o(s[2],s[3]),s=new o(s[0],s[1])),this.p0=s,this.p1=n,this.p2=r},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new o);var r=this.p0,h=this.p1,a=this.p2;return n.set(l(s,r.x,h.x,a.x),l(s,r.y,h.y,a.y))},draw:function(s,n){n===void 0&&(n=32);var r=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var h=1;h<r.length;h++)s.lineTo(r[h].x,r[h].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});t.fromJSON=function(s){var n=s.points,r=new o(n[0],n[1]),h=new o(n[2],n[3]),a=new o(n[4],n[5]);return new t(r,h,a)},g.exports=t},14575:function(g,p,i){var u=i(51929),e=i(69186),l=i(23730),o=i(17321),t=new e({Extends:l,initialize:function(s){s===void 0&&(s=[]),l.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(s){for(var n=0;n<s.length;n++){var r=new o;typeof s[n]=="number"?(r.x=s[n],r.y=s[n+1],n++):Array.isArray(s[n])?(r.x=s[n][0],r.y=s[n][1]):(r.x=s[n].x,r.y=s[n].y),this.points.push(r)}return this},addPoint:function(s,n){var r=new o(s,n);return this.points.push(r),r},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,n){n===void 0&&(n=new o);var r=this.points,h=(r.length-1)*s,a=Math.floor(h),c=h-a,d=r[a===0?a:a-1],f=r[a],v=r[a>r.length-2?r.length-1:a+1],m=r[a>r.length-3?r.length-1:a+2];return n.set(u(c,d.x,f.x,v.x,m.x),u(c,d.y,f.y,v.y,m.y))},toJSON:function(){for(var s=[],n=0;n<this.points.length;n++)s.push(this.points[n].x),s.push(this.points[n].y);return{type:this.type,points:s}}});t.fromJSON=function(s){return new t(s.points)},g.exports=t},994:function(g,p,i){g.exports={Path:i(96841),MoveTo:i(63565),CubicBezier:i(15327),Curve:i(23730),Ellipse:i(36811),Line:i(55964),QuadraticBezier:i(68680),Spline:i(14575)}},63565:function(g,p,i){var u=i(69186),e=i(17321),l=new u({initialize:function(o,t){this.active=!1,this.p0=new e(o,t)},getPoint:function(o,t){return t===void 0&&(t=new e),t.copy(this.p0)},getPointAt:function(o,t){return this.getPoint(o,t)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});g.exports=l},96841:function(g,p,i){var u=i(69186),e=i(15327),l=i(36811),o=i(66642),t=i(55964),s=i(63565),n=i(68680),r=i(75380),h=i(14575),a=i(17321),c=i(80925),d=new u({initialize:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new a,this._tmpVec2A=new a,this._tmpVec2B=new a,typeof f=="object"?this.fromJSON(f):this.startPoint.set(f,v)},add:function(f){return this.curves.push(f),this},circleTo:function(f,v,m){return v===void 0&&(v=!1),this.ellipseTo(f,f,0,360,v,m)},closePath:function(){var f=this.curves[0].getPoint(0),v=this.curves[this.curves.length-1].getPoint(1);return f.equals(v)||this.curves.push(new t(v,f)),this},cubicBezierTo:function(f,v,m,x,T,y){var E,w,R,C=this.getEndPoint();return f instanceof a?(E=f,w=v,R=m):(E=new a(m,x),w=new a(T,y),R=new a(f,v)),this.add(new e(C,E,w,R))},quadraticBezierTo:function(f,v,m,x){var T,y,E=this.getEndPoint();return f instanceof a?(T=f,y=v):(T=new a(m,x),y=new a(f,v)),this.add(new n(E,T,y))},draw:function(f,v){for(var m=0;m<this.curves.length;m++){var x=this.curves[m];x.active&&x.draw(f,v)}return f},ellipseTo:function(f,v,m,x,T,y){var E=new l(0,0,f,v,m,x,T,y),w=this.getEndPoint(this._tmpVec2A),R=E.getStartPoint(this._tmpVec2B);return w.subtract(R),E.x=w.x,E.y=w.y,this.add(E)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var v=0;v<f.curves.length;v++){var m=f.curves[v];switch(m.type){case"LineCurve":this.add(t.fromJSON(m));break;case"EllipseCurve":this.add(l.fromJSON(m));break;case"SplineCurve":this.add(h.fromJSON(m));break;case"CubicBezierCurve":this.add(e.fromJSON(m));break;case"QuadraticBezierCurve":this.add(n.fromJSON(m))}}return this},getBounds:function(f,v){f===void 0&&(f=new r),v===void 0&&(v=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var m=new r,x=c.MIN_SAFE_INTEGER,T=c.MIN_SAFE_INTEGER,y=0;y<this.curves.length;y++){var E=this.curves[y];E.active&&(E.getBounds(m,v),f.x=Math.min(f.x,m.x),f.y=Math.min(f.y,m.y),x=Math.max(x,m.right),T=Math.max(T,m.bottom))}return f.right=x,f.bottom=T,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],v=0,m=0;m<this.curves.length;m++)v+=this.curves[m].getLength(),f.push(v);return this.cacheLengths=f,f},getEndPoint:function(f){return f===void 0&&(f=new a),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,v){v===void 0&&(v=new a);for(var m=f*this.getLength(),x=this.getCurveLengths(),T=0;T<x.length;){if(x[T]>=m){var y=x[T]-m,E=this.curves[T],w=E.getLength(),R=w===0?0:1-y/w;return E.getPointAt(R,v)}T++}return null},getPoints:function(f){f===void 0&&(f=12);for(var v,m=[],x=0;x<this.curves.length;x++){var T=this.curves[x];if(T.active)for(var y=T.getResolution(f),E=T.getPoints(y),w=0;w<E.length;w++){var R=E[w];v&&v.equals(R)||(m.push(R),v=R)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(f){return f===void 0&&(f=new a),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){f===void 0&&(f=40);for(var v=[],m=0;m<=f;m++)v.push(this.getPoint(m/f));return this.autoClose&&v.push(v[0]),v},getStartPoint:function(f){return f===void 0&&(f=new a),f.copy(this.startPoint)},getTangent:function(f,v){v===void 0&&(v=new a);for(var m=f*this.getLength(),x=this.getCurveLengths(),T=0;T<x.length;){if(x[T]>=m){var y=x[T]-m,E=this.curves[T],w=E.getLength(),R=w===0?0:1-y/w;return E.getTangentAt(R,v)}T++}return null},lineTo:function(f,v){f instanceof a?this._tmpVec2B.copy(f):this._tmpVec2B.set(f,v);var m=this.getEndPoint(this._tmpVec2A);return this.add(new t([m.x,m.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new h(f))},moveTo:function(f,v){return f instanceof a?this.add(new s(f.x,f.y)):this.add(new s(f,v))},toJSON:function(){for(var f=[],v=0;v<this.curves.length;v++)f.push(this.curves[v].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(f,v){return new d(f,v)}),g.exports=d},92941:function(g,p,i){var u=i(69186),e=i(82461),l=new u({initialize:function(o,t){this.parent=o,this.events=t,t||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once(e.DESTROY,this.destroy,this)},get:function(o){var t=this.list;if(Array.isArray(o)){for(var s=[],n=0;n<o.length;n++)s.push(t[o[n]]);return s}return t[o]},getAll:function(){var o={};for(var t in this.list)this.list.hasOwnProperty(t)&&(o[t]=this.list[t]);return o},query:function(o){var t={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(o)&&(t[s]=this.list[s]);return t},set:function(o,t){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,t);for(var s in o)this.setValue(s,o[s]);return this},inc:function(o,t){if(this._frozen)return this;t===void 0&&(t=1);var s=this.get(o);return s===void 0&&(s=0),this.set(o,s+t),this},toggle:function(o){return this._frozen||this.set(o,!this.get(o)),this},setValue:function(o,t){if(this._frozen)return this;if(this.has(o))this.values[o]=t;else{var s=this,n=this.list,r=this.events,h=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return n[o]},set:function(a){if(!s._frozen){var c=n[o];n[o]=a,r.emit(e.CHANGE_DATA,h,o,a,c),r.emit(e.CHANGE_DATA_KEY+o,h,a,c)}}}),n[o]=t,r.emit(e.SET_DATA,h,o,t)}return this},each:function(o,t){for(var s=[this.parent,null,void 0],n=1;n<arguments.length;n++)s.push(arguments[n]);for(var r in this.list)s[1]=r,s[2]=this.list[r],o.apply(t,s);return this},merge:function(o,t){for(var s in t===void 0&&(t=!0),o)o.hasOwnProperty(s)&&(t||!t&&!this.has(s))&&this.setValue(s,o[s]);return this},remove:function(o){if(this._frozen)return this;if(!Array.isArray(o))return this.removeValue(o);for(var t=0;t<o.length;t++)this.removeValue(o[t]);return this},removeValue:function(o){if(this.has(o)){var t=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(e.REMOVE_DATA,this.parent,o,t)}return this},pop:function(o){var t=void 0;return!this._frozen&&this.has(o)&&(t=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(e.REMOVE_DATA,this.parent,o,t)),t},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(e.CHANGE_DATA),this.events.off(e.SET_DATA),this.events.off(e.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var t in this.list)this.list[t]!==void 0&&o++;return o}}});g.exports=l},19421:function(g,p,i){var u=i(69186),e=i(92941),l=i(46236),o=i(12063),t=new u({Extends:e,initialize:function(s){e.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){e.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});l.register("DataManagerPlugin",t,"data"),g.exports=t},13378:function(g){g.exports="changedata"},23922:function(g){g.exports="changedata-"},99928:function(g){g.exports="destroy"},74393:function(g){g.exports="removedata"},1582:function(g){g.exports="setdata"},82461:function(g,p,i){g.exports={CHANGE_DATA:i(13378),CHANGE_DATA_KEY:i(23922),DESTROY:i(99928),REMOVE_DATA:i(74393),SET_DATA:i(1582)}},97216:function(g,p,i){g.exports={DataManager:i(92941),DataManagerPlugin:i(19421),Events:i(82461)}},26926:function(g,p,i){var u=i(82153),e={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};g.exports=function(){if(typeof importScripts=="function")return e;e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var l=document.createElement("audio"),o=!!l.canPlayType;try{if(o&&(l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.ogg=!0),(l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||l.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.opus=!0),l.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.mp3=!0),l.canPlayType("audio/wav").replace(/^no$/,"")&&(e.wav=!0),(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.m4a=!0),l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.webm=!0),l.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(u.edge)e.dolby=!0;else if(u.safari&&u.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var t=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(t===10&&s>=11||t>10)&&(e.dolby=!0)}}}catch{}return e}()},82153:function(g,p,i){var u,e=i(89771),l={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};g.exports=(u=navigator.userAgent,/Edge\/\d+/.test(u)?l.edge=!0:/Chrome\/(\d+)/.test(u)&&!e.windowsPhone?(l.chrome=!0,l.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(u)?(l.firefox=!0,l.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(u)&&e.iOS?l.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(u)?(l.ie=!0,l.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(u)?l.opera=!0:/Safari/.test(u)&&!e.windowsPhone?l.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(l.ie=!0,l.trident=!0,l.tridentVersion=parseInt(RegExp.$1,10),l.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(l.silk=!0),l)},23404:function(g,p,i){var u,e,l,o=i(55579),t={supportInverseAlpha:!1,supportNewBlendModes:!1};g.exports=(typeof importScripts!="function"&&document!==void 0&&(t.supportNewBlendModes=(u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(l=new Image).onload=function(){var s=new Image;s.onload=function(){var n=o.create(s,6,1).getContext("2d");if(n.globalCompositeOperation="multiply",n.drawImage(l,0,0),n.drawImage(s,2,0),!n.getImageData(2,0,1,1))return!1;var r=n.getImageData(2,0,1,1).data;o.remove(s),t.supportNewBlendModes=r[0]===255&&r[1]===0&&r[2]===0},s.src=u+"/wCKxvRF"+e},l.src=u+"AP804Oa6"+e,!1),t.supportInverseAlpha=function(){var s=o.create(this,2,1).getContext("2d");s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var n=s.getImageData(0,0,1,1);if(n===null)return!1;s.putImageData(n,1,0);var r=s.getImageData(1,0,1,1);return r.data[0]===n.data[0]&&r.data[1]===n.data[1]&&r.data[2]===n.data[2]&&r.data[3]===n.data[3]}()),t)},61052:function(g,p,i){var u=i(89771),e=i(82153),l=i(55579),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};g.exports=function(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;var t,s,n,r=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{var h=l.createWebGL(this),a=h.getContext("webgl")||h.getContext("experimental-webgl"),c=l.create2D(this),d=c.getContext("2d").createImageData(1,1);return r=d.data instanceof Uint8ClampedArray,l.remove(h),l.remove(c),!!a}catch{return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,e.firefox&&e.firefoxVersion<21&&(o.getUserMedia=!1),!u.iOS&&(e.ie||e.firefox||e.chrome)&&(o.canvasBitBltShift=!0),(e.safari||e.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=(t=new ArrayBuffer(4),s=new Uint8Array(t),n=new Uint32Array(t),s[0]=161,s[1]=178,s[2]=195,s[3]=212,n[0]===3569595041||n[0]!==2712847316&&null)),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&r,o}()},30053:function(g){var p={available:!1,cancel:"",keyboard:!1,request:""};g.exports=function(){if(typeof importScripts=="function")return p;var i,u="Fullscreen",e="FullScreen",l=["request"+u,"request"+e,"webkitRequest"+u,"webkitRequest"+e,"msRequest"+u,"msRequest"+e,"mozRequest"+e,"mozRequest"+u];for(i=0;i<l.length;i++)if(document.documentElement[l[i]]){p.available=!0,p.request=l[i];break}var o=["cancel"+e,"exit"+u,"webkitCancel"+e,"webkitExit"+u,"msCancel"+e,"msExit"+u,"mozCancel"+e,"mozExit"+u];if(p.available){for(i=0;i<o.length;i++)if(document[o[i]]){p.cancel=o[i];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(p.keyboard=!0),Object.defineProperty(p,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),p}()},16252:function(g,p,i){var u=i(82153),e={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};g.exports=(typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(e.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(e.mspointer=!0),navigator.getGamepads&&(e.gamepads=!0),"onwheel"in window||u.ie&&"WheelEvent"in window?e.wheelEvent="wheel":"onmousewheel"in window?e.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(e.wheelEvent="DOMMouseScroll")),e)},89771:function(g){var p={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};g.exports=function(){if(typeof importScripts=="function")return p;var i=navigator.userAgent;/Windows/.test(i)?p.windows=!0:/Mac OS/.test(i)&&!/like Mac OS/.test(i)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(p.iOS=!0,p.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),p.iOSVersion=parseInt(RegExp.$1,10)):p.macOS=!0:/Android/.test(i)?p.android=!0:/Linux/.test(i)?p.linux=!0:/iP[ao]d|iPhone/i.test(i)?(p.iOS=!0,navigator.appVersion.match(/OS (\d+)/),p.iOSVersion=parseInt(RegExp.$1,10),p.iPhone=i.toLowerCase().indexOf("iphone")!==-1,p.iPad=i.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(i)||/\bKF[A-Z][A-Z]+/.test(i)||/Silk.*Mobile Safari/.test(i)?p.kindle=!0:/CrOS/.test(i)&&(p.chromeOS=!0),(/Windows Phone/i.test(i)||/IEMobile/i.test(i))&&(p.android=!1,p.iOS=!1,p.macOS=!1,p.windows=!0,p.windowsPhone=!0);var u=/Silk/.test(i);return(p.windows||p.macOS||p.linux&&!u||p.chromeOS)&&(p.desktop=!0),(p.windowsPhone||/Windows NT/i.test(i)&&/Touch/i.test(i))&&(p.desktop=!1),navigator.standalone&&(p.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(p.cordova=!0),window.ejecta!==void 0&&(p.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(p.node=!0),p.node&&typeof process.versions=="object"&&(p.nodeWebkit=!!process.versions["node-webkit"],p.electron=!!process.versions.electron),/Crosswalk/.test(i)&&(p.crosswalk=!0),p.pixelRatio=window.devicePixelRatio||1,p}()},6:function(g){var p={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};g.exports=function(){if(typeof importScripts=="function")return p;var i=document.createElement("video"),u=!!i.canPlayType;try{u&&(i.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(p.ogg=!0),i.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(p.h264=!0,p.mp4=!0),i.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(p.webm=!0),i.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(p.vp9=!0),i.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(p.hls=!0))}catch{}return p}()},47345:function(g,p,i){g.exports={os:i(89771),browser:i(82153),features:i(61052),input:i(16252),audio:i(26926),video:i(6),fullscreen:i(30053),canvasFeatures:i(23404)}},40013:function(g,p,i){var u=new(i(69186))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(e){return this._matrix=e,this._dirty=!0,this},reset:function(){var e=this._matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=1,e[13]=0,e[14]=0,e[15]=0,e[16]=0,e[17]=0,e[18]=1,e[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var e=new Float32Array(this._matrix);e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,this._data=e,this._dirty=!1}return this._data},brightness:function(e,l){e===void 0&&(e=0),l===void 0&&(l=!1);var o=e;return this.multiply([o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],l)},saturate:function(e,l){e===void 0&&(e=0),l===void 0&&(l=!1);var o=2*e/3+1,t=-.5*(o-1);return this.multiply([o,t,t,0,0,t,o,t,0,0,t,t,o,0,0,0,0,0,1,0],l)},desaturate:function(e){return e===void 0&&(e=!1),this.saturate(-1,e)},hue:function(e,l){e===void 0&&(e=0),l===void 0&&(l=!1),e=e/180*Math.PI;var o=Math.cos(e),t=Math.sin(e),s=.213,n=.715,r=.072;return this.multiply([s+.787*o+t*-s,n+o*-n+t*-n,r+o*-r+.928*t,0,0,s+o*-s+.143*t,n+o*(1-n)+.14*t,r+o*-r+-.283*t,0,0,s+o*-s+-.787*t,n+o*-n+t*n,r+.928*o+t*r,0,0,0,0,0,1,0],l)},grayscale:function(e,l){return e===void 0&&(e=1),l===void 0&&(l=!1),this.saturate(-e,l)},blackWhite:function(e){return e===void 0&&(e=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},contrast:function(e,l){e===void 0&&(e=0),l===void 0&&(l=!1);var o=e+1,t=-.5*(o-1);return this.multiply([o,0,0,0,t,0,o,0,0,t,0,0,o,0,t,0,0,0,1,0],l)},negative:function(e){return e===void 0&&(e=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},desaturateLuminance:function(e){return e===void 0&&(e=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],e)},sepia:function(e){return e===void 0&&(e=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},night:function(e,l){return e===void 0&&(e=.1),l===void 0&&(l=!1),this.multiply([-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],l)},lsd:function(e){return e===void 0&&(e=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},brown:function(e){return e===void 0&&(e=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},vintagePinhole:function(e){return e===void 0&&(e=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},kodachrome:function(e){return e===void 0&&(e=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},technicolor:function(e){return e===void 0&&(e=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},polaroid:function(e){return e===void 0&&(e=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},shiftToBGR:function(e){return e===void 0&&(e=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},multiply:function(e,l){l||this.reset();for(var o=this._matrix,t=[],s=0;s<20;s++)t[s]=o[s];return o[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],o[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],o[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],o[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],o[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],o[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],o[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],o[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],o[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],o[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],o[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],o[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],o[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],o[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],o[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],o[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],o[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],o[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],o[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],o[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],this._dirty=!0,this}});g.exports=u},68494:function(g){g.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},44240:function(g,p,i){var u=i(94638),e=i(34463),l=i(62447),o=i(52217);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)+n),l(t,u(s)+r),t}},71308:function(g,p,i){var u=i(94638),e=i(40353),l=i(62447),o=i(64899);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)-n),l(t,u(s)+r),t}},50547:function(g,p,i){var u=i(94638),e=i(58380),l=i(62447),o=i(23855);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)+n),l(t,u(s)+r),t}},68698:function(g,p,i){var u=i(84070),e=i(34463),l=i(1355);g.exports=function(o,t,s,n){return s===void 0&&(s=0),n===void 0&&(n=0),u(o,e(t)+s,l(t)+n),o}},6125:function(g,p,i){var u=i(1355),e=i(40353),l=i(80327),o=i(64899);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)-n),l(t,u(s)+r),t}},19918:function(g,p,i){var u=i(68494),e=[];e[u.BOTTOM_CENTER]=i(44240),e[u.BOTTOM_LEFT]=i(71308),e[u.BOTTOM_RIGHT]=i(50547),e[u.CENTER]=i(68698),e[u.LEFT_CENTER]=i(6125),e[u.RIGHT_CENTER]=i(48756),e[u.TOP_CENTER]=i(68292),e[u.TOP_LEFT]=i(54062),e[u.TOP_RIGHT]=i(13257),e[u.LEFT_BOTTOM]=e[u.BOTTOM_LEFT],e[u.LEFT_TOP]=e[u.TOP_LEFT],e[u.RIGHT_BOTTOM]=e[u.BOTTOM_RIGHT],e[u.RIGHT_TOP]=e[u.TOP_RIGHT],g.exports=function(l,o,t,s,n){return e[t](l,o,s,n)}},48756:function(g,p,i){var u=i(1355),e=i(58380),l=i(80327),o=i(23855);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)+n),l(t,u(s)+r),t}},68292:function(g,p,i){var u=i(34463),e=i(8970),l=i(52217),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,u(s)+n),o(t,e(s)-r),t}},54062:function(g,p,i){var u=i(40353),e=i(8970),l=i(64899),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,u(s)-n),o(t,e(s)-r),t}},13257:function(g,p,i){var u=i(58380),e=i(8970),l=i(23855),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,u(s)+n),o(t,e(s)-r),t}},25524:function(g,p,i){g.exports={BottomCenter:i(44240),BottomLeft:i(71308),BottomRight:i(50547),Center:i(68698),LeftCenter:i(6125),QuickSet:i(19918),RightCenter:i(48756),TopCenter:i(68292),TopLeft:i(54062),TopRight:i(13257)}},87150:function(g,p,i){var u=i(68494),e=i(72646),l={In:i(25524),To:i(23553)};l=e(!1,l,u),g.exports=l},11569:function(g,p,i){var u=i(94638),e=i(34463),l=i(52217),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,e(s)+n),o(t,u(s)+r),t}},40660:function(g,p,i){var u=i(94638),e=i(40353),l=i(64899),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,e(s)-n),o(t,u(s)+r),t}},50157:function(g,p,i){var u=i(94638),e=i(58380),l=i(23855),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,e(s)+n),o(t,u(s)+r),t}},75455:function(g,p,i){var u=i(94638),e=i(40353),l=i(62447),o=i(23855);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)-n),l(t,u(s)+r),t}},82302:function(g,p,i){var u=i(1355),e=i(40353),l=i(80327),o=i(23855);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)-n),l(t,u(s)+r),t}},66639:function(g,p,i){var u=i(40353),e=i(8970),l=i(23855),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,u(s)-n),o(t,e(s)-r),t}},92611:function(g,p,i){var u=i(68494),e=[];e[u.BOTTOM_CENTER]=i(11569),e[u.BOTTOM_LEFT]=i(40660),e[u.BOTTOM_RIGHT]=i(50157),e[u.LEFT_BOTTOM]=i(75455),e[u.LEFT_CENTER]=i(82302),e[u.LEFT_TOP]=i(66639),e[u.RIGHT_BOTTOM]=i(56635),e[u.RIGHT_CENTER]=i(62444),e[u.RIGHT_TOP]=i(24467),e[u.TOP_CENTER]=i(92695),e[u.TOP_LEFT]=i(10184),e[u.TOP_RIGHT]=i(86520),g.exports=function(l,o,t,s,n){return e[t](l,o,s,n)}},56635:function(g,p,i){var u=i(94638),e=i(58380),l=i(62447),o=i(64899);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)+n),l(t,u(s)+r),t}},62444:function(g,p,i){var u=i(1355),e=i(58380),l=i(80327),o=i(64899);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,e(s)+n),l(t,u(s)+r),t}},24467:function(g,p,i){var u=i(58380),e=i(8970),l=i(64899),o=i(91873);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),l(t,u(s)+n),o(t,e(s)-r),t}},92695:function(g,p,i){var u=i(34463),e=i(8970),l=i(62447),o=i(52217);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,u(s)+n),l(t,e(s)-r),t}},10184:function(g,p,i){var u=i(40353),e=i(8970),l=i(62447),o=i(64899);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,u(s)-n),l(t,e(s)-r),t}},86520:function(g,p,i){var u=i(58380),e=i(8970),l=i(62447),o=i(23855);g.exports=function(t,s,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),o(t,u(s)+n),l(t,e(s)-r),t}},23553:function(g,p,i){g.exports={BottomCenter:i(11569),BottomLeft:i(40660),BottomRight:i(50157),LeftBottom:i(75455),LeftCenter:i(82302),LeftTop:i(66639),QuickSet:i(92611),RightBottom:i(56635),RightCenter:i(62444),RightTop:i(24467),TopCenter:i(92695),TopLeft:i(10184),TopRight:i(86520)}},84070:function(g,p,i){var u=i(52217),e=i(80327);g.exports=function(l,o,t){return u(l,o),e(l,t)}},94638:function(g){g.exports=function(p){return p.y+p.height-p.height*p.originY}},34463:function(g){g.exports=function(p){return p.x-p.width*p.originX+.5*p.width}},1355:function(g){g.exports=function(p){return p.y-p.height*p.originY+.5*p.height}},40353:function(g){g.exports=function(p){return p.x-p.width*p.originX}},58380:function(g){g.exports=function(p){return p.x+p.width-p.width*p.originX}},8970:function(g){g.exports=function(p){return p.y-p.height*p.originY}},62447:function(g){g.exports=function(p,i){return p.y=i-p.height+p.height*p.originY,p}},52217:function(g){g.exports=function(p,i){var u=p.width*p.originX;return p.x=i+u-.5*p.width,p}},80327:function(g){g.exports=function(p,i){var u=p.height*p.originY;return p.y=i+u-.5*p.height,p}},64899:function(g){g.exports=function(p,i){return p.x=i+p.width*p.originX,p}},23855:function(g){g.exports=function(p,i){return p.x=i-p.width+p.width*p.originX,p}},91873:function(g){g.exports=function(p,i){return p.y=i+p.height*p.originY,p}},42485:function(g){g.exports={setCrisp:function(p){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(i){p.style["image-rendering"]=i}),p.style.msInterpolationMode="nearest-neighbor",p},setBicubic:function(p){return p.style["image-rendering"]="auto",p.style.msInterpolationMode="bicubic",p}}},55579:function(g,p,i){var u,e,l,o=i(11318),t=i(83468),s=[],n=!1;g.exports=(l=function(){var r=0;return s.forEach(function(h){h.parent&&r++}),r},{create2D:function(r,h,a){return u(r,h,a,o.CANVAS)},create:u=function(r,h,a,c,d){var f;h===void 0&&(h=1),a===void 0&&(a=1),c===void 0&&(c=o.CANVAS),d===void 0&&(d=!1);var v=e(c);return v===null?(v={parent:r,canvas:document.createElement("canvas"),type:c},c===o.CANVAS&&s.push(v),f=v.canvas):(v.parent=r,f=v.canvas),d&&(v.parent=f),f.width=h,f.height=a,n&&c===o.CANVAS&&t.disable(f.getContext("2d")),f},createWebGL:function(r,h,a){return u(r,h,a,o.WEBGL)},disableSmoothing:function(){n=!0},enableSmoothing:function(){n=!1},first:e=function(r){if(r===void 0&&(r=o.CANVAS),r===o.WEBGL)return null;for(var h=0;h<s.length;h++){var a=s[h];if(!a.parent&&a.type===r)return a}return null},free:function(){return s.length-l()},pool:s,remove:function(r){var h=r instanceof HTMLCanvasElement;s.forEach(function(a){(h&&a.canvas===r||!h&&a.parent===r)&&(a.parent=null,a.canvas.width=1,a.canvas.height=1)})},total:l})},83468:function(g){var p,i="";g.exports={disable:function(u){return i===""&&(i=p(u)),i&&(u[i]=!1),u},enable:function(u){return i===""&&(i=p(u)),i&&(u[i]=!0),u},getPrefix:p=function(u){for(var e=["i","webkitI","msI","mozI","oI"],l=0;l<e.length;l++){var o=e[l]+"mageSmoothingEnabled";if(o in u)return o}return null},isEnabled:function(u){return i!==null?u[i]:null}}},13499:function(g,p,i){var u=i(69186),e=i(55117),l=i(29700),o=i(51457),t=i(31372),s=new u({initialize:function(n,r,h,a){n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(n,r,h,a)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,r,h,a,c){return a===void 0&&(a=255),c===void 0&&(c=!0),this._locked=!0,this.red=n,this.green=r,this.blue=h,this.alpha=a,this._locked=!1,this.update(c)},setGLTo:function(n,r,h,a){return a===void 0&&(a=1),this._locked=!0,this.redGL=n,this.greenGL=r,this.blueGL=h,this.alphaGL=a,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,r,h){return o(n,r,h,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var r=this.r,h=this.g,a=this.b,c=this.a;return this._color=e(r,h,a),this._color32=l(r,h,a,c),this._rgba="rgba("+r+","+h+","+a+","+c/255+")",n&&t(r,h,a,this),this},updateHSV:function(){var n=this.r,r=this.g,h=this.b;return t(n,r,h,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,r){n===void 0&&(n=0),r===void 0&&(r=255);var h=Math.floor(n+Math.random()*(r-n)),a=Math.floor(n+Math.random()*(r-n)),c=Math.floor(n+Math.random()*(r-n));return this.setTo(h,a,c)},randomGray:function(n,r){n===void 0&&(n=0),r===void 0&&(r=255);var h=Math.floor(n+Math.random()*(r-n));return this.setTo(h,h,h)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var r=this.r,h=this.g,a=this.b;return r=Math.max(0,Math.min(255,r-Math.round(-n/100*255))),h=Math.max(0,Math.min(255,h-Math.round(-n/100*255))),a=Math.max(0,Math.min(255,a-Math.round(-n/100*255))),this.setTo(r,h,a)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,o(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,o(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,o(this._h,this._s,n,this)}}});g.exports=s},81654:function(g,p,i){var u=i(55117);g.exports=function(e){e===void 0&&(e=1024);var l,o=[],t=255,s=255,n=0,r=0;for(l=0;l<=t;l++)o.push({r:s,g:l,b:r,color:u(s,l,r)});for(n=255,l=t;l>=0;l--)o.push({r:l,g:n,b:r,color:u(l,n,r)});for(s=0,l=0;l<=t;l++,n--)o.push({r:s,g:n,b:l,color:u(s,n,l)});for(n=0,r=255,l=0;l<=t;l++,r--,s++)o.push({r:s,g:n,b:r,color:u(s,n,r)});if(e===1024)return o;var h=[],a=0,c=1024/e;for(l=0;l<e;l++)h.push(o[Math.floor(a)]),a+=c;return h}},76503:function(g){g.exports=function(p){var i={r:p>>16&255,g:p>>8&255,b:255&p,a:255};return p>16777215&&(i.a=p>>>24),i}},60850:function(g){g.exports=function(p){var i=p.toString(16);return i.length===1?"0"+i:i}},55117:function(g){g.exports=function(p,i,u){return p<<16|i<<8|u}},29700:function(g){g.exports=function(p,i,u,e){return e<<24|p<<16|i<<8|u}},29782:function(g,p,i){var u=i(13499),e=i(84502);g.exports=function(l,o,t){var s=t,n=t,r=t;if(o!==0){var h=t<.5?t*(1+o):t+o-t*o,a=2*t-h;s=e(a,h,l+.3333333333333333),n=e(a,h,l),r=e(a,h,l-.3333333333333333)}return new u().setGLTo(s,n,r,1)}},50432:function(g,p,i){var u=i(51457);g.exports=function(e,l){e===void 0&&(e=1),l===void 0&&(l=1);for(var o=[],t=0;t<=359;t++)o.push(u(t/359,e,l));return o}},51457:function(g,p,i){var u=i(55117);function e(l,o,t,s){var n=(l+6*o)%6,r=Math.min(n,4-n,1);return Math.round(255*(s-s*t*Math.max(0,r)))}g.exports=function(l,o,t,s){o===void 0&&(o=1),t===void 0&&(t=1);var n=e(5,l,o,t),r=e(3,l,o,t),h=e(1,l,o,t);return s?s.setTo?s.setTo(n,r,h,s.alpha,!1):(s.r=n,s.g=r,s.b=h,s.color=u(n,r,h),s):{r:n,g:r,b:h,color:u(n,r,h)}}},65435:function(g,p,i){var u=i(13499);g.exports=function(e){var l=new u;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,h,a,c){return h+h+a+a+c+c});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(o){var t=parseInt(o[1],16),s=parseInt(o[2],16),n=parseInt(o[3],16);l.setTo(t,s,n)}return l}},84502:function(g){g.exports=function(p,i,u){return u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?p+6*(i-p)*u:u<.5?i:u<.6666666666666666?p+(i-p)*(.6666666666666666-u)*6:p}},57284:function(g,p,i){var u=i(13499),e=i(3382);g.exports=function(l){var o=e(l);return new u(o.r,o.g,o.b,o.a)}},3382:function(g){g.exports=function(p){return p>16777215?{a:p>>>24,r:p>>16&255,g:p>>8&255,b:255&p}:{a:255,r:p>>16&255,g:p>>8&255,b:255&p}}},47625:function(g,p,i){var u=i(3821),e=function(l,o,t,s,n,r,h,a){h===void 0&&(h=100),a===void 0&&(a=0);var c=a/h;return{r:u(l,s,c),g:u(o,n,c),b:u(t,r,c)}};g.exports={RGBWithRGB:e,ColorWithRGB:function(l,o,t,s,n,r){return n===void 0&&(n=100),r===void 0&&(r=0),e(l.r,l.g,l.b,o,t,s,n,r)},ColorWithColor:function(l,o,t,s){return t===void 0&&(t=100),s===void 0&&(s=0),e(l.r,l.g,l.b,o.r,o.g,o.b,t,s)}}},37684:function(g,p,i){var u=i(13499);g.exports=function(e){return new u(e.r,e.g,e.b,e.a)}},33548:function(g,p,i){var u=i(13499);g.exports=function(e){var l=new u,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(o){var t=parseInt(o[1],10),s=parseInt(o[2],10),n=parseInt(o[3],10),r=o[4]!==void 0?parseFloat(o[4]):1;l.setTo(t,s,n,255*r)}return l}},31372:function(g){g.exports=function(p,i,u,e){e===void 0&&(e={h:0,s:0,v:0}),p/=255,i/=255,u/=255;var l=Math.min(p,i,u),o=Math.max(p,i,u),t=o-l,s=0,n=o===0?0:t/o,r=o;return o!==l&&(o===p?s=(i-u)/t+(i<u?6:0):o===i?s=(u-p)/t+2:o===u&&(s=(p-i)/t+4),s/=6),e.hasOwnProperty("_h")?(e._h=s,e._s=n,e._v=r):(e.h=s,e.s=n,e.v=r),e}},92613:function(g,p,i){var u=i(60850);g.exports=function(e,l,o,t,s){return t===void 0&&(t=255),s===void 0&&(s="#"),s==="#"?"#"+(16777216+(e<<16)+(l<<8)+o).toString(16).slice(1,7):"0x"+u(t)+u(e)+u(l)+u(o)}},61039:function(g,p,i){var u=i(27019),e=i(13499);g.exports=function(l,o){return l===void 0&&(l=0),o===void 0&&(o=255),new e(u(l,o),u(l,o),u(l,o))}},58909:function(g,p,i){var u=i(65435),e=i(57284),l=i(37684),o=i(33548);g.exports=function(t){switch(typeof t){case"string":return t.substr(0,3).toLowerCase()==="rgb"?o(t):u(t);case"number":return e(t);case"object":return l(t)}}},80586:function(g,p,i){var u=i(13499);u.ColorSpectrum=i(81654),u.ColorToRGBA=i(76503),u.ComponentToHex=i(60850),u.GetColor=i(55117),u.GetColor32=i(29700),u.HexStringToColor=i(65435),u.HSLToColor=i(29782),u.HSVColorWheel=i(50432),u.HSVToRGB=i(51457),u.HueToComponent=i(84502),u.IntegerToColor=i(57284),u.IntegerToRGB=i(3382),u.Interpolate=i(47625),u.ObjectToColor=i(37684),u.RandomRGB=i(61039),u.RGBStringToColor=i(33548),u.RGBToHSV=i(31372),u.RGBToString=i(92613),u.ValueToColor=i(58909),g.exports=u},8091:function(g,p,i){var u=i(69186),e=i(24496),l=i(37710),o=new u({initialize:function(t,s){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=s,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(e.CONTEXT_RESTORED,this.createMask,this),n&&n.on(l.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var s=t.width,n=t.height,r=(s&s-1)==0&&(n&n-1)==0,h=t.gl,a=r?h.REPEAT:h.CLAMP_TO_EDGE,c=h.LINEAR;this.mainTexture=t.createTexture2D(0,c,c,a,a,h.RGBA,null,s,n),this.maskTexture=t.createTexture2D(0,c,c,a,a,h.RGBA,null,s,n),this.mainFramebuffer=t.createFramebuffer(s,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(s,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,s,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,s,n)},postRenderWebGL:function(t,s){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(l.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});g.exports=o},70611:function(g,p,i){var u=new(i(69186))({initialize:function(e,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return e===void 0&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,l,o){var t=e.gl;e.flush(),e.maskStack.length===0&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:o}),this.applyStencil(e,o,!0),e.maskCount++},applyStencil:function(e,l,o){var t=e.gl,s=this.geometryMask,n=e.maskCount;t.colorMask(!1,!1,!1,!1),o?(t.stencilFunc(t.EQUAL,n,255),t.stencilOp(t.KEEP,t.KEEP,t.INCR)):(t.stencilFunc(t.EQUAL,n+1,255),t.stencilOp(t.KEEP,t.KEEP,t.DECR)),s.renderWebGL(e,s,l),e.flush(),t.colorMask(!0,!0,!0,!0),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),o?this.invertAlpha?t.stencilFunc(t.NOTEQUAL,n+1,255):t.stencilFunc(t.EQUAL,n+1,255):this.invertAlpha?t.stencilFunc(t.NOTEQUAL,n,255):t.stencilFunc(t.EQUAL,n,255)},postRenderWebGL:function(e){var l=e.gl;e.maskStack.pop(),e.maskCount--,e.flush();var o=e.currentMask;if(e.maskStack.length===0)o.mask=null,l.disable(l.STENCIL_TEST);else{var t=e.maskStack[e.maskStack.length-1];t.mask.applyStencil(e,t.camera,!1),e.currentCameraMask.mask!==t.mask?(o.mask=t.mask,o.camera=t.camera):o.mask=null}},preRenderCanvas:function(e,l,o){var t=this.geometryMask;e.currentContext.save(),t.renderCanvas(e,t,o,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});g.exports=u},88472:function(g,p,i){g.exports={BitmapMask:i(8091),GeometryMask:i(70611)}},45964:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o,t){l&&l!==""||(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),o&&o!==""||(o=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),t===void 0&&(t=null),this.key=e,this.fragmentSrc=l,this.vertexSrc=o,this.uniforms=t}});g.exports=u},21778:function(g){g.exports=function(p,i){var u;if(i)typeof i=="string"?u=document.getElementById(i):typeof i=="object"&&i.nodeType===1&&(u=i);else if(p.parentElement||i===null)return p;return u||(u=document.body),u.appendChild(p),p}},3804:function(g,p,i){var u=i(21778);g.exports=function(e){var l=e.config;if(l.parent&&l.domCreateContainer){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),e.domContainer=o,u(o,l.parent)}}},8277:function(g,p,i){var u=i(89771);g.exports=function(e){if(document.readyState!=="complete"&&document.readyState!=="interactive"){var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),e()};document.body?u.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)}else e()}},57886:function(g){g.exports=function(p){if(!p)return window.innerHeight;var i=Math.abs(window.orientation),u={w:0,h:0},e=document.createElement("div");return e.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(e),u.w=i===90?e.offsetHeight:window.innerWidth,u.h=i===90?window.innerWidth:e.offsetHeight,document.documentElement.removeChild(e),e=null,Math.abs(window.orientation)!==90?u.h:u.w}},84846:function(g,p,i){var u=i(24790);g.exports=function(e,l){var o=window.screen,t=!!o&&(o.orientation||o.mozOrientation||o.msOrientation);return t&&typeof t.type=="string"?t.type:typeof t=="string"?t:typeof window.orientation=="number"?window.orientation===0||window.orientation===180?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?u.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?u.ORIENTATION.LANDSCAPE:void 0:l>e?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE}},44095:function(g){g.exports=function(p){var i;return p!==""&&(typeof p=="string"?i=document.getElementById(p):p&&p.nodeType===1&&(i=p)),i||(i=document.body),i}},3726:function(g){g.exports=function(p){var i="";try{window.DOMParser?i=new DOMParser().parseFromString(p,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(p)}catch{i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},20662:function(g){g.exports=function(p){p.parentNode&&p.parentNode.removeChild(p)}},948:function(g,p,i){var u=i(69186),e=i(45733),l=new u({initialize:function(){this.isRunning=!1,this.callback=e,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var o=this;this.step=function t(){var s=window.performance.now();o.lastTime=o.tick,o.tick=s,o.callback(s),o.timeOutID=window.requestAnimationFrame(t)},this.stepTimeout=function t(){var s=Date.now(),n=Math.min(Math.max(2*o.target+o.tick-s,0),o.target);o.lastTime=o.tick,o.tick=s,o.callback(s),o.timeOutID=window.setTimeout(t,n)}},start:function(o,t,s){this.isRunning||(this.callback=o,this.isSetTimeOut=t,this.target=s,this.isRunning=!0,this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=e}});g.exports=l},9675:function(g,p,i){var u=i(69186),e=i(26729),l=i(46236),o=new u({Extends:e,initialize:function(){e.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});l.register("EventEmitter",o,"events"),g.exports=o},85817:function(g,p,i){g.exports={EventEmitter:i(9675)}},90062:function(g,p,i){var u=i(87626),e=i(7973);g.exports=function(l,o,t){o.x=e(t,"x",0),o.y=e(t,"y",0),o.depth=e(t,"depth",0),o.flipX=e(t,"flipX",!1),o.flipY=e(t,"flipY",!1);var s=e(t,"scale",null);typeof s=="number"?o.setScale(s):s!==null&&(o.scaleX=e(s,"x",1),o.scaleY=e(s,"y",1));var n=e(t,"scrollFactor",null);typeof n=="number"?o.setScrollFactor(n):n!==null&&(o.scrollFactorX=e(n,"x",1),o.scrollFactorY=e(n,"y",1)),o.rotation=e(t,"rotation",0);var r=e(t,"angle",null);r!==null&&(o.angle=r),o.alpha=e(t,"alpha",1);var h=e(t,"origin",null);if(typeof h=="number")o.setOrigin(h);else if(h!==null){var a=e(h,"x",.5),c=e(h,"y",.5);o.setOrigin(a,c)}return o.blendMode=e(t,"blendMode",u.NORMAL),o.visible=e(t,"visible",!0),e(t,"add",!0)&&l.sys.displayList.add(o),o.preUpdate&&l.sys.updateList.add(o),o}},38596:function(g,p,i){var u=i(7973);g.exports=function(e,l){var o=u(l,"anims",null);if(o===null)return e;if(typeof o=="string")e.anims.play(o);else if(typeof o=="object"){var t=e.anims,s=u(o,"key",void 0);if(s){var n=u(o,"startFrame",void 0),r=u(o,"delay",0),h=u(o,"repeat",0),a=u(o,"repeatDelay",0),c=u(o,"yoyo",!1),d=u(o,"play",!1),f=u(o,"delayedPlay",0),v={key:s,delay:r,repeat:h,repeatDelay:a,yoyo:c,startFrame:n};d?t.play(v):f>0?t.playAfterDelay(v,f):t.load(v)}}return e}},96656:function(g,p,i){var u=i(69186),e=i(49469),l=i(46236),o=i(99370),t=i(12063),s=i(46414),n=new u({Extends:e,initialize:function(r){e.call(this,r),this.sortChildrenFlag=!1,this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(t.BOOT,this.boot,this),this.events.on(t.START,this.start,this)},boot:function(){this.events.once(t.DESTROY,this.destroy,this)},addChildCallback:function(r){r.displayList&&r.displayList!==this&&r.removeFromDisplayList(),r.displayList||(this.queueDepthSort(),r.displayList=this,r.emit(o.ADDED_TO_SCENE,r,this.scene),this.events.emit(t.ADDED_TO_SCENE,r,this.scene))},removeChildCallback:function(r){this.queueDepthSort(),r.displayList=null,r.emit(o.REMOVED_FROM_SCENE,r,this.scene),this.events.emit(t.REMOVED_FROM_SCENE,r,this.scene)},start:function(){this.events.once(t.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(s(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(r,h){return r._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var r=this.list,h=r.length;h--;)r[h].destroy(!0);r.length=0,this.events.off(t.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(t.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});l.register("DisplayList",n,"displayList"),g.exports=n},38236:function(g,p,i){var u=i(69186),e=i(20847),l=i(92941),o=i(26729),t=i(99370),s=i(12063),n=new u({Extends:o,initialize:function(r,h){o.call(this),this.scene=r,this.displayList=null,this.type=h,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(t.ADDED_TO_SCENE,this.addedToScene,this),this.on(t.REMOVED_FROM_SCENE,this.removedFromScene,this),r.sys.queueDepthSort()},setActive:function(r){return this.active=r,this},setName:function(r){return this.name=r,this},setState:function(r){return this.state=r,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(r,h){return this.data||(this.data=new l(this)),this.data.set(r,h),this},incData:function(r,h){return this.data||(this.data=new l(this)),this.data.inc(r,h),this},toggleData:function(r){return this.data||(this.data=new l(this)),this.data.toggle(r),this},getData:function(r){return this.data||(this.data=new l(this)),this.data.get(r)},setInteractive:function(r,h,a){return this.scene.sys.input.enable(this,r,h,a),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return e(this)},willRender:function(r){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&r.id)},getIndexList:function(){for(var r=this,h=this.parentContainer,a=[];h&&(a.unshift(h.getIndex(r)),r=h,h.parentContainer);)h=h.parentContainer;return this.displayList?a.unshift(this.displayList.getIndex(r)):a.unshift(this.scene.sys.displayList.getIndex(r)),a},addToDisplayList:function(r){return r===void 0&&(r=this.scene.sys.displayList),this.displayList&&this.displayList!==r&&this.removeFromDisplayList(),r.exists(this)||(this.displayList=r,r.add(this,!0),r.queueDepthSort(),this.emit(t.ADDED_TO_SCENE,this,this.scene),r.events.emit(s.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var r=this.displayList||this.scene.sys.displayList;return r.exists(this)&&(r.remove(this,!0),r.queueDepthSort(),this.displayList=null,this.emit(t.REMOVED_FROM_SCENE,this,this.scene),r.events.emit(s.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(r){this.scene&&!this.ignoreDestroy&&(r===void 0&&(r=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(t.DESTROY,this,r),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,g.exports=n},78757:function(g,p,i){var u=i(69186),e=i(46236),l=i(12063),o=new u({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,s){o.prototype.hasOwnProperty(t)||(o.prototype[t]=s)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},e.register("GameObjectCreator",o,"make"),g.exports=o},66642:function(g,p,i){var u=i(69186),e=i(46236),l=i(12063),o=new u({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,s){o.prototype.hasOwnProperty(t)||(o.prototype[t]=s)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},e.register("GameObjectFactory",o,"add"),g.exports=o},3142:function(g,p,i){var u=i(9329),e=new u,l=new u,o=new u,t={camera:e,sprite:l,calc:o};g.exports=function(s,n,r){var h=e,a=l,c=o;return a.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),h.copyFrom(n.matrix),r?(h.multiplyWithOffset(r,-n.scrollX*s.scrollFactorX,-n.scrollY*s.scrollFactorY),a.e=s.x,a.f=s.y):(a.e-=n.scrollX*s.scrollFactorX,a.f-=n.scrollY*s.scrollFactorY),h.multiply(a,c),t}},66007:function(g,p,i){var u=i(69186),e=i(48547),l=i(46236),o=i(12063),t=new u({Extends:e,initialize:function(s){e.call(this),this.checkQueue=!0,this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(o.PRE_UPDATE,this.update,this),s.on(o.UPDATE,this.sceneUpdate,this),s.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,n){for(var r=this._active,h=r.length,a=0;a<h;a++){var c=r[a];c.active&&c.preUpdate.call(c,s,n)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(o.PRE_UPDATE,this.update,this),n.off(o.UPDATE,this.sceneUpdate,this),n.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});l.register("UpdateList",t,"updateList"),g.exports=t},83162:function(g){g.exports=function(p,i,u,e,l,o,t,s,n,r,h,a,c,d,f){var v=u.x-i.displayOriginX+l,m=u.y-i.displayOriginY+o,x=v+u.w,T=m+u.h,y=t.getXRound(v,m,s),E=t.getYRound(v,m,s),w=t.getXRound(v,T,s),R=t.getYRound(v,T,s),C=t.getXRound(x,T,s),A=t.getYRound(x,T,s),S=t.getXRound(x,m,s),b=t.getYRound(x,m,s);p.batchQuad(i,y,E,w,R,C,A,S,b,e.u0,e.v0,e.u1,e.v1,n,r,h,a,c,d,f)}},90178:function(g){g.exports=function(p,i,u,e){if(u===void 0&&(u=!1),e===void 0)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var l,o,t,s=p.text,n=s.length,r=p.maxWidth,h=p.wordWrapCharCode,a=Number.MAX_VALUE,c=Number.MAX_VALUE,d=0,f=0,v=p.fontData.chars,m=p.fontData.lineHeight,x=p.letterSpacing,T=0,y=0,E=0,w=null,R=p._align,C=0,A=0,S=p.fontSize/p.fontData.size,b=S*p.scaleX,_=S*p.scaleY,P=null,D=0,O=[],F=Number.MAX_VALUE,N=0,k=0,L=0,U=[],Y=[],B=null;if(r>0){for(l=0;l<n;l++)if((E=s.charCodeAt(l))!==10){if(w=v[E]){if(P!==null)var W=w.kerning[D];E===h?B!==null&&(U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_,cr:!1}),B=null):(B===null&&(B={word:"",i:l,x:T,y,w:0,h:m,cr:!1}),B.word=B.word.concat(s[l]),B.w+=w.xOffset+w.xAdvance+(W!==void 0?W:0)),T+=w.xAdvance+x,P=w,D=E}}else B!==null&&(U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_,cr:!0}),B=null),T=0,y+=m,P=null;var G;B!==null&&U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_,cr:!1}),T=0,y=0,P=null,D=0;var X=0,q=[];for(l=0;l<U.length;l++){var j=U[l],V=j.x,K=j.x+j.w;G&&(X=V-(V-(G.x+G.w)+G.w),G=null),V-X>r||K-X>r?(q.push(j.i-1),j.cr?(q.push(j.i+j.word.length),X=0,G=null):G=j):j.cr&&(q.push(j.i+j.word.length),X=0,G=null)}for(l=q.length-1;l>=0;l--)o=s,t=q[l],s=o.substr(0,t)+`
`+o.substr(t+1);e.wrappedText=s,n=s.length,U=[],B=null}var H=0;for(l=0;l<n;l++)if((E=s.charCodeAt(l))!==10){if(w=v[E]){if(C=T,A=y,P!==null){var Z=w.kerning[D];C+=Z!==void 0?Z:0}a>C&&(a=C),c>A&&(c=A);var Q=C+w.xAdvance,J=A+m;d<Q&&(d=Q),f<J&&(f=J);var et=w.xOffset+w.xAdvance+(Z!==void 0?Z:0);E===h?B!==null&&(U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_}),B=null):(B===null&&(B={word:"",i:H,x:T,y,w:0,h:m}),B.word=B.word.concat(s[l]),B.w+=et),Y.push({i:H,char:s[l],code:E,x:(w.xOffset+T)*S,y:(w.yOffset+y)*S,w:w.width*S,h:w.height*S,t:y*S,r:Q*S,b:m*S,line:k,glyph:w}),T+=w.xAdvance+x,P=w,D=E,L=Q*S,H++}}else B!==null&&(U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_}),B=null),T=0,y+=m,P=null,O[k]=L,L>N&&(N=L),L<F&&(F=L),k++,L=0;if(B!==null&&U.push({word:B.word,i:B.i,x:B.x*b,y:B.y*_,w:B.w*b,h:B.h*_}),O[k]=L,L>N&&(N=L),L<F&&(F=L),R>0)for(var $=0;$<Y.length;$++){var tt=Y[$];if(R===1){var it=(N-O[tt.line])/2;tt.x+=it,tt.r+=it}else if(R===2){var nt=N-O[tt.line];tt.x+=nt,tt.r+=nt}}var rt=e.local,st=e.global,at=e.lines;return rt.x=a*S,rt.y=c*S,rt.width=d*S,rt.height=f*S,st.x=p.x-p._displayOriginX+a*b,st.y=p.y-p._displayOriginY+c*_,st.width=d*b,st.height=f*_,at.shortest=F,at.longest=N,at.lengths=O,i&&(rt.x=Math.ceil(rt.x),rt.y=Math.ceil(rt.y),rt.width=Math.ceil(rt.width),rt.height=Math.ceil(rt.height),st.x=Math.ceil(st.x),st.y=Math.ceil(st.y),st.width=Math.ceil(st.width),st.height=Math.ceil(st.height),at.shortest=Math.ceil(F),at.longest=Math.ceil(N)),u&&(p._displayOriginX=p.originX*rt.width,p._displayOriginY=p.originY*rt.height,st.x=p.x-p._displayOriginX*p.scaleX,st.y=p.y-p._displayOriginY*p.scaleY,i&&(st.x=Math.ceil(st.x),st.y=Math.ceil(st.y))),e.words=U,e.characters=Y,e.lines.height=m,e.scale=S,e.scaleX=p.scaleX,e.scaleY=p.scaleY,e}},88537:function(g,p,i){var u=i(95634);g.exports=function(e,l,o,t,s,n,r){var h=e.sys.textures.get(o),a=h.get(t),c=e.sys.cache.xml.get(s);if(a&&c){var d=u(c,a,n,r,h);return e.sys.cache.bitmapFont.add(l,{data:d,texture:o,frame:t,fromAtlas:!0}),!0}return!1}},95634:function(g){function p(i,u){return parseInt(i.getAttribute(u),10)}g.exports=function(i,u,e,l,o){e===void 0&&(e=0),l===void 0&&(l=0);var t=u.cutX,s=u.cutY,n=u.source.width,r=u.source.height,h=u.sourceIndex,a={},c=i.getElementsByTagName("info")[0],d=i.getElementsByTagName("common")[0];a.font=c.getAttribute("face"),a.size=p(c,"size"),a.lineHeight=p(d,"lineHeight")+l,a.chars={};var f=i.getElementsByTagName("char"),v=u!==void 0&&u.trimmed;if(v)var m=u.height,x=u.width;for(var T=0;T<f.length;T++){var y=f[T],E=p(y,"id"),w=String.fromCharCode(E),R=p(y,"x"),C=p(y,"y"),A=p(y,"width"),S=p(y,"height");v&&(R<x&&(x=R),C<m&&(m=C)),v&&m!==0&&x!==0&&(R-=u.x,C-=u.y);var b=(t+R)/n,_=(s+C)/r,P=(t+R+A)/n,D=(s+C+S)/r;if(a.chars[E]={x:R,y:C,width:A,height:S,centerX:Math.floor(A/2),centerY:Math.floor(S/2),xOffset:p(y,"xoffset"),yOffset:p(y,"yoffset"),xAdvance:p(y,"xadvance")+e,data:{},kerning:{},u0:b,v0:_,u1:P,v1:D},o&&A!==0&&S!==0){var O=o.add(w,h,R,C,A,S);O&&O.setUVs(A,S,b,_,P,D)}}var F=i.getElementsByTagName("kerning");for(T=0;T<F.length;T++){var N=F[T],k=p(N,"first"),L=p(N,"second"),U=p(N,"amount");a.chars[L].kerning[k]=U}return a}},74797:function(g,p,i){var u=i(69186),e=i(2543),l=i(19506),o=i(38236),t=i(90178),s=i(88537),n=i(95634),r=i(75380),h=i(17459),a=new u({Extends:o,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Texture,l.Tint,l.Transform,l.Visible,h],initialize:function(c,d,f,v,m,x,T){m===void 0&&(m=""),T===void 0&&(T=0),o.call(this,c,"BitmapText"),this.font=v;var y=this.scene.sys.cache.bitmapFont.get(v);y||console.warn("Invalid BitmapText key: "+v),this.fontData=y.data,this._text="",this._fontSize=x||this.fontData.size,this._letterSpacing=0,this._align=T,this._bounds=t(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=y.fromAtlas,this.setTexture(y.texture,y.frame),this.setPosition(d,f),this.setOrigin(0,0),this.initPipeline(),this.setText(m)},setLeftAlign:function(){return this._align=a.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=a.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=a.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return c===void 0&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setText:function(c){return c||c===0||(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,d,f,v){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=.5),this.dropShadowX=c,this.dropShadowY=d,this.dropShadowColor=f,this.dropShadowAlpha=v,this},setCharacterTint:function(c,d,f,v,m,x,T){c===void 0&&(c=0),d===void 0&&(d=1),f===void 0&&(f=!1),v===void 0&&(v=-1),m===void 0&&(m=v,x=v,T=v);var y=this.text.length;d===-1&&(d=y),c<0&&(c=y+c),c=e(c,0,y-1);for(var E=e(c+d,c,y),w=this.charColors,R=c;R<E;R++){var C=w[R];if(v===-1)w[R]=null;else{var A=f?1:0;C?(C.tintEffect=A,C.tintTL=v,C.tintTR=m,C.tintBL=x,C.tintBR=T):w[R]={tintEffect:A,tintTL:v,tintTR:m,tintBL:x,tintBR:T}}}return this},setWordTint:function(c,d,f,v,m,x,T){d===void 0&&(d=1);for(var y=this.getTextBounds().words,E=typeof c=="number",w=0,R=0;R<y.length;R++){var C=y[R];if((E&&R===c||!E&&C.word===c)&&(this.setCharacterTint(C.i,C.word.length,f,v,m,x,T),++w===d))return this}return this},getTextBounds:function(c){var d=this._bounds;return(this._dirty||c||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(t(this,c,!0,d),this._dirty=!1),d},getCharacterAt:function(c,d,f){for(var v=this.getLocalPoint(c,d,null,f),m=this.getTextBounds().characters,x=new r,T=0;T<m.length;T++){var y=m[T];if(x.setTo(y.x,y.t,y.r-y.x,y.b),x.contains(v.x,v.y))return y}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,d,f){if(d===void 0&&(d=this._fontSize),f===void 0&&(f=this._align),c!==this.font){var v=this.scene.sys.cache.bitmapFont.get(c);v&&(this.font=c,this.fontData=v.data,this._fontSize=d,this._align=f,this.fromAtlas=v.fromAtlas===!0,this.setTexture(v.texture,v.frame),t(this,!1,!0,this._bounds))}return this},setMaxWidth:function(c,d){return this._maxWidth=c,this._dirty=!0,d!==void 0&&(this.wordWrapCharCode=d),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var c=l.ToJSON(this),d={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return c.data=d,c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});a.ALIGN_LEFT=0,a.ALIGN_CENTER=1,a.ALIGN_RIGHT=2,a.ParseFromAtlas=s,a.ParseXMLBitmapFont=n,g.exports=a},39005:function(g,p,i){var u=i(14437);g.exports=function(e,l,o,t){var s=l._text,n=s.length,r=e.currentContext;if(n!==0&&u(e,r,l,o,t)){o.addToRenderList(l);var h=l.fromAtlas?l.frame:l.texture.frames.__BASE,a=l.fontData.chars,c=l.fontData.lineHeight,d=l._letterSpacing,f=0,v=0,m=0,x=null,T=0,y=0,E=0,w=0,R=0,C=0,A=null,S=0,b=h.source.image,_=h.cutX,P=h.cutY,D=l._fontSize/l.fontData.size,O=l._align,F=0,N=0,k=l.getTextBounds(!1);l.maxWidth>0&&(n=(s=k.wrappedText).length);var L=l._bounds.lines;O===1?N=(L.longest-L.lengths[0])/2:O===2&&(N=L.longest-L.lengths[0]),r.translate(-l.displayOriginX,-l.displayOriginY);for(var U=o.roundPixels,Y=0;Y<n;Y++)if((m=s.charCodeAt(Y))!==10){if(x=a[m]){if(T=_+x.x,y=P+x.y,E=x.width,w=x.height,R=x.xOffset+f,C=x.yOffset+v,A!==null){var B=x.kerning[S];R+=B!==void 0?B:0}R*=D,C*=D,R+=N,f+=x.xAdvance+d,A=x,S=m,E!==0&&w!==0&&m!==32&&(U&&(R=Math.round(R),C=Math.round(C)),r.save(),r.translate(R,C),r.scale(D,D),r.drawImage(b,T,y,E,w,0,0,E,w),r.restore())}}else F++,O===1?N=(L.longest-L.lengths[F])/2:O===2&&(N=L.longest-L.lengths[F]),f=0,v+=c,A=null;r.restore()}}},46292:function(g,p,i){var u=i(74797),e=i(90062),l=i(78757),o=i(7973),t=i(76076);l.register("bitmapText",function(s,n){s===void 0&&(s={});var r=t(s,"font",""),h=o(s,"text",""),a=o(s,"size",!1),c=t(s,"align",0),d=new u(this.scene,0,0,r,h,a,c);return n!==void 0&&(s.add=n),e(this.scene,d,s),d})},93676:function(g,p,i){var u=i(74797);i(66642).register("bitmapText",function(e,l,o,t,s,n){return this.displayList.add(new u(this.scene,e,l,o,t,s,n))})},17459:function(g,p,i){var u=i(45733),e=i(45733);u=i(35158),e=i(39005),g.exports={renderWebGL:u,renderCanvas:e}},35158:function(g,p,i){var u=i(83162),e=i(3142),l=i(64564);g.exports=function(o,t,s,n){if(t._text.length!==0){s.addToRenderList(t);var r,h,a,c=o.pipelines.set(t.pipeline,t),d=e(t,s,n).calc,f=s.roundPixels,v=s.alpha,m=t.charColors,x=t.tintFill,T=l.getTintAppendFloatAlpha,y=T(t.tintTopLeft,v*t._alphaTL),E=T(t.tintTopRight,v*t._alphaTR),w=T(t.tintBottomLeft,v*t._alphaBL),R=T(t.tintBottomRight,v*t._alphaBR),C=t.frame.glTexture,A=c.setGameObject(t),S=t.getTextBounds(!1).characters,b=t.dropShadowX,_=t.dropShadowY,P=b!==0||_!==0;if(o.pipelines.preBatch(t),P){var D=t.dropShadowColor,O=t.dropShadowAlpha,F=T(D,v*O*t._alphaTL),N=T(D,v*O*t._alphaTR),k=T(D,v*O*t._alphaBL),L=T(D,v*O*t._alphaBR);for(r=0;r<S.length;r++)a=(h=S[r]).glyph,h.code!==32&&a.width!==0&&a.height!==0&&u(c,t,h,a,b,_,d,f,F,N,k,L,1,C,A)}for(r=0;r<S.length;r++)if(a=(h=S[r]).glyph,h.code!==32&&a.width!==0&&a.height!==0)if(m[h.i]){var U=m[h.i],Y=U.tintEffect,B=T(U.tintTL,v*t._alphaTL),W=T(U.tintTR,v*t._alphaTR),G=T(U.tintBL,v*t._alphaBL),X=T(U.tintBR,v*t._alphaBR);u(c,t,h,a,0,0,d,f,B,W,G,X,Y,C,A)}else u(c,t,h,a,0,0,d,f,y,E,w,R,x,C,A);o.pipelines.postBatch(t)}}},60452:function(g,p,i){var u=i(2543),e={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,o,t,s){return l===void 0&&(l=1),o===void 0?this.alpha=l:(this._alphaTL=u(l,0,1),this._alphaTR=u(o,0,1),this._alphaBL=u(t,0,1),this._alphaBR=u(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var o=u(l,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var o=u(l,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var o=u(l,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var o=u(l,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var o=u(l,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=2)}}};g.exports=e},95057:function(g,p,i){var u=i(2543),e={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var o=u(l,0,1);this._alpha=o,o===0?this.renderFlags&=-3:this.renderFlags|=2}}};g.exports=e},13006:function(g,p,i){var u=i(87626),e={_blendMode:u.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(l){typeof l=="string"&&(l=u[l]),(l|=0)>=-1&&(this._blendMode=l)}},setBlendMode:function(l){return this.blendMode=l,this}};g.exports=e},45289:function(g){g.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,i){return this.width=p,this.height=i,this},setDisplaySize:function(p,i){return this.displayWidth=p,this.displayHeight=i,this}}},12051:function(g){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(p,i,u,e){if(p===void 0)this.isCropped=!1;else if(this.frame){if(typeof p=="number")this.frame.setCropUVs(this._crop,p,i,u,e,this.flipX,this.flipY);else{var l=p;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},59764:function(g){g.exports={_depth:0,depth:{get:function(){return this._depth},set:function(p){this.displayList&&this.displayList.queueDepthSort(),this._depth=p}},setDepth:function(p){return p===void 0&&(p=0),this.depth=p,this}}},41489:function(g){g.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(p){return this.flipX=p,this},setFlipY:function(p){return this.flipY=p,this},setFlip:function(p,i){return this.flipX=p,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},25942:function(g,p,i){var u=i(75380),e=i(45707),l=i(17321),o={prepareBoundsOutput:function(t,s){return s===void 0&&(s=!1),this.rotation!==0&&e(t,this.x,this.y,this.rotation),s&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return t===void 0&&(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,s)},getTopCenter:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,s)},getTopRight:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,s)},getLeftCenter:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,s)},getRightCenter:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,s)},getBottomLeft:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,s)},getBottomCenter:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,s)},getBottomRight:function(t,s){return t||(t=new l),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,s)},getBounds:function(t){var s,n,r,h,a,c,d,f;if(t===void 0&&(t=new u),this.parentContainer){var v=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),v.transformPoint(t.x,t.y,t),s=t.x,n=t.y,this.getTopRight(t),v.transformPoint(t.x,t.y,t),r=t.x,h=t.y,this.getBottomLeft(t),v.transformPoint(t.x,t.y,t),a=t.x,c=t.y,this.getBottomRight(t),v.transformPoint(t.x,t.y,t),d=t.x,f=t.y}else this.getTopLeft(t),s=t.x,n=t.y,this.getTopRight(t),r=t.x,h=t.y,this.getBottomLeft(t),a=t.x,c=t.y,this.getBottomRight(t),d=t.x,f=t.y;return t.x=Math.min(s,r,a,d),t.y=Math.min(n,h,c,f),t.width=Math.max(s,r,a,d)-t.x,t.height=Math.max(n,h,c,f)-t.y,t}};g.exports=o},50231:function(g,p,i){var u=i(8091),e=i(70611),l={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new u(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new e(this.scene,o)}};g.exports=l},94610:function(g){g.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(p){this._displayOriginX=p,this.originX=p/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(p){this._displayOriginY=p,this.originY=p/this.height}},setOrigin:function(p,i){return p===void 0&&(p=.5),i===void 0&&(i=p),this.originX=p,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(p,i){return p===void 0&&(p=0),i===void 0&&(i=p),this.displayOriginX=p,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},13632:function(g,p,i){var u=i(23407),e=i(51146),l=i(76076),o=i(24191),t=i(17321),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(n,r){r===void 0&&(r=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=n,r&&this.startFollow(r),this},setRotateToPath:function(n,r){return r===void 0&&(r=0),this.rotateToPath=n,this.pathRotationOffset=r,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,r){n===void 0&&(n={}),r===void 0&&(r=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof n=="number"&&(n={duration:n}),n.from=l(n,"from",0),n.to=l(n,"to",1);var a=e(n,"positionOnPath",!1);this.rotateToPath=e(n,"rotateToPath",!1),this.pathRotationOffset=l(n,"rotationOffset",0);var c=l(n,"startAt",r);if(c&&(n.onStart=function(f){var v=f.data[0];v.progress=c,v.elapsed=v.duration*c;var m=v.ease(v.progress);v.current=v.start+(v.end-v.start)*m,v.target[v.key]=v.current}),this.pathOffset||(this.pathOffset=new t(this.x,this.y)),this.pathVector||(this.pathVector=new t),this.pathDelta||(this.pathDelta=new t),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),a&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var d=this.path.getPoint(.1);this.rotation=Math.atan2(d.y-this.y,d.x-this.x)+u(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n){var r=n.data[0],h=this.pathDelta,a=this.pathVector;if(h.copy(a).negate(),r.state===o.COMPLETE)return this.path.getPoint(1,a),h.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(r.state!==o.PLAYING_FORWARD&&r.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),a),h.add(a),a.add(this.pathOffset);var c=this.x,d=this.y;this.setPosition(a.x,a.y);var f=this.x-c,v=this.y-d;if(f===0&&v===0)return;if(r.state!==this._prevDirection)return void(this._prevDirection=r.state);this.rotateToPath&&(this.rotation=Math.atan2(v,f)+u(this.pathRotationOffset))}}};g.exports=s},99285:function(g,p,i){var u=i(12229),e=i(46098),l=i(28088),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){t===void 0&&(t=e.MULTI_PIPELINE);var s=this.scene.sys.renderer;if(!s)return!1;var n=s.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var r=n.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,s,n){var r=this.scene.sys.renderer;if(!r)return this;var h=r.pipelines;if(h){var a=h.get(t);a&&(this.pipeline=a),s&&(this.pipelineData=n?u(s):s)}return this},setPostPipeline:function(t,s,n){var r=this.scene.sys.renderer;if(!r)return this;var h=r.pipelines;if(h){Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var c=h.getPostPipeline(t[a],this);c&&this.postPipelines.push(c)}s&&(this.pipelineData=n?u(s):s)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,s){var n=this.pipelineData;return s===void 0?delete n[t]:n[t]=s,this},getPostPipeline:function(t){for(var s=this.postPipelines,n=[],r=0;r<s.length;r++){var h=s[r];(typeof t=="string"&&h.name===t||h instanceof t)&&n.push(h)}return n.length===1?n[0]:n},resetPipeline:function(t,s){return t===void 0&&(t=!1),s===void 0&&(s=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),s&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(t){t===void 0&&(t=!1);for(var s=this.postPipelines,n=0;n<s.length;n++)s[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var s=this.postPipelines,n=s.length-1;n>=0;n--){var r=s[n];(typeof t=="string"&&r.name===t||typeof t!="string"&&r instanceof t)&&(r.destroy(),l(s,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};g.exports=o},10125:function(g){g.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(p,i){return i===void 0&&(i=p),this.scrollFactorX=p,this.scrollFactorY=i,this}}},95051:function(g){var p={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(i){this.scaleX=i/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(i){this.scaleY=i/this.frame.realHeight}},setSizeToFrame:function(i){return i===void 0&&(i=this.frame),this.width=i.realWidth,this.height=i.realHeight,this},setSize:function(i,u){return this.width=i,this.height=u,this},setDisplaySize:function(i,u){return this.displayWidth=i,this.displayHeight=u,this}};g.exports=p},96103:function(g){g.exports={texture:null,frame:null,isCropped:!1,setTexture:function(p,i){return this.texture=this.scene.sys.textures.get(p),this.setFrame(i)},setFrame:function(p,i,u){return i===void 0&&(i=!0),u===void 0&&(u=!0),this.frame=this.texture.get(p),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&u&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},13966:function(g){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(p,i,u,e){if(p===void 0)this.isCropped=!1;else if(this.frame){if(typeof p=="number")this.frame.setCropUVs(this._crop,p,i,u,e,this.flipX,this.flipY);else{var l=p;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(p,i){return this.texture=this.scene.sys.textures.get(p),this.setFrame(i)},setFrame:function(p,i,u){return i===void 0&&(i=!0),u===void 0&&(u=!0),this.frame=this.texture.get(p),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&u&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},4381:function(g){g.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(p,i,u,e){return p===void 0&&(p=16777215),i===void 0&&(i=p,u=p,e=p),this.tintTopLeft=p,this.tintTopRight=i,this.tintBottomLeft=u,this.tintBottomRight=e,this.tintFill=!1,this},setTintFill:function(p,i,u,e){return this.setTint(p,i,u,e),this.tintFill=!0,this},tint:{set:function(p){this.setTint(p,p,p,p)}},isTinted:{get:function(){var p=16777215;return this.tintFill||this.tintTopLeft!==p||this.tintTopRight!==p||this.tintBottomLeft!==p||this.tintBottomRight!==p}}}},20847:function(g){g.exports=function(p){var i={name:p.name,type:p.type,x:p.x,y:p.y,depth:p.depth,scale:{x:p.scaleX,y:p.scaleY},origin:{x:p.originX,y:p.originY},flipX:p.flipX,flipY:p.flipY,rotation:p.rotation,alpha:p.alpha,visible:p.visible,blendMode:p.blendMode,textureKey:"",frameKey:"",data:{}};return p.texture&&(i.textureKey=p.texture.key,i.frameKey=p.frame.name),i}},27589:function(g,p,i){var u=i(80925),e=i(9329),l=i(37423),o=i(12784),t=i(7011),s=i(17321),n={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(r){this._scaleX=r,this._scaleY=r,r===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(r){this._scaleX=r,r===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(r){this._scaleY=r,r===0?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return t(this._rotation*u.RAD_TO_DEG)},set:function(r){this.rotation=t(r)*u.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(r){this._rotation=o(r)}},setPosition:function(r,h,a,c){return r===void 0&&(r=0),h===void 0&&(h=r),a===void 0&&(a=0),c===void 0&&(c=0),this.x=r,this.y=h,this.z=a,this.w=c,this},copyPosition:function(r){return r.x!==void 0&&(this.x=r.x),r.y!==void 0&&(this.y=r.y),r.z!==void 0&&(this.z=r.z),r.w!==void 0&&(this.w=r.w),this},setRandomPosition:function(r,h,a,c){return r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),this.x=r+Math.random()*a,this.y=h+Math.random()*c,this},setRotation:function(r){return r===void 0&&(r=0),this.rotation=r,this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,this},setScale:function(r,h){return r===void 0&&(r=1),h===void 0&&(h=r),this.scaleX=r,this.scaleY=h,this},setX:function(r){return r===void 0&&(r=0),this.x=r,this},setY:function(r){return r===void 0&&(r=0),this.y=r,this},setZ:function(r){return r===void 0&&(r=0),this.z=r,this},setW:function(r){return r===void 0&&(r=0),this.w=r,this},getLocalTransformMatrix:function(r){return r===void 0&&(r=new e),r.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(r,h){r===void 0&&(r=new e),h===void 0&&(h=new e);var a=this.parentContainer;if(!a)return this.getLocalTransformMatrix(r);for(r.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);a;)h.applyITRS(a.x,a.y,a._rotation,a._scaleX,a._scaleY),h.multiply(r,r),a=a.parentContainer;return r},getLocalPoint:function(r,h,a,c){a||(a=new s),c||(c=this.scene.sys.cameras.main);var d=c.scrollX,f=c.scrollY,v=r+d*this.scrollFactorX-d,m=h+f*this.scrollFactorY-f;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(v,m,a):l(v,m,this.x,this.y,this.rotation,this.scaleX,this.scaleY,a),this._originComponent&&(a.x+=this._displayOriginX,a.y+=this._displayOriginY),a},getParentRotation:function(){for(var r=0,h=this.parentContainer;h;)r+=h.rotation,h=h.parentContainer;return r}};g.exports=n},9329:function(g,p,i){var u=i(69186),e=i(80925),l=i(17321),o=new u({initialize:function(t,s,n,r,h,a){t===void 0&&(t=1),s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=1),h===void 0&&(h=0),a===void 0&&(a=0),this.matrix=new Float32Array([t,s,n,r,h,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,s=t[0],n=t[1],r=t[2],h=t[3];return s||n?n>0?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):r||h?e.TAU-(h>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,s){var n=this.matrix;return n[4]=n[0]*t+n[2]*s+n[4],n[5]=n[1]*t+n[3]*s+n[5],this},scale:function(t,s){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=s,n[3]*=s,this},rotate:function(t){var s=Math.sin(t),n=Math.cos(t),r=this.matrix,h=r[0],a=r[1],c=r[2],d=r[3];return r[0]=h*n+c*s,r[1]=a*n+d*s,r[2]=h*-s+c*n,r[3]=a*-s+d*n,this},multiply:function(t,s){var n=this.matrix,r=t.matrix,h=n[0],a=n[1],c=n[2],d=n[3],f=n[4],v=n[5],m=r[0],x=r[1],T=r[2],y=r[3],E=r[4],w=r[5],R=s===void 0?this:s;return R.a=m*h+x*c,R.b=m*a+x*d,R.c=T*h+y*c,R.d=T*a+y*d,R.e=E*h+w*c+f,R.f=E*a+w*d+v,R},multiplyWithOffset:function(t,s,n){var r=this.matrix,h=t.matrix,a=r[0],c=r[1],d=r[2],f=r[3],v=s*a+n*d+r[4],m=s*c+n*f+r[5],x=h[0],T=h[1],y=h[2],E=h[3],w=h[4],R=h[5];return r[0]=x*a+T*d,r[1]=x*c+T*f,r[2]=y*a+E*d,r[3]=y*c+E*f,r[4]=w*a+R*d+v,r[5]=w*c+R*f+m,this},transform:function(t,s,n,r,h,a){var c=this.matrix,d=c[0],f=c[1],v=c[2],m=c[3],x=c[4],T=c[5];return c[0]=t*d+s*v,c[1]=t*f+s*m,c[2]=n*d+r*v,c[3]=n*f+r*m,c[4]=h*d+a*v+x,c[5]=h*f+a*m+T,this},transformPoint:function(t,s,n){n===void 0&&(n={x:0,y:0});var r=this.matrix,h=r[0],a=r[1],c=r[2],d=r[3],f=r[4],v=r[5];return n.x=t*h+s*c+f,n.y=t*a+s*d+v,n},invert:function(){var t=this.matrix,s=t[0],n=t[1],r=t[2],h=t[3],a=t[4],c=t[5],d=s*h-n*r;return t[0]=h/d,t[1]=-n/d,t[2]=-r/d,t[3]=s/d,t[4]=(r*c-h*a)/d,t[5]=-(s*c-n*a)/d,this},copyFrom:function(t){var s=this.matrix;return s[0]=t.a,s[1]=t.b,s[2]=t.c,s[3]=t.d,s[4]=t.e,s[5]=t.f,this},copyFromArray:function(t){var s=this.matrix;return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],this},copyToContext:function(t){var s=this.matrix;return t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t},setToContext:function(t){var s=this.matrix;return t.setTransform(s[0],s[1],s[2],s[3],s[4],s[5]),t},copyToArray:function(t){var s=this.matrix;return t===void 0?t=[s[0],s[1],s[2],s[3],s[4],s[5]]:(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5]),t},setTransform:function(t,s,n,r,h,a){var c=this.matrix;return c[0]=t,c[1]=s,c[2]=n,c[3]=r,c[4]=h,c[5]=a,this},decomposeMatrix:function(){var t=this.decomposedMatrix,s=this.matrix,n=s[0],r=s[1],h=s[2],a=s[3],c=n*a-r*h;if(t.translateX=s[4],t.translateY=s[5],n||r){var d=Math.sqrt(n*n+r*r);t.rotation=r>0?Math.acos(n/d):-Math.acos(n/d),t.scaleX=d,t.scaleY=c/d}else if(h||a){var f=Math.sqrt(h*h+a*a);t.rotation=.5*Math.PI-(a>0?Math.acos(-h/f):-Math.acos(h/f)),t.scaleX=c/f,t.scaleY=f}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,s,n,r,h){var a=this.matrix,c=Math.sin(n),d=Math.cos(n);return a[4]=t,a[5]=s,a[0]=d*r,a[1]=c*r,a[2]=-c*h,a[3]=d*h,this},applyInverse:function(t,s,n){n===void 0&&(n=new l);var r=this.matrix,h=r[0],a=r[1],c=r[2],d=r[3],f=r[4],v=r[5],m=1/(h*d+c*-a);return n.x=d*m*t+-c*m*s+(v*c-f*d)*m,n.y=h*m*s+-a*m*t+(-v*h+f*a)*m,n},getX:function(t,s){return t*this.a+s*this.c+this.e},getY:function(t,s){return t*this.b+s*this.d+this.f},getXRound:function(t,s,n){var r=this.getX(t,s);return n&&(r=Math.round(r)),r},getYRound:function(t,s,n){var r=this.getY(t,s);return n&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});g.exports=o},50663:function(g){g.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(p){p?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(p){return this.visible=p,this}}},19506:function(g,p,i){g.exports={Alpha:i(60452),AlphaSingle:i(95057),BlendMode:i(13006),ComputedSize:i(45289),Crop:i(12051),Depth:i(59764),Flip:i(41489),GetBounds:i(25942),Mask:i(50231),Origin:i(94610),PathFollower:i(13632),Pipeline:i(99285),ScrollFactor:i(10125),Size:i(95051),Texture:i(96103),TextureCrop:i(13966),Tint:i(4381),ToJSON:i(20847),Transform:i(27589),TransformMatrix:i(9329),Visible:i(50663)}},22675:function(g,p,i){var u=i(47205),e=i(87626),l=i(69186),o=i(19506),t=i(99370),s=i(38236),n=i(75380),r=i(1449),h=i(20822),a=i(17321),c=new l({Extends:s,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,r],initialize:function(d,f,v,m){s.call(this,d,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=d.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(f,v),this.clearAlpha(),this.setBlendMode(e.SKIP_CHECK),m&&this.add(m)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(d){return d===void 0&&(d=!0),this.exclusive=d,this},getBounds:function(d){if(d===void 0&&(d=new n),d.setTo(this.x,this.y,0,0),this.parentContainer){var f=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);d.setTo(f.x,f.y,0,0)}if(this.list.length>0){var v=this.list,m=new n,x=!1;d.setEmpty();for(var T=0;T<v.length;T++){var y=v[T];y.getBounds&&(y.getBounds(m),x?h(m,d,d):(d.setTo(m.x,m.y,m.width,m.height),x=!0))}}return d},addHandler:function(d){d.once(t.DESTROY,this.remove,this),this.exclusive&&(d.parentContainer&&d.parentContainer.remove(d),d.removeFromDisplayList(),d.parentContainer=this)},removeHandler:function(d){d.off(t.DESTROY,this.remove),this.exclusive&&(d.parentContainer=null,d.addToDisplayList())},pointToContainer:function(d,f){f===void 0&&(f=new a),this.parentContainer?this.parentContainer.pointToContainer(d,f):f=new a(d.x,d.y);var v=this.tempTransformMatrix;return v.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),v.invert(),v.transformPoint(d.x,d.y,f),f},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(d){return u.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,f){return u.AddAt(this.list,d,f,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,f){return d?(f===void 0&&(f=function(v,m){return v[d]-m[d]}),u.StableSort(this.list,f),this):this},getByName:function(d){return u.GetFirst(this.list,"name",d)},getRandom:function(d,f){return u.GetRandom(this.list,d,f)},getFirst:function(d,f,v,m){return u.GetFirst(this.list,d,f,v,m)},getAll:function(d,f,v,m){return u.GetAll(this.list,d,f,v,m)},count:function(d,f,v,m){return u.CountAllMatching(this.list,d,f,v,m)},swap:function(d,f){return u.Swap(this.list,d,f),this},moveTo:function(d,f){return u.MoveTo(this.list,d,f),this},moveAbove:function(d,f){return u.MoveAbove(this.list,d,f),this},moveBelow:function(d,f){return u.MoveBelow(this.list,d,f),this},remove:function(d,f){var v=u.Remove(this.list,d,this.removeHandler,this);if(f&&v){Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++)v[m].destroy()}return this},removeAt:function(d,f){var v=u.RemoveAt(this.list,d,this.removeHandler,this);return f&&v&&v.destroy(),this},removeBetween:function(d,f,v){var m=u.RemoveBetween(this.list,d,f,this.removeHandler,this);if(v)for(var x=0;x<m.length;x++)m[x].destroy();return this},removeAll:function(d){var f=u.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(d)for(var v=0;v<f.length;v++)f[v].destroy();return this},bringToTop:function(d){return u.BringToTop(this.list,d),this},sendToBack:function(d){return u.SendToBack(this.list,d),this},moveUp:function(d){return u.MoveUp(this.list,d),this},moveDown:function(d){return u.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(d,f,v){return u.Replace(this.list,d,f)&&(this.addHandler(f),this.removeHandler(d),v&&d.destroy()),this},exists:function(d){return this.list.indexOf(d)>-1},setAll:function(d,f,v,m){return u.SetAll(this.list,d,f,v,m),this},each:function(d,f){var v,m=[null],x=this.list.slice(),T=x.length;for(v=2;v<arguments.length;v++)m.push(arguments[v]);for(v=0;v<T;v++)m[0]=x[v],d.apply(f,m);return this},iterate:function(d,f){var v,m=[null];for(v=2;v<arguments.length;v++)m.push(arguments[v]);for(v=0;v<this.list.length;v++)m[0]=this.list[v],d.apply(f,m);return this},setScrollFactor:function(d,f,v){return f===void 0&&(f=d),v===void 0&&(v=!1),this.scrollFactorX=d,this.scrollFactorY=f,v&&(u.SetAll(this.list,"scrollFactorX",d),u.SetAll(this.list,"scrollFactorY",f)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});g.exports=c},4168:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i);var l=i.list;if(l.length!==0){var o=i.localTransform;e?(o.loadIdentity(),o.multiply(e),o.translate(i.x,i.y),o.rotate(i.rotation),o.scale(i.scaleX,i.scaleY)):o.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var t=i.blendMode!==-1;t||p.setBlendMode(0);var s=i._alpha,n=i.scrollFactorX,r=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(p,null,u);for(var h=0;h<l.length;h++){var a=l[h];if(a.willRender(u)){var c=a.alpha,d=a.scrollFactorX,f=a.scrollFactorY;t||a.blendMode===p.currentBlendMode||p.setBlendMode(a.blendMode),a.setScrollFactor(d*n,f*r),a.setAlpha(c*s),a.renderCanvas(p,a,u,o),a.setAlpha(c),a.setScrollFactor(d,f)}}i.mask&&i.mask.postRenderCanvas(p)}}},92359:function(g,p,i){var u=i(90062),e=i(22675),l=i(78757),o=i(7973);l.register("container",function(t,s){t===void 0&&(t={});var n=o(t,"x",0),r=o(t,"y",0),h=o(t,"children",null),a=new e(this.scene,n,r,h);return s!==void 0&&(t.add=s),u(this.scene,a,t),a})},51273:function(g,p,i){var u=i(22675);i(66642).register("container",function(e,l,o){return this.displayList.add(new u(this.scene,e,l,o))})},1449:function(g,p,i){var u=i(45733),e=i(45733);u=i(58784),e=i(4168),g.exports={renderWebGL:u,renderCanvas:e}},58784:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i);var l=i.list,o=l.length;if(o!==0){var t=i.localTransform;e?(t.loadIdentity(),t.multiply(e),t.translate(i.x,i.y),t.rotate(i.rotation),t.scale(i.scaleX,i.scaleY)):t.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),p.pipelines.preBatch(i);var s=i.blendMode!==-1;s||p.setBlendMode(0);for(var n=i.alpha,r=i.scrollFactorX,h=i.scrollFactorY,a=0;a<o;a++){var c=l[a];if(c.willRender(u)){var d,f,v,m;if(c.alphaTopLeft!==void 0)d=c.alphaTopLeft,f=c.alphaTopRight,v=c.alphaBottomLeft,m=c.alphaBottomRight;else{var x=c.alpha;d=x,f=x,v=x,m=x}var T=c.scrollFactorX,y=c.scrollFactorY;s||c.blendMode===p.currentBlendMode||p.setBlendMode(c.blendMode);var E=c.mask;E&&E.preRenderWebGL(p,c,u);var w=c.type;w!==p.currentType&&(p.newType=!0,p.currentType=w),p.nextTypeMatch=a<o-1&&l[a+1].type===p.currentType,c.setScrollFactor(T*r,y*h),c.setAlpha(d*n,f*n,v*n,m*n),c.renderWebGL(p,c,u,t),c.setAlpha(d,f,v,m),c.setScrollFactor(T,y),E&&E.postRenderWebGL(p,u),p.newType=!1}}p.pipelines.postBatch(i)}}},7121:function(g){g.exports="addedtoscene"},32674:function(g){g.exports="destroy"},87298:function(g){g.exports="removedfromscene"},77460:function(g){g.exports="complete"},5105:function(g){g.exports="created"},18076:function(g){g.exports="error"},24953:function(g){g.exports="loop"},49615:function(g){g.exports="play"},65441:function(g){g.exports="seeked"},67987:function(g){g.exports="seeking"},65048:function(g){g.exports="stop"},27332:function(g){g.exports="timeout"},22637:function(g){g.exports="unlocked"},99370:function(g,p,i){g.exports={ADDED_TO_SCENE:i(7121),DESTROY:i(32674),REMOVED_FROM_SCENE:i(87298),VIDEO_COMPLETE:i(77460),VIDEO_CREATED:i(5105),VIDEO_ERROR:i(18076),VIDEO_LOOP:i(24953),VIDEO_PLAY:i(49615),VIDEO_SEEKED:i(65441),VIDEO_SEEKING:i(67987),VIDEO_STOP:i(65048),VIDEO_TIMEOUT:i(27332),VIDEO_UNLOCKED:i(22637)}},15972:function(g){g.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},19613:function(g,p,i){var u=i(43929),e=i(69186),l=i(15972),o=i(95057),t=i(13006),s=i(59764),n=i(50231),r=i(99285),h=i(10125),a=i(27589),c=i(50663),d=i(81385),f=i(38236),v=i(25738),m=i(76076),x=i(80925),T=i(71906),y=new e({Extends:f,Mixins:[o,t,s,n,r,a,c,h,T],initialize:function(E,w){var R=m(w,"x",0),C=m(w,"y",0);f.call(this,E,"Graphics"),this.setPosition(R,C),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(w)},setDefaultStyles:function(E){return m(E,"lineStyle",null)&&(this.defaultStrokeWidth=m(E,"lineStyle.width",1),this.defaultStrokeColor=m(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(E,"fillStyle",null)&&(this.defaultFillColor=m(E,"fillStyle.color",16777215),this.defaultFillAlpha=m(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,w,R){return R===void 0&&(R=1),this.commandBuffer.push(l.LINE_STYLE,E,w,R),this._lineWidth=E,this},fillStyle:function(E,w){return w===void 0&&(w=1),this.commandBuffer.push(l.FILL_STYLE,E,w),this},fillGradientStyle:function(E,w,R,C,A,S,b,_){return A===void 0&&(A=1),S===void 0&&(S=A),b===void 0&&(b=A),_===void 0&&(_=A),this.commandBuffer.push(l.GRADIENT_FILL_STYLE,A,S,b,_,E,w,R,C),this},lineGradientStyle:function(E,w,R,C,A,S){return S===void 0&&(S=1),this.commandBuffer.push(l.GRADIENT_LINE_STYLE,E,S,w,R,C,A),this},beginPath:function(){return this.commandBuffer.push(l.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(l.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(l.FILL_PATH),this},fill:function(){return this.commandBuffer.push(l.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(l.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(l.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,w,R){return this.beginPath(),this.arc(E,w,R,0,x.PI2),this.fillPath(),this},strokeCircle:function(E,w,R){return this.beginPath(),this.arc(E,w,R,0,x.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,w,R,C){return this.commandBuffer.push(l.FILL_RECT,E,w,R,C),this},strokeRect:function(E,w,R,C){var A=this._lineWidth/2,S=E-A,b=E+A;return this.beginPath(),this.moveTo(E,w),this.lineTo(E,w+C),this.strokePath(),this.beginPath(),this.moveTo(E+R,w),this.lineTo(E+R,w+C),this.strokePath(),this.beginPath(),this.moveTo(S,w),this.lineTo(b+R,w),this.strokePath(),this.beginPath(),this.moveTo(S,w+C),this.lineTo(b+R,w+C),this.strokePath(),this},fillRoundedRect:function(E,w,R,C,A){A===void 0&&(A=20);var S=A,b=A,_=A,P=A;return typeof A!="number"&&(S=v(A,"tl",20),b=v(A,"tr",20),_=v(A,"bl",20),P=v(A,"br",20)),this.beginPath(),this.moveTo(E+S,w),this.lineTo(E+R-b,w),this.arc(E+R-b,w+b,b,-x.TAU,0),this.lineTo(E+R,w+C-P),this.arc(E+R-P,w+C-P,P,0,x.TAU),this.lineTo(E+_,w+C),this.arc(E+_,w+C-_,_,x.TAU,Math.PI),this.lineTo(E,w+S),this.arc(E+S,w+S,S,-Math.PI,-x.TAU),this.fillPath(),this},strokeRoundedRect:function(E,w,R,C,A){A===void 0&&(A=20);var S=A,b=A,_=A,P=A;return typeof A!="number"&&(S=v(A,"tl",20),b=v(A,"tr",20),_=v(A,"bl",20),P=v(A,"br",20)),this.beginPath(),this.moveTo(E+S,w),this.lineTo(E+R-b,w),this.moveTo(E+R-b,w),this.arc(E+R-b,w+b,b,-x.TAU,0),this.lineTo(E+R,w+C-P),this.moveTo(E+R,w+C-P),this.arc(E+R-P,w+C-P,P,0,x.TAU),this.lineTo(E+_,w+C),this.moveTo(E+_,w+C),this.arc(E+_,w+C-_,_,x.TAU,Math.PI),this.lineTo(E,w+S),this.moveTo(E,w+S),this.arc(E+S,w+S,S,-Math.PI,-x.TAU),this.strokePath(),this},fillPointShape:function(E,w){return this.fillPoint(E.x,E.y,w)},fillPoint:function(E,w,R){return!R||R<1?R=1:(E-=R/2,w-=R/2),this.commandBuffer.push(l.FILL_RECT,E,w,R,R),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,w,R,C,A,S){return this.commandBuffer.push(l.FILL_TRIANGLE,E,w,R,C,A,S),this},strokeTriangle:function(E,w,R,C,A,S){return this.commandBuffer.push(l.STROKE_TRIANGLE,E,w,R,C,A,S),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,w,R,C){return this.beginPath(),this.moveTo(E,w),this.lineTo(R,C),this.strokePath(),this},lineTo:function(E,w){return this.commandBuffer.push(l.LINE_TO,E,w),this},moveTo:function(E,w){return this.commandBuffer.push(l.MOVE_TO,E,w),this},strokePoints:function(E,w,R,C){w===void 0&&(w=!1),R===void 0&&(R=!1),C===void 0&&(C=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<C;A++)this.lineTo(E[A].x,E[A].y);return w&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.strokePath(),this},fillPoints:function(E,w,R,C){w===void 0&&(w=!1),R===void 0&&(R=!1),C===void 0&&(C=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<C;A++)this.lineTo(E[A].x,E[A].y);return w&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,w){w===void 0&&(w=32);var R=E.getPoints(w);return this.strokePoints(R,!0)},strokeEllipse:function(E,w,R,C,A){A===void 0&&(A=32);var S=new d(E,w,R,C).getPoints(A);return this.strokePoints(S,!0)},fillEllipseShape:function(E,w){w===void 0&&(w=32);var R=E.getPoints(w);return this.fillPoints(R,!0)},fillEllipse:function(E,w,R,C,A){A===void 0&&(A=32);var S=new d(E,w,R,C).getPoints(A);return this.fillPoints(S,!0)},arc:function(E,w,R,C,A,S,b){return S===void 0&&(S=!1),b===void 0&&(b=0),this.commandBuffer.push(l.ARC,E,w,R,C,A,S,b),this},slice:function(E,w,R,C,A,S,b){return S===void 0&&(S=!1),b===void 0&&(b=0),this.commandBuffer.push(l.BEGIN_PATH),this.commandBuffer.push(l.MOVE_TO,E,w),this.commandBuffer.push(l.ARC,E,w,R,C,A,S,b),this.commandBuffer.push(l.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(l.SAVE),this},restore:function(){return this.commandBuffer.push(l.RESTORE),this},translateCanvas:function(E,w){return this.commandBuffer.push(l.TRANSLATE,E,w),this},scaleCanvas:function(E,w){return this.commandBuffer.push(l.SCALE,E,w),this},rotateCanvas:function(E){return this.commandBuffer.push(l.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,w,R){var C,A,S=this.scene.sys,b=S.game.renderer;if(w===void 0&&(w=S.scale.width),R===void 0&&(R=S.scale.height),y.TargetCamera.setScene(this.scene),y.TargetCamera.setViewport(0,0,w,R),y.TargetCamera.scrollX=this.x,y.TargetCamera.scrollY=this.y,typeof E=="string")if(S.textures.exists(E)){var _=(C=S.textures.get(E)).getSourceImage();_ instanceof HTMLCanvasElement&&(A=_.getContext("2d"))}else A=(C=S.textures.createCanvas(E,w,R)).getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(A=E.getContext("2d"));return A&&(this.renderCanvas(b,this,y.TargetCamera,null,A,!1),C&&C.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});y.TargetCamera=new u,g.exports=y},95930:function(g,p,i){var u=i(15972),e=i(14437);g.exports=function(l,o,t,s,n,r){var h=o.commandBuffer,a=h.length,c=n||l.currentContext;if(a!==0&&e(l,c,o,t,s)){t.addToRenderList(o);var d=1,f=1,v=0,m=0,x=1,T=0,y=0,E=0;c.beginPath();for(var w=0;w<a;++w)switch(h[w]){case u.ARC:c.arc(h[w+1],h[w+2],h[w+3],h[w+4],h[w+5],h[w+6]),w+=7;break;case u.LINE_STYLE:x=h[w+1],v=h[w+2],d=h[w+3],T=(16711680&v)>>>16,y=(65280&v)>>>8,E=255&v,c.strokeStyle="rgba("+T+","+y+","+E+","+d+")",c.lineWidth=x,w+=3;break;case u.FILL_STYLE:m=h[w+1],f=h[w+2],T=(16711680&m)>>>16,y=(65280&m)>>>8,E=255&m,c.fillStyle="rgba("+T+","+y+","+E+","+f+")",w+=2;break;case u.BEGIN_PATH:c.beginPath();break;case u.CLOSE_PATH:c.closePath();break;case u.FILL_PATH:r||c.fill();break;case u.STROKE_PATH:r||c.stroke();break;case u.FILL_RECT:r?c.rect(h[w+1],h[w+2],h[w+3],h[w+4]):c.fillRect(h[w+1],h[w+2],h[w+3],h[w+4]),w+=4;break;case u.FILL_TRIANGLE:c.beginPath(),c.moveTo(h[w+1],h[w+2]),c.lineTo(h[w+3],h[w+4]),c.lineTo(h[w+5],h[w+6]),c.closePath(),r||c.fill(),w+=6;break;case u.STROKE_TRIANGLE:c.beginPath(),c.moveTo(h[w+1],h[w+2]),c.lineTo(h[w+3],h[w+4]),c.lineTo(h[w+5],h[w+6]),c.closePath(),r||c.stroke(),w+=6;break;case u.LINE_TO:c.lineTo(h[w+1],h[w+2]),w+=2;break;case u.MOVE_TO:c.moveTo(h[w+1],h[w+2]),w+=2;break;case u.LINE_FX_TO:c.lineTo(h[w+1],h[w+2]),w+=5;break;case u.MOVE_FX_TO:c.moveTo(h[w+1],h[w+2]),w+=5;break;case u.SAVE:c.save();break;case u.RESTORE:c.restore();break;case u.TRANSLATE:c.translate(h[w+1],h[w+2]),w+=2;break;case u.SCALE:c.scale(h[w+1],h[w+2]),w+=2;break;case u.ROTATE:c.rotate(h[w+1]),w+=1;break;case u.GRADIENT_FILL_STYLE:w+=5;break;case u.GRADIENT_LINE_STYLE:w+=6}c.restore()}}},2923:function(g,p,i){var u=i(78757),e=i(19613);u.register("graphics",function(l,o){l===void 0&&(l={}),o!==void 0&&(l.add=o);var t=new e(this.scene,l);return l.add&&this.scene.sys.displayList.add(t),t})},4268:function(g,p,i){var u=i(19613);i(66642).register("graphics",function(e){return this.displayList.add(new u(this.scene,e))})},71906:function(g,p,i){var u=i(45733),e=i(45733);u=i(3484),i(95930),e=i(95930),g.exports={renderWebGL:u,renderCanvas:e}},3484:function(g,p,i){var u=i(15972),e=i(3142),l=i(9329),o=i(64564),t=function(h,a,c){this.x=h,this.y=a,this.width=c},s=function(h,a,c){this.points=[],this.pointsLength=1,this.points[0]=new t(h,a,c)},n=[],r=new l;g.exports=function(h,a,c,d){if(a.commandBuffer.length!==0){c.addToRenderList(a);var f=h.pipelines.set(a.pipeline,a);h.pipelines.preBatch(a);for(var v=e(a,c,d).calc,m=r.loadIdentity(),x=a.commandBuffer,T=c.alpha*a.alpha,y=1,E=f.fillTint,w=f.strokeTint,R=0,C=0,A=0,S=2*Math.PI,b=[],_=0,P=!0,D=null,O=o.getTintAppendFloatAlpha,F=0;F<x.length;F++)switch(x[F]){case u.BEGIN_PATH:b.length=0,D=null,P=!0;break;case u.CLOSE_PATH:P=!1,D&&D.points.length&&D.points.push(D.points[0]);break;case u.FILL_PATH:for(_=0;_<b.length;_++)f.batchFillPath(b[_].points,m,v);break;case u.STROKE_PATH:for(_=0;_<b.length;_++)f.batchStrokePath(b[_].points,y,P,m,v);break;case u.LINE_STYLE:y=x[++F];var N=O(x[++F],x[++F]*T);w.TL=N,w.TR=N,w.BL=N,w.BR=N;break;case u.FILL_STYLE:var k=O(x[++F],x[++F]*T);E.TL=k,E.TR=k,E.BL=k,E.BR=k;break;case u.GRADIENT_FILL_STYLE:var L=x[++F]*T,U=x[++F]*T,Y=x[++F]*T,B=x[++F]*T;E.TL=O(x[++F],L),E.TR=O(x[++F],U),E.BL=O(x[++F],Y),E.BR=O(x[++F],B);break;case u.GRADIENT_LINE_STYLE:y=x[++F];var W=x[++F]*T;w.TL=O(x[++F],W),w.TR=O(x[++F],W),w.BL=O(x[++F],W),w.BR=O(x[++F],W);break;case u.ARC:var G=0,X=x[++F],q=x[++F],j=x[++F],V=x[++F],K=x[++F],H=x[++F],Z=x[++F];for(K-=V,H?K<-S?K=-S:K>0&&(K=K%S-S):K>S?K=S:K<0&&(K=S+K%S),D===null&&(D=new s(X+Math.cos(V)*j,q+Math.sin(V)*j,y),b.push(D),G+=.01);G<1+Z;)A=K*G+V,R=X+Math.cos(A)*j,C=q+Math.sin(A)*j,D.points.push(new t(R,C,y)),G+=.01;A=K+V,R=X+Math.cos(A)*j,C=q+Math.sin(A)*j,D.points.push(new t(R,C,y));break;case u.FILL_RECT:f.batchFillRect(x[++F],x[++F],x[++F],x[++F],m,v);break;case u.FILL_TRIANGLE:f.batchFillTriangle(x[++F],x[++F],x[++F],x[++F],x[++F],x[++F],m,v);break;case u.STROKE_TRIANGLE:f.batchStrokeTriangle(x[++F],x[++F],x[++F],x[++F],x[++F],x[++F],y,m,v);break;case u.LINE_TO:D!==null?D.points.push(new t(x[++F],x[++F],y)):(D=new s(x[++F],x[++F],y),b.push(D));break;case u.MOVE_TO:D=new s(x[++F],x[++F],y),b.push(D);break;case u.SAVE:n.push(m.copyToArray());break;case u.RESTORE:m.copyFromArray(n.pop());break;case u.TRANSLATE:X=x[++F],q=x[++F],m.translate(X,q);break;case u.SCALE:X=x[++F],q=x[++F],m.scale(X,q);break;case u.ROTATE:m.rotate(x[++F])}h.pipelines.postBatch(a)}}},84262:function(g,p,i){var u=i(22603),e=i(69186),l=i(99370),o=i(26729),t=i(14999),s=i(25738),n=i(76076),r=i(53013),h=i(17109),a=i(96609),c=i(38590),d=new e({Extends:o,initialize:function(f,v,m){o.call(this),m?v&&!Array.isArray(v)&&(v=[v]):Array.isArray(v)?r(v[0])&&(m=v,v=null):r(v)&&(m=v,v=null),this.scene=f,this.children=new a,this.isParent=!0,this.type="Group",this.classType=s(m,"classType",c),this.name=s(m,"name",""),this.active=s(m,"active",!0),this.maxSize=s(m,"maxSize",-1),this.defaultKey=s(m,"defaultKey",null),this.defaultFrame=s(m,"defaultFrame",null),this.runChildUpdate=s(m,"runChildUpdate",!1),this.createCallback=s(m,"createCallback",null),this.removeCallback=s(m,"removeCallback",null),this.createMultipleCallback=s(m,"createMultipleCallback",null),this.internalCreateCallback=s(m,"internalCreateCallback",null),this.internalRemoveCallback=s(m,"internalRemoveCallback",null),v&&this.addMultiple(v),m&&this.createMultiple(m),this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(f,v,m,x,T,y){if(f===void 0&&(f=0),v===void 0&&(v=0),m===void 0&&(m=this.defaultKey),x===void 0&&(x=this.defaultFrame),T===void 0&&(T=!0),y===void 0&&(y=!0),this.isFull())return null;var E=new this.classType(this.scene,f,v,m,x);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=T,E.setActive(y),this.add(E),E},createMultiple:function(f){if(this.isFull())return[];Array.isArray(f)||(f=[f]);var v=[];if(f[0].key)for(var m=0;m<f.length;m++){var x=this.createFromConfig(f[m]);v=v.concat(x)}return v},createFromConfig:function(f){if(this.isFull())return[];this.classType=s(f,"classType",this.classType);var v=s(f,"key",void 0),m=s(f,"frame",null),x=s(f,"visible",!0),T=s(f,"active",!0),y=[];if(v===void 0)return y;Array.isArray(v)||(v=[v]),Array.isArray(m)||(m=[m]);var E=s(f,"repeat",0),w=s(f,"randomKey",!1),R=s(f,"randomFrame",!1),C=s(f,"yoyo",!1),A=s(f,"quantity",!1),S=s(f,"frameQuantity",1),b=s(f,"max",0),_=h(v,m,{max:b,qty:A||S,random:w,randomB:R,repeat:E,yoyo:C});f.createCallback&&(this.createCallback=f.createCallback),f.removeCallback&&(this.removeCallback=f.removeCallback);for(var P=0;P<_.length;P++){var D=this.create(0,0,_[P].a,_[P].b,x,T);if(!D)break;y.push(D)}var O=n(f,"setXY.x",0),F=n(f,"setXY.y",0),N=n(f,"setXY.stepX",0),k=n(f,"setXY.stepY",0);u.SetXY(y,O,F,N,k);var L=n(f,"setRotation.value",0),U=n(f,"setRotation.step",0);u.SetRotation(y,L,U);var Y=n(f,"setScale.x",1),B=n(f,"setScale.y",Y),W=n(f,"setScale.stepX",0),G=n(f,"setScale.stepY",0);u.SetScale(y,Y,B,W,G);var X=n(f,"setOrigin.x",.5),q=n(f,"setOrigin.y",X),j=n(f,"setOrigin.stepX",0),V=n(f,"setOrigin.stepY",0);u.SetOrigin(y,X,q,j,V);var K=n(f,"setAlpha.value",1),H=n(f,"setAlpha.step",0);u.SetAlpha(y,K,H);var Z=n(f,"setDepth.value",0),Q=n(f,"setDepth.step",0);u.SetDepth(y,Z,Q);var J=n(f,"setScrollFactor.x",1),et=n(f,"setScrollFactor.y",J),$=n(f,"setScrollFactor.stepX",0),tt=n(f,"setScrollFactor.stepY",0);u.SetScrollFactor(y,J,et,$,tt);var it=s(f,"hitArea",null),nt=s(f,"hitAreaCallback",null);it&&u.SetHitArea(y,it,nt);var rt=s(f,"gridAlign",!1);return rt&&u.GridAlign(y,rt),this.createMultipleCallback&&this.createMultipleCallback.call(this,y),y},preUpdate:function(f,v){if(this.runChildUpdate&&this.children.size!==0)for(var m=this.children.entries.slice(),x=0;x<m.length;x++){var T=m[x];T.active&&T.update(f,v)}},add:function(f,v){return v===void 0&&(v=!1),this.isFull()||(this.children.set(f),this.internalCreateCallback&&this.internalCreateCallback.call(this,f),this.createCallback&&this.createCallback.call(this,f),v&&(f.addToDisplayList(this.scene.sys.displayList),f.addToUpdateList()),f.on(l.DESTROY,this.remove,this)),this},addMultiple:function(f,v){if(v===void 0&&(v=!1),Array.isArray(f))for(var m=0;m<f.length;m++)this.add(f[m],v);return this},remove:function(f,v,m){return v===void 0&&(v=!1),m===void 0&&(m=!1),this.children.contains(f)?(this.children.delete(f),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,f),this.removeCallback&&this.removeCallback.call(this,f),f.off(l.DESTROY,this.remove,this),m?f.destroy():v&&(f.removeFromDisplayList(),f.removeFromUpdateList()),this):this},clear:function(f,v){f===void 0&&(f=!1),v===void 0&&(v=!1);for(var m=this.children,x=0;x<m.size;x++){var T=m.entries[x];T.off(l.DESTROY,this.remove,this),v?T.destroy():f&&(T.removeFromDisplayList(),T.removeFromUpdateList())}return this.children.clear(),this},contains:function(f){return this.children.contains(f)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(f,v,m,x){return t(this.children.entries,f,v,m,x)},getFirst:function(f,v,m,x,T,y,E){return this.getHandler(!0,1,f,v,m,x,T,y,E)},getFirstNth:function(f,v,m,x,T,y,E,w){return this.getHandler(!0,f,v,m,x,T,y,E,w)},getLast:function(f,v,m,x,T,y,E){return this.getHandler(!1,1,f,v,m,x,T,y,E)},getLastNth:function(f,v,m,x,T,y,E,w){return this.getHandler(!1,f,v,m,x,T,y,E,w)},getHandler:function(f,v,m,x,T,y,E,w,R){var C,A;m===void 0&&(m=!1),x===void 0&&(x=!1);var S=0,b=this.children.entries;if(f)for(A=0;A<b.length;A++)if((C=b[A]).active===m){if(++S===v)break}else C=null;else for(A=b.length-1;A>=0;A--)if((C=b[A]).active===m){if(++S===v)break}else C=null;return C?(typeof T=="number"&&(C.x=T),typeof y=="number"&&(C.y=y),C):x?this.create(T,y,E,w,R):null},get:function(f,v,m,x,T){return this.getFirst(!1,!0,f,v,m,x,T)},getFirstAlive:function(f,v,m,x,T,y){return this.getFirst(!0,f,v,m,x,T,y)},getFirstDead:function(f,v,m,x,T,y){return this.getFirst(!1,f,v,m,x,T,y)},playAnimation:function(f,v){return u.PlayAnimation(this.children.entries,f,v),this},isFull:function(){return this.maxSize!==-1&&this.children.size>=this.maxSize},countActive:function(f){f===void 0&&(f=!0);for(var v=0,m=0;m<this.children.size;m++)this.children.entries[m].active===f&&v++;return v},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var f=this.getTotalUsed();return(this.maxSize===-1?999999999999:this.maxSize)-f},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},propertyValueSet:function(f,v,m,x,T){return u.PropertyValueSet(this.children.entries,f,v,m,x,T),this},propertyValueInc:function(f,v,m,x,T){return u.PropertyValueInc(this.children.entries,f,v,m,x,T),this},setX:function(f,v){return u.SetX(this.children.entries,f,v),this},setY:function(f,v){return u.SetY(this.children.entries,f,v),this},setXY:function(f,v,m,x){return u.SetXY(this.children.entries,f,v,m,x),this},incX:function(f,v){return u.IncX(this.children.entries,f,v),this},incY:function(f,v){return u.IncY(this.children.entries,f,v),this},incXY:function(f,v,m,x){return u.IncXY(this.children.entries,f,v,m,x),this},shiftPosition:function(f,v,m){return u.ShiftPosition(this.children.entries,f,v,m),this},angle:function(f,v){return u.Angle(this.children.entries,f,v),this},rotate:function(f,v){return u.Rotate(this.children.entries,f,v),this},rotateAround:function(f,v){return u.RotateAround(this.children.entries,f,v),this},rotateAroundDistance:function(f,v,m){return u.RotateAroundDistance(this.children.entries,f,v,m),this},setAlpha:function(f,v){return u.SetAlpha(this.children.entries,f,v),this},setTint:function(f,v,m,x){return u.SetTint(this.children.entries,f,v,m,x),this},setOrigin:function(f,v,m,x){return u.SetOrigin(this.children.entries,f,v,m,x),this},scaleX:function(f,v){return u.ScaleX(this.children.entries,f,v),this},scaleY:function(f,v){return u.ScaleY(this.children.entries,f,v),this},scaleXY:function(f,v,m,x){return u.ScaleXY(this.children.entries,f,v,m,x),this},setDepth:function(f,v){return u.SetDepth(this.children.entries,f,v),this},setBlendMode:function(f){return u.SetBlendMode(this.children.entries,f),this},setHitArea:function(f,v){return u.SetHitArea(this.children.entries,f,v),this},shuffle:function(){return u.Shuffle(this.children.entries),this},kill:function(f){this.children.contains(f)&&f.setActive(!1)},killAndHide:function(f){this.children.contains(f)&&(f.setActive(!1),f.setVisible(!1))},setVisible:function(f,v,m){return u.SetVisible(this.children.entries,f,v,m),this},toggleVisible:function(){return u.ToggleVisible(this.children.entries),this},destroy:function(f,v){f===void 0&&(f=!1),v===void 0&&(v=!1),this.scene&&!this.ignoreDestroy&&(this.emit(l.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(v,f),this.scene=void 0,this.children=void 0)}});g.exports=d},57736:function(g,p,i){var u=i(78757),e=i(84262);u.register("group",function(l){return new e(this.scene,null,l)})},97058:function(g,p,i){var u=i(84262);i(66642).register("group",function(e,l){return this.updateList.add(new u(this.scene,e,l))})},86479:function(g,p,i){var u=i(69186),e=i(19506),l=i(38236),o=i(16217),t=new u({Extends:l,Mixins:[e.Alpha,e.BlendMode,e.Depth,e.Flip,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Size,e.TextureCrop,e.Tint,e.Transform,e.Visible,o],initialize:function(s,n,r,h,a){l.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(h,a),this.setPosition(n,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});g.exports=t},26681:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i),p.batchSprite(i,i.frame,u,e)}},16836:function(g,p,i){var u=i(90062),e=i(78757),l=i(7973),o=i(86479);e.register("image",function(t,s){t===void 0&&(t={});var n=l(t,"key",null),r=l(t,"frame",null),h=new o(this.scene,0,0,n,r);return s!==void 0&&(t.add=s),u(this.scene,h,t),h})},48950:function(g,p,i){var u=i(86479);i(66642).register("image",function(e,l,o,t){return this.displayList.add(new u(this.scene,e,l,o,t))})},16217:function(g,p,i){var u=i(45733),e=i(45733);u=i(84188),e=i(26681),g.exports={renderWebGL:u,renderCanvas:e}},84188:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i),this.pipeline.batchSprite(i,u,e)}},79948:function(g,p,i){var u=i(69186),e=i(62193),l=i(17232),o=i(25738),t=i(6704),s=new u({initialize:function(n,r,h,a){a===void 0&&(a=!1),this.propertyKey=r,this.propertyValue=h,this.defaultValue=h,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=a,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(n)},loadConfig:function(n,r){n===void 0&&(n={}),r&&(this.propertyKey=r),this.propertyValue=o(n,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(n){return this.propertyValue=n,this.setMethods()},setMethods:function(){var n=this.propertyValue,r=typeof n;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,r==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(n))this.onEmit=this.randomStaticValueEmit;else if(r==="function")this.emitOnly?this.onEmit=n:this.onUpdate=n;else if(r==="object"&&this.hasBoth(n,"start","end")){this.start=n.start,this.end=n.end;var h=this.has(n,"random");if(h&&(this.onEmit=this.randomRangedValueEmit),this.has(n,"steps"))this.steps=n.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var a=this.has(n,"ease")?n.ease:"Linear";this.ease=l(a,n.easeParams),h||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(r==="object"&&this.hasBoth(n,"min","max"))this.start=n.min,this.end=n.max,this.onEmit=this.randomRangedValueEmit;else if(r==="object"&&this.has(n,"random")){var c=n.random;Array.isArray(c)&&(this.start=c[0],this.end=c[1]),this.onEmit=this.randomRangedValueEmit}else r==="object"&&this.hasEither(n,"onEmit","onUpdate")&&(this.has(n,"onEmit")&&(this.onEmit=n.onEmit),this.has(n,"onUpdate")&&(this.onUpdate=n.onUpdate));return this},has:function(n,r){return n.hasOwnProperty(r)},hasBoth:function(n,r,h){return n.hasOwnProperty(r)&&n.hasOwnProperty(h)},hasEither:function(n,r,h){return n.hasOwnProperty(r)||n.hasOwnProperty(h)},defaultEmit:function(n,r,h){return h},defaultUpdate:function(n,r,h,a){return a},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var n=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[n]},randomRangedValueEmit:function(n,r){var h=e(this.start,this.end);return n&&n.data[r]&&(n.data[r].min=h),h},steppedEmit:function(){var n=this.counter,r=this.counter+(this.end-this.start)/this.steps;return this.counter=t(r,this.start,this.end),n},easedValueEmit:function(n,r){if(n&&n.data[r]){var h=n.data[r];h.min=this.start,h.max=this.end}return this.start},easeValueUpdate:function(n,r,h){var a=n.data[r];return(a.max-a.min)*this.ease(h)+a.min}});g.exports=s},76285:function(g,p,i){var u=i(69186),e=i(25738),l=new u({initialize:function(o,t,s,n,r){if(typeof o=="object"){var h=o;o=e(h,"x",0),t=e(h,"y",0),s=e(h,"power",0),n=e(h,"epsilon",100),r=e(h,"gravity",50)}else o===void 0&&(o=0),t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=100),r===void 0&&(r=50);this.x=o,this.y=t,this.active=!0,this._gravity=r,this._power=0,this._epsilon=0,this.power=s,this.epsilon=n},update:function(o,t){var s=this.x-o.x,n=this.y-o.y,r=s*s+n*n;if(r!==0){var h=Math.sqrt(r);r<this._epsilon&&(r=this._epsilon);var a=this._power*t/(r*h)*100;o.velocityX+=s*a,o.velocityY+=n*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var t=this.power;this._gravity=o,this.power=t}}});g.exports=l},8501:function(g,p,i){var u=i(69186),e=i(23407),l=i(76914),o=new u({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,s){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),this.x+=t===void 0?n.x.onEmit(this,"x"):t,this.y+=s===void 0?n.y.onEmit(this,"y"):s,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=n.speedX.onEmit(this,"speedX"),h=n.speedY?n.speedY.onEmit(this,"speedY"):r;if(n.radial){var a=e(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(r),this.velocityY=Math.sin(a)*Math.abs(h)}else if(n.moveTo){var c=n.moveToX.onEmit(this,"moveToX"),d=n.moveToY?n.moveToY.onEmit(this,"moveToY"):c,f=Math.atan2(d-this.y,c-this.x),v=l(this.x,this.y,c,d)/(this.life/1e3);this.velocityX=Math.cos(f)*v,this.velocityY=Math.sin(f)*v}else this.velocityX=r,this.velocityY=h;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=e(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(t,s,n,r){var h=this.velocityX,a=this.velocityY,c=this.accelerationX,d=this.accelerationY,f=this.maxVelocityX,v=this.maxVelocityY;h+=t.gravityX*n,a+=t.gravityY*n,c&&(h+=c*n),d&&(a+=d*n),h>f?h=f:h<-f&&(h=-f),a>v?a=v:a<-v&&(a=-v),this.velocityX=h,this.velocityY=a;for(var m=0;m<r.length;m++)r[m].update(this,s,n)},checkBounds:function(t){var s=t.bounds,n=-this.bounce;this.x<s.x&&t.collideLeft?(this.x=s.x,this.velocityX*=n):this.x>s.right&&t.collideRight&&(this.x=s.right,this.velocityX*=n),this.y<s.y&&t.collideTop?(this.y=s.y,this.velocityY*=n):this.y>s.bottom&&t.collideBottom&&(this.y=s.bottom,this.velocityY*=n)},update:function(t,s,n){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,h=1-this.lifeCurrent/this.life;return this.lifeT=h,this.computeVelocity(r,t,s,n),this.x+=this.velocityX*s,this.y+=this.velocityY*s,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",h,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",h,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",h,this.angle),this.rotation=e(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",h,this.alpha),this.tint=r.tint.onUpdate(this,"tint",h,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});g.exports=o},32470:function(g,p,i){var u=i(87626),e=i(69186),l=i(19506),o=i(79919),t=i(38466),s=i(79948),n=i(25738),r=i(88829),h=i(86908),a=i(60419),c=i(8501),d=i(52372),f=i(75380),v=i(46414),m=i(17321),x=i(6704),T=new e({Mixins:[l.BlendMode,l.Mask,l.ScrollFactor,l.Visible],initialize:function(y,E){this.manager=y,this.texture=y.texture,this.frames=[y.defaultFrame],this.defaultFrame=y.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new s(E,"x",0,!0),this.y=new s(E,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new s(E,"accelerationX",0,!0),this.accelerationY=new s(E,"accelerationY",0,!0),this.maxVelocityX=new s(E,"maxVelocityX",1e4,!0),this.maxVelocityY=new s(E,"maxVelocityY",1e4,!0),this.speedX=new s(E,"speedX",0,!0),this.speedY=new s(E,"speedY",0,!0),this.moveTo=!1,this.moveToX=new s(E,"moveToX",0,!0),this.moveToY=new s(E,"moveToY",0,!0),this.bounce=new s(E,"bounce",0,!0),this.scaleX=new s(E,"scaleX",1),this.scaleY=new s(E,"scaleY",1),this.tint=new s(E,"tint",16777215),this.alpha=new s(E,"alpha",1),this.lifespan=new s(E,"lifespan",1e3,!0),this.angle=new s(E,"angle",{min:0,max:360},!0),this.rotate=new s(E,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new s(E,"quantity",1,!0),this.delay=new s(E,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=u.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,E&&this.fromJSON(E)},fromJSON:function(y){if(!y)return this;var E=0,w="";for(E=0;E<this.configFastMap.length;E++)w=this.configFastMap[E],a(y,w)&&(this[w]=n(y,w));for(E=0;E<this.configOpMap.length;E++)w=this.configOpMap[E],a(y,w)&&this[w].loadConfig(y);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,a(y,"speed")&&(this.speedX.loadConfig(y,"speed"),this.speedY=null),(h(y,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),a(y,"scale")&&(this.scaleX.loadConfig(y,"scale"),this.scaleY=null),a(y,"callbackScope")){var R=n(y,"callbackScope",null);this.emitCallbackScope=R,this.deathCallbackScope=R}return a(y,"emitZone")&&this.setEmitZone(y.emitZone),a(y,"deathZone")&&this.setDeathZone(y.deathZone),a(y,"bounds")&&this.setBounds(y.bounds),a(y,"followOffset")&&this.followOffset.setFromObject(n(y,"followOffset",0)),a(y,"frame")&&this.setFrame(y.frame),a(y,"reserve")&&this.reserve(y.reserve),this},toJSON:function(y){y===void 0&&(y={});var E=0,w="";for(E=0;E<this.configFastMap.length;E++)y[w=this.configFastMap[E]]=this[w];for(E=0;E<this.configOpMap.length;E++)this[w=this.configOpMap[E]]&&(y[w]=this[w].toJSON());return this.speedY||(delete y.speedX,y.speed=this.speedX.toJSON()),this.scaleY||(delete y.scaleX,y.scale=this.scaleX.toJSON()),y},startFollow:function(y,E,w,R){return E===void 0&&(E=0),w===void 0&&(w=0),R===void 0&&(R=!1),this.follow=y,this.followOffset.set(E,w),this.trackVisible=R,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return r(this.frames);var y=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=x(this.currentFrame+1,0,this._frameLength)),y},setFrame:function(y,E,w){E===void 0&&(E=!0),w===void 0&&(w=1),this.randomFrame=E,this.frameQuantity=w,this.currentFrame=0,this._frameCounter=0;var R=typeof y;if(Array.isArray(y)||R==="string"||R==="number")this.manager.setEmitterFrames(y,this);else if(R==="object"){var C=y;(y=n(C,"frames",null))&&this.manager.setEmitterFrames(y,this);var A=n(C,"cycle",!1);this.randomFrame=!A,this.frameQuantity=n(C,"quantity",w)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(y){return y===void 0&&(y=!0),this.radial=y,this},setPosition:function(y,E){return this.x.onChange(y),this.y.onChange(E),this},setBounds:function(y,E,w,R){if(typeof y=="object"){var C=y;y=C.x,E=C.y,w=a(C,"w")?C.w:C.width,R=a(C,"h")?C.h:C.height}return this.bounds?this.bounds.setTo(y,E,w,R):this.bounds=new f(y,E,w,R),this},setSpeedX:function(y){return this.speedX.onChange(y),this.radial=!1,this},setSpeedY:function(y){return this.speedY&&(this.speedY.onChange(y),this.radial=!1),this},setSpeed:function(y){return this.speedX.onChange(y),this.speedY=null,this.radial=!0,this},setScaleX:function(y){return this.scaleX.onChange(y),this},setScaleY:function(y){return this.scaleY.onChange(y),this},setScale:function(y){return this.scaleX.onChange(y),this.scaleY=null,this},setGravityX:function(y){return this.gravityX=y,this},setGravityY:function(y){return this.gravityY=y,this},setGravity:function(y,E){return this.gravityX=y,this.gravityY=E,this},setAlpha:function(y){return this.alpha.onChange(y),this},setTint:function(y){return this.tint.onChange(y),this},setEmitterAngle:function(y){return this.angle.onChange(y),this},setAngle:function(y){return this.angle.onChange(y),this},setLifespan:function(y){return this.lifespan.onChange(y),this},setQuantity:function(y){return this.quantity.onChange(y),this},setFrequency:function(y,E){return this.frequency=y,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(y){if(y===void 0)this.emitZone=null;else{var E=n(y,"type","random"),w=n(y,"source",null);switch(E){case"random":this.emitZone=new d(w);break;case"edge":var R=n(y,"quantity",1),C=n(y,"stepRate",0),A=n(y,"yoyo",!1),S=n(y,"seamless",!0);this.emitZone=new t(w,R,C,A,S)}}return this},setDeathZone:function(y){if(y===void 0)this.deathZone=null;else{var E=n(y,"type","onEnter"),w=n(y,"source",null);if(w&&typeof w.contains=="function"){var R=E==="onEnter";this.deathZone=new o(w,R)}}return this},reserve:function(y){for(var E=this.dead,w=0;w<y;w++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(y,E){return y===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof y=="function"&&(this.emitCallback=y,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(y,E){return y===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof y=="function"&&(this.deathCallback=y,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var y=this.dead,E=this.alive;E.length>0;)y.push(E.pop());return this},forEachAlive:function(y,E){for(var w=this.alive,R=w.length,C=0;C<R;++C)y.call(E,w[C],this);return this},forEachDead:function(y,E){for(var w=this.dead,R=w.length,C=0;C<R;++C)y.call(E,w[C],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return v(this.alive,this.depthSortCallback),this},flow:function(y,E){return E===void 0&&(E=1),this.frequency=y,this.quantity.onChange(E),this.start()},explode:function(y,E,w){return this.frequency=-1,this.emitParticle(y,E,w)},emitParticleAt:function(y,E,w){return this.emitParticle(w,y,E)},emitParticle:function(y,E,w){if(!this.atLimit()){y===void 0&&(y=this.quantity.onEmit());for(var R=this.dead,C=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:w,S=0;S<y;S++){var b=R.pop();if(b||(b=new this.particleClass(this)),b.fire(C,A),this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this),this.atLimit())break}return b}},preUpdate:function(y,E){var w=(E*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var R=this.manager.getProcessors(),C=this.alive,A=this.dead,S=0,b=[],_=C.length;for(S=0;S<_;S++){var P=C[S];P.update(E,w,R)&&b.push({index:S,particle:P})}if((_=b.length)>0){var D=this.deathCallback,O=this.deathCallbackScope;for(S=_-1;S>=0;S--){var F=b[S];C.splice(F.index,1),A.push(F.particle),D&&D.call(O,F.particle),F.particle.resetPosition()}}this.on&&(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(y,E){return y.y-E.y}});g.exports=T},81404:function(g,p,i){var u=i(69186),e=i(19506),l=i(38236),o=i(76285),t=i(49469),s=i(32470),n=i(31890),r=new u({Extends:l,Mixins:[e.Depth,e.Mask,e.Pipeline,e.Transform,e.Visible,n],initialize:function(h,a,c,d){if(l.call(this,h,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],c===null||typeof c!="object"&&!Array.isArray(c)||(d=c,c=null),this.setTexture(a,c),this.initPipeline(),this.emitters=new t(this),this.wells=new t(this),d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this.createEmitter(d[f])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(h,a){return this.texture=this.scene.sys.textures.get(h),this.setFrame(a)},setFrame:function(h){this.frame=this.texture.get(h);var a=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),c=[];return a.forEach(function(d){c.push(d.name)}),this.frameNames=c,this.defaultFrame=this.frame,this},setEmitterFrames:function(h,a){Array.isArray(h)||(h=[h]);var c=a.frames;c.length=0;for(var d=0;d<h.length;d++){var f=h[d];this.frameNames.indexOf(f)!==-1&&c.push(this.texture.get(f))}return c.length>0?a.defaultFrame=c[0]:a.defaultFrame=this.defaultFrame,this},addEmitter:function(h){return this.emitters.add(h)},createEmitter:function(h){return this.addEmitter(new s(this,h))},removeEmitter:function(h){return this.emitters.remove(h,!0)},addGravityWell:function(h){return this.wells.add(h)},createGravityWell:function(h){return this.addGravityWell(new o(h))},emitParticle:function(h,a,c){for(var d=this.emitters.list,f=0;f<d.length;f++){var v=d[f];v.active&&v.emitParticle(h,a,c)}return this},emitParticleAt:function(h,a,c){return this.emitParticle(c,h,a)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(h,a){a*=this.timeScale;for(var c=this.emitters.list,d=0;d<c.length;d++){var f=c[d];f.active&&f.preUpdate(h,a)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});g.exports=r},56367:function(g,p,i){var u=i(9329),e=new u,l=new u,o=new u,t=new u;g.exports=function(s,n,r,h){var a=n.emitters.list,c=a.length;if(c!==0){var d=e.copyFrom(r.matrix),f=l,v=o,m=t;h?(m.loadIdentity(),m.multiply(h),m.translate(n.x,n.y),m.rotate(n.rotation),m.scale(n.scaleX,n.scaleY)):m.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);for(var x=s.currentContext,T=r.roundPixels,y=0;y<c;y++){var E=a[y],w=E.alive,R=w.length;if(E.visible&&R!==0){r.addToRenderList(E);var C=E.scrollFactorX,A=E.scrollFactorY;x.save(),x.globalCompositeOperation=s.blendModes[E.blendMode];for(var S=0;S<R;S++){var b=w[S],_=b.alpha*r.alpha;if(!(_<=0)){v.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),d.copyFrom(r.matrix),d.multiplyWithOffset(m,-r.scrollX*C,-r.scrollY*A),v.e=b.x,v.f=b.y,d.multiply(v,f);var P=b.frame,D=P.canvasData,O=-P.halfWidth,F=-P.halfHeight;x.globalAlpha=_,x.save(),f.setToContext(x),T&&(O=Math.round(O),F=Math.round(F)),x.imageSmoothingEnabled=!(!s.antialias||P.source.scaleMode),x.drawImage(P.source.image,D.x,D.y,D.width,D.height,O,F,D.width,D.height),x.restore()}}x.restore()}}}}},12495:function(g,p,i){var u=i(78757),e=i(7973),l=i(25738),o=i(81404);u.register("particles",function(t,s){t===void 0&&(t={});var n=e(t,"key",null),r=e(t,"frame",null),h=l(t,"emitters",null),a=new o(this.scene,n,r,h);return s!==void 0&&(t.add=s),l(t,"add",!1)?this.displayList.add(a):this.updateList.add(a),a})},65419:function(g,p,i){var u=i(66642),e=i(81404);u.register("particles",function(l,o,t){return this.displayList.add(new e(this.scene,l,o,t))})},31890:function(g,p,i){var u=i(45733),e=i(45733);u=i(99281),e=i(56367),g.exports={renderWebGL:u,renderCanvas:e}},99281:function(g,p,i){var u=i(9329),e=i(64564),l=new u,o=new u,t=new u,s=new u;g.exports=function(n,r,h,a){var c=r.emitters.list,d=c.length;if(d!==0){var f=n.pipelines.set(r.pipeline),v=l,m=o,x=t,T=s;a?(T.loadIdentity(),T.multiply(a),T.translate(r.x,r.y),T.rotate(r.rotation),T.scale(r.scaleX,r.scaleY)):T.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var y=h.roundPixels,E=r.defaultFrame.glTexture,w=e.getTintAppendFloatAlpha,R=f.setGameObject(r,r.defaultFrame);n.pipelines.preBatch(r);for(var C=0;C<d;C++){var A=c[C],S=A.alive,b=S.length;if(A.visible&&b!==0){h.addToRenderList(A);var _=A.scrollFactorX,P=A.scrollFactorY;n.setBlendMode(A.blendMode),A.mask&&(A.mask.preRenderWebGL(n,A,h),n.pipelines.set(r.pipeline));for(var D=0;D<b;D++){var O=S[D],F=O.alpha*h.alpha;if(!(F<=0)){x.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),v.copyFrom(h.matrix),v.multiplyWithOffset(T,-h.scrollX*_,-h.scrollY*P),x.e=O.x,x.f=O.y,v.multiply(x,m);var N=O.frame,k=-N.halfWidth,L=-N.halfHeight,U=k+N.width,Y=L+N.height,B=m.getXRound(k,L,y),W=m.getYRound(k,L,y),G=m.getXRound(k,Y,y),X=m.getYRound(k,Y,y),q=m.getXRound(U,Y,y),j=m.getYRound(U,Y,y),V=m.getXRound(U,L,y),K=m.getYRound(U,L,y),H=w(O.tint,F);f.batchQuad(A,B,W,G,X,q,j,V,K,N.u0,N.v0,N.u1,N.v1,H,H,H,H,0,E,R)}}A.mask&&A.mask.postRenderWebGL(n,h)}}n.pipelines.postBatch(r)}}},42854:function(g,p,i){g.exports={EmitterOp:i(79948),GravityWell:i(76285),Particle:i(8501),ParticleEmitter:i(32470),ParticleEmitterManager:i(81404),Zones:i(79136)}},79919:function(g,p,i){var u=new(i(69186))({initialize:function(e,l){this.source=e,this.killOnEnter=l},willKill:function(e){var l=this.source.contains(e.x,e.y);return l&&this.killOnEnter||!l&&!this.killOnEnter}});g.exports=u},38466:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),this.source=e,this.points=[],this.quantity=l,this.stepRate=o,this.yoyo=t,this.counter=-1,this.seamless=s,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var e=this.points[0],l=this.points[this.points.length-1];e.x===l.x&&e.y===l.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(e){return this.source=e,this.updateSource()},getPoint:function(e){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(e.x=l.x,e.y=l.y)}});g.exports=u},52372:function(g,p,i){var u=i(69186),e=i(17321),l=new u({initialize:function(o){this.source=o,this._tempVec=new e},getPoint:function(o){var t=this._tempVec;this.source.getRandomPoint(t),o.x=t.x,o.y=t.y}});g.exports=l},79136:function(g,p,i){g.exports={DeathZone:i(79919),EdgeZone:i(38466),RandomZone:i(52372)}},131:function(g,p,i){var u=i(87626),e=i(43929),l=i(55579),o=i(69186),t=i(19506),s=i(11318),n=i(79175),r=i(38236),h=i(45733),a=i(46098),c=i(67454),d=i(50666),f=i(64564),v=i(61004),m=new o({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.ComputedSize,t.Crop,t.Depth,t.Flip,t.GetBounds,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Tint,t.Transform,t.Visible,c],initialize:function(x,T,y,E,w,R,C){T===void 0&&(T=0),y===void 0&&(y=0),E===void 0&&(E=32),w===void 0&&(w=32),r.call(this,x,"RenderTexture"),this.renderer=x.sys.renderer,this.textureManager=x.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,R===void 0?(this.canvas=l.create2D(this,E,w),this.texture=x.sys.textures.addCanvas(v(),this.canvas),this.frame=this.texture.get()):(this.texture=x.sys.textures.get(R),this.frame=this.texture.get(C),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new e(0,0,E,w),this.renderTarget=null;var A=this.renderer;A?A.type===s.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new d(A,E,w,1,0,!1)):A.type===s.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=h,this.camera.setScene(x),this.setPosition(T,y),R===void 0&&this.setSize(E,w),this.setOrigin(0,0),this.initPipeline(a.SINGLE_PIPELINE)},setSize:function(x,T){return this.resize(x,T)},resize:function(x,T){T===void 0&&(T=x);var y=this.frame;if(x!==this.width||T!==this.height){if(y.name==="__BASE"){this.canvas.width=x,this.canvas.height=T,this.texture.width=x,this.texture.height=T;var E=this.renderTarget;E&&(E.resize(x,T),y.glTexture=E.texture,y.source.isRenderTexture=!0,y.source.isGLTexture=!0,y.source.glTexture=E.texture),this.camera.setSize(x,T),y.source.width=x,y.source.height=T,y.setSize(x,T),this.width=x,this.height=T}}else{var w=this.texture.getSourceImage();y.cutX+x>w.width&&(x=w.width-y.cutX),y.cutY+T>w.height&&(T=w.height-y.cutY),y.setSize(x,T,y.cutX,y.cutY)}this.updateDisplayOrigin();var R=this.input;return R&&!R.customHitArea&&(R.hitArea.width=x,R.hitArea.height=T),this},setGlobalTint:function(x){return this.globalTint=x,this},setGlobalAlpha:function(x){return this.globalAlpha=x,this},saveTexture:function(x){return this.textureManager.renameTexture(this.texture.key,x),this._saved=!0,this.texture},fill:function(x,T,y,E,w,R){var C=this.frame,A=this.camera,S=this.renderer;T===void 0&&(T=1),y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=C.cutWidth),R===void 0&&(R=C.cutHeight);var b=(x>>16&255)/255,_=(x>>8&255)/255,P=(255&x)/255,D=this.renderTarget;if(A.preRender(),D){D.bind(!0);var O=this.pipeline;O.manager.set(O);var F=D.width,N=D.height,k=S.width/F,L=S.height/N;O.drawFillRect(y*k,E*L,w*k,R*L,f.getTintFromFloats(P,_,b,1),T),D.unbind(!0)}else{var U=this.context;S.setContext(U),U.fillStyle="rgba("+b+","+_+","+P+","+T+")",U.fillRect(y+C.cutX,E+C.cutY,w,R),S.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.renderTarget;if(x)x.clear();else{var T=this.context;T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),T.restore()}this.dirty=!1}return this},erase:function(x,T,y){return this._eraseMode=!0,this.draw(x,T,y,1,16777215),this._eraseMode=!1,this},draw:function(x,T,y,E,w){return this.beginDraw(),this.batchDraw(x,T,y,E,w),this.endDraw(),this},drawFrame:function(x,T,y,E,w,R){return this.beginDraw(),this.batchDrawFrame(x,T,y,E,w,R),this.endDraw(),this},beginDraw:function(){var x=this.camera,T=this.renderer,y=this.renderTarget;return x.preRender(),y?T.beginCapture(y.width,y.height):T.setContext(this.context),this},batchDraw:function(x,T,y,E,w){return E===void 0&&(E=this.globalAlpha),w=w===void 0?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(w>>16)+(65280&w)+((255&w)<<16),Array.isArray(x)||(x=[x]),this.batchList(x,T,y,E,w),this},batchDrawFrame:function(x,T,y,E,w,R){y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=this.globalAlpha),R=R===void 0?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(R>>16)+(65280&R)+((255&R)<<16);var C=this.textureManager.getFrame(x,T);return C&&(this.renderTarget?this.pipeline.batchTextureFrame(C,y,E,R,w,this.camera.matrix,null):this.batchTextureFrame(C,y+this.frame.cutX,E+this.frame.cutY,w,R)),this},endDraw:function(x){x===void 0&&(x=this._eraseMode);var T=this.renderer,y=this.renderTarget;if(y){var E=T.endCapture();T.pipelines.setUtility().blitFrame(E,y,1,!1,!1,x),T.resetScissor(),T.resetViewport()}else T.setContext();return this.dirty=!0,this},batchList:function(x,T,y,E,w){for(var R=0;R<x.length;R++){var C=x[R];C&&C!==this&&(C.renderWebGL||C.renderCanvas?this.drawGameObject(C,T,y):C.isParent||C.list?this.batchGroup(C.getChildren(),T,y):typeof C=="string"?this.batchTextureFrameKey(C,null,T,y,E,w):C instanceof n?this.batchTextureFrame(C,T,y,E,w):Array.isArray(C)&&this.batchList(C,T,y,E,w))}},batchGroup:function(x,T,y){T===void 0&&(T=0),y===void 0&&(y=0),T+=this.frame.cutX,y+=this.frame.cutY;for(var E=0;E<x.length;E++){var w=x[E];if(w.willRender(this.camera)){var R=w.x+T,C=w.y+y;this.drawGameObject(w,R,C)}}},batchGameObjectWebGL:function(x,T,y){T===void 0&&(T=x.x),y===void 0&&(y=x.y);var E=x.x,w=x.y;x.setPosition(T+this.frame.cutX,y+this.frame.cutY),x.renderDirect?x.renderDirect(this.renderer,x,this.camera):x.renderWebGL(this.renderer,x,this.camera),x.setPosition(E,w)},batchGameObjectCanvas:function(x,T,y){T===void 0&&(T=x.x),y===void 0&&(y=x.y);var E=x.x,w=x.y;if(this._eraseMode){var R=x.blendMode;x.blendMode=u.ERASE}x.setPosition(T+this.frame.cutX,y+this.frame.cutY),x.renderCanvas(this.renderer,x,this.camera,null),x.setPosition(E,w),this._eraseMode&&(x.blendMode=R)},batchTextureFrameKey:function(x,T,y,E,w,R){var C=this.textureManager.getFrame(x,T);C&&this.batchTextureFrame(C,y,E,w,R)},batchTextureFrame:function(x,T,y,E,w){if(T===void 0&&(T=0),y===void 0&&(y=0),T+=this.frame.cutX,y+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(x,T,y,w,E,this.camera.matrix,null);else{var R=this.context,C=x.canvasData,A=x.source.image,S=this.camera.matrix;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=E,S.setToContext(R),R.drawImage(A,C.x,C.y,C.width,C.height,T,y,C.width,C.height),R.restore()}},snapshotArea:function(x,T,y,E,w,R,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,w,!1,x,T,y,E,R,C):this.renderer.snapshotCanvas(this.canvas,w,!1,x,T,y,E,R,C),this},snapshot:function(x,T,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,x,!1,0,0,this.width,this.height,T,y):this.renderer.snapshotCanvas(this.canvas,x,!1,0,0,this.width,this.height,T,y),this},snapshotPixel:function(x,T,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!0,x,T):this.renderer.snapshotCanvas(this.canvas,y,!0,x,T),this},preDestroy:function(){this._saved||(l.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});g.exports=m},11721:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i),p.batchSprite(i,i.frame,u,e)}},34387:function(g,p,i){var u=i(90062),e=i(78757),l=i(7973),o=i(131);e.register("renderTexture",function(t,s){t===void 0&&(t={});var n=l(t,"x",0),r=l(t,"y",0),h=l(t,"width",32),a=l(t,"height",32),c=l(t,"key",void 0),d=l(t,"frame",void 0),f=new o(this.scene,n,r,h,a,c,d);return s!==void 0&&(t.add=s),u(this.scene,f,t),f})},35346:function(g,p,i){var u=i(66642),e=i(131);u.register("renderTexture",function(l,o,t,s,n,r){return this.displayList.add(new e(this.scene,l,o,t,s,n,r))})},67454:function(g,p,i){var u=i(45733),e=i(45733);u=i(49988),e=i(11721),g.exports={renderWebGL:u,renderCanvas:e}},49988:function(g,p,i){var u=i(64564);g.exports=function(e,l,o,t){o.addToRenderList(l);var s=o.alpha,n=l.renderTarget,r=n.width,h=n.height,a=u.getTintAppendFloatAlpha,c=e.pipelines.set(l.pipeline),d=c.setTexture2D(n.texture);e.pipelines.preBatch(l),c.batchTexture(l,n.texture,r,h,l.x,l.y,r,h,l.scaleX,l.scaleY,l.rotation,l.flipX,!l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,r,h,a(l.tintTopLeft,s*l._alphaTL),a(l.tintTopRight,s*l._alphaTR),a(l.tintBottomLeft,s*l._alphaBL),a(l.tintBottomRight,s*l._alphaBR),l.tintFill,0,0,o,t,!0,d),e.resetTextures(),e.pipelines.postBatch(l)}},33568:function(g,p,i){var u=i(69186),e=i(19506),l=i(38236),o=i(25738),t=i(72646),s=i(65157),n=i(63723),r=i(9329),h=new u({Extends:l,Mixins:[e.ComputedSize,e.Depth,e.GetBounds,e.Mask,e.Origin,e.ScrollFactor,e.Transform,e.Visible,n],initialize:function(a,c,d,f,v,m,x,T){d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=128),m===void 0&&(m=128),l.call(this,a,"Shader"),this.blendMode=-1,this.shader;var y=a.sys.renderer;this.renderer=y,this.gl=y.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=y.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=y.width,this._rendererHeight=y.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(d,f),this.setSize(v,m),this.setOrigin(.5,.5),this.setShader(c,x,T)},willRender:function(a){return!!this.renderToTexture||!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setRenderToTexture:function(a,c){if(c===void 0&&(c=!1),!this.renderToTexture){var d=this.width,f=this.height,v=this.renderer;this.glTexture=v.createTextureFromSource(null,d,f,0),this.glTexture.flipY=c,this.framebuffer=v.createFramebuffer(d,f,this.glTexture,!1),this._rendererWidth=d,this._rendererHeight=f,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),a&&(this.texture=this.scene.sys.textures.addGLTexture(a,this.glTexture,d,f))}return this.shader&&(v.pipelines.clear(),this.load(),this.flush(),v.pipelines.rebind()),this},setShader:function(a,c,d){if(c===void 0&&(c=[]),typeof a=="string"){var f=this.scene.sys.cache.shader;if(!f.has(a))return console.warn("Shader missing: "+a),this;this.shader=f.get(a)}else this.shader=a;var v=this.gl,m=this.renderer;this.program&&v.deleteProgram(this.program);var x=m.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);v.uniformMatrix4fv(v.getUniformLocation(x,"uViewMatrix"),!1,this.viewMatrix),v.uniformMatrix4fv(v.getUniformLocation(x,"uProjectionMatrix"),!1,this.projectionMatrix),v.uniform2f(v.getUniformLocation(x,"uResolution"),this.width,this.height),this.program=x;var T=new Date,y={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),60*T.getHours()*60+60*T.getMinutes()+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=t(!0,{},this.shader.uniforms,y):this.uniforms=y;for(var E=0;E<4;E++)c[E]&&this.setSampler2D("iChannel"+E,c[E],E,d);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(a){return this.pointer=a,this},projOrtho:function(a,c,d,f){var v=1/(a-c),m=1/(d-f),x=this.projectionMatrix;x[0]=-2*v,x[5]=-2*m,x[10]=-.001,x[12]=(a+c)*v,x[13]=(f+d)*m,x[14]=-0;var T=this.program,y=this.gl;this.renderer.setProgram(T),y.uniformMatrix4fv(y.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=c,this._rendererHeight=d},initUniforms:function(){var a=this.gl,c=this.renderer.glFuncMap,d=this.program;for(var f in this._textureCount=0,this.uniforms){var v=this.uniforms[f],m=v.type,x=c[m];v.uniformLocation=a.getUniformLocation(d,f),m!=="sampler2D"&&(v.glMatrix=x.matrix,v.glValueLength=x.length,v.glFunc=x.func)}},setSampler2DBuffer:function(a,c,d,f,v,m){v===void 0&&(v=0),m===void 0&&(m={});var x=this.uniforms[a];return x.value=c,m.width=d,m.height=f,x.textureData=m,this._textureCount=v,this.initSampler2D(x),this},setSampler2D:function(a,c,d,f){d===void 0&&(d=0);var v=this.scene.sys.textures;if(v.exists(c)){var m=v.getFrame(c);if(m.glTexture&&m.glTexture.isRenderTexture)return this.setSampler2DBuffer(a,m.glTexture,m.width,m.height,d,f);var x=this.uniforms[a],T=m.source;x.textureKey=c,x.source=T.image,x.value=m.glTexture,T.isGLTexture&&(f||(f={}),f.width=T.width,f.height=T.height),f&&(x.textureData=f),this._textureCount=d,this.initSampler2D(x)}return this},setUniform:function(a,c){return s(this.uniforms,a,c),this},getUniform:function(a){return o(this.uniforms,a,null)},setChannel0:function(a,c){return this.setSampler2D("iChannel0",a,0,c)},setChannel1:function(a,c){return this.setSampler2D("iChannel1",a,1,c)},setChannel2:function(a,c){return this.setSampler2D("iChannel2",a,2,c)},setChannel3:function(a,c){return this.setSampler2D("iChannel3",a,3,c)},initSampler2D:function(a){if(a.value){var c=this.gl;c.activeTexture(c.TEXTURE0+this._textureCount),c.bindTexture(c.TEXTURE_2D,a.value);var d=a.textureData;if(d&&!a.value.isRenderTexture){var f=c[o(d,"magFilter","linear").toUpperCase()],v=c[o(d,"minFilter","linear").toUpperCase()],m=c[o(d,"wrapS","repeat").toUpperCase()],x=c[o(d,"wrapT","repeat").toUpperCase()],T=c[o(d,"format","rgba").toUpperCase()];if(d.repeat&&(m=c.REPEAT,x=c.REPEAT),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width){var y=o(d,"width",512),E=o(d,"height",2),w=o(d,"border",0);c.texImage2D(c.TEXTURE_2D,0,T,y,E,w,T,c.UNSIGNED_BYTE,null)}else c.texImage2D(c.TEXTURE_2D,0,T,c.RGBA,c.UNSIGNED_BYTE,a.source);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,v),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,m),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,x)}this.renderer.setProgram(this.program),c.uniform1i(a.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var a,c,d,f,v,m=this.gl,x=this.uniforms,T=0;for(var y in x)d=(a=x[y]).glFunc,c=a.glValueLength,f=a.uniformLocation,(v=a.value)!==null&&(c===1?a.glMatrix?d.call(m,f,a.transpose,v):d.call(m,f,v):c===2?d.call(m,f,v.x,v.y):c===3?d.call(m,f,v.x,v.y,v.z):c===4?d.call(m,f,v.x,v.y,v.z,v.w):a.type==="sampler2D"&&(m.activeTexture(m.TEXTURE0+T),m.bindTexture(m.TEXTURE_2D,v),m.uniform1i(f,T),T++))},load:function(a){var c=this.gl,d=this.width,f=this.height,v=this.renderer,m=this.program,x=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,y=-this._displayOriginY;x[0]=a[0],x[1]=a[1],x[4]=a[2],x[5]=a[3],x[8]=a[4],x[9]=a[5],x[12]=x[0]*T+x[4]*y,x[13]=x[1]*T+x[5]*y}c.useProgram(m),c.uniformMatrix4fv(c.getUniformLocation(m,"uViewMatrix"),!1,x),c.uniform2f(c.getUniformLocation(m,"uResolution"),this.width,this.height);var E=this.uniforms,w=E.resolution;w.value.x=d,w.value.y=f,E.time.value=v.game.loop.getDuration();var R=this.pointer;if(R){var C=E.mouse,A=R.x/d,S=1-R.y/f;C.value.x=A.toFixed(2),C.value.y=S.toFixed(2)}this.syncUniforms()},flush:function(){var a=this.width,c=this.height,d=this.program,f=this.gl,v=this.vertexBuffer,m=this.renderer,x=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(m.setFramebuffer(this.framebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)),f.bindBuffer(f.ARRAY_BUFFER,v);var T=f.getAttribLocation(d,"inPosition");T!==-1&&(f.enableVertexAttribArray(T),f.vertexAttribPointer(T,2,f.FLOAT,!1,x,0));var y=this.vertexViewF32;y[3]=c,y[4]=a,y[5]=c,y[8]=a,y[9]=c,y[10]=a,f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,6*x)),f.drawArrays(f.TRIANGLES,0,6),this.renderToTexture&&m.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var a=this.gl;a.deleteProgram(this.program),a.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});g.exports=h},64012:function(g){g.exports=function(){}},89775:function(g,p,i){var u=i(33568);i(66642).register("shader",function(e,l,o,t,s,n,r){return this.displayList.add(new u(this.scene,e,l,o,t,s,n,r))})},63723:function(g,p,i){var u=i(45733),e=i(45733);u=i(47989),e=i(64012),g.exports={renderWebGL:u,renderCanvas:e}},47989:function(g,p,i){var u=i(3142);g.exports=function(e,l,o,t){if(l.shader){if(o.addToRenderList(l),e.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var s=u(l,o,t).calc;e.width===l._rendererWidth&&e.height===l._rendererHeight||l.projOrtho(0,e.width,e.height,0),l.load(s.matrix),l.flush()}e.pipelines.rebind()}}},83131:function(g,p,i){var u=i(64564);g.exports=function(e,l,o,t,s,n){for(var r=u.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*t),h=o.pathData,a=o.pathIndexes,c=0;c<a.length;c+=3){var d=2*a[c],f=2*a[c+1],v=2*a[c+2],m=h[d+0]-s,x=h[d+1]-n,T=h[f+0]-s,y=h[f+1]-n,E=h[v+0]-s,w=h[v+1]-n,R=l.getX(m,x),C=l.getY(m,x),A=l.getX(T,y),S=l.getY(T,y),b=l.getX(E,w),_=l.getY(E,w);e.batchTri(o,R,C,A,S,b,_,0,0,1,1,r,r,r,2)}}},42236:function(g){g.exports=function(p,i,u,e){var l=u||i.fillColor,o=e||i.fillAlpha,t=(16711680&l)>>>16,s=(65280&l)>>>8,n=255&l;p.fillStyle="rgba("+t+","+s+","+n+","+o+")"}},54092:function(g){g.exports=function(p,i,u,e){var l=u||i.strokeColor,o=e||i.strokeAlpha,t=(16711680&l)>>>16,s=(65280&l)>>>8,n=255&l;p.strokeStyle="rgba("+t+","+s+","+n+","+o+")",p.lineWidth=i.lineWidth}},56098:function(g,p,i){var u=i(69186),e=i(19506),l=i(38236),o=i(97501),t=new u({Extends:l,Mixins:[e.AlphaSingle,e.BlendMode,e.Depth,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Transform,e.Visible],initialize:function(s,n,r){n===void 0&&(n="Shape"),l.call(this,s,n),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(s,n,r){return r===void 0&&(r=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=n,this.strokeAlpha=r,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},setSize:function(s,n){return this.width=s,this.height=n,this},setDisplaySize:function(s,n){return this.displayWidth=s,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}}});g.exports=t},29980:function(g,p,i){var u=i(64564);g.exports=function(e,l,o,t,s){var n=e.strokeTint,r=u.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*o);n.TL=r,n.TR=r,n.BL=r,n.BR=r;var h=l.pathData,a=h.length-1,c=l.lineWidth,d=c/2,f=h[0]-t,v=h[1]-s;l.closePath||(a-=2);for(var m=2;m<a;m+=2){var x=h[m]-t,T=h[m+1]-s;e.batchLine(f,v,x,T,d,d,c,m-2,!!l.closePath&&m===a-1),f=x,v=T}}},59226:function(g,p,i){var u=i(37141),e=i(69186),l=i(23407),o=i(64634),t=i(38459),s=i(80925),n=i(56098),r=new e({Extends:n,Mixins:[u],initialize:function(h,a,c,d,f,v,m,x,T){a===void 0&&(a=0),c===void 0&&(c=0),d===void 0&&(d=128),f===void 0&&(f=0),v===void 0&&(v=360),m===void 0&&(m=!1),n.call(this,h,"Arc",new t(0,0,d)),this._startAngle=f,this._endAngle=v,this._anticlockwise=m,this._iterations=.01,this.setPosition(a,c);var y=2*this.geom.radius;this.setSize(y,y),x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var a=2*h;this.setSize(a,a),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,a){return this._startAngle=h,a!==void 0&&(this._anticlockwise=a),this.updateData()},setEndAngle:function(h,a){return this._endAngle=h,a!==void 0&&(this._anticlockwise=a),this.updateData()},updateData:function(){var h=this._iterations,a=h,c=this.geom.radius,d=l(this._startAngle),f=l(this._endAngle),v=c,m=c;f-=d,this._anticlockwise?f<-s.PI2?f=-s.PI2:f>0&&(f=-s.PI2+f%s.PI2):f>s.PI2?f=s.PI2:f<0&&(f=s.PI2+f%s.PI2);for(var x,T=[v+Math.cos(d)*c,m+Math.sin(d)*c];a<1;)x=f*a+d,T.push(v+Math.cos(x)*c,m+Math.sin(x)*c),a+=h;return x=f+d,T.push(v+Math.cos(x)*c,m+Math.sin(x)*c),T.push(v+Math.cos(d)*c,m+Math.sin(d)*c),this.pathIndexes=o(T),this.pathData=T,this}});g.exports=r},45089:function(g,p,i){var u=i(23407),e=i(42236),l=i(54092),o=i(14437);g.exports=function(t,s,n,r){n.addToRenderList(s);var h=t.currentContext;if(o(t,h,s,n,r)){var a=s.radius;h.beginPath(),h.arc(a-s.originX*(2*a),a-s.originY*(2*a),a,u(s._startAngle),u(s._endAngle),s.anticlockwise),s.closePath&&h.closePath(),s.isFilled&&(e(h,s),h.fill()),s.isStroked&&(l(h,s),h.stroke()),h.restore()}}},10555:function(g,p,i){var u=i(59226),e=i(66642);e.register("arc",function(l,o,t,s,n,r,h,a){return this.displayList.add(new u(this.scene,l,o,t,s,n,r,h,a))}),e.register("circle",function(l,o,t,s,n){return this.displayList.add(new u(this.scene,l,o,t,0,360,!1,s,n))})},37141:function(g,p,i){var u=i(45733),e=i(45733);u=i(35901),e=i(45089),g.exports={renderWebGL:u,renderCanvas:e}},35901:function(g,p,i){var u=i(3142),e=i(83131),l=i(29980);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.pipelines.set(t.pipeline),h=u(t,s,n),a=r.calcMatrix.copyFrom(h.calc),c=t._displayOriginX,d=t._displayOriginY,f=s.alpha*t.alpha;o.pipelines.preBatch(t),t.isFilled&&e(r,a,t,f,c,d),t.isStroked&&l(r,t,f,c,d),o.pipelines.postBatch(t)}},98435:function(g,p,i){var u=i(69186),e=i(65444),l=i(64634),o=i(75380),t=i(56098),s=new u({Extends:t,Mixins:[e],initialize:function(n,r,h,a,c,d){r===void 0&&(r=0),h===void 0&&(h=0),t.call(this,n,"Curve",a),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(r,h),c!==void 0&&this.setFillStyle(c,d),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,r=this._smoothness;this.geom.getBounds(n,r),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var h=[],a=this.geom.getPoints(r),c=0;c<a.length;c++)h.push(a[c].x,a[c].y);return h.push(a[0].x,a[0].y),this.pathIndexes=l(h),this.pathData=h,this}});g.exports=s},26704:function(g,p,i){var u=i(42236),e=i(54092),l=i(14437);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.currentContext;if(l(o,r,t,s,n)){var h=t._displayOriginX+t._curveBounds.x,a=t._displayOriginY+t._curveBounds.y,c=t.pathData,d=c.length-1,f=c[0]-h,v=c[1]-a;r.beginPath(),r.moveTo(f,v),t.closePath||(d-=2);for(var m=2;m<d;m+=2){var x=c[m]-h,T=c[m+1]-a;r.lineTo(x,T)}t.closePath&&r.closePath(),t.isFilled&&(u(r,t),r.fill()),t.isStroked&&(e(r,t),r.stroke()),r.restore()}}},84653:function(g,p,i){var u=i(66642),e=i(98435);u.register("curve",function(l,o,t,s,n){return this.displayList.add(new e(this.scene,l,o,t,s,n))})},65444:function(g,p,i){var u=i(45733),e=i(45733);u=i(42010),e=i(26704),g.exports={renderWebGL:u,renderCanvas:e}},42010:function(g,p,i){var u=i(83131),e=i(3142),l=i(29980);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.pipelines.set(t.pipeline),h=e(t,s,n),a=r.calcMatrix.copyFrom(h.calc),c=t._displayOriginX+t._curveBounds.x,d=t._displayOriginY+t._curveBounds.y,f=s.alpha*t.alpha;o.pipelines.preBatch(t),t.isFilled&&u(r,a,t,f,c,d),t.isStroked&&l(r,t,f,c,d),o.pipelines.postBatch(t)}},35308:function(g,p,i){var u=i(69186),e=i(56098),l=i(20888),o=new u({Extends:e,Mixins:[l],initialize:function(t,s,n,r,h,a,c,d,f,v,m){s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=128),h===void 0&&(h=128),a===void 0&&(a=32),c===void 0&&(c=32),e.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(s,n),this.setSize(r,h),this.setFillStyle(d,f),v!==void 0&&this.setOutlineStyle(v,m),this.updateDisplayOrigin()},setFillStyle:function(t,s){return s===void 0&&(s=1),t===void 0?this.showCells=!1:(this.fillColor=t,this.fillAlpha=s,this.showCells=!0),this},setAltFillStyle:function(t,s){return s===void 0&&(s=1),t===void 0?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=s,this.showAltCells=!0),this},setOutlineStyle:function(t,s){return s===void 0&&(s=1),t===void 0?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=s,this.showOutline=!0),this}});g.exports=o},7921:function(g,p,i){var u=i(42236),e=i(54092),l=i(14437);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.currentContext;if(l(o,r,t,s,n)){var h=-t._displayOriginX,a=-t._displayOriginY,c=s.alpha*t.alpha,d=t.width,f=t.height,v=t.cellWidth,m=t.cellHeight,x=Math.ceil(d/v),T=Math.ceil(f/m),y=v,E=m,w=v-(x*v-d),R=m-(T*m-f),C=t.showCells,A=t.showAltCells,S=t.showOutline,b=0,_=0,P=0,D=0,O=0;if(S&&(y--,E--,w===v&&w--,R===m&&R--),C&&t.fillAlpha>0)for(u(r,t),_=0;_<T;_++)for(A&&(P=_%2),b=0;b<x;b++)A&&P?P=0:(P++,D=b<x-1?y:w,O=_<T-1?E:R,r.fillRect(h+b*v,a+_*m,D,O));if(A&&t.altFillAlpha>0)for(u(r,t,t.altFillColor,t.altFillAlpha*c),_=0;_<T;_++)for(A&&(P=_%2),b=0;b<x;b++)!A||P?(P=0,D=b<x-1?y:w,O=_<T-1?E:R,r.fillRect(h+b*v,a+_*m,D,O)):P=1;if(S&&t.outlineFillAlpha>0){for(e(r,t,t.outlineFillColor,t.outlineFillAlpha*c),b=1;b<x;b++){var F=b*v;r.beginPath(),r.moveTo(F+h,a),r.lineTo(F+h,f+a),r.stroke()}for(_=1;_<T;_++){var N=_*m;r.beginPath(),r.moveTo(h,N+a),r.lineTo(h+d,N+a),r.stroke()}}r.restore()}}},8098:function(g,p,i){var u=i(66642),e=i(35308);u.register("grid",function(l,o,t,s,n,r,h,a,c,d){return this.displayList.add(new e(this.scene,l,o,t,s,n,r,h,a,c,d))})},20888:function(g,p,i){var u=i(45733),e=i(45733);u=i(15301),e=i(7921),g.exports={renderWebGL:u,renderCanvas:e}},15301:function(g,p,i){var u=i(3142),e=i(64564);g.exports=function(l,o,t,s){t.addToRenderList(o);var n=l.pipelines.set(o.pipeline),r=u(o,t,s);n.calcMatrix.copyFrom(r.calc).translate(-o._displayOriginX,-o._displayOriginY);var h,a,c=t.alpha*o.alpha,d=o.width,f=o.height,v=o.cellWidth,m=o.cellHeight,x=Math.ceil(d/v),T=Math.ceil(f/m),y=v,E=m,w=v-(x*v-d),R=m-(T*m-f),C=o.showCells,A=o.showAltCells,S=o.showOutline,b=0,_=0,P=0,D=0,O=0;if(S&&(y--,E--,w===v&&w--,R===m&&R--),l.pipelines.preBatch(o),C&&o.fillAlpha>0)for(h=n.fillTint,a=e.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*c),h.TL=a,h.TR=a,h.BL=a,h.BR=a,_=0;_<T;_++)for(A&&(P=_%2),b=0;b<x;b++)A&&P?P=0:(P++,D=b<x-1?y:w,O=_<T-1?E:R,n.batchFillRect(b*v,_*m,D,O));if(A&&o.altFillAlpha>0)for(h=n.fillTint,a=e.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*c),h.TL=a,h.TR=a,h.BL=a,h.BR=a,_=0;_<T;_++)for(A&&(P=_%2),b=0;b<x;b++)!A||P?(P=0,D=b<x-1?y:w,O=_<T-1?E:R,n.batchFillRect(b*v,_*m,D,O)):P=1;if(S&&o.outlineFillAlpha>0){var F=n.strokeTint,N=e.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*c);for(F.TL=N,F.TR=N,F.BL=N,F.BR=N,b=1;b<x;b++){var k=b*v;n.batchLine(k,0,k,f,1,1,1,0,!1)}for(_=1;_<T;_++){var L=_*m;n.batchLine(0,L,d,L,1,1,1,0,!1)}}l.pipelines.postBatch(o)}},9417:function(g,p,i){var u=i(69186),e=i(56098),l=i(97501),o=i(15091),t=new u({Extends:e,Mixins:[o],initialize:function(s,n,r,h,a,c,d,f,v){n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=128),d===void 0&&(d=0),e.call(this,s,"Line",new l(h,a,c,d));var m=Math.max(1,this.geom.right-this.geom.left),x=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(n,r),this.setSize(m,x),f!==void 0&&this.setStrokeStyle(1,f,v),this.updateDisplayOrigin()},setLineWidth:function(s,n){return n===void 0&&(n=s),this._startWidth=s,this._endWidth=n,this.lineWidth=s,this},setTo:function(s,n,r,h){return this.geom.setTo(s,n,r,h),this}});g.exports=t},49506:function(g,p,i){var u=i(54092),e=i(14437);g.exports=function(l,o,t,s){t.addToRenderList(o);var n=l.currentContext;if(e(l,n,o,t,s)){var r=o._displayOriginX,h=o._displayOriginY;o.isStroked&&(u(n,o),n.beginPath(),n.moveTo(o.geom.x1-r,o.geom.y1-h),n.lineTo(o.geom.x2-r,o.geom.y2-h),n.stroke()),n.restore()}}},31059:function(g,p,i){var u=i(66642),e=i(9417);u.register("line",function(l,o,t,s,n,r,h,a){return this.displayList.add(new e(this.scene,l,o,t,s,n,r,h,a))})},15091:function(g,p,i){var u=i(45733),e=i(45733);u=i(38918),e=i(49506),g.exports={renderWebGL:u,renderCanvas:e}},38918:function(g,p,i){var u=i(3142),e=i(64564);g.exports=function(l,o,t,s){t.addToRenderList(o);var n=l.pipelines.set(o.pipeline),r=u(o,t,s);n.calcMatrix.copyFrom(r.calc);var h=o._displayOriginX,a=o._displayOriginY,c=t.alpha*o.alpha;if(l.pipelines.preBatch(o),o.isStroked){var d=n.strokeTint,f=e.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*c);d.TL=f,d.TR=f,d.BL=f,d.BR=f;var v=o._startWidth,m=o._endWidth;n.batchLine(o.geom.x1-h,o.geom.y1-a,o.geom.x2-h,o.geom.y2-a,v,m,1,0,!1,r.sprite,r.camera)}l.pipelines.postBatch(o)}},41231:function(g,p,i){var u=i(69186),e=i(75380),l=i(56098),o=i(56603),t=new u({Extends:l,Mixins:[o],initialize:function(s,n,r,h,a,c,d){n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h=128),a===void 0&&(a=128),l.call(this,s,"Rectangle",new e(0,0,h,a)),this.setPosition(n,r),this.setSize(h,a),c!==void 0&&this.setFillStyle(c,d),this.updateDisplayOrigin(),this.updateData()},setSize:function(s,n){return this.width=s,this.height=n,this.geom.setSize(s,n),this.updateData(),this},updateData:function(){var s=[],n=this.geom,r=this._tempLine;return n.getLineA(r),s.push(r.x1,r.y1,r.x2,r.y2),n.getLineB(r),s.push(r.x2,r.y2),n.getLineC(r),s.push(r.x2,r.y2),n.getLineD(r),s.push(r.x2,r.y2),this.pathData=s,this}});g.exports=t},24586:function(g,p,i){var u=i(42236),e=i(54092),l=i(14437);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.currentContext;if(l(o,r,t,s,n)){var h=t._displayOriginX,a=t._displayOriginY;t.isFilled&&(u(r,t),r.fillRect(-h,-a,t.width,t.height)),t.isStroked&&(e(r,t),r.beginPath(),r.rect(-h,-a,t.width,t.height),r.stroke()),r.restore()}}},98971:function(g,p,i){var u=i(66642),e=i(41231);u.register("rectangle",function(l,o,t,s,n,r){return this.displayList.add(new e(this.scene,l,o,t,s,n,r))})},56603:function(g,p,i){var u=i(45733),e=i(45733);u=i(68162),e=i(24586),g.exports={renderWebGL:u,renderCanvas:e}},68162:function(g,p,i){var u=i(3142),e=i(29980),l=i(64564);g.exports=function(o,t,s,n){s.addToRenderList(t);var r=o.pipelines.set(t.pipeline),h=u(t,s,n);r.calcMatrix.copyFrom(h.calc);var a=t._displayOriginX,c=t._displayOriginY,d=s.alpha*t.alpha;if(o.pipelines.preBatch(t),t.isFilled){var f=r.fillTint,v=l.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*d);f.TL=v,f.TR=v,f.BL=v,f.BR=v,r.batchFillRect(-a,-c,t.width,t.height)}t.isStroked&&e(r,t,d,a,c),o.pipelines.postBatch(t)}},38590:function(g,p,i){var u=i(56579),e=i(69186),l=i(19506),o=i(38236),t=i(42608),s=new e({Extends:o,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,t],initialize:function(n,r,h,a,c){o.call(this,n,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(a,c),this.setPosition(r,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,r){this.anims.update(n,r)},play:function(n,r){return this.anims.play(n,r)},playReverse:function(n,r){return this.anims.playReverse(n,r)},playAfterDelay:function(n,r){return this.anims.playAfterDelay(n,r)},playAfterRepeat:function(n,r){return this.anims.playAfterRepeat(n,r)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return l.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});g.exports=s},68915:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i),p.batchSprite(i,i.frame,u,e)}},29525:function(g,p,i){var u=i(90062),e=i(38596),l=i(78757),o=i(7973),t=i(38590);l.register("sprite",function(s,n){s===void 0&&(s={});var r=o(s,"key",null),h=o(s,"frame",null),a=new t(this.scene,0,0,r,h);return n!==void 0&&(s.add=n),u(this.scene,a,s),e(a,s),a})},82364:function(g,p,i){var u=i(66642),e=i(38590);u.register("sprite",function(l,o,t,s){var n=new e(this.scene,l,o,t,s);return this.displayList.add(n),n})},42608:function(g,p,i){var u=i(45733),e=i(45733);u=i(83803),e=i(68915),g.exports={renderWebGL:u,renderCanvas:e}},83803:function(g){g.exports=function(p,i,u,e){u.addToRenderList(i),i.pipeline.batchSprite(i,u,e)}},83799:function(g){g.exports=function(p,i,u){var e=p.canvas,l=p.context,o=p.style,t=[],s=0,n=u.length;o.maxLines>0&&o.maxLines<u.length&&(n=o.maxLines),o.syncFont(e,l);for(var r=0;r<n;r++){var h=o.strokeThickness;h+=l.measureText(u[r]).width,o.wordWrap&&(h-=l.measureText(" ").width),t[r]=Math.ceil(h),s=Math.max(s,t[r])}var a=i.fontSize+o.strokeThickness,c=a*n,d=p.lineSpacing;return n>1&&(c+=d*(n-1)),{width:s,height:c,lines:n,lineWidths:t,lineSpacing:d,lineHeight:a}}},32800:function(g,p,i){var u=i(55579);g.exports=function(e){var l=u.create(this),o=l.getContext("2d");e.syncFont(l,o);var t=o.measureText(e.testString);if("actualBoundingBoxAscent"in t){var s=t.actualBoundingBoxAscent,n=t.actualBoundingBoxDescent;return u.remove(l),{ascent:s,descent:n,fontSize:s+n}}var r=Math.ceil(t.width*e.baselineX),h=r,a=2*h;h=h*e.baselineY|0,l.width=r,l.height=a,o.fillStyle="#f00",o.fillRect(0,0,r,a),o.font=e._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(e.testString,0,h);var c={ascent:0,descent:0,fontSize:0},d=o.getImageData(0,0,r,a);if(!d)return c.ascent=h,c.descent=h+6,c.fontSize=c.ascent+c.descent,u.remove(l),c;var f,v,m=d.data,x=m.length,T=4*r,y=0,E=!1;for(f=0;f<h;f++){for(v=0;v<T;v+=4)if(m[y+v]!==255){E=!0;break}if(E)break;y+=T}for(c.ascent=h-f,y=x-T,E=!1,f=a;f>h;f--){for(v=0;v<T;v+=4)if(m[y+v]!==255){E=!0;break}if(E)break;y-=T}return c.descent=f-h,c.fontSize=c.ascent+c.descent,u.remove(l),c}},77546:function(g,p,i){var u=i(21778),e=i(55579),l=i(69186),o=i(19506),t=i(24496),s=i(38236),n=i(83799),r=i(76076),h=i(20662),a=i(61128),c=i(22849),d=new l({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,a],initialize:function(f,v,m,x,T){v===void 0&&(v=0),m===void 0&&(m=0),s.call(this,f,"Text"),this.renderer=f.sys.renderer,this.setPosition(v,m),this.setOrigin(0,0),this.initPipeline(),this.canvas=e.create(this),this.context=this.canvas.getContext("2d"),this.style=new c(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=f.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(x),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing),f.sys.game.events.on(t.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(f){var v=this.style;if(v.wordWrapCallback){var m=v.wordWrapCallback.call(v.wordWrapCallbackScope,f,this);return Array.isArray(m)&&(m=m.join(`
`)),m}return v.wordWrapWidth?v.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,v,m){for(var x="",T=f.replace(/ +/gi," ").split(this.splitRegExp),y=T.length,E=0;E<y;E++){var w=T[E],R="";if(w=w.replace(/^ *|\s*$/gi,""),v.measureText(w).width<m)x+=w+`
`;else{for(var C=m,A=w.split(" "),S=0;S<A.length;S++){var b=A[S],_=b+" ",P=v.measureText(_).width;if(P>C){if(S===0){for(var D=_;D.length&&(D=D.slice(0,-1),!((P=v.measureText(D).width)<=C)););if(!D.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var O=b.substr(D.length);A[S]=O,R+=D}var F=A[S].length?S:S+1,N=A.slice(F).join(" ").replace(/[ \n]*$/gi,"");T[E+1]=N+" "+(T[E+1]||""),y=T.length;break}R+=_,C-=P}x+=R.replace(/[ \n]*$/gi,"")+`
`}}return x.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(f,v,m){for(var x="",T=f.split(this.splitRegExp),y=T.length-1,E=v.measureText(" ").width,w=0;w<=y;w++){for(var R=m,C=T[w].split(" "),A=C.length-1,S=0;S<=A;S++){var b=C[S],_=v.measureText(b).width,P=_;S<A&&(P+=E),P>R&&S>0&&(x+=`
`,R=m),x+=b,S<A?(x+=" ",R-=P):R-=_}w<y&&(x+=`
`)}return x},getWrappedText:function(f){return f===void 0&&(f=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(f).split(this.splitRegExp)},setText:function(f){return f||f===0||(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this._text&&(this._text=f.toString(),this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,v){return this.style.setFixedSize(f,v)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,v){return this.style.setStroke(f,v)},setShadow:function(f,v,m,x,T,y){return this.style.setShadow(f,v,m,x,T,y)},setShadowOffset:function(f,v){return this.style.setShadowOffset(f,v)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,v){return this.style.setWordWrapWidth(f,v)},setWordWrapCallback:function(f,v){return this.style.setWordWrapCallback(f,v)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setPadding:function(f,v,m,x){if(typeof f=="object"){var T=f,y=r(T,"x",null);y!==null?(f=y,m=y):(f=r(T,"left",0),m=r(T,"right",f));var E=r(T,"y",null);E!==null?(v=E,x=E):(v=r(T,"top",0),x=r(T,"bottom",v))}else f===void 0&&(f=0),v===void 0&&(v=f),m===void 0&&(m=f),x===void 0&&(x=v);return this.padding.left=f,this.padding.top=v,this.padding.right=m,this.padding.bottom=x,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},updateText:function(){var f=this.canvas,v=this.context,m=this.style,x=m.resolution,T=m.metrics;m.syncFont(f,v);var y=this._text;(m.wordWrapWidth||m.wordWrapCallback)&&(y=this.runWordWrap(this._text));var E,w=y.split(this.splitRegExp),R=n(this,T,w),C=this.padding;m.fixedWidth===0?(this.width=R.width+C.left+C.right,E=R.width):(this.width=m.fixedWidth,(E=this.width-C.left-C.right)<R.width&&(E=R.width)),m.fixedHeight===0?this.height=R.height+C.top+C.bottom:this.height=m.fixedHeight;var A,S,b=this.width,_=this.height;this.updateDisplayOrigin(),b*=x,_*=x,b=Math.max(b,1),_=Math.max(_,1),f.width!==b||f.height!==_?(f.width=b,f.height=_,this.frame.setSize(b,_),m.syncFont(f,v)):v.clearRect(0,0,b,_),v.save(),v.scale(x,x),m.backgroundColor&&(v.fillStyle=m.backgroundColor,v.fillRect(0,0,b,_)),m.syncStyle(f,v),v.textBaseline="alphabetic",v.translate(C.left,C.top);for(var P=0;P<R.lines;P++){if(A=m.strokeThickness/2,S=m.strokeThickness/2+P*R.lineHeight+T.ascent,P>0&&(S+=R.lineSpacing*P),m.rtl)A=b-A;else if(m.align==="right")A+=E-R.lineWidths[P];else if(m.align==="center")A+=(E-R.lineWidths[P])/2;else if(m.align==="justify"&&R.lineWidths[P]/R.width>=.85){var D=R.width-R.lineWidths[P],O=v.measureText(" ").width,F=w[P].trim(),N=F.split(" ");D+=(w[P].length-F.length)*O;for(var k=Math.floor(D/O),L=0;k>0;)N[L]+=" ",L=(L+1)%(N.length-1||1),--k;w[P]=N.join(" ")}this.autoRound&&(A=Math.round(A),S=Math.round(S)),m.strokeThickness&&(this.style.syncShadow(v,m.shadowStroke),v.strokeText(w[P],A,S)),m.color&&(this.style.syncShadow(v,m.shadowFill),v.fillText(w[P],A,S))}v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var U=this.input;return U&&!U.customHitArea&&(U.hitArea.width=this.width,U.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=o.ToJSON(this),v={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=v,f},preDestroy:function(){this.style.rtl&&h(this.canvas),e.remove(this.canvas),this.texture.destroy()}});g.exports=d},50059:function(g){g.exports=function(p,i,u,e){i.width!==0&&i.height!==0&&(u.addToRenderList(i),p.batchSprite(i,i.frame,u,e))}},53912:function(g,p,i){var u=i(90062),e=i(78757),l=i(7973),o=i(77546);e.register("text",function(t,s){t===void 0&&(t={});var n=l(t,"text",""),r=l(t,"style",null),h=l(t,"padding",null);h!==null&&(r.padding=h);var a=new o(this.scene,0,0,n,r);return s!==void 0&&(t.add=s),u(this.scene,a,t),a.autoRound=l(t,"autoRound",!0),a.resolution=l(t,"resolution",1),a})},33979:function(g,p,i){var u=i(77546);i(66642).register("text",function(e,l,o,t){return this.displayList.add(new u(this.scene,e,l,o,t))})},61128:function(g,p,i){var u=i(45733),e=i(45733);u=i(64651),e=i(50059),g.exports={renderWebGL:u,renderCanvas:e}},22849:function(g,p,i){var u=i(69186),e=i(7973),l=i(76076),o=i(32800),t={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},s=new u({initialize:function(n,r){this.parent=n,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(r,!1,!0);var h=l(r,"metrics",!1);this.metrics=h?{ascent:l(h,"ascent",0),descent:l(h,"descent",0),fontSize:l(h,"fontSize",0)}:o(this)},setStyle:function(n,r,h){for(var a in r===void 0&&(r=!0),h===void 0&&(h=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px"),t){var c=h?t[a][1]:this[a];this[a]=a==="wordWrapCallback"||a==="wordWrapCallbackScope"?l(n,t[a][0],c):e(n,t[a][0],c)}var d=l(n,"font",null);d!==null&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=l(n,"fill",null);return f!==null&&(this.color=f),r?this.update(!0):this.parent},syncFont:function(n,r){r.font=this._font},syncStyle:function(n,r){r.textBaseline="alphabetic",r.fillStyle=this.color,r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.lineCap="round",r.lineJoin="round"},syncShadow:function(n,r){r?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(n,r){r===void 0&&(r=!0);var h=n,a="",c="";if(typeof n!="string")h=l(n,"fontFamily","Courier"),a=l(n,"fontSize","16px"),c=l(n,"fontStyle","");else{var d=n.split(" "),f=0;c=d.length>2?d[f++]:"",a=d[f++]||"16px",h=d[f++]||"Courier"}return h===this.fontFamily&&a===this.fontSize&&c===this.fontStyle||(this.fontFamily=h,this.fontSize=a,this.fontStyle=c,r&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,r){return this.fixedWidth=n,this.fixedHeight=r,n&&(this.parent.width=n),r&&(this.parent.height=r),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,r){return r===void 0&&(r=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):this.stroke===n&&this.strokeThickness===r||(this.stroke=n,this.strokeThickness=r,this.update(!0)),this.parent},setShadow:function(n,r,h,a,c,d){return n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h="#000"),a===void 0&&(a=0),c===void 0&&(c=!1),d===void 0&&(d=!0),this.shadowOffsetX=n,this.shadowOffsetY=r,this.shadowColor=h,this.shadowBlur=a,this.shadowStroke=c,this.shadowFill=d,this.update(!1)},setShadowOffset:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.shadowOffsetX=n,this.shadowOffsetY=r,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,r){return r===void 0&&(r=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=r,this.update(!1)},setWordWrapCallback:function(n,r){return r===void 0&&(r=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=r,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var r in t)n[r]=this[r];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});g.exports=s},64651:function(g,p,i){var u=i(64564);g.exports=function(e,l,o,t){if(l.width!==0&&l.height!==0){o.addToRenderList(l);var s=l.frame,n=s.width,r=s.height,h=u.getTintAppendFloatAlpha,a=e.pipelines.set(l.pipeline,l),c=a.setTexture2D(s.glTexture,l);e.pipelines.preBatch(l),a.batchTexture(l,s.glTexture,n,r,l.x,l.y,n/l.style.resolution,r/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,n,r,h(l.tintTopLeft,o.alpha*l._alphaTL),h(l.tintTopRight,o.alpha*l._alphaTR),h(l.tintBottomLeft,o.alpha*l._alphaBL),h(l.tintBottomRight,o.alpha*l._alphaBR),l.tintFill,0,0,o,t,!1,c),e.pipelines.postBatch(l)}}},64043:function(g,p,i){var u=i(87626),e=i(38459),l=i(57133),o=i(69186),t=i(19506),s=i(38236),n=i(75380),r=i(26813),h=new o({Extends:s,Mixins:[t.Depth,t.GetBounds,t.Origin,t.Transform,t.ScrollFactor,t.Visible],initialize:function(a,c,d,f,v){f===void 0&&(f=1),v===void 0&&(v=f),s.call(this,a,"Zone"),this.setPosition(c,d),this.width=f,this.height=v,this.blendMode=u.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,c,d){d===void 0&&(d=!0),this.width=a,this.height=c,this.updateDisplayOrigin();var f=this.input;return d&&f&&!f.customHitArea&&(f.hitArea.width=a,f.hitArea.height=c),this},setDisplaySize:function(a,c){return this.displayWidth=a,this.displayHeight=c,this},setCircleDropZone:function(a){return this.setDropZone(new e(0,0,a),l)},setRectangleDropZone:function(a,c){return this.setDropZone(new n(0,0,a,c),r)},setDropZone:function(a,c){return a===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(a,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(a,c,d){d.addToRenderList(c)},renderWebGL:function(a,c,d){d.addToRenderList(c)}});g.exports=h},42309:function(g,p,i){var u=i(78757),e=i(7973),l=i(64043);u.register("zone",function(o){var t=e(o,"x",0),s=e(o,"y",0),n=e(o,"width",1),r=e(o,"height",n);return new l(this.scene,t,s,n,r)})},59037:function(g,p,i){var u=i(64043);i(66642).register("zone",function(e,l,o,t){return this.displayList.add(new u(this.scene,e,l,o,t))})},75795:function(g){g.exports=function(p){return p.radius>0?Math.PI*p.radius*p.radius:0}},38459:function(g,p,i){var u=i(69186),e=i(57133),l=i(834),o=i(9007),t=i(30097),s=i(87764),n=new u({initialize:function(r,h,a){r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),this.type=t.CIRCLE,this.x=r,this.y=h,this._radius=a,this._diameter=2*a},contains:function(r,h){return e(this,r,h)},getPoint:function(r,h){return l(this,r,h)},getPoints:function(r,h,a){return o(this,r,h,a)},getRandomPoint:function(r){return s(this,r)},setTo:function(r,h,a){return this.x=r,this.y=h,this._radius=a,this._diameter=2*a,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(r,h){return h===void 0&&(h=r),this.x=r,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(r){this._radius=r,this._diameter=2*r}},diameter:{get:function(){return this._diameter},set:function(r){this._diameter=r,this._radius=.5*r}},left:{get:function(){return this.x-this._radius},set:function(r){this.x=r+this._radius}},right:{get:function(){return this.x+this._radius},set:function(r){this.x=r-this._radius}},top:{get:function(){return this.y-this._radius},set:function(r){this.y=r+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(r){this.y=r-this._radius}}});g.exports=n},61458:function(g){g.exports=function(p){return Math.PI*p.radius*2}},14741:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){return o===void 0&&(o=new u),o.x=e.x+e.radius*Math.cos(l),o.y=e.y+e.radius*Math.sin(l),o}},4244:function(g,p,i){var u=i(38459);g.exports=function(e){return new u(e.x,e.y,e.radius)}},57133:function(g){g.exports=function(p,i,u){return p.radius>0&&i>=p.left&&i<=p.right&&u>=p.top&&u<=p.bottom&&(p.x-i)*(p.x-i)+(p.y-u)*(p.y-u)<=p.radius*p.radius}},31072:function(g,p,i){var u=i(57133);g.exports=function(e,l){return u(e,l.x,l.y)}},54851:function(g,p,i){var u=i(57133);g.exports=function(e,l){return u(e,l.x,l.y)&&u(e,l.right,l.y)&&u(e,l.x,l.bottom)&&u(e,l.right,l.bottom)}},44600:function(g){g.exports=function(p,i){return i.setTo(p.x,p.y,p.radius)}},40980:function(g){g.exports=function(p,i){return p.x===i.x&&p.y===i.y&&p.radius===i.radius}},70162:function(g,p,i){var u=i(75380);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=e.left,l.y=e.top,l.width=e.diameter,l.height=e.diameter,l}},834:function(g,p,i){var u=i(14741),e=i(53023),l=i(80925),o=i(47978);g.exports=function(t,s,n){n===void 0&&(n=new o);var r=e(s,0,l.PI2);return u(t,r,n)}},9007:function(g,p,i){var u=i(61458),e=i(14741),l=i(53023),o=i(80925);g.exports=function(t,s,n,r){r===void 0&&(r=[]),!s&&n>0&&(s=u(t)/n);for(var h=0;h<s;h++){var a=l(h/s,0,o.PI2);r.push(e(t,a))}return r}},53652:function(g){g.exports=function(p,i,u){return p.x+=i,p.y+=u,p}},52460:function(g){g.exports=function(p,i){return p.x+=i.x,p.y+=i.y,p}},87764:function(g,p,i){var u=i(47978);g.exports=function(e,l){l===void 0&&(l=new u);var o=2*Math.PI*Math.random(),t=Math.random()+Math.random(),s=t>1?2-t:t,n=s*Math.cos(o),r=s*Math.sin(o);return l.x=e.x+n*e.radius,l.y=e.y+r*e.radius,l}},58056:function(g,p,i){var u=i(38459);u.Area=i(75795),u.Circumference=i(61458),u.CircumferencePoint=i(14741),u.Clone=i(4244),u.Contains=i(57133),u.ContainsPoint=i(31072),u.ContainsRect=i(54851),u.CopyFrom=i(44600),u.Equals=i(40980),u.GetBounds=i(70162),u.GetPoint=i(834),u.GetPoints=i(9007),u.Offset=i(53652),u.OffsetPoint=i(52460),u.Random=i(87764),g.exports=u},30097:function(g){g.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},60908:function(g){g.exports=function(p){return p.isEmpty()?0:p.getMajorRadius()*p.getMinorRadius()*Math.PI}},65027:function(g){g.exports=function(p){var i=p.width/2,u=p.height/2,e=Math.pow(i-u,2)/Math.pow(i+u,2);return Math.PI*(i+u)*(1+3*e/(10+Math.sqrt(4-3*e)))}},97883:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){o===void 0&&(o=new u);var t=e.width/2,s=e.height/2;return o.x=e.x+t*Math.cos(l),o.y=e.y+s*Math.sin(l),o}},46681:function(g,p,i){var u=i(81385);g.exports=function(e){return new u(e.x,e.y,e.width,e.height)}},87016:function(g){g.exports=function(p,i,u){if(p.width<=0||p.height<=0)return!1;var e=(i-p.x)/p.width,l=(u-p.y)/p.height;return(e*=e)+(l*=l)<.25}},6500:function(g,p,i){var u=i(87016);g.exports=function(e,l){return u(e,l.x,l.y)}},73643:function(g,p,i){var u=i(87016);g.exports=function(e,l){return u(e,l.x,l.y)&&u(e,l.right,l.y)&&u(e,l.x,l.bottom)&&u(e,l.right,l.bottom)}},58816:function(g){g.exports=function(p,i){return i.setTo(p.x,p.y,p.width,p.height)}},81385:function(g,p,i){var u=i(69186),e=i(87016),l=i(38255),o=i(97911),t=i(30097),s=i(49620),n=new u({initialize:function(r,h,a,c){r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),this.type=t.ELLIPSE,this.x=r,this.y=h,this.width=a,this.height=c},contains:function(r,h){return e(this,r,h)},getPoint:function(r,h){return l(this,r,h)},getPoints:function(r,h,a){return o(this,r,h,a)},getRandomPoint:function(r){return s(this,r)},setTo:function(r,h,a,c){return this.x=r,this.y=h,this.width=a,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(r,h){return h===void 0&&(h=r),this.x=r,this.y=h,this},setSize:function(r,h){return h===void 0&&(h=r),this.width=r,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(r){this.x=r+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(r){this.x=r-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(r){this.y=r+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(r){this.y=r-this.height/2}}});g.exports=n},96722:function(g){g.exports=function(p,i){return p.x===i.x&&p.y===i.y&&p.width===i.width&&p.height===i.height}},42390:function(g,p,i){var u=i(75380);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=e.left,l.y=e.top,l.width=e.width,l.height=e.height,l}},38255:function(g,p,i){var u=i(97883),e=i(53023),l=i(80925),o=i(47978);g.exports=function(t,s,n){n===void 0&&(n=new o);var r=e(s,0,l.PI2);return u(t,r,n)}},97911:function(g,p,i){var u=i(65027),e=i(97883),l=i(53023),o=i(80925);g.exports=function(t,s,n,r){r===void 0&&(r=[]),!s&&n>0&&(s=u(t)/n);for(var h=0;h<s;h++){var a=l(h/s,0,o.PI2);r.push(e(t,a))}return r}},41352:function(g){g.exports=function(p,i,u){return p.x+=i,p.y+=u,p}},8646:function(g){g.exports=function(p,i){return p.x+=i.x,p.y+=i.y,p}},49620:function(g,p,i){var u=i(47978);g.exports=function(e,l){l===void 0&&(l=new u);var o=Math.random()*Math.PI*2,t=Math.sqrt(Math.random());return l.x=e.x+t*Math.cos(o)*e.width/2,l.y=e.y+t*Math.sin(o)*e.height/2,l}},81528:function(g,p,i){var u=i(81385);u.Area=i(60908),u.Circumference=i(65027),u.CircumferencePoint=i(97883),u.Clone=i(46681),u.Contains=i(87016),u.ContainsPoint=i(6500),u.ContainsRect=i(73643),u.CopyFrom=i(58816),u.Equals=i(96722),u.GetBounds=i(42390),u.GetPoint=i(38255),u.GetPoints=i(97911),u.Offset=i(41352),u.OffsetPoint=i(8646),u.Random=i(49620),g.exports=u},67449:function(g,p,i){var u=i(30097),e=i(72646),l={Circle:i(58056),Ellipse:i(81528),Intersects:i(33408),Line:i(77201),Mesh:i(61859),Point:i(36937),Polygon:i(10413),Rectangle:i(43550),Triangle:i(9379)};l=e(!1,l,u),g.exports=l},19357:function(g,p,i){var u=i(76914);g.exports=function(e,l){return u(e.x,e.y,l.x,l.y)<=e.radius+l.radius}},10882:function(g){g.exports=function(p,i){var u=i.width/2,e=i.height/2,l=Math.abs(p.x-i.x-u),o=Math.abs(p.y-i.y-e),t=u+p.radius,s=e+p.radius;if(l>t||o>s)return!1;if(l<=u||o<=e)return!0;var n=l-u,r=o-e;return n*n+r*r<=p.radius*p.radius}},15375:function(g,p,i){var u=i(47978),e=i(19357);g.exports=function(l,o,t){if(t===void 0&&(t=[]),e(l,o)){var s,n,r,h,a=l.x,c=l.y,d=l.radius,f=o.x,v=o.y,m=o.radius;if(c===v)(r=(n=-2*v)*n-4*(s=1)*(f*f+(h=(m*m-d*d-f*f+a*a)/(2*(a-f)))*h-2*f*h+v*v-m*m))==0?t.push(new u(h,-n/(2*s))):r>0&&(t.push(new u(h,(-n+Math.sqrt(r))/(2*s))),t.push(new u(h,(-n-Math.sqrt(r))/(2*s))));else{var x=(a-f)/(c-v),T=(m*m-d*d-f*f+a*a-v*v+c*c)/(2*(c-v));(r=(n=2*c*x-2*T*x-2*a)*n-4*(s=x*x+1)*(a*a+c*c+T*T-d*d-2*c*T))==0?(h=-n/(2*s),t.push(new u(h,T-h*x))):r>0&&(h=(-n+Math.sqrt(r))/(2*s),t.push(new u(h,T-h*x)),h=(-n-Math.sqrt(r))/(2*s),t.push(new u(h,T-h*x)))}}return t}},65971:function(g,p,i){var u=i(3351),e=i(10882);g.exports=function(l,o,t){if(t===void 0&&(t=[]),e(l,o)){var s=o.getLineA(),n=o.getLineB(),r=o.getLineC(),h=o.getLineD();u(s,l,t),u(n,l,t),u(r,l,t),u(h,l,t)}return t}},3351:function(g,p,i){var u=i(47978),e=i(58595);g.exports=function(l,o,t){if(t===void 0&&(t=[]),e(l,o)){var s,n,r=l.x1,h=l.y1,a=l.x2,c=l.y2,d=o.x,f=o.y,v=o.radius,m=a-r,x=c-h,T=r-d,y=h-f,E=m*m+x*x,w=2*(m*T+x*y),R=w*w-4*E*(T*T+y*y-v*v);if(R===0){var C=-w/(2*E);s=r+C*m,n=h+C*x,C>=0&&C<=1&&t.push(new u(s,n))}else if(R>0){var A=(-w-Math.sqrt(R))/(2*E);s=r+A*m,n=h+A*x,A>=0&&A<=1&&t.push(new u(s,n));var S=(-w+Math.sqrt(R))/(2*E);s=r+S*m,n=h+S*x,S>=0&&S<=1&&t.push(new u(s,n))}}return t}},12694:function(g,p,i){var u=i(33736);g.exports=function(e,l,o){var t=e.x1,s=e.y1,n=e.x2,r=e.y2,h=l.x1,a=l.y1,c=n-t,d=r-s,f=l.x2-h,v=l.y2-a;if(c===0||v*c-f*d==0)return!1;var m=(c*(a-s)+d*(t-h))/(f*d-v*c),x=(h+f*m-t)/c;return x<0||m<0||m>1?null:(o===void 0&&(o=new u),o.set(t+c*x,s+d*x,x))}},27449:function(g,p,i){var u=i(33736),e=i(12694),l=new(i(97501)),o=new u;g.exports=function(t,s,n){n===void 0&&(n=new u);var r=!1;n.set(),o.set();for(var h=s[0],a=1;a<s.length;a++){var c=s[a];l.setTo(h.x,h.y,c.x,c.y),h=c,e(t,l,o)&&(!r||o.z<n.z)&&(n.copy(o),r=!0)}return r?n:null}},43608:function(g,p,i){var u=i(33736),e=i(37254),l=i(27449),o=new u;g.exports=function(t,s,n){n===void 0&&(n=new e),Array.isArray(s)||(s=[s]);var r=!1;n.set(),o.set();for(var h=0;h<s.length;h++)l(t,s[h].points,o)&&(!r||o.z<n.z)&&(n.set(o.x,o.y,o.z,h),r=!0);return r?n:null}},46894:function(g,p,i){var u=i(47978),e=i(70972),l=i(63352);g.exports=function(o,t,s){if(s===void 0&&(s=[]),l(o,t))for(var n=t.getLineA(),r=t.getLineB(),h=t.getLineC(),a=t.getLineD(),c=[new u,new u,new u,new u],d=[e(n,o,c[0]),e(r,o,c[1]),e(h,o,c[2]),e(a,o,c[3])],f=0;f<4;f++)d[f]&&s.push(c[f]);return s}},99783:function(g,p,i){var u=i(37254),e=i(43608),l=new(i(97501));function o(s,n,r,h,a){var c=Math.cos(s),d=Math.sin(s);l.setTo(n,r,n+c,r+d);var f=e(l,h);f&&a.push(new u(f.x,f.y,s,f.w))}function t(s,n){return s.z-n.z}g.exports=function(s,n,r){Array.isArray(r)||(r=[r]);for(var h=[],a=[],c=0;c<r.length;c++)for(var d=r[c].points,f=0;f<d.length;f++){var v=Math.atan2(d[f].y-n,d[f].x-s);a.indexOf(v)===-1&&(o(v,s,n,r,h),o(v-1e-5,s,n,r,h),o(v+1e-5,s,n,r,h),a.push(v))}return h.sort(t)}},89758:function(g,p,i){var u=i(75380),e=i(12402);g.exports=function(l,o,t){return t===void 0&&(t=new u),e(l,o)&&(t.x=Math.max(l.x,o.x),t.y=Math.max(l.y,o.y),t.width=Math.min(l.right,o.right)-t.x,t.height=Math.min(l.bottom,o.bottom)-t.y),t}},5574:function(g,p,i){var u=i(46894),e=i(12402);g.exports=function(l,o,t){if(t===void 0&&(t=[]),e(l,o)){var s=l.getLineA(),n=l.getLineB(),r=l.getLineC(),h=l.getLineD();u(s,o,t),u(n,o,t),u(r,o,t),u(h,o,t)}return t}},32346:function(g,p,i){var u=i(55299),e=i(46894);g.exports=function(l,o,t){if(t===void 0&&(t=[]),u(l,o)){var s=o.getLineA(),n=o.getLineB(),r=o.getLineC();e(s,l,t),e(n,l,t),e(r,l,t)}return t}},17634:function(g,p,i){var u=i(3351),e=i(77678);g.exports=function(l,o,t){if(t===void 0&&(t=[]),e(l,o)){var s=l.getLineA(),n=l.getLineB(),r=l.getLineC();u(s,o,t),u(n,o,t),u(r,o,t)}return t}},82217:function(g,p,i){var u=i(47978),e=i(70416),l=i(70972);g.exports=function(o,t,s){if(s===void 0&&(s=[]),e(o,t))for(var n=o.getLineA(),r=o.getLineB(),h=o.getLineC(),a=[new u,new u,new u],c=[l(n,t,a[0]),l(r,t,a[1]),l(h,t,a[2])],d=0;d<3;d++)c[d]&&s.push(a[d]);return s}},62331:function(g,p,i){var u=i(99460),e=i(82217);g.exports=function(l,o,t){if(t===void 0&&(t=[]),u(l,o)){var s=o.getLineA(),n=o.getLineB(),r=o.getLineC();e(l,s,t),e(l,n,t),e(l,r,t)}return t}},58595:function(g,p,i){var u=i(57133),e=new(i(47978));g.exports=function(l,o,t){if(t===void 0&&(t=e),u(o,l.x1,l.y1))return t.x=l.x1,t.y=l.y1,!0;if(u(o,l.x2,l.y2))return t.x=l.x2,t.y=l.y2,!0;var s=l.x2-l.x1,n=l.y2-l.y1,r=o.x-l.x1,h=o.y-l.y1,a=s*s+n*n,c=s,d=n;if(a>0){var f=(r*s+h*n)/a;c*=f,d*=f}return t.x=l.x1+c,t.y=l.y1+d,c*c+d*d<=a&&c*s+d*n>=0&&u(o,t.x,t.y)}},70972:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){o===void 0&&(o=new u);var t=e.x1,s=e.y1,n=e.x2,r=e.y2,h=l.x1,a=l.y1,c=l.x2,d=l.y2,f=(d-a)*(n-t)-(c-h)*(r-s);if(f===0)return!1;var v=((c-h)*(s-a)-(d-a)*(t-h))/f,m=((n-t)*(s-a)-(r-s)*(t-h))/f;return v>=0&&v<=1&&m>=0&&m<=1&&(o.x=t+v*(n-t),o.y=s+v*(r-s),!0)}},63352:function(g){g.exports=function(p,i){var u=p.x1,e=p.y1,l=p.x2,o=p.y2,t=i.x,s=i.y,n=i.right,r=i.bottom,h=0;if(u>=t&&u<=n&&e>=s&&e<=r||l>=t&&l<=n&&o>=s&&o<=r)return!0;if(u<t&&l>=t){if((h=e+(o-e)*(t-u)/(l-u))>s&&h<=r)return!0}else if(u>n&&l<=n&&(h=e+(o-e)*(n-u)/(l-u))>=s&&h<=r)return!0;if(e<s&&o>=s){if((h=u+(l-u)*(s-e)/(o-e))>=t&&h<=n)return!0}else if(e>r&&o<=r&&(h=u+(l-u)*(r-e)/(o-e))>=t&&h<=n)return!0;return!1}},90424:function(g){g.exports=function(p,i,u){u===void 0&&(u=1);var e=i.x1,l=i.y1,o=i.x2,t=i.y2,s=p.x,n=p.y,r=(o-e)*(o-e)+(t-l)*(t-l);if(r===0)return!1;var h=((s-e)*(o-e)+(n-l)*(t-l))/r;if(h<0)return Math.sqrt((e-s)*(e-s)+(l-n)*(l-n))<=u;if(h>=0&&h<=1){var a=((l-n)*(o-e)-(e-s)*(t-l))/r;return Math.abs(a)*Math.sqrt(r)<=u}return Math.sqrt((o-s)*(o-s)+(t-n)*(t-n))<=u}},19169:function(g,p,i){var u=i(90424);g.exports=function(e,l){if(!u(e,l))return!1;var o=Math.min(l.x1,l.x2),t=Math.max(l.x1,l.x2),s=Math.min(l.y1,l.y2),n=Math.max(l.y1,l.y2);return e.x>=o&&e.x<=t&&e.y>=s&&e.y<=n}},12402:function(g){g.exports=function(p,i){return!(p.width<=0||p.height<=0||i.width<=0||i.height<=0||p.right<i.x||p.bottom<i.y||p.x>i.right||p.y>i.bottom)}},55299:function(g,p,i){var u=i(70972),e=i(26813),l=i(60509),o=i(53998);g.exports=function(t,s){if(s.left>t.right||s.right<t.left||s.top>t.bottom||s.bottom<t.top)return!1;var n=s.getLineA(),r=s.getLineB(),h=s.getLineC();if(e(t,n.x1,n.y1)||e(t,n.x2,n.y2)||e(t,r.x1,r.y1)||e(t,r.x2,r.y2)||e(t,h.x1,h.y1)||e(t,h.x2,h.y2))return!0;var a=t.getLineA(),c=t.getLineB(),d=t.getLineC(),f=t.getLineD();if(u(n,a)||u(n,c)||u(n,d)||u(n,f)||u(r,a)||u(r,c)||u(r,d)||u(r,f)||u(h,a)||u(h,c)||u(h,d)||u(h,f))return!0;var v=o(t);return l(s,v,!0).length>0}},54123:function(g){g.exports=function(p,i,u,e,l,o){return o===void 0&&(o=0),!(i>p.right+o||u<p.left-o||e>p.bottom+o||l<p.top-o)}},77678:function(g,p,i){var u=i(58595),e=i(90547);g.exports=function(l,o){return!(l.left>o.right||l.right<o.left||l.top>o.bottom||l.bottom<o.top||!e(l,o.x,o.y)&&!u(l.getLineA(),o)&&!u(l.getLineB(),o)&&!u(l.getLineC(),o))}},70416:function(g,p,i){var u=i(70972);g.exports=function(e,l){return!!(e.contains(l.x1,l.y1)||e.contains(l.x2,l.y2)||u(e.getLineA(),l)||u(e.getLineB(),l)||u(e.getLineC(),l))}},99460:function(g,p,i){var u=i(60509),e=i(48300),l=i(70972);g.exports=function(o,t){if(o.left>t.right||o.right<t.left||o.top>t.bottom||o.bottom<t.top)return!1;var s=o.getLineA(),n=o.getLineB(),r=o.getLineC(),h=t.getLineA(),a=t.getLineB(),c=t.getLineC();if(l(s,h)||l(s,a)||l(s,c)||l(n,h)||l(n,a)||l(n,c)||l(r,h)||l(r,a)||l(r,c))return!0;var d=e(o),f=u(t,d,!0);return f.length>0||(d=e(t),(f=u(o,d,!0)).length>0)}},33408:function(g,p,i){g.exports={CircleToCircle:i(19357),CircleToRectangle:i(10882),GetCircleToCircle:i(15375),GetCircleToRectangle:i(65971),GetLineToCircle:i(3351),GetLineToLine:i(12694),GetLineToPoints:i(27449),GetLineToPolygon:i(43608),GetLineToRectangle:i(46894),GetRaysFromPointToPolygon:i(99783),GetRectangleIntersection:i(89758),GetRectangleToRectangle:i(5574),GetRectangleToTriangle:i(32346),GetTriangleToCircle:i(17634),GetTriangleToLine:i(82217),GetTriangleToTriangle:i(62331),LineToCircle:i(58595),LineToLine:i(70972),LineToRectangle:i(63352),PointToLine:i(90424),PointToLineSegment:i(19169),RectangleToRectangle:i(12402),RectangleToTriangle:i(55299),RectangleToValues:i(54123),TriangleToCircle:i(77678),TriangleToLine:i(70416),TriangleToTriangle:i(99460)}},52256:function(g){g.exports=function(p){return Math.atan2(p.y2-p.y1,p.x2-p.x1)}},62579:function(g){g.exports=function(p,i,u){i===void 0&&(i=1),u===void 0&&(u=[]);var e=Math.round(p.x1),l=Math.round(p.y1),o=Math.round(p.x2),t=Math.round(p.y2),s=Math.abs(o-e),n=Math.abs(t-l),r=e<o?1:-1,h=l<t?1:-1,a=s-n;u.push({x:e,y:l});for(var c=1;e!==o||l!==t;){var d=a<<1;d>-n&&(a-=n,e+=r),d<s&&(a+=s,l+=h),c%i==0&&u.push({x:e,y:l}),c++}return u}},75981:function(g){g.exports=function(p,i,u){var e=i-(p.x1+p.x2)/2,l=u-(p.y1+p.y2)/2;return p.x1+=e,p.y1+=l,p.x2+=e,p.y2+=l,p}},92451:function(g,p,i){var u=i(97501);g.exports=function(e){return new u(e.x1,e.y1,e.x2,e.y2)}},14715:function(g){g.exports=function(p,i){return i.setTo(p.x1,p.y1,p.x2,p.y2)}},53250:function(g){g.exports=function(p,i){return p.x1===i.x1&&p.y1===i.y1&&p.x2===i.x2&&p.y2===i.y2}},92593:function(g,p,i){var u=i(47064);g.exports=function(e,l,o){o===void 0&&(o=l);var t=u(e),s=e.x2-e.x1,n=e.y2-e.y1;return l&&(e.x1=e.x1-s/t*l,e.y1=e.y1-n/t*l),o&&(e.x2=e.x2+s/t*o,e.y2=e.y2+n/t*o),e}},25511:function(g,p,i){var u=i(21274),e=i(17232),l=i(47978);g.exports=function(o,t,s,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);var h,a,c=[],d=o.x1,f=o.y1,v=o.x2-d,m=o.y2-f,x=e(t,r),T=s-1;for(h=0;h<T;h++)a=x(h/T),c.push(new l(d+v*a,f+m*a));if(a=x(1),c.push(new l(d+v*a,f+m*a)),n>0){var y=c[0],E=[y];for(h=1;h<c.length-1;h++){var w=c[h];u(y,w)>=n&&(E.push(w),y=w)}var R=c[c.length-1];return u(y,R)<n&&E.pop(),E.push(R),E}return c}},27797:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=(e.x1+e.x2)/2,l.y=(e.y1+e.y2)/2,l}},24052:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){o===void 0&&(o=new u);var t=e.x1,s=e.y1,n=e.x2,r=e.y2,h=(n-t)*(n-t)+(r-s)*(r-s);if(h===0)return o;var a=((l.x-t)*(n-t)+(l.y-s)*(r-s))/h;return o.x=t+a*(n-t),o.y=s+a*(r-s),o}},87047:function(g,p,i){var u=i(80925),e=i(52256),l=i(47978);g.exports=function(o,t){t===void 0&&(t=new l);var s=e(o)-u.TAU;return t.x=Math.cos(s),t.y=Math.sin(s),t}},64610:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){return o===void 0&&(o=new u),o.x=e.x1+(e.x2-e.x1)*l,o.y=e.y1+(e.y2-e.y1)*l,o}},26299:function(g,p,i){var u=i(47064),e=i(47978);g.exports=function(l,o,t,s){s===void 0&&(s=[]),!o&&t>0&&(o=u(l)/t);for(var n=l.x1,r=l.y1,h=l.x2,a=l.y2,c=0;c<o;c++){var d=c/o,f=n+(h-n)*d,v=r+(a-r)*d;s.push(new e(f,v))}return s}},65603:function(g){g.exports=function(p,i){var u=p.x1,e=p.y1,l=p.x2,o=p.y2,t=(l-u)*(l-u)+(o-e)*(o-e);if(t===0)return!1;var s=((e-i.y)*(l-u)-(u-i.x)*(o-e))/t;return Math.abs(s)*Math.sqrt(t)}},42204:function(g){g.exports=function(p){return Math.abs(p.y1-p.y2)}},47064:function(g){g.exports=function(p){return Math.sqrt((p.x2-p.x1)*(p.x2-p.x1)+(p.y2-p.y1)*(p.y2-p.y1))}},97501:function(g,p,i){var u=i(69186),e=i(64610),l=i(26299),o=i(30097),t=i(57747),s=i(17321),n=new u({initialize:function(r,h,a,c){r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),this.type=o.LINE,this.x1=r,this.y1=h,this.x2=a,this.y2=c},getPoint:function(r,h){return e(this,r,h)},getPoints:function(r,h,a){return l(this,r,h,a)},getRandomPoint:function(r){return t(this,r)},setTo:function(r,h,a,c){return r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),this.x1=r,this.y1=h,this.x2=a,this.y2=c,this},getPointA:function(r){return r===void 0&&(r=new s),r.set(this.x1,this.y1),r},getPointB:function(r){return r===void 0&&(r=new s),r.set(this.x2,this.y2),r},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(r){this.x1<=this.x2?this.x1=r:this.x2=r}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(r){this.x1>this.x2?this.x1=r:this.x2=r}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(r){this.y1<=this.y2?this.y1=r:this.y2=r}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(r){this.y1>this.y2?this.y1=r:this.y2=r}}});g.exports=n},24364:function(g,p,i){var u=i(80925),e=i(6704),l=i(52256);g.exports=function(o){var t=l(o)-u.TAU;return e(t,-Math.PI,Math.PI)}},36618:function(g,p,i){var u=i(80925),e=i(52256);g.exports=function(l){return Math.cos(e(l)-u.TAU)}},82233:function(g,p,i){var u=i(80925),e=i(52256);g.exports=function(l){return Math.sin(e(l)-u.TAU)}},8462:function(g){g.exports=function(p,i,u){return p.x1+=i,p.y1+=u,p.x2+=i,p.y2+=u,p}},22278:function(g){g.exports=function(p){return-(p.x2-p.x1)/(p.y2-p.y1)}},57747:function(g,p,i){var u=i(47978);g.exports=function(e,l){l===void 0&&(l=new u);var o=Math.random();return l.x=e.x1+o*(e.x2-e.x1),l.y=e.y1+o*(e.y2-e.y1),l}},43531:function(g,p,i){var u=i(52256),e=i(24364);g.exports=function(l,o){return 2*e(o)-Math.PI-u(l)}},44394:function(g,p,i){var u=i(19972);g.exports=function(e,l){var o=(e.x1+e.x2)/2,t=(e.y1+e.y2)/2;return u(e,o,t,l)}},14608:function(g,p,i){var u=i(19972);g.exports=function(e,l,o){return u(e,l.x,l.y,o)}},19972:function(g){g.exports=function(p,i,u,e){var l=Math.cos(e),o=Math.sin(e),t=p.x1-i,s=p.y1-u;return p.x1=t*l-s*o+i,p.y1=t*o+s*l+u,t=p.x2-i,s=p.y2-u,p.x2=t*l-s*o+i,p.y2=t*o+s*l+u,p}},81115:function(g){g.exports=function(p,i,u,e,l){return p.x1=i,p.y1=u,p.x2=i+Math.cos(e)*l,p.y2=u+Math.sin(e)*l,p}},34566:function(g){g.exports=function(p){return(p.y2-p.y1)/(p.x2-p.x1)}},55103:function(g){g.exports=function(p){return Math.abs(p.x1-p.x2)}},77201:function(g,p,i){var u=i(97501);u.Angle=i(52256),u.BresenhamPoints=i(62579),u.CenterOn=i(75981),u.Clone=i(92451),u.CopyFrom=i(14715),u.Equals=i(53250),u.Extend=i(92593),u.GetEasedPoints=i(25511),u.GetMidPoint=i(27797),u.GetNearestPoint=i(24052),u.GetNormal=i(87047),u.GetPoint=i(64610),u.GetPoints=i(26299),u.GetShortestDistance=i(65603),u.Height=i(42204),u.Length=i(47064),u.NormalAngle=i(24364),u.NormalX=i(36618),u.NormalY=i(82233),u.Offset=i(8462),u.PerpSlope=i(22278),u.Random=i(57747),u.ReflectAngle=i(43531),u.Rotate=i(44394),u.RotateAroundPoint=i(14608),u.RotateAroundXY=i(19972),u.SetToAngle=i(81115),u.Slope=i(34566),u.Width=i(55103),g.exports=u},45934:function(g,p,i){var u=i(69186),e=i(75380),l=i(17321);function o(s,n,r,h){var a=s-r,c=n-h,d=a*a+c*c;return Math.sqrt(d)}var t=new u({initialize:function(s,n,r){this.vertex1=s,this.vertex2=n,this.vertex3=r,this.bounds=new e,this._inCenter=new l},getInCenter:function(s){s===void 0&&(s=!0);var n,r,h,a,c,d,f=this.vertex1,v=this.vertex2,m=this.vertex3;s?(n=f.x,r=f.y,h=v.x,a=v.y,c=m.x,d=m.y):(n=f.vx,r=f.vy,h=v.vx,a=v.vy,c=m.vx,d=m.vy);var x=o(c,d,h,a),T=o(n,r,c,d),y=o(h,a,n,r),E=x+T+y;return this._inCenter.set((n*x+h*T+c*y)/E,(r*x+a*T+d*y)/E)},contains:function(s,n,r){var h=this.vertex1,a=this.vertex2,c=this.vertex3,d=h.vx,f=h.vy,v=a.vx,m=a.vy,x=c.vx,T=c.vy;if(r){var y=r.a,E=r.b,w=r.c,R=r.d,C=r.e,A=r.f;d=h.vx*y+h.vy*w+C,f=h.vx*E+h.vy*R+A,v=a.vx*y+a.vy*w+C,m=a.vx*E+a.vy*R+A,x=c.vx*y+c.vy*w+C,T=c.vx*E+c.vy*R+A}var S=x-d,b=T-f,_=v-d,P=m-f,D=s-d,O=n-f,F=S*S+b*b,N=S*_+b*P,k=S*D+b*O,L=_*_+P*P,U=_*D+P*O,Y=F*L-N*N,B=Y===0?0:1/Y,W=(L*k-N*U)*B,G=(F*U-N*k)*B;return W>=0&&G>=0&&W+G<1},isCounterClockwise:function(s){var n=this.vertex1,r=this.vertex2,h=this.vertex3,a=(r.vx-n.vx)*(h.vy-n.vy)-(r.vy-n.vy)*(h.vx-n.vx);return s<=0?a>=0:a<0},load:function(s,n,r,h,a){return r=this.vertex1.load(s,n,r,h,a),r=this.vertex2.load(s,n,r,h,a),this.vertex3.load(s,n,r,h,a)},transformCoordinatesLocal:function(s,n,r,h){return this.vertex1.transformCoordinatesLocal(s,n,r,h),this.vertex2.transformCoordinatesLocal(s,n,r,h),this.vertex3.transformCoordinatesLocal(s,n,r,h),this},updateBounds:function(){var s=this.vertex1,n=this.vertex2,r=this.vertex3,h=this.bounds;return h.x=Math.min(s.vx,n.vx,r.vx),h.y=Math.min(s.vy,n.vy,r.vy),h.width=Math.max(s.vx,n.vx,r.vx)-h.x,h.height=Math.max(s.vy,n.vy,r.vy)-h.y,this},isInView:function(s,n,r,h,a,c,d,f,v,m,x){var T=this.vertex1.update(a,c,d,f,v,m,x,h),y=this.vertex2.update(a,c,d,f,v,m,x,h),E=this.vertex3.update(a,c,d,f,v,m,x,h);if(T.ta<=0&&y.ta<=0&&E.ta<=0||n&&!this.isCounterClockwise(r))return!1;var w=this.bounds;w.x=Math.min(T.tx,y.tx,E.tx),w.y=Math.min(T.ty,y.ty,E.ty),w.width=Math.max(T.tx,y.tx,E.tx)-w.x,w.height=Math.max(T.ty,y.ty,E.ty)-w.y;var R=s.x+s.width,C=s.y+s.height;return!(w.width<=0||w.height<=0||s.width<=0||s.height<=0||w.right<s.x||w.bottom<s.y||w.x>R||w.y>C)},translate:function(s,n){n===void 0&&(n=0);var r=this.vertex1,h=this.vertex2,a=this.vertex3;return r.x+=s,r.y+=n,h.x+=s,h.y+=n,a.x+=s,a.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(s){var n=this.getInCenter();this.translate(s-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(s){var n=this.getInCenter();this.translate(0,s-n.y)}},alpha:{get:function(){var s=this.vertex1,n=this.vertex2,r=this.vertex3;return(s.alpha+n.alpha+r.alpha)/3},set:function(s){this.vertex1.alpha=s,this.vertex2.alpha=s,this.vertex3.alpha=s}},depth:{get:function(){var s=this.vertex1,n=this.vertex2,r=this.vertex3;return(s.vz+n.vz+r.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});g.exports=t},69295:function(g,p,i){var u=i(45934),e=i(25738),l=i(54259),o=i(33736),t=i(45978),s=new o,n=new o,r=new l;g.exports=function(h){var a=e(h,"mesh"),c=e(h,"texture",null),d=e(h,"frame"),f=e(h,"width",1),v=e(h,"height",f),m=e(h,"widthSegments",1),x=e(h,"heightSegments",m),T=e(h,"x",0),y=e(h,"y",0),E=e(h,"z",0),w=e(h,"rotateX",0),R=e(h,"rotateY",0),C=e(h,"rotateZ",0),A=e(h,"zIsUp",!0),S=e(h,"isOrtho",!!a&&a.dirtyCache[11]),b=e(h,"colors",[16777215]),_=e(h,"alphas",[1]),P=e(h,"tile",!1),D=e(h,"flipY",!1),O=e(h,"width",null),F={faces:[],verts:[]};if(s.set(T,y,E),n.set(w,R,C),r.fromRotationXYTranslation(n,s,A),!c&&a)c=a.texture;else{if(!a||typeof c!="string")return F;c=a.scene.sys.textures.get(c)}var N=c.get(d);!O&&S&&c&&a&&(f=N.width/a.height,v=N.height/a.height);var k,L,U=f/2,Y=v/2,B=Math.floor(m),W=Math.floor(x),G=B+1,X=W+1,q=f/B,j=v/W,V=[],K=[],H=0,Z=1,Q=0,J=1;N&&(H=N.u0,Z=N.u1,D?(Q=N.v1,J=N.v0):(Q=N.v0,J=N.v1));var et=Z-H,$=J-Q;for(L=0;L<X;L++){var tt=L*j-Y;for(k=0;k<G;k++){var it=k*q-U;K.push(it,-tt);var nt=H+et*(k/B),rt=Q+$*(L/W);V.push(nt,rt)}}Array.isArray(b)||(b=[b]),Array.isArray(_)||(_=[_]);var st=0,at=0;for(L=0;L<W;L++)for(k=0;k<B;k++){var ct=2*(k+G*L),ht=2*(k+G*(L+1)),ut=2*(k+1+G*(L+1)),ot=2*(k+1+G*L),ft=b[at],lt=_[st],gt=new t(K[ct],K[ct+1],0,V[ct],V[ct+1],ft,lt).transformMat4(r),pt=new t(K[ht],K[ht+1],0,V[ht],V[ht+1],ft,lt).transformMat4(r),vt=new t(K[ot],K[ot+1],0,V[ot],V[ot+1],ft,lt).transformMat4(r),dt=new t(K[ht],K[ht+1],0,V[ht],V[ht+1],ft,lt).transformMat4(r),mt=new t(K[ut],K[ut+1],0,V[ut],V[ut+1],ft,lt).transformMat4(r),xt=new t(K[ot],K[ot+1],0,V[ot],V[ot+1],ft,lt).transformMat4(r);P&&(gt.setUVs(H,J),pt.setUVs(H,Q),vt.setUVs(Z,J),dt.setUVs(H,Q),mt.setUVs(Z,Q),xt.setUVs(Z,J)),++at===b.length&&(at=0),++st===_.length&&(st=0),F.verts.push(gt,pt,vt,dt,mt,xt),F.faces.push(new u(gt,pt,vt),new u(dt,mt,xt))}return a&&(a.faces=a.faces.concat(F.faces),a.vertices=a.vertices.concat(F.verts)),F}},69750:function(g,p,i){var u=i(45934),e=i(54259),l=i(33736),o=i(45978),t=new l,s=new l,n=new e;g.exports=function(r,h,a,c,d,f,v,m,x,T){a===void 0&&(a=1),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=0),m===void 0&&(m=0),x===void 0&&(x=0),T===void 0&&(T=!0);var y={faces:[],verts:[]},E=r.materials;t.set(c,d,f),s.set(v,m,x),n.fromRotationXYTranslation(s,t,T);for(var w=0;w<r.models.length;w++)for(var R=r.models[w],C=R.vertices,A=R.textureCoords,S=R.faces,b=0;b<S.length;b++){var _=S[b],P=_.vertices[0],D=_.vertices[1],O=_.vertices[2],F=C[P.vertexIndex],N=C[D.vertexIndex],k=C[O.vertexIndex],L=P.textureCoordsIndex,U=D.textureCoordsIndex,Y=O.textureCoordsIndex,B=L===-1?{u:0,v:1}:A[L],W=U===-1?{u:0,v:0}:A[U],G=Y===-1?{u:1,v:1}:A[Y],X=16777215;_.material!==""&&E[_.material]&&(X=E[_.material]);var q=new o(F.x*a,F.y*a,F.z*a,B.u,B.v,X).transformMat4(n),j=new o(N.x*a,N.y*a,N.z*a,W.u,W.v,X).transformMat4(n),V=new o(k.x*a,k.y*a,k.z*a,G.u,G.v,X).transformMat4(n);y.verts.push(q,j,V),y.faces.push(new u(q,j,V))}return h&&(h.faces=h.faces.concat(y.faces),h.vertices=h.vertices.concat(y.verts)),y}},27092:function(g,p,i){var u=i(45934),e=i(45978);g.exports=function(l,o,t,s,n,r,h){if(s===void 0&&(s=!1),r===void 0&&(r=16777215),h===void 0&&(h=1),l.length===o.length){var a,c,d,f,v,m,x,T,y,E,w,R={faces:[],vertices:[]},C=s?3:2,A=Array.isArray(r),S=Array.isArray(h);if(Array.isArray(t)&&t.length>0)for(a=0;a<t.length;a++){var b=t[a],_=2*t[a],P=t[a]*C;c=l[P],d=l[P+1],f=s?l[P+2]:0,v=o[_],m=o[_+1],x=A?r[b]:r,T=S?h[b]:h,y=0,E=0,w=0,n&&(y=n[P],E=n[P+1],w=s?n[P+2]:0),R.vertices.push(new e(c,d,f,v,m,x,T,y,E,w))}else{var D=0,O=0;for(a=0;a<l.length;a+=C)c=l[a],d=l[a+1],f=s?l[a+2]:0,v=o[D],m=o[D+1],x=A?r[O]:r,T=S?h[O]:h,y=0,E=0,w=0,n&&(y=n[a],E=n[a+1],w=s?n[a+2]:0),R.vertices.push(new e(c,d,f,v,m,x,T,y,E,w)),D+=2,O++}for(a=0;a<R.vertices.length;a+=3){var F=R.vertices[a],N=R.vertices[a+1],k=R.vertices[a+2];R.faces.push(new u(F,N,k))}return R}console.warn("GenerateVerts: vertices and uvs count not equal")}},11669:function(g){var p=!0,i="untitled",u="",e="";function l(d){return d.models.length===0&&d.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),u="",d.models[d.models.length-1]}function o(d,f){var v=d.length>=2?d[1]:i;f.models.push({faces:[],name:v,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function t(d){d.length===2&&(u=d[1])}function s(d,f){var v=d.length,m=v>=2?parseFloat(d[1]):0,x=v>=3?parseFloat(d[2]):0,T=v>=4?parseFloat(d[3]):0;l(f).vertices.push({x:m,y:x,z:T})}function n(d,f){var v=d.length,m=v>=2?parseFloat(d[1]):0,x=v>=3?parseFloat(d[2]):0,T=v>=4?parseFloat(d[3]):0;isNaN(m)&&(m=0),isNaN(x)&&(x=0),isNaN(T)&&(T=0),p&&(x=1-x),l(f).textureCoords.push({u:m,v:x,w:T})}function r(d,f){var v=d.length,m=v>=2?parseFloat(d[1]):0,x=v>=3?parseFloat(d[2]):0,T=v>=4?parseFloat(d[3]):0;l(f).vertexNormals.push({x:m,y:x,z:T})}function h(d,f){var v=d.length-1;if(!(v<3)){for(var m={group:u,material:e,vertices:[]},x=0;x<v;x++){var T=d[x+1].split("/"),y=T.length;if(!(y<1||y>3)){var E=0,w=0,R=0;E=parseInt(T[0],10),y>1&&T[1]!==""&&(w=parseInt(T[1],10)),y>2&&(R=parseInt(T[2],10)),E!==0&&(E<0&&(E=l(f).vertices.length+1+E),w-=1,E-=1,R-=1,m.vertices.push({textureCoordsIndex:w,vertexIndex:E,vertexNormalIndex:R}))}}l(f).faces.push(m)}}function a(d,f){d.length>=2&&f.materialLibraries.push(d[1])}function c(d){d.length>=2&&(e=d[1])}g.exports=function(d,f){f===void 0&&(f=!0),p=f;var v,m,x={materials:{},materialLibraries:[],models:[]};u="",e="";for(var T=d.split(`
`),y=0;y<T.length;y++){var E=(v=T[y],m=void 0,m=v.indexOf("#"),m>-1?v.substring(0,m):v).replace(/\s\s+/g," ").trim().split(" ");switch(E[0].toLowerCase()){case"o":o(E,x);break;case"g":t(E);break;case"v":s(E,x);break;case"vt":n(E,x);break;case"vn":r(E,x);break;case"f":h(E,x);break;case"mtllib":a(E,x);break;case"usemtl":c(E)}}return x}},91252:function(g,p,i){var u=i(55117);g.exports=function(e){for(var l={},o=e.split(`
`),t="",s=0;s<o.length;s++){var n=o[s].trim();if(n.indexOf("#")!==0&&n!==""){var r=n.replace(/\s\s+/g," ").trim().split(" ");switch(r[0].toLowerCase()){case"newmtl":t=r[1];break;case"kd":var h=Math.floor(255*r[1]),a=r.length>=2?Math.floor(255*r[2]):h,c=r.length>=3?Math.floor(255*r[3]):h;l[t]=u(h,a,c)}}}return l}},56624:function(g){g.exports=function(p,i,u,e){var l,o;if(u===void 0&&e===void 0){var t=p.getInCenter();l=t.x,o=t.y}var s=Math.cos(i),n=Math.sin(i),r=p.vertex1,h=p.vertex2,a=p.vertex3,c=r.x-l,d=r.y-o;r.set(c*s-d*n+l,c*n+d*s+o),c=h.x-l,d=h.y-o,h.set(c*s-d*n+l,c*n+d*s+o),c=a.x-l,d=a.y-o,a.set(c*s-d*n+l,c*n+d*s+o)}},45978:function(g,p,i){var u=i(69186),e=i(64564),l=i(33736),o=new u({Extends:l,initialize:function(t,s,n,r,h,a,c,d,f,v){a===void 0&&(a=16777215),c===void 0&&(c=1),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=0),l.call(this,t,s,n),this.vx=0,this.vy=0,this.vz=0,this.nx=d,this.ny=f,this.nz=v,this.u=r,this.v=h,this.color=a,this.alpha=c,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,s){return this.u=t,this.v=s,this},transformCoordinatesLocal:function(t,s,n,r){var h=this.x,a=this.y,c=this.z,d=t.val,f=h*d[0]+a*d[4]+c*d[8]+d[12],v=h*d[1]+a*d[5]+c*d[9]+d[13],m=h*d[2]+a*d[6]+c*d[10]+d[14],x=h*d[3]+a*d[7]+c*d[11]+d[15];this.vx=f/x*s,this.vy=-v/x*n,this.vz=r<=0?m/x:-m/x},update:function(t,s,n,r,h,a,c,d){var f=this.vx*t+this.vy*n+h,v=this.vx*s+this.vy*r+a;return c&&(f=Math.round(f),v=Math.round(v)),this.tx=f,this.ty=v,this.ta=this.alpha*d,this},load:function(t,s,n,r,h){return t[++n]=this.tx,t[++n]=this.ty,t[++n]=this.u,t[++n]=this.v,t[++n]=r,t[++n]=h,s[++n]=e.getTintAppendFloatAlpha(this.color,this.ta),n}});g.exports=o},61859:function(g,p,i){var u={Face:i(45934),GenerateGridVerts:i(69295),GenerateObjVerts:i(69750),GenerateVerts:i(27092),ParseObj:i(11669),ParseObjMaterial:i(91252),RotateFace:i(56624),Vertex:i(45978)};g.exports=u},42233:function(g){g.exports=function(p){return p.setTo(Math.ceil(p.x),Math.ceil(p.y))}},42762:function(g,p,i){var u=i(47978);g.exports=function(e){return new u(e.x,e.y)}},72180:function(g){g.exports=function(p,i){return i.setTo(p.x,p.y)}},81848:function(g){g.exports=function(p,i){return p.x===i.x&&p.y===i.y}},93898:function(g){g.exports=function(p){return p.setTo(Math.floor(p.x),Math.floor(p.y))}},90385:function(g,p,i){var u=i(47978);g.exports=function(e,l){if(l===void 0&&(l=new u),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var o=e.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)l.x=e[0].x,l.y=e[0].y;else{for(var t=0;t<o;t++)l.x+=e[t].x,l.y+=e[t].y;l.x/=o,l.y/=o}return l}},72202:function(g){g.exports=function(p){return Math.sqrt(p.x*p.x+p.y*p.y)}},96458:function(g){g.exports=function(p){return p.x*p.x+p.y*p.y}},59235:function(g,p,i){var u=i(75380);g.exports=function(e,l){l===void 0&&(l=new u);for(var o=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=0;r<e.length;r++){var h=e[r];h.x>o&&(o=h.x),h.x<t&&(t=h.x),h.y>s&&(s=h.y),h.y<n&&(n=h.y)}return l.x=t,l.y=n,l.width=o-t,l.height=s-n,l}},14967:function(g,p,i){var u=i(47978);g.exports=function(e,l,o,t){return o===void 0&&(o=0),t===void 0&&(t=new u),t.x=e.x+(l.x-e.x)*o,t.y=e.y+(l.y-e.y)*o,t}},94552:function(g){g.exports=function(p){return p.setTo(p.y,p.x)}},78544:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.setTo(-e.x,-e.y)}},47978:function(g,p,i){var u=i(69186),e=i(30097),l=new u({initialize:function(o,t){o===void 0&&(o=0),t===void 0&&(t=o),this.type=e.POINT,this.x=o,this.y=t},setTo:function(o,t){return o===void 0&&(o=0),t===void 0&&(t=o),this.x=o,this.y=t,this}});g.exports=l},2707:function(g,p,i){var u=i(47978),e=i(96458);g.exports=function(l,o,t){t===void 0&&(t=new u);var s=(l.x*o.x+l.y*o.y)/e(o);return s!==0&&(t.x=s*o.x,t.y=s*o.y),t}},61384:function(g,p,i){var u=i(47978);g.exports=function(e,l,o){o===void 0&&(o=new u);var t=e.x*l.x+e.y*l.y;return t!==0&&(o.x=t*l.x,o.y=t*l.y),o}},92055:function(g,p,i){var u=i(72202);g.exports=function(e,l){if(e.x!==0||e.y!==0){var o=u(e);e.x/=o,e.y/=o}return e.x*=l,e.y*=l,e}},36937:function(g,p,i){var u=i(47978);u.Ceil=i(42233),u.Clone=i(42762),u.CopyFrom=i(72180),u.Equals=i(81848),u.Floor=i(93898),u.GetCentroid=i(90385),u.GetMagnitude=i(72202),u.GetMagnitudeSq=i(96458),u.GetRectangleFromPoints=i(59235),u.Interpolate=i(14967),u.Invert=i(94552),u.Negative=i(78544),u.Project=i(2707),u.ProjectUnit=i(61384),u.SetMagnitude=i(92055),g.exports=u},50637:function(g,p,i){var u=i(77816);g.exports=function(e){return new u(e.points)}},57997:function(g){g.exports=function(p,i,u){for(var e=!1,l=-1,o=p.points.length-1;++l<p.points.length;o=l){var t=p.points[l].x,s=p.points[l].y,n=p.points[o].x,r=p.points[o].y;(s<=u&&u<r||r<=u&&u<s)&&i<(n-t)*(u-s)/(r-s)+t&&(e=!e)}return e}},89273:function(g,p,i){var u=i(57997);g.exports=function(e,l){return u(e,l.x,l.y)}},64634:function(g){function p(b,_,P){P=P||2;var D,O,F,N,k,L,U,Y=_&&_.length,B=Y?_[0]*P:b.length,W=i(b,0,B,P,!0),G=[];if(!W||W.next===W.prev)return G;if(Y&&(W=function(q,j,V,K){var H,Z,Q,J=[];for(H=0,Z=j.length;H<Z;H++)(Q=i(q,j[H]*K,H<Z-1?j[H+1]*K:q.length,K,!1))===Q.next&&(Q.steiner=!0),J.push(c(Q));for(J.sort(n),H=0;H<J.length;H++)r(J[H],V),V=u(V,V.next);return V}(b,_,W,P)),b.length>80*P){D=F=b[0],O=N=b[1];for(var X=P;X<B;X+=P)(k=b[X])<D&&(D=k),(L=b[X+1])<O&&(O=L),k>F&&(F=k),L>N&&(N=L);U=(U=Math.max(F-D,N-O))!==0?1/U:0}return e(W,G,P,D,O,U),G}function i(b,_,P,D,O){var F,N;if(O===S(b,_,P,D)>0)for(F=_;F<P;F+=D)N=R(F,b[F],b[F+1],N);else for(F=P-D;F>=_;F-=D)N=R(F,b[F],b[F+1],N);return N&&m(N,N.next)&&(C(N),N=N.next),N}function u(b,_){if(!b)return b;_||(_=b);var P,D=b;do if(P=!1,D.steiner||!m(D,D.next)&&v(D.prev,D,D.next)!==0)D=D.next;else{if(C(D),(D=_=D.prev)===D.next)break;P=!0}while(P||D!==_);return _}function e(b,_,P,D,O,F,N){if(b){!N&&F&&function(Y,B,W,G){var X=Y;do X.z===null&&(X.z=a(X.x,X.y,B,W,G)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==Y);X.prevZ.nextZ=null,X.prevZ=null,function(q){var j,V,K,H,Z,Q,J,et,$=1;do{for(V=q,q=null,Z=null,Q=0;V;){for(Q++,K=V,J=0,j=0;j<$&&(J++,K=K.nextZ);j++);for(et=$;J>0||et>0&&K;)J!==0&&(et===0||!K||V.z<=K.z)?(H=V,V=V.nextZ,J--):(H=K,K=K.nextZ,et--),Z?Z.nextZ=H:q=H,H.prevZ=Z,Z=H;V=K}Z.nextZ=null,$*=2}while(Q>1)}(X)}(b,D,O,F);for(var k,L,U=b;b.prev!==b.next;)if(k=b.prev,L=b.next,F?o(b,D,O,F):l(b))_.push(k.i/P),_.push(b.i/P),_.push(L.i/P),C(b),b=L.next,U=L.next;else if((b=L)===U){N?N===1?e(b=t(u(b),_,P),_,P,D,O,F,2):N===2&&s(b,_,P,D,O,F):e(u(b),_,P,D,O,F,1);break}}}function l(b){var _=b.prev,P=b,D=b.next;if(v(_,P,D)>=0)return!1;for(var O=b.next.next;O!==b.prev;){if(d(_.x,_.y,P.x,P.y,D.x,D.y,O.x,O.y)&&v(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function o(b,_,P,D){var O=b.prev,F=b,N=b.next;if(v(O,F,N)>=0)return!1;for(var k=O.x<F.x?O.x<N.x?O.x:N.x:F.x<N.x?F.x:N.x,L=O.y<F.y?O.y<N.y?O.y:N.y:F.y<N.y?F.y:N.y,U=O.x>F.x?O.x>N.x?O.x:N.x:F.x>N.x?F.x:N.x,Y=O.y>F.y?O.y>N.y?O.y:N.y:F.y>N.y?F.y:N.y,B=a(k,L,_,P,D),W=a(U,Y,_,P,D),G=b.prevZ,X=b.nextZ;G&&G.z>=B&&X&&X.z<=W;){if(G!==b.prev&&G!==b.next&&d(O.x,O.y,F.x,F.y,N.x,N.y,G.x,G.y)&&v(G.prev,G,G.next)>=0||(G=G.prevZ,X!==b.prev&&X!==b.next&&d(O.x,O.y,F.x,F.y,N.x,N.y,X.x,X.y)&&v(X.prev,X,X.next)>=0))return!1;X=X.nextZ}for(;G&&G.z>=B;){if(G!==b.prev&&G!==b.next&&d(O.x,O.y,F.x,F.y,N.x,N.y,G.x,G.y)&&v(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;X&&X.z<=W;){if(X!==b.prev&&X!==b.next&&d(O.x,O.y,F.x,F.y,N.x,N.y,X.x,X.y)&&v(X.prev,X,X.next)>=0)return!1;X=X.nextZ}return!0}function t(b,_,P){var D=b;do{var O=D.prev,F=D.next.next;!m(O,F)&&x(O,D,D.next,F)&&E(O,F)&&E(F,O)&&(_.push(O.i/P),_.push(D.i/P),_.push(F.i/P),C(D),C(D.next),D=b=F),D=D.next}while(D!==b);return u(D)}function s(b,_,P,D,O,F){var N=b;do{for(var k=N.next.next;k!==N.prev;){if(N.i!==k.i&&f(N,k)){var L=w(N,k);return N=u(N,N.next),L=u(L,L.next),e(N,_,P,D,O,F),void e(L,_,P,D,O,F)}k=k.next}N=N.next}while(N!==b)}function n(b,_){return b.x-_.x}function r(b,_){if(_=function(D,O){var F,N=O,k=D.x,L=D.y,U=-1/0;do{if(L<=N.y&&L>=N.next.y&&N.next.y!==N.y){var Y=N.x+(L-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Y<=k&&Y>U){if(U=Y,Y===k){if(L===N.y)return N;if(L===N.next.y)return N.next}F=N.x<N.next.x?N:N.next}}N=N.next}while(N!==O);if(!F)return null;if(k===U)return F;var B,W=F,G=F.x,X=F.y,q=1/0;N=F;do k>=N.x&&N.x>=G&&k!==N.x&&d(L<X?k:U,L,G,X,L<X?U:k,L,N.x,N.y)&&(B=Math.abs(L-N.y)/(k-N.x),E(N,D)&&(B<q||B===q&&(N.x>F.x||N.x===F.x&&h(F,N)))&&(F=N,q=B)),N=N.next;while(N!==W);return F}(b,_),_){var P=w(_,b);u(_,_.next),u(P,P.next)}}function h(b,_){return v(b.prev,b,_.prev)<0&&v(_.next,b,b.next)<0}function a(b,_,P,D,O){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-P)*O)|b<<8))|b<<4))|b<<2))|b<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-D)*O)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function c(b){var _=b,P=b;do(_.x<P.x||_.x===P.x&&_.y<P.y)&&(P=_),_=_.next;while(_!==b);return P}function d(b,_,P,D,O,F,N,k){return(O-N)*(_-k)-(b-N)*(F-k)>=0&&(b-N)*(D-k)-(P-N)*(_-k)>=0&&(P-N)*(F-k)-(O-N)*(D-k)>=0}function f(b,_){return b.next.i!==_.i&&b.prev.i!==_.i&&!function(P,D){var O=P;do{if(O.i!==P.i&&O.next.i!==P.i&&O.i!==D.i&&O.next.i!==D.i&&x(O,O.next,P,D))return!0;O=O.next}while(O!==P);return!1}(b,_)&&(E(b,_)&&E(_,b)&&function(P,D){var O=P,F=!1,N=(P.x+D.x)/2,k=(P.y+D.y)/2;do O.y>k!=O.next.y>k&&O.next.y!==O.y&&N<(O.next.x-O.x)*(k-O.y)/(O.next.y-O.y)+O.x&&(F=!F),O=O.next;while(O!==P);return F}(b,_)&&(v(b.prev,b,_.prev)||v(b,_.prev,_))||m(b,_)&&v(b.prev,b,b.next)>0&&v(_.prev,_,_.next)>0)}function v(b,_,P){return(_.y-b.y)*(P.x-_.x)-(_.x-b.x)*(P.y-_.y)}function m(b,_){return b.x===_.x&&b.y===_.y}function x(b,_,P,D){var O=y(v(b,_,P)),F=y(v(b,_,D)),N=y(v(P,D,b)),k=y(v(P,D,_));return O!==F&&N!==k||!(O!==0||!T(b,P,_))||!(F!==0||!T(b,D,_))||!(N!==0||!T(P,b,D))||!(k!==0||!T(P,_,D))}function T(b,_,P){return _.x<=Math.max(b.x,P.x)&&_.x>=Math.min(b.x,P.x)&&_.y<=Math.max(b.y,P.y)&&_.y>=Math.min(b.y,P.y)}function y(b){return b>0?1:b<0?-1:0}function E(b,_){return v(b.prev,b,b.next)<0?v(b,_,b.next)>=0&&v(b,b.prev,_)>=0:v(b,_,b.prev)<0||v(b,b.next,_)<0}function w(b,_){var P=new A(b.i,b.x,b.y),D=new A(_.i,_.x,_.y),O=b.next,F=_.prev;return b.next=_,_.prev=b,P.next=O,O.prev=P,D.next=P,P.prev=D,F.next=D,D.prev=F,D}function R(b,_,P,D){var O=new A(b,_,P);return D?(O.next=D.next,O.prev=D,D.next.prev=O,D.next=O):(O.prev=O,O.next=O),O}function C(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function A(b,_,P){this.i=b,this.x=_,this.y=P,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(b,_,P,D){for(var O=0,F=_,N=P-D;F<P;F+=D)O+=(b[N]-b[F])*(b[F+1]+b[N+1]),N=F;return O}p.deviation=function(b,_,P,D){var O=_&&_.length,F=O?_[0]*P:b.length,N=Math.abs(S(b,0,F,P));if(O)for(var k=0,L=_.length;k<L;k++){var U=_[k]*P,Y=k<L-1?_[k+1]*P:b.length;N-=Math.abs(S(b,U,Y,P))}var B=0;for(k=0;k<D.length;k+=3){var W=D[k]*P,G=D[k+1]*P,X=D[k+2]*P;B+=Math.abs((b[W]-b[X])*(b[G+1]-b[W+1])-(b[W]-b[G])*(b[X+1]-b[W+1]))}return N===0&&B===0?0:Math.abs((B-N)/N)},p.flatten=function(b){for(var _=b[0][0].length,P={vertices:[],holes:[],dimensions:_},D=0,O=0;O<b.length;O++){for(var F=0;F<b[O].length;F++)for(var N=0;N<_;N++)P.vertices.push(b[O][F][N]);O>0&&(D+=b[O-1].length,P.holes.push(D))}return P},g.exports=p},92594:function(g,p,i){var u=i(75380);g.exports=function(e,l){l===void 0&&(l=new u);for(var o,t=1/0,s=1/0,n=-t,r=-s,h=0;h<e.points.length;h++)o=e.points[h],t=Math.min(t,o.x),s=Math.min(s,o.y),n=Math.max(n,o.x),r=Math.max(r,o.y);return l.x=t,l.y=s,l.width=n-t,l.height=r-s,l}},18801:function(g){g.exports=function(p,i){i===void 0&&(i=[]);for(var u=0;u<p.points.length;u++)i.push(p.points[u].x),i.push(p.points[u].y);return i}},12061:function(g,p,i){var u=i(47064),e=i(97501),l=i(13410);g.exports=function(o,t,s,n){n===void 0&&(n=[]);var r=o.points,h=l(o);!t&&s>0&&(t=h/s);for(var a=0;a<t;a++)for(var c=h*(a/t),d=0,f=0;f<r.length;f++){var v=r[f],m=r[(f+1)%r.length],x=new e(v.x,v.y,m.x,m.y),T=u(x);if(!(c<d||c>d+T)){var y=x.getPoint((c-d)/T);n.push(y);break}d+=T}return n}},13410:function(g,p,i){var u=i(47064),e=i(97501);g.exports=function(l){for(var o=l.points,t=0,s=0;s<o.length;s++){var n=o[s],r=o[(s+1)%o.length],h=new e(n.x,n.y,r.x,r.y);t+=u(h)}return t}},77816:function(g,p,i){var u=i(69186),e=i(57997),l=i(12061),o=i(30097),t=new u({initialize:function(s){this.type=o.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(s,n){return e(this,s,n)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var n,r=Number.MAX_VALUE,h=0;h<s.length;h++)n={x:0,y:0},typeof s[h]=="number"||typeof s[h]=="string"?(n.x=parseFloat(s[h]),n.y=parseFloat(s[h+1]),h++):Array.isArray(s[h])?(n.x=s[h][0],n.y=s[h][1]):(n.x=s[h].x,n.y=s[h].y),this.points.push(n),n.y<r&&(r=n.y);return this.calculateArea(r),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s,n,r=0,h=0;h<this.points.length-1;h++)s=this.points[h],r+=((n=this.points[h+1]).x-s.x)*(s.y+n.y);return s=this.points[0],n=this.points[this.points.length-1],r+=(s.x-n.x)*(n.y+s.y),this.area=.5*-r,this.area},getPoints:function(s,n,r){return l(this,s,n,r)}});g.exports=t},90510:function(g){g.exports=function(p){return p.points.reverse(),p}},86934:function(g){function p(e,l,o){var t=l.x,s=l.y,n=o.x-t,r=o.y-s;if(n!==0||r!==0){var h=((e.x-t)*n+(e.y-s)*r)/(n*n+r*r);h>1?(t=o.x,s=o.y):h>0&&(t+=n*h,s+=r*h)}return(n=e.x-t)*n+(r=e.y-s)*r}function i(e,l,o,t,s){for(var n,r=t,h=l+1;h<o;h++){var a=p(e[h],e[l],e[o]);a>r&&(n=h,r=a)}r>t&&(n-l>1&&i(e,l,n,t,s),s.push(e[n]),o-n>1&&i(e,n,o,t,s))}function u(e,l){var o=e.length-1,t=[e[0]];return i(e,0,o,l,t),t.push(e[o]),t}g.exports=function(e,l,o){l===void 0&&(l=1),o===void 0&&(o=!1);var t=e.points;if(t.length>2){var s=l*l;o||(t=function(n,r){for(var h,a,c,d,f,v=n[0],m=[v],x=1,T=n.length;x<T;x++)c=v,(d=(a=h=n[x]).x-c.x)*d+(f=a.y-c.y)*f>r&&(m.push(h),v=h);return v!==h&&m.push(h),m}(t,s)),e.setTo(u(t,s))}return e}},63037:function(g){var p=function(i,u){return i[0]=u[0],i[1]=u[1],i};g.exports=function(i){var u,e=[],l=i.points;for(u=0;u<l.length;u++)e.push([l[u].x,l[u].y]);var o=[];for(e.length>0&&o.push(p([0,0],e[0])),u=0;u<e.length-1;u++){var t=e[u],s=e[u+1],n=t[0],r=t[1],h=s[0],a=s[1];o.push([.85*n+.15*h,.85*r+.15*a]),o.push([.15*n+.85*h,.15*r+.85*a])}return e.length>1&&o.push(p([0,0],e[e.length-1])),i.setTo(o)}},58891:function(g){g.exports=function(p,i,u){for(var e=p.points,l=0;l<e.length;l++)e[l].x+=i,e[l].y+=u;return p}},10413:function(g,p,i){var u=i(77816);u.Clone=i(50637),u.Contains=i(57997),u.ContainsPoint=i(89273),u.Earcut=i(64634),u.GetAABB=i(92594),u.GetNumberArray=i(18801),u.GetPoints=i(12061),u.Perimeter=i(13410),u.Reverse=i(90510),u.Simplify=i(86934),u.Smooth=i(63037),u.Translate=i(58891),g.exports=u},89258:function(g){g.exports=function(p){return p.width*p.height}},99158:function(g){g.exports=function(p){return p.x=Math.ceil(p.x),p.y=Math.ceil(p.y),p}},39023:function(g){g.exports=function(p){return p.x=Math.ceil(p.x),p.y=Math.ceil(p.y),p.width=Math.ceil(p.width),p.height=Math.ceil(p.height),p}},39414:function(g){g.exports=function(p,i,u){return p.x=i-p.width/2,p.y=u-p.height/2,p}},68392:function(g,p,i){var u=i(75380);g.exports=function(e){return new u(e.x,e.y,e.width,e.height)}},26813:function(g){g.exports=function(p,i,u){return!(p.width<=0||p.height<=0)&&p.x<=i&&p.x+p.width>=i&&p.y<=u&&p.y+p.height>=u}},83613:function(g,p,i){var u=i(26813);g.exports=function(e,l){return u(e,l.x,l.y)}},44909:function(g){g.exports=function(p,i){return!(i.width*i.height>p.width*p.height)&&i.x>p.x&&i.x<p.right&&i.right>p.x&&i.right<p.right&&i.y>p.y&&i.y<p.bottom&&i.bottom>p.y&&i.bottom<p.bottom}},90997:function(g){g.exports=function(p,i){return i.setTo(p.x,p.y,p.width,p.height)}},53998:function(g){g.exports=function(p,i){return i===void 0&&(i=[]),i.push({x:p.x,y:p.y}),i.push({x:p.right,y:p.y}),i.push({x:p.right,y:p.bottom}),i.push({x:p.x,y:p.bottom}),i}},97139:function(g){g.exports=function(p,i){return p.x===i.x&&p.y===i.y&&p.width===i.width&&p.height===i.height}},18965:function(g,p,i){var u=i(28169);g.exports=function(e,l){var o=u(e);return o<u(l)?e.setSize(l.height*o,l.height):e.setSize(l.width,l.width/o),e.setPosition(l.centerX-e.width/2,l.centerY-e.height/2)}},41290:function(g,p,i){var u=i(28169);g.exports=function(e,l){var o=u(e);return o>u(l)?e.setSize(l.height*o,l.height):e.setSize(l.width,l.width/o),e.setPosition(l.centerX-e.width/2,l.centerY-e.height/2)}},45880:function(g){g.exports=function(p){return p.x=Math.floor(p.x),p.y=Math.floor(p.y),p}},46665:function(g){g.exports=function(p){return p.x=Math.floor(p.x),p.y=Math.floor(p.y),p.width=Math.floor(p.width),p.height=Math.floor(p.height),p}},79803:function(g,p,i){var u=i(75380),e=i(80925);g.exports=function(l,o){if(o===void 0&&(o=new u),l.length===0)return o;for(var t,s,n,r=Number.MAX_VALUE,h=Number.MAX_VALUE,a=e.MIN_SAFE_INTEGER,c=e.MIN_SAFE_INTEGER,d=0;d<l.length;d++)t=l[d],Array.isArray(t)?(s=t[0],n=t[1]):(s=t.x,n=t.y),r=Math.min(r,s),h=Math.min(h,n),a=Math.max(a,s),c=Math.max(c,n);return o.x=r,o.y=h,o.width=a-r,o.height=c-h,o}},68096:function(g,p,i){var u=i(75380);g.exports=function(e,l,o,t,s){return s===void 0&&(s=new u),s.setTo(Math.min(e,o),Math.min(l,t),Math.abs(e-o),Math.abs(l-t))}},28169:function(g){g.exports=function(p){return p.height===0?NaN:p.width/p.height}},99095:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=e.centerX,l.y=e.centerY,l}},85715:function(g,p,i){var u=i(93080),e=i(47978);g.exports=function(l,o,t){if(t===void 0&&(t=new e),o<=0||o>=1)return t.x=l.x,t.y=l.y,t;var s=u(l)*o;return o>.5?(s-=l.width+l.height)<=l.width?(t.x=l.right-s,t.y=l.bottom):(t.x=l.x,t.y=l.bottom-(s-l.width)):s<=l.width?(t.x=l.x+s,t.y=l.y):(t.x=l.right,t.y=l.y+(s-l.width)),t}},53292:function(g,p,i){var u=i(85715),e=i(93080);g.exports=function(l,o,t,s){s===void 0&&(s=[]),!o&&t>0&&(o=e(l)/t);for(var n=0;n<o;n++){var r=n/o;s.push(u(l,r))}return s}},8392:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=e.width,l.y=e.height,l}},66243:function(g,p,i){var u=i(39414);g.exports=function(e,l,o){var t=e.centerX,s=e.centerY;return e.setSize(e.width+2*l,e.height+2*o),u(e,t,s)}},97554:function(g,p,i){var u=i(75380),e=i(12402);g.exports=function(l,o,t){return t===void 0&&(t=new u),e(l,o)?(t.x=Math.max(l.x,o.x),t.y=Math.max(l.y,o.y),t.width=Math.min(l.right,o.right)-t.x,t.height=Math.min(l.bottom,o.bottom)-t.y):t.setEmpty(),t}},16178:function(g,p,i){var u=i(93080),e=i(47978);g.exports=function(l,o,t,s){if(s===void 0&&(s=[]),!o&&!t)return s;o?t=Math.round(u(l)/o):o=u(l)/t;for(var n=l.x,r=l.y,h=0,a=0;a<t;a++)switch(s.push(new e(n,r)),h){case 0:(n+=o)>=l.right&&(h=1,r+=n-l.right,n=l.right);break;case 1:(r+=o)>=l.bottom&&(h=2,n-=r-l.bottom,r=l.bottom);break;case 2:(n-=o)<=l.left&&(h=3,r-=l.left-n,n=l.left);break;case 3:(r-=o)<=l.top&&(h=0,r=l.top)}return s}},14272:function(g){g.exports=function(p,i){for(var u=p.x,e=p.right,l=p.y,o=p.bottom,t=0;t<i.length;t++)u=Math.min(u,i[t].x),e=Math.max(e,i[t].x),l=Math.min(l,i[t].y),o=Math.max(o,i[t].y);return p.x=u,p.y=l,p.width=e-u,p.height=o-l,p}},76017:function(g){g.exports=function(p,i){var u=Math.min(p.x,i.x),e=Math.max(p.right,i.right);p.x=u,p.width=e-u;var l=Math.min(p.y,i.y),o=Math.max(p.bottom,i.bottom);return p.y=l,p.height=o-l,p}},44082:function(g){g.exports=function(p,i,u){var e=Math.min(p.x,i),l=Math.max(p.right,i);p.x=e,p.width=l-e;var o=Math.min(p.y,u),t=Math.max(p.bottom,u);return p.y=o,p.height=t-o,p}},78367:function(g){g.exports=function(p,i,u){return p.x+=i,p.y+=u,p}},51878:function(g){g.exports=function(p,i){return p.x+=i.x,p.y+=i.y,p}},1415:function(g){g.exports=function(p,i){return p.x<i.right&&p.right>i.x&&p.y<i.bottom&&p.bottom>i.y}},93080:function(g){g.exports=function(p){return 2*(p.width+p.height)}},1352:function(g,p,i){var u=i(47978),e=i(23407);g.exports=function(l,o,t){t===void 0&&(t=new u),o=e(o);var s=Math.sin(o),n=Math.cos(o),r=n>0?l.width/2:l.width/-2,h=s>0?l.height/2:l.height/-2;return Math.abs(r*s)<Math.abs(h*n)?h=r*s/n:r=h*n/s,t.x=r+l.centerX,t.y=h+l.centerY,t}},61852:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=e.x+Math.random()*e.width,l.y=e.y+Math.random()*e.height,l}},32058:function(g,p,i){var u=i(27019),e=i(44909),l=i(47978);g.exports=function(o,t,s){if(s===void 0&&(s=new l),e(o,t))switch(u(0,3)){case 0:s.x=o.x+Math.random()*(t.right-o.x),s.y=o.y+Math.random()*(t.top-o.y);break;case 1:s.x=t.x+Math.random()*(o.right-t.x),s.y=t.bottom+Math.random()*(o.bottom-t.bottom);break;case 2:s.x=o.x+Math.random()*(t.x-o.x),s.y=t.y+Math.random()*(o.bottom-t.y);break;case 3:s.x=t.right+Math.random()*(o.right-t.right),s.y=o.y+Math.random()*(t.bottom-o.y)}return s}},75380:function(g,p,i){var u=i(69186),e=i(26813),l=i(85715),o=i(53292),t=i(30097),s=i(97501),n=i(61852),r=new u({initialize:function(h,a,c,d){h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),d===void 0&&(d=0),this.type=t.RECTANGLE,this.x=h,this.y=a,this.width=c,this.height=d},contains:function(h,a){return e(this,h,a)},getPoint:function(h,a){return l(this,h,a)},getPoints:function(h,a,c){return o(this,h,a,c)},getRandomPoint:function(h){return n(this,h)},setTo:function(h,a,c,d){return this.x=h,this.y=a,this.width=c,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,a){return a===void 0&&(a=h),this.x=h,this.y=a,this},setSize:function(h,a){return a===void 0&&(a=h),this.width=h,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new s),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new s),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new s),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new s),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});g.exports=r},54156:function(g){g.exports=function(p,i){return p.width===i.width&&p.height===i.height}},8569:function(g){g.exports=function(p,i,u){return u===void 0&&(u=i),p.width*=i,p.height*=u,p}},20822:function(g,p,i){var u=i(75380);g.exports=function(e,l,o){o===void 0&&(o=new u);var t=Math.min(e.x,l.x),s=Math.min(e.y,l.y),n=Math.max(e.right,l.right)-t,r=Math.max(e.bottom,l.bottom)-s;return o.setTo(t,s,n,r)}},43550:function(g,p,i){var u=i(75380);u.Area=i(89258),u.Ceil=i(99158),u.CeilAll=i(39023),u.CenterOn=i(39414),u.Clone=i(68392),u.Contains=i(26813),u.ContainsPoint=i(83613),u.ContainsRect=i(44909),u.CopyFrom=i(90997),u.Decompose=i(53998),u.Equals=i(97139),u.FitInside=i(18965),u.FitOutside=i(41290),u.Floor=i(45880),u.FloorAll=i(46665),u.FromPoints=i(79803),u.FromXY=i(68096),u.GetAspectRatio=i(28169),u.GetCenter=i(99095),u.GetPoint=i(85715),u.GetPoints=i(53292),u.GetSize=i(8392),u.Inflate=i(66243),u.Intersection=i(97554),u.MarchingAnts=i(16178),u.MergePoints=i(14272),u.MergeRect=i(76017),u.MergeXY=i(44082),u.Offset=i(78367),u.OffsetPoint=i(51878),u.Overlaps=i(1415),u.Perimeter=i(93080),u.PerimeterPoint=i(1352),u.Random=i(61852),u.RandomOutside=i(32058),u.SameDimensions=i(54156),u.Scale=i(8569),u.Union=i(20822),g.exports=u},49227:function(g){g.exports=function(p){var i=p.x1,u=p.y1,e=p.x2,l=p.y2,o=p.x3,t=p.y3;return Math.abs(((o-i)*(l-u)-(e-i)*(t-u))/2)}},24456:function(g,p,i){var u=i(82671);g.exports=function(e,l,o){var t=o*(Math.sqrt(3)/2);return new u(e,l,e+o/2,l+t,e-o/2,l+t)}},66364:function(g,p,i){var u=i(64634),e=i(82671);g.exports=function(l,o,t,s,n){o===void 0&&(o=null),t===void 0&&(t=1),s===void 0&&(s=1),n===void 0&&(n=[]);for(var r,h,a,c,d,f,v,m,x,T=u(l,o),y=0;y<T.length;y+=3)r=T[y],h=T[y+1],a=T[y+2],c=l[2*r]*t,d=l[2*r+1]*s,f=l[2*h]*t,v=l[2*h+1]*s,m=l[2*a]*t,x=l[2*a+1]*s,n.push(new e(c,d,f,v,m,x));return n}},98702:function(g,p,i){var u=i(82671);g.exports=function(e,l,o,t){return t===void 0&&(t=o),new u(e,l,e,l-t,e+o,l)}},14625:function(g,p,i){var u=i(53472),e=i(14870);g.exports=function(l,o,t,s){s===void 0&&(s=u);var n=s(l),r=o-n.x,h=t-n.y;return e(l,r,h)}},53472:function(g,p,i){var u=i(47978);g.exports=function(e,l){return l===void 0&&(l=new u),l.x=(e.x1+e.x2+e.x3)/3,l.y=(e.y1+e.y2+e.y3)/3,l}},41976:function(g,p,i){var u=i(17321);function e(l,o,t,s){return l*s-o*t}g.exports=function(l,o){o===void 0&&(o=new u);var t=l.x3,s=l.y3,n=l.x1-t,r=l.y1-s,h=l.x2-t,a=l.y2-s,c=2*e(n,r,h,a),d=e(r,n*n+r*r,a,h*h+a*a),f=e(n,n*n+r*r,h,h*h+a*a);return o.x=t-d/c,o.y=s+f/c,o}},57371:function(g,p,i){var u=i(38459);g.exports=function(e,l){l===void 0&&(l=new u);var o,t,s=e.x1,n=e.y1,r=e.x2,h=e.y2,a=e.x3,c=e.y3,d=r-s,f=h-n,v=a-s,m=c-n,x=d*(s+r)+f*(n+h),T=v*(s+a)+m*(n+c),y=2*(d*(c-h)-f*(a-r));if(Math.abs(y)<1e-6){var E=Math.min(s,r,a),w=Math.min(n,h,c);o=.5*(Math.max(s,r,a)-E),t=.5*(Math.max(n,h,c)-w),l.x=E+o,l.y=w+t,l.radius=Math.sqrt(o*o+t*t)}else l.x=(m*x-f*T)/y,l.y=(d*T-v*x)/y,o=l.x-s,t=l.y-n,l.radius=Math.sqrt(o*o+t*t);return l}},74131:function(g,p,i){var u=i(82671);g.exports=function(e){return new u(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},90547:function(g){g.exports=function(p,i,u){var e=p.x3-p.x1,l=p.y3-p.y1,o=p.x2-p.x1,t=p.y2-p.y1,s=i-p.x1,n=u-p.y1,r=e*e+l*l,h=e*o+l*t,a=e*s+l*n,c=o*o+t*t,d=o*s+t*n,f=r*c-h*h,v=f===0?0:1/f,m=(c*a-h*d)*v,x=(r*d-h*a)*v;return m>=0&&x>=0&&m+x<1}},60509:function(g){g.exports=function(p,i,u,e){u===void 0&&(u=!1),e===void 0&&(e=[]);for(var l,o,t,s,n,r,h=p.x3-p.x1,a=p.y3-p.y1,c=p.x2-p.x1,d=p.y2-p.y1,f=h*h+a*a,v=h*c+a*d,m=c*c+d*d,x=f*m-v*v,T=x===0?0:1/x,y=p.x1,E=p.y1,w=0;w<i.length&&(o=(f*(r=c*(t=i[w].x-y)+d*(s=i[w].y-E))-v*(n=h*t+a*s))*T,!((l=(m*n-v*r)*T)>=0&&o>=0&&l+o<1&&(e.push({x:i[w].x,y:i[w].y}),u)));w++);return e}},40861:function(g,p,i){var u=i(90547);g.exports=function(e,l){return u(e,l.x,l.y)}},70442:function(g){g.exports=function(p,i){return i.setTo(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)}},48300:function(g){g.exports=function(p,i){return i===void 0&&(i=[]),i.push({x:p.x1,y:p.y1}),i.push({x:p.x2,y:p.y2}),i.push({x:p.x3,y:p.y3}),i}},12390:function(g){g.exports=function(p,i){return p.x1===i.x1&&p.y1===i.y1&&p.x2===i.x2&&p.y2===i.y2&&p.x3===i.x3&&p.y3===i.y3}},93488:function(g,p,i){var u=i(47978),e=i(47064);g.exports=function(l,o,t){t===void 0&&(t=new u);var s=l.getLineA(),n=l.getLineB(),r=l.getLineC();if(o<=0||o>=1)return t.x=s.x1,t.y=s.y1,t;var h=e(s),a=e(n),c=e(r),d=(h+a+c)*o,f=0;return d<h?(f=d/h,t.x=s.x1+(s.x2-s.x1)*f,t.y=s.y1+(s.y2-s.y1)*f):d>h+a?(f=(d-=h+a)/c,t.x=r.x1+(r.x2-r.x1)*f,t.y=r.y1+(r.y2-r.y1)*f):(f=(d-=h)/a,t.x=n.x1+(n.x2-n.x1)*f,t.y=n.y1+(n.y2-n.y1)*f),t}},10471:function(g,p,i){var u=i(47064),e=i(47978);g.exports=function(l,o,t,s){s===void 0&&(s=[]);var n=l.getLineA(),r=l.getLineB(),h=l.getLineC(),a=u(n),c=u(r),d=u(h),f=a+c+d;!o&&t>0&&(o=f/t);for(var v=0;v<o;v++){var m=f*(v/o),x=0,T=new e;m<a?(x=m/a,T.x=n.x1+(n.x2-n.x1)*x,T.y=n.y1+(n.y2-n.y1)*x):m>a+c?(x=(m-=a+c)/d,T.x=h.x1+(h.x2-h.x1)*x,T.y=h.y1+(h.y2-h.y1)*x):(x=(m-=a)/c,T.x=r.x1+(r.x2-r.x1)*x,T.y=r.y1+(r.y2-r.y1)*x),s.push(T)}return s}},10096:function(g,p,i){var u=i(47978);function e(l,o,t,s){var n=l-t,r=o-s,h=n*n+r*r;return Math.sqrt(h)}g.exports=function(l,o){o===void 0&&(o=new u);var t=l.x1,s=l.y1,n=l.x2,r=l.y2,h=l.x3,a=l.y3,c=e(h,a,n,r),d=e(t,s,h,a),f=e(n,r,t,s),v=c+d+f;return o.x=(t*c+n*d+h*f)/v,o.y=(s*c+r*d+a*f)/v,o}},14870:function(g){g.exports=function(p,i,u){return p.x1+=i,p.y1+=u,p.x2+=i,p.y2+=u,p.x3+=i,p.y3+=u,p}},60600:function(g,p,i){var u=i(47064);g.exports=function(e){var l=e.getLineA(),o=e.getLineB(),t=e.getLineC();return u(l)+u(o)+u(t)}},86407:function(g,p,i){var u=i(47978);g.exports=function(e,l){l===void 0&&(l=new u);var o=e.x2-e.x1,t=e.y2-e.y1,s=e.x3-e.x1,n=e.y3-e.y1,r=Math.random(),h=Math.random();return r+h>=1&&(r=1-r,h=1-h),l.x=e.x1+(o*r+s*h),l.y=e.y1+(t*r+n*h),l}},79708:function(g,p,i){var u=i(20729),e=i(10096);g.exports=function(l,o){var t=e(l);return u(l,t.x,t.y,o)}},31929:function(g,p,i){var u=i(20729);g.exports=function(e,l,o){return u(e,l.x,l.y,o)}},20729:function(g){g.exports=function(p,i,u,e){var l=Math.cos(e),o=Math.sin(e),t=p.x1-i,s=p.y1-u;return p.x1=t*l-s*o+i,p.y1=t*o+s*l+u,t=p.x2-i,s=p.y2-u,p.x2=t*l-s*o+i,p.y2=t*o+s*l+u,t=p.x3-i,s=p.y3-u,p.x3=t*l-s*o+i,p.y3=t*o+s*l+u,p}},82671:function(g,p,i){var u=i(69186),e=i(90547),l=i(93488),o=i(10471),t=i(30097),s=i(97501),n=i(86407),r=new u({initialize:function(h,a,c,d,f,v){h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=t.TRIANGLE,this.x1=h,this.y1=a,this.x2=c,this.y2=d,this.x3=f,this.y3=v},contains:function(h,a){return e(this,h,a)},getPoint:function(h,a){return l(this,h,a)},getPoints:function(h,a,c){return o(this,h,a,c)},getRandomPoint:function(h){return n(this,h)},setTo:function(h,a,c,d,f,v){return h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),v===void 0&&(v=0),this.x1=h,this.y1=a,this.x2=c,this.y2=d,this.x3=f,this.y3=v,this},getLineA:function(h){return h===void 0&&(h=new s),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new s),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new s),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var a;a=this.x1<=this.x2&&this.x1<=this.x3?this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?this.x2-h:this.x3-h,this.x1-=a,this.x2-=a,this.x3-=a}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var a;a=this.x1>=this.x2&&this.x1>=this.x3?this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?this.x2-h:this.x3-h,this.x1-=a,this.x2-=a,this.x3-=a}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var a;a=this.y1<=this.y2&&this.y1<=this.y3?this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?this.y2-h:this.y3-h,this.y1-=a,this.y2-=a,this.y3-=a}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var a;a=this.y1>=this.y2&&this.y1>=this.y3?this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?this.y2-h:this.y3-h,this.y1-=a,this.y2-=a,this.y3-=a}}});g.exports=r},9379:function(g,p,i){var u=i(82671);u.Area=i(49227),u.BuildEquilateral=i(24456),u.BuildFromPolygon=i(66364),u.BuildRight=i(98702),u.CenterOn=i(14625),u.Centroid=i(53472),u.CircumCenter=i(41976),u.CircumCircle=i(57371),u.Clone=i(74131),u.Contains=i(90547),u.ContainsArray=i(60509),u.ContainsPoint=i(40861),u.CopyFrom=i(70442),u.Decompose=i(48300),u.Equals=i(12390),u.GetPoint=i(93488),u.GetPoints=i(10471),u.InCenter=i(10096),u.Perimeter=i(60600),u.Offset=i(14870),u.Random=i(86407),u.Rotate=i(79708),u.RotateAroundPoint=i(31929),u.RotateAroundXY=i(20729),g.exports=u},51814:function(g){g.exports=function(p,i,u){return{gameObject:p,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:u,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},31354:function(g){g.exports=function(p,i){return function(u,e,l,o){var t=p.getPixelAlpha(e,l,o.texture.key,o.frame.name);return t&&t>=i}}},79976:function(g,p,i){var u=i(69186),e=i(24293),l=i(26729),o=i(65210),t=i(24496),s=i(8397),n=i(35749),r=i(86042),h=i(32426),a=i(9329),c=i(37423),d=new u({initialize:function(f,v){this.game=f,this.scaleManager,this.canvas,this.config=v,this.enabled=!0,this.events=new l,this.isOver=!0,this.defaultCursor="",this.keyboard=v.inputKeyboard?new s(this):null,this.mouse=v.inputMouse?new n(this):null,this.touch=v.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=v.inputActivePointers,v.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var m=0;m<=this.pointersTotal;m++){var x=new r(this,m);x.smoothFactor=v.inputSmoothFactor,this.pointers.push(x)}this.mousePointer=v.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new a,this._tempMatrix2=new a,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],f.events.once(t.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(t.PRE_RENDER,this.preRender,this),this.game.events.once(t.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(o.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(o.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,v=this.game.loop.delta,m=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(o.MANAGER_UPDATE);for(var x=0;x<m.length;x++){var T=m[x];if(T.sys.input&&T.sys.input.updatePoll(f,v)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f){f.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){f===void 0&&(f=1);var v=[];this.pointersTotal+f>10&&(f=10-this.pointersTotal);for(var m=0;m<f;m++){var x=this.pointers.length,T=new r(this,x);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,v.push(T)}return v},updateInputPlugins:function(f,v){var m=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var x=0;x<m.length;x++){var T=m[x];if(T.sys.input&&(T.sys.input.update(f,v)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(f){for(var v=this.pointers,m=[],x=0;x<f.changedTouches.length;x++)for(var T=f.changedTouches[x],y=1;y<this.pointersTotal;y++){var E=v[y];if(!E.active){E.touchstart(T,f),this.activePointer=E,m.push(E);break}}this.updateInputPlugins(e.TOUCH_START,m)},onTouchMove:function(f){for(var v=this.pointers,m=[],x=0;x<f.changedTouches.length;x++)for(var T=f.changedTouches[x],y=1;y<this.pointersTotal;y++){var E=v[y];if(E.active&&E.identifier===T.identifier){E.touchmove(T,f),this.activePointer=E,m.push(E);break}}this.updateInputPlugins(e.TOUCH_MOVE,m)},onTouchEnd:function(f){for(var v=this.pointers,m=[],x=0;x<f.changedTouches.length;x++)for(var T=f.changedTouches[x],y=1;y<this.pointersTotal;y++){var E=v[y];if(E.active&&E.identifier===T.identifier){E.touchend(T,f),m.push(E);break}}this.updateInputPlugins(e.TOUCH_END,m)},onTouchCancel:function(f){for(var v=this.pointers,m=[],x=0;x<f.changedTouches.length;x++)for(var T=f.changedTouches[x],y=1;y<this.pointersTotal;y++){var E=v[y];if(E.active&&E.identifier===T.identifier){E.touchcancel(T,f),m.push(E);break}}this.updateInputPlugins(e.TOUCH_CANCEL,m)},onMouseDown:function(f){var v=this.mousePointer;v.down(f),v.updateMotion(),this.activePointer=v,this.updateInputPlugins(e.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var v=this.mousePointer;v.move(f),v.updateMotion(),this.activePointer=v,this.updateInputPlugins(e.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var v=this.mousePointer;v.up(f),v.updateMotion(),this.activePointer=v,this.updateInputPlugins(e.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var v=this.mousePointer;v.wheel(f),this.activePointer=v,this.updateInputPlugins(e.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var v=this.mouse.locked;this.mousePointer.locked=v,this.events.emit(o.POINTERLOCK_CHANGE,f,v)},inputCandidate:function(f,v){var m=f.input;if(!m||!m.enabled||!m.alwaysEnabled&&!f.willRender(v))return!1;var x=!0,T=f.parentContainer;if(T)do{if(!T.willRender(v)){x=!1;break}T=T.parentContainer}while(T);return x},hitTest:function(f,v,m,x){x===void 0&&(x=this._tempHitTest);var T=this._tempPoint,y=m.scrollX,E=m.scrollY;x.length=0;var w=f.x,R=f.y;m.getWorldPoint(w,R,T),f.worldX=T.x,f.worldY=T.y;for(var C={x:0,y:0},A=this._tempMatrix,S=this._tempMatrix2,b=0;b<v.length;b++){var _=v[b];if(this.inputCandidate(_,m)){var P=T.x+y*_.scrollFactorX-y,D=T.y+E*_.scrollFactorY-E;_.parentContainer?(_.getWorldTransformMatrix(A,S),A.applyInverse(P,D,C)):c(P,D,_.x,_.y,_.rotation,_.scaleX,_.scaleY,C),this.pointWithinHitArea(_,C.x,C.y)&&x.push(_)}}return x},pointWithinHitArea:function(f,v,m){v+=f.displayOriginX,m+=f.displayOriginY;var x=f.input;return!(!x||!x.hitAreaCallback(x.hitArea,v,m,f)||(x.localX=v,x.localY=m,0))},pointWithinInteractiveObject:function(f,v,m){return!!f.hitArea&&(v+=f.gameObject.displayOriginX,m+=f.gameObject.displayOriginY,f.localX=v,f.localY=m,f.hitAreaCallback(f.hitArea,v,m,f))},transformPointer:function(f,v,m,x){var T=f.position,y=f.prevPosition;y.x=T.x,y.y=T.y;var E=this.scaleManager.transformX(v),w=this.scaleManager.transformY(m),R=f.smoothFactor;x&&R!==0?(T.x=E*R+y.x*(1-R),T.y=w*R+y.y*(1-R)):(T.x=E,T.y=w)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(t.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});g.exports=d},65917:function(g,p,i){var u=i(38459),e=i(57133),l=i(69186),o=i(24293),t=i(51814),s=i(31354),n=i(76914),r=i(81385),h=i(87016),a=i(65210),c=i(26729),d=i(25738),f=i(30097),v=i(29815),m=i(53013),x=i(46236),T=i(75380),y=i(26813),E=i(12063),w=i(82671),R=i(90547),C=new l({Extends:c,initialize:function(A){c.call(this),this.scene=A,this.systems=A.sys,this.settings=A.sys.settings,this.manager=A.sys.game.input,this.pluginEvents=new c,this.enabled=!0,this.displayList,this.cameras,v.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var S={cancelled:!1};this._eventContainer={stopPropagation:function(){S.cancelled=!0}},this._eventData=S,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,A.sys.events.once(E.BOOT,this.boot,this),A.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(a.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(a.GAME_OUT,this.onGameOut,this),this.manager.events.on(a.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(a.START)},onGameOver:function(A){this.isActive()&&this.emit(a.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(a.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(a.PRE_UPDATE);var A=this._pendingRemoval,S=this._pendingInsertion,b=A.length,_=S.length;if(b!==0||_!==0){for(var P=this._list,D=0;D<b;D++){var O=A[D],F=P.indexOf(O);F>-1&&(P.splice(F,1),this.clear(O,!0))}A.length=0,this._pendingRemoval.length=0,this._list=P.concat(S.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,S){if(!this.isActive())return!1;if(this.pluginEvents.emit(a.UPDATE,A,S),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,_=this.manager,P=_.pointers,D=_.pointersTotal;for(b=0;b<D;b++)P[b].updateMotion();if(this._list.length===0)return!1;var O=this.pollRate;if(O===-1)return!1;if(O>0){if(this._pollTimer-=S,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var F=!1;for(b=0;b<D;b++){var N=0,k=P[b];this._tempZones=[],this._temp=this.hitTestPointer(k),this.sortGameObjects(this._temp,k),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),N+=this.processOverOutEvents(k),this.getDragState(k)===2&&this.processDragThresholdEvent(k,A),N>0&&(F=!0)}return F},update:function(A,S){if(!this.isActive())return!1;for(var b=S.length,_=!1,P=0;P<b;P++){var D=0,O=S[P];switch(this._tempZones=[],this._temp=this.hitTestPointer(O),this.sortGameObjects(this._temp,O),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case o.MOUSE_DOWN:D+=this.processDragDownEvent(O),D+=this.processDownEvents(O),D+=this.processOverOutEvents(O);break;case o.MOUSE_UP:D+=this.processDragUpEvent(O),D+=this.processUpEvents(O),D+=this.processOverOutEvents(O);break;case o.TOUCH_START:D+=this.processDragDownEvent(O),D+=this.processDownEvents(O),D+=this.processOverEvents(O);break;case o.TOUCH_END:case o.TOUCH_CANCEL:D+=this.processDragUpEvent(O),D+=this.processUpEvents(O),D+=this.processOutEvents(O);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:D+=this.processDragMoveEvent(O),D+=this.processMoveEvents(O),D+=this.processOverOutEvents(O);break;case o.MOUSE_WHEEL:D+=this.processWheelEvent(O)}D>0&&(_=!0)}return this._updatedThisFrame=!0,_},clear:function(A,S){S===void 0&&(S=!1);var b=A.input;if(b){S||this.queueForRemoval(A),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,A.input=null;var _=this._draggable.indexOf(A);return _>-1&&this._draggable.splice(_,1),(_=this._drag[0].indexOf(A))>-1&&this._drag[0].splice(_,1),(_=this._over[0].indexOf(A))>-1&&(this._over[0].splice(_,1),this.manager.resetCursor(b)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,S,b,_){return _===void 0&&(_=!1),A.input?A.input.enabled=!0:this.setHitArea(A,S,b),A.input&&_&&!A.input.dropZone&&(A.input.dropZone=_),this},hitTestPointer:function(A){for(var S=this.cameras.getCamerasBelowPointer(A),b=0;b<S.length;b++){for(var _=S[b],P=this.manager.hitTest(A,this._list,_),D=0;D<P.length;D++){var O=P[D];O.input.dropZone&&this._tempZones.push(O)}if(P.length>0)return A.camera=_,P}return A.camera=S[0],[]},processDownEvents:function(A){var S=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var D=!1,O=0;O<b.length;O++){var F=b[O];if(F.input){if(S++,F.emit(a.GAMEOBJECT_POINTER_DOWN,A,F.input.localX,F.input.localY,P),_.cancelled||!F.input){D=!0;break}if(this.emit(a.GAMEOBJECT_DOWN,A,F,P),_.cancelled||!F.input){D=!0;break}}}return!D&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(a.POINTER_DOWN,A,b):this.emit(a.POINTER_DOWN_OUTSIDE,A)),S},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,S){this._dragState[A.id]=S},processDragThresholdEvent:function(A,S){var b=!1,_=this.dragTimeThreshold,P=this.dragDistanceThreshold;if((P>0&&n(A.x,A.y,A.downX,A.downY)>=P||_>0&&S>=A.downTime+_)&&(b=!0),b)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var S=this._drag[A.id],b=0;b<S.length;b++){var _=S[b],P=_.input;P.dragState=2,P.dragStartX=_.x,P.dragStartY=_.y,P.dragStartXGlobal=A.worldX,P.dragStartYGlobal=A.worldY,P.dragX=P.dragStartXGlobal-P.dragStartX,P.dragY=P.dragStartYGlobal-P.dragStartY,_.emit(a.GAMEOBJECT_DRAG_START,A,P.dragX,P.dragY),this.emit(a.DRAG_START,A,_)}return this.setDragState(A,4),S.length},processDragDownEvent:function(A){var S=this._temp;if(this._draggable.length===0||S.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var b=[],_=0;_<S.length;_++){var P=S[_];P.input.draggable&&P.input.dragState===0&&b.push(P)}return b.length===0?(this.setDragState(A,0),0):(b.length>1&&(this.sortGameObjects(b,A),this.topOnly&&b.splice(1)),this._drag[A.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var S=this._tempZones,b=this._drag[A.id],_=0;_<b.length;_++){var P,D,O=b[_],F=O.input,N=F.target;if(N){var k=S.indexOf(N);k===0?(O.emit(a.GAMEOBJECT_DRAG_OVER,A,N),this.emit(a.DRAG_OVER,A,O,N)):k>0?(O.emit(a.GAMEOBJECT_DRAG_LEAVE,A,N),this.emit(a.DRAG_LEAVE,A,O,N),F.target=S[0],N=F.target,O.emit(a.GAMEOBJECT_DRAG_ENTER,A,N),this.emit(a.DRAG_ENTER,A,O,N)):(O.emit(a.GAMEOBJECT_DRAG_LEAVE,A,N),this.emit(a.DRAG_LEAVE,A,O,N),S[0]?(F.target=S[0],N=F.target,O.emit(a.GAMEOBJECT_DRAG_ENTER,A,N),this.emit(a.DRAG_ENTER,A,O,N)):F.target=null)}else!N&&S[0]&&(F.target=S[0],N=F.target,O.emit(a.GAMEOBJECT_DRAG_ENTER,A,N),this.emit(a.DRAG_ENTER,A,O,N));if(O.parentContainer){var L=A.worldX-F.dragStartXGlobal,U=A.worldY-F.dragStartYGlobal,Y=O.getParentRotation(),B=L*Math.cos(Y)+U*Math.sin(Y),W=U*Math.cos(Y)-L*Math.sin(Y);B*=1/O.parentContainer.scaleX,W*=1/O.parentContainer.scaleY,P=B+F.dragStartX,D=W+F.dragStartY}else P=A.worldX-F.dragX,D=A.worldY-F.dragY;O.emit(a.GAMEOBJECT_DRAG,A,P,D),this.emit(a.DRAG,A,O,P,D)}return b.length},processDragUpEvent:function(A){for(var S=this._drag[A.id],b=0;b<S.length;b++){var _=S[b],P=_.input;if(P&&P.dragState===2){P.dragState=0,P.dragX=P.localX-_.displayOriginX,P.dragY=P.localY-_.displayOriginY;var D=!1,O=P.target;O&&(_.emit(a.GAMEOBJECT_DROP,A,O),this.emit(a.DROP,A,_,O),P.target=null,D=!0),_.input&&(_.emit(a.GAMEOBJECT_DRAG_END,A,P.dragX,P.dragY,D),this.emit(a.DRAG_END,A,_,D))}}return this.setDragState(A,0),S.splice(0),0},processMoveEvents:function(A){var S=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var D=!1,O=0;O<b.length;O++){var F=b[O];if(F.input){if(S++,F.emit(a.GAMEOBJECT_POINTER_MOVE,A,F.input.localX,F.input.localY,P),_.cancelled||!F.input){D=!0;break}if(this.emit(a.GAMEOBJECT_MOVE,A,F,P),_.cancelled||!F.input){D=!0;break}if(this.topOnly)break}}return D||this.emit(a.POINTER_MOVE,A,b),S},processWheelEvent:function(A){var S=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var D=!1,O=A.deltaX,F=A.deltaY,N=A.deltaZ,k=0;k<b.length;k++){var L=b[k];if(L.input){if(S++,L.emit(a.GAMEOBJECT_POINTER_WHEEL,A,O,F,N,P),_.cancelled||!L.input){D=!0;break}if(this.emit(a.GAMEOBJECT_WHEEL,A,L,O,F,N,P),_.cancelled||!L.input){D=!0;break}}}return D||this.emit(a.POINTER_WHEEL,A,b,O,F,N),S},processOverEvents:function(A){var S=this._temp,b=0,_=S.length,P=[];if(_>0){var D=this.manager,O=this._eventData,F=this._eventContainer;O.cancelled=!1;for(var N=!1,k=0;k<_;k++){var L=S[k];if(L.input){if(P.push(L),D.setCursor(L.input),L.emit(a.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,F),b++,O.cancelled||!L.input){N=!0;break}if(this.emit(a.GAMEOBJECT_OVER,A,L,F),O.cancelled||!L.input){N=!0;break}}}N||this.emit(a.POINTER_OVER,A,P)}return this._over[A.id]=P,b},processOutEvents:function(A){var S=this._over[A.id],b=0,_=S.length;if(_>0){var P=this.manager,D=this._eventData,O=this._eventContainer;D.cancelled=!1;var F=!1;this.sortGameObjects(S,A);for(var N=0;N<_;N++){var k=S[N];if((k=S[N]).input){if(P.resetCursor(k.input),k.emit(a.GAMEOBJECT_POINTER_OUT,A,O),b++,D.cancelled||!k.input){F=!0;break}if(this.emit(a.GAMEOBJECT_OUT,A,k,O),D.cancelled||!k.input){F=!0;break}F||this.emit(a.POINTER_OUT,A,S)}}this._over[A.id]=[]}return b},processOverOutEvents:function(A){var S,b,_=this._temp,P=[],D=[],O=[],F=this._over[A.id],N=this._drag[A.id],k=this.manager;for(S=0;S<F.length;S++)b=F[S],_.indexOf(b)===-1&&N.indexOf(b)===-1?P.push(b):O.push(b);for(S=0;S<_.length;S++)b=_[S],F.indexOf(b)===-1&&D.push(b);var L=P.length,U=0,Y=this._eventData,B=this._eventContainer;Y.cancelled=!1;var W=!1;if(L>0){for(this.sortGameObjects(P,A),S=0;S<L;S++)if((b=P[S]).input){if(k.resetCursor(b.input),b.emit(a.GAMEOBJECT_POINTER_OUT,A,B),U++,Y.cancelled||!b.input){W=!0;break}if(this.emit(a.GAMEOBJECT_OUT,A,b,B),Y.cancelled||!b.input){W=!0;break}}W||this.emit(a.POINTER_OUT,A,P)}if(L=D.length,Y.cancelled=!1,W=!1,L>0){for(this.sortGameObjects(D,A),S=0;S<L;S++)if((b=D[S]).input){if(k.setCursor(b.input),b.emit(a.GAMEOBJECT_POINTER_OVER,A,b.input.localX,b.input.localY,B),U++,Y.cancelled||!b.input){W=!0;break}if(this.emit(a.GAMEOBJECT_OVER,A,b,B),Y.cancelled||!b.input){W=!0;break}}W||this.emit(a.POINTER_OVER,A,D)}return F=O.concat(D),this._over[A.id]=this.sortGameObjects(F,A),U},processUpEvents:function(A){var S=this._temp,b=this._eventData,_=this._eventContainer;b.cancelled=!1;for(var P=!1,D=0;D<S.length;D++){var O=S[D];if(O.input){if(O.emit(a.GAMEOBJECT_POINTER_UP,A,O.input.localX,O.input.localY,_),b.cancelled||!O.input){P=!0;break}if(this.emit(a.GAMEOBJECT_UP,A,O,_),b.cancelled||!O.input){P=!0;break}}}return!P&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(a.POINTER_UP,A,S):this.emit(a.POINTER_UP_OUTSIDE,A)),S.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,S){S===void 0&&(S=!0),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var _=A[b];_.input.draggable=S;var P=this._draggable.indexOf(_);S&&P===-1?this._draggable.push(_):!S&&P>-1&&this._draggable.splice(P,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var S=this.systems.textures;return s(S,A)},setHitArea:function(A,S,b){if(S===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var _=!1,P=!1,D=!1,O=!1,F=!1,N=!0;if(m(S)){var k=S;S=d(k,"hitArea",null),b=d(k,"hitAreaCallback",null),_=d(k,"draggable",!1),P=d(k,"dropZone",!1),D=d(k,"cursor",!1),O=d(k,"useHandCursor",!1),F=d(k,"pixelPerfect",!1);var L=d(k,"alphaTolerance",1);F&&(S={},b=this.makePixelPerfect(L)),S&&b||(this.setHitAreaFromTexture(A),N=!1)}else typeof S!="function"||b||(b=S,S={});for(var U=0;U<A.length;U++){var Y=A[U];if(F&&Y.type==="Container")console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var B=Y.input?Y.input:t(Y,S,b);B.customHitArea=N,B.dropZone=P,B.cursor=O?"pointer":D,Y.input=B,_&&this.setDraggable(Y),this.queueForInsertion(Y)}}return this},setHitAreaCircle:function(A,S,b,_,P){P===void 0&&(P=e);var D=new u(S,b,_);return this.setHitArea(A,D,P)},setHitAreaEllipse:function(A,S,b,_,P,D){D===void 0&&(D=h);var O=new r(S,b,_,P);return this.setHitArea(A,O,D)},setHitAreaFromTexture:function(A,S){S===void 0&&(S=y),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var _=A[b],P=_.frame,D=0,O=0;_.width?(D=_.width,O=_.height):P&&(D=P.realWidth,O=P.realHeight),_.type!=="Container"||D!==0&&O!==0?D!==0&&O!==0&&(_.input=t(_,new T(0,0,D,O),S),this.queueForInsertion(_)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(A,S,b,_,P,D){D===void 0&&(D=y);var O=new T(S,b,_,P);return this.setHitArea(A,O,D)},setHitAreaTriangle:function(A,S,b,_,P,D,O,F){F===void 0&&(F=R);var N=new w(S,b,_,P,D,O);return this.setHitArea(A,N,F)},enableDebug:function(A,S){S===void 0&&(S=65280);var b=A.input;if(!b||!b.hitArea)return this;var _=b.hitArea,P=_.type,D=b.hitAreaDebug,O=this.systems.add,F=this.systems.updateList;D&&(F.remove(D),D.destroy(),D=null);var N=0,k=0;switch(P){case f.CIRCLE:D=O.arc(0,0,_.radius),N=_.x-_.radius,k=_.y-_.radius;break;case f.ELLIPSE:D=O.ellipse(0,0,_.width,_.height),N=_.x-_.width/2,k=_.y-_.height/2;break;case f.LINE:D=O.line(0,0,_.x1,_.y1,_.x2,_.y2);break;case f.POLYGON:D=O.polygon(0,0,_.points);break;case f.RECTANGLE:D=O.rectangle(0,0,_.width,_.height),N=_.x,k=_.y;break;case f.TRIANGLE:D=O.triangle(0,0,_.x1,_.y1,_.x2,_.y2,_.x3,_.y3)}return D&&(D.isFilled=!1,D.preUpdate=function(){D.setStrokeStyle(1/A.scale,S),D.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,U=A.y,Y=A.rotation,B=A.scaleX,W=A.scaleY;if(A.parentContainer){var G=A.getWorldTransformMatrix();L=G.tx,U=G.ty,Y=G.rotation,B=G.scaleX,W=G.scaleY}D.setRotation(Y),D.setScale(B,W),D.setPosition(L+N,U+k),D.setScrollFactor(A.scrollFactorX,A.scrollFactorY),D.setDepth(A.depth)},F.add(D),b.hitAreaDebug=D),this},removeDebug:function(A){var S=A.input;if(S&&S.hitAreaDebug){var b=S.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),S.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,S){if(A.length<2)return A;var b=S.camera.renderList;return A.sort(function(_,P){return b.indexOf(P)-b.indexOf(_)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,S){if(A.parentContainer||S.parentContainer){if(A.parentContainer===S.parentContainer)return S.parentContainer.getIndex(S)-A.parentContainer.getIndex(A);if(A.parentContainer===S)return-1;if(S.parentContainer===A)return 1;for(var b=A.getIndexList(),_=S.getIndexList(),P=Math.min(b.length,_.length),D=0;D<P;D++){var O=b[D],F=_[D];if(O!==F)return F-O}return _.length-b.length}return this.displayList.getIndex(S)-this.displayList.getIndex(A)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(a.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var S=this.manager;S.canvas.style.cursor=S.defaultCursor;var b=this.systems.events;b.off(E.TRANSITION_START,this.transitionIn,this),b.off(E.TRANSITION_OUT,this.transitionOut,this),b.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(E.PRE_UPDATE,this.preUpdate,this),S.events.off(a.GAME_OUT,this.onGameOut,this),S.events.off(a.GAME_OVER,this.onGameOver,this),b.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(a.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});x.register("InputPlugin",C,"input"),g.exports=C},29815:function(g,p,i){var u=i(76076),e={},l={register:function(o,t,s,n,r){e[o]={plugin:t,mapping:s,settingsKey:n,configKey:r}},getPlugin:function(o){return e[o]},install:function(o){var t=o.scene.sys,s=t.settings.input,n=t.game.config;for(var r in e){var h=e[r].plugin,a=e[r].mapping,c=e[r].settingsKey,d=e[r].configKey;u(s,c,n[d])&&(o[a]=new h(o))}},remove:function(o){e.hasOwnProperty(o)&&delete e[o]}};g.exports=l},86042:function(g,p,i){var u=i(53517),e=i(69186),l=i(76914),o=i(97026),t=i(38153),s=i(17321),n=i(89771),r=new e({initialize:function(h,a){this.manager=h,this.id=a,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=a===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var a=h.getWorldPoint(this.x,this.y);return this.worldX=a.x,this.worldY=a.y,this},positionToCamera:function(h,a){return h.getWorldPoint(this.x,this.y,a)},updateMotion:function(){var h=this.position.x,a=this.position.y,c=this.midPoint.x,d=this.midPoint.y;if(h!==c||a!==d){var f=t(this.motionFactor,c,h),v=t(this.motionFactor,d,a);o(f,h,.1)&&(f=h),o(v,a,.1)&&(v=a),this.midPoint.set(f,v);var m=h-f,x=a-v;this.velocity.set(m,x),this.angle=u(f,v,h,a),this.distance=Math.sqrt(m*m+x*x)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,a){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=a,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=a.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,a){this.event=a,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=a.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,a){this.buttons=0,this.event=a,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=a.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,a){this.buttons=0,this.event=a,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=a.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?l(this.downX,this.downY,this.x,this.y):l(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,a){h===void 0&&(h=10),a===void 0&&(a=[]);for(var c=this.prevPosition.x,d=this.prevPosition.y,f=this.position.x,v=this.position.y,m=0;m<h;m++){var x=1/h*m;a[m]={x:t(x,c,f),y:t(x,d,v)}}return a},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});g.exports=r},24293:function(g){g.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},31860:function(g){g.exports="boot"},25026:function(g){g.exports="destroy"},53677:function(g){g.exports="dragend"},38611:function(g){g.exports="dragenter"},10937:function(g){g.exports="drag"},79546:function(g){g.exports="dragleave"},78268:function(g){g.exports="dragover"},98451:function(g){g.exports="dragstart"},74955:function(g){g.exports="drop"},43730:function(g){g.exports="gameobjectdown"},79577:function(g){g.exports="dragend"},60943:function(g){g.exports="dragenter"},3955:function(g){g.exports="drag"},82207:function(g){g.exports="dragleave"},79243:function(g){g.exports="dragover"},73062:function(g){g.exports="dragstart"},44269:function(g){g.exports="drop"},31905:function(g){g.exports="gameobjectmove"},13979:function(g){g.exports="gameobjectout"},18446:function(g){g.exports="gameobjectover"},83718:function(g){g.exports="pointerdown"},91330:function(g){g.exports="pointermove"},51807:function(g){g.exports="pointerout"},60192:function(g){g.exports="pointerover"},90845:function(g){g.exports="pointerup"},12742:function(g){g.exports="wheel"},29959:function(g){g.exports="gameobjectup"},72916:function(g){g.exports="gameobjectwheel"},660:function(g){g.exports="gameout"},74501:function(g){g.exports="gameover"},9095:function(g){g.exports="boot"},58700:function(g){g.exports="process"},71290:function(g){g.exports="update"},83412:function(g){g.exports="pointerlockchange"},33509:function(g){g.exports="pointerdown"},56082:function(g){g.exports="pointerdownoutside"},76889:function(g){g.exports="pointermove"},52606:function(g){g.exports="pointerout"},84136:function(g){g.exports="pointerover"},88399:function(g){g.exports="pointerup"},72621:function(g){g.exports="pointerupoutside"},20495:function(g){g.exports="wheel"},34445:function(g){g.exports="preupdate"},6858:function(g){g.exports="shutdown"},11600:function(g){g.exports="start"},58569:function(g){g.exports="update"},65210:function(g,p,i){g.exports={BOOT:i(31860),DESTROY:i(25026),DRAG_END:i(53677),DRAG_ENTER:i(38611),DRAG:i(10937),DRAG_LEAVE:i(79546),DRAG_OVER:i(78268),DRAG_START:i(98451),DROP:i(74955),GAME_OUT:i(660),GAME_OVER:i(74501),GAMEOBJECT_DOWN:i(43730),GAMEOBJECT_DRAG_END:i(79577),GAMEOBJECT_DRAG_ENTER:i(60943),GAMEOBJECT_DRAG:i(3955),GAMEOBJECT_DRAG_LEAVE:i(82207),GAMEOBJECT_DRAG_OVER:i(79243),GAMEOBJECT_DRAG_START:i(73062),GAMEOBJECT_DROP:i(44269),GAMEOBJECT_MOVE:i(31905),GAMEOBJECT_OUT:i(13979),GAMEOBJECT_OVER:i(18446),GAMEOBJECT_POINTER_DOWN:i(83718),GAMEOBJECT_POINTER_MOVE:i(91330),GAMEOBJECT_POINTER_OUT:i(51807),GAMEOBJECT_POINTER_OVER:i(60192),GAMEOBJECT_POINTER_UP:i(90845),GAMEOBJECT_POINTER_WHEEL:i(12742),GAMEOBJECT_UP:i(29959),GAMEOBJECT_WHEEL:i(72916),MANAGER_BOOT:i(9095),MANAGER_PROCESS:i(58700),MANAGER_UPDATE:i(71290),POINTER_DOWN:i(33509),POINTER_DOWN_OUTSIDE:i(56082),POINTER_MOVE:i(76889),POINTER_OUT:i(52606),POINTER_OVER:i(84136),POINTER_UP:i(88399),POINTER_UP_OUTSIDE:i(72621),POINTER_WHEEL:i(20495),POINTERLOCK_CHANGE:i(83412),PRE_UPDATE:i(34445),SHUTDOWN:i(6858),START:i(11600),UPDATE:i(58569)}},72243:function(g,p,i){var u=new(i(69186))({initialize:function(e,l){this.pad=e,this.events=e.events,this.index=l,this.value=0,this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});g.exports=u},24884:function(g,p,i){var u=i(69186),e=i(44152),l=new u({initialize:function(o,t){this.pad=o,this.events=o.manager,this.index=t,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var t=this.pad,s=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(e.BUTTON_DOWN,t,this,o),this.pad.emit(e.GAMEPAD_BUTTON_DOWN,s,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(e.BUTTON_UP,t,this,o),this.pad.emit(e.GAMEPAD_BUTTON_UP,s,o,this))},destroy:function(){this.pad=null,this.events=null}});g.exports=l},20306:function(g,p,i){var u=i(72243),e=i(24884),l=i(69186),o=i(26729),t=i(17321),s=new l({Extends:o,initialize:function(n,r){o.call(this),this.manager=n,this.pad=r,this.id=r.id,this.index=r.index;for(var h=[],a=0;a<r.buttons.length;a++)h.push(new e(this,a));this.buttons=h;var c=[];for(a=0;a<r.axes.length;a++)c.push(new u(this,a));this.axes=c,this.vibration=r.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=h[14]?h[14]:d,this._LCRight=h[15]?h[15]:d,this._LCTop=h[12]?h[12]:d,this._LCBottom=h[13]?h[13]:d,this._RCLeft=h[2]?h[2]:d,this._RCRight=h[1]?h[1]:d,this._RCTop=h[3]?h[3]:d,this._RCBottom=h[0]?h[0]:d,this._FBLeftTop=h[4]?h[4]:d,this._FBLeftBottom=h[6]?h[6]:d,this._FBRightTop=h[5]?h[5]:d,this._FBRightBottom=h[7]?h[7]:d;var f={value:0};this._HAxisLeft=c[0]?c[0]:f,this._VAxisLeft=c[1]?c[1]:f,this._HAxisRight=c[2]?c[2]:f,this._VAxisRight=c[3]?c[3]:f,this.leftStick=new t,this.rightStick=new t,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var r=0;r<this.axes.length;r++)this.axes[r].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var r,h=this.buttons,a=n.buttons,c=h.length;for(r=0;r<c;r++)h[r].update(a[r].value);var d=this.axes,f=n.axes;for(c=d.length,r=0;r<c;r++)d[r].update(f[r]);c>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),c>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function(){var n;for(this.removeAllListeners(),this.manager=null,this.pad=null,n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});g.exports=s},26269:function(g,p,i){var u=i(69186),e=i(26729),l=i(44152),o=i(20306),t=i(76076),s=i(29815),n=i(65210),r=new u({Extends:e,initialize:function(h){e.call(this),this.scene=h.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=h,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,h.pluginEvents.once(n.BOOT,this.boot,this),h.pluginEvents.on(n.START,this.start,this)},boot:function(){var h=this.scene.sys.game,a=this.settings.input,c=h.config;this.enabled=t(a,"gamepad",c.inputGamepad)&&h.device.input.gamepads,this.target=t(a,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,a=this.target,c=function(d){!d.defaultPrevented&&h.isActive()&&(h.refreshPads(),h.queue.push(d))};this.onGamepadHandler=c,a.addEventListener("gamepadconnected",c,!1),a.addEventListener("gamepaddisconnected",c,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(h)for(var a=this.gamepads,c=0;c<h.length;c++){var d=h[c];if(d){var f=d.id,v=d.index,m=a[v];if(m)m.id!==f?(m.destroy(),a[v]=new o(this,d)):m.update(d);else{var x=new o(this,d);a[v]=x,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=x):this._pad3=x:this._pad2=x:this._pad1=x}}}else this.disconnectAll()},getAll:function(){for(var h=[],a=this.gamepads,c=0;c<a.length;c++)a[c]&&h.push(a[c]);return h},getPad:function(h){for(var a=this.gamepads,c=0;c<a.length;c++)if(a[c]&&a[c].index===h)return a[c]},update:function(){if(this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var a=this.queue.splice(0,h),c=0;c<h;c++){var d=a[c],f=this.getPad(d.gamepad.index);d.type==="gamepadconnected"?this.emit(l.CONNECTED,f,d):d.type==="gamepaddisconnected"&&this.emit(l.DISCONNECTED,f,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",r,"gamepad","gamepad","inputGamepad"),g.exports=r},46491:function(g){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},54217:function(g){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},32841:function(g){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},63069:function(g,p,i){g.exports={DUALSHOCK_4:i(54217),SNES_USB:i(46491),XBOX_360:i(32841)}},83354:function(g){g.exports="down"},86957:function(g){g.exports="up"},85772:function(g){g.exports="connected"},43956:function(g){g.exports="disconnected"},85626:function(g){g.exports="down"},47644:function(g){g.exports="up"},44152:function(g,p,i){g.exports={BUTTON_DOWN:i(83354),BUTTON_UP:i(86957),CONNECTED:i(85772),DISCONNECTED:i(43956),GAMEPAD_BUTTON_DOWN:i(85626),GAMEPAD_BUTTON_UP:i(47644)}},26428:function(g,p,i){g.exports={Axis:i(72243),Button:i(24884),Events:i(44152),Gamepad:i(20306),GamepadPlugin:i(26269),Configs:i(63069)}},74353:function(g,p,i){var u=i(24293),e=i(72646),l={CreatePixelPerfectHandler:i(31354),CreateInteractiveObject:i(51814),Events:i(65210),Gamepad:i(26428),InputManager:i(79976),InputPlugin:i(65917),InputPluginCache:i(29815),Keyboard:i(586),Mouse:i(19845),Pointer:i(86042),Touch:i(34954)};l=e(!1,l,u),g.exports=l},8397:function(g,p,i){var u=i(63083),e=i(69186),l=i(24496),o=i(65210),t=i(29413),s=i(45733),n=new e({initialize:function(r){this.manager=r,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,r.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputKeyboard,this.target=r.inputKeyboardEventTarget,this.addCapture(r.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(l.POST_STEP,this.postUpdate,this)},startListeners:function(){var r=this;this.onKeyDown=function(a){if(!a.defaultPrevented&&r.enabled&&r.manager){r.queue.push(a),r.manager.events.emit(o.MANAGER_PROCESS);var c=a.altKey||a.ctrlKey||a.shiftKey||a.metaKey;r.preventDefault&&!c&&r.captures.indexOf(a.keyCode)>-1&&a.preventDefault()}},this.onKeyUp=function(a){if(!a.defaultPrevented&&r.enabled&&r.manager){r.queue.push(a),r.manager.events.emit(o.MANAGER_PROCESS);var c=a.altKey||a.ctrlKey||a.shiftKey||a.metaKey;r.preventDefault&&!c&&r.captures.indexOf(a.keyCode)>-1&&a.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var r=this.target;r.removeEventListener("keydown",this.onKeyDown,!1),r.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(r){typeof r=="string"&&(r=r.split(",")),Array.isArray(r)||(r=[r]);for(var h=this.captures,a=0;a<r.length;a++){var c=r[a];typeof c=="string"&&(c=t[c.trim().toUpperCase()]),h.indexOf(c)===-1&&h.push(c)}this.preventDefault=h.length>0},removeCapture:function(r){typeof r=="string"&&(r=r.split(",")),Array.isArray(r)||(r=[r]);for(var h=this.captures,a=0;a<r.length;a++){var c=r[a];typeof c=="string"&&(c=t[c.toUpperCase()]),u(h,c)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(l.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});g.exports=n},84836:function(g,p,i){var u=i(69186),e=i(26729),l=i(88199),o=i(24496),t=i(76076),s=i(65210),n=i(29815),r=i(44265),h=i(29413),a=i(6914),c=i(17868),d=i(12063),f=i(99e3),v=new u({Extends:e,initialize:function(m){e.call(this),this.game=m.systems.game,this.scene=m.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=m,this.manager=m.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,m.pluginEvents.once(s.BOOT,this.boot,this),m.pluginEvents.on(s.START,this.start,this)},boot:function(){var m=this.settings.input;this.enabled=t(m,"keyboard",!0);var x=t(m,"keyboard.capture",null);x&&this.addCaptures(x),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(m){return this.manager.addCapture(m),this},removeCapture:function(m){return this.manager.removeCapture(m),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(m,x,T){x===void 0&&(x=!0),T===void 0&&(T=!1);var y={};if(typeof m=="string"){m=m.split(",");for(var E=0;E<m.length;E++){var w=m[E].trim();w&&(y[w]=this.addKey(w,x,T))}}else for(var R in m)y[R]=this.addKey(m[R],x,T);return y},addKey:function(m,x,T){x===void 0&&(x=!0),T===void 0&&(T=!1);var y=this.keys;if(m instanceof r){var E=y.indexOf(m);return E>-1?y[E]=m:y[m.keyCode]=m,x&&this.addCapture(m.keyCode),m.setEmitOnRepeat(T),m}return typeof m=="string"&&(m=h[m.toUpperCase()]),y[m]||(y[m]=new r(this,m),x&&this.addCapture(m),y[m].setEmitOnRepeat(T)),y[m]},removeKey:function(m,x){x===void 0&&(x=!1);var T,y=this.keys;if(m instanceof r){var E=y.indexOf(m);E>-1&&(T=this.keys[E],this.keys[E]=void 0)}else typeof m=="string"&&(m=h[m.toUpperCase()]);return y[m]&&(T=y[m],y[m]=void 0),T&&(T.plugin=null,x&&T.destroy()),this},removeAllKeys:function(m){for(var x=this.keys,T=0;T<x.length;T++){var y=x[T];y&&(x[T]=void 0,m&&y.destroy())}return this},createCombo:function(m,x){return new a(this,m,x)},checkDown:function(m,x){if(x===void 0&&(x=0),this.enabled&&m.isDown){var T=f(this.time-m.timeDown,x);if(T>m._tick)return m._tick=T,!0}return!1},update:function(){var m=this.manager.queue,x=m.length;if(this.isActive()&&x!==0)for(var T=this.keys,y=0;y<x;y++){var E=m[y],w=E.keyCode,R=T[w],C=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(w===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=w,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(R&&(C=R.isDown,R.onDown(E)),E.cancelled||R&&C||(c[w]&&this.emit(l.KEY_DOWN+c[w],E),E.cancelled||this.emit(l.ANY_KEY_DOWN,E))):(R&&R.onUp(E),E.cancelled||(c[w]&&this.emit(l.KEY_UP+c[w],E),E.cancelled||this.emit(l.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var m=this.keys,x=0;x<m.length;x++)m[x]&&m[x].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var m=this.keys,x=0;x<m.length;x++)m[x]&&m[x].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",v,"keyboard","keyboard","inputKeyboard"),g.exports=v},19475:function(g){g.exports=function(p,i){return i.timeLastMatched=p.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},6914:function(g,p,i){var u=i(69186),e=i(88199),l=i(25738),o=i(67845),t=i(69441),s=new u({initialize:function(n,r,h){if(h===void 0&&(h={}),r.length<2)return!1;this.manager=n,this.enabled=!0,this.keyCodes=[];for(var a=0;a<r.length;a++){var c=r[a];typeof c=="string"?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):typeof c=="number"?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=l(h,"resetOnWrongKey",!0),this.maxKeyDelay=l(h,"maxKeyDelay",0),this.resetOnMatch=l(h,"resetOnMatch",!1),this.deleteOnMatch=l(h,"deleteOnMatch",!1);var d=this;this.onKeyDown=function(f){!d.matched&&d.enabled&&o(f,d)&&(d.manager.emit(e.COMBO_MATCH,d,f),d.resetOnMatch?t(d):d.deleteOnMatch&&d.destroy())},this.manager.on(e.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(e.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});g.exports=s},67845:function(g,p,i){var u=i(19475);g.exports=function(e,l){if(l.matched)return!0;var o=!1,t=!1;if(e.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var s=l.timeLastMatched+l.maxKeyDelay;e.timeStamp<=s&&(t=!0,o=u(e,l))}else t=!0,o=u(e,l);return!t&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),o&&(l.timeLastMatched=e.timeStamp,l.matched=!0,l.timeMatched=e.timeStamp),o}},69441:function(g){g.exports=function(p){return p.current=p.keyCodes[0],p.index=0,p.timeLastMatched=0,p.matched=!1,p.timeMatched=0,p}},21754:function(g){g.exports="keydown"},63023:function(g){g.exports="keyup"},60248:function(g){g.exports="keycombomatch"},52033:function(g){g.exports="down"},42675:function(g){g.exports="keydown-"},53422:function(g){g.exports="keyup-"},3064:function(g){g.exports="up"},88199:function(g,p,i){g.exports={ANY_KEY_DOWN:i(21754),ANY_KEY_UP:i(63023),COMBO_MATCH:i(60248),DOWN:i(52033),KEY_DOWN:i(42675),KEY_UP:i(53422),UP:i(3064)}},586:function(g,p,i){g.exports={Events:i(88199),KeyboardManager:i(8397),KeyboardPlugin:i(84836),Key:i(44265),KeyCodes:i(29413),KeyCombo:i(6914),AdvanceKeyCombo:i(19475),ProcessKeyCombo:i(67845),ResetKeyCombo:i(69441),JustDown:i(41808),JustUp:i(49117),DownDuration:i(52701),UpDuration:i(97177)}},52701:function(g){g.exports=function(p,i){i===void 0&&(i=50);var u=p.plugin.game.loop.time-p.timeDown;return p.isDown&&u<i}},41808:function(g){g.exports=function(p){return!!p._justDown&&(p._justDown=!1,!0)}},49117:function(g){g.exports=function(p){return!!p._justUp&&(p._justUp=!1,!0)}},44265:function(g,p,i){var u=i(69186),e=i(26729),l=i(88199),o=new u({Extends:e,initialize:function(t,s){e.call(this),this.plugin=t,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(l.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(l.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(l.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});g.exports=o},29413:function(g){g.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},17868:function(g,p,i){var u=i(29413),e={};for(var l in u)e[u[l]]=l;g.exports=e},97177:function(g){g.exports=function(p,i){i===void 0&&(i=50);var u=p.plugin.game.loop.time-p.timeUp;return p.isUp&&u<i}},35749:function(g,p,i){var u=i(69186),e=i(61052),l=i(65210),o=i(45733),t=new u({initialize:function(s){this.manager=s,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,s.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.passive=s.inputMousePassive,this.preventDefaultDown=s.inputMousePreventDefaultDown,this.preventDefaultUp=s.inputMousePreventDefaultUp,this.preventDefaultMove=s.inputMousePreventDefaultMove,this.preventDefaultWheel=s.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){if(e.pointerLock){var s=this.target;s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock()}},releasePointerLock:function(){e.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this.target;if(s){var n=this,r=this.manager,h=r.canvas,a=window&&window.focus&&r.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onMouseMove(d),n.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){a&&window.focus(),!d.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onMouseDown(d),n.preventDefaultDown&&d.target===h&&d.preventDefault())},this.onMouseDownWindow=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&d.target!==h&&r.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onMouseUp(d),n.preventDefaultUp&&d.target===h&&d.preventDefault())},this.onMouseUpWindow=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&d.target!==h&&r.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&r.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&r.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&n.enabled&&r&&r.enabled&&r.onMouseWheel(d),n.preventDefaultWheel&&d.target===h&&d.preventDefault()};var c={passive:!0};if(s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),s.addEventListener("mouseover",this.onMouseOver,c),s.addEventListener("mouseout",this.onMouseOut,c),this.preventDefaultWheel?s.addEventListener("wheel",this.onMouseWheel,{passive:!1}):s.addEventListener("wheel",this.onMouseWheel,c),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}e.pointerLock&&(this.pointerLockChange=function(d){var f=n.target;n.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,r.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&((s=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),s.removeEventListener("mouseup",this.onMouseUpWindow)),e.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=t},19845:function(g,p,i){g.exports={MouseManager:i(35749)}},32426:function(g,p,i){var u=i(69186),e=i(65210),l=i(45733),o=new u({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=l,this.onTouchStartWindow=l,this.onTouchMove=l,this.onTouchEnd=l,this.onTouchEndWindow=l,this.onTouchCancel=l,this.onTouchCancelWindow=l,this.onTouchOver=l,this.onTouchOut=l,t.events.once(e.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),this},startListeners:function(){var t=this,s=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(c){n&&window.focus(),!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(c),t.capture&&c.cancelable&&c.target===s&&c.preventDefault())},this.onTouchStartWindow=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&c.target!==s&&t.manager.onTouchStart(c)},this.onTouchMove=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(c),t.capture&&c.cancelable&&c.preventDefault())},this.onTouchEnd=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(c),t.capture&&c.cancelable&&c.target===s&&c.preventDefault())},this.onTouchEndWindow=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&c.target!==s&&t.manager.onTouchEnd(c)},this.onTouchCancel=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(c),t.capture&&c.preventDefault())},this.onTouchCancelWindow=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(c)},this.onTouchOver=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(c)},this.onTouchOut=function(c){!c.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(c)};var r=this.target;if(r){var h={passive:!0},a={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?a:h),r.addEventListener("touchmove",this.onTouchMove,this.capture?a:h),r.addEventListener("touchend",this.onTouchEnd,this.capture?a:h),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?a:h),r.addEventListener("touchover",this.onTouchOver,this.capture?a:h),r.addEventListener("touchout",this.onTouchOut,this.capture?a:h),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,a),window.addEventListener("touchend",this.onTouchEndWindow,a),window.addEventListener("touchcancel",this.onTouchCancelWindow,a)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=o},34954:function(g,p,i){g.exports={TouchManager:i(32426)}},44231:function(g,p,i){var u=i(69186),e=i(60351),l=i(40),o=i(25738),t=i(15966),s=i(32710),n=i(82825),r=i(64567),h=new u({initialize:function(a,c){this.loader=a,this.cache=o(c,"cache",!1),this.type=o(c,"type",!1),this.key=o(c,"key",!1);var d=this.key;if(a.prefix&&a.prefix!==""&&(this.key=a.prefix+d),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var f=o(c,"url");f===void 0?f=a.path+d+"."+o(c,"extension",""):typeof f!="string"||f.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(f=a.path+f),this.url=f,this.src="",this.xhrSettings=r(o(c,"responseType",void 0)),o(c,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,o(c,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?e.FILE_POPULATED:e.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(c,"config",{}),this.multiFile,this.linkFile},setLink:function(a){this.linkFile=a,a.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===e.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=e.FILE_LOADING,this.src=t(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(a,c){var d=a.responseURL&&(a.responseURL.indexOf("file://")===0||a.responseURL.indexOf("capacitor://")===0)&&c.target.status===0,f=!(c.target&&c.target.status!==200)||d;a.readyState===4&&a.status>=400&&a.status<=599&&(f=!1),this.state=e.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,f)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(a){a.lengthComputable&&(this.bytesLoaded=a.loaded,this.bytesTotal=a.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(l.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=e.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=e.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=e.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(a){a===void 0&&(a=this.data);var c=this.key,d=this.type;this.loader.emit(l.FILE_COMPLETE,c,d,a),this.loader.emit(l.FILE_KEY_COMPLETE+d+"-"+c,c,d,a),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(a,c,d){if(typeof URL=="function")a.src=URL.createObjectURL(c);else{var f=new FileReader;f.onload=function(){a.removeAttribute("crossOrigin"),a.src="data:"+(c.type||d)+";base64,"+f.result.split(",")[1]},f.onerror=a.onerror,f.readAsDataURL(c)}},h.revokeObjectURL=function(a){typeof URL=="function"&&URL.revokeObjectURL(a.src)},g.exports=h},25028:function(g){var p={},i={install:function(u){for(var e in p)u[e]=p[e]},register:function(u,e){p[u]=e},destroy:function(){p={}}};g.exports=i},15966:function(g){g.exports=function(p,i){return!!p.url&&(p.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?p.url:i+p.url)}},90894:function(g,p,i){var u=i(69186),e=i(60351),l=i(96609),o=i(26729),t=i(40),s=i(25028),n=i(25738),r=i(46236),h=i(12063),a=i(64567),c=new u({Extends:o,initialize:function(d){o.call(this);var f=d.sys.game.config,v=d.sys.settings.loader;this.scene=d,this.systems=d.sys,this.cacheManager=d.sys.cache,this.textureManager=d.sys.textures,this.sceneManager=d.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(v,"baseURL",f.loaderBaseURL)),this.setPath(n(v,"path",f.loaderPath)),this.setPrefix(n(v,"prefix",f.loaderPrefix)),this.maxParallelDownloads=n(v,"maxParallelDownloads",f.loaderMaxParallelDownloads),this.xhr=a(n(v,"responseType",f.loaderResponseType),n(v,"async",f.loaderAsync),n(v,"user",f.loaderUser),n(v,"password",f.loaderPassword),n(v,"timeout",f.loaderTimeout),n(v,"withCredentials",f.loaderWithCredentials)),this.crossOrigin=n(v,"crossOrigin",f.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new l,this.inflight=new l,this.queue=new l,this._deleteQueue=new l,this.totalFailed=0,this.totalComplete=0,this.state=e.LOADER_IDLE,this.multiKeyIndex=0,d.sys.events.once(h.BOOT,this.boot,this),d.sys.events.on(h.START,this.pluginStart,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return d===void 0&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++){var v=d[f];this.keyExists(v)||(this.list.set(v),this.emit(t.ADD,v.key,v.type,this,v),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var f=d.hasCacheConflict();return f||this.list.iterate(function(v){if(v.type===d.type&&v.key===d.key)return f=!0,!1}),!f&&this.isLoading()&&(this.inflight.iterate(function(v){if(v.type===d.type&&v.key===d.key)return f=!0,!1}),this.queue.iterate(function(v){if(v.type===d.type&&v.key===d.key)return f=!0,!1})),f},addPack:function(d,f){f&&d.hasOwnProperty(f)&&(d={packKey:d[f]});var v=0,m=this.baseURL,x=this.path,T=this.prefix;for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)){var E=d[y],w=n(E,"baseURL",m),R=n(E,"path",x),C=n(E,"prefix",T),A=n(E,"files",null),S=n(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(w),this.setPath(R),this.setPrefix(C);for(var b=0;b<A.length;b++){var _=A[b],P=_.hasOwnProperty("type")?_.type:S;this[P]&&(this[P](_),v++)}}}return this.setBaseURL(m),this.setPath(x),this.setPrefix(T),v>0},isLoading:function(){return this.state===e.LOADER_LOADING||this.state===e.LOADER_PROCESSING},isReady:function(){return this.state===e.LOADER_IDLE||this.state===e.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(t.START,this),this.list.size===0?this.loadComplete():(this.state=e.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(h.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(t.PROGRESS,this.progress)},update:function(){this.state===e.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===e.FILE_POPULATED||d.state===e.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,f){this.inflight&&(this.inflight.delete(d),this.updateProgress(),f?(this.totalComplete++,this.queue.set(d),this.emit(t.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(t.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(d.state===e.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===e.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&d.multiFile.addToCache():d.addToCache()),this.queue.delete(d),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(t.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=e.LOADER_COMPLETE,this.systems.events.off(h.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(t.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,f){return this.save(JSON.stringify(d),f)},save:function(d,f,v){f===void 0&&(f="file.json"),v===void 0&&(v="application/json");var m=new Blob([d],{type:v}),x=URL.createObjectURL(m),T=document.createElement("a");return T.download=f,T.textContent="Download "+f,T.href=x,T.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,f=this.systems.settings.loader;this.setBaseURL(n(f,"baseURL",d.loaderBaseURL)),this.setPath(n(f,"path",d.loaderPath)),this.setPrefix(n(f,"prefix",d.loaderPrefix)),this.state=e.LOADER_IDLE},shutdown:function(){this.reset(),this.state=e.LOADER_SHUTDOWN,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=e.LOADER_DESTROYED,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});r.register("Loader",c,"load"),g.exports=c},32710:function(g,p,i){var u=i(72646),e=i(64567);g.exports=function(l,o){var t=l===void 0?e():u({},l);if(o)for(var s in o)o[s]!==void 0&&(t[s]=o[s]);return t}},60697:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o,t){var s=[];t.forEach(function(r){r&&s.push(r)}),this.loader=e,this.type=l,this.key=o,this.multiKeyIndex=e.multiKeyIndex++,this.files=s,this.complete=!1,this.pending=s.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var n=0;n<s.length;n++)s[n].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){this.files.indexOf(e)!==-1&&this.pending--},onFileFailed:function(e){this.files.indexOf(e)!==-1&&this.failed++}});g.exports=u},82825:function(g,p,i){var u=i(32710);g.exports=function(e,l){var o=u(l,e.xhrSettings),t=new XMLHttpRequest;if(t.open("GET",e.src,o.async,o.user,o.password),t.responseType=e.xhrSettings.responseType,t.timeout=o.timeout,o.headers)for(var s in o.headers)t.setRequestHeader(s,o.headers[s]);return o.header&&o.headerValue&&t.setRequestHeader(o.header,o.headerValue),o.requestedWith&&t.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&t.overrideMimeType(o.overrideMimeType),o.withCredentials&&(t.withCredentials=!0),t.onload=e.onLoad.bind(e,t),t.onerror=e.onError.bind(e,t),t.onprogress=e.onProgress.bind(e),t.send(),t}},64567:function(g){g.exports=function(p,i,u,e,l,o){return p===void 0&&(p=""),i===void 0&&(i=!0),u===void 0&&(u=""),e===void 0&&(e=""),l===void 0&&(l=0),o===void 0&&(o=!1),{responseType:p,async:i,user:u,password:e,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}}},60351:function(g){g.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},84349:function(g){g.exports="addfile"},15530:function(g){g.exports="complete"},2855:function(g){g.exports="filecomplete"},51215:function(g){g.exports="filecomplete-"},79508:function(g){g.exports="loaderror"},72255:function(g){g.exports="load"},9606:function(g){g.exports="fileprogress"},66239:function(g){g.exports="postprocess"},11411:function(g){g.exports="progress"},92329:function(g){g.exports="start"},40:function(g,p,i){g.exports={ADD:i(84349),COMPLETE:i(15530),FILE_COMPLETE:i(2855),FILE_KEY_COMPLETE:i(51215),FILE_LOAD_ERROR:i(79508),FILE_LOAD:i(72255),FILE_PROGRESS:i(9606),POST_PROCESS:i(66239),PROGRESS:i(11411),START:i(92329)}},32108:function(g,p,i){var u=i(69186),e=i(25028),l=i(85665),o=i(40),t=new u({Extends:l,initialize:function(s,n,r,h,a){l.call(this,s,n,r,h,a),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),l.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});e.register("animation",function(s,n,r,h){if(Array.isArray(s))for(var a=0;a<s.length;a++)this.addFile(new t(this,s[a]));else this.addFile(new t(this,s,n,h,r));return this}),g.exports=t},61117:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(85665),n=i(60697),r=new u({Extends:n,initialize:function(h,a,c,d,f,v){var m,x;if(t(a)){var T=a;a=l(T,"key"),m=new o(h,{key:a,url:l(T,"textureURL"),extension:l(T,"textureExtension","png"),normalMap:l(T,"normalMap"),xhrSettings:l(T,"textureXhrSettings")}),x=new s(h,{key:a,url:l(T,"atlasURL"),extension:l(T,"atlasExtension","json"),xhrSettings:l(T,"atlasXhrSettings")})}else m=new o(h,a,c,f),x=new s(h,a,d,v);m.linkFile?n.call(this,h,"atlasjson",a,[m,x,m.linkFile]):n.call(this,h,"atlasjson",a,[m,x])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],a=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,a.data,c),a.addToCache(),this.complete=!0}}});e.register("aseprite",function(h,a,c,d,f){var v;if(Array.isArray(h))for(var m=0;m<h.length;m++)v=new r(this,h[m]),this.addFile(v.files);else v=new r(this,h,a,c,d,f),this.addFile(v.files);return this}),g.exports=r},62896:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(85665),n=i(60697),r=new u({Extends:n,initialize:function(h,a,c,d,f,v){var m,x;if(t(a)){var T=a;a=l(T,"key"),m=new o(h,{key:a,url:l(T,"textureURL"),extension:l(T,"textureExtension","png"),normalMap:l(T,"normalMap"),xhrSettings:l(T,"textureXhrSettings")}),x=new s(h,{key:a,url:l(T,"atlasURL"),extension:l(T,"atlasExtension","json"),xhrSettings:l(T,"atlasXhrSettings")})}else m=new o(h,a,c,f),x=new s(h,a,d,v);m.linkFile?n.call(this,h,"atlasjson",a,[m,x,m.linkFile]):n.call(this,h,"atlasjson",a,[m,x])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],a=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,a.data,c),a.pendingDestroy(),this.complete=!0}}});e.register("atlas",function(h,a,c,d,f){var v;if(Array.isArray(h))for(var m=0;m<h.length;m++)v=new r(this,h[m]),this.addFile(v.files);else v=new r(this,h,a,c,d,f),this.addFile(v.files);return this}),g.exports=r},61242:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(60697),n=i(22992),r=new u({Extends:s,initialize:function(h,a,c,d,f,v){var m,x;if(t(a)){var T=a;a=l(T,"key"),m=new o(h,{key:a,url:l(T,"textureURL"),extension:l(T,"textureExtension","png"),normalMap:l(T,"normalMap"),xhrSettings:l(T,"textureXhrSettings")}),x=new n(h,{key:a,url:l(T,"atlasURL"),extension:l(T,"atlasExtension","xml"),xhrSettings:l(T,"atlasXhrSettings")})}else m=new o(h,a,c,f),x=new n(h,a,d,v);m.linkFile?s.call(this,h,"atlasxml",a,[m,x,m.linkFile]):s.call(this,h,"atlasxml",a,[m,x])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],a=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,a.data,c),a.pendingDestroy(),this.complete=!0}}});e.register("atlasXML",function(h,a,c,d,f){var v;if(Array.isArray(h))for(var m=0;m<h.length;m++)v=new r(this,h[m]),this.addFile(v.files);else v=new r(this,h,a,c,d,f),this.addFile(v.files);return this}),g.exports=r},70384:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(79805),n=i(53013),r=new u({Extends:l,initialize:function(h,a,c,d,f){if(n(a)){var v=a;a=t(v,"key"),d=t(v,"xhrSettings"),f=t(v,"context",f)}var m={type:"audio",cache:h.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:a,url:c.url,xhrSettings:d,config:{context:f}};l.call(this,h,m)},onProcess:function(){this.state=e.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(a){h.data=a,h.onProcessComplete()},function(a){console.error("Error decoding audio: "+h.key+" - ",a?a.message:null),h.onProcessError()}),this.config.context=null}});r.create=function(h,a,c,d,f){var v=h.systems.game,m=v.config.audio,x=v.device.audio;n(a)&&(c=t(a,"url",[]),d=t(a,"config",{}));var T=r.getAudioURL(v,c);return T?x.webAudio&&!m.disableWebAudio?new r(h,a,T,f,v.sound.context):new s(h,a,T,d):null},r.getAudioURL=function(h,a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=t(a[c],"url",a[c]);if(d.indexOf("blob:")===0||d.indexOf("data:")===0)return{url:d,type:""};var f=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=t(a[c],"type",f?f[1]:"").toLowerCase(),h.device.audio[f])return{url:d,type:f}}return null},o.register("audio",function(h,a,c,d){var f,v=this.systems.game,m=v.config.audio,x=v.device.audio;if(m.noAudio||!x.webAudio&&!x.audioData)return this;if(Array.isArray(h))for(var T=0;T<h.length;T++)(f=r.create(this,h[T]))&&this.addFile(f);else(f=r.create(this,h,a,c,d))&&this.addFile(f);return this}),g.exports=r},55154:function(g,p,i){var u=i(70384),e=i(69186),l=i(25028),o=i(25738),t=i(53013),s=i(85665),n=i(60697),r=new e({Extends:n,initialize:function(h,a,c,d,f,v,m){if(t(a)){var x=a;a=o(x,"key"),c=o(x,"jsonURL"),d=o(x,"audioURL"),f=o(x,"audioConfig"),v=o(x,"audioXhrSettings"),m=o(x,"jsonXhrSettings")}var T;if(d){var y=u.create(h,a,d,f,v);y&&(T=new s(h,a,c,m),n.call(this,h,"audiosprite",a,[y,T]),this.config.resourceLoad=!1)}else T=new s(h,a,c,m),n.call(this,h,"audiosprite",a,[T]),this.config.resourceLoad=!0,this.config.audioConfig=f,this.config.audioXhrSettings=v},onFileComplete:function(h){if(this.files.indexOf(h)!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var a=h.data.resources,c=o(this.config,"audioConfig"),d=o(this.config,"audioXhrSettings"),f=u.create(this.loader,h.key,a,c,d);f&&(this.addToMultiFile(f),this.loader.addFile(f))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],a=this.files[1];h.addToCache(),a.addToCache(),this.complete=!0}}});l.register("audioSprite",function(h,a,c,d,f,v){var m,x=this.systems.game,T=x.config.audio,y=x.device.audio;if(T&&T.noAudio||!y.webAudio&&!y.audioData)return this;if(Array.isArray(h))for(var E=0;E<h.length;E++)(m=new r(this,h[E])).files&&this.addFile(m.files);else(m=new r(this,h,a,c,d,f,v)).files&&this.addFile(m.files);return this})},93763:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c,d){var f="bin";if(s(h)){var v=h;h=t(v,"key"),a=t(v,"url"),c=t(v,"xhrSettings"),f=t(v,"extension",f),d=t(v,"dataType",d)}var m={type:"binary",cache:r.cacheManager.binary,extension:f,responseType:"arraybuffer",key:h,url:a,xhrSettings:c,config:{dataType:d}};l.call(this,r,m)},onProcess:function(){this.state=e.FILE_PROCESSING;var r=this.config.dataType;this.data=r?new r(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(r,h,a,c){if(Array.isArray(r))for(var d=0;d<r.length;d++)this.addFile(new n(this,r[d]));else this.addFile(new n(this,r,h,c,a));return this}),g.exports=n},9386:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(60697),n=i(95634),r=i(22992),h=new u({Extends:s,initialize:function(a,c,d,f,v,m){var x,T;if(t(c)){var y=c;c=l(y,"key"),x=new o(a,{key:c,url:l(y,"textureURL"),extension:l(y,"textureExtension","png"),normalMap:l(y,"normalMap"),xhrSettings:l(y,"textureXhrSettings")}),T=new r(a,{key:c,url:l(y,"fontDataURL"),extension:l(y,"fontDataExtension","xml"),xhrSettings:l(y,"fontDataXhrSettings")})}else x=new o(a,c,d,v),T=new r(a,c,f,m);x.linkFile?s.call(this,a,"bitmapfont",c,[x,T,x.linkFile]):s.call(this,a,"bitmapfont",c,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1];a.addToCache(),c.pendingDestroy();var d=a.cache.get(a.key),f=n(c.data,a.cache.getFrame(a.key),0,0,d);this.loader.cacheManager.bitmapFont.add(a.key,{data:f,texture:a.key,frame:null}),this.complete=!0}}});e.register("bitmapFont",function(a,c,d,f,v){var m;if(Array.isArray(a))for(var x=0;x<a.length;x++)m=new h(this,a[x]),this.addFile(m.files);else m=new h(this,a,c,d,f,v),this.addFile(m.files);return this}),g.exports=h},71709:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){var d="css";if(s(h)){var f=h;h=t(f,"key"),a=t(f,"url"),c=t(f,"xhrSettings"),d=t(f,"extension",d)}var v={type:"script",cache:!1,extension:d,responseType:"text",key:h,url:a,xhrSettings:c};l.call(this,r,v)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},95069:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=i(45964),r=new u({Extends:l,initialize:function(h,a,c,d,f){var v="glsl";if(s(a)){var m=a;a=t(m,"key"),c=t(m,"url"),d=t(m,"shaderType","fragment"),f=t(m,"xhrSettings"),v=t(m,"extension",v)}else d===void 0&&(d="fragment");var x={type:"glsl",cache:h.cacheManager.shader,extension:v,responseType:"text",key:a,url:c,config:{shaderType:d},xhrSettings:f};l.call(this,h,x)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),a=this.extractBlock(h,0);if(a)for(;a;){var c=this.getShaderName(a.header),d=this.getShaderType(a.header),f=this.getShaderUniforms(a.header),v=a.shader;if(this.cache.has(c)){var m=this.cache.get(c);d==="fragment"?m.fragmentSrc=v:m.vertexSrc=v,m.uniforms||(m.uniforms=f)}else d==="fragment"?this.cache.add(c,new n(c,v,"",f)):this.cache.add(c,new n(c,"",v,f));a=this.extractBlock(h,a.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(h){for(var a=0;a<h.length;a++){var c=h[a].trim();if(c.substring(0,5)==="name:")return c.substring(5).trim()}return this.key},getShaderType:function(h){for(var a=0;a<h.length;a++){var c=h[a].trim();if(c.substring(0,5)==="type:")return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var a={},c=0;c<h.length;c++){var d=h[c].trim();if(d.substring(0,8)==="uniform."){var f=d.indexOf(":");if(f){var v=d.substring(8,f);try{a[v]=JSON.parse(d.substring(f+1))}catch{console.warn("Invalid uniform JSON: "+v)}}}}return a},extractBlock:function(h,a){for(var c=-1,d=-1,f=-1,v=!1,m=!1,x=[],T=[],y=a;y<h.length;y++){var E=h[y].trim();if(E==="---")if(c===-1)c=y,v=!0;else{if(!v){m=!1;break}d=y,v=!1,m=!0}else v?x.push(E):m&&(T.push(E),f=y)}return v||d===-1?null:{header:x,shader:T.join(`
`),offset:f}}});o.register("glsl",function(h,a,c,d){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new r(this,h[f]));else this.addFile(new r(this,h,a,c,d));return this}),g.exports=r},79805:function(g,p,i){var u=i(69186),e=i(40),l=i(44231),o=i(25738),t=i(15966),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){if(s(h)){var d=h;h=o(d,"key"),c=o(d,"config",c)}var f={type:"audio",cache:r.cacheManager.audio,extension:a.type,key:h,url:a.url,config:c};l.call(this,r,f),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var r=0;r<this.data.length;r++){var h=this.data[r];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(r){var h=r.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(e.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var r=this.config&&this.config.instances||1;this.filesTotal=r,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<r;h++){var a=new Audio;a.dataset||(a.dataset={}),a.dataset.name=this.key+("0"+h).slice(-2),a.dataset.used="false",this.locked?a.dataset.locked="true":(a.dataset.locked="false",a.preload="auto",a.oncanplaythrough=this.onProgress.bind(this),a.onerror=this.onError.bind(this)),this.data.push(a)}for(h=0;h<this.data.length;h++)(a=this.data[h]).src=t(this,this.loader.baseURL),this.locked||a.load();this.locked&&setTimeout(this.onLoad.bind(this))}});g.exports=n},18579:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){var d="html";if(s(h)){var f=h;h=t(f,"key"),a=t(f,"url"),c=t(f,"xhrSettings"),d=t(f,"extension",d)}var v={type:"text",cache:r.cacheManager.html,extension:d,responseType:"text",key:h,url:a,xhrSettings:c};l.call(this,r,v)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},51852:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c,d,f){c===void 0&&(c=512),d===void 0&&(d=512);var v="html";if(s(h)){var m=h;h=t(m,"key"),a=t(m,"url"),f=t(m,"xhrSettings"),v=t(m,"extension",v),c=t(m,"width",c),d=t(m,"height",d)}var x={type:"html",cache:r.textureManager,extension:v,responseType:"text",key:h,url:a,xhrSettings:f,config:{width:c,height:d}};l.call(this,r,x)},onProcess:function(){this.state=e.FILE_PROCESSING;var r=this.config.width,h=this.config.height,a=[];a.push('<svg width="'+r+'px" height="'+h+'px" viewBox="0 0 '+r+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),a.push('<foreignObject width="100%" height="100%">'),a.push('<body xmlns="http://www.w3.org/1999/xhtml">'),a.push(this.xhrLoader.responseText),a.push("</body>"),a.push("</foreignObject>"),a.push("</svg>");var c=[a.join(`
`)],d=this;try{var f=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{return d.state=e.FILE_ERRORED,void d.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){l.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(d.data),d.onProcessError()},l.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var r=this.cache.addImage(this.key,this.data);this.pendingDestroy(r)}});o.register("htmlTexture",function(r,h,a,c,d){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new n(this,r[f]));else this.addFile(new n(this,r,h,a,c,d));return this}),g.exports=n},46198:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function r(h,a,c,d,f){var v,m="png";if(s(a)){var x=a;a=t(x,"key"),c=t(x,"url"),v=t(x,"normalMap"),d=t(x,"xhrSettings"),m=t(x,"extension",m),f=t(x,"frameConfig")}Array.isArray(c)&&(v=c[1],c=c[0]);var T={type:"image",cache:h.textureManager,extension:m,responseType:"blob",key:a,url:c,xhrSettings:d,config:f};if(l.call(this,h,T),v){var y=new r(h,this.key,v,d,f);y.type="normalMap",this.setLink(y),h.addFile(y)}},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var r=this;this.data.onload=function(){l.revokeObjectURL(r.data),r.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(r.data),r.onProcessError()},l.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var r,h=this.linkFile;h&&h.state===e.FILE_COMPLETE?(r=this.type==="image"?this.cache.addImage(this.key,this.data,h.data):this.cache.addImage(h.key,h.data,this.data),this.pendingDestroy(r),h.pendingDestroy(r)):h||(r=this.cache.addImage(this.key,this.data),this.pendingDestroy(r))}});o.register("image",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},85665:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(76076),n=i(53013),r=new u({Extends:l,initialize:function(h,a,c,d,f){var v="json";if(n(a)){var m=a;a=t(m,"key"),c=t(m,"url"),d=t(m,"xhrSettings"),v=t(m,"extension",v),f=t(m,"dataKey",f)}var x={type:"json",cache:h.cacheManager.json,extension:v,responseType:"text",key:a,url:c,xhrSettings:d,config:f};l.call(this,h,x),n(c)&&(this.data=f?s(c,f):c,this.state=e.FILE_POPULATED)},onProcess:function(){if(this.state!==e.FILE_POPULATED){this.state=e.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(c){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),c}var a=this.config;this.data=typeof a=="string"?s(h,a,h):h}this.onProcessComplete()}});o.register("json",function(h,a,c,d){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new r(this,h[f]));else this.addFile(new r(this,h,a,d,c));return this}),g.exports=r},97147:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(85665),n=i(60697),r=new u({Extends:n,initialize:function(h,a,c,d,f,v,m){if(t(a)){var x=a;a=l(x,"key"),c=l(x,"url",!1)?l(x,"url"):l(x,"atlasURL"),v=l(x,"xhrSettings"),d=l(x,"path"),f=l(x,"baseURL"),m=l(x,"textureXhrSettings")}var T=new s(h,a,c,v);n.call(this,h,"multiatlas",a,[T]),this.config.path=d,this.config.baseURL=f,this.config.textureXhrSettings=m},onFileComplete:function(h){if(this.files.indexOf(h)!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var a=h.data.textures,c=this.config,d=this.loader,f=d.baseURL,v=d.path,m=d.prefix,x=l(c,"baseURL",this.baseURL),T=l(c,"path",this.path),y=l(c,"prefix",this.prefix),E=l(c,"textureXhrSettings");d.setBaseURL(x),d.setPath(T),d.setPrefix(y);for(var w=0;w<a.length;w++){var R=a[w].image,C="MA"+this.multiKeyIndex+"_"+R,A=new o(d,C,R,E);if(this.addToMultiFile(A),d.addFile(A),a[w].normalMap){var S=new o(d,C,a[w].normalMap,E);S.type="normalMap",A.setLink(S),this.addToMultiFile(S),d.addFile(S)}}d.setBaseURL(f),d.setPath(v),d.setPrefix(m)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],a=[],c=[],d=[],f=1;f<this.files.length;f++){var v=this.files[f];if(v.type!=="normalMap")for(var m=v.key.indexOf("_"),x=v.key.substr(m+1),T=v.data,y=0;y<h.data.textures.length;y++){var E=h.data.textures[y];if(E.image===x){c.push(T),a.push(E),v.linkFile&&d.push(v.linkFile.data);break}}}for(d.length===0&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,a,d),this.complete=!0,f=0;f<this.files.length;f++)this.files[f].pendingDestroy()}}});e.register("multiatlas",function(h,a,c,d,f){var v;if(Array.isArray(h))for(var m=0;m<h.length;m++)v=new r(this,h[m]),this.addFile(v.files);else v=new r(this,h,a,c,d,f),this.addFile(v.files);return this}),g.exports=r},92233:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(53013),t=i(60697),s=i(12328),n=new u({Extends:t,initialize:function(r,h,a,c){var d="js",f=[];if(o(h)){var v=h;h=l(v,"key"),a=l(v,"url"),c=l(v,"xhrSettings"),d=l(v,"extension",d)}Array.isArray(a)||(a=[a]);for(var m=0;m<a.length;m++){var x=new s(r,{key:h+"_"+m.toString(),url:a[m],extension:d,xhrSettings:c});x.onProcess=function(){this.onProcessComplete()},f.push(x)}t.call(this,r,"scripts",h,f)},addToCache:function(){if(this.isReadyToProcess()){for(var r=0;r<this.files.length;r++){var h=this.files[r];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});e.register("scripts",function(r,h,a){var c;if(Array.isArray(r))for(var d=0;d<r.length;d++)c=new n(this,r[d]),this.addFile(c.files);else c=new n(this,r,h,a),this.addFile(c.files);return this}),g.exports=n},45849:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(53013),t=i(60697),s=i(11669),n=i(91252),r=i(20368),h=new u({Extends:t,initialize:function(a,c,d,f,v,m){var x,T,y=a.cacheManager.obj;if(o(c)){var E=c;c=l(E,"key"),x=new r(a,{key:c,type:"obj",cache:y,url:l(E,"url"),extension:l(E,"extension","obj"),xhrSettings:l(E,"xhrSettings"),config:{flipUV:l(E,"flipUV",v)}}),(f=l(E,"matURL"))&&(T=new r(a,{key:c,type:"mat",cache:y,url:f,extension:l(E,"matExtension","mat"),xhrSettings:l(E,"xhrSettings")}))}else x=new r(a,{key:c,url:d,type:"obj",cache:y,extension:"obj",xhrSettings:m,config:{flipUV:v}}),f&&(T=new r(a,{key:c,url:f,type:"mat",cache:y,extension:"mat",xhrSettings:m}));t.call(this,a,"obj",c,[x,T])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],d=s(a.data,a.config.flipUV);c&&(d.materials=n(c.data)),a.cache.add(a.key,d),this.complete=!0}}});e.register("obj",function(a,c,d,f,v){var m;if(Array.isArray(a))for(var x=0;x<a.length;x++)m=new h(this,a[x]),this.addFile(m.files);else m=new h(this,a,c,d,f,v),this.addFile(m.files);return this}),g.exports=h},65263:function(g,p,i){var u=i(69186),e=i(60351),l=i(25028),o=i(85665),t=new u({Extends:o,initialize:function(s,n,r,h,a){o.call(this,s,n,r,h,a),this.type="packfile"},onProcess:function(){this.state!==e.FILE_POPULATED&&(this.state=e.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});l.register("pack",function(s,n,r,h){if(Array.isArray(s))for(var a=0;a<s.length;a++)this.addFile(new t(this,s[a]));else this.addFile(new t(this,s,n,h,r));return this}),g.exports=t},76147:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c,d,f){var v="js";if(s(h)){var m=h;h=t(m,"key"),a=t(m,"url"),f=t(m,"xhrSettings"),v=t(m,"extension",v),c=t(m,"start"),d=t(m,"mapping")}var x={type:"plugin",cache:!1,extension:v,responseType:"text",key:h,url:a,xhrSettings:f,config:{start:c,mapping:d}};l.call(this,r,x),typeof a=="function"&&(this.data=a,this.state=e.FILE_POPULATED)},onProcess:function(){var r=this.loader.systems.plugins,h=this.config,a=t(h,"start",!1),c=t(h,"mapping",null);if(this.state===e.FILE_POPULATED)r.install(this.key,this.data,a,c);else{this.state=e.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=r.install(this.key,window[this.key],a,c);(a||c)&&(this.loader.systems[c]=d,this.loader.scene[c]=d)}this.onProcessComplete()}});o.register("plugin",function(r,h,a,c,d){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new n(this,r[f]));else this.addFile(new n(this,r,h,a,c,d));return this}),g.exports=n},38443:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c,d){var f="svg";if(s(h)){var v=h;h=t(v,"key"),a=t(v,"url"),c=t(v,"svgConfig",{}),d=t(v,"xhrSettings"),f=t(v,"extension",f)}var m={type:"svg",cache:r.textureManager,extension:f,responseType:"text",key:h,url:a,xhrSettings:d,config:{width:t(c,"width"),height:t(c,"height"),scale:t(c,"scale")}};l.call(this,r,m)},onProcess:function(){this.state=e.FILE_PROCESSING;var r=this.xhrLoader.responseText,h=[r],a=this.config.width,c=this.config.height,d=this.config.scale;t:if(a&&c||d){var f=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("svg")[0],v=f.hasAttribute("viewBox"),m=parseFloat(f.getAttribute("width")),x=parseFloat(f.getAttribute("height"));if(!v&&m&&x)f.setAttribute("viewBox","0  0 "+m+" "+x);else if(v&&!m&&!x){var T=f.getAttribute("viewBox").split(/\s+|,/);m=T[2],x=T[3]}if(d){if(!m||!x)break t;a=m*d,c=x*d}f.setAttribute("width",a.toString()+"px"),f.setAttribute("height",c.toString()+"px"),h=[new XMLSerializer().serializeToString(f)]}try{var y=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var E=this,w=!1;this.data.onload=function(){w||l.revokeObjectURL(E.data),E.onProcessComplete()},this.data.onerror=function(){w?E.onProcessError():(w=!0,l.revokeObjectURL(E.data),E.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},l.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){var r=this.cache.addImage(this.key,this.data);this.pendingDestroy(r)}});o.register("svg",function(r,h,a,c){if(Array.isArray(r))for(var d=0;d<r.length;d++)this.addFile(new n(this,r[d]));else this.addFile(new n(this,r,h,a,c));return this}),g.exports=n},79633:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){var d="js";if(s(h)){var f=h;h=t(f,"key"),a=t(f,"url"),c=t(f,"xhrSettings"),d=t(f,"extension",d)}var v={type:"text",extension:d,responseType:"text",key:h,url:a,xhrSettings:c};l.call(this,r,v)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var r=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(r)),this.complete=!0}});o.register("sceneFile",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},83926:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c,d,f){var v="js";if(s(h)){var m=h;h=t(m,"key"),a=t(m,"url"),f=t(m,"xhrSettings"),v=t(m,"extension",v),c=t(m,"systemKey"),d=t(m,"sceneKey")}var x={type:"scenePlugin",cache:!1,extension:v,responseType:"text",key:h,url:a,xhrSettings:f,config:{systemKey:c,sceneKey:d}};l.call(this,r,x),typeof a=="function"&&(this.data=a,this.state=e.FILE_POPULATED)},onProcess:function(){var r=this.loader.systems.plugins,h=this.config,a=this.key,c=t(h,"systemKey",a),d=t(h,"sceneKey",a);this.state===e.FILE_POPULATED?r.installScenePlugin(c,this.data,d,this.loader.scene,!0):(this.state=e.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),r.installScenePlugin(c,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(r,h,a,c,d){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new n(this,r[f]));else this.addFile(new n(this,r,h,a,c,d));return this}),g.exports=n},12328:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){var d="js";if(s(h)){var f=h;h=t(f,"key"),a=t(f,"url"),c=t(f,"xhrSettings"),d=t(f,"extension",d)}var v={type:"script",cache:!1,extension:d,responseType:"text",key:h,url:a,xhrSettings:c};l.call(this,r,v)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},67250:function(g,p,i){var u=i(69186),e=i(25028),l=i(46198),o=new u({Extends:l,initialize:function(t,s,n,r,h){l.call(this,t,s,n,h,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});e.register("spritesheet",function(t,s,n,r){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new o(this,t[h]));else this.addFile(new o(this,t,s,n,r));return this}),g.exports=o},20368:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=new u({Extends:l,initialize:function(r,h,a,c){var d="text",f="txt",v=r.cacheManager.text;if(s(h)){var m=h;h=t(m,"key"),a=t(m,"url"),c=t(m,"xhrSettings"),f=t(m,"extension",f),d=t(m,"type",d),v=t(m,"cache",v)}var x={type:d,cache:v,extension:f,responseType:"text",key:h,url:a,xhrSettings:c};l.call(this,r,x)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(r,h,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new n(this,r[c]));else this.addFile(new n(this,r,h,a));return this}),g.exports=n},88794:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=i(53012),r=new u({Extends:l,initialize:function(h,a,c,d){var f="csv";if(s(a)){var v=a;a=t(v,"key"),c=t(v,"url"),d=t(v,"xhrSettings"),f=t(v,"extension",f)}var m={type:"tilemapCSV",cache:h.cacheManager.tilemap,extension:f,responseType:"text",key:a,url:c,xhrSettings:d};l.call(this,h,m),this.tilemapFormat=n.CSV},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h),this.pendingDestroy(h)}});o.register("tilemapCSV",function(h,a,c){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new r(this,h[d]));else this.addFile(new r(this,h,a,c));return this}),g.exports=r},84116:function(g,p,i){var u=i(69186),e=i(25028),l=i(85665),o=i(53012),t=new u({Extends:l,initialize:function(s,n,r,h){l.call(this,s,n,r,h),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var s={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});e.register("tilemapImpact",function(s,n,r){if(Array.isArray(s))for(var h=0;h<s.length;h++)this.addFile(new t(this,s[h]));else this.addFile(new t(this,s,n,r));return this}),g.exports=t},82666:function(g,p,i){var u=i(69186),e=i(25028),l=i(85665),o=i(53012),t=new u({Extends:l,initialize:function(s,n,r,h){l.call(this,s,n,r,h),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var s={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});e.register("tilemapTiledJSON",function(s,n,r){if(Array.isArray(s))for(var h=0;h<s.length;h++)this.addFile(new t(this,s[h]));else this.addFile(new t(this,s,n,r));return this}),g.exports=t},77579:function(g,p,i){var u=i(69186),e=i(25028),l=i(25738),o=i(46198),t=i(53013),s=i(60697),n=i(20368),r=new u({Extends:s,initialize:function(h,a,c,d,f,v){var m,x;if(t(a)){var T=a;a=l(T,"key"),m=new o(h,{key:a,url:l(T,"textureURL"),extension:l(T,"textureExtension","png"),normalMap:l(T,"normalMap"),xhrSettings:l(T,"textureXhrSettings")}),x=new n(h,{key:a,url:l(T,"atlasURL"),extension:l(T,"atlasExtension","txt"),xhrSettings:l(T,"atlasXhrSettings")})}else m=new o(h,a,c,f),x=new n(h,a,d,v);m.linkFile?s.call(this,h,"unityatlas",a,[m,x,m.linkFile]):s.call(this,h,"unityatlas",a,[m,x])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],a=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,a.data,c),a.pendingDestroy(),this.complete=!0}}});e.register("unityAtlas",function(h,a,c,d,f){var v;if(Array.isArray(h))for(var m=0;m<h.length;m++)v=new r(this,h[m]),this.addFile(v.files);else v=new r(this,h,a,c,d,f),this.addFile(v.files);return this}),g.exports=r},8548:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(15966),s=i(25738),n=i(53013),r=new u({Extends:l,initialize:function(h,a,c,d,f,v,m){d===void 0&&(d="loadeddata"),f===void 0&&(f=!1),v===void 0&&(v=!1),d!=="loadeddata"&&d!=="canplay"&&d!=="canplaythrough"&&(d="loadeddata");var x={type:"video",cache:h.cacheManager.video,extension:c.type,responseType:"blob",key:a,url:c.url,xhrSettings:m,config:{loadEvent:d,asBlob:f,noAudio:v}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),l.call(this,h,x)},onProcess:function(){if(this.state=e.FILE_PROCESSING,this.config.asBlob){var h=this.createVideoElement();this.data=h;var a=this;this.data.onloadeddata=function(){a.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(a.data),a.onProcessError()},l.createObjectURL(h,this.xhrLoader.response,""),h.load()}else this.onProcessComplete()},createVideoElement:function(){var h=document.createElement("video");return h.controls=!1,h.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(h.muted=!0,h.defaultMuted=!0,h.setAttribute("autoplay","autoplay")),h.setAttribute("playsinline","playsinline"),h.setAttribute("preload","auto"),h},onVideoLoadHandler:function(h){var a=h.target;a.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),a.removeEventListener("error",this.onErrorCallback,!0),this.data=a,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(h){var a=h.target;a&&(a.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),a.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var h=this.config.loadEvent;if(this.config.asBlob)l.prototype.load.call(this);else{this.percentComplete=0;var a=this.createVideoElement();a.addEventListener(h,this.onLoadCallback,!0),a.addEventListener("error",this.onErrorCallback,!0),a.src=t(this,this.loader.baseURL),a.load()}}});r.create=function(h,a,c,d,f,v,m){var x=h.systems.game;n(a)&&(c=s(a,"url",[]),d=s(a,"loadEvent","loadeddata"),f=s(a,"asBlob",!1),v=s(a,"noAudio",!1),m=s(a,"xhrSettings"),a=s(a,"key"));var T=r.getVideoURL(x,c);if(T)return new r(h,a,T,d,f,v,m)},r.getVideoURL=function(h,a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d,f=s(a[c],"url",a[c]);if(f.indexOf("blob:")===0)return{url:f,type:""};if(d=f.indexOf("data:")===0?f.split(",")[0].match(/\/(.*?);/):f.match(/\.([a-zA-Z0-9]+)($|\?)/),d=s(a[c],"type",d?d[1]:"").toLowerCase(),h.device.video[d])return{url:f,type:d}}return null},o.register("video",function(h,a,c,d,f,v){var m;if(Array.isArray(h))for(var x=0;x<h.length;x++)(m=r.create(this,h[x]))&&this.addFile(m);else(m=r.create(this,h,a,c,d,f,v))&&this.addFile(m);return this}),g.exports=r},22992:function(g,p,i){var u=i(69186),e=i(60351),l=i(44231),o=i(25028),t=i(25738),s=i(53013),n=i(3726),r=new u({Extends:l,initialize:function(h,a,c,d){var f="xml";if(s(a)){var v=a;a=t(v,"key"),c=t(v,"url"),d=t(v,"xhrSettings"),f=t(v,"extension",f)}var m={type:"xml",cache:h.cacheManager.xml,extension:f,responseType:"text",key:a,url:c,xhrSettings:d};l.call(this,h,m)},onProcess:function(){this.state=e.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(h,a,c){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new r(this,h[d]));else this.addFile(new r(this,h,a,c));return this}),g.exports=r},67377:function(g,p,i){g.exports={AnimationJSONFile:i(32108),AsepriteFile:i(61117),AtlasJSONFile:i(62896),AtlasXMLFile:i(61242),AudioFile:i(70384),AudioSpriteFile:i(55154),BinaryFile:i(93763),BitmapFontFile:i(9386),CSSFile:i(71709),GLSLFile:i(95069),HTML5AudioFile:i(79805),HTMLFile:i(18579),HTMLTextureFile:i(51852),ImageFile:i(46198),JSONFile:i(85665),MultiAtlasFile:i(97147),MultiScriptFile:i(92233),OBJFile:i(45849),PackFile:i(65263),PluginFile:i(76147),SceneFile:i(79633),ScenePluginFile:i(83926),ScriptFile:i(12328),SpriteSheetFile:i(67250),SVGFile:i(38443),TextFile:i(20368),TilemapCSVFile:i(88794),TilemapImpactFile:i(84116),TilemapJSONFile:i(82666),UnityAtlasFile:i(77579),VideoFile:i(8548),XMLFile:i(22992)}},74266:function(g,p,i){var u=i(60351),e=i(72646),l={Events:i(40),FileTypes:i(67377),File:i(44231),FileTypesManager:i(25028),GetURL:i(15966),LoaderPlugin:i(90894),MergeXHRSettings:i(32710),MultiFile:i(60697),XHRLoader:i(82825),XHRSettings:i(64567)};l=e(!1,l,u),g.exports=l},57635:function(g){g.exports=function(p){for(var i=0,u=0;u<p.length;u++)i+=+p[u];return i/p.length}},14230:function(g,p,i){var u=i(20280);g.exports=function(e,l){return u(e)/u(l)/u(e-l)}},27019:function(g){g.exports=function(p,i){return Math.floor(Math.random()*(i-p+1)+p)}},51929:function(g){g.exports=function(p,i,u,e,l){var o=.5*(e-i),t=.5*(l-u),s=p*p;return(2*u-2*e+o+t)*(p*s)+(-3*u+3*e-2*o-t)*s+o*p+u}},23993:function(g){g.exports=function(p,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var e=Math.pow(u,-i);return Math.ceil(p*e)/e}},2543:function(g){g.exports=function(p,i,u){return Math.max(i,Math.min(u,p))}},23407:function(g,p,i){var u=i(80925);g.exports=function(e){return e*u.DEG_TO_RAD}},34320:function(g){g.exports=function(p,i){return Math.abs(p-i)}},41426:function(g,p,i){var u=i(2543),e=i(69186),l=i(54259),o=i(45733),t=new l,s=new e({initialize:function n(r,h,a,c){r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=0),c===void 0&&(c=n.DefaultOrder),this._x=r,this._y=h,this._z=a,this._order=c,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,r,h,a){return a===void 0&&(a=this._order),this._x=n,this._y=r,this._z=h,this._order=a,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,r,h){return r===void 0&&(r=this._order),h===void 0&&(h=!1),t.fromQuat(n),this.setFromRotationMatrix(t,r,h)},setFromRotationMatrix:function(n,r,h){r===void 0&&(r=this._order),h===void 0&&(h=!1);var a=n.val,c=a[0],d=a[4],f=a[8],v=a[1],m=a[5],x=a[9],T=a[2],y=a[6],E=a[10],w=0,R=0,C=0,A=.99999;switch(r){case"XYZ":R=Math.asin(u(f,-1,1)),Math.abs(f)<A?(w=Math.atan2(-x,E),C=Math.atan2(-d,c)):w=Math.atan2(y,m);break;case"YXZ":w=Math.asin(-u(x,-1,1)),Math.abs(x)<A?(R=Math.atan2(f,E),C=Math.atan2(v,m)):R=Math.atan2(-T,c);break;case"ZXY":w=Math.asin(u(y,-1,1)),Math.abs(y)<A?(R=Math.atan2(-T,E),C=Math.atan2(-d,m)):C=Math.atan2(v,c);break;case"ZYX":R=Math.asin(-u(T,-1,1)),Math.abs(T)<A?(w=Math.atan2(y,E),C=Math.atan2(v,c)):C=Math.atan2(-d,m);break;case"YZX":C=Math.asin(u(v,-1,1)),Math.abs(v)<A?(w=Math.atan2(-x,m),R=Math.atan2(-T,c)):R=Math.atan2(f,E);break;case"XZY":C=Math.asin(-u(d,-1,1)),Math.abs(d)<A?(w=Math.atan2(y,m),R=Math.atan2(f,c)):w=Math.atan2(-x,E)}return this._x=w,this._y=R,this._z=C,this._order=r,h&&this.onChangeCallback(this),this}});s.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],s.DefaultOrder="XYZ",g.exports=s},20280:function(g){g.exports=function(p){if(p===0)return 1;for(var i=p;--p;)i*=p;return i}},62193:function(g){g.exports=function(p,i){return Math.random()*(i-p)+p}},32223:function(g){g.exports=function(p,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var e=Math.pow(u,-i);return Math.floor(p*e)/e}},53023:function(g,p,i){var u=i(2543);g.exports=function(e,l,o){return(o-l)*(e=u(e,0,1))+l}},41907:function(g){g.exports=function(p,i){return p/i/1e3}},45799:function(g){g.exports=function(p){return p==parseFloat(p)?!(p%2):void 0}},16660:function(g){g.exports=function(p){return p===parseFloat(p)?!(p%2):void 0}},3821:function(g){g.exports=function(p,i,u){return(i-p)*u+p}},30230:function(g,p,i){var u=new(i(69186))({initialize:function(e){this.val=new Float32Array(9),e?this.copy(e):this.identity()},clone:function(){return new u(this)},set:function(e){return this.copy(e)},copy:function(e){var l=this.val,o=e.val;return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],this},fromMat4:function(e){var l=e.val,o=this.val;return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[4],o[4]=l[5],o[5]=l[6],o[6]=l[8],o[7]=l[9],o[8]=l[10],this},fromArray:function(e){var l=this.val;return l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3],l[4]=e[4],l[5]=e[5],l[6]=e[6],l[7]=e[7],l[8]=e[8],this},identity:function(){var e=this.val;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},transpose:function(){var e=this.val,l=e[1],o=e[2],t=e[5];return e[1]=e[3],e[2]=e[6],e[3]=l,e[5]=e[7],e[6]=o,e[7]=t,this},invert:function(){var e=this.val,l=e[0],o=e[1],t=e[2],s=e[3],n=e[4],r=e[5],h=e[6],a=e[7],c=e[8],d=c*n-r*a,f=-c*s+r*h,v=a*s-n*h,m=l*d+o*f+t*v;return m?(m=1/m,e[0]=d*m,e[1]=(-c*o+t*a)*m,e[2]=(r*o-t*n)*m,e[3]=f*m,e[4]=(c*l-t*h)*m,e[5]=(-r*l+t*s)*m,e[6]=v*m,e[7]=(-a*l+o*h)*m,e[8]=(n*l-o*s)*m,this):null},adjoint:function(){var e=this.val,l=e[0],o=e[1],t=e[2],s=e[3],n=e[4],r=e[5],h=e[6],a=e[7],c=e[8];return e[0]=n*c-r*a,e[1]=t*a-o*c,e[2]=o*r-t*n,e[3]=r*h-s*c,e[4]=l*c-t*h,e[5]=t*s-l*r,e[6]=s*a-n*h,e[7]=o*h-l*a,e[8]=l*n-o*s,this},determinant:function(){var e=this.val,l=e[0],o=e[1],t=e[2],s=e[3],n=e[4],r=e[5],h=e[6],a=e[7],c=e[8];return l*(c*n-r*a)+o*(-c*s+r*h)+t*(a*s-n*h)},multiply:function(e){var l=this.val,o=l[0],t=l[1],s=l[2],n=l[3],r=l[4],h=l[5],a=l[6],c=l[7],d=l[8],f=e.val,v=f[0],m=f[1],x=f[2],T=f[3],y=f[4],E=f[5],w=f[6],R=f[7],C=f[8];return l[0]=v*o+m*n+x*a,l[1]=v*t+m*r+x*c,l[2]=v*s+m*h+x*d,l[3]=T*o+y*n+E*a,l[4]=T*t+y*r+E*c,l[5]=T*s+y*h+E*d,l[6]=w*o+R*n+C*a,l[7]=w*t+R*r+C*c,l[8]=w*s+R*h+C*d,this},translate:function(e){var l=this.val,o=e.x,t=e.y;return l[6]=o*l[0]+t*l[3]+l[6],l[7]=o*l[1]+t*l[4]+l[7],l[8]=o*l[2]+t*l[5]+l[8],this},rotate:function(e){var l=this.val,o=l[0],t=l[1],s=l[2],n=l[3],r=l[4],h=l[5],a=Math.sin(e),c=Math.cos(e);return l[0]=c*o+a*n,l[1]=c*t+a*r,l[2]=c*s+a*h,l[3]=c*n-a*o,l[4]=c*r-a*t,l[5]=c*h-a*s,this},scale:function(e){var l=this.val,o=e.x,t=e.y;return l[0]=o*l[0],l[1]=o*l[1],l[2]=o*l[2],l[3]=t*l[3],l[4]=t*l[4],l[5]=t*l[5],this},fromQuat:function(e){var l=e.x,o=e.y,t=e.z,s=e.w,n=l+l,r=o+o,h=t+t,a=l*n,c=l*r,d=l*h,f=o*r,v=o*h,m=t*h,x=s*n,T=s*r,y=s*h,E=this.val;return E[0]=1-(f+m),E[3]=c+y,E[6]=d-T,E[1]=c-y,E[4]=1-(a+m),E[7]=v+x,E[2]=d+T,E[5]=v-x,E[8]=1-(a+f),this},normalFromMat4:function(e){var l=e.val,o=this.val,t=l[0],s=l[1],n=l[2],r=l[3],h=l[4],a=l[5],c=l[6],d=l[7],f=l[8],v=l[9],m=l[10],x=l[11],T=l[12],y=l[13],E=l[14],w=l[15],R=t*a-s*h,C=t*c-n*h,A=t*d-r*h,S=s*c-n*a,b=s*d-r*a,_=n*d-r*c,P=f*y-v*T,D=f*E-m*T,O=f*w-x*T,F=v*E-m*y,N=v*w-x*y,k=m*w-x*E,L=R*k-C*N+A*F+S*O-b*D+_*P;return L?(L=1/L,o[0]=(a*k-c*N+d*F)*L,o[1]=(c*O-h*k-d*D)*L,o[2]=(h*N-a*O+d*P)*L,o[3]=(n*N-s*k-r*F)*L,o[4]=(t*k-n*O+r*D)*L,o[5]=(s*O-t*N-r*P)*L,o[6]=(y*_-E*b+w*S)*L,o[7]=(E*A-T*_-w*C)*L,o[8]=(T*b-y*A+w*R)*L,this):null}});g.exports=u},54259:function(g,p,i){var u=i(69186),e=i(33736),l=1e-6,o=new u({initialize:function(a){this.val=new Float32Array(16),a?this.copy(a):this.identity()},clone:function(){return new o(this)},set:function(a){return this.copy(a)},setValues:function(a,c,d,f,v,m,x,T,y,E,w,R,C,A,S,b){var _=this.val;return _[0]=a,_[1]=c,_[2]=d,_[3]=f,_[4]=v,_[5]=m,_[6]=x,_[7]=T,_[8]=y,_[9]=E,_[10]=w,_[11]=R,_[12]=C,_[13]=A,_[14]=S,_[15]=b,this},copy:function(a){var c=a.val;return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},fromArray:function(a){return this.setValues(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(a,c,d){var f=t.fromQuat(d).val,v=c.x,m=c.y,x=c.z;return this.setValues(f[0]*v,f[1]*v,f[2]*v,0,f[4]*m,f[5]*m,f[6]*m,0,f[8]*x,f[9]*x,f[10]*x,0,a.x,a.y,a.z,1)},xyz:function(a,c,d){this.identity();var f=this.val;return f[12]=a,f[13]=c,f[14]=d,this},scaling:function(a,c,d){this.zero();var f=this.val;return f[0]=a,f[5]=c,f[10]=d,f[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var a=this.val,c=a[1],d=a[2],f=a[3],v=a[6],m=a[7],x=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=v,a[11]=a[14],a[12]=f,a[13]=m,a[14]=x,this},getInverse:function(a){return this.copy(a),this.invert()},invert:function(){var a=this.val,c=a[0],d=a[1],f=a[2],v=a[3],m=a[4],x=a[5],T=a[6],y=a[7],E=a[8],w=a[9],R=a[10],C=a[11],A=a[12],S=a[13],b=a[14],_=a[15],P=c*x-d*m,D=c*T-f*m,O=c*y-v*m,F=d*T-f*x,N=d*y-v*x,k=f*y-v*T,L=E*S-w*A,U=E*b-R*A,Y=E*_-C*A,B=w*b-R*S,W=w*_-C*S,G=R*_-C*b,X=P*G-D*W+O*B+F*Y-N*U+k*L;return X?(X=1/X,this.setValues((x*G-T*W+y*B)*X,(f*W-d*G-v*B)*X,(S*k-b*N+_*F)*X,(R*N-w*k-C*F)*X,(T*Y-m*G-y*U)*X,(c*G-f*Y+v*U)*X,(b*O-A*k-_*D)*X,(E*k-R*O+C*D)*X,(m*W-x*Y+y*L)*X,(d*Y-c*W-v*L)*X,(A*N-S*O+_*P)*X,(w*O-E*N-C*P)*X,(x*U-m*B-T*L)*X,(c*B-d*U+f*L)*X,(S*D-A*F-b*P)*X,(E*F-w*D+R*P)*X)):this},adjoint:function(){var a=this.val,c=a[0],d=a[1],f=a[2],v=a[3],m=a[4],x=a[5],T=a[6],y=a[7],E=a[8],w=a[9],R=a[10],C=a[11],A=a[12],S=a[13],b=a[14],_=a[15];return this.setValues(x*(R*_-C*b)-w*(T*_-y*b)+S*(T*C-y*R),-(d*(R*_-C*b)-w*(f*_-v*b)+S*(f*C-v*R)),d*(T*_-y*b)-x*(f*_-v*b)+S*(f*y-v*T),-(d*(T*C-y*R)-x*(f*C-v*R)+w*(f*y-v*T)),-(m*(R*_-C*b)-E*(T*_-y*b)+A*(T*C-y*R)),c*(R*_-C*b)-E*(f*_-v*b)+A*(f*C-v*R),-(c*(T*_-y*b)-m*(f*_-v*b)+A*(f*y-v*T)),c*(T*C-y*R)-m*(f*C-v*R)+E*(f*y-v*T),m*(w*_-C*S)-E*(x*_-y*S)+A*(x*C-y*w),-(c*(w*_-C*S)-E*(d*_-v*S)+A*(d*C-v*w)),c*(x*_-y*S)-m*(d*_-v*S)+A*(d*y-v*x),-(c*(x*C-y*w)-m*(d*C-v*w)+E*(d*y-v*x)),-(m*(w*b-R*S)-E*(x*b-T*S)+A*(x*R-T*w)),c*(w*b-R*S)-E*(d*b-f*S)+A*(d*R-f*w),-(c*(x*b-T*S)-m*(d*b-f*S)+A*(d*T-f*x)),c*(x*R-T*w)-m*(d*R-f*w)+E*(d*T-f*x))},determinant:function(){var a=this.val,c=a[0],d=a[1],f=a[2],v=a[3],m=a[4],x=a[5],T=a[6],y=a[7],E=a[8],w=a[9],R=a[10],C=a[11],A=a[12],S=a[13],b=a[14],_=a[15];return(c*x-d*m)*(R*_-C*b)-(c*T-f*m)*(w*_-C*S)+(c*y-v*m)*(w*b-R*S)+(d*T-f*x)*(E*_-C*A)-(d*y-v*x)*(E*b-R*A)+(f*y-v*T)*(E*S-w*A)},multiply:function(a){var c=this.val,d=c[0],f=c[1],v=c[2],m=c[3],x=c[4],T=c[5],y=c[6],E=c[7],w=c[8],R=c[9],C=c[10],A=c[11],S=c[12],b=c[13],_=c[14],P=c[15],D=a.val,O=D[0],F=D[1],N=D[2],k=D[3];return c[0]=O*d+F*x+N*w+k*S,c[1]=O*f+F*T+N*R+k*b,c[2]=O*v+F*y+N*C+k*_,c[3]=O*m+F*E+N*A+k*P,O=D[4],F=D[5],N=D[6],k=D[7],c[4]=O*d+F*x+N*w+k*S,c[5]=O*f+F*T+N*R+k*b,c[6]=O*v+F*y+N*C+k*_,c[7]=O*m+F*E+N*A+k*P,O=D[8],F=D[9],N=D[10],k=D[11],c[8]=O*d+F*x+N*w+k*S,c[9]=O*f+F*T+N*R+k*b,c[10]=O*v+F*y+N*C+k*_,c[11]=O*m+F*E+N*A+k*P,O=D[12],F=D[13],N=D[14],k=D[15],c[12]=O*d+F*x+N*w+k*S,c[13]=O*f+F*T+N*R+k*b,c[14]=O*v+F*y+N*C+k*_,c[15]=O*m+F*E+N*A+k*P,this},multiplyLocal:function(a){var c=this.val,d=a.val;return this.setValues(c[0]*d[0]+c[1]*d[4]+c[2]*d[8]+c[3]*d[12],c[0]*d[1]+c[1]*d[5]+c[2]*d[9]+c[3]*d[13],c[0]*d[2]+c[1]*d[6]+c[2]*d[10]+c[3]*d[14],c[0]*d[3]+c[1]*d[7]+c[2]*d[11]+c[3]*d[15],c[4]*d[0]+c[5]*d[4]+c[6]*d[8]+c[7]*d[12],c[4]*d[1]+c[5]*d[5]+c[6]*d[9]+c[7]*d[13],c[4]*d[2]+c[5]*d[6]+c[6]*d[10]+c[7]*d[14],c[4]*d[3]+c[5]*d[7]+c[6]*d[11]+c[7]*d[15],c[8]*d[0]+c[9]*d[4]+c[10]*d[8]+c[11]*d[12],c[8]*d[1]+c[9]*d[5]+c[10]*d[9]+c[11]*d[13],c[8]*d[2]+c[9]*d[6]+c[10]*d[10]+c[11]*d[14],c[8]*d[3]+c[9]*d[7]+c[10]*d[11]+c[11]*d[15],c[12]*d[0]+c[13]*d[4]+c[14]*d[8]+c[15]*d[12],c[12]*d[1]+c[13]*d[5]+c[14]*d[9]+c[15]*d[13],c[12]*d[2]+c[13]*d[6]+c[14]*d[10]+c[15]*d[14],c[12]*d[3]+c[13]*d[7]+c[14]*d[11]+c[15]*d[15])},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,c){var d=a.val,f=c.val,v=d[0],m=d[4],x=d[8],T=d[12],y=d[1],E=d[5],w=d[9],R=d[13],C=d[2],A=d[6],S=d[10],b=d[14],_=d[3],P=d[7],D=d[11],O=d[15],F=f[0],N=f[4],k=f[8],L=f[12],U=f[1],Y=f[5],B=f[9],W=f[13],G=f[2],X=f[6],q=f[10],j=f[14],V=f[3],K=f[7],H=f[11],Z=f[15];return this.setValues(v*F+m*U+x*G+T*V,y*F+E*U+w*G+R*V,C*F+A*U+S*G+b*V,_*F+P*U+D*G+O*V,v*N+m*Y+x*X+T*K,y*N+E*Y+w*X+R*K,C*N+A*Y+S*X+b*K,_*N+P*Y+D*X+O*K,v*k+m*B+x*q+T*H,y*k+E*B+w*q+R*H,C*k+A*B+S*q+b*H,_*k+P*B+D*q+O*H,v*L+m*W+x*j+T*Z,y*L+E*W+w*j+R*Z,C*L+A*W+S*j+b*Z,_*L+P*W+D*j+O*Z)},translate:function(a){return this.translateXYZ(a.x,a.y,a.z)},translateXYZ:function(a,c,d){var f=this.val;return f[12]=f[0]*a+f[4]*c+f[8]*d+f[12],f[13]=f[1]*a+f[5]*c+f[9]*d+f[13],f[14]=f[2]*a+f[6]*c+f[10]*d+f[14],f[15]=f[3]*a+f[7]*c+f[11]*d+f[15],this},scale:function(a){return this.scaleXYZ(a.x,a.y,a.z)},scaleXYZ:function(a,c,d){var f=this.val;return f[0]=f[0]*a,f[1]=f[1]*a,f[2]=f[2]*a,f[3]=f[3]*a,f[4]=f[4]*c,f[5]=f[5]*c,f[6]=f[6]*c,f[7]=f[7]*c,f[8]=f[8]*d,f[9]=f[9]*d,f[10]=f[10]*d,f[11]=f[11]*d,this},makeRotationAxis:function(a,c){var d=Math.cos(c),f=Math.sin(c),v=1-d,m=a.x,x=a.y,T=a.z,y=v*m,E=v*x;return this.setValues(y*m+d,y*x-f*T,y*T+f*x,0,y*x+f*T,E*x+d,E*T-f*m,0,y*T-f*x,E*T+f*m,v*T*T+d,0,0,0,0,1)},rotate:function(a,c){var d=this.val,f=c.x,v=c.y,m=c.z,x=Math.sqrt(f*f+v*v+m*m);if(Math.abs(x)<l)return this;f*=x=1/x,v*=x,m*=x;var T=Math.sin(a),y=Math.cos(a),E=1-y,w=d[0],R=d[1],C=d[2],A=d[3],S=d[4],b=d[5],_=d[6],P=d[7],D=d[8],O=d[9],F=d[10],N=d[11],k=d[12],L=d[13],U=d[14],Y=d[15],B=f*f*E+y,W=v*f*E+m*T,G=m*f*E-v*T,X=f*v*E-m*T,q=v*v*E+y,j=m*v*E+f*T,V=f*m*E+v*T,K=v*m*E-f*T,H=m*m*E+y;return this.setValues(w*B+S*W+D*G,R*B+b*W+O*G,C*B+_*W+F*G,A*B+P*W+N*G,w*X+S*q+D*j,R*X+b*q+O*j,C*X+_*q+F*j,A*X+P*q+N*j,w*V+S*K+D*H,R*V+b*K+O*H,C*V+_*K+F*H,A*V+P*K+N*H,k,L,U,Y)},rotateX:function(a){var c=this.val,d=Math.sin(a),f=Math.cos(a),v=c[4],m=c[5],x=c[6],T=c[7],y=c[8],E=c[9],w=c[10],R=c[11];return c[4]=v*f+y*d,c[5]=m*f+E*d,c[6]=x*f+w*d,c[7]=T*f+R*d,c[8]=y*f-v*d,c[9]=E*f-m*d,c[10]=w*f-x*d,c[11]=R*f-T*d,this},rotateY:function(a){var c=this.val,d=Math.sin(a),f=Math.cos(a),v=c[0],m=c[1],x=c[2],T=c[3],y=c[8],E=c[9],w=c[10],R=c[11];return c[0]=v*f-y*d,c[1]=m*f-E*d,c[2]=x*f-w*d,c[3]=T*f-R*d,c[8]=v*d+y*f,c[9]=m*d+E*f,c[10]=x*d+w*f,c[11]=T*d+R*f,this},rotateZ:function(a){var c=this.val,d=Math.sin(a),f=Math.cos(a),v=c[0],m=c[1],x=c[2],T=c[3],y=c[4],E=c[5],w=c[6],R=c[7];return c[0]=v*f+y*d,c[1]=m*f+E*d,c[2]=x*f+w*d,c[3]=T*f+R*d,c[4]=y*f-v*d,c[5]=E*f-m*d,c[6]=w*f-x*d,c[7]=R*f-T*d,this},fromRotationTranslation:function(a,c){var d=a.x,f=a.y,v=a.z,m=a.w,x=d+d,T=f+f,y=v+v,E=d*x,w=d*T,R=d*y,C=f*T,A=f*y,S=v*y,b=m*x,_=m*T,P=m*y;return this.setValues(1-(C+S),w+P,R-_,0,w-P,1-(E+S),A+b,0,R+_,A-b,1-(E+C),0,c.x,c.y,c.z,1)},fromQuat:function(a){var c=a.x,d=a.y,f=a.z,v=a.w,m=c+c,x=d+d,T=f+f,y=c*m,E=c*x,w=c*T,R=d*x,C=d*T,A=f*T,S=v*m,b=v*x,_=v*T;return this.setValues(1-(R+A),E+_,w-b,0,E-_,1-(y+A),C+S,0,w+b,C-S,1-(y+R),0,0,0,0,1)},frustum:function(a,c,d,f,v,m){var x=1/(c-a),T=1/(f-d),y=1/(v-m);return this.setValues(2*v*x,0,0,0,0,2*v*T,0,0,(c+a)*x,(f+d)*T,(m+v)*y,-1,0,0,m*v*2*y,0)},perspective:function(a,c,d,f){var v=1/Math.tan(a/2),m=1/(d-f);return this.setValues(v/c,0,0,0,0,v,0,0,0,0,(f+d)*m,-1,0,0,2*f*d*m,0)},perspectiveLH:function(a,c,d,f){return this.setValues(2*d/a,0,0,0,0,2*d/c,0,0,0,0,-f/(d-f),1,0,0,d*f/(d-f),0)},ortho:function(a,c,d,f,v,m){var x=a-c,T=d-f,y=v-m;return x=x===0?x:1/x,T=T===0?T:1/T,y=y===0?y:1/y,this.setValues(-2*x,0,0,0,0,-2*T,0,0,0,0,2*y,0,(a+c)*x,(f+d)*T,(m+v)*y,1)},lookAtRH:function(a,c,d){var f=this.val;return h.subVectors(a,c),h.getLengthSquared()===0&&(h.z=1),h.normalize(),n.crossVectors(d,h),n.getLengthSquared()===0&&(Math.abs(d.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),n.crossVectors(d,h)),n.normalize(),r.crossVectors(h,n),f[0]=n.x,f[1]=n.y,f[2]=n.z,f[4]=r.x,f[5]=r.y,f[6]=r.z,f[8]=h.x,f[9]=h.y,f[10]=h.z,this},lookAt:function(a,c,d){var f=a.x,v=a.y,m=a.z,x=d.x,T=d.y,y=d.z,E=c.x,w=c.y,R=c.z;if(Math.abs(f-E)<l&&Math.abs(v-w)<l&&Math.abs(m-R)<l)return this.identity();var C=f-E,A=v-w,S=m-R,b=1/Math.sqrt(C*C+A*A+S*S),_=T*(S*=b)-y*(A*=b),P=y*(C*=b)-x*S,D=x*A-T*C;(b=Math.sqrt(_*_+P*P+D*D))?(_*=b=1/b,P*=b,D*=b):(_=0,P=0,D=0);var O=A*D-S*P,F=S*_-C*D,N=C*P-A*_;return(b=Math.sqrt(O*O+F*F+N*N))?(O*=b=1/b,F*=b,N*=b):(O=0,F=0,N=0),this.setValues(_,O,C,0,P,F,A,0,D,N,S,0,-(_*f+P*v+D*m),-(O*f+F*v+N*m),-(C*f+A*v+S*m),1)},yawPitchRoll:function(a,c,d){this.zero(),t.zero(),s.zero();var f=this.val,v=t.val,m=s.val,x=Math.sin(d),T=Math.cos(d);return f[10]=1,f[15]=1,f[0]=T,f[1]=x,f[4]=-x,f[5]=T,x=Math.sin(c),T=Math.cos(c),v[0]=1,v[15]=1,v[5]=T,v[10]=T,v[9]=-x,v[6]=x,x=Math.sin(a),T=Math.cos(a),m[5]=1,m[15]=1,m[0]=T,m[2]=-x,m[8]=x,m[10]=T,this.multiplyLocal(t),this.multiplyLocal(s),this},setWorldMatrix:function(a,c,d,f,v){return this.yawPitchRoll(a.y,a.x,a.z),t.scaling(d.x,d.y,d.z),s.xyz(c.x,c.y,c.z),this.multiplyLocal(t),this.multiplyLocal(s),f&&this.multiplyLocal(f),v&&this.multiplyLocal(v),this},multiplyToMat4:function(a,c){var d=this.val,f=a.val,v=d[0],m=d[1],x=d[2],T=d[3],y=d[4],E=d[5],w=d[6],R=d[7],C=d[8],A=d[9],S=d[10],b=d[11],_=d[12],P=d[13],D=d[14],O=d[15],F=f[0],N=f[1],k=f[2],L=f[3],U=f[4],Y=f[5],B=f[6],W=f[7],G=f[8],X=f[9],q=f[10],j=f[11],V=f[12],K=f[13],H=f[14],Z=f[15];return c.setValues(F*v+N*y+k*C+L*_,N*m+N*E+k*A+L*P,k*x+N*w+k*S+L*D,L*T+N*R+k*b+L*O,U*v+Y*y+B*C+W*_,U*m+Y*E+B*A+W*P,U*x+Y*w+B*S+W*D,U*T+Y*R+B*b+W*O,G*v+X*y+q*C+j*_,G*m+X*E+q*A+j*P,G*x+X*w+q*S+j*D,G*T+X*R+q*b+j*O,V*v+K*y+H*C+Z*_,V*m+K*E+H*A+Z*P,V*x+K*w+H*S+Z*D,V*T+K*R+H*b+Z*O)},fromRotationXYTranslation:function(a,c,d){var f=c.x,v=c.y,m=c.z,x=Math.sin(a.x),T=Math.cos(a.x),y=Math.sin(a.y),E=Math.cos(a.y),w=f,R=v,C=m,A=-x,S=0-A*y,b=0-T*y,_=A*E,P=T*E;return d||(w=E*f+y*m,R=S*f+T*v+_*m,C=b*f+x*v+P*m),this.setValues(E,S,b,0,0,T,x,0,y,_,P,0,w,R,C,1)},getMaxScaleOnAxis:function(){var a=this.val,c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],d=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],f=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(c,d,f))}}),t=new o,s=new o,n=new e,r=new e,h=new e;g.exports=o},65617:function(g){g.exports=function(p,i,u){return Math.min(p+i,u)}},89036:function(g){g.exports=function(p){var i=p.length;if(i===0)return 0;p.sort(function(e,l){return e-l});var u=Math.floor(i/2);return i%2==0?(p[u]+p[u-1])/2:p[u]}},96448:function(g){g.exports=function(p,i,u){return Math.max(p-i,u)}},82356:function(g){g.exports=function(p,i,u,e){u===void 0&&(u=i+1);var l=(p-i)/(u-i);return l>1?e!==void 0?(l=(e-p)/(e-u))<0&&(l=0):l=1:l<0&&(l=0),l}},63060:function(g,p,i){var u=i(69186),e=i(30230),l=i(45733),o=i(33736),t=1e-6,s=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),r=new o(1,0,0),h=new o(0,1,0),a=new o,c=new e,d=new u({initialize:function(f,v,m,x){this.onChangeCallback=l,this.set(f,v,m,x)},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(f){this._w=f,this.onChangeCallback(this)}},copy:function(f){return this.set(f)},set:function(f,v,m,x,T){return T===void 0&&(T=!0),typeof f=="object"?(this._x=f.x||0,this._y=f.y||0,this._z=f.z||0,this._w=f.w||0):(this._x=f||0,this._y=v||0,this._z=m||0,this._w=x||0),T&&this.onChangeCallback(this),this},add:function(f){return this._x+=f.x,this._y+=f.y,this._z+=f.z,this._w+=f.w,this.onChangeCallback(this),this},subtract:function(f){return this._x-=f.x,this._y-=f.y,this._z-=f.z,this._w-=f.w,this.onChangeCallback(this),this},scale:function(f){return this._x*=f,this._y*=f,this._z*=f,this._w*=f,this.onChangeCallback(this),this},length:function(){var f=this.x,v=this.y,m=this.z,x=this.w;return Math.sqrt(f*f+v*v+m*m+x*x)},lengthSq:function(){var f=this.x,v=this.y,m=this.z,x=this.w;return f*f+v*v+m*m+x*x},normalize:function(){var f=this.x,v=this.y,m=this.z,x=this.w,T=f*f+v*v+m*m+x*x;return T>0&&(T=1/Math.sqrt(T),this._x=f*T,this._y=v*T,this._z=m*T,this._w=x*T),this.onChangeCallback(this),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,v){v===void 0&&(v=0);var m=this.x,x=this.y,T=this.z,y=this.w;return this.set(m+v*(f.x-m),x+v*(f.y-x),T+v*(f.z-T),y+v*(f.w-y))},rotationTo:function(f,v){var m=f.x*v.x+f.y*v.y+f.z*v.z;return m<-.999999?(a.copy(r).cross(f).length()<t&&a.copy(h).cross(f),a.normalize(),this.setAxisAngle(a,Math.PI)):m>.999999?this.set(0,0,0,1):(a.copy(f).cross(v),this._x=a.x,this._y=a.y,this._z=a.z,this._w=1+m,this.normalize())},setAxes:function(f,v,m){var x=c.val;return x[0]=v.x,x[3]=v.y,x[6]=v.z,x[1]=m.x,x[4]=m.y,x[7]=m.z,x[2]=-f.x,x[5]=-f.y,x[8]=-f.z,this.fromMat3(c).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(f,v){v*=.5;var m=Math.sin(v);return this.set(m*f.x,m*f.y,m*f.z,Math.cos(v))},multiply:function(f){var v=this.x,m=this.y,x=this.z,T=this.w,y=f.x,E=f.y,w=f.z,R=f.w;return this.set(v*R+T*y+m*w-x*E,m*R+T*E+x*y-v*w,x*R+T*w+v*E-m*y,T*R-v*y-m*E-x*w)},slerp:function(f,v){var m=this.x,x=this.y,T=this.z,y=this.w,E=f.x,w=f.y,R=f.z,C=f.w,A=m*E+x*w+T*R+y*C;A<0&&(A=-A,E=-E,w=-w,R=-R,C=-C);var S=1-v,b=v;if(1-A>t){var _=Math.acos(A),P=Math.sin(_);S=Math.sin((1-v)*_)/P,b=Math.sin(v*_)/P}return this.set(S*m+b*E,S*x+b*w,S*T+b*R,S*y+b*C)},invert:function(){var f=this.x,v=this.y,m=this.z,x=this.w,T=f*f+v*v+m*m+x*x,y=T?1/T:0;return this.set(-f*y,-v*y,-m*y,x*y)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(f){f*=.5;var v=this.x,m=this.y,x=this.z,T=this.w,y=Math.sin(f),E=Math.cos(f);return this.set(v*E+T*y,m*E+x*y,x*E-m*y,T*E-v*y)},rotateY:function(f){f*=.5;var v=this.x,m=this.y,x=this.z,T=this.w,y=Math.sin(f),E=Math.cos(f);return this.set(v*E-x*y,m*E+T*y,x*E+v*y,T*E-m*y)},rotateZ:function(f){f*=.5;var v=this.x,m=this.y,x=this.z,T=this.w,y=Math.sin(f),E=Math.cos(f);return this.set(v*E+m*y,m*E-v*y,x*E+T*y,T*E-x*y)},calculateW:function(){var f=this.x,v=this.y,m=this.z;return this.w=-Math.sqrt(1-f*f-v*v-m*m),this},setFromEuler:function(f,v){var m=f.x/2,x=f.y/2,T=f.z/2,y=Math.cos(m),E=Math.cos(x),w=Math.cos(T),R=Math.sin(m),C=Math.sin(x),A=Math.sin(T);switch(f.order){case"XYZ":this.set(R*E*w+y*C*A,y*C*w-R*E*A,y*E*A+R*C*w,y*E*w-R*C*A,v);break;case"YXZ":this.set(R*E*w+y*C*A,y*C*w-R*E*A,y*E*A-R*C*w,y*E*w+R*C*A,v);break;case"ZXY":this.set(R*E*w-y*C*A,y*C*w+R*E*A,y*E*A+R*C*w,y*E*w-R*C*A,v);break;case"ZYX":this.set(R*E*w-y*C*A,y*C*w+R*E*A,y*E*A-R*C*w,y*E*w+R*C*A,v);break;case"YZX":this.set(R*E*w+y*C*A,y*C*w+R*E*A,y*E*A-R*C*w,y*E*w-R*C*A,v);break;case"XZY":this.set(R*E*w-y*C*A,y*C*w-R*E*A,y*E*A+R*C*w,y*E*w+R*C*A,v)}return this},setFromRotationMatrix:function(f){var v,m=f.val,x=m[0],T=m[4],y=m[8],E=m[1],w=m[5],R=m[9],C=m[2],A=m[6],S=m[10],b=x+w+S;return b>0?(v=.5/Math.sqrt(b+1),this.set((A-R)*v,(y-C)*v,(E-T)*v,.25/v)):x>w&&x>S?(v=2*Math.sqrt(1+x-w-S),this.set(.25*v,(T+E)/v,(y+C)/v,(A-R)/v)):w>S?(v=2*Math.sqrt(1+w-x-S),this.set((T+E)/v,.25*v,(R+A)/v,(y-C)/v)):(v=2*Math.sqrt(1+S-x-w),this.set((y+C)/v,(R+A)/v,.25*v,(E-T)/v)),this},fromMat3:function(f){var v,m=f.val,x=m[0]+m[4]+m[8];if(x>0)v=Math.sqrt(x+1),this.w=.5*v,v=.5/v,this._x=(m[7]-m[5])*v,this._y=(m[2]-m[6])*v,this._z=(m[3]-m[1])*v;else{var T=0;m[4]>m[0]&&(T=1),m[8]>m[3*T+T]&&(T=2);var y=s[T],E=s[y];v=Math.sqrt(m[3*T+T]-m[3*y+y]-m[3*E+E]+1),n[T]=.5*v,v=.5/v,n[y]=(m[3*y+T]+m[3*T+y])*v,n[E]=(m[3*E+T]+m[3*T+E])*v,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(m[3*E+y]-m[3*y+E])*v}return this.onChangeCallback(this),this}});g.exports=d},33642:function(g,p,i){var u=i(80925);g.exports=function(e){return e*u.RAD_TO_DEG}},7192:function(g){g.exports=function(p,i){i===void 0&&(i=1);var u=2*Math.random()*Math.PI;return p.x=Math.cos(u)*i,p.y=Math.sin(u)*i,p}},43815:function(g){g.exports=function(p,i){i===void 0&&(i=1);var u=2*Math.random()*Math.PI,e=2*Math.random()-1,l=Math.sqrt(1-e*e)*i;return p.x=Math.cos(u)*l,p.y=Math.sin(u)*l,p.z=e*i,p}},6969:function(g){g.exports=function(p,i){return i===void 0&&(i=1),p.x=(2*Math.random()-1)*i,p.y=(2*Math.random()-1)*i,p.z=(2*Math.random()-1)*i,p.w=(2*Math.random()-1)*i,p}},11747:function(g){g.exports=function(p,i){var u=p.x,e=p.y;return p.x=u*Math.cos(i)-e*Math.sin(i),p.y=u*Math.sin(i)+e*Math.cos(i),p}},45707:function(g){g.exports=function(p,i,u,e){var l=Math.cos(e),o=Math.sin(e),t=p.x-i,s=p.y-u;return p.x=t*l-s*o+i,p.y=t*o+s*l+u,p}},79749:function(g){g.exports=function(p,i,u,e,l){var o=e+Math.atan2(p.y-u,p.x-i);return p.x=i+l*Math.cos(o),p.y=u+l*Math.sin(o),p}},20065:function(g){g.exports=function(p,i,u,e,l){return p.x=i+l*Math.cos(e),p.y=u+l*Math.sin(e),p}},26578:function(g,p,i){var u=i(33736),e=i(54259),l=i(63060),o=new e,t=new l,s=new u;g.exports=function(n,r,h){return t.setAxisAngle(r,h),o.fromRotationTranslation(t,s.set(0,0,0)),n.transformMat4(o)}},40496:function(g){g.exports=function(p){return p>0?Math.ceil(p):Math.floor(p)}},35789:function(g){g.exports=function(p,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var e=Math.pow(u,-i);return Math.round(p*e)/e}},57955:function(g){g.exports=function(p,i,u,e){i===void 0&&(i=1),u===void 0&&(u=1),e===void 0&&(e=1),e*=Math.PI/p;for(var l=[],o=[],t=0;t<p;t++)i+=(u-=i*e)*e,l[t]=u,o[t]=i;return{sin:o,cos:l,length:p}}},89989:function(g){g.exports=function(p,i,u){return p<=i?0:p>=u?1:(p=(p-i)/(u-i))*p*(3-2*p)}},29817:function(g){g.exports=function(p,i,u){return(p=Math.max(0,Math.min(1,(p-i)/(u-i))))*p*p*(p*(6*p-15)+10)}},76384:function(g,p,i){var u=i(17321);g.exports=function(e,l,o,t){t===void 0&&(t=new u);var s=0,n=0;return e>0&&e<=l*o&&(s=e>l-1?e-(n=Math.floor(e/l))*l:e),t.set(s,n)}},37423:function(g,p,i){var u=i(17321);g.exports=function(e,l,o,t,s,n,r,h){h===void 0&&(h=new u);var a=Math.sin(s),c=Math.cos(s),d=c*n,f=a*n,v=-a*r,m=c*r,x=1/(d*m+v*-f);return h.x=m*x*e+-v*x*l+(t*v-o*m)*x,h.y=d*x*l+-f*x*e+(-t*d+o*f)*x,h}},17321:function(g,p,i){var u=i(69186),e=i(97026),l=new u({initialize:function(o,t){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(t===void 0&&(t=o),this.x=o||0,this.y=t||0)},clone:function(){return new l(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,t){return t===void 0&&(t=o),this.x=o,this.y=t,this},setTo:function(o,t){return this.set(o,t)},setToPolar:function(o,t){return t==null&&(t=1),this.x=Math.cos(o)*t,this.y=Math.sin(o)*t,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,t){return e(this.x,o.x,t)&&e(this.y,o.y,t)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var t=o.x-this.x,s=o.y-this.y;return Math.sqrt(t*t+s*s)},distanceSq:function(o){var t=o.x-this.x,s=o.y-this.y;return t*t+s*s},length:function(){var o=this.x,t=this.y;return Math.sqrt(o*o+t*t)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,t=this.y;return o*o+t*t},normalize:function(){var o=this.x,t=this.y,s=o*o+t*t;return s>0&&(s=1/Math.sqrt(s),this.x=o*s,this.y=t*s),this},normalizeRightHand:function(){var o=this.x;return this.x=-1*this.y,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=-1*o,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,t){t===void 0&&(t=0);var s=this.x,n=this.y;return this.x=s+t*(o.x-s),this.y=n+t*(o.y-n),this},transformMat3:function(o){var t=this.x,s=this.y,n=o.val;return this.x=n[0]*t+n[3]*s+n[6],this.y=n[1]*t+n[4]*s+n[7],this},transformMat4:function(o){var t=this.x,s=this.y,n=o.val;return this.x=n[0]*t+n[4]*s+n[12],this.y=n[1]*t+n[5]*s+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var t=this.length();return t&&t>o&&this.scale(o/t),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var t=Math.cos(o),s=Math.sin(o);return this.set(t*this.x-s*this.y,s*this.x+t*this.y)}});l.ZERO=new l,l.RIGHT=new l(1,0),l.LEFT=new l(-1,0),l.UP=new l(0,-1),l.DOWN=new l(0,1),l.ONE=new l(1,1),g.exports=l},33736:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o){this.x=0,this.y=0,this.z=0,typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=l||0,this.z=o||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this},crossVectors:function(e,l){var o=e.x,t=e.y,s=e.z,n=l.x,r=l.y,h=l.z;return this.x=t*h-s*r,this.y=s*n-o*h,this.z=o*r-t*n,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this},set:function(e,l,o){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=l||0,this.z=o||0),this},setFromMatrixPosition:function(e){return this.fromArray(e.val,12)},setFromMatrixColumn:function(e,l){return this.fromArray(e.val,4*l)},fromArray:function(e,l){return l===void 0&&(l=0),this.x=e[l],this.y=e[l+1],this.z=e[l+2],this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addScale:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(e){var l=e.x-this.x,o=e.y-this.y,t=e.z-this.z||0;return Math.sqrt(l*l+o*o+t*t)},distanceSq:function(e){var l=e.x-this.x,o=e.y-this.y,t=e.z-this.z||0;return l*l+o*o+t*t},length:function(){var e=this.x,l=this.y,o=this.z;return Math.sqrt(e*e+l*l+o*o)},lengthSq:function(){var e=this.x,l=this.y,o=this.z;return e*e+l*l+o*o},normalize:function(){var e=this.x,l=this.y,o=this.z,t=e*e+l*l+o*o;return t>0&&(t=1/Math.sqrt(t),this.x=e*t,this.y=l*t,this.z=o*t),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var l=this.x,o=this.y,t=this.z,s=e.x,n=e.y,r=e.z;return this.x=o*r-t*n,this.y=t*s-l*r,this.z=l*n-o*s,this},lerp:function(e,l){l===void 0&&(l=0);var o=this.x,t=this.y,s=this.z;return this.x=o+l*(e.x-o),this.y=t+l*(e.y-t),this.z=s+l*(e.z-s),this},applyMatrix3:function(e){var l=this.x,o=this.y,t=this.z,s=e.val;return this.x=s[0]*l+s[3]*o+s[6]*t,this.y=s[1]*l+s[4]*o+s[7]*t,this.z=s[2]*l+s[5]*o+s[8]*t,this},applyMatrix4:function(e){var l=this.x,o=this.y,t=this.z,s=e.val,n=1/(s[3]*l+s[7]*o+s[11]*t+s[15]);return this.x=(s[0]*l+s[4]*o+s[8]*t+s[12])*n,this.y=(s[1]*l+s[5]*o+s[9]*t+s[13])*n,this.z=(s[2]*l+s[6]*o+s[10]*t+s[14])*n,this},transformMat3:function(e){var l=this.x,o=this.y,t=this.z,s=e.val;return this.x=l*s[0]+o*s[3]+t*s[6],this.y=l*s[1]+o*s[4]+t*s[7],this.z=l*s[2]+o*s[5]+t*s[8],this},transformMat4:function(e){var l=this.x,o=this.y,t=this.z,s=e.val;return this.x=s[0]*l+s[4]*o+s[8]*t+s[12],this.y=s[1]*l+s[5]*o+s[9]*t+s[13],this.z=s[2]*l+s[6]*o+s[10]*t+s[14],this},transformCoordinates:function(e){var l=this.x,o=this.y,t=this.z,s=e.val,n=l*s[0]+o*s[4]+t*s[8]+s[12],r=l*s[1]+o*s[5]+t*s[9]+s[13],h=l*s[2]+o*s[6]+t*s[10]+s[14],a=l*s[3]+o*s[7]+t*s[11]+s[15];return this.x=n/a,this.y=r/a,this.z=h/a,this},transformQuat:function(e){var l=this.x,o=this.y,t=this.z,s=e.x,n=e.y,r=e.z,h=e.w,a=h*l+n*t-r*o,c=h*o+r*l-s*t,d=h*t+s*o-n*l,f=-s*l-n*o-r*t;return this.x=a*h+f*-s+c*-r-d*-n,this.y=c*h+f*-n+d*-s-a*-r,this.z=d*h+f*-r+a*-n-c*-s,this},project:function(e){var l=this.x,o=this.y,t=this.z,s=e.val,n=s[0],r=s[1],h=s[2],a=s[3],c=s[4],d=s[5],f=s[6],v=s[7],m=s[8],x=s[9],T=s[10],y=s[11],E=s[12],w=s[13],R=s[14],C=1/(l*a+o*v+t*y+s[15]);return this.x=(l*n+o*c+t*m+E)*C,this.y=(l*r+o*d+t*x+w)*C,this.z=(l*h+o*f+t*T+R)*C,this},projectViewMatrix:function(e,l){return this.applyMatrix4(e).applyMatrix4(l)},unprojectViewMatrix:function(e,l){return this.applyMatrix4(e).applyMatrix4(l)},unproject:function(e,l){var o=e.x,t=e.y,s=e.z,n=e.w,r=this.x-o,h=n-this.y-1-t,a=this.z;return this.x=2*r/s-1,this.y=2*h/n-1,this.z=2*a-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),g.exports=u},37254:function(g,p,i){var u=new(i(69186))({initialize:function(e,l,o,t){this.x=0,this.y=0,this.z=0,this.w=0,typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=l||0,this.z=o||0,this.w=t||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this.w=e.w||0,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,l,o,t){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=l||0,this.z=o||0,this.w=t||0),this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this.w+=e.w||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this.w-=e.w||0,this},scale:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},length:function(){var e=this.x,l=this.y,o=this.z,t=this.w;return Math.sqrt(e*e+l*l+o*o+t*t)},lengthSq:function(){var e=this.x,l=this.y,o=this.z,t=this.w;return e*e+l*l+o*o+t*t},normalize:function(){var e=this.x,l=this.y,o=this.z,t=this.w,s=e*e+l*l+o*o+t*t;return s>0&&(s=1/Math.sqrt(s),this.x=e*s,this.y=l*s,this.z=o*s,this.w=t*s),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,l){l===void 0&&(l=0);var o=this.x,t=this.y,s=this.z,n=this.w;return this.x=o+l*(e.x-o),this.y=t+l*(e.y-t),this.z=s+l*(e.z-s),this.w=n+l*(e.w-n),this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this.w*=e.w||1,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this.w/=e.w||1,this},distance:function(e){var l=e.x-this.x,o=e.y-this.y,t=e.z-this.z||0,s=e.w-this.w||0;return Math.sqrt(l*l+o*o+t*t+s*s)},distanceSq:function(e){var l=e.x-this.x,o=e.y-this.y,t=e.z-this.z||0,s=e.w-this.w||0;return l*l+o*o+t*t+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(e){var l=this.x,o=this.y,t=this.z,s=this.w,n=e.val;return this.x=n[0]*l+n[4]*o+n[8]*t+n[12]*s,this.y=n[1]*l+n[5]*o+n[9]*t+n[13]*s,this.z=n[2]*l+n[6]*o+n[10]*t+n[14]*s,this.w=n[3]*l+n[7]*o+n[11]*t+n[15]*s,this},transformQuat:function(e){var l=this.x,o=this.y,t=this.z,s=e.x,n=e.y,r=e.z,h=e.w,a=h*l+n*t-r*o,c=h*o+r*l-s*t,d=h*t+s*o-n*l,f=-s*l-n*o-r*t;return this.x=a*h+f*-s+c*-r-d*-n,this.y=c*h+f*-n+d*-s-a*-r,this.z=d*h+f*-r+a*-n-c*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,g.exports=u},47924:function(g){g.exports=function(p,i,u){return Math.abs(p-i)<=u}},6704:function(g){g.exports=function(p,i,u){var e=u-i;return i+((p-i)%e+e)%e}},53517:function(g){g.exports=function(p,i,u,e){return Math.atan2(e-i,u-p)}},57999:function(g){g.exports=function(p,i){return Math.atan2(i.y-p.y,i.x-p.x)}},91994:function(g){g.exports=function(p,i){return Math.atan2(i.x-p.x,i.y-p.y)}},55967:function(g){g.exports=function(p,i,u,e){return Math.atan2(u-p,e-i)}},42014:function(g,p,i){var u=i(80925);g.exports=function(e){return e>Math.PI&&(e-=u.PI2),Math.abs(((e+u.TAU)%u.PI2-u.PI2)%u.PI2)}},75262:function(g){g.exports=function(p){return(p%=2*Math.PI)>=0?p:p+2*Math.PI}},49594:function(g,p,i){var u=i(62193);g.exports=function(){return u(-Math.PI,Math.PI)}},1983:function(g,p,i){var u=i(62193);g.exports=function(){return u(-180,180)}},79739:function(g,p,i){var u=i(75262);g.exports=function(e){return u(e+Math.PI)}},69586:function(g,p,i){var u=i(80925);g.exports=function(e,l,o){return o===void 0&&(o=.05),e===l||(Math.abs(l-e)<=o||Math.abs(l-e)>=u.PI2-o?e=l:(Math.abs(l-e)>Math.PI&&(l<e?l+=u.PI2:l-=u.PI2),l>e?e+=o:l<e&&(e-=o))),e}},68843:function(g){g.exports=function(p,i){var u=i-p;return u===0?0:u-360*Math.floor((u- -180)/360)}},12784:function(g,p,i){var u=i(6704);g.exports=function(e){return u(e,-Math.PI,Math.PI)}},7011:function(g,p,i){var u=i(6704);g.exports=function(e){return u(e,-180,180)}},72608:function(g,p,i){g.exports={Between:i(53517),BetweenPoints:i(57999),BetweenPointsY:i(91994),BetweenY:i(55967),CounterClockwise:i(42014),Normalize:i(75262),Random:i(49594),RandomDegrees:i(1983),Reverse:i(79739),RotateTo:i(69586),ShortestBetween:i(68843),Wrap:i(12784),WrapDegrees:i(7011)}},80925:function(g){var p={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};g.exports=p},76914:function(g){g.exports=function(p,i,u,e){var l=p-u,o=i-e;return Math.sqrt(l*l+o*o)}},21274:function(g){g.exports=function(p,i){var u=p.x-i.x,e=p.y-i.y;return Math.sqrt(u*u+e*e)}},30852:function(g){g.exports=function(p,i){var u=p.x-i.x,e=p.y-i.y;return u*u+e*e}},49312:function(g){g.exports=function(p,i,u,e){return Math.max(Math.abs(p-u),Math.abs(i-e))}},21923:function(g){g.exports=function(p,i,u,e,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(u-p,l)+Math.pow(e-i,l))}},77183:function(g){g.exports=function(p,i,u,e){return Math.abs(p-u)+Math.abs(i-e)}},53747:function(g){g.exports=function(p,i,u,e){var l=p-u,o=i-e;return l*l+o*o}},29760:function(g,p,i){g.exports={Between:i(76914),BetweenPoints:i(21274),BetweenPointsSquared:i(30852),Chebyshev:i(49312),Power:i(21923),Snake:i(77183),Squared:i(53747)}},45044:function(g,p,i){var u=i(18978),e=i(47232),l=i(57916),o=i(61189),t=i(43121),s=i(85653),n=i(49336),r=i(79696),h=i(1082),a=i(12073),c=i(7884),d=i(46113);g.exports={Power0:n,Power1:r.Out,Power2:o.Out,Power3:h.Out,Power4:a.Out,Linear:n,Quad:r.Out,Cubic:o.Out,Quart:h.Out,Quint:a.Out,Sine:c.Out,Expo:s.Out,Circ:l.Out,Elastic:t.Out,Back:u.Out,Bounce:e.Out,Stepped:d,"Quad.easeIn":r.In,"Cubic.easeIn":o.In,"Quart.easeIn":h.In,"Quint.easeIn":a.In,"Sine.easeIn":c.In,"Expo.easeIn":s.In,"Circ.easeIn":l.In,"Elastic.easeIn":t.In,"Back.easeIn":u.In,"Bounce.easeIn":e.In,"Quad.easeOut":r.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":h.Out,"Quint.easeOut":a.Out,"Sine.easeOut":c.Out,"Expo.easeOut":s.Out,"Circ.easeOut":l.Out,"Elastic.easeOut":t.Out,"Back.easeOut":u.Out,"Bounce.easeOut":e.Out,"Quad.easeInOut":r.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":a.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":l.InOut,"Elastic.easeInOut":t.InOut,"Back.easeInOut":u.InOut,"Bounce.easeInOut":e.InOut}},55512:function(g){g.exports=function(p,i){return i===void 0&&(i=1.70158),p*p*((i+1)*p-i)}},21341:function(g){g.exports=function(p,i){i===void 0&&(i=1.70158);var u=1.525*i;return(p*=2)<1?p*p*((u+1)*p-u)*.5:.5*((p-=2)*p*((u+1)*p+u)+2)}},5376:function(g){g.exports=function(p,i){return i===void 0&&(i=1.70158),--p*p*((i+1)*p+i)+1}},18978:function(g,p,i){g.exports={In:i(55512),Out:i(5376),InOut:i(21341)}},33033:function(g){g.exports=function(p){return(p=1-p)<.36363636363636365?1-7.5625*p*p:p<.7272727272727273?1-(7.5625*(p-=.5454545454545454)*p+.75):p<.9090909090909091?1-(7.5625*(p-=.8181818181818182)*p+.9375):1-(7.5625*(p-=.9545454545454546)*p+.984375)}},72311:function(g){g.exports=function(p){var i=!1;return p<.5?(p=1-2*p,i=!0):p=2*p-1,p<.36363636363636365?p*=7.5625*p:p=p<.7272727272727273?7.5625*(p-=.5454545454545454)*p+.75:p<.9090909090909091?7.5625*(p-=.8181818181818182)*p+.9375:7.5625*(p-=.9545454545454546)*p+.984375,i?.5*(1-p):.5*p+.5}},35394:function(g){g.exports=function(p){return p<.36363636363636365?7.5625*p*p:p<.7272727272727273?7.5625*(p-=.5454545454545454)*p+.75:p<.9090909090909091?7.5625*(p-=.8181818181818182)*p+.9375:7.5625*(p-=.9545454545454546)*p+.984375}},47232:function(g,p,i){g.exports={In:i(33033),Out:i(35394),InOut:i(72311)}},81324:function(g){g.exports=function(p){return 1-Math.sqrt(1-p*p)}},16284:function(g){g.exports=function(p){return(p*=2)<1?-.5*(Math.sqrt(1-p*p)-1):.5*(Math.sqrt(1-(p-=2)*p)+1)}},95348:function(g){g.exports=function(p){return Math.sqrt(1- --p*p)}},57916:function(g,p,i){g.exports={In:i(81324),Out:i(95348),InOut:i(16284)}},35573:function(g){g.exports=function(p){return p*p*p}},10947:function(g){g.exports=function(p){return(p*=2)<1?.5*p*p*p:.5*((p-=2)*p*p+2)}},4086:function(g){g.exports=function(p){return--p*p*p+1}},61189:function(g,p,i){g.exports={In:i(35573),Out:i(4086),InOut:i(10947)}},55198:function(g){g.exports=function(p,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),p===0)return 0;if(p===1)return 1;var e=u/4;return i<1?i=1:e=u*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(p-=1))*Math.sin((p-e)*(2*Math.PI)/u)}},41014:function(g){g.exports=function(p,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),p===0)return 0;if(p===1)return 1;var e=u/4;return i<1?i=1:e=u*Math.asin(1/i)/(2*Math.PI),(p*=2)<1?i*Math.pow(2,10*(p-=1))*Math.sin((p-e)*(2*Math.PI)/u)*-.5:i*Math.pow(2,-10*(p-=1))*Math.sin((p-e)*(2*Math.PI)/u)*.5+1}},70967:function(g){g.exports=function(p,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),p===0)return 0;if(p===1)return 1;var e=u/4;return i<1?i=1:e=u*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*p)*Math.sin((p-e)*(2*Math.PI)/u)+1}},43121:function(g,p,i){g.exports={In:i(55198),Out:i(70967),InOut:i(41014)}},39705:function(g){g.exports=function(p){return Math.pow(2,10*(p-1))-.001}},26854:function(g){g.exports=function(p){return(p*=2)<1?.5*Math.pow(2,10*(p-1)):.5*(2-Math.pow(2,-10*(p-1)))}},13202:function(g){g.exports=function(p){return 1-Math.pow(2,-10*p)}},85653:function(g,p,i){g.exports={In:i(39705),Out:i(13202),InOut:i(26854)}},80208:function(g,p,i){g.exports={Back:i(18978),Bounce:i(47232),Circular:i(57916),Cubic:i(61189),Elastic:i(43121),Expo:i(85653),Linear:i(49336),Quadratic:i(79696),Quartic:i(1082),Quintic:i(12073),Sine:i(7884),Stepped:i(46113)}},67823:function(g){g.exports=function(p){return p}},49336:function(g,p,i){g.exports=i(67823)},10111:function(g){g.exports=function(p){return p*p}},17596:function(g){g.exports=function(p){return(p*=2)<1?.5*p*p:-.5*(--p*(p-2)-1)}},39467:function(g){g.exports=function(p){return p*(2-p)}},79696:function(g,p,i){g.exports={In:i(10111),Out:i(39467),InOut:i(17596)}},16880:function(g){g.exports=function(p){return p*p*p*p}},45827:function(g){g.exports=function(p){return(p*=2)<1?.5*p*p*p*p:-.5*((p-=2)*p*p*p-2)}},7953:function(g){g.exports=function(p){return 1- --p*p*p*p}},1082:function(g,p,i){g.exports={In:i(16880),Out:i(7953),InOut:i(45827)}},76389:function(g){g.exports=function(p){return p*p*p*p*p}},1828:function(g){g.exports=function(p){return(p*=2)<1?.5*p*p*p*p*p:.5*((p-=2)*p*p*p*p+2)}},21840:function(g){g.exports=function(p){return--p*p*p*p*p+1}},12073:function(g,p,i){g.exports={In:i(76389),Out:i(21840),InOut:i(1828)}},20771:function(g){g.exports=function(p){return p===0?0:p===1?1:1-Math.cos(p*Math.PI/2)}},84600:function(g){g.exports=function(p){return p===0?0:p===1?1:.5*(1-Math.cos(Math.PI*p))}},34819:function(g){g.exports=function(p){return p===0?0:p===1?1:Math.sin(p*Math.PI/2)}},7884:function(g,p,i){g.exports={In:i(20771),Out:i(34819),InOut:i(84600)}},25273:function(g){g.exports=function(p,i){return i===void 0&&(i=1),p<=0?0:p>=1?1:1/i*(1+(i*p|0))}},46113:function(g,p,i){g.exports=i(25273)},74285:function(g){g.exports=function(p,i){return i===void 0&&(i=1e-4),Math.ceil(p-i)}},97026:function(g){g.exports=function(p,i,u){return u===void 0&&(u=1e-4),Math.abs(p-i)<u}},49885:function(g){g.exports=function(p,i){return i===void 0&&(i=1e-4),Math.floor(p+i)}},35622:function(g){g.exports=function(p,i,u){return u===void 0&&(u=1e-4),p>i-u}},93195:function(g){g.exports=function(p,i,u){return u===void 0&&(u=1e-4),p<i+u}},54189:function(g,p,i){g.exports={Ceil:i(74285),Equal:i(97026),Floor:i(49885),GreaterThan:i(35622),LessThan:i(93195)}},68533:function(g,p,i){var u=i(80925),e=i(72646),l={Angle:i(72608),Distance:i(29760),Easing:i(80208),Fuzzy:i(54189),Interpolation:i(49005),Pow2:i(41657),Snap:i(46987),RandomDataGenerator:i(21283),Average:i(57635),Bernstein:i(14230),Between:i(27019),CatmullRom:i(51929),CeilTo:i(23993),Clamp:i(2543),DegToRad:i(23407),Difference:i(34320),Euler:i(41426),Factorial:i(20280),FloatBetween:i(62193),FloorTo:i(32223),FromPercent:i(53023),GetSpeed:i(41907),IsEven:i(45799),IsEvenStrict:i(16660),Linear:i(3821),MaxAdd:i(65617),Median:i(89036),MinSub:i(96448),Percent:i(82356),RadToDeg:i(33642),RandomXY:i(7192),RandomXYZ:i(43815),RandomXYZW:i(6969),Rotate:i(11747),RotateAround:i(45707),RotateAroundDistance:i(79749),RotateTo:i(20065),RoundAwayFromZero:i(40496),RoundTo:i(35789),SinCosTableGenerator:i(57955),SmootherStep:i(29817),SmoothStep:i(89989),ToXY:i(76384),TransformXY:i(37423),Within:i(47924),Wrap:i(6704),Vector2:i(17321),Vector3:i(33736),Vector4:i(37254),Matrix3:i(30230),Matrix4:i(54259),Quaternion:i(63060),RotateVec3:i(26578)};l=e(!1,l,u),g.exports=l},44825:function(g,p,i){var u=i(14230);g.exports=function(e,l){for(var o=0,t=e.length-1,s=0;s<=t;s++)o+=Math.pow(1-l,t-s)*Math.pow(l,s)*e[s]*u(t,s);return o}},92106:function(g,p,i){var u=i(51929);g.exports=function(e,l){var o=e.length-1,t=o*l,s=Math.floor(t);return e[0]===e[o]?(l<0&&(s=Math.floor(t=o*(1+l))),u(t-s,e[(s-1+o)%o],e[s],e[(s+1)%o],e[(s+2)%o])):l<0?e[0]-(u(-t,e[0],e[0],e[1],e[1])-e[0]):l>1?e[o]-(u(t-o,e[o],e[o],e[o-1],e[o-1])-e[o]):u(t-s,e[s?s-1:0],e[s],e[o<s+1?o:s+1],e[o<s+2?o:s+2])}},70183:function(g){g.exports=function(p,i,u,e,l){return function(o,t){var s=1-o;return s*s*s*t}(p,i)+function(o,t){var s=1-o;return 3*s*s*o*t}(p,u)+function(o,t){return 3*(1-o)*o*o*t}(p,e)+function(o,t){return o*o*o*t}(p,l)}},85683:function(g,p,i){var u=i(3821);g.exports=function(e,l){var o=e.length-1,t=o*l,s=Math.floor(t);return l<0?u(e[0],e[1],t):l>1?u(e[o],e[o-1],o-t):u(e[s],e[s+1>o?o:s+1],t-s)}},67372:function(g){g.exports=function(p,i,u,e){return function(l,o){var t=1-l;return t*t*o}(p,i)+function(l,o){return 2*(1-l)*l*o}(p,u)+function(l,o){return l*l*o}(p,e)}},38153:function(g,p,i){var u=i(89989);g.exports=function(e,l,o){return l+(o-l)*u(e,0,1)}},33112:function(g,p,i){var u=i(29817);g.exports=function(e,l,o){return l+(o-l)*u(e,0,1)}},49005:function(g,p,i){g.exports={Bezier:i(44825),CatmullRom:i(92106),CubicBezier:i(70183),Linear:i(85683),QuadraticBezier:i(67372),SmoothStep:i(38153),SmootherStep:i(33112)}},19865:function(g){g.exports=function(p){var i=Math.log(p)/.6931471805599453;return 1<<Math.ceil(i)}},58655:function(g){g.exports=function(p,i){return p>0&&(p&p-1)==0&&i>0&&(i&i-1)==0}},29692:function(g){g.exports=function(p){return p>0&&(p&p-1)==0}},41657:function(g,p,i){g.exports={GetNext:i(19865),IsSize:i(58655),IsValue:i(29692)}},21283:function(g,p,i){var u=new(i(69186))({initialize:function(e){e===void 0&&(e=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],e&&this.init(e)},rnd:function(){var e=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},hash:function(e){var l,o=this.n;e=e.toString();for(var t=0;t<e.length;t++)l=.02519603282416938*(o+=e.charCodeAt(t)),l-=o=l>>>0,o=(l*=o)>>>0,o+=4294967296*(l-=o);return this.n=o,23283064365386963e-26*(o>>>0)},init:function(e){typeof e=="string"?this.state(e):this.sow(e)},sow:function(e){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,e)for(var l=0;l<e.length&&e[l]!=null;l++){var o=e[l];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(e,l){return Math.floor(this.realInRange(0,l-e+1)+e)},between:function(e,l){return Math.floor(this.realInRange(0,l-e+1)+e)},realInRange:function(e,l){return this.frac()*(l-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",l="";for(l=e="";e++<36;l+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return l},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,l){return this.realInRange(e||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){return typeof e=="string"&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){for(var l=e.length-1;l>0;l--){var o=Math.floor(this.frac()*(l+1)),t=e[o];e[o]=e[l],e[l]=t}return e}});g.exports=u},12174:function(g){g.exports=function(p,i,u,e){return u===void 0&&(u=0),i===0?p:(p-=u,p=i*Math.ceil(p/i),e?(u+p)/i:u+p)}},99e3:function(g){g.exports=function(p,i,u,e){return u===void 0&&(u=0),i===0?p:(p-=u,p=i*Math.floor(p/i),e?(u+p)/i:u+p)}},4103:function(g){g.exports=function(p,i,u,e){return u===void 0&&(u=0),i===0?p:(p-=u,p=i*Math.round(p/i),e?(u+p)/i:u+p)}},46987:function(g,p,i){g.exports={Ceil:i(12174),Floor:i(99e3),To:i(4103)}},15277:function(g,p,i){var u=new(i(69186))({initialize:function(e){this.pluginManager=e,this.game=e.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=u},32122:function(g){var p={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};p.Global.push("facebook"),g.exports=p},46236:function(g){var p={},i={},u={register:function(e,l,o,t){t===void 0&&(t=!1),p[e]={plugin:l,mapping:o,custom:t}},registerCustom:function(e,l,o,t){i[e]={plugin:l,mapping:o,data:t}},hasCore:function(e){return p.hasOwnProperty(e)},hasCustom:function(e){return i.hasOwnProperty(e)},getCore:function(e){return p[e]},getCustom:function(e){return i[e]},getCustomClass:function(e){return i.hasOwnProperty(e)?i[e].plugin:null},remove:function(e){p.hasOwnProperty(e)&&delete p[e]},removeCustom:function(e){i.hasOwnProperty(e)&&delete i[e]},destroyCorePlugins:function(){for(var e in p)p.hasOwnProperty(e)&&delete p[e]},destroyCustomPlugins:function(){for(var e in i)i.hasOwnProperty(e)&&delete i[e]}};g.exports=u},87037:function(g,p,i){var u=i(69186),e=i(24496),l=i(26729),o=i(25028),t=i(78757),s=i(66642),n=i(25738),r=i(46236),h=i(63083),a=new u({Extends:l,initialize:function(c){l.call(this),this.game=c,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],c.isBooted?this.boot():c.events.once(e.BOOT,this.boot,this)},boot:function(){var c,d,f,v,m,x,T,y=this.game.config,E=y.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),c=0;c<E.length;c++)d=E[c],f=n(d,"key",null),v=n(d,"plugin",null),m=n(d,"start",!1),x=n(d,"mapping",null),T=n(d,"data",null),f&&(v?this.install(f,v,m,x,T):console.warn("Missing `plugin` for key: "+f));for(E=(E=y.installScenePlugins).concat(this._pendingScene),c=0;c<E.length;c++)d=E[c],f=n(d,"key",null),v=n(d,"plugin",null),x=n(d,"mapping",null),f&&(v?this.installScenePlugin(f,v,x):console.warn("Missing `plugin` for key: "+f));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(e.DESTROY,this.destroy,this)},addToScene:function(c,d,f){var v,m,x,T=this.game,y=c.scene,E=c.settings.map,w=c.settings.isBooted;for(v=0;v<d.length;v++)T[m=d[v]]?(c[m]=T[m],E.hasOwnProperty(m)&&(y[E[m]]=c[m])):m==="game"&&E.hasOwnProperty(m)&&(y[E[m]]=T);for(var R=0;R<f.length;R++)for(x=f[R],v=0;v<x.length;v++)if(m=x[v],r.hasCore(m)){var C=r.getCore(m),A=C.mapping,S=new C.plugin(y,this,A);c[A]=S,C.custom?y[A]=S:E.hasOwnProperty(A)&&(y[E[A]]=S),w&&S.boot()}for(x=this.plugins,v=0;v<x.length;v++){var b=x[v];b.mapping&&(y[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var c=this.game.config.defaultPlugins;return c.concat(this.scenePlugins)},installScenePlugin:function(c,d,f,v,m){if(m===void 0&&(m=!1),typeof d=="function"){if(r.hasCore(c)){if(!m&&r.hasCore(c))return void console.warn("Scene Plugin key in use: "+c)}else r.register(c,d,f,!0),this.scenePlugins.push(c);if(v){var x=new d(v,this,c);v.sys[c]=x,f&&f!==""&&(v[f]=x),x.boot()}}else console.warn("Invalid Scene Plugin: "+c)},install:function(c,d,f,v,m){if(f===void 0&&(f=!1),v===void 0&&(v=null),m===void 0&&(m=null),typeof d!="function")return console.warn("Invalid Plugin: "+c),null;if(r.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(v!==null&&(f=!0),this.game.isBooted){if(r.registerCustom(c,d,v,m),f)return this.start(c)}else this._pendingGlobal.push({key:c,plugin:d,start:f,mapping:v,data:m});return null},getIndex:function(c){for(var d=this.plugins,f=0;f<d.length;f++)if(d[f].key===c)return f;return-1},getEntry:function(c){var d=this.getIndex(c);if(d!==-1)return this.plugins[d]},isActive:function(c){var d=this.getEntry(c);return d&&d.active},start:function(c,d){d===void 0&&(d=c);var f=this.getEntry(d);return f&&!f.active?(f.active=!0,f.plugin.start()):f||(f=this.createEntry(c,d)),f?f.plugin:null},createEntry:function(c,d){var f=r.getCustom(c);if(f){var v=new f.plugin(this);f={key:d,plugin:v,active:!0,mapping:f.mapping,data:f.data},this.plugins.push(f),v.init(f.data),v.start()}return f},stop:function(c){var d=this.getEntry(c);return d&&d.active&&(d.active=!1,d.plugin.stop()),this},get:function(c,d){d===void 0&&(d=!0);var f=this.getEntry(c);if(f)return f.plugin;var v=this.getClass(c);return v&&d?(f=this.createEntry(c,c))?f.plugin:null:v||null},getClass:function(c){return r.getCustomClass(c)},removeGlobalPlugin:function(c){var d=this.getEntry(c);d&&h(this.plugins,d),r.removeCustom(c)},removeScenePlugin:function(c){h(this.scenePlugins,c),r.remove(c)},registerGameObject:function(c,d,f){return d&&s.register(c,d),f&&t.register(c,f),this},removeGameObject:function(c,d,f){return d===void 0&&(d=!0),f===void 0&&(f=!0),d&&s.remove(c),f&&t.remove(c),this},registerFileType:function(c,d,f){o.register(c,d),f&&f.sys.load&&(f.sys.load[c]=d)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();r.destroyCustomPlugins(),this.game.noReturn&&r.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});g.exports=a},76719:function(g,p,i){var u=i(15277),e=i(69186),l=i(12063),o=new e({Extends:u,initialize:function(t,s,n){u.call(this,s),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(l.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=o},25753:function(g,p,i){g.exports={BasePlugin:i(15277),DefaultPlugins:i(32122),PluginCache:i(46236),PluginManager:i(87037),ScenePlugin:i(76719)}},5305:function(){Array.prototype.forEach||(Array.prototype.forEach=function(g){if(this==null)throw new TypeError;var p=Object(this),i=p.length>>>0;if(typeof g!="function")throw new TypeError;for(var u=arguments.length>=2?arguments[1]:void 0,e=0;e<i;e++)e in p&&g.call(u,p[e],e,p)})},51238:function(){Array.isArray||(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"})},91124:function(){(function(){function g(p){p&&(p.setTargetAtTime||(p.setTargetAtTime=p.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var p=this.internal_createGain();return g(p.gain),p},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(p){var i=p?this.internal_createDelay(p):this.internal_createDelay();return g(i.delayTime),i},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var p=this.internal_createBufferSource();return p.start?(p.internal_start=p.start,p.start=function(i,u,e){e!==void 0?p.internal_start(i||0,u,e):p.internal_start(i||0,u||0)}):p.start=function(i,u,e){u||e?this.noteGrainOn(i||0,u,e):this.noteOn(i||0)},p.stop?(p.internal_stop=p.stop,p.stop=function(i){p.internal_stop(i||0)}):p.stop=function(i){this.noteOff(i||0)},g(p.playbackRate),p},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var p=this.internal_createDynamicsCompressor();return g(p.threshold),g(p.knee),g(p.ratio),g(p.reduction),g(p.attack),g(p.release),p},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var p=this.internal_createBiquadFilter();return g(p.frequency),g(p.detune),g(p.Q),g(p.gain),p},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var p=this.internal_createOscillator();return p.start?(p.internal_start=p.start,p.start=function(i){p.internal_start(i||0)}):p.start=function(i){this.noteOn(i||0)},p.stop?(p.internal_stop=p.stop,p.stop=function(i){p.internal_stop(i||0)}):p.stop=function(i){this.noteOff(i||0)},p.setPeriodicWave||(p.setPeriodicWave=p.setWaveTable),g(p.frequency),g(p.detune),p})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)})()},16765:function(){Math.trunc||(Math.trunc=function(g){return g<0?Math.ceil(g):Math.floor(g)})},15696:function(){if(typeof window.Uint32Array!="function"&&typeof window.Uint32Array!="object"){var g=function(p){var i=new Array;window[p]=function(u){if(typeof u=="number"){Array.call(this,u),this.length=u;for(var e=0;e<this.length;e++)this[e]=0}else for(Array.call(this,u.length),this.length=u.length,e=0;e<this.length;e++)this[e]=u[e]},window[p].prototype=i,window[p].constructor=window[p]};g("Float32Array"),g("Uint32Array"),g("Uint16Array"),g("Int16Array"),g("ArrayBuffer")}},62778:function(){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},76417:function(g,p,i){i(5305),i(51238),i(91124),i(62778),i(16765),i(9667),i(57937),i(15696)},9667:function(){(function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},"now"in window.performance==0){var g=Date.now();performance.timing&&performance.timing.navigationStart&&(g=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-g}}})()},57937:function(){for(var g=Date.now(),p=["ms","moz","webkit","o"],i=0;i<p.length&&!window.requestAnimationFrame;i++)window.requestAnimationFrame=window[p[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[i]+"CancelAnimationFrame"]||window[p[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(u){if(typeof u!="function")throw new TypeError(u+"is not a function");var e=Date.now(),l=16+g-e;return l<0&&(l=0),g=e,setTimeout(function(){g=Date.now(),u(performance.now())},l)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(u){clearTimeout(u)})},87626:function(g){g.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29718:function(g){g.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},65125:function(g,p,i){var u=i(26088),e=i(25492),l=i(69186),o=i(11318),t=i(26729),s=i(37710),n=i(67833),r=i(48958),h=i(61632),a=i(9329),c=new l({Extends:t,initialize:function(d){t.call(this);var f=d.config;this.config={clearBeforeRender:f.clearBeforeRender,backgroundColor:f.backgroundColor,antialias:f.antialias,roundPixels:f.roundPixels},this.game=d,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=d.canvas;var v={alpha:d.config.transparent,desynchronized:d.config.desynchronized};this.gameContext=f.context?f.context:this.gameCanvas.getContext("2d",v),this.currentContext=this.gameContext,this.antialias=d.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var d=this.game,f=d.scale.baseSize;this.width=f.width,this.height=f.height,this.isBooted=!0,d.scale.on(r.RESIZE,this.onResize,this),this.resize(f.width,f.height)},onResize:function(d,f){f.width===this.width&&f.height===this.height||this.resize(f.width,f.height)},resize:function(d,f){this.width=d,this.height=f,this.emit(s.RESIZE,d,f)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(d){return this.currentContext.globalCompositeOperation=d,this},setContext:function(d){return this.currentContext=d||this.gameContext,this},setAlpha:function(d){return this.currentContext.globalAlpha=d,this},preRender:function(){var d=this.gameContext,f=this.config,v=this.width,m=this.height;d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),f.clearBeforeRender&&(d.clearRect(0,0,v,m),f.transparent||(d.fillStyle=f.backgroundColor.rgba,d.fillRect(0,0,v,m))),d.save(),this.drawCount=0,this.emit(s.PRE_RENDER)},render:function(d,f,v){var m=f.length;this.emit(s.RENDER,d,v);var x=v.x,T=v.y,y=v.width,E=v.height,w=v.renderToTexture?v.context:d.sys.context;w.save(),this.game.scene.customViewports&&(w.beginPath(),w.rect(x,T,y,E),w.clip()),this.currentContext=w;var R=v.mask;R&&R.preRenderCanvas(this,null,v._maskCamera),v.transparent||(w.fillStyle=v.backgroundColor.rgba,w.fillRect(x,T,y,E)),w.globalAlpha=v.alpha,w.globalCompositeOperation="source-over",this.drawCount+=m,v.renderToTexture&&v.emit(u.PRE_RENDER,v),v.matrix.copyToContext(w);for(var C=0;C<m;C++){var A=f[C];A.mask&&A.mask.preRenderCanvas(this,A,v),A.renderCanvas(this,A,v),A.mask&&A.mask.postRenderCanvas(this,A,v)}w.setTransform(1,0,0,1,0,0),w.globalCompositeOperation="source-over",w.globalAlpha=1,v.flashEffect.postRenderCanvas(w),v.fadeEffect.postRenderCanvas(w),v.dirty=!1,R&&R.postRenderCanvas(this),w.restore(),v.renderToTexture&&(v.emit(u.POST_RENDER,v),v.renderToGame&&d.sys.context.drawImage(v.canvas,x,T))},postRender:function(){this.gameContext.restore(),this.emit(s.POST_RENDER);var d=this.snapshotState;d.callback&&(e(this.gameCanvas,d),d.callback=null)},snapshotCanvas:function(d,f,v,m,x,T,y,E,w){v===void 0&&(v=!1),this.snapshotArea(m,x,T,y,f,E,w);var R=this.snapshotState;return R.getPixel=v,e(this.canvas,R),R.callback=null,this},snapshot:function(d,f,v){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,d,f,v)},snapshotArea:function(d,f,v,m,x,T,y){var E=this.snapshotState;return E.callback=x,E.type=T,E.encoder=y,E.getPixel=!1,E.x=d,E.y=f,E.width=Math.min(v,this.gameCanvas.width),E.height=Math.min(m,this.gameCanvas.height),this},snapshotPixel:function(d,f,v){return this.snapshotArea(d,f,1,1,v),this.snapshotState.getPixel=!0,this},batchSprite:function(d,f,v,m){var x=v.alpha*d.alpha;if(x!==0){var T=this.currentContext,y=this._tempMatrix1,E=this._tempMatrix2,w=f.canvasData,R=w.x,C=w.y,A=f.cutWidth,S=f.cutHeight,b=f.customPivot,_=f.source.resolution,P=d.displayOriginX,D=d.displayOriginY,O=-P+f.x,F=-D+f.y;if(d.isCropped){var N=d._crop;N.flipX===d.flipX&&N.flipY===d.flipY||f.updateCropUVs(N,d.flipX,d.flipY),A=N.cw,S=N.ch,R=N.cx,C=N.cy,O=-P+N.x,F=-D+N.y,d.flipX&&(O>=0?O=-(O+A):O<0&&(O=Math.abs(O)-A)),d.flipY&&(F>=0?F=-(F+S):F<0&&(F=Math.abs(F)-S))}var k=1,L=1;d.flipX&&(b||(O+=-f.realWidth+2*P),k=-1),d.flipY&&(b||(F+=-f.realHeight+2*D),L=-1),E.applyITRS(d.x,d.y,d.rotation,d.scaleX*k,d.scaleY*L),y.copyFrom(v.matrix),m?(y.multiplyWithOffset(m,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),E.e=d.x,E.f=d.y):(E.e-=v.scrollX*d.scrollFactorX,E.f-=v.scrollY*d.scrollFactorY),y.multiply(E),T.save(),y.setToContext(T),T.globalCompositeOperation=this.blendModes[d.blendMode],T.globalAlpha=x,T.imageSmoothingEnabled=!(!this.antialias||f.source.scaleMode),d.mask&&d.mask.preRenderCanvas(this,d,v),T.drawImage(f.source.image,R,C,A,S,O,F,A/_,S/_),d.mask&&d.mask.postRenderCanvas(this,d,v),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});g.exports=c},67833:function(g,p,i){var u=i(87626),e=i(23404);g.exports=function(){var l=[],o=e.supportNewBlendModes,t="source-over";return l[u.NORMAL]=t,l[u.ADD]="lighter",l[u.MULTIPLY]=o?"multiply":t,l[u.SCREEN]=o?"screen":t,l[u.OVERLAY]=o?"overlay":t,l[u.DARKEN]=o?"darken":t,l[u.LIGHTEN]=o?"lighten":t,l[u.COLOR_DODGE]=o?"color-dodge":t,l[u.COLOR_BURN]=o?"color-burn":t,l[u.HARD_LIGHT]=o?"hard-light":t,l[u.SOFT_LIGHT]=o?"soft-light":t,l[u.DIFFERENCE]=o?"difference":t,l[u.EXCLUSION]=o?"exclusion":t,l[u.HUE]=o?"hue":t,l[u.SATURATION]=o?"saturation":t,l[u.COLOR]=o?"color":t,l[u.LUMINOSITY]=o?"luminosity":t,l[u.ERASE]="destination-out",l[u.SOURCE_IN]="source-in",l[u.SOURCE_OUT]="source-out",l[u.SOURCE_ATOP]="source-atop",l[u.DESTINATION_OVER]="destination-over",l[u.DESTINATION_IN]="destination-in",l[u.DESTINATION_OUT]="destination-out",l[u.DESTINATION_ATOP]="destination-atop",l[u.LIGHTER]="lighter",l[u.COPY]="copy",l[u.XOR]="xor",l}},14437:function(g,p,i){var u=i(3142);g.exports=function(e,l,o,t,s){var n=t.alpha*o.alpha;if(n<=0)return!1;var r=u(o,t,s).calc;return l.globalCompositeOperation=e.blendModes[o.blendMode],l.globalAlpha=n,l.save(),r.setToContext(l),l.imageSmoothingEnabled=!(!e.antialias||o.frame&&o.frame.source.scaleMode),!0}},90581:function(g){g.exports="postrender"},1944:function(g){g.exports="prerender"},2567:function(g){g.exports="render"},45864:function(g){g.exports="resize"},37710:function(g,p,i){g.exports={POST_RENDER:i(90581),PRE_RENDER:i(1944),RENDER:i(2567),RESIZE:i(45864)}},25492:function(g,p,i){var u=i(55579),e=i(13499),l=i(25738);g.exports=function(o,t){var s=l(t,"callback"),n=l(t,"type","image/png"),r=l(t,"encoder",.92),h=Math.abs(Math.round(l(t,"x",0))),a=Math.abs(Math.round(l(t,"y",0))),c=l(t,"width",o.width),d=l(t,"height",o.height);if(l(t,"getPixel",!1)){var f=o.getContext("2d").getImageData(h,a,1,1).data;s.call(null,new e(f[0],f[1],f[2],f[3]/255))}else if(h!==0||a!==0||c!==o.width||d!==o.height){var v=u.createWebGL(this,c,d);v.getContext("2d").drawImage(o,h,a,c,d,0,0,c,d);var m=new Image;m.onerror=function(){s.call(null),u.remove(v)},m.onload=function(){s.call(null,m),u.remove(v)},m.src=v.toDataURL(n,r)}else{var x=new Image;x.onerror=function(){s.call(null)},x.onload=function(){s.call(null,x)},x.src=o.toDataURL(n,r)}}},75913:function(g,p,i){var u=i(55579),e=i(13499),l=i(25738);g.exports=function(o,t){var s=o.getContext("experimental-webgl"),n=l(t,"callback"),r=l(t,"type","image/png"),h=l(t,"encoder",.92),a=l(t,"x",0),c=l(t,"y",0),d=l(t,"getPixel",!1),f=l(t,"isFramebuffer",!1),v=f?l(t,"bufferWidth",1):s.drawingBufferWidth,m=f?l(t,"bufferHeight",1):s.drawingBufferHeight;if(d){var x=new Uint8Array(4),T=f?c:m-c;s.readPixels(a,T,1,1,s.RGBA,s.UNSIGNED_BYTE,x),n.call(null,new e(x[0],x[1],x[2],x[3]/255))}else{var y=l(t,"width",v),E=l(t,"height",m),w=new Uint8Array(y*E*4);s.readPixels(a,m-c-E,y,E,s.RGBA,s.UNSIGNED_BYTE,w);for(var R=u.createWebGL(this,y,E),C=R.getContext("2d"),A=C.getImageData(0,0,y,E),S=A.data,b=0;b<E;b++)for(var _=0;_<y;_++){var P=4*((E-b-1)*y+_),D=4*(b*y+_);S[D+0]=w[P+0],S[D+1]=w[P+1],S[D+2]=w[P+2],S[D+3]=w[P+3]}C.putImageData(A,0,0);var O=new Image;O.onerror=function(){n.call(null),u.remove(R)},O.onload=function(){n.call(null,O),u.remove(R)},O.src=R.toDataURL(r,h)}}},37107:function(g,p,i){var u=i(69186),e=i(46098),l=i(21342),o=i(18923),t=i(48623),s=i(63174),n=i(14869),r=i(26159),h=i(67239),a=i(57434),c=i(21898),d=new u({initialize:function(f){this.game=f.game,this.renderer=f,this.classes=new l([[e.UTILITY_PIPELINE,c],[e.MULTI_PIPELINE,n],[e.BITMAPMASK_PIPELINE,o],[e.SINGLE_PIPELINE,a],[e.ROPE_PIPELINE,h],[e.LIGHT_PIPELINE,s],[e.POINTLIGHT_PIPELINE,r],[e.GRAPHICS_PIPELINE,t]]),this.postPipelineClasses=new l,this.pipelines=new l,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(f){var v,m,x=this,T=this.game;if(this.classes.each(function(E,w){v=x.add(E,new w({game:T})),E===e.UTILITY_PIPELINE&&(x.UTILITY_PIPELINE=v,x.fullFrame1=v.fullFrame1,x.fullFrame2=v.fullFrame2,x.halfFrame1=v.halfFrame1,x.halfFrame2=v.halfFrame2)}),this.MULTI_PIPELINE=this.get(e.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(e.BITMAPMASK_PIPELINE),f)for(m in f){var y=f[m];(v=new y(T)).isPostFX?this.postPipelineClasses.set(m,y):this.has(m)||(this.classes.set(m,y),this.add(m,v))}},add:function(f,v){if(!v.isPostFX){var m=this.pipelines,x=this.renderer;return m.has(f)?console.warn("Pipeline exists: "+f):(v.name=f,v.manager=this,m.set(f,v)),v.hasBooted||v.boot(),x.width!==0&&x.height!==0&&v.resize(x.width,x.height),v}console.warn(f+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(f,v){this.postPipelineClasses.has(f)||this.postPipelineClasses.set(f,v)},flush:function(){this.current&&this.current.flush()},has:function(f){var v=this.pipelines;return typeof f=="string"?v.has(f):!!v.contains(f)},get:function(f){var v=this.pipelines;return typeof f=="string"?v.get(f):v.contains(f)?f:void 0},getPostPipeline:function(f,v){var m,x=this.postPipelineClasses;if(typeof f=="string"?m=x.get(f):typeof f=="function"?x.contains(f)&&(m=f):typeof f=="object"&&(m=x.get(f.name)),m){var T=new m(this.game);return v&&(T.gameObject=v),T}},remove:function(f,v,m){v===void 0&&(v=!0),m===void 0&&(m=!0),this.pipelines.delete(f),v&&this.classes.delete(f),m&&this.postPipelineClasses.delete(f)},set:function(f,v,m){if(!f.isPostFX)return this.isCurrent(f,m)||(this.flush(),this.current&&this.current.unbind(),this.current=f,f.bind(m)),f.updateProjectionMatrix(),f.onBind(v),f},preBatch:function(f){if(f.hasPostPipeline){this.flush();for(var v=f.postPipelines,m=v.length-1;m>=0;m--){var x=v[m];x.active&&x.preBatch(f)}}},postBatch:function(f){if(f.hasPostPipeline){this.flush();for(var v=f.postPipelines,m=0;m<v.length;m++){var x=v[m];x.active&&x.postBatch(f)}}},preBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var v=f.postPipelines,m=v.length-1;m>=0;m--){var x=v[m];x.active&&x.preBatch(f)}}},postBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var v=f.postPipelines,m=0;m<v.length;m++){var x=v[m];x.active&&x.postBatch(f)}}},isCurrent:function(f,v){var m=this.renderer,x=this.current;return x&&!v&&(v=x.currentShader),!(x!==f||v.program!==m.currentProgram)},copyFrame:function(f,v,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(f,v,m,x,T),this},copyToGame:function(f){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(f),this},drawFrame:function(f,v,m,x){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(f,v,m,x),this},blendFrames:function(f,v,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(f,v,m,x,T),this},blendFramesAdditive:function(f,v,m,x,T){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(f,v,m,x,T),this},clearFrame:function(f,v){return this.UTILITY_PIPELINE.clearFrame(f,v),this},blitFrame:function(f,v,m,x,T,y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(f,v,m,x,T,y),this},copyFrameRect:function(f,v,m,x,T,y,E,w){return this.UTILITY_PIPELINE.copyFrameRect(f,v,m,x,T,y,E,w),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(f){return this.UTILITY_PIPELINE.bind(f)},rebind:function(f){f===void 0&&this.previous&&(f=this.previous);var v=this.renderer,m=v.gl;m.disable(m.DEPTH_TEST),m.disable(m.CULL_FACE),v.hasActiveStencilMask()?m.clear(m.DEPTH_BUFFER_BIT):(m.disable(m.STENCIL_TEST),m.clear(m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT)),m.viewport(0,0,v.width,v.height),v.currentProgram=null,v.setBlendMode(0,!0);var x=this.pipelines.entries;for(var T in x)x[T].glReset=!0;f&&(this.current=f,f.rebind()),v.resetTextures()},clear:function(){var f=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,f.currentProgram=null,f.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});g.exports=d},50666:function(g,p,i){var u=i(69186),e=i(37710),l=new u({initialize:function(o,t,s,n,r,h,a){n===void 0&&(n=1),r===void 0&&(r=0),h===void 0&&(h=!0),a===void 0&&(a=!1),this.renderer=o,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=n,this.minFilter=r,this.autoClear=h,this.autoResize=!1,this.resize(t,s),a&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(e.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(e.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,t){var s=o*this.scale,n=t*this.scale;if(s!==this.width||n!==this.height){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),o*=this.scale,t*=this.scale,(o=Math.round(o))<=0&&(o=1),(t=Math.round(t))<=0&&(t=1),this.texture=r.createTextureFromSource(null,o,t,this.minFilter),this.framebuffer=r.createFramebuffer(o,t,this.texture,!1),this.width=o,this.height=t}return this},bind:function(o,t,s){if(o===void 0&&(o=!1),o&&this.renderer.flush(),t&&s&&this.resize(t,s),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,t=o.gl;o.pushFramebuffer(this.framebuffer),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var t=this.renderer;return o&&t.flush(),t.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(e.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});g.exports=l},64564:function(g){function p(i){for(var u="",e=0;e<i;++e)e>0&&(u+=`
else `),e<i-1&&(u+="if(test == "+e+".0){}");return u}g.exports={getTintFromFloats:function(i,u,e,l){return((255&(255*l|0))<<24|(255&(255*i|0))<<16|(255&(255*u|0))<<8|255&(255*e|0))>>>0},getTintAppendFloatAlpha:function(i,u){return((255&(255*u|0))<<24|i)>>>0},getTintAppendFloatAlphaAndSwap:function(i,u){return((255&(255*u|0))<<24|(255&(0|i))<<16|(255&(i>>8|0))<<8|255&(i>>16|0))>>>0},getFloatsFromUintRGB:function(i){return[(255&(i>>16|0))/255,(255&(i>>8|0))/255,(255&(0|i))/255]},checkShaderMax:function(i,u){u&&u!==-1||(u=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS));for(var e=i.createShader(i.FRAGMENT_SHADER),l=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var o=l.replace(/%forloop%/gi,p(u));if(i.shaderSource(e,o),i.compileShader(e),i.getShaderParameter(e,i.COMPILE_STATUS))break;u=u/2|0}return u},parseFragmentShaderMaxTextures:function(i,u){if(!i)return"";for(var e="",l=0;l<u;l++)l>0&&(e+=`
	else `),l<u-1&&(e+="if (outTexId < "+l+".5)"),e+=`
	{`,e+=`
		texture = texture2D(uMainSampler[`+l+"], outTexCoord);",e+=`
	}`;return(i=i.replace(/%count%/gi,u.toString())).replace(/%forloop%/gi,e)}}},89262:function(g,p,i){var u=i(69186),e=i(12229),l=i(26729),o=i(42789),t=i(25738),s=i(54259),n=i(37710),r=i(50666),h=i(64564),a=i(86384),c=new u({Extends:l,initialize:function(d){l.call(this);var f=d.game,v=f.renderer,m=v.gl;this.name=t(d,"name","WebGLPipeline"),this.game=f,this.renderer=v,this.manager,this.gl=m,this.view=f.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=t(d,"topology",m.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=t(d,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=d,this.glReset=!1},boot:function(){var d,f=this.gl,v=this.config,m=this.renderer;this.isPostFX||(this.projectionMatrix=new s().identity());var x=this.renderTargets,T=t(v,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var y=m.width,E=m.height;if(typeof T=="number")for(d=0;d<T;d++)x.push(new r(m,y,E,1,0,!0));else if(Array.isArray(T))for(d=0;d<T.length;d++){var w=t(T[d],"scale",1),R=t(T[d],"minFilter",0),C=t(T[d],"autoClear",1);x.push(new r(m,y,E,w,R,C))}x.length&&(this.currentRenderTarget=x[0]),this.setShadersFromConfig(v);var A=this.shaders,S=0;for(d=0;d<A.length;d++)A[d].vertexSize>S&&(S=A[d].vertexSize);var b=t(v,"batchSize",m.config.batchSize);this.vertexCapacity=6*b;var _=new ArrayBuffer(this.vertexCapacity*S);this.vertexData=_,this.bytes=new Uint8Array(_),this.vertexViewF32=new Float32Array(_),this.vertexViewU32=new Uint32Array(_);var P=t(v,"vertices",null);for(P?(this.vertexViewF32.set(P),this.vertexBuffer=m.createVertexBuffer(_,f.STATIC_DRAW)):this.vertexBuffer=m.createVertexBuffer(_.byteLength,f.DYNAMIC_DRAW),this.setVertexBuffer(),d=A.length-1;d>=0;d--)A[d].rebind();this.hasBooted=!0,m.on(n.RESIZE,this.resize,this),m.on(n.PRE_RENDER,this.onPreRender,this),m.on(n.RENDER,this.onRender,this),m.on(n.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,f){var v=this.renderer;return d===this.currentShader&&v.currentProgram===this.currentShader.program||(this.flush(),v.resetTextures(),this.setVertexBuffer()&&!f&&(f=!0),d.bind(f,!1),this.currentShader=d),this},getShaderByName:function(d){for(var f=this.shaders,v=0;v<f.length;v++)if(f[v].name===d)return f[v]},setShadersFromConfig:function(d){var f,v=this.shaders,m=this.renderer;for(f=0;f<v.length;f++)v[f].destroy();var x="vertShader",T="fragShader",y="attributes",E=t(d,x,null),w=h.parseFragmentShaderMaxTextures(t(d,T,null),m.maxTextures),R=t(d,y,null),C=t(d,"shaders",[]),A=C.length;if(A===0)E&&w&&(this.shaders=[new a(this,"default",E,w,e(R))]);else{var S=[];for(f=0;f<A;f++){var b=C[f],_=t(b,"name","default"),P=t(b,x,E),D=h.parseFragmentShaderMaxTextures(t(b,T,w),m.maxTextures),O=t(b,y,R);P&&D&&S.push(new a(this,_,P,D,e(O)))}this.shaders=S}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(d,f){return f===void 0&&(f=d.frame),this.currentUnit=this.renderer.setTextureSource(f.source),this.currentUnit},shouldFlush:function(d){return d===void 0&&(d=0),this.vertexCount+d>this.vertexCapacity},resize:function(d,f){d===this.width&&f===this.height||this.flush(),this.width=d,this.height=f;for(var v=this.renderTargets,m=0;m<v.length;m++)v[m].resize(d,f);return this.setProjectionMatrix(d,f),this.emit(o.RESIZE,d,f,this),this.onResize(d,f),this},setProjectionMatrix:function(d,f){var v=this.projectionMatrix;if(!v)return this;this.projectionWidth=d,this.projectionHeight=f,v.ortho(0,d,f,0,-1e3,1e3);for(var m=this.shaders,x="uProjectionMatrix",T=0;T<m.length;T++){var y=m[T];y.hasUniform(x)&&(y.resetUniform(x),y.setMatrix4fv(x,!1,v.val,y))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var d=this.renderer.projectionWidth,f=this.renderer.projectionHeight;this.projectionWidth===d&&this.projectionHeight===f||this.setProjectionMatrix(d,f)}},bind:function(d){if(d===void 0&&(d=this.currentShader),this.glReset)return this.rebind(d);var f=this.setVertexBuffer();return d.bind(f),this.currentShader=d,this.emit(o.BIND,this,d),this.onActive(d),this},rebind:function(d){this.setVertexBuffer();for(var f=this.shaders,v=f.length-1;v>=0;v--){var m=f[v].rebind();d&&m!==d||(this.currentShader=m)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var d=this.gl,f=this.vertexBuffer;return d.getParameter(d.ARRAY_BUFFER_BINDING)!==f&&(d.bindBuffer(d.ARRAY_BUFFER,f),!0)},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){if(d===void 0&&(d=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,d),this.onBeforeFlush(d);var f=this.gl,v=this.vertexCount,m=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),v===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,v*m)),f.drawArrays(this.topology,0,v)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,d),this.onAfterFlush(d)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,f,v,m,x,T,y){var E=this.vertexViewF32,w=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++R]=d,E[++R]=f,E[++R]=v,E[++R]=m,E[++R]=x,E[++R]=T,w[++R]=y,this.vertexCount++},batchQuad:function(d,f,v,m,x,T,y,E,w,R,C,A,S,b,_,P,D,O,F,N){N===void 0&&(N=this.currentUnit);var k=!1;return this.shouldFlush(6)&&(this.flush(),k=!0,N=this.setTexture2D(F)),this.batchVert(f,v,R,C,N,O,b),this.batchVert(m,x,R,S,N,O,P),this.batchVert(T,y,A,S,N,O,D),this.batchVert(f,v,R,C,N,O,b),this.batchVert(T,y,A,S,N,O,D),this.batchVert(E,w,A,C,N,O,_),this.onBatch(d),k},batchTri:function(d,f,v,m,x,T,y,E,w,R,C,A,S,b,_,P,D){D===void 0&&(D=this.currentUnit);var O=!1;return this.shouldFlush(3)&&(this.flush(),O=!0,D=this.setTexture2D(P)),this.batchVert(f,v,E,w,D,_,A),this.batchVert(m,x,E,C,D,_,S),this.batchVert(T,y,R,C,D,_,b),this.onBatch(d),O},drawFillRect:function(d,f,v,m,x,T,y,E){y===void 0&&(y=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),d=Math.floor(d),f=Math.floor(f);var w=Math.floor(d+v),R=Math.floor(f+m),C=this.setTexture2D(y),A=h.getTintAppendFloatAlphaAndSwap(x,T),S=0,b=1;E&&(S=1,b=0),this.batchQuad(null,d,f,d,R,w,R,w,f,0,S,1,b,A,A,A,A,0,y,C)},setTexture2D:function(d){return d===void 0&&(d=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(d),this.currentUnit},bindTexture:function(d,f){f===void 0&&(f=0);var v=this.gl;return v.activeTexture(v.TEXTURE0+f),v.bindTexture(v.TEXTURE_2D,d),this},bindRenderTarget:function(d,f){return this.bindTexture(d.texture,f)},setTime:function(d){return this.set1f(d,this.game.loop.getDuration()),this},set1f:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set1f(d,f),this},set2f:function(d,f,v,m){return m===void 0&&(m=this.currentShader),m.set2f(d,f,v),this},set3f:function(d,f,v,m,x){return x===void 0&&(x=this.currentShader),x.set3f(d,f,v,m),this},set4f:function(d,f,v,m,x,T){return T===void 0&&(T=this.currentShader),T.set4f(d,f,v,m,x),this},set1fv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set1fv(d,f),this},set2fv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set2fv(d,f),this},set3fv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set3fv(d,f),this},set4fv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set4fv(d,f),this},set1iv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set1iv(d,f),this},set2iv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set2iv(d,f),this},set3iv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set3iv(d,f),this},set4iv:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set4iv(d,f),this},set1i:function(d,f,v){return v===void 0&&(v=this.currentShader),v.set1i(d,f),this},set2i:function(d,f,v,m){return m===void 0&&(m=this.currentShader),m.set2i(d,f,v),this},set3i:function(d,f,v,m,x){return x===void 0&&(x=this.currentShader),x.set3i(d,f,v,m),this},set4i:function(d,f,v,m,x,T){return T===void 0&&(T=this.currentShader),T.set4i(d,f,v,m,x),this},setMatrix2fv:function(d,f,v,m){return m===void 0&&(m=this.currentShader),m.setMatrix2fv(d,f,v),this},setMatrix3fv:function(d,f,v,m){return m===void 0&&(m=this.currentShader),m.setMatrix3fv(d,f,v),this},setMatrix4fv:function(d,f,v,m){return m===void 0&&(m=this.currentShader),m.setMatrix4fv(d,f,v),this},destroy:function(){var d;this.emit(o.DESTROY,this);var f=this.shaders;for(d=0;d<f.length;d++)f[d].destroy();var v=this.renderTargets;for(d=0;d<v.length;d++)v[d].destroy();this.gl.deleteBuffer(this.vertexBuffer);var m=this.renderer;return m.off(n.RESIZE,this.resize,this),m.off(n.PRE_RENDER,this.onPreRender,this),m.off(n.RENDER,this.onRender,this),m.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});g.exports=c},58410:function(g,p,i){var u=i(63083),e=i(26088),l=i(69186),o=i(11318),t=i(26729),s=i(37710),n=i(24496),r=i(58655),h=i(54259),a=i(45733),c=i(37107),d=i(50666),f=i(48958),v=i(61632),m=i(64564),x=i(75913),T=new l({Extends:t,initialize:function(y){t.call(this);var E=y.config,w={alpha:E.transparent,desynchronized:E.desynchronized,depth:!1,antialias:E.antialiasGL,premultipliedAlpha:E.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:E.failIfMajorPerformanceCaveat,powerPreference:E.powerPreference,preserveDrawingBuffer:E.preserveDrawingBuffer};this.config={clearBeforeRender:E.clearBeforeRender,antialias:E.antialias,backgroundColor:E.backgroundColor,contextCreation:w,roundPixels:E.roundPixels,maxTextures:E.maxTextures,maxTextureSize:E.maxTextureSize,batchSize:E.batchSize,maxLights:E.maxLights,mipmapFilter:E.mipmapFilter},this.game=y,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=y.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(y){var E,w=this.game,R=this.canvas,C=y.backgroundColor;if(!(E=w.config.context?w.config.context:R.getContext("webgl",y.contextCreation)||R.getContext("experimental-webgl",y.contextCreation))||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(U){A.contextLost=!0,A.game.events.emit(n.CONTEXT_LOST,A),U.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(n.CONTEXT_RESTORED,A)},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),w.context=E;for(var S=0;S<=27;S++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var b=E.getSupportedExtensions();y.maxTextures&&y.maxTextures!==-1||(y.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),y.maxTextureSize||(y.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var _="WEBGL_compressed_texture_",P="WEBKIT_"+_;this.compression.ETC1=E.getExtension(_+"etc1")||E.getExtension(P+"etc1"),this.compression.PVRTC=E.getExtension(_+"pvrtc")||E.getExtension(P+"pvrtc"),this.compression.S3TC=E.getExtension(_+"s3tc")||E.getExtension(P+"s3tc"),this.supportedExtensions=b;var D="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(D)>-1?E.getExtension(D):null;var O="OES_vertex_array_object";this.vaoExtension=b.indexOf(O)>-1?E.getExtension(O):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(C.redGL,C.greenGL,C.blueGL,C.alphaGL),this.mipmapFilter=E[y.mipmapFilter],this.maxTextures=m.checkShaderMax(E,y.maxTextures),this.textureIndexes=[];var F=this.tempTextures;if(Array.isArray(F))for(var N=0;S<this.maxTextures;N++)E.deleteTexture(F[N]);else F=new Array(this.maxTextures);for(var k=0;k<this.maxTextures;k++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+k),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),F[k]=L,this.textureIndexes.push(k)}return this.tempTextures=F,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new c(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new h().identity(),w.textures.once(v.READY,this.boot,this),this},boot:function(){var y=this.game,E=this.pipelines,w=y.scale.baseSize;this.width=w.width,this.height=w.height,this.isBooted=!0,this.renderTarget=new d(this,this.width,this.height,1,0,!0,!0),E.boot(y.config.pipeline),this.blankTexture=y.textures.getFrame("__DEFAULT"),this.whiteTexture=y.textures.getFrame("__WHITE");var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,null),R.enable(R.SCISSOR_TEST),y.scale.on(f.RESIZE,this.onResize,this),this.resize(w.width,w.height)},onResize:function(y,E){E.width===this.width&&E.height===this.height||this.resize(E.width,E.height)},beginCapture:function(y,E){y===void 0&&(y=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,y,E),this.setProjectionMatrix(y,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(y,E){var w=this.gl;return this.width=y,this.height=E,this.setProjectionMatrix(y,E),w.viewport(0,0,y,E),this.drawingBufferHeight=w.drawingBufferHeight,w.scissor(0,w.drawingBufferHeight-E,y,E),this.defaultScissor[2]=y,this.defaultScissor[3]=E,this.emit(s.RESIZE,y,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(y,E){return y===this.projectionWidth&&E===this.projectionHeight||(this.projectionWidth=y,this.projectionHeight=E,this.projectionMatrix.ortho(0,y,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(y){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(y)},getExtension:function(y){return this.hasExtension(y)?(y in this.extensions||(this.extensions[y]=this.gl.getExtension(y)),this.extensions[y]):null},flush:function(){this.pipelines.flush()},pushScissor:function(y,E,w,R,C){C===void 0&&(C=this.drawingBufferHeight);var A=[y,E,w,R];return this.scissorStack.push(A),this.setScissor(y,E,w,R,C),this.currentScissor=A,A},setScissor:function(y,E,w,R,C){C===void 0&&(C=this.drawingBufferHeight);var A=this.gl,S=this.currentScissor,b=w>0&&R>0;if(S&&b){var _=S[0],P=S[1],D=S[2],O=S[3];b=_!==y||P!==E||D!==w||O!==R}b&&(this.flush(),A.scissor(y,C-E-R,w,R))},resetScissor:function(){var y=this.gl;y.enable(y.SCISSOR_TEST);var E=this.currentScissor;if(E){var w=E[0],R=E[1],C=E[2],A=E[3];C>0&&A>0&&y.scissor(w,this.drawingBufferHeight-R-A,C,A)}},popScissor:function(){var y=this.scissorStack;y.pop();var E=y[y.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var y=this.currentMask.mask,E=this.currentCameraMask.mask;return y&&y.isStencil||E&&E.isStencil},resetViewport:function(){var y=this.gl;y.viewport(0,0,this.width,this.height),this.drawingBufferHeight=y.drawingBufferHeight},setBlendMode:function(y,E){E===void 0&&(E=!1);var w=this.gl,R=this.blendModes[y];return!!(E||y!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==y)&&(this.flush(),w.enable(w.BLEND),w.blendEquation(R.equation),R.func.length>2?w.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):w.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=y,!0)},addBlendMode:function(y,E){return this.blendModes.push({func:y,equation:E})-1},updateBlendMode:function(y,E,w){return this.blendModes[y]&&(this.blendModes[y].func=E,w&&(this.blendModes[y].equation=w)),this},removeBlendMode:function(y){return y>17&&this.blendModes[y]&&this.blendModes.splice(y,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y.glTexture,!0),0;var E=this.gl,w=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(y.glIndex=w,E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,y.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,y.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,y.glIndex},isNewNormalMap:function(y,E){return this.textureZero!==y||this.normalTexture!==E},setTextureZero:function(y,E){if(this.textureZero!==y){E&&this.flush();var w=this.gl;w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,y),this.textureZero=y}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(y){if(this.normalTexture!==y){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,y),this.normalTexture=y,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var y=this.gl,E=this.tempTextures,w=0;w<E.length;w++)y.activeTexture(y.TEXTURE0+w),y.bindTexture(y.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(y){if(y===void 0&&(y=!1),!this.isTextureClean){this.flush();var E=this.gl,w=this.tempTextures;if(y){for(var R=0;R<w.length;R++)E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,w[R]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,w[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,w[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,w[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y,!0),0;var E=this.gl,w=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(y.glIndex=w,E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,y),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,y),this.currentActiveTexture=2)),this.isTextureClean=!1,y.glIndex},pushFramebuffer:function(y,E,w,R){return y===this.currentFramebuffer?this:(this.fboStack.push(y),this.setFramebuffer(y,E,w,R))},setFramebuffer:function(y,E,w,R){if(E===void 0&&(E=!1),w===void 0&&(w=!1),R===void 0&&(R=!0),y===this.currentFramebuffer)return this;var C=this.gl,A=this.width,S=this.height;return y&&y.renderTexture&&R?(A=y.renderTexture.width,S=y.renderTexture.height):this.flush(),C.bindFramebuffer(C.FRAMEBUFFER,y),R&&C.viewport(0,0,A,S),E&&(y?(this.drawingBufferHeight=S,this.pushScissor(0,0,A,S)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=y,w&&this.resetTextures(),this},popFramebuffer:function(y,E,w){y===void 0&&(y=!1),E===void 0&&(E=!1),w===void 0&&(w=!0);var R=this.fboStack;R.pop();var C=R[R.length-1];return C||(C=null),this.setFramebuffer(C,y,E,w),C},setProgram:function(y){return y!==this.currentProgram&&(this.flush(),this.gl.useProgram(y),this.currentProgram=y,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(y,E,w,R){var C=this.gl,A=C.NEAREST,S=C.NEAREST,b=C.CLAMP_TO_EDGE;E=y?y.width:E,w=y?y.height:w;var _=r(E,w);return _&&(b=C.REPEAT),R===o.ScaleModes.LINEAR&&this.config.antialias&&(A=_?this.mipmapFilter:C.LINEAR,S=C.LINEAR),y||typeof E!="number"||typeof w!="number"?this.createTexture2D(0,A,S,b,b,C.RGBA,y):this.createTexture2D(0,A,S,b,b,C.RGBA,null,E,w)},createTexture2D:function(y,E,w,R,C,A,S,b,_,P,D,O){P=P==null||P,D===void 0&&(D=!1),O===void 0&&(O=!1);var F=this.gl,N=F.createTexture();F.activeTexture(F.TEXTURE0);var k=F.getParameter(F.TEXTURE_BINDING_2D);return F.bindTexture(F.TEXTURE_2D,N),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,E),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,w),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,C),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,R),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,O),S==null?F.texImage2D(F.TEXTURE_2D,y,A,b,_,0,A,F.UNSIGNED_BYTE,null):(D||(b=S.width,_=S.height),F.texImage2D(F.TEXTURE_2D,y,A,A,F.UNSIGNED_BYTE,S)),r(b,_)&&F.generateMipmap(F.TEXTURE_2D),k&&F.bindTexture(F.TEXTURE_2D,k),N.isAlphaPremultiplied=P,N.isRenderTexture=!1,N.width=b,N.height=_,N.glIndex=0,N.glIndexCounter=-1,N},createFramebuffer:function(y,E,w,R){var C,A=this.gl,S=A.createFramebuffer();if(this.setFramebuffer(S),R){var b=A.createRenderbuffer();A.bindRenderbuffer(A.RENDERBUFFER,b),A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,y,E),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,b)}if(w.isRenderTexture=!0,w.isAlphaPremultiplied=!1,A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,w,0),(C=A.checkFramebufferStatus(A.FRAMEBUFFER))!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[C]);return S.renderTexture=w,this.setFramebuffer(null),this.resetTextures(),S},createProgram:function(y,E){var w=this.gl,R=w.createProgram(),C=w.createShader(w.VERTEX_SHADER),A=w.createShader(w.FRAGMENT_SHADER);if(w.shaderSource(C,y),w.shaderSource(A,E),w.compileShader(C),w.compileShader(A),!w.getShaderParameter(C,w.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+w.getShaderInfoLog(C));if(!w.getShaderParameter(A,w.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+w.getShaderInfoLog(A));if(w.attachShader(R,C),w.attachShader(R,A),w.linkProgram(R),!w.getProgramParameter(R,w.LINK_STATUS))throw new Error(`Link Program failed:
`+w.getProgramInfoLog(R));return w.useProgram(R),R},createVertexBuffer:function(y,E){var w=this.gl,R=w.createBuffer();return w.bindBuffer(w.ARRAY_BUFFER,R),w.bufferData(w.ARRAY_BUFFER,y,E),w.bindBuffer(w.ARRAY_BUFFER,null),R},createIndexBuffer:function(y,E){var w=this.gl,R=w.createBuffer();return w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,R),w.bufferData(w.ELEMENT_ARRAY_BUFFER,y,E),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(y,E){return E&&this.resetTextures(!0),y&&this.gl.deleteTexture(y),this},deleteFramebuffer:function(y){return y&&(this.gl.deleteFramebuffer(y),u(this.fboStack,y),this.currentFramebuffer===y&&(this.currentFramebuffer=null)),this},deleteProgram:function(y){return y&&this.gl.deleteProgram(y),this},deleteBuffer:function(y){return this.gl.deleteBuffer(y),this},preRenderCamera:function(y){var E=y.x,w=y.y,R=y.width,C=y.height,A=y.backgroundColor;y.emit(e.PRE_RENDER,y),this.pipelines.preBatchCamera(y),this.pushScissor(E,w,R,C),y.mask&&(this.currentCameraMask.mask=y.mask,this.currentCameraMask.camera=y._maskCamera,y.mask.preRenderWebGL(this,y,y._maskCamera)),A.alphaGL>0&&this.pipelines.setMulti().drawFillRect(E,w,R,C,m.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)},getCurrentStencilMask:function(){var y=null,E=this.maskStack,w=this.currentCameraMask;return E.length>0?y=E[E.length-1]:w.mask&&w.mask.isStencil&&(y=w),y},postRenderCamera:function(y){var E=y.flashEffect,w=y.fadeEffect;if(E.isRunning||w.isRunning||w.isComplete){var R=this.pipelines.setMulti();E.postRenderWebGL(R,m.getTintFromFloats),w.postRenderWebGL(R,m.getTintFromFloats)}y.dirty=!1,this.popScissor(),y.mask&&(this.currentCameraMask.mask=null,y.mask.postRenderWebGL(this,y._maskCamera)),this.pipelines.postBatchCamera(y),y.emit(e.POST_RENDER,y)},preRender:function(){if(!this.contextLost){var y=this.gl;if(y.bindFramebuffer(y.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;y.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)}y.enable(y.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&y.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(s.PRE_RENDER)}},render:function(y,E,w){if(!this.contextLost){var R=E.length;if(this.emit(s.RENDER,y,w),this.preRenderCamera(w),R===0)return this.setBlendMode(o.BlendModes.NORMAL),void this.postRenderCamera(w);this.currentType="";for(var C=this.currentMask,A=0;A<R;A++){this.finalType=A===R-1;var S=E[A],b=S.mask;(C=this.currentMask).mask&&C.mask!==b&&C.mask.postRenderWebGL(this,C.camera),b&&C.mask!==b&&b.preRenderWebGL(this,S,w),S.blendMode!==this.currentBlendMode&&this.setBlendMode(S.blendMode);var _=S.type;_!==this.currentType&&(this.newType=!0,this.currentType=_),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,S.renderWebGL(this,S,w),this.newType=!1}(C=this.currentMask).mask&&C.mask.postRenderWebGL(this,C.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(w)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var y=this.snapshotState;y.callback&&(x(this.canvas,y),y.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(y,E,w){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,y,E,w)},snapshotArea:function(y,E,w,R,C,A,S){var b=this.snapshotState;return b.callback=C,b.type=A,b.encoder=S,b.getPixel=!1,b.x=y,b.y=E,b.width=Math.min(w,this.gl.drawingBufferWidth),b.height=Math.min(R,this.gl.drawingBufferHeight),this},snapshotPixel:function(y,E,w){return this.snapshotArea(y,E,1,1,w),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(y,E,w,R,C,A,S,b,_,P,D){C===void 0&&(C=!1),A===void 0&&(A=0),S===void 0&&(S=0),b===void 0&&(b=E),_===void 0&&(_=w);var O=this.currentFramebuffer;this.snapshotArea(A,S,b,_,R,P,D);var F=this.snapshotState;return F.getPixel=C,F.isFramebuffer=!0,F.bufferWidth=E,F.bufferHeight=w,this.setFramebuffer(y),x(this.canvas,F),this.setFramebuffer(O),F.callback=null,F.isFramebuffer=!1,this},canvasToTexture:function(y,E,w,R){return w===void 0&&(w=!1),R===void 0&&(R=!1),E?this.updateCanvasTexture(y,E,R):this.createCanvasTexture(y,w,R)},createCanvasTexture:function(y,E,w){E===void 0&&(E=!1),w===void 0&&(w=!1);var R=this.gl,C=R.NEAREST,A=R.NEAREST,S=y.width,b=y.height,_=R.CLAMP_TO_EDGE,P=r(S,b);return!E&&P&&(_=R.REPEAT),this.config.antialias&&(C=P?this.mipmapFilter:R.LINEAR,A=R.LINEAR),this.createTexture2D(0,C,A,_,_,R.RGBA,y,S,b,!0,!1,w)},updateCanvasTexture:function(y,E,w){w===void 0&&(w=!1);var R=this.gl,C=y.width,A=y.height;if(C>0&&A>0){R.activeTexture(R.TEXTURE0);var S=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,w),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,y),E.width=C,E.height=A,S&&R.bindTexture(R.TEXTURE_2D,S)}return E},createVideoTexture:function(y,E,w){E===void 0&&(E=!1),w===void 0&&(w=!1);var R=this.gl,C=R.NEAREST,A=R.NEAREST,S=y.videoWidth,b=y.videoHeight,_=R.CLAMP_TO_EDGE,P=r(S,b);return!E&&P&&(_=R.REPEAT),this.config.antialias&&(C=P?this.mipmapFilter:R.LINEAR,A=R.LINEAR),this.createTexture2D(0,C,A,_,_,R.RGBA,y,S,b,!0,!0,w)},updateVideoTexture:function(y,E,w){w===void 0&&(w=!1);var R=this.gl,C=y.videoWidth,A=y.videoHeight;if(C>0&&A>0){R.activeTexture(R.TEXTURE0);var S=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,w),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,y),E.width=C,E.height=A,S&&R.bindTexture(R.TEXTURE_2D,S)}return E},setTextureFilter:function(y,E){var w=this.gl,R=[w.LINEAR,w.NEAREST][E];w.activeTexture(w.TEXTURE0);var C=w.getParameter(w.TEXTURE_BINDING_2D);return w.bindTexture(w.TEXTURE_2D,y),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,R),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,R),C&&w.bindTexture(w.TEXTURE_2D,C),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var y=this.gl,E=this.tempTextures,w=0;w<E.length;w++)y.deleteTexture(E[w]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});g.exports=T},86384:function(g,p,i){var u=i(69186),e=i(25738),l=i(51303),o=new u({initialize:function(t,s,n,r,h){this.pipeline=t,this.name=s,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(n,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(h),this.createUniforms()},createAttributes:function(t){var s=0,n=0,r=[];this.vertexComponentCount=0;for(var h=0;h<t.length;h++){var a=t[h],c=a.name,d=e(a,"size",1),f=e(a,"type",l.FLOAT),v=f.enum,m=f.size,x=!!a.normalized;r.push({name:c,size:d,type:v,normalized:x,offset:n,enabled:!1,location:-1}),m===4?s+=d:s++,n+=d*m}this.vertexSize=n,this.vertexComponentCount=s,this.attributes=r},bind:function(t,s){return t===void 0&&(t=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){t===void 0&&(t=!1);for(var s=this.gl,n=this.vertexSize,r=this.attributes,h=this.program,a=0;a<r.length;a++){var c=r[a],d=c.size,f=c.type,v=c.offset,m=c.enabled,x=c.location,T=!!c.normalized;if(t){var y=s.getAttribLocation(h,c.name);y>=0?(s.enableVertexAttribArray(y),s.vertexAttribPointer(y,d,f,T,n,v),c.enabled=!0,c.location=y):y!==-1&&s.disableVertexAttribArray(y)}else m?s.vertexAttribPointer(x,d,f,T,n,v):!m&&x>-1&&(s.disableVertexAttribArray(x),c.location=-1)}return this},createUniforms:function(){var t,s,n,r=this.gl,h=this.program,a=this.uniforms,c=r.getProgramParameter(h,r.ACTIVE_UNIFORMS);for(t=0;t<c;t++){var d=r.getActiveUniform(h,t);if(d){s=d.name,(n=r.getUniformLocation(h,s))!==null&&(a[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null});var f=s.indexOf("[");f>0&&(s=s.substr(0,f),a.hasOwnProperty(s)||(n=r.getUniformLocation(h,s))!==null&&(a[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var s=this.uniforms[t];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(t,s,n,r){var h=this.uniforms[s];return h?((r||h.value1!==n)&&(h.value1=n,this.renderer.setProgram(this.program),t.call(this.gl,h.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(t,s,n,r,h){var a=this.uniforms[s];return a?((h||a.value1!==n||a.value2!==r)&&(a.value1=n,a.value2=r,this.renderer.setProgram(this.program),t.call(this.gl,a.location,n,r),this.pipeline.currentShader=this),this):this},setUniform3:function(t,s,n,r,h,a){var c=this.uniforms[s];return c?((a||c.value1!==n||c.value2!==r||c.value3!==h)&&(c.value1=n,c.value2=r,c.value3=h,this.renderer.setProgram(this.program),t.call(this.gl,c.location,n,r,h),this.pipeline.currentShader=this),this):this},setUniform4:function(t,s,n,r,h,a,c){var d=this.uniforms[s];return d?((c||d.value1!==n||d.value2!==r||d.value3!==h||d.value4!==a)&&(d.value1=n,d.value2=r,d.value3=h,d.value4=a,this.renderer.setProgram(this.program),t.call(this.gl,d.location,n,r,h,a),this.pipeline.currentShader=this),this):this},set1f:function(t,s){return this.setUniform1(this.gl.uniform1f,t,s)},set2f:function(t,s,n){return this.setUniform2(this.gl.uniform2f,t,s,n)},set3f:function(t,s,n,r){return this.setUniform3(this.gl.uniform3f,t,s,n,r)},set4f:function(t,s,n,r,h){return this.setUniform4(this.gl.uniform4f,t,s,n,r,h)},set1fv:function(t,s){return this.setUniform1(this.gl.uniform1fv,t,s,!0)},set2fv:function(t,s){return this.setUniform1(this.gl.uniform2fv,t,s,!0)},set3fv:function(t,s){return this.setUniform1(this.gl.uniform3fv,t,s,!0)},set4fv:function(t,s){return this.setUniform1(this.gl.uniform4fv,t,s,!0)},set1iv:function(t,s){return this.setUniform1(this.gl.uniform1iv,t,s,!0)},set2iv:function(t,s){return this.setUniform1(this.gl.uniform2iv,t,s,!0)},set3iv:function(t,s){return this.setUniform1(this.gl.uniform3iv,t,s,!0)},set4iv:function(t,s){return this.setUniform1(this.gl.uniform4iv,t,s,!0)},set1i:function(t,s){return this.setUniform1(this.gl.uniform1i,t,s)},set2i:function(t,s,n){return this.setUniform2(this.gl.uniform2i,t,s,n)},set3i:function(t,s,n,r){return this.setUniform3(this.gl.uniform3i,t,s,n,r)},set4i:function(t,s,n,r,h){return this.setUniform4(this.gl.uniform4i,t,s,n,r,h)},setMatrix2fv:function(t,s,n){return this.setUniform2(this.gl.uniformMatrix2fv,t,s,n,!0)},setMatrix3fv:function(t,s,n){return this.setUniform2(this.gl.uniformMatrix3fv,t,s,n,!0)},setMatrix4fv:function(t,s,n){return this.setUniform2(this.gl.uniformMatrix4fv,t,s,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});g.exports=o},51303:function(g){g.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},94621:function(g,p,i){var u=i(51303),e=i(72646),l={PipelineManager:i(37107),Pipelines:i(86678),RenderTarget:i(50666),Utils:i(64564),WebGLPipeline:i(89262),WebGLRenderer:i(58410),WebGLShader:i(86384)};l=e(!1,l,u),g.exports=l},18923:function(g,p,i){var u=i(69186),e=i(25738),l=i(91160),o=i(29874),t=i(51303),s=i(89262),n=new u({Extends:s,initialize:function(r){r.fragShader=e(r,"fragShader",l),r.vertShader=e(r,"vertShader",o),r.batchSize=e(r,"batchSize",1),r.vertices=e(r,"vertices",[-1,1,-1,-7,7,1]),r.attributes=e(r,"attributes",[{name:"inPosition",size:2,type:t.FLOAT}]),s.call(this,r)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(r,h){s.prototype.resize.call(this,r,h),this.set2f("uResolution",r,h)},beginMask:function(r,h,a){var c=this.gl;if(r.bitmapMask&&c){var d=this.renderer;d.flush(),d.pushFramebuffer(r.mainFramebuffer),c.disable(c.STENCIL_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),d.currentCameraMask.mask!==r&&(d.currentMask.mask=r,d.currentMask.camera=a)}},endMask:function(r,h){var a=this.gl,c=this.renderer,d=r.bitmapMask;if(d&&a){c.flush(),c.pushFramebuffer(r.maskFramebuffer),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),c.setBlendMode(0,!0),d.renderWebGL(c,d,h),c.flush(),c.popFramebuffer(),c.popFramebuffer();var f=c.getCurrentStencilMask();f?(a.enable(a.STENCIL_TEST),f.mask.applyStencil(c,f.camera,!0)):c.currentMask.mask=null,c.pipelines.set(this),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,r.maskTexture),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,r.mainTexture),this.set1i("uInvertMaskAlpha",r.invertAlpha),a.drawArrays(this.topology,0,3),c.resetTextures()}}});g.exports=n},48623:function(g,p,i){var u=i(69186),e=i(64634),l=i(25738),o=i(79268),t=i(16575),s=i(9329),n=i(51303),r=i(89262),h=new u({Extends:r,initialize:function(a){a.fragShader=l(a,"fragShader",o),a.vertShader=l(a,"vertShader",t),a.attributes=l(a,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),r.call(this,a),this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(a,c,d,f,v,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(v,x);var T=a+d,y=c+f,E=x.getX(a,c),w=x.getY(a,c),R=x.getX(a,y),C=x.getY(a,y),A=x.getX(T,y),S=x.getY(T,y),b=x.getX(T,c),_=x.getY(T,c),P=this.fillTint;this.batchQuad(E,w,R,C,A,S,b,_,P.TL,P.TR,P.BL,P.BR)},batchFillTriangle:function(a,c,d,f,v,m,x,T){this.renderer.pipelines.set(this);var y=this.calcMatrix;T&&T.multiply(x,y);var E=y.getX(a,c),w=y.getY(a,c),R=y.getX(d,f),C=y.getY(d,f),A=y.getX(v,m),S=y.getY(v,m),b=this.fillTint;this.batchTri(E,w,R,C,A,S,b.TL,b.TR,b.BL)},batchStrokeTriangle:function(a,c,d,f,v,m,x,T,y){var E=this.tempTriangle;E[0].x=a,E[0].y=c,E[0].width=x,E[1].x=d,E[1].y=f,E[1].width=x,E[2].x=v,E[2].y=m,E[2].width=x,E[3].x=a,E[3].y=c,E[3].width=x,this.batchStrokePath(E,x,!1,T,y)},batchFillPath:function(a,c,d){this.renderer.pipelines.set(this);var f=this.calcMatrix;d&&d.multiply(c,f);for(var v,m,x=a.length,T=this.polygonCache,y=this.fillTint.TL,E=this.fillTint.TR,w=this.fillTint.BL,R=0;R<x;++R)m=a[R],T.push(m.x,m.y);x=(v=e(T)).length;for(var C=0;C<x;C+=3){var A=2*v[C+0],S=2*v[C+1],b=2*v[C+2],_=T[A+0],P=T[A+1],D=T[S+0],O=T[S+1],F=T[b+0],N=T[b+1],k=f.getX(_,P),L=f.getY(_,P),U=f.getX(D,O),Y=f.getY(D,O),B=f.getX(F,N),W=f.getY(F,N);this.batchTri(k,L,U,Y,B,W,y,E,w)}T.length=0},batchStrokePath:function(a,c,d,f,v){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var m=a.length-1,x=0;x<m;x++){var T=a[x],y=a[x+1];this.batchLine(T.x,T.y,y.x,y.y,T.width/2,y.width/2,c,x,!d&&x===m-1,f,v)}},batchLine:function(a,c,d,f,v,m,x,T,y,E,w){this.renderer.pipelines.set(this);var R=this.calcMatrix;w&&w.multiply(E,R);var C=d-a,A=f-c,S=Math.sqrt(C*C+A*A),b=v*(f-c)/S,_=v*(a-d)/S,P=m*(f-c)/S,D=m*(a-d)/S,O=d-P,F=f-D,N=a-b,k=c-_,L=d+P,U=f+D,Y=a+b,B=c+_,W=R.getX(O,F),G=R.getY(O,F),X=R.getX(N,k),q=R.getY(N,k),j=R.getX(L,U),V=R.getY(L,U),K=R.getX(Y,B),H=R.getY(Y,B),Z=this.strokeTint,Q=Z.TL,J=Z.TR,et=Z.BL,$=Z.BR;if(this.batchQuad(K,H,X,q,W,G,j,V,Q,J,et,$),!(x<=2)){var tt=this.prevQuad,it=this.firstQuad;T>0&&tt[4]?this.batchQuad(K,H,X,q,tt[0],tt[1],tt[2],tt[3],Q,J,et,$):(it[0]=K,it[1]=H,it[2]=X,it[3]=q,it[4]=1),y&&it[4]?this.batchQuad(W,G,j,V,it[0],it[1],it[2],it[3],Q,J,et,$):(tt[0]=W,tt[1]=G,tt[2]=j,tt[3]=V,tt[4]=1)}},batchVert:function(a,c,d){var f=this.vertexViewF32,v=this.vertexViewU32,m=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++m]=a,f[++m]=c,v[++m]=d,this.vertexCount++},batchQuad:function(a,c,d,f,v,m,x,T,y,E,w,R){var C=!1;return this.shouldFlush(6)&&(this.flush(),C=!0),this.batchVert(a,c,y),this.batchVert(d,f,w),this.batchVert(v,m,R),this.batchVert(a,c,y),this.batchVert(v,m,R),this.batchVert(x,T,E),C},batchTri:function(a,c,d,f,v,m,x,T,y){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(a,c,x),this.batchVert(d,f,T),this.batchVert(v,m,y),E},destroy:function(){return r.prototype.destroy.call(this),this.polygonCache=null,this}});g.exports=h},63174:function(g,p,i){var u=i(69186),e=i(25738),l=i(80376),o=i(14869),t=i(17321),s=i(89262),n=10,r=new t,h=new u({Extends:o,initialize:function(a){n=a.game.renderer.config.maxLights;for(var c=e(a,"fragShader",l),d=[],f=1;f<=n;f++)d.push({name:"lights"+f,fragShader:c.replace("%LIGHT_COUNT%",f.toString())});a.shaders=d,o.call(this,a),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){s.prototype.boot.call(this);var a=this.gl,c=a.createTexture();a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c};for(var d=0;d<this.shaders.length;d++)this["lightShader"+(d+1)]=this.shaders[d]},onRender:function(a,c){var d=a.sys.lights;if(this.lightsActive=!1,d&&d.active){var f=d.getLights(c),v=f.length;if(v!==0){var m;this.lightsActive=!0,this.setShader(this["lightShader"+v],!0);var x=this.renderer.height,T=c.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),m=0;m<v;m++){var y=f[m].light,E=y.color,w="uLights["+m+"].";T.transformPoint(y.x,y.y,r),this.set2f(w+"position",r.x-c.scrollX*y.scrollFactorX*c.zoom,x-(r.y-c.scrollY*y.scrollFactorY*c.zoom)),this.set3f(w+"color",E.r,E.g,E.b),this.set1f(w+"intensity",y.intensity),this.set1f(w+"radius",y.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(a){if(a!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(a){var d=-a,f=Math.cos(d),v=Math.sin(d);c[1]=v,c[3]=-v,c[0]=c[4]=f}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=a}},setTexture2D:function(a,c){var d=this.renderer;a===void 0&&(a=d.tempTextures[0]);var f=this.getNormalMap(c);d.isNewNormalMap(a,f)&&(this.flush(),d.setTextureZero(a),d.setNormalMap(f));var v=c?c.rotation:0;return this.setNormalMapRotation(v),this.currentUnit=0,0},setGameObject:function(a,c){c===void 0&&(c=a.frame);var d=this.renderer,f=c.glTexture,v=this.getNormalMap(a);return d.isNewNormalMap()&&(this.flush(),d.setTextureZero(f),d.setNormalMap(v)),this.setNormalMapRotation(a.rotation),this.currentUnit=0,0},getNormalMap:function(a){var c;return a?a.displayTexture?c=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?c=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(c=Array.isArray(a.tileset)?a.tileset[0].image.dataSource[0]:a.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(a,c,d){this.lightsActive&&o.prototype.batchSprite.call(this,a,c,d)},batchTexture:function(a,c,d,f,v,m,x,T,y,E,w,R,C,A,S,b,_,P,D,O,F,N,k,L,U,Y,B,W,G,X,q,j){this.lightsActive&&o.prototype.batchTexture.call(this,a,c,d,f,v,m,x,T,y,E,w,R,C,A,S,b,_,P,D,O,F,N,k,L,U,Y,B,W,G,X,q,j)},batchTextureFrame:function(a,c,d,f,v,m,x){this.lightsActive&&o.prototype.batchTextureFrame.call(this,a,c,d,f,v,m,x)}});h.LIGHT_COUNT=n,g.exports=h},14869:function(g,p,i){var u=i(69186),e=i(64634),l=i(25738),o=i(53121),t=i(31952),s=i(9329),n=i(64564),r=i(51303),h=i(89262),a=new u({Extends:h,initialize:function(c){var d=c.game.renderer,f=l(c,"fragShader",o);c.fragShader=n.parseFragmentShaderMaxTextures(f,d.maxTextures),c.vertShader=l(c,"vertShader",t),c.attributes=l(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),h.call(this,c),this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(c,d,f){this.manager.set(this,c);var v=this._tempMatrix1,m=this._tempMatrix2,x=this._tempMatrix3,T=c.frame,y=T.glTexture,E=T.u0,w=T.v0,R=T.u1,C=T.v1,A=T.x,S=T.y,b=T.cutWidth,_=T.cutHeight,P=T.customPivot,D=c.displayOriginX,O=c.displayOriginY,F=-D+A,N=-O+S;if(c.isCropped){var k=c._crop;k.flipX===c.flipX&&k.flipY===c.flipY||T.updateCropUVs(k,c.flipX,c.flipY),E=k.u0,w=k.v0,R=k.u1,C=k.v1,b=k.width,_=k.height,F=-D+(A=k.x),N=-O+(S=k.y)}var L=1,U=1;c.flipX&&(P||(F+=-T.realWidth+2*D),L=-1),(c.flipY||T.source.isGLTexture&&!y.flipY)&&(P||(N+=-T.realHeight+2*O),U=-1),m.applyITRS(c.x,c.y,c.rotation,c.scaleX*L,c.scaleY*U),v.copyFrom(d.matrix),f?(v.multiplyWithOffset(f,-d.scrollX*c.scrollFactorX,-d.scrollY*c.scrollFactorY),m.e=c.x,m.f=c.y):(m.e-=d.scrollX*c.scrollFactorX,m.f-=d.scrollY*c.scrollFactorY),v.multiply(m,x);var Y=F+b,B=N+_,W=d.roundPixels,G=x.getXRound(F,N,W),X=x.getYRound(F,N,W),q=x.getXRound(F,B,W),j=x.getYRound(F,B,W),V=x.getXRound(Y,B,W),K=x.getYRound(Y,B,W),H=x.getXRound(Y,N,W),Z=x.getYRound(Y,N,W),Q=n.getTintAppendFloatAlpha,J=d.alpha,et=Q(c.tintTopLeft,J*c._alphaTL),$=Q(c.tintTopRight,J*c._alphaTR),tt=Q(c.tintBottomLeft,J*c._alphaBL),it=Q(c.tintBottomRight,J*c._alphaBR);this.shouldFlush(6)&&this.flush();var nt=this.setGameObject(c,T);this.manager.preBatch(c),this.batchQuad(c,G,X,q,j,V,K,H,Z,E,w,R,C,et,$,tt,it,c.tintFill,y,nt),this.manager.postBatch(c)},batchTexture:function(c,d,f,v,m,x,T,y,E,w,R,C,A,S,b,_,P,D,O,F,N,k,L,U,Y,B,W,G,X,q,j,V){this.manager.set(this,c);var K=this._tempMatrix1,H=this._tempMatrix2,Z=this._tempMatrix3,Q=D/f+W,J=O/v+G,et=(D+F)/f+W,$=(O+N)/v+G,tt=T,it=y,nt=-_,rt=-P;if(c.isCropped){var st=c._crop,at=st.width,ct=st.height;tt=at,it=ct,T=at,y=ct;var ht=D=st.x,ut=O=st.y;C&&(ht=F-st.x-at),A&&(ut=N-st.y-ct),Q=ht/f+W,J=ut/v+G,et=(ht+at)/f+W,$=(ut+ct)/v+G,nt=-_+D,rt=-P+O}C&&(tt*=-1,nt+=T),(A^=!j&&d.isRenderTexture?1:0)&&(it*=-1,rt+=y);var ot=nt+tt,ft=rt+it;H.applyITRS(m,x,R,E,w),K.copyFrom(X.matrix),q?(K.multiplyWithOffset(q,-X.scrollX*S,-X.scrollY*b),H.e=m,H.f=x):(H.e-=X.scrollX*S,H.f-=X.scrollY*b),K.multiply(H,Z);var lt=X.roundPixels,gt=Z.getXRound(nt,rt,lt),pt=Z.getYRound(nt,rt,lt),vt=Z.getXRound(nt,ft,lt),dt=Z.getYRound(nt,ft,lt),mt=Z.getXRound(ot,ft,lt),xt=Z.getYRound(ot,ft,lt),Et=Z.getXRound(ot,rt,lt),wt=Z.getYRound(ot,rt,lt);V===void 0&&(V=this.renderer.setTexture2D(d)),c&&this.manager.preBatch(c),this.batchQuad(c,gt,pt,vt,dt,mt,xt,Et,wt,Q,J,et,$,k,L,U,Y,B,d,V),c&&this.manager.postBatch(c)},batchTextureFrame:function(c,d,f,v,m,x,T){this.manager.set(this);var y=this._tempMatrix1.copyFrom(x),E=this._tempMatrix2,w=d+c.width,R=f+c.height;T?y.multiply(T,E):E=y;var C=E.getX(d,f),A=E.getY(d,f),S=E.getX(d,R),b=E.getY(d,R),_=E.getX(w,R),P=E.getY(w,R),D=E.getX(w,f),O=E.getY(w,f),F=this.renderer.setTextureSource(c.source);v=n.getTintAppendFloatAlpha(v,m),this.batchQuad(null,C,A,S,b,_,P,D,O,c.u0,c.v0,c.u1,c.v1,v,v,v,v,0,c.glTexture,F)},batchFillRect:function(c,d,f,v,m,x){this.renderer.pipelines.set(this);var T=this.calcMatrix;x&&x.multiply(m,T);var y=c+f,E=d+v,w=T.getX(c,d),R=T.getY(c,d),C=T.getX(c,E),A=T.getY(c,E),S=T.getX(y,E),b=T.getY(y,E),_=T.getX(y,d),P=T.getY(y,d),D=this.fillTint;this.batchQuad(null,w,R,C,A,S,b,_,P,0,0,1,1,D.TL,D.TR,D.BL,D.BR,2)},batchFillTriangle:function(c,d,f,v,m,x,T,y){this.renderer.pipelines.set(this);var E=this.calcMatrix;y&&y.multiply(T,E);var w=E.getX(c,d),R=E.getY(c,d),C=E.getX(f,v),A=E.getY(f,v),S=E.getX(m,x),b=E.getY(m,x),_=this.fillTint;this.batchTri(null,w,R,C,A,S,b,0,0,1,1,_.TL,_.TR,_.BL,2)},batchStrokeTriangle:function(c,d,f,v,m,x,T,y,E){var w=this.tempTriangle;w[0].x=c,w[0].y=d,w[0].width=T,w[1].x=f,w[1].y=v,w[1].width=T,w[2].x=m,w[2].y=x,w[2].width=T,w[3].x=c,w[3].y=d,w[3].width=T,this.batchStrokePath(w,T,!1,y,E)},batchFillPath:function(c,d,f){this.renderer.pipelines.set(this);var v=this.calcMatrix;f&&f.multiply(d,v);for(var m,x,T=c.length,y=this.polygonCache,E=this.fillTint.TL,w=this.fillTint.TR,R=this.fillTint.BL,C=0;C<T;++C)x=c[C],y.push(x.x,x.y);T=(m=e(y)).length;for(var A=0;A<T;A+=3){var S=2*m[A+0],b=2*m[A+1],_=2*m[A+2],P=y[S+0],D=y[S+1],O=y[b+0],F=y[b+1],N=y[_+0],k=y[_+1],L=v.getX(P,D),U=v.getY(P,D),Y=v.getX(O,F),B=v.getY(O,F),W=v.getX(N,k),G=v.getY(N,k);this.batchTri(null,L,U,Y,B,W,G,0,0,1,1,E,w,R,2)}y.length=0},batchStrokePath:function(c,d,f,v,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=c.length-1,T=0;T<x;T++){var y=c[T],E=c[T+1];this.batchLine(y.x,y.y,E.x,E.y,y.width/2,E.width/2,d,T,!f&&T===x-1,v,m)}},batchLine:function(c,d,f,v,m,x,T,y,E,w,R){this.renderer.pipelines.set(this);var C=this.calcMatrix;R&&R.multiply(w,C);var A=f-c,S=v-d,b=Math.sqrt(A*A+S*S),_=m*(v-d)/b,P=m*(c-f)/b,D=x*(v-d)/b,O=x*(c-f)/b,F=f-D,N=v-O,k=c-_,L=d-P,U=f+D,Y=v+O,B=c+_,W=d+P,G=C.getX(F,N),X=C.getY(F,N),q=C.getX(k,L),j=C.getY(k,L),V=C.getX(U,Y),K=C.getY(U,Y),H=C.getX(B,W),Z=C.getY(B,W),Q=this.strokeTint,J=Q.TL,et=Q.TR,$=Q.BL,tt=Q.BR;if(this.batchQuad(null,H,Z,q,j,G,X,V,K,0,0,1,1,J,et,$,tt,2),!(T<=2)){var it=this.prevQuad,nt=this.firstQuad;y>0&&it[4]?this.batchQuad(null,H,Z,q,j,it[0],it[1],it[2],it[3],0,0,1,1,J,et,$,tt,2):(nt[0]=H,nt[1]=Z,nt[2]=q,nt[3]=j,nt[4]=1),E&&nt[4]?this.batchQuad(null,G,X,V,K,nt[0],nt[1],nt[2],nt[3],0,0,1,1,J,et,$,tt,2):(it[0]=G,it[1]=X,it[2]=V,it[3]=K,it[4]=1)}}});g.exports=a},26159:function(g,p,i){var u=i(69186),e=i(25738),l=i(91101),o=i(90117),t=i(89262),s=new u({Extends:t,initialize:function(n){n.vertShader=e(n,"vertShader",o),n.fragShader=e(n,"fragShader",l),n.attributes=e(n,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),t.call(this,n)},onRender:function(n,r){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",r.zoom)},batchPointLight:function(n,r,h,a,c,d,f,v,m,x,T,y){var E=n.color,w=n.intensity,R=n.radius,C=n.attenuation,A=E.r*w,S=E.g*w,b=E.b*w,_=r.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(h,a,T,y,R,C,A,S,b,_),this.batchLightVert(c,d,T,y,R,C,A,S,b,_),this.batchLightVert(f,v,T,y,R,C,A,S,b,_),this.batchLightVert(h,a,T,y,R,C,A,S,b,_),this.batchLightVert(f,v,T,y,R,C,A,S,b,_),this.batchLightVert(m,x,T,y,R,C,A,S,b,_)},batchLightVert:function(n,r,h,a,c,d,f,v,m,x){var T=this.vertexViewF32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++y]=n,T[++y]=r,T[++y]=h,T[++y]=a,T[++y]=c,T[++y]=d,T[++y]=f,T[++y]=v,T[++y]=m,T[++y]=x,this.vertexCount++}});g.exports=s},35989:function(g,p,i){var u=i(69186),e=i(40013),l=i(25738),o=i(32603),t=i(42193),s=i(89262),n=new u({Extends:s,initialize:function(r){r.renderTarget=l(r,"renderTarget",1),r.fragShader=l(r,"fragShader",o),r.vertShader=l(r,"vertShader",t),r.attributes=l(r,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),r.batchSize=1,r.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],s.call(this,r),this.isPostFX=!0,this.gameObject,this.colorMatrix=new e,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){s.prototype.boot.call(this);var r=this.manager.UTILITY_PIPELINE;this.fullFrame1=r.fullFrame1,this.fullFrame2=r.fullFrame2,this.halfFrame1=r.halfFrame1,this.halfFrame2=r.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(r){this.bindAndDraw(r)},copyFrame:function(r,h,a,c,d){this.manager.copyFrame(r,h,a,c,d)},copyToGame:function(r){this.manager.copyToGame(r)},drawFrame:function(r,h,a){this.manager.drawFrame(r,h,a,this.colorMatrix)},blendFrames:function(r,h,a,c,d){this.manager.blendFrames(r,h,a,c,d)},blendFramesAdditive:function(r,h,a,c,d){this.manager.blendFramesAdditive(r,h,a,c,d)},clearFrame:function(r,h){this.manager.clearFrame(r,h)},blitFrame:function(r,h,a,c,d,f){this.manager.blitFrame(r,h,a,c,d,f)},copyFrameRect:function(r,h,a,c,d,f,v,m){this.manager.copyFrameRect(r,h,a,c,d,f,v,m)},bindAndDraw:function(r,h,a,c,d){a===void 0&&(a=!0),c===void 0&&(c=!0);var f=this.gl,v=this.renderer;this.bind(d),this.set1i("uMainSampler",0),h?(f.viewport(0,0,h.width,h.height),f.bindFramebuffer(f.FRAMEBUFFER,h.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,h.texture,0),a&&(c?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT))):(v.popFramebuffer(!1,!1,!1),v.currentFramebuffer||f.viewport(0,0,v.width,v.height)),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,r.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),h?(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,null)):v.resetTextures()}});g.exports=n},67239:function(g,p,i){var u=i(69186),e=i(25738),l=i(14869),o=new u({Extends:l,initialize:function(t){t.topology=5,t.batchSize=e(t,"batchSize",256),l.call(this,t)}});g.exports=o},57434:function(g,p,i){var u=i(69186),e=i(25738),l=i(14869),o=i(77917),t=i(85833),s=i(89262),n=new u({Extends:l,initialize:function(r){r.fragShader=e(r,"fragShader",o),r.vertShader=e(r,"vertShader",t),r.forceZero=!0,l.call(this,r)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0)}});g.exports=n},21898:function(g,p,i){var u=i(7870),e=i(87626),l=i(69186),o=i(40013),t=i(86184),s=i(196),n=i(25738),r=i(4934),h=i(42193),a=i(89262),c=new l({Extends:a,initialize:function(d){d.renderTarget=n(d,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),d.vertShader=n(d,"vertShader",h),d.shaders=n(d,"shaders",[{name:"Copy",fragShader:s},{name:"AddBlend",fragShader:u},{name:"LinearBlend",fragShader:r},{name:"ColorMatrix",fragShader:t}]),d.attributes=n(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.batchSize=1,a.call(this,d),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){a.prototype.boot.call(this);var d=this.shaders,f=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(d,f,v,m,x){v===void 0&&(v=1),m===void 0&&(m=!0),x===void 0&&(x=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",v),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),f?(T.viewport(0,0,f.width,f.height),T.bindFramebuffer(T.FRAMEBUFFER,f.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,f.texture,0)):T.viewport(0,0,d.width,d.height),m&&(x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(d,f,v,m,x,T){v===void 0&&(v=1),m===void 0&&(m=!0),x===void 0&&(x=!0),T===void 0&&(T=!1);var y=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",v),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture),d.height>f.height)y.viewport(0,0,d.width,d.height),this.setTargetUVs(d,f);else{var E=f.height-d.height;y.viewport(0,E,d.width,d.height)}if(y.bindFramebuffer(y.FRAMEBUFFER,f.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,f.texture,0),m&&(x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT)),T){var w=this.renderer.currentBlendMode;this.renderer.setBlendMode(e.ERASE)}y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),T&&this.renderer.setBlendMode(w),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,f,v,m,x,T,y,E){y===void 0&&(y=!0),E===void 0&&(E=!0);var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d.texture,0),y&&(E?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,f.texture),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,v,m,x,T),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},copyToGame:function(d){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(d,f,v,m){v===void 0&&(v=!0),m===void 0&&(m=this.colorMatrix);var x=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",m.getData()),this.set1f("uAlpha",m.alpha),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,d.texture),f?(x.viewport(0,0,f.width,f.height),x.bindFramebuffer(x.FRAMEBUFFER,f.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,f.texture,0)):x.viewport(0,0,d.width,d.height),v?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blendFrames:function(d,f,v,m,x,T){m===void 0&&(m=1),x===void 0&&(x=!0),T===void 0&&(T=this.linearShader);var y=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",m),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture),y.activeTexture(y.TEXTURE1),y.bindTexture(y.TEXTURE_2D,f.texture),v?(y.bindFramebuffer(y.FRAMEBUFFER,v.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,v.texture,0),y.viewport(0,0,v.width,v.height)):y.viewport(0,0,d.width,d.height),x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFramesAdditive:function(d,f,v,m,x){this.blendFrames(d,f,v,m,x,this.addShader)},clearFrame:function(d,f){f===void 0&&(f=!0);var v=this.gl;v.viewport(0,0,d.width,d.height),v.bindFramebuffer(v.FRAMEBUFFER,d.framebuffer),f?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1),v.clear(v.COLOR_BUFFER_BIT);var m=this.renderer.currentFramebuffer;v.bindFramebuffer(v.FRAMEBUFFER,m)},setUVs:function(d,f,v,m,x,T,y,E){var w=this.vertexViewF32;w[2]=d,w[3]=f,w[6]=v,w[7]=m,w[10]=x,w[11]=T,w[14]=d,w[15]=f,w[18]=x,w[19]=T,w[22]=y,w[23]=E},setTargetUVs:function(d,f){var v=f.height/d.height;v=v>.5?.5-(v-.5):.5-v+.5,this.setUVs(0,v,0,1+v,1,1+v,1,v)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});g.exports=c},46098:function(g){g.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},85137:function(g){g.exports="pipelineafterflush"},92362:function(g){g.exports="pipelinebeforeflush"},13143:function(g){g.exports="pipelinebind"},31156:function(g){g.exports="pipelineboot"},27055:function(g){g.exports="pipelinedestroy"},47686:function(g){g.exports="pipelinerebind"},69139:function(g){g.exports="pipelineresize"},42789:function(g,p,i){g.exports={AFTER_FLUSH:i(85137),BEFORE_FLUSH:i(92362),BIND:i(13143),BOOT:i(31156),DESTROY:i(27055),REBIND:i(47686),RESIZE:i(69139)}},86678:function(g,p,i){var u=i(46098),e=i(72646),l={BitmapMaskPipeline:i(18923),Events:i(42789),GraphicsPipeline:i(48623),LightPipeline:i(63174),MultiPipeline:i(14869),PointLightPipeline:i(26159),PostFXPipeline:i(35989),RopePipeline:i(67239),SinglePipeline:i(57434),UtilityPipeline:i(21898)};l=e(!1,l,u),g.exports=l},7870:function(g){g.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},91160:function(g){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},29874:function(g){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},86184:function(g){g.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},196:function(g){g.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},79268:function(g){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},16575:function(g){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},80376:function(g){g.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},4934:function(g){g.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},53121:function(g){g.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},31952:function(g){g.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},91101:function(g){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},90117:function(g){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},32603:function(g){g.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},42193:function(g){g.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},77917:function(g){g.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},85833:function(g){g.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},70360:function(g,p,i){var u=i(24790),e=i(69186),l=i(26729),o=i(48958),t=i(24496),s=i(57886),n=i(44095),r=i(84846),h=i(45733),a=i(75380),c=i(54762),d=i(99e3),f=i(17321),v=new e({Extends:l,initialize:function(m){l.call(this),this.game=m,this.canvas,this.canvasBounds=new a,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=u.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new f(1,1),this.autoRound=!1,this.autoCenter=u.CENTER.NO_CENTER,this.orientation=u.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(t.BOOT,this.boot,this)},boot:function(){var m=this.game;this.canvas=m.canvas,this.fullscreen=m.device.fullscreen,this.scaleMode!==u.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===u.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),m.events.on(t.PRE_STEP,this.step,this),m.events.once(t.READY,this.refresh,this),m.events.once(t.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(m){this.getParent(m),this.getParentBounds();var x=m.width,T=m.height,y=m.scaleMode,E=m.zoom,w=m.autoRound;if(typeof x=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var C=parseInt(x,10)/100;x=Math.floor(R*C)}if(typeof T=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var S=parseInt(T,10)/100;T=Math.floor(A*S)}this.scaleMode=y,this.autoRound=w,this.autoCenter=m.autoCenter,this.resizeInterval=m.resizeInterval,w&&(x=Math.floor(x),T=Math.floor(T)),this.gameSize.setSize(x,T),E===u.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(x,T),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),m.minWidth>0&&this.displaySize.setMin(m.minWidth*E,m.minHeight*E),m.maxWidth>0&&this.displaySize.setMax(m.maxWidth*E,m.maxHeight*E),this.displaySize.setSize(x,T),this.orientation=r(x,T)},getParent:function(m){var x=m.parent;if(x!==null){if(this.parent=n(x),this.parentIsWindow=this.parent===document.body,m.expandParent&&m.scaleMode!==u.SCALE_MODE.NONE){var T=this.parent.getBoundingClientRect();(this.parentIsWindow||T.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",T=this.parent.getBoundingClientRect(),this.parentIsWindow||T.height!==0||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}m.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(m.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var m=this.parentSize,x=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(x.height=s(!0));var T=x.width,y=x.height;return(m.width!==T||m.height!==y)&&(m.setSize(T,y),!0)},lockOrientation:function(m){var x=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!x&&x.call(screen,m)},setParentSize:function(m,x){return this.parentSize.setSize(m,x),this.refresh()},setGameSize:function(m,x){var T=this.autoRound;T&&(m=Math.floor(m),x=Math.floor(x));var y=this.width,E=this.height;return this.gameSize.resize(m,x),this.baseSize.resize(m,x),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(m/x),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(y,E)},resize:function(m,x){var T=this.zoom,y=this.autoRound;y&&(m=Math.floor(m),x=Math.floor(x));var E=this.width,w=this.height;this.gameSize.resize(m,x),this.baseSize.resize(m,x),y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(m*T,x*T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,C=m*T,A=x*T;return y&&(C=Math.floor(C),A=Math.floor(A)),C===m&&A===x||(R.width=C+"px",R.height=A+"px"),this.refresh(E,w)},setZoom:function(m){return this.zoom=m,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(m,x){m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var T=this.game.domContainer;if(T){this.baseSize.setCSS(T);var y=this.canvas.style,E=T.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=y.marginLeft,E.marginTop=y.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,m,x),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var m=r(this.width,this.height);m!==this.orientation&&(this.orientation=m,this.emit(o.ORIENTATION_CHANGE,m))}},updateScale:function(){var m,x,T=this.canvas.style,y=this.gameSize.width,E=this.gameSize.height,w=this.zoom,R=this.autoRound;this.scaleMode===u.SCALE_MODE.NONE?(this.displaySize.setSize(y*w,E*w),m=this.displaySize.width,x=this.displaySize.height,R&&(m=Math.floor(m),x=Math.floor(x)),this._resetZoom&&(T.width=m+"px",T.height=x+"px",this._resetZoom=!1)):this.scaleMode===u.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),m=this.displaySize.width,x=this.displaySize.height,R&&(m=Math.floor(m),x=Math.floor(x)),this.canvas.width=m,this.canvas.height=x):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),m=this.displaySize.width,x=this.displaySize.height,R&&(m=Math.floor(m),x=Math.floor(x)),T.width=m+"px",T.height=x+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var m=d(this.parentSize.width,this.gameSize.width,0,!0),x=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(m,x),1)},updateCenter:function(){var m=this.autoCenter;if(m!==u.CENTER.NO_CENTER){var x=this.canvas,T=x.style,y=x.getBoundingClientRect(),E=y.width,w=y.height,R=Math.floor((this.parentSize.width-E)/2),C=Math.floor((this.parentSize.height-w)/2);m===u.CENTER.CENTER_HORIZONTALLY?C=0:m===u.CENTER.CENTER_VERTICALLY&&(R=0),T.marginLeft=R+"px",T.marginTop=C+"px"}},updateBounds:function(){var m=this.canvasBounds,x=this.canvas.getBoundingClientRect();m.x=x.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),m.y=x.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),m.width=x.width,m.height=x.height},transformX:function(m){return(m-this.canvasBounds.left)*this.displayScale.x},transformY:function(m){return(m-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(m){m===void 0&&(m={navigationUI:"hide"});var x=this.fullscreen;if(x.available){if(!x.active){var T=this.getFullscreenTarget();x.keyboard?T[x.request](Element.ALLOW_KEYBOARD_INPUT):T[x.request](m)}}else this.emit(o.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(m){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,m)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var m=document.createElement("div");m.style.margin="0",m.style.padding="0",m.style.width="100%",m.style.height="100%",this.fullscreenTarget=m,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var m=this.fullscreenTarget;if(m&&m.parentNode){var x=m.parentNode;x.insertBefore(this.canvas,m),x.removeChild(m)}}},stopFullscreen:function(){var m=this.fullscreen;if(!m.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;m.active&&document[m.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(m){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(m)},startListeners:function(){var m=this,x=this.listeners;x.orientationChange=function(){m.updateBounds(),m._checkOrientation=!0,m.dirty=!0},x.windowResize=function(){m.updateBounds(),m.dirty=!0},window.addEventListener("orientationchange",x.orientationChange,!1),window.addEventListener("resize",x.windowResize,!1),this.fullscreen.available&&(x.fullScreenChange=function(T){return m.onFullScreenChange(T)},x.fullScreenError=function(T){return m.onFullScreenError(T)},["webkit","moz",""].forEach(function(T){document.addEventListener(T+"fullscreenchange",x.fullScreenChange,!1),document.addEventListener(T+"fullscreenerror",x.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",x.fullScreenChange,!1),document.addEventListener("MSFullscreenError",x.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(m,x){this.parent&&(this._lastCheck+=x,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var m=this.listeners;window.removeEventListener("orientationchange",m.orientationChange,!1),window.removeEventListener("resize",m.windowResize,!1),["webkit","moz",""].forEach(function(x){document.removeEventListener(x+"fullscreenchange",m.fullScreenChange,!1),document.removeEventListener(x+"fullscreenerror",m.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",m.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===u.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===u.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});g.exports=v},80756:function(g){g.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},90726:function(g){g.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},43620:function(g){g.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},31926:function(g){g.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},24790:function(g,p,i){var u={CENTER:i(80756),ORIENTATION:i(90726),SCALE_MODE:i(43620),ZOOM:i(31926)};g.exports=u},25376:function(g){g.exports="enterfullscreen"},11313:function(g){g.exports="fullscreenfailed"},13578:function(g){g.exports="fullscreenunsupported"},48530:function(g){g.exports="leavefullscreen"},76037:function(g){g.exports="orientationchange"},43067:function(g){g.exports="resize"},48958:function(g,p,i){g.exports={ENTER_FULLSCREEN:i(25376),FULLSCREEN_FAILED:i(11313),FULLSCREEN_UNSUPPORTED:i(13578),LEAVE_FULLSCREEN:i(48530),ORIENTATION_CHANGE:i(76037),RESIZE:i(43067)}},17467:function(g,p,i){var u=i(72646),e=i(24790),l={Center:i(80756),Events:i(48958),Orientation:i(90726),ScaleManager:i(70360),ScaleModes:i(43620),Zoom:i(31926)};l=u(!1,l,e.CENTER),l=u(!1,l,e.ORIENTATION),l=u(!1,l,e.SCALE_MODE),l=u(!1,l,e.ZOOM),g.exports=l},12102:function(g,p,i){var u=i(25738),e=i(10963);g.exports=function(l){var o=l.game.config.defaultPhysicsSystem,t=u(l.settings,"physics",!1);if(o||t){var s=[];if(o&&s.push(e(o+"Physics")),t)for(var n in t)n=e(n.concat("Physics")),s.indexOf(n)===-1&&s.push(n);return s}}},93990:function(g,p,i){var u=i(25738);g.exports=function(e){var l=e.plugins.getDefaultScenePlugins(),o=u(e.settings,"plugins",!1);return Array.isArray(o)?o:l||[]}},85417:function(g){var p={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter",facebook:"facebook"};g.exports=p},61116:function(g,p,i){var u=i(69186),e=i(72444),l=new u({initialize:function(o){this.sys=new e(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins,this.renderer},update:function(){}});g.exports=l},26236:function(g,p,i){var u=i(69186),e=i(7875),l=i(12063),o=i(24496),t=i(76076),s=i(40),n=i(45733),r=i(61116),h=i(72444),a=new u({initialize:function(c,d){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this._pending.push({key:"default",scene:d[f],autoStart:f===0,data:{}})}c.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var c,d,f,v;for(c=0;c<this._pending.length;c++){var m;f=(d=this._pending[c]).key,(v=d.scene)instanceof r?m=this.createSceneFromInstance(f,v):typeof v=="object"?m=this.createSceneFromObject(f,v):typeof v=="function"&&(m=this.createSceneFromFunction(f,v)),f=m.sys.settings.key,this.keys[f]=m,this.scenes.push(m),this._data[f]&&(m.sys.settings.data=this._data[f].data,this._data[f].autoStart&&(d.autoStart=!0)),(d.autoStart||m.sys.settings.active)&&this._start.push(f)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)d=this._start[c],this.start(d);this._start.length=0}},processQueue:function(){var c=this._pending.length,d=this._queue.length;if(c!==0||d!==0){var f,v;if(c){for(f=0;f<c;f++)v=this._pending[f],this.add(v.key,v.scene,v.autoStart,v.data);for(f=0;f<this._start.length;f++)v=this._start[f],this.start(v);return this._start.length=0,void(this._pending.length=0)}for(f=0;f<this._queue.length;f++)this[(v=this._queue[f]).op](v.keyA,v.keyB);this._queue.length=0}},add:function(c,d,f,v){return f===void 0&&(f=!1),v===void 0&&(v={}),this.isProcessing||!this.isBooted?(this._pending.push({key:c,scene:d,autoStart:f,data:v}),this.isBooted||(this._data[c]={data:v}),null):(c=this.getKey(c,d),d instanceof r?m=this.createSceneFromInstance(c,d):typeof d=="object"?(d.key=c,m=this.createSceneFromObject(c,d)):typeof d=="function"&&(m=this.createSceneFromFunction(c,d)),m.sys.settings.data=v,c=m.sys.settings.key,this.keys[c]=m,this.scenes.push(m),(f||m.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),m);var m},remove:function(c){if(this.isProcessing)this._queue.push({op:"remove",keyA:c,keyB:null});else{var d=this.getScene(c);if(!d||d.sys.isTransitioning())return this;var f=this.scenes.indexOf(d),v=d.sys.settings.key;f>-1&&(delete this.keys[v],this.scenes.splice(f,1),this._start.indexOf(v)>-1&&(f=this._start.indexOf(v),this._start.splice(f,1)),d.sys.destroy())}return this},bootScene:function(c){var d,f=c.sys,v=f.settings;f.sceneUpdate=n,c.init&&(c.init.call(c,v.data),v.status=e.INIT,v.isTransition&&f.events.emit(l.TRANSITION_INIT,v.transitionFrom,v.transitionDuration)),f.load&&(d=f.load).reset(),d&&c.preload?(c.preload.call(c),d.list.size===0?this.create(c):(v.status=e.LOADING,d.once(s.COMPLETE,this.loadComplete,this),d.start())):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,d){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;f>=0;f--){var v=this.scenes[f].sys;v.settings.status>e.START&&v.settings.status<=e.RUNNING&&v.step(c,d)}},render:function(c){for(var d=0;d<this.scenes.length;d++){var f=this.scenes[d].sys;f.settings.visible&&f.settings.status>=e.LOADING&&f.settings.status<e.SLEEPING&&f.render(c)}this.isProcessing=!1},create:function(c){var d=c.sys,f=d.settings;c.create&&(f.status=e.CREATING,c.create.call(c,f.data),f.status===e.DESTROYED)||(f.isTransition&&d.events.emit(l.TRANSITION_START,f.transitionFrom,f.transitionDuration),c.update&&(d.sceneUpdate=c.update),f.status=e.RUNNING,d.events.emit(l.CREATE,c))},createSceneFromFunction:function(c,d){var f=new d;if(f instanceof r){var v=f.sys.settings.key;if(v!==""&&(c=v),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return this.createSceneFromInstance(c,f)}return f.sys=new h(f),f.sys.settings.key=c,f.sys.init(this.game),f},createSceneFromInstance:function(c,d){return d.sys.settings.key===""&&(d.sys.settings.key=c),d.sys.init(this.game),d},createSceneFromObject:function(c,d){var f=new r(d),v=f.sys.settings.key;v!==""?c=v:f.sys.settings.key=c,f.sys.init(this.game);for(var m=["init","preload","create","update","render"],x=0;x<m.length;x++){var T=t(d,m[x],null);T&&(f[m[x]]=T)}if(d.hasOwnProperty("extend")){for(var y in d.extend)if(d.extend.hasOwnProperty(y)){var E=d.extend[y];y==="data"&&f.hasOwnProperty("data")&&typeof E=="object"?f.data.merge(E):y!=="sys"&&(f[y]=E)}}return f},getKey:function(c,d){if(c||(c="default"),typeof d=="function")return c;if(d instanceof r?c=d.sys.settings.key:typeof d=="object"&&d.hasOwnProperty("key")&&(c=d.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return c},getScenes:function(c,d){c===void 0&&(c=!0),d===void 0&&(d=!1);for(var f=[],v=this.scenes,m=0;m<v.length;m++){var x=v[m];x&&(!c||c&&x.sys.isActive())&&f.push(x)}return d?f.reverse():f},getScene:function(c){if(typeof c=="string"){if(this.keys[c])return this.keys[c]}else for(var d=0;d<this.scenes.length;d++)if(c===this.scenes[d])return c;return null},isActive:function(c){var d=this.getScene(c);return d?d.sys.isActive():null},isPaused:function(c){var d=this.getScene(c);return d?d.sys.isPaused():null},isVisible:function(c){var d=this.getScene(c);return d?d.sys.isVisible():null},isSleeping:function(c){var d=this.getScene(c);return d?d.sys.isSleeping():null},pause:function(c,d){var f=this.getScene(c);return f&&f.sys.pause(d),this},resume:function(c,d){var f=this.getScene(c);return f&&f.sys.resume(d),this},sleep:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.sleep(d),this},wake:function(c,d){var f=this.getScene(c);return f&&f.sys.wake(d),this},run:function(c,d){var f=this.getScene(c);if(!f){for(var v=0;v<this._pending.length;v++)if(this._pending[v].key===c){this.queueOp("start",c,d);break}return this}f.sys.isSleeping()?f.sys.wake(d):f.sys.isPaused()?f.sys.resume(d):this.start(c,d)},start:function(c,d){if(!this.isBooted)return this._data[c]={autoStart:!0,data:d},this;var f=this.getScene(c);if(f){var v,m=f.sys;if(m.isActive()||m.isPaused())m.shutdown(),m.sceneUpdate=n,m.start(d);else if(m.sceneUpdate=n,m.start(d),m.load&&(v=m.load),v&&m.settings.hasOwnProperty("pack")&&(v.reset(),v.addPack({payload:m.settings.pack})))return m.settings.status=e.LOADING,v.once(s.COMPLETE,this.payloadComplete,this),v.start(),this;this.bootScene(f)}return this},stop:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.shutdown(d),this},switch:function(c,d){var f=this.getScene(c),v=this.getScene(d);return f&&v&&f!==v&&(this.sleep(c),this.isSleeping(d)?this.wake(d):this.start(d)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var d=this.getScene(c);return this.scenes.indexOf(d)},bringToTop:function(c){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:c,keyB:null});else{var d=this.getIndex(c);if(d!==-1&&d<this.scenes.length){var f=this.getScene(c);this.scenes.splice(d,1),this.scenes.push(f)}}return this},sendToBack:function(c){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:c,keyB:null});else{var d=this.getIndex(c);if(d!==-1&&d>0){var f=this.getScene(c);this.scenes.splice(d,1),this.scenes.unshift(f)}}return this},moveDown:function(c){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:c,keyB:null});else{var d=this.getIndex(c);if(d>0){var f=d-1,v=this.getScene(c),m=this.getAt(f);this.scenes[d]=m,this.scenes[f]=v}}return this},moveUp:function(c){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:c,keyB:null});else{var d=this.getIndex(c);if(d<this.scenes.length-1){var f=d+1,v=this.getScene(c),m=this.getAt(f);this.scenes[d]=m,this.scenes[f]=v}}return this},moveAbove:function(c,d){if(c===d)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:c,keyB:d});else{var f=this.getIndex(c),v=this.getIndex(d);if(f!==-1&&v!==-1){var m=this.getAt(v);this.scenes.splice(v,1),this.scenes.splice(f+1,0,m)}}return this},moveBelow:function(c,d){if(c===d)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:c,keyB:d});else{var f=this.getIndex(c),v=this.getIndex(d);if(f!==-1&&v!==-1){var m=this.getAt(v);this.scenes.splice(v,1),f===0?this.scenes.unshift(m):this.scenes.splice(f,0,m)}}return this},queueOp:function(c,d,f){return this._queue.push({op:c,keyA:d,keyB:f}),this},swapPosition:function(c,d){if(c===d)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:c,keyB:d});else{var f=this.getIndex(c),v=this.getIndex(d);if(f!==v&&f!==-1&&v!==-1){var m=this.getAt(f);this.scenes[f]=this.scenes[v],this.scenes[v]=m}}return this},dump:function(){for(var c=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var v=this.scenes[f].sys,m=!v.settings.visible||v.settings.status!==e.RUNNING&&v.settings.status!==e.PAUSED?"[-] ":"[*] ";m+=v.settings.key+" ("+d[v.settings.status]+")",c.push(m)}console.log(c.join(`
`))},destroy:function(){for(var c=0;c<this.scenes.length;c++)this.scenes[c].sys.destroy();this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});g.exports=a},7656:function(g,p,i){var u=i(2543),e=i(69186),l=i(12063),o=i(25738),t=i(46236),s=new e({initialize:function(n){this.scene=n,this.systems=n.sys,this.settings=n.sys.settings,this.key=n.sys.settings.key,this.manager=n.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,n.sys.events.once(l.BOOT,this.boot,this),n.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},start:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,r),this},restart:function(n){var r=this.key;return this.manager.queueOp("stop",r),this.manager.queueOp("start",r,n),this},transition:function(n){n===void 0&&(n={});var r=o(n,"target",!1),h=this.manager.getScene(r);if(!r||!this.checkValidTransition(h))return!1;var a=o(n,"duration",1e3);this._elapsed=0,this._target=h,this._duration=a,this._willSleep=o(n,"sleep",!1),this._willRemove=o(n,"remove",!1);var c=o(n,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=o(n,"onUpdateScope",this.scene));var d=o(n,"allowInput",!1);this.settings.transitionAllowInput=d;var f=h.sys.settings;return f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=a,f.transitionAllowInput=d,o(n,"moveAbove",!1)?this.manager.moveAbove(this.key,r):o(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,r),h.sys.isSleeping()?h.sys.wake(o(n,"data")):this.manager.start(r,o(n,"data")),this.systems.events.emit(l.TRANSITION_OUT,h,a),this.systems.events.on(l.UPDATE,this.step,this),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,r){this._elapsed+=r,this.transitionProgress=u(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,r=this._target.sys.settings;this.systems.events.off(l.UPDATE,this.step,this),n.events.emit(l.TRANSITION_COMPLETE,this.scene),r.isTransition=!1,r.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,r,h,a){return this.manager.add(n,r,h,a)},launch:function(n,r){return n&&n!==this.key&&this.manager.queueOp("start",n,r),this},run:function(n,r){return n&&n!==this.key&&this.manager.queueOp("run",n,r),this},pause:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,r),this},resume:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,r),this},sleep:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,r),this},wake:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,r),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,r){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,r),this},setActive:function(n,r,h){r===void 0&&(r=this.key);var a=this.manager.getScene(r);return a&&a.sys.setActive(n,h),this},setVisible:function(n,r){r===void 0&&(r=this.key);var h=this.manager.getScene(r);return h&&h.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,r){return r===void 0&&(r=this.key),n!==r&&this.manager.swapPosition(n,r),this},moveAbove:function(n,r){return r===void 0&&(r=this.key),n!==r&&this.manager.moveAbove(n,r),this},moveBelow:function(n,r){return r===void 0&&(r=this.key),n!==r&&this.manager.moveBelow(n,r),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(l.SHUTDOWN,this.shutdown,this),n.off(l.POST_UPDATE,this.step,this),n.off(l.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});t.register("ScenePlugin",s,"scenePlugin"),g.exports=s},95985:function(g,p,i){var u=i(7875),e=i(76076),l=i(50247),o=i(85417),t={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:u.PENDING,key:e(s,"key",""),active:e(s,"active",!1),visible:e(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:e(s,"pack",!1),cameras:e(s,"cameras",null),map:e(s,"map",l(o,e(s,"mapAdd",{}))),physics:e(s,"physics",{}),loader:e(s,"loader",{}),plugins:e(s,"plugins",!1),input:e(s,"input",{})}}};g.exports=t},72444:function(g,p,i){var u=i(69186),e=i(7875),l=i(32122),o=i(12063),t=i(12102),s=i(93990),n=i(11318),r=i(45733),h=i(95985),a=new u({initialize:function(c,d){this.scene=c,this.game,this.renderer,this.facebook,this.config=d,this.settings=h.create(d),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=r},init:function(c){this.settings.status=e.INIT,this.sceneUpdate=r,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var d=c.plugins;this.plugins=d,d.addToScene(this,l.Global,[l.CoreScene,s(this),t(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(c,d){var f=this.events;f.emit(o.PRE_UPDATE,c,d),f.emit(o.UPDATE,c,d),this.sceneUpdate.call(this.scene,c,d),f.emit(o.POST_UPDATE,c,d)},render:function(c){var d=this.displayList;d.depthSort(),this.events.emit(o.PRE_RENDER,c),this.cameras.render(c,d),this.events.emit(o.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var d=this.events,f=this.settings;return this.settings.active&&(f.status=e.PAUSED,f.active=!1,d.emit(o.PAUSE,this,c)),this},resume:function(c){var d=this.events,f=this.settings;return this.settings.active||(f.status=e.RUNNING,f.active=!0,d.emit(o.RESUME,this,c)),this},sleep:function(c){var d=this.events,f=this.settings;return f.status=e.SLEEPING,f.active=!1,f.visible=!1,d.emit(o.SLEEP,this,c),this},wake:function(c){var d=this.events,f=this.settings;return f.status=e.RUNNING,f.active=!0,f.visible=!0,d.emit(o.WAKE,this,c),f.isTransition&&d.emit(o.TRANSITION_WAKE,f.transitionFrom,f.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===e.SLEEPING},isActive:function(){return this.settings.status===e.RUNNING},isPaused:function(){return this.settings.status===e.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,d){return c?this.resume(d):this.pause(d)},start:function(c){var d=this.events,f=this.settings;c&&(f.data=c),f.status=e.START,f.active=!0,f.visible=!0,d.emit(o.START,this),d.emit(o.READY,this,c)},shutdown:function(c){var d=this.events,f=this.settings;d.off(o.TRANSITION_INIT),d.off(o.TRANSITION_START),d.off(o.TRANSITION_COMPLETE),d.off(o.TRANSITION_OUT),f.status=e.SHUTDOWN,f.active=!1,f.visible=!1,this.renderer===n.WEBGL&&this.renderer.resetTextures(!0),d.emit(o.SHUTDOWN,this,c)},destroy:function(){var c=this.events,d=this.settings;d.status=e.DESTROYED,d.active=!1,d.visible=!1,c.emit(o.DESTROY,this),c.removeAllListeners();for(var f=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],v=0;v<f.length;v++)this[f[v]]=null}});g.exports=a},7875:function(g){g.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},24872:function(g){g.exports="addedtoscene"},95186:function(g){g.exports="boot"},81623:function(g){g.exports="create"},91133:function(g){g.exports="destroy"},91076:function(g){g.exports="pause"},99263:function(g){g.exports="postupdate"},54876:function(g){g.exports="prerender"},63721:function(g){g.exports="preupdate"},32250:function(g){g.exports="ready"},308:function(g){g.exports="removedfromscene"},41001:function(g){g.exports="render"},12948:function(g){g.exports="resume"},90810:function(g){g.exports="shutdown"},58227:function(g){g.exports="sleep"},52308:function(g){g.exports="start"},86743:function(g){g.exports="transitioncomplete"},89163:function(g){g.exports="transitioninit"},58448:function(g){g.exports="transitionout"},63079:function(g){g.exports="transitionstart"},88193:function(g){g.exports="transitionwake"},5346:function(g){g.exports="update"},6810:function(g){g.exports="wake"},12063:function(g,p,i){g.exports={ADDED_TO_SCENE:i(24872),BOOT:i(95186),CREATE:i(81623),DESTROY:i(91133),PAUSE:i(91076),POST_UPDATE:i(99263),PRE_RENDER:i(54876),PRE_UPDATE:i(63721),READY:i(32250),REMOVED_FROM_SCENE:i(308),RENDER:i(41001),RESUME:i(12948),SHUTDOWN:i(90810),SLEEP:i(58227),START:i(52308),TRANSITION_COMPLETE:i(86743),TRANSITION_INIT:i(89163),TRANSITION_OUT:i(58448),TRANSITION_START:i(63079),TRANSITION_WAKE:i(88193),UPDATE:i(5346),WAKE:i(6810)}},1459:function(g,p,i){var u=i(7875),e=i(72646),l={Events:i(12063),GetPhysicsPlugins:i(12102),GetScenePlugins:i(93990),SceneManager:i(26236),ScenePlugin:i(7656),Settings:i(95985),Systems:i(72444)};l=e(!1,l,u),g.exports=l},93912:function(g,p,i){var u=i(69186),e=i(26729),l=i(21577),o=i(72646),t=i(45733),s=new u({Extends:e,initialize:function(n,r,h){e.call(this),this.manager=n,this.key=r,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,h),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!(!n||!n.name||typeof n.name!="string"||(this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),1):(n=o(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,0)))},updateMarker:function(n){return!(!n||!n.name||typeof n.name!="string"||(this.markers[n.name]?(this.markers[n.name]=o(!0,this.markers[n.name],n),0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),1)))},removeMarker:function(n){var r=this.markers[n];return r?(this.markers[n]=null,r):null},play:function(n,r){if(n===void 0&&(n=""),typeof n=="object"&&(r=n,n=""),typeof n!="string")return!1;if(n){if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=o(this.currentConfig,r),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:t,calculateRate:function(){var n=this.currentConfig.detune+this.manager.detune,r=Math.pow(1.0005777895065548,n);this.totalRate=this.currentConfig.rate*this.manager.rate*r},destroy:function(){this.pendingRemove||(this.emit(l.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});g.exports=s},84768:function(g,p,i){var u=i(69186),e=i(98409),l=i(26729),o=i(21577),t=i(24496),s=i(45733),n=i(14999),r=i(39161),h=new u({Extends:l,initialize:function(a){l.call(this),this.game=a,this.jsonCache=a.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,a.events.on(t.BLUR,this.onGameBlur,this),a.events.on(t.FOCUS,this.onGameFocus,this),a.events.on(t.PRE_STEP,this.update,this),a.events.once(t.DESTROY,this.destroy,this)},add:s,addAudioSprite:function(a,c){c===void 0&&(c={});var d=this.add(a,c);for(var f in d.spritemap=this.jsonCache.get(a).spritemap,d.spritemap)if(d.spritemap.hasOwnProperty(f)){var v=e(c),m=d.spritemap[f];v.loop=!!m.hasOwnProperty("loop")&&m.loop,d.addMarker({name:f,start:m.start,duration:m.end-m.start,config:v})}return d},get:function(a){return r(this.sounds,"key",a)},getAll:function(a){return n(this.sounds,"key",a)},play:function(a,c){var d=this.add(a);return d.once(o.COMPLETE,d.destroy,d),c?c.name?(d.addMarker(c),d.play(c.name)):d.play(c):d.play()},playAudioSprite:function(a,c,d){var f=this.addAudioSprite(a);return f.once(o.COMPLETE,f.destroy,f),f.play(c,d)},remove:function(a){var c=this.sounds.indexOf(a);return c!==-1&&(a.destroy(),this.sounds.splice(c,1),!0)},removeAll:function(){this.sounds.forEach(function(a){a.destroy()}),this.sounds.length=0},removeByKey:function(a){for(var c=0,d=this.sounds.length-1;d>=0;d--){var f=this.sounds[d];f.key===a&&(f.destroy(),this.sounds.splice(d,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(a){a.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(a){a.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(a){a.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(a){var c=0;return this.getAll(a).forEach(function(d){d.stop()&&c++}),c},unlock:s,onBlur:s,onFocus:s,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(a,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var d=this.sounds.length-1;d>=0;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(f){f.update(a,c)})},destroy:function(){this.game.events.off(t.BLUR,this.onGameBlur,this),this.game.events.off(t.FOCUS,this.onGameFocus,this),this.game.events.off(t.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(a,c){var d=this;this.sounds.forEach(function(f,v){f&&!f.pendingRemove&&a.call(c||d,f,v,d.sounds)})},setRate:function(a){return this.rate=a,this},rate:{get:function(){return this._rate},set:function(a){this._rate=a,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(o.GLOBAL_RATE,this,a)}},setDetune:function(a){return this.detune=a,this},detune:{get:function(){return this._detune},set:function(a){this._detune=a,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,a)}}});g.exports=h},72875:function(g,p,i){var u=i(13273),e=i(35384),l=i(36083),o={create:function(t){var s=t.config.audio,n=t.device.audio;return s.noAudio||!n.webAudio&&!n.audioData?new e(t):n.webAudio&&!s.disableWebAudio?new l(t):new u(t)}};g.exports=o},28200:function(g){g.exports="complete"},41564:function(g){g.exports="decodedall"},43739:function(g){g.exports="decoded"},76021:function(g){g.exports="destroy"},81152:function(g){g.exports="detune"},84990:function(g){g.exports="detune"},38279:function(g){g.exports="mute"},25337:function(g){g.exports="rate"},2326:function(g){g.exports="volume"},20514:function(g){g.exports="looped"},77169:function(g){g.exports="loop"},83681:function(g){g.exports="mute"},84889:function(g){g.exports="pan"},49765:function(g){g.exports="pauseall"},60772:function(g){g.exports="pause"},47900:function(g){g.exports="play"},23589:function(g){g.exports="rate"},92032:function(g){g.exports="resumeall"},72361:function(g){g.exports="resume"},68376:function(g){g.exports="seek"},49792:function(g){g.exports="stopall"},69490:function(g){g.exports="stop"},44157:function(g){g.exports="unlocked"},13271:function(g){g.exports="volume"},21577:function(g,p,i){g.exports={COMPLETE:i(28200),DECODED:i(43739),DECODED_ALL:i(41564),DESTROY:i(76021),DETUNE:i(81152),GLOBAL_DETUNE:i(84990),GLOBAL_MUTE:i(38279),GLOBAL_RATE:i(25337),GLOBAL_VOLUME:i(2326),LOOP:i(77169),LOOPED:i(20514),MUTE:i(83681),PAN:i(84889),PAUSE_ALL:i(49765),PAUSE:i(60772),PLAY:i(47900),RATE:i(23589),RESUME_ALL:i(92032),RESUME:i(72361),SEEK:i(68376),STOP_ALL:i(49792),STOP:i(69490),UNLOCKED:i(44157),VOLUME:i(13271)}},8081:function(g,p,i){var u=i(93912),e=i(69186),l=i(21577),o=i(2543),t=new e({Extends:u,initialize:function(s,n,r){if(r===void 0&&(r={}),this.tags=s.game.cache.audio.get(n),!this.tags)throw new Error('There is no audio asset with key "'+n+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,u.call(this,s,n,r)},play:function(s,n){return!(this.manager.isLocked(this,"play",[s,n])||!u.prototype.play.call(this,s,n)||!this.pickAndPlayAudioTag()||(this.emit(l.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!u.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(l.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!u.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(l.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!u.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(l.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,n=this.currentConfig.delay,r=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=r,this.audio.currentTime=r,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*n,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var n=this.tags[s];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var r=[];this.manager.forEachActiveSound(function(a){a.key===this.key&&a.audio&&r.push(a)},this),r.sort(function(a,c){return a.loop===c.loop?c.seek/c.duration-a.seek/a.duration:a.loop?1:-1});var h=r[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){u.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s){if(this.isPlaying)if(this.startTime>0)this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var n=this.currentMarker?this.currentMarker.start:0,r=n+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=r-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,h-r),h=this.audio.currentTime):h<n&&(this.audio.currentTime+=n,h=this.audio.currentTime),h<this.previousTime&&this.emit(l.LOOPED,this);else if(h>=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(l.COMPLETE,this);this.previousTime=h}},destroy:function(){u.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){u.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,this.manager.isLocked(this,"mute",s)||(this.updateMute(),this.emit(l.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,this.manager.isLocked(this,"volume",s)||(this.updateVolume(),this.emit(l.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,this.manager.isLocked(this,l.RATE,s)||(this.calculateRate(),this.emit(l.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,this.manager.isLocked(this,l.DETUNE,s)||(this.calculateRate(),this.emit(l.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||this.startTime>0||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(l.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,this.manager.isLocked(this,"loop",s)||(this.audio&&(this.audio.loop=s),this.emit(l.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.currentConfig.pan},set:function(s){this.currentConfig.pan=s,this.emit(l.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});g.exports=t},13273:function(g,p,i){var u=i(84768),e=i(69186),l=i(21577),o=i(8081),t=new e({Extends:u,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,u.call(this,s)},add:function(s,n){var r=new o(this,s,n);return this.sounds.push(r),r},unlock:function(){this.locked=!1;var s=this;if(this.game.cache.audio.entries.each(function(a,c){for(var d=0;d<c.length;d++)if(c[d].dataset.locked==="true")return s.locked=!0,!1;return!0}),this.locked){var n=!1,r=function(){n=!0},h=function(){if(n)n=!1;else{document.body.removeEventListener("touchmove",r),document.body.removeEventListener("touchend",h);var a=[];if(s.game.cache.audio.entries.each(function(d,f){for(var v=0;v<f.length;v++){var m=f[v];m.dataset.locked==="true"&&a.push(m)}return!0}),a.length!==0){var c=a[a.length-1];c.oncanplaythrough=function(){c.oncanplaythrough=null,a.forEach(function(d){d.dataset.locked="false"}),s.unlocked=!0},a.forEach(function(d){d.load()})}}};this.once(l.UNLOCKED,function(){for(this.forEachActiveSound(function(c){c.currentMarker===null&&c.duration===0&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var a=this.lockedActionsQueue.shift();a.sound[a.prop].apply?a.sound[a.prop].apply(a.sound,a.value||[]):a.sound[a.prop]=a.value}},this),document.body.addEventListener("touchmove",r,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){u.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,n,r){return s.tags[0].dataset.locked==="true"&&(this.lockedActionsQueue.push({sound:s,prop:n,value:r}),!0)},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(l.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(l.GLOBAL_VOLUME,this,s)}}});g.exports=t},56925:function(g,p,i){var u=i(93912),e=i(69186),l=i(26729),o=i(72646),t=function(){return!1},s=function(){return this},n=new e({Extends:l,initialize:function(r,h,a){a===void 0&&(a={}),l.call(this),this.manager=r,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},a),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:t,updateMarker:t,removeMarker:function(){return null},play:t,pause:t,resume:t,stop:t,destroy:function(){u.prototype.destroy.call(this)},setMute:s,setVolume:s,setRate:s,setDetune:s,setSeek:s,setLoop:s,setPan:s});g.exports=n},35384:function(g,p,i){var u=i(84768),e=i(69186),l=i(26729),o=i(56925),t=i(45733),s=new e({Extends:l,initialize:function(n){l.call(this),this.game=n,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,r){var h=new o(this,n,r);return this.sounds.push(h),h},addAudioSprite:function(n,r){var h=this.add(n,r);return h.spritemap={},h},play:function(n,r){return!1},playAudioSprite:function(n,r,h){return!1},remove:function(n){return u.prototype.remove.call(this,n)},removeByKey:function(n){return u.prototype.removeByKey.call(this,n)},pauseAll:t,resumeAll:t,stopAll:t,update:t,setRate:t,setDetune:t,setMute:t,setVolume:t,forEachActiveSound:function(n,r){u.prototype.forEachActiveSound.call(this,n,r)},destroy:function(){u.prototype.destroy.call(this)}});g.exports=s},34630:function(g,p,i){var u=i(93912),e=i(69186),l=i(21577),o=new e({Extends:u,initialize:function(t,s,n){if(n===void 0&&(n={}),this.audioBuffer=t.game.cache.audio.get(s),!this.audioBuffer)throw new Error('Audio key "'+s+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,u.call(this,t,s,n)},play:function(t,s){return!!u.prototype.play.call(this,t,s)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(l.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!u.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(l.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!u.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(l.RESUME,this),0))},stop:function(){return!!u.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(l.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,s=this.currentConfig.delay,n=this.manager.context.currentTime+s,r=(this.currentMarker?this.currentMarker.start:0)+t,h=this.duration-t;this.playTime=n-t,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,r),Math.max(0,h)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,s),Math.max(0,n))},createBufferSource:function(){var t=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(n){n.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),u.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,u.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(l.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(l.LOOPED,this))},destroy:function(){u.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){u.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,s=0;s<this.rateUpdates.length;s++)t+=((s<this.rateUpdates.length-1?this.rateUpdates[s+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[s].time)*this.rateUpdates[s].rate;return t},getLoopTime:function(){for(var t=0,s=0;s<this.rateUpdates.length-1;s++)t+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-t)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(l.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(l.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(l.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(l.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(l.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(l.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(l.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});g.exports=o},36083:function(g,p,i){var u=i(39118),e=i(84768),l=i(69186),o=i(21577),t=i(24496),s=i(34630),n=new l({Extends:e,initialize:function(r){this.context=this.createAudioContext(r),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),e.call(this,r),this.locked&&r.isBooted?this.unlock():r.events.once(t.BOOT,this.unlock,this)},createAudioContext:function(r){var h=r.config.audio;return h.context?(h.context.resume(),h.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(r){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=r,this.masterMuteNode=r.createGain(),this.masterVolumeNode=r.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(r.destination),this.destination=this.masterMuteNode,this},add:function(r,h){var a=new s(this,r,h);return this.sounds.push(a),a},decodeAudio:function(r,h){var a;a=Array.isArray(r)?r:[{key:r,data:h}];for(var c=this.game.cache.audio,d=a.length,f=0;f<a.length;f++){var v=a[f],m=v.key,x=v.data;typeof x=="string"&&(x=u(x));var T=function(E,w){c.add(E,w),this.emit(o.DECODED,E),--d==0&&this.emit(o.DECODED_ALL)}.bind(this,m),y=function(E,w){console.error("Error decoding audio: "+E+" - ",w?w.message:""),--d==0&&this.emit(o.DECODED_ALL)}.bind(this,m);this.context.decodeAudioData(x,T,y)}},unlock:function(){var r=this,h=document.body,a=function c(){if(r.context&&h){var d=h.removeEventListener;r.context.resume().then(function(){d("touchstart",c),d("touchend",c),d("click",c),d("keydown",c),r.unlocked=!0},function(){d("touchstart",c),d("touchend",c),d("click",c),d("keydown",c)})}};h&&(h.addEventListener("touchstart",a,!1),h.addEventListener("touchend",a,!1),h.addEventListener("click",a,!1),h.addEventListener("keydown",a,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var r=this.context;r.state!=="suspended"&&r.state!=="interrupted"||this.locked||r.resume()},update:function(r,h){e.prototype.update.call(this,r,h);var a=this.context;a&&a.state==="interrupted"&&a.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var r=this;this.context.close().then(function(){r.context=null})}e.prototype.destroy.call(this)},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(r){this.masterMuteNode.gain.setValueAtTime(r?0:1,0),this.emit(o.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(r){this.masterVolumeNode.gain.setValueAtTime(r,0),this.emit(o.GLOBAL_VOLUME,this,r)}}});g.exports=n},49469:function(g,p,i){var u=i(47205),e=i(69186),l=i(45733),o=i(46414),t=new e({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=l,this.removeCallback=l,this._sortKey=""},add:function(s,n){return n?u.Add(this.list,s):u.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,n,r){return r?u.AddAt(this.list,s,n):u.AddAt(this.list,s,n,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,n){return s?(n===void 0&&(n=function(r,h){return r[s]-h[s]}),o(this.list,n),this):this},getByName:function(s){return u.GetFirst(this.list,"name",s)},getRandom:function(s,n){return u.GetRandom(this.list,s,n)},getFirst:function(s,n,r,h){return u.GetFirst(this.list,s,n,r,h)},getAll:function(s,n,r,h){return u.GetAll(this.list,s,n,r,h)},count:function(s,n){return u.CountAllMatching(this.list,s,n)},swap:function(s,n){u.Swap(this.list,s,n)},moveTo:function(s,n){return u.MoveTo(this.list,s,n)},moveAbove:function(s,n){return u.MoveAbove(this.list,s,n)},moveBelow:function(s,n){return u.MoveBelow(this.list,s,n)},remove:function(s,n){return n?u.Remove(this.list,s):u.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,n){return n?u.RemoveAt(this.list,s):u.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,n,r){return r?u.RemoveBetween(this.list,s,n):u.RemoveBetween(this.list,s,n,this.removeCallback,this)},removeAll:function(s){for(var n=this.list.length;n--;)this.remove(this.list[n],s);return this},bringToTop:function(s){return u.BringToTop(this.list,s)},sendToBack:function(s){return u.SendToBack(this.list,s)},moveUp:function(s){return u.MoveUp(this.list,s),s},moveDown:function(s){return u.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(s,n){return u.Replace(this.list,s,n)},exists:function(s){return this.list.indexOf(s)>-1},setAll:function(s,n,r,h){return u.SetAll(this.list,s,n,r,h),this},each:function(s,n){for(var r=[null],h=2;h<arguments.length;h++)r.push(arguments[h]);for(h=0;h<this.list.length;h++)r[0]=this.list[h],s.apply(n,r)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});g.exports=t},21342:function(g,p,i){var u=new(i(69186))({initialize:function(e){if(this.entries={},this.size=0,Array.isArray(e))for(var l=0;l<e.length;l++)this.set(e[l][0],e[l][1])},set:function(e,l){return this.has(e)||this.size++,this.entries[e]=l,this},get:function(e){if(this.has(e))return this.entries[e]},getArray:function(){var e=[],l=this.entries;for(var o in l)e.push(l[o]);return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){return this.has(e)&&(delete this.entries[e],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[],l=this.entries;for(var o in l)e.push(l[o]);return e},dump:function(){var e=this.entries;for(var l in console.group("Map"),e)console.log(l,e[l]);console.groupEnd()},each:function(e){var l=this.entries;for(var o in l)if(e(o,l[o])===!1)break;return this},contains:function(e){var l=this.entries;for(var o in l)if(l[o]===e)return!0;return!1},merge:function(e,l){l===void 0&&(l=!1);var o=this.entries,t=e.entries;for(var s in t)o.hasOwnProperty(s)&&l?o[s]=t[s]:this.set(s,t[s]);return this}});g.exports=u},48547:function(g,p,i){var u=i(69186),e=i(26729),l=i(71311),o=new u({Extends:e,initialize:function(){e.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,s=this._destroy,n=t.length;n--;)s.push(t[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var t,s,n=this._destroy,r=this._active;for(t=0;t<n.length;t++){s=n[t];var h=r.indexOf(s);h!==-1&&(r.splice(h,1),this.emit(l.PROCESS_QUEUE_REMOVE,s))}for(n.length=0,n=this._pending,t=0;t<n.length;t++)s=n[t],(!this.checkQueue||this.checkQueue&&r.indexOf(s)===-1)&&(r.push(s),this.emit(l.PROCESS_QUEUE_ADD,s));return n.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});g.exports=o},96609:function(g,p,i){var u=new(i(69186))({initialize:function(e){if(this.entries=[],Array.isArray(e))for(var l=0;l<e.length;l++)this.set(e[l])},set:function(e){return this.entries.indexOf(e)===-1&&this.entries.push(e),this},get:function(e,l){for(var o=0;o<this.entries.length;o++){var t=this.entries[o];if(t[e]===l)return t}},getArray:function(){return this.entries.slice(0)},delete:function(e){var l=this.entries.indexOf(e);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++){var l=this.entries[e];console.log(l)}console.groupEnd()},each:function(e,l){var o,t=this.entries.slice(),s=t.length;if(l)for(o=0;o<s&&e.call(l,t[o],o)!==!1;o++);else for(o=0;o<s&&e(t[o],o)!==!1;o++);return this},iterate:function(e,l){var o,t=this.entries.length;if(l)for(o=0;o<t&&e.call(l,this.entries[o],o)!==!1;o++);else for(o=0;o<t&&e(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(e){var l,o=[];for(l=1;l<arguments.length;l++)o.push(arguments[l]);var t=this.entries.length;for(l=0;l<t;l++){var s=this.entries[l];s[e].apply(s,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var l=new u;return e.entries.forEach(function(o){l.set(o)}),this.entries.forEach(function(o){l.set(o)}),l},intersect:function(e){var l=new u;return this.entries.forEach(function(o){e.contains(o)&&l.set(o)}),l},difference:function(e){var l=new u;return this.entries.forEach(function(o){e.contains(o)||l.set(o)}),l},size:{get:function(){return this.entries.length},set:function(e){return e<this.entries.length?this.entries.length=e:this.entries.length}}});g.exports=u},54762:function(g,p,i){var u=i(2543),e=i(69186),l=i(99e3),o=i(17321),t=new e({initialize:function(s,n,r,h){s===void 0&&(s=0),n===void 0&&(n=s),r===void 0&&(r=0),h===void 0&&(h=null),this._width=s,this._height=n,this._parent=h,this.aspectMode=r,this.aspectRatio=n===0?1:s/n,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.snapTo.set(s,n),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.minWidth=u(s,0,this.maxWidth),this.minHeight=u(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,n){return s===void 0&&(s=Number.MAX_VALUE),n===void 0&&(n=s),this.maxWidth=u(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=u(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,n){switch(s===void 0&&(s=0),n===void 0&&(n=s),this.aspectMode){case t.NONE:this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(l(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case t.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case t.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(l(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case t.FIT:this.constrain(s,n,!0);break;case t.ENVELOP:this.constrain(s,n,!1)}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,n){return this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(l(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,n){return n===void 0&&(n=!0),s=u(s,this.minWidth,this.maxWidth),n&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,n){return n===void 0&&(n=!0),s=u(s,this.minHeight,this.maxHeight),n&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,n,r){s===void 0&&(s=0),n===void 0&&(n=s),r===void 0&&(r=!0),s=this.getNewWidth(s),n=this.getNewHeight(n);var h=this.snapTo,a=n===0?1:s/n;return r&&this.aspectRatio>a||!r&&this.aspectRatio<a?(n=(s=l(s,h.x))/this.aspectRatio,h.y>0&&(s=(n=l(n,h.y))*this.aspectRatio)):(r&&this.aspectRatio<a||!r&&this.aspectRatio>a)&&(s=(n=l(n,h.y))*this.aspectRatio,h.x>0&&(n=(s=l(s,h.x))*(1/this.aspectRatio))),this._width=s,this._height=n,this},fitTo:function(s,n){return this.constrain(s,n,!0)},envelop:function(s,n){return this.constrain(s,n,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});t.NONE=0,t.WIDTH_CONTROLS_HEIGHT=1,t.HEIGHT_CONTROLS_WIDTH=2,t.FIT=3,t.ENVELOP=4,g.exports=t},91236:function(g){g.exports="add"},3016:function(g){g.exports="remove"},71311:function(g,p,i){g.exports={PROCESS_QUEUE_ADD:i(91236),PROCESS_QUEUE_REMOVE:i(3016)}},26080:function(g,p,i){var u=i(69186),e=i(2543),l=i(13499),o=i(11318),t=i(58655),s=i(84637),n=new u({Extends:s,initialize:function(r,h,a,c,d){s.call(this,r,h,a,c,d),this.add("__BASE",0,0,0,c,d),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=c,this.height=d,this.imageData=this.context.getImageData(0,0,c,d),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(r,h,a){return this.context.drawImage(a,r,h),this.update()},drawFrame:function(r,h,a,c){a===void 0&&(a=0),c===void 0&&(c=0);var d=this.manager.getFrame(r,h);if(d){var f=d.canvasData,v=d.cutWidth,m=d.cutHeight,x=d.source.resolution;return this.context.drawImage(d.source.image,f.x,f.y,v,m,a,c,v/x,m/x),this.update()}return this},setPixel:function(r,h,a,c,d,f){if(f===void 0&&(f=255),r=Math.abs(Math.floor(r)),h=Math.abs(Math.floor(h)),this.getIndex(r,h)>-1){var v=this.context.getImageData(r,h,1,1);v.data[0]=a,v.data[1]=c,v.data[2]=d,v.data[3]=f,this.context.putImageData(v,r,h)}return this},putData:function(r,h,a,c,d,f,v){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=r.width),v===void 0&&(v=r.height),this.context.putImageData(r,h,a,c,d,f,v),this},getData:function(r,h,a,c){return r=e(Math.floor(r),0,this.width-1),h=e(Math.floor(h),0,this.height-1),a=e(a,1,this.width-r),c=e(c,1,this.height-h),this.context.getImageData(r,h,a,c)},getPixel:function(r,h,a){a||(a=new l);var c=this.getIndex(r,h);if(c>-1){var d=this.data,f=d[c+0],v=d[c+1],m=d[c+2],x=d[c+3];a.setTo(f,v,m,x)}return a},getPixels:function(r,h,a,c){r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=this.width),c===void 0&&(c=a),r=Math.abs(Math.round(r)),h=Math.abs(Math.round(h));for(var d=e(r,0,this.width),f=e(r+a,0,this.width),v=e(h,0,this.height),m=e(h+c,0,this.height),x=new l,T=[],y=v;y<m;y++){for(var E=[],w=d;w<f;w++)x=this.getPixel(w,y,x),E.push({x:w,y,color:x.color,alpha:x.alphaGL});T.push(E)}return T},getIndex:function(r,h){return r=Math.abs(Math.round(r)),h=Math.abs(Math.round(h)),r<this.width&&h<this.height?4*(r+h*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(r,h,a,c){return r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=this.width),c===void 0&&(c=this.height),this.context.clearRect(r,h,a,c),this.update()},setSize:function(r,h){return h===void 0&&(h=r),r===this.width&&h===this.height||(this.canvas.width=r,this.canvas.height=h,this._source.width=r,this._source.height=h,this._source.isPowerOf2=t(r,h),this.frames.__BASE.setSize(r,h,0,0),this.width=r,this.height=h,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});g.exports=n},79175:function(g,p,i){var u=i(69186),e=i(2543),l=i(72646),o=new u({initialize:function(t,s,n,r,h,a,c){this.texture=t,this.name=s,this.source=t.source[n],this.sourceIndex=n,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,c,r,h)},setSize:function(t,s,n,r){n===void 0&&(n=0),r===void 0&&(r=0),this.cutX=n,this.cutY=r,this.cutWidth=t,this.cutHeight=s,this.width=t,this.height=s,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*s),this.centerX=Math.floor(t/2),this.centerY=Math.floor(s/2);var h=this.data,a=h.cut;a.x=n,a.y=r,a.w=t,a.h=s,a.r=n+t,a.b=r+s,h.sourceSize.w=t,h.sourceSize.h=s,h.spriteSourceSize.w=t,h.spriteSourceSize.h=s,h.radius=.5*Math.sqrt(t*t+s*s);var c=h.drawImage;return c.x=n,c.y=r,c.width=t,c.height=s,this.updateUVs()},setTrim:function(t,s,n,r,h,a){var c=this.data,d=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=t,c.sourceSize.h=s,d.x=n,d.y=r,d.w=h,d.h=a,d.r=n+h,d.b=r+a,this.x=n,this.y=r,this.width=h,this.height=a,this.halfWidth=.5*h,this.halfHeight=.5*a,this.centerX=Math.floor(h/2),this.centerY=Math.floor(a/2),this.updateUVs()},setCropUVs:function(t,s,n,r,h,a,c){var d=this.cutX,f=this.cutY,v=this.cutWidth,m=this.cutHeight,x=this.realWidth,T=this.realHeight,y=d+(s=e(s,0,x)),E=f+(n=e(n,0,T)),w=r=e(r,0,x-s),R=h=e(h,0,T-n),C=this.data;if(C.trim){var A=C.spriteSourceSize,S=s+(r=e(r,0,v-s)),b=n+(h=e(h,0,m-n));if(A.r<s||A.b<n||A.x>S||A.y>b)y=0,E=0,w=0,R=0;else{var _=Math.max(A.x,s),P=Math.max(A.y,n),D=Math.min(A.r,S)-_,O=Math.min(A.b,b)-P;w=D,R=O,y=a?d+(v-(_-A.x)-D):d+(_-A.x),E=c?f+(m-(P-A.y)-O):f+(P-A.y),s=_,n=P,r=D,h=O}}else a&&(y=d+(v-s-r)),c&&(E=f+(m-n-h));var F=this.source.width,N=this.source.height;return t.u0=Math.max(0,y/F),t.v0=Math.max(0,E/N),t.u1=Math.min(1,(y+w)/F),t.v1=Math.min(1,(E+R)/N),t.x=s,t.y=n,t.cx=y,t.cy=E,t.cw=w,t.ch=R,t.width=r,t.height=h,t.flipX=a,t.flipY=c,t},updateCropUVs:function(t,s,n){return this.setCropUVs(t,t.x,t.y,t.width,t.height,s,n)},setUVs:function(t,s,n,r,h,a){var c=this.data.drawImage;return c.width=t,c.height=s,this.u0=n,this.v0=r,this.u1=h,this.v1=a,this},updateUVs:function(){var t=this.cutX,s=this.cutY,n=this.cutWidth,r=this.cutHeight,h=this.data.drawImage;h.width=n,h.height=r;var a=this.source.width,c=this.source.height;return this.u0=t/a,this.v0=s/c,this.u1=(t+n)/a,this.v1=(s+r)/c,this},updateUVsInverted:function(){var t=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/s,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var t=new o(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=l(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});g.exports=o},84637:function(g,p,i){var u=i(11318),e=i(69186),l=i(79175),o=i(10638),t="Texture.frame missing: ",s=new e({initialize:function(n,r,h,a,c){Array.isArray(h)||(h=[h]),this.manager=n,this.key=r,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var d=0;d<h.length;d++)this.source.push(new o(this,h[d],a,c))},add:function(n,r,h,a,c,d){if(this.has(n))return null;var f=new l(this,n,r,h,a,c,d);return this.frames[n]=f,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,f},remove:function(n){return!!this.has(n)&&(this.get(n).destroy(),delete this.frames[n],!0)},has:function(n){return this.frames[n]},get:function(n){n||(n=this.firstFrame);var r=this.frames[n];return r||(console.warn(t+n),r=this.frames[this.firstFrame]),r},getTextureSourceIndex:function(n){for(var r=0;r<this.source.length;r++)if(this.source[r]===n)return r;return-1},getFramesFromTextureSource:function(n,r){r===void 0&&(r=!1);var h=[];for(var a in this.frames)if(a!=="__BASE"||r){var c=this.frames[a];c.sourceIndex===n&&h.push(c)}return h},getFrameNames:function(n){n===void 0&&(n=!1);var r=Object.keys(this.frames);if(!n){var h=r.indexOf("__BASE");h!==-1&&r.splice(h,1)}return r},getSourceImage:function(n){n!=null&&this.frameTotal!==1||(n="__BASE");var r=this.frames[n];return r?r.source.image:(console.warn(t+n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){n!=null&&this.frameTotal!==1||(n="__BASE");var r,h=this.frames[n];return h?r=h.sourceIndex:(console.warn(t+n),r=this.frames.__BASE.sourceIndex),this.dataSource[r].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var h=this.source[r];this.dataSource.push(new o(this,n[r],h.width,h.height))}},setFilter:function(n){var r;for(r=0;r<this.source.length;r++)this.source[r].setFilter(n);for(r=0;r<this.dataSource.length;r++)this.dataSource[r].setFilter(n)},destroy:function(){var n;for(n=0;n<this.source.length;n++)this.source[n].destroy();for(n=0;n<this.dataSource.length;n++)this.dataSource[n].destroy();for(var r in this.frames)this.frames[r].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var h=this.manager.game.renderer;h&&h.type===u.WEBGL&&h.resetTextures(!0),this.manager=null}});g.exports=s},64138:function(g,p,i){var u=i(55579),e=i(26080),l=i(69186),o=i(13499),t=i(11318),s=i(26729),n=i(61632),r=i(24496),h=i(48819),a=i(76076),c=i(59155),d=i(84637),f=new l({Extends:s,initialize:function(v){s.call(this),this.game=v,this.name="TextureManager",this.list={},this._tempCanvas=u.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,v.events.once(r.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(n.LOAD,this.updatePending,this),this.on(n.ERROR,this.updatePending,this);var v=this.game.config;this.addBase64("__DEFAULT",v.defaultImage),this.addBase64("__MISSING",v.missingImage),this.addBase64("__WHITE",v.whiteImage),this.game.events.once(r.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(n.LOAD),this.off(n.ERROR),this.emit(n.READY))},checkKey:function(v){return!this.exists(v)||(console.error("Texture key already in use: "+v),!1)},remove:function(v){if(typeof v=="string"){if(!this.exists(v))return console.warn("No texture found matching key: "+v),this;v=this.get(v)}return this.list.hasOwnProperty(v.key)&&(v.destroy(),this.emit(n.REMOVE,v.key)),this},removeKey:function(v){return this.list.hasOwnProperty(v)&&delete this.list[v],this},addBase64:function(v,m){if(this.checkKey(v)){var x=this,T=new Image;T.onerror=function(){x.emit(n.ERROR,v)},T.onload=function(){var y=x.create(v,T);c.Image(y,0),x.emit(n.ADD,v,y),x.emit(n.LOAD,v,y)},T.src=m}return this},getBase64:function(v,m,x,T){x===void 0&&(x="image/png"),T===void 0&&(T=.92);var y="",E=this.getFrame(v,m);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var w=E.canvasData,R=u.create2D(this,w.width,w.height);R.getContext("2d").drawImage(E.source.image,w.x,w.y,w.width,w.height,0,0,w.width,w.height),y=R.toDataURL(x,T),u.remove(R)}return y},addImage:function(v,m,x){var T=null;return this.checkKey(v)&&(T=this.create(v,m),c.Image(T,0),x&&T.setDataSource(x),this.emit(n.ADD,v,T)),T},addGLTexture:function(v,m,x,T){var y=null;return this.checkKey(v)&&(x===void 0&&(x=m.width),T===void 0&&(T=m.height),(y=this.create(v,m,x,T)).add("__BASE",0,0,0,x,T),this.emit(n.ADD,v,y)),y},addRenderTexture:function(v,m){var x=null;return this.checkKey(v)&&((x=this.create(v,m)).add("__BASE",0,0,0,m.width,m.height),this.emit(n.ADD,v,x)),x},generate:function(v,m){if(this.checkKey(v)){var x=u.create(this,1,1);return m.canvas=x,h(m),this.addCanvas(v,x)}return null},createCanvas:function(v,m,x){if(m===void 0&&(m=256),x===void 0&&(x=256),this.checkKey(v)){var T=u.create(this,m,x,t.CANVAS,!0);return this.addCanvas(v,T)}return null},addCanvas:function(v,m,x){x===void 0&&(x=!1);var T=null;return x?T=new e(this,v,m,m.width,m.height):this.checkKey(v)&&(T=new e(this,v,m,m.width,m.height),this.list[v]=T,this.emit(n.ADD,v,T)),T},addAtlas:function(v,m,x,T){return Array.isArray(x.textures)||Array.isArray(x.frames)?this.addAtlasJSONArray(v,m,x,T):this.addAtlasJSONHash(v,m,x,T)},addAtlasJSONArray:function(v,m,x,T){var y=null;if(this.checkKey(v)){if(y=this.create(v,m),Array.isArray(x))for(var E=x.length===1,w=0;w<y.source.length;w++){var R=E?x[0]:x[w];c.JSONArray(y,w,R)}else c.JSONArray(y,0,x);T&&y.setDataSource(T),this.emit(n.ADD,v,y)}return y},addAtlasJSONHash:function(v,m,x,T){var y=null;if(this.checkKey(v)){if(y=this.create(v,m),Array.isArray(x))for(var E=0;E<x.length;E++)c.JSONHash(y,E,x[E]);else c.JSONHash(y,0,x);T&&y.setDataSource(T),this.emit(n.ADD,v,y)}return y},addAtlasXML:function(v,m,x,T){var y=null;return this.checkKey(v)&&(y=this.create(v,m),c.AtlasXML(y,0,x),T&&y.setDataSource(T),this.emit(n.ADD,v,y)),y},addUnityAtlas:function(v,m,x,T){var y=null;return this.checkKey(v)&&(y=this.create(v,m),c.UnityYAML(y,0,x),T&&y.setDataSource(T),this.emit(n.ADD,v,y)),y},addSpriteSheet:function(v,m,x){var T=null;if(this.checkKey(v)){var y=(T=this.create(v,m)).source[0].width,E=T.source[0].height;c.SpriteSheet(T,0,0,0,y,E,x),this.emit(n.ADD,v,T)}return T},addSpriteSheetFromAtlas:function(v,m){if(!this.checkKey(v))return null;var x=a(m,"atlas",null),T=a(m,"frame",null);if(x&&T){var y=this.get(x).get(T);if(y){var E=this.create(v,y.source.image);return y.trimmed?c.SpriteSheetFromAtlas(E,y,m):c.SpriteSheet(E,0,y.cutX,y.cutY,y.cutWidth,y.cutHeight,m),this.emit(n.ADD,v,E),E}}},create:function(v,m,x,T){var y=null;return this.checkKey(v)&&(y=new d(this,v,m,x,T),this.list[v]=y),y},exists:function(v){return this.list.hasOwnProperty(v)},get:function(v){return v===void 0&&(v="__DEFAULT"),this.list[v]?this.list[v]:v instanceof d?v:this.list.__MISSING},cloneFrame:function(v,m){if(this.list[v])return this.list[v].get(m).clone()},getFrame:function(v,m){if(this.list[v])return this.list[v].get(m)},getTextureKeys:function(){var v=[];for(var m in this.list)m!=="__DEFAULT"&&m!=="__MISSING"&&v.push(m);return v},getPixel:function(v,m,x,T){var y=this.getFrame(x,T);if(y){v-=y.x,m-=y.y;var E=y.data.cut;if(v+=E.x,m+=E.y,v>=E.x&&v<E.r&&m>=E.y&&m<E.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(y.source.image,v,m,1,1,0,0,1,1);var R=w.getImageData(0,0,1,1);return new o(R.data[0],R.data[1],R.data[2],R.data[3])}}return null},getPixelAlpha:function(v,m,x,T){var y=this.getFrame(x,T);if(y){v-=y.x,m-=y.y;var E=y.data.cut;if(v+=E.x,m+=E.y,v>=E.x&&v<E.r&&m>=E.y&&m<E.b){var w=this._tempContext;return w.clearRect(0,0,1,1),w.drawImage(y.source.image,v,m,1,1,0,0,1,1),w.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(v,m,x){return this.list[m]&&(v.texture=this.list[m],v.frame=v.texture.get(x)),v},renameTexture:function(v,m){var x=this.get(v);return!(!x||v===m||(x.key=m,this.list[m]=x,delete this.list[v],0))},each:function(v,m){for(var x=[null],T=1;T<arguments.length;T++)x.push(arguments[T]);for(var y in this.list)x[0]=this.list[y],v.apply(m,x)},destroy:function(){for(var v in this.list)this.list[v].destroy();this.list={},this.game=null,u.remove(this._tempCanvas)}});g.exports=f},10638:function(g,p,i){var u=i(55579),e=i(69186),l=i(58655),o=i(29718),t=new e({initialize:function(s,n,r,h,a){a===void 0&&(a=!1);var c=s.manager.game;this.renderer=c.renderer,this.texture=s,this.source=n,this.image=n,this.compressionAlgorithm=null,this.resolution=1,this.width=r||n.naturalWidth||n.videoWidth||n.width||0,this.height=h||n.naturalHeight||n.videoHeight||n.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=n instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&n instanceof HTMLVideoElement,this.isRenderTexture=n.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&n instanceof WebGLTexture,this.isPowerOf2=l(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=a,this.init(c)},init:function(s){var n=this.renderer;n&&(n.gl?this.isCanvas?this.glTexture=n.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=n.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=n.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=n.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),this.flipY=s,this},update:function(){var s=this.renderer.gl;s&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):s&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&u.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});g.exports=t},65794:function(g){g.exports={LINEAR:0,NEAREST:1}},97648:function(g){g.exports="addtexture"},84554:function(g){g.exports="onerror"},75990:function(g){g.exports="onload"},43859:function(g){g.exports="ready"},28996:function(g){g.exports="removetexture"},61632:function(g,p,i){g.exports={ADD:i(97648),ERROR:i(84554),LOAD:i(75990),READY:i(43859),REMOVE:i(28996)}},58196:function(g){g.exports=function(p,i,u){if(u.getElementsByTagName("TextureAtlas")){var e=p.source[i];p.add("__BASE",i,0,0,e.width,e.height);for(var l,o=u.getElementsByTagName("SubTexture"),t=0;t<o.length;t++){var s=o[t].attributes,n=s.name.value,r=parseInt(s.x.value,10),h=parseInt(s.y.value,10),a=parseInt(s.width.value,10),c=parseInt(s.height.value,10);if(l=p.add(n,i,r,h,a,c),s.frameX){var d=Math.abs(parseInt(s.frameX.value,10)),f=Math.abs(parseInt(s.frameY.value,10)),v=parseInt(s.frameWidth.value,10),m=parseInt(s.frameHeight.value,10);l.setTrim(a,c,d,f,v,m)}}return p}console.warn("Invalid Texture Atlas XML given")}},91712:function(g){g.exports=function(p,i){var u=p.source[i];return p.add("__BASE",i,0,0,u.width,u.height),p}},83771:function(g){g.exports=function(p,i){var u=p.source[i];return p.add("__BASE",i,0,0,u.width,u.height),p}},82157:function(g,p,i){var u=i(98409);g.exports=function(e,l,o){if(o.frames||o.textures){var t=e.source[l];e.add("__BASE",l,0,0,t.width,t.height);for(var s,n=Array.isArray(o.textures)?o.textures[l].frames:o.frames,r=0;r<n.length;r++){var h=n[r];s=e.add(h.filename,l,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var a=h.anchor||h.pivot;a&&(s.customPivot=!0,s.pivotX=a.x,s.pivotY=a.y),s.customData=u(h)}for(var c in o)c!=="frames"&&(Array.isArray(o[c])?e.customData[c]=o[c].slice(0):e.customData[c]=o[c]);return e}console.warn("Invalid Texture Atlas JSON Array")}},75954:function(g,p,i){var u=i(98409);g.exports=function(e,l,o){if(o.frames){var t=e.source[l];e.add("__BASE",l,0,0,t.width,t.height);var s,n=o.frames;for(var r in n)if(n.hasOwnProperty(r)){var h=n[r];s=e.add(r,l,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var a=h.anchor||h.pivot;a&&(s.customPivot=!0,s.pivotX=a.x,s.pivotY=a.y),s.customData=u(h)}for(var c in o)c!=="frames"&&(Array.isArray(o[c])?e.customData[c]=o[c].slice(0):e.customData[c]=o[c]);return e}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},11576:function(g,p,i){var u=i(25738);g.exports=function(e,l,o,t,s,n,r){var h=u(r,"frameWidth",null),a=u(r,"frameHeight",h);if(h===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=e.source[l];e.add("__BASE",l,0,0,c.width,c.height);var d=u(r,"startFrame",0),f=u(r,"endFrame",-1),v=u(r,"margin",0),m=u(r,"spacing",0),x=Math.floor((s-v+m)/(h+m))*Math.floor((n-v+m)/(a+m));x===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",e.key),(d>x||d<-x)&&(d=0),d<0&&(d=x+d),f!==-1&&(x=d+(f+1));for(var T=v,y=v,E=0,w=0,R=0;R<x;R++){E=0,w=0;var C=T+h,A=y+a;C>s&&(E=C-s),A>n&&(w=A-n),e.add(R,l,o+T,t+y,h-E,a-w),(T+=h+m)+h>s&&(T=v,y+=a+m)}return e}},78269:function(g,p,i){var u=i(25738);g.exports=function(e,l,o){var t=u(o,"frameWidth",null),s=u(o,"frameHeight",t);if(!t)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var n=e.source[0];e.add("__BASE",0,0,0,n.width,n.height);var r;u(o,"startFrame",0),u(o,"endFrame",-1);for(var h=u(o,"margin",0),a=u(o,"spacing",0),c=l.cutX,d=l.cutY,f=l.cutWidth,v=l.cutHeight,m=l.realWidth,x=l.realHeight,T=Math.floor((m-h+a)/(t+a)),y=Math.floor((x-h+a)/(s+a)),E=l.x,w=t-E,R=t-(m-f-E),C=l.y,A=s-C,S=s-(x-v-C),b=h,_=h,P=0,D=l.sourceIndex,O=0;O<y;O++){for(var F=O===0,N=O===y-1,k=0;k<T;k++){var L=k===0,U=k===T-1;if(r=e.add(P,D,c+b,d+_,t,s),L||F||U||N){var Y=L?E:0,B=F?C:0,W=0,G=0;L&&(W+=t-w),U&&(W+=t-R),F&&(G+=s-A),N&&(G+=s-S);var X=t-W,q=s-G;r.cutWidth=X,r.cutHeight=q,r.setTrim(t,s,Y,B,X,q)}b+=a,b+=L?w:U?R:t,P++}b=h,_+=a,_+=F?A:N?S:s}return e}},38869:function(g){var p=0,i=function(u,e,l,o){var t=p-o.y-o.height;u.add(l,e,o.x,t,o.width,o.height)};g.exports=function(u,e,l){var o=u.source[e];u.add("__BASE",e,0,0,o.width,o.height),p=o.height;for(var t=l.split(`
`),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,n="",r="",h={x:0,y:0,width:0,height:0},a=0;a<t.length;a++){var c=t[a].match(s);if(c){var d=c[1]==="- ",f=c[2],v=c[3];if(d&&(r!==n&&(i(u,e,r,h),n=r),h={x:0,y:0,width:0,height:0}),f!=="name")switch(f){case"x":case"y":case"width":case"height":h[f]=parseInt(v,10)}else r=v}}return r!==n&&i(u,e,r,h),u}},59155:function(g,p,i){g.exports={AtlasXML:i(58196),Canvas:i(91712),Image:i(83771),JSONArray:i(82157),JSONHash:i(75954),SpriteSheet:i(11576),SpriteSheetFromAtlas:i(78269),UnityYAML:i(38869)}},53012:function(g){g.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},2387:function(g,p,i){var u=i(69186),e=i(46236),l=i(12063),o=i(94091),t=i(63083),s=new u({initialize:function(n){this.scene=n,this.systems=n.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],n.sys.events.once(l.BOOT,this.boot,this),n.sys.events.on(l.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(l.PRE_UPDATE,this.preUpdate,this),n.on(l.UPDATE,this.update,this),n.once(l.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var r;return n instanceof o?(r=n,this.removeEvent(r),r.elapsed=r.startAt,r.hasDispatched=!1,r.repeatCount=r.repeat===-1||r.loop?999999999999:r.repeat):r=new o(n),this._pendingInsertion.push(r),r},delayedCall:function(n,r,h,a){return this.addEvent({delay:n,callback:r,args:h,callbackScope:a})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var h=n[r];t(this._pendingRemoval,h),t(this._pendingInsertion,h),t(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,r=this._pendingInsertion.length;if(n!==0||r!==0){var h,a;for(h=0;h<n;h++){a=this._pendingRemoval[h];var c=this._active.indexOf(a);c>-1&&this._active.splice(c,1),a.destroy()}for(h=0;h<r;h++)a=this._pendingInsertion[h],this._active.push(a);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,r){if(this.now=n,!this.paused){r*=this.timeScale;for(var h=0;h<this._active.length;h++){var a=this._active[h];if(!a.paused&&(a.elapsed+=r*a.timeScale,a.elapsed>=a.delay)){var c=a.elapsed-a.delay;a.elapsed=a.delay,!a.hasDispatched&&a.callback&&(a.hasDispatched=!0,a.callback.apply(a.callbackScope,a.args)),a.repeatCount>0?(a.repeatCount--,a.elapsed=c,a.hasDispatched=!1):this._pendingRemoval.push(a)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var r=this.systems.events;r.off(l.PRE_UPDATE,this.preUpdate,this),r.off(l.UPDATE,this.update,this),r.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});e.register("Clock",s,"time"),g.exports=s},94091:function(g,p,i){var u=i(69186),e=i(25738),l=new u({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(o){return this.delay=e(o,"delay",0),this.repeat=e(o,"repeat",0),this.loop=e(o,"loop",!1),this.callback=e(o,"callback",void 0),this.callbackScope=e(o,"callbackScope",this.callback),this.args=e(o,"args",[]),this.timeScale=e(o,"timeScale",1),this.startAt=e(o,"startAt",0),this.paused=e(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/o}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return .001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return .001*this.getOverallRemaining()},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});g.exports=l},69165:function(g,p,i){g.exports={Clock:i(2387),TimerEvent:i(94091)}},53854:function(g,p,i){var u=i(69186),e=i(26729),l=i(91788),o=i(27280),t=i(24191),s=new u({Extends:e,initialize:function(n){e.call(this),this.manager=n,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=t.PENDING_ADD,this._pausedState=t.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(n,r){this.emit(n,this),r&&r.func.apply(r.scope,r.params)},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===t.ACTIVE},add:function(n){return this.queue(o(this,n))},queue:function(n){return this.isPlaying()||(n.parent=this,n.parentIsTimeline=!0,this.data.push(n),this.totalData=this.data.length),this},hasOffset:function(n){return n.offset!==null},isOffsetAbsolute:function(n){return typeof n=="number"},isOffsetRelative:function(n){if(typeof n=="string"){var r=n[0];if(r==="-"||r==="+")return!0}return!1},getRelativeOffset:function(n,r){var h=n[0],a=parseFloat(n.substr(2)),c=r;switch(h){case"+":c+=a;break;case"-":c-=a}return Math.max(0,c)},calcDuration:function(){for(var n=0,r=0,h=0,a=0;a<this.totalData;a++){var c=this.data[a];c.init(),this.hasOffset(c)?this.isOffsetAbsolute(c.offset)?(c.calculatedOffset=c.offset,c.offset===0&&(h=0)):this.isOffsetRelative(c.offset)&&(c.calculatedOffset=this.getRelativeOffset(c.offset,n)):c.calculatedOffset=h,n=c.totalDuration+c.calculatedOffset,r+=c.totalDuration,h+=c.totalDuration}this.duration=r,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=t.PAUSED,!1)},resetTweens:function(n){for(var r=0;r<this.totalData;r++)this.data[r].play(n)},setCallback:function(n,r,h,a){return s.TYPES.indexOf(n)!==-1&&(this.callbacks[n]={func:r,scope:a,params:h}),this},makeActive:function(n){return this.manager.makeActive(n)},play:function(){if(this.state!==t.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=t.ACTIVE,this.dispatchTimelineEvent(l.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=t.LOOP_DELAY):(this.state=t.ACTIVE,this.dispatchTimelineEvent(l.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=t.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=t.PENDING_REMOVE,this.dispatchTimelineEvent(l.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(n,r){if(this.state!==t.PAUSED){switch(this.useFrames&&(r=1*this.manager.timeScale),r*=this.timeScale,this.elapsed+=r,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=r,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case t.ACTIVE:for(var h=this.totalData,a=0;a<this.totalData;a++)this.data[a].update(n,r)&&h--;this.dispatchTimelineEvent(l.TIMELINE_UPDATE,this.callbacks.onUpdate),h===0&&this.nextState();break;case t.LOOP_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=t.ACTIVE,this.dispatchTimelineEvent(l.TIMELINE_LOOP,this.callbacks.onLoop));break;case t.COMPLETE_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=t.PENDING_REMOVE,this.dispatchTimelineEvent(l.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===t.PENDING_REMOVE}},stop:function(){this.state=t.PENDING_REMOVE},pause:function(){if(this.state!==t.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=t.PAUSED,this.emit(l.TIMELINE_PAUSE,this),this},resume:function(){return this.state===t.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(l.TIMELINE_RESUME,this)),this},hasTarget:function(n){for(var r=0;r<this.data.length;r++)if(this.data[r].hasTarget(n))return!0;return!1},destroy:function(){for(var n=0;n<this.data.length;n++)this.data[n].stop()}});s.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],g.exports=s},33028:function(g,p,i){var u=i(63083),e=i(69186),l=i(84041),o=i(46236),t=i(12063),s=i(77866),n=i(4963),r=i(24191),h=i(27280),a=new e({initialize:function(c){this.scene=c,this.systems=c.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,c.sys.events.once(t.BOOT,this.boot,this),c.sys.events.on(t.START,this.start,this)},boot:function(){this.systems.events.once(t.DESTROY,this.destroy,this)},start:function(){var c=this.systems.events;c.on(t.PRE_UPDATE,this.preUpdate,this),c.on(t.UPDATE,this.update,this),c.once(t.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(c){return n(this,c)},timeline:function(c){var d=n(this,c);return d.paused||(this._add.push(d),this._toProcess++),d},create:function(c){return h(this,c)},add:function(c){var d=h(this,c);return this._add.push(d),this._toProcess++,d},existing:function(c){return this._add.push(c),this._toProcess++,this},addCounter:function(c){var d=l(this,c);return this._add.push(d),this._toProcess++,d},stagger:function(c,d){return s(c,d)},preUpdate:function(){if(this._toProcess!==0){var c,d,f=this._destroy,v=this._active,m=this._pending;for(c=0;c<f.length;c++){d=f[c];var x=v.indexOf(d);x===-1?(x=m.indexOf(d))>-1&&(d.state=r.REMOVED,m.splice(x,1)):(d.state=r.REMOVED,v.splice(x,1))}for(f.length=0,f=this._add,c=0;c<f.length;c++)(d=f[c]).state===r.PENDING_ADD&&(d.init()?(d.play(),this._active.push(d)):this._pending.push(d));f.length=0,this._toProcess=0}},update:function(c,d){var f,v=this._active;d*=this.timeScale;for(var m=0;m<v.length;m++)(f=v[m]).update(c,d)&&(this._destroy.push(f),this._toProcess++)},remove:function(c){return u(this._add,c),u(this._pending,c),u(this._active,c),u(this._destroy,c),c.state=r.REMOVED,this},makeActive:function(c){if(this._add.indexOf(c)!==-1||this._active.indexOf(c)!==-1)return this;var d=this._pending.indexOf(c);return d!==-1&&this._pending.splice(d,1),this._add.push(c),c.state=r.PENDING_ADD,this._toProcess++,this},each:function(c,d){for(var f=[null],v=1;v<arguments.length;v++)f.push(arguments[v]);for(var m in this.list)f[0]=this.list[m],c.apply(d,f)},getAllTweens:function(){for(var c=this._active,d=[],f=0;f<c.length;f++)d.push(c[f]);return d},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(c,d){d===void 0&&(d=!1);var f,v,m,x=this._active,T=[];for(Array.isArray(c)||(c=[c]),v=0;v<x.length;v++)for(f=x[v],m=0;m<c.length;m++)f.hasTarget(c[m])&&T.push(f);if(d)for(x=this._pending,v=0;v<x.length;v++)for(f=x[v],m=0;m<c.length;m++)f.hasTarget(c[m])&&T.push(f);return T},isTweening:function(c){for(var d,f=this._active,v=0;v<f.length;v++)if((d=f[v]).hasTarget(c)&&d.isPlaying())return!0;return!1},killAll:function(){for(var c=this.getAllTweens(),d=0;d<c.length;d++)c[d].stop();return this},killTweensOf:function(c){for(var d=this.getTweensOf(c),f=0;f<d.length;f++)d[f].stop();return this},pauseAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].pause();return this},resumeAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].resume();return this},setGlobalTimeScale:function(c){return this.timeScale=c,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var c=this.systems.events;c.off(t.PRE_UPDATE,this.preUpdate,this),c.off(t.UPDATE,this.update,this),c.off(t.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(t.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",a,"tweens"),g.exports=a},51146:function(g){g.exports=function(p,i,u){return p&&p.hasOwnProperty(i)?p[i]:u}},17232:function(g,p,i){var u=i(45044),e=i(10963);g.exports=function(l,o){var t=u.Power0;if(typeof l=="string")if(u.hasOwnProperty(l))t=u[l];else{var s="";l.indexOf(".")&&((s=l.substr(l.indexOf(".")+1)).toLowerCase()==="in"?s="easeIn":s.toLowerCase()==="out"?s="easeOut":s.toLowerCase()==="inout"&&(s="easeInOut")),l=e(l.substr(0,l.indexOf(".")+1)+s),u.hasOwnProperty(l)&&(t=u[l])}else typeof l=="function"?t=l:Array.isArray(l)&&l.length;if(!o)return t;var n=o.slice(0);return n.unshift(0),function(r){return n[0]=r,t.apply(this,n)}}},36697:function(g){g.exports=function(p,i,u){return p.hasOwnProperty(i)?typeof p[i]=="function"?function(e,l,o,t,s,n){return p[i](e,l,o,t,s,n)}:function(){return p[i]}:typeof u=="function"?u:function(){return u}}},44526:function(g,p,i){var u=i(57898);g.exports=function(e){var l,o=[];if(e.hasOwnProperty("props"))for(l in e.props)l.substr(0,1)!=="_"&&o.push({key:l,value:e.props[l]});else for(l in e)u.indexOf(l)===-1&&l.substr(0,1)!=="_"&&o.push({key:l,value:e[l]});return o}},74642:function(g,p,i){var u=i(76076);g.exports=function(e){var l=u(e,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l}},12984:function(g,p,i){var u=i(76076);g.exports=function(e){var l=u(e,"tweens",null);return l===null?[]:(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l]),l)}},70893:function(g){function p(l){return!!l.getActive&&typeof l.getActive=="function"}function i(l){return!!l.getStart&&typeof l.getStart=="function"}function u(l){return!!l.getEnd&&typeof l.getEnd=="function"}var e=function(l,o){var t,s,n=function(y,E,w){return w},r=function(y,E,w){return w},h=null,a=typeof o;if(a==="number")n=function(){return o};else if(a==="string"){var c=o[0],d=parseFloat(o.substr(2));switch(c){case"+":n=function(y,E,w){return w+d};break;case"-":n=function(y,E,w){return w-d};break;case"*":n=function(y,E,w){return w*d};break;case"/":n=function(y,E,w){return w/d};break;default:n=function(){return parseFloat(o)}}}else if(a==="function")n=o;else if(a==="object")if(i(s=o)||u(s)||p(s))p(o)&&(h=o.getActive),u(o)&&(n=o.getEnd),i(o)&&(r=o.getStart);else if(o.hasOwnProperty("value"))t=e(l,o.value);else{var f=o.hasOwnProperty("to"),v=o.hasOwnProperty("from"),m=o.hasOwnProperty("start");if(f&&(v||m)){if(t=e(l,o.to),m){var x=e(l,o.start);t.getActive=x.getEnd}if(v){var T=e(l,o.from);t.getStart=T.getEnd}}}return t||(t={getActive:h,getEnd:n,getStart:r}),t};g.exports=e},84041:function(g,p,i){var u=i(77061),e=i(7973),l=i(51146),o=i(17232),t=i(36697),s=i(76076),n=i(70893),r=i(33290),h=i(14620);g.exports=function(a,c,d){d===void 0&&(d=u);var f=s(c,"from",0),v=s(c,"to",1),m=[{value:f}],x=t(c,"delay",d.delay),T=t(c,"duration",d.duration),y=s(c,"easeParams",d.easeParams),E=o(s(c,"ease",d.ease),y),w=t(c,"hold",d.hold),R=t(c,"repeat",d.repeat),C=t(c,"repeatDelay",d.repeatDelay),A=l(c,"yoyo",d.yoyo),S=[],b=n("value",v),_=h(m[0],0,"value",b.getEnd,b.getStart,b.getActive,E,x,T,A,w,R,C,!1,!1);_.start=f,_.current=f,_.to=v,S.push(_);var P=new r(a,S,m);P.offset=e(c,"offset",null),P.completeDelay=e(c,"completeDelay",0),P.loop=Math.round(e(c,"loop",0)),P.loopDelay=Math.round(e(c,"loopDelay",0)),P.paused=l(c,"paused",!1),P.useFrames=l(c,"useFrames",!1);for(var D=s(c,"callbackScope",P),O=[P,null],F=r.TYPES,N=0;N<F.length;N++){var k=F[N],L=s(c,k,!1);if(L){var U=s(c,k+"Scope",D),Y=s(c,k+"Params",[]);P.setCallback(k,L,O.concat(Y),U)}}return P}},77866:function(g,p,i){var u=i(17232),e=i(76076),l=i(80925);g.exports=function(o,t){var s;t===void 0&&(t={});var n=e(t,"start",0),r=e(t,"ease",null),h=e(t,"grid",null),a=e(t,"from",0),c=a==="first",d=a==="center",f=a==="last",v=typeof a=="number",m=Array.isArray(o),x=parseFloat(m?o[0]:o),T=m?parseFloat(o[1]):0,y=Math.max(x,T);if(m&&(n+=x),h){var E=h[0],w=h[1],R=0,C=0,A=0,S=0,b=[];f?(R=E-1,C=w-1):v?(R=a%E,C=Math.floor(a/E)):d&&(R=(E-1)/2,C=(w-1)/2);for(var _=l.MIN_SAFE_INTEGER,P=0;P<w;P++){b[P]=[];for(var D=0;D<E;D++){A=R-D,S=C-P;var O=Math.sqrt(A*A+S*S);O>_&&(_=O),b[P][D]=O}}}var F=r?u(r):null;return s=h?function(N,k,L,U){var Y,B=0,W=U%E,G=Math.floor(U/E);if(W>=0&&W<E&&G>=0&&G<w&&(B=b[G][W]),m){var X=T-x;Y=F?B/_*X*F(B/_):B/_*X}else Y=F?B*x*F(B/_):B*x;return Y+n}:function(N,k,L,U,Y){var B,W,G;return Y--,c?B=U:d?B=Math.abs(Y/2-U):f?B=Y-U:v&&(B=Math.abs(a-U)),m?(G=d?(T-x)/Y*(2*B):(T-x)/Y*B,W=F?G*F(B/Y):G):W=F?Y*y*F(B/Y):B*x,W+n},s}},4963:function(g,p,i){var u=i(98409),e=i(77061),l=i(7973),o=i(51146),t=i(17232),s=i(36697),n=i(74642),r=i(12984),h=i(76076),a=i(53854),c=i(27280);g.exports=function(d,f){var v=new a(d);v.completeDelay=l(f,"completeDelay",0),v.loop=Math.round(l(f,"loop",0)),v.loopDelay=Math.round(l(f,"loopDelay",0)),v.paused=o(f,"paused",!1),v.useFrames=o(f,"useFrames",!1);var m=h(f,"callbackScope",v),x=[v],T=h(f,"onStart",!1);if(T){var y=h(f,"onStartScope",m),E=h(f,"onStartParams",[]);v.setCallback("onStart",T,x.concat(E),y)}var w=h(f,"onUpdate",!1);if(w){var R=h(f,"onUpdateScope",m),C=h(f,"onUpdateParams",[]);v.setCallback("onUpdate",w,x.concat(C),R)}var A=h(f,"onLoop",!1);if(A){var S=h(f,"onLoopScope",m),b=h(f,"onLoopParams",[]);v.setCallback("onLoop",A,x.concat(b),S)}var _=h(f,"onYoyo",!1);if(_){var P=h(f,"onYoyoScope",m),D=h(f,"onYoyoParams",[]);v.setCallback("onYoyo",_,x.concat(null,D),P)}var O=h(f,"onComplete",!1);if(O){var F=h(f,"onCompleteScope",m),N=h(f,"onCompleteParams",[]);v.setCallback("onComplete",O,x.concat(N),F)}var k=r(f);if(k.length===0)return v.paused=!0,v;var L=u(e);L.targets=n(f);var U=l(f,"totalDuration",0);L.duration=U>0?Math.floor(U/k.length):s(f,"duration",L.duration),L.delay=s(f,"delay",L.delay),L.easeParams=h(f,"easeParams",L.easeParams),L.ease=t(h(f,"ease",L.ease),L.easeParams),L.hold=s(f,"hold",L.hold),L.repeat=s(f,"repeat",L.repeat),L.repeatDelay=s(f,"repeatDelay",L.repeatDelay),L.yoyo=o(f,"yoyo",L.yoyo),L.flipX=o(f,"flipX",L.flipX),L.flipY=o(f,"flipY",L.flipY);for(var Y=0;Y<k.length;Y++)v.queue(c(v,k[Y],L));return v}},27280:function(g,p,i){var u=i(77061),e=i(7973),l=i(51146),o=i(17232),t=i(36697),s=i(44526),n=i(74642),r=i(76076),h=i(70893),a=i(33290),c=i(14620);g.exports=function(d,f,v){v===void 0&&(v=u);for(var m=v.targets?v.targets:n(f),x=s(f),T=t(f,"delay",v.delay),y=t(f,"duration",v.duration),E=r(f,"easeParams",v.easeParams),w=o(r(f,"ease",v.ease),E),R=t(f,"hold",v.hold),C=t(f,"repeat",v.repeat),A=t(f,"repeatDelay",v.repeatDelay),S=l(f,"yoyo",v.yoyo),b=l(f,"flipX",v.flipX),_=l(f,"flipY",v.flipY),P=[],D=0;D<x.length;D++)for(var O=x[D].key,F=x[D].value,N=0;N<m.length;N++){var k=h(O,F),L=c(m[N],N,O,k.getEnd,k.getStart,k.getActive,o(r(F,"ease",w),r(F,"easeParams",E)),t(F,"delay",T),t(F,"duration",y),l(F,"yoyo",S),t(F,"hold",R),t(F,"repeat",C),t(F,"repeatDelay",A),l(F,"flipX",b),l(F,"flipY",_));P.push(L)}var U=new a(d,P,m);U.offset=e(f,"offset",null),U.completeDelay=e(f,"completeDelay",0),U.loop=Math.round(e(f,"loop",0)),U.loopDelay=Math.round(e(f,"loopDelay",0)),U.paused=l(f,"paused",!1),U.useFrames=l(f,"useFrames",!1);for(var Y=r(f,"callbackScope",U),B=[U,null],W=a.TYPES,G=0;G<W.length;G++){var X=W[G],q=r(f,X,!1);if(q){var j=r(f,X+"Scope",Y),V=r(f,X+"Params",[]);U.setCallback(X,q,B.concat(V),j)}}return U}},17622:function(g,p,i){g.exports={GetBoolean:i(51146),GetEaseFunction:i(17232),GetNewValue:i(36697),GetProps:i(44526),GetTargets:i(74642),GetTweens:i(12984),GetValueOp:i(70893),NumberTweenBuilder:i(84041),StaggerBuilder:i(77866),TimelineBuilder:i(4963),TweenBuilder:i(27280)}},84303:function(g){g.exports="complete"},20681:function(g){g.exports="loop"},12423:function(g){g.exports="pause"},94417:function(g){g.exports="resume"},79510:function(g){g.exports="start"},18812:function(g){g.exports="update"},50296:function(g){g.exports="active"},45292:function(g){g.exports="complete"},80293:function(g){g.exports="loop"},1478:function(g){g.exports="repeat"},87420:function(g){g.exports="start"},78152:function(g){g.exports="stop"},51334:function(g){g.exports="update"},45490:function(g){g.exports="yoyo"},91788:function(g,p,i){g.exports={TIMELINE_COMPLETE:i(84303),TIMELINE_LOOP:i(20681),TIMELINE_PAUSE:i(12423),TIMELINE_RESUME:i(94417),TIMELINE_START:i(79510),TIMELINE_UPDATE:i(18812),TWEEN_ACTIVE:i(50296),TWEEN_COMPLETE:i(45292),TWEEN_LOOP:i(80293),TWEEN_REPEAT:i(1478),TWEEN_START:i(87420),TWEEN_STOP:i(78152),TWEEN_UPDATE:i(51334),TWEEN_YOYO:i(45490)}},62983:function(g,p,i){var u=i(24191),e=i(72646),l={Builders:i(17622),Events:i(91788),TweenManager:i(33028),Tween:i(33290),TweenData:i(14620),Timeline:i(53854)};l=e(!1,l,u),g.exports=l},77061:function(g){g.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},57898:function(g){g.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},33290:function(g,p,i){var u=i(69186),e=i(26729),l=i(91788),o=i(78757),t=i(66642),s=i(24191),n=i(80925),r=new u({Extends:e,initialize:function(h,a,c){e.call(this),this.parent=h,this.parentIsTimeline=h.hasOwnProperty("isTimeline"),this.data=a,this.totalData=a.length,this.targets=c,this.totalTargets=c.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(h){return h===void 0&&(h=0),this.data[h].current},setTimeScale:function(h){return this.timeScale=h,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(h){return this.targets.indexOf(h)!==-1},updateTo:function(h,a,c){c===void 0&&(c=!1);for(var d=0;d<this.totalData;d++){var f=this.data[d];f.key===h&&(f.end=a,c&&(f.start=f.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===s.ACTIVE?this.seek(0):this.state===s.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===s.PENDING_ADD?this:this.play()},calcDuration:function(){for(var h=0,a=n.MAX_SAFE_INTEGER,c=this.data,d=0;d<this.totalData;d++){var f=c[d];f.t1=f.duration+f.hold,f.yoyo&&(f.t1+=f.duration),f.t2=f.t1+f.repeatDelay,f.totalDuration=f.delay+f.t1,f.repeat===-1?f.totalDuration+=999999999999*f.t2:f.repeat>0&&(f.totalDuration+=f.t2*f.repeat),f.totalDuration>h&&(h=f.totalDuration),f.delay<a&&(a=f.delay)}this.duration=Math.max(h,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=a},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=s.PENDING_ADD,this._pausedState=s.INIT,!1;for(var h=this.data,a=this.totalTargets,c=0;c<this.totalData;c++){var d=h[c],f=d.target,v=d.gen,m=d.key,x=d.index;d.delay=v.delay(f,m,0,x,a,this),d.duration=Math.max(v.duration(f,m,0,x,a,this),.001),d.hold=v.hold(f,m,0,x,a,this),d.repeat=v.repeat(f,m,0,x,a,this),d.repeatDelay=v.repeatDelay(f,m,0,x,a,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=s.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(l.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):(this.state=s.ACTIVE,this.dispatchTweenEvent(l.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=s.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===s.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED),this},play:function(h){h===void 0&&(h=!1);var a=this.state;return a!==s.INIT||this.parentIsTimeline?a===s.ACTIVE||a===s.PENDING_ADD&&this._pausedState===s.PENDING_ADD?this:this.parentIsTimeline||a!==s.PENDING_REMOVE&&a!==s.REMOVED?(this.parentIsTimeline?(this.resetTweenData(h),this.calculatedOffset===0?this.state=s.ACTIVE:(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(h),this.state=s.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=s.ACTIVE,this)},resetTweenData:function(h){for(var a=this.data,c=this.totalData,d=this.totalTargets,f=0;f<c;f++){var v=a[f],m=v.target,x=v.key,T=v.index;v.progress=0,v.elapsed=0,v.repeatCounter=v.repeat===-1?999999999999:v.repeat,h?(v.start=v.getStartValue(m,x,v.start,T,d,this),v.end=v.getEndValue(m,x,v.end,T,d,this),v.current=v.start,v.state=s.PLAYING_FORWARD):v.state=s.PENDING_RENDER,v.delay>0&&(v.elapsed=v.delay,v.state=s.DELAY),v.getActiveValue&&(m[x]=v.getActiveValue(v.target,v.key,v.start))}},resume:function(){return this.state===s.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(h,a){a===void 0&&(a=16.6),this.state===s.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var c=this.data,d=this.totalTargets,f=0;f<this.totalData;f++){var v=c[f],m=v.target,x=v.gen,T=v.key,y=v.index;v.progress=0,v.elapsed=0,v.repeatCounter=v.repeat===-1?999999999999:v.repeat,v.delay=x.delay(m,T,0,y,d,this),v.duration=Math.max(x.duration(m,T,0,y,d,this),.001),v.hold=x.hold(m,T,0,y,d,this),v.repeat=x.repeat(m,T,0,y,d,this),v.repeatDelay=x.repeatDelay(m,T,0,y,d,this),v.current=v.start,v.state=s.PLAYING_FORWARD,this.updateTweenData(this,v,0,y,d),v.delay>0&&(v.elapsed=v.delay,v.state=s.DELAY)}this.calcDuration();var E=!1;this.state===s.PAUSED&&(E=!0,this.state=s.ACTIVE),this.isSeeking=!0;do this.update(0,a);while(this.totalProgress<h);return this.isSeeking=!1,E&&(this.state=s.PAUSED),this},setCallback:function(h,a,c,d){return this.callbacks[h]={func:a,scope:d,params:c},this},complete:function(h){return h===void 0&&(h=0),h?(this.state=s.COMPLETE_DELAY,this.countdown=h):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(h){return this.state===s.ACTIVE&&h!==void 0&&this.seek(h),this.state!==s.REMOVED&&(this.state!==s.PAUSED&&this.state!==s.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(l.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=s.PENDING_REMOVE),this},update:function(h,a){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(a=1*this.parent.timeScale),a*=this.timeScale,this.elapsed+=a,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=a,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=a,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(l.TWEEN_START,this.callbacks.onStart)));for(var c=!1,d=0;d<this.totalData;d++){var f=this.data[d];this.updateTweenData(this,f,a)&&(c=!0)}c||this.nextState();break;case s.LOOP_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=s.ACTIVE,this.dispatchTweenEvent(l.TWEEN_LOOP,this.callbacks.onLoop));break;case s.OFFSET_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.COMPLETE_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===s.PENDING_REMOVE},dispatchTweenDataEvent:function(h,a,c){this.isSeeking||(this.emit(h,this,c.key,c.target,c.current,c.previous),a&&(a.params[1]=c.target,a.func.apply(a.scope,a.params)))},dispatchTweenEvent:function(h,a){this.isSeeking||(this.emit(h,this,this.targets),a&&(a.params[1]=this.targets,a.func.apply(a.scope,a.params)))},setStateFromEnd:function(h,a,c){return a.yoyo?(a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),this.dispatchTweenDataEvent(l.TWEEN_YOYO,h.callbacks.onYoyo,a),a.start=a.getStartValue(a.target,a.key,a.start,a.index,h.totalTargets,h),s.PLAYING_BACKWARD):a.repeatCounter>0?(a.repeatCounter--,a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),a.start=a.getStartValue(a.target,a.key,a.start,a.index,h.totalTargets,h),a.end=a.getEndValue(a.target,a.key,a.start,a.index,h.totalTargets,h),a.repeatDelay>0?(a.elapsed=a.repeatDelay-c,a.current=a.start,a.target[a.key]=a.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(l.TWEEN_REPEAT,h.callbacks.onRepeat,a),s.PLAYING_FORWARD)):s.COMPLETE},setStateFromStart:function(h,a,c){return a.repeatCounter>0?(a.repeatCounter--,a.elapsed=c,a.progress=c/a.duration,a.flipX&&a.target.toggleFlipX(),a.flipY&&a.target.toggleFlipY(),a.end=a.getEndValue(a.target,a.key,a.start,a.index,h.totalTargets,h),a.repeatDelay>0?(a.elapsed=a.repeatDelay-c,a.current=a.start,a.target[a.key]=a.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(l.TWEEN_REPEAT,h.callbacks.onRepeat,a),s.PLAYING_FORWARD)):s.COMPLETE},updateTweenData:function(h,a,c){var d=a.target;switch(a.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!d){a.state=s.COMPLETE;break}var f=a.elapsed,v=a.duration,m=0;(f+=c)>v&&(m=f-v,f=v);var x=a.state===s.PLAYING_FORWARD,T=f/v;if(a.elapsed=f,a.progress=T,a.previous=a.current,T===1)x?(a.current=a.end,d[a.key]=a.end,a.hold>0?(a.elapsed=a.hold-m,a.state=s.HOLD_DELAY):a.state=this.setStateFromEnd(h,a,m)):(a.current=a.start,d[a.key]=a.start,a.state=this.setStateFromStart(h,a,m));else{var y=x?a.ease(T):a.ease(1-T);a.current=a.start+(a.end-a.start)*y,d[a.key]=a.current}this.dispatchTweenDataEvent(l.TWEEN_UPDATE,h.callbacks.onUpdate,a);break;case s.DELAY:a.elapsed-=c,a.elapsed<=0&&(a.elapsed=Math.abs(a.elapsed),a.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:a.elapsed-=c,a.elapsed<=0&&(a.elapsed=Math.abs(a.elapsed),a.state=s.PLAYING_FORWARD,this.dispatchTweenDataEvent(l.TWEEN_REPEAT,h.callbacks.onRepeat,a));break;case s.HOLD_DELAY:a.elapsed-=c,a.elapsed<=0&&(a.state=this.setStateFromEnd(h,a,Math.abs(a.elapsed)));break;case s.PENDING_RENDER:d?(a.start=a.getStartValue(d,a.key,d[a.key],a.index,h.totalTargets,h),a.end=a.getEndValue(d,a.key,a.start,a.index,h.totalTargets,h),a.current=a.start,d[a.key]=a.start,a.state=s.PLAYING_FORWARD):a.state=s.COMPLETE}return a.state!==s.COMPLETE}});r.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],t.register("tween",function(h){return this.scene.sys.tweens.add(h)}),o.register("tween",function(h){return this.scene.sys.tweens.create(h)}),g.exports=r},14620:function(g){g.exports=function(p,i,u,e,l,o,t,s,n,r,h,a,c,d,f){return{target:p,index:i,key:u,getActiveValue:o,getEndValue:e,getStartValue:l,ease:t,duration:0,totalDuration:0,delay:0,yoyo:r,hold:0,repeat:0,repeatDelay:0,flipX:d,flipY:f,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:s,duration:n,hold:h,repeat:a,repeatDelay:c},state:0}}},24191:function(g){g.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},69186:function(g){function p(o,t,s){var n=s?o[t]:Object.getOwnPropertyDescriptor(o,t);return!s&&n.value&&typeof n.value=="object"&&(n=n.value),!(!n||!function(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}(n))&&(n.enumerable===void 0&&(n.enumerable=!0),n.configurable===void 0&&(n.configurable=!0),n)}function i(o,t){var s=Object.getOwnPropertyDescriptor(o,t);return!!s&&(s.value&&typeof s.value=="object"&&(s=s.value),s.configurable===!1)}function u(o,t,s,n){for(var r in t)if(t.hasOwnProperty(r)){var h=p(t,r,s);if(h!==!1){if(i((n||o).prototype,r)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+r+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(o.prototype,r,h)}else o.prototype[r]=t[r]}}function e(o,t){if(t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)u(o,t[s].prototype||t[s])}}function l(o){var t,s;if(o||(o={}),o.initialize){if(typeof o.initialize!="function")throw new Error("initialize must be a function");t=o.initialize,delete o.initialize}else if(o.Extends){var n=o.Extends;t=function(){n.apply(this,arguments)}}else t=function(){};o.Extends?(t.prototype=Object.create(o.Extends.prototype),t.prototype.constructor=t,s=o.Extends,delete o.Extends):t.prototype.constructor=t;var r=null;return o.Mixins&&(r=o.Mixins,delete o.Mixins),e(t,r),u(t,o,!0,s),t}l.extend=u,l.mixin=e,l.ignoreFinals=!1,g.exports=l},45733:function(g){g.exports=function(){}},18741:function(g){g.exports=function(p,i,u,e,l){if(l===void 0&&(l=p),u>0){var o=u-p.length;if(o<=0)return null}if(!Array.isArray(i))return p.indexOf(i)===-1?(p.push(i),e&&e.call(l,i),i):null;for(var t=i.length-1;t>=0;)p.indexOf(i[t])!==-1&&i.splice(t,1),t--;if((t=i.length)===0)return null;u>0&&t>o&&(i.splice(o),t=o);for(var s=0;s<t;s++){var n=i[s];p.push(n),e&&e.call(l,n)}return i}},41969:function(g){g.exports=function(p,i,u,e,l,o){if(u===void 0&&(u=0),o===void 0&&(o=p),e>0){var t=e-p.length;if(t<=0)return null}if(!Array.isArray(i))return p.indexOf(i)===-1?(p.splice(u,0,i),l&&l.call(o,i),i):null;for(var s=i.length-1;s>=0;)p.indexOf(i[s])!==-1&&i.pop(),s--;if((s=i.length)===0)return null;e>0&&s>t&&(i.splice(t),s=t);for(var n=s-1;n>=0;n--){var r=i[n];p.splice(u,0,r),l&&l.call(o,r)}return i}},34696:function(g){g.exports=function(p,i){var u=p.indexOf(i);return u!==-1&&u<p.length&&(p.splice(u,1),p.push(i)),i}},52564:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){t===void 0&&(t=0),s===void 0&&(s=e.length);var n=0;if(u(e,t,s))for(var r=t;r<s;r++)e[r][l]===o&&n++;return n}},51707:function(g){g.exports=function(p,i,u){var e,l=[null];for(e=3;e<arguments.length;e++)l.push(arguments[e]);for(e=0;e<p.length;e++)l[0]=p[e],i.apply(u,l);return p}},22397:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){if(t===void 0&&(t=0),s===void 0&&(s=e.length),u(e,t,s)){var n,r=[null];for(n=5;n<arguments.length;n++)r.push(arguments[n]);for(n=t;n<s;n++)r[0]=e[n],l.apply(o,r)}return e}},81712:function(g){g.exports=function(p,i,u){if(!i.length)return NaN;if(i.length===1)return i[0];var e,l,o=1;if(u){if(p<i[0][u])return i[0];for(;i[o][u]<p;)o++}else for(;i[o]<p;)o++;return o>i.length&&(o=i.length),u?(e=i[o-1][u],(l=i[o][u])-p<=p-e?i[o]:i[o-1]):(e=i[o-1],(l=i[o])-p<=p-e?l:e)}},14999:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){t===void 0&&(t=0),s===void 0&&(s=e.length);var n=[];if(u(e,t,s))for(var r=t;r<s;r++){var h=e[r];(!l||l&&o===void 0&&h.hasOwnProperty(l)||l&&o!==void 0&&h[l]===o)&&n.push(h)}return n}},39161:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){if(t===void 0&&(t=0),s===void 0&&(s=e.length),u(e,t,s))for(var n=t;n<s;n++){var r=e[n];if(!l||l&&o===void 0&&r.hasOwnProperty(l)||l&&o!==void 0&&r[l]===o)return r}return null}},88829:function(g){g.exports=function(p,i,u){i===void 0&&(i=0),u===void 0&&(u=p.length);var e=i+Math.floor(Math.random()*u);return p[e]===void 0?null:p[e]}},97154:function(g){g.exports=function(p,i,u){if(i===u)return p;var e=p.indexOf(i),l=p.indexOf(u);if(e<0||l<0)throw new Error("Supplied items must be elements of the same array");return e>l||(p.splice(e,1),l===p.length-1?p.push(i):p.splice(l,0,i)),p}},86252:function(g){g.exports=function(p,i,u){if(i===u)return p;var e=p.indexOf(i),l=p.indexOf(u);if(e<0||l<0)throw new Error("Supplied items must be elements of the same array");return e<l||(p.splice(e,1),l===0?p.unshift(i):p.splice(l,0,i)),p}},69286:function(g){g.exports=function(p,i){var u=p.indexOf(i);if(u>0){var e=p[u-1],l=p.indexOf(e);p[u]=e,p[l]=i}return p}},29852:function(g){g.exports=function(p,i,u){var e=p.indexOf(i);if(e===-1||u<0||u>=p.length)throw new Error("Supplied index out of bounds");return e!==u&&(p.splice(e,1),p.splice(u,0,i)),i}},71136:function(g){g.exports=function(p,i){var u=p.indexOf(i);if(u!==-1&&u<p.length-1){var e=p[u+1],l=p.indexOf(e);p[u]=e,p[l]=i}return p}},74934:function(g){g.exports=function(p,i,u,e){var l,o=[],t=!1;if((u||e)&&(t=!0,u||(u=""),e||(e="")),i<p)for(l=p;l>=i;l--)t?o.push(u+l.toString()+e):o.push(l);else for(l=p;l<=i;l++)t?o.push(u+l.toString()+e):o.push(l);return o}},89599:function(g,p,i){var u=i(40496);g.exports=function(e,l,o){e===void 0&&(e=0),l===void 0&&(l=null),o===void 0&&(o=1),l===null&&(l=e,e=0);for(var t=[],s=Math.max(u((l-e)/(o||1)),0),n=0;n<s;n++)t.push(e),e+=o;return t}},48885:function(g){function p(e,l,o){var t=e[l];e[l]=e[o],e[o]=t}function i(e,l){return e<l?-1:e>l?1:0}var u=function(e,l,o,t,s){for(o===void 0&&(o=0),t===void 0&&(t=e.length-1),s===void 0&&(s=i);t>o;){if(t-o>600){var n=t-o+1,r=l-o+1,h=Math.log(n),a=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*a*(n-a)/n)*(r-n/2<0?-1:1),d=Math.max(o,Math.floor(l-r*a/n+c)),f=Math.min(t,Math.floor(l+(n-r)*a/n+c));u(e,l,d,f,s)}var v=e[l],m=o,x=t;for(p(e,o,l),s(e[t],v)>0&&p(e,o,t);m<x;){for(p(e,m,x),m++,x--;s(e[m],v)<0;)m++;for(;s(e[x],v)>0;)x--}s(e[o],v)===0?p(e,o,x):p(e,++x,t),x<=l&&(o=x+1),l<=x&&(t=x-1)}};g.exports=u},17109:function(g,p,i){var u=i(76076),e=i(80675),l=function(o,t,s){for(var n=[],r=0;r<o.length;r++)for(var h=0;h<t.length;h++)for(var a=0;a<s;a++)n.push({a:o[r],b:t[h]});return n};g.exports=function(o,t,s){var n=u(s,"max",0),r=u(s,"qty",1),h=u(s,"random",!1),a=u(s,"randomB",!1),c=u(s,"repeat",0),d=u(s,"yoyo",!1),f=[];if(a&&e(t),c===-1)if(n===0)c=0;else{var v=o.length*t.length*r;d&&(v*=2),c=Math.ceil(n/v)}for(var m=0;m<=c;m++){var x=l(o,t,r);h&&e(x),f=f.concat(x),d&&(x.reverse(),f=f.concat(x))}return n&&f.splice(n),f}},63083:function(g,p,i){var u=i(28088);g.exports=function(e,l,o,t){var s;if(t===void 0&&(t=e),!Array.isArray(l))return(s=e.indexOf(l))!==-1?(u(e,s),o&&o.call(t,l),l):null;for(var n=l.length-1,r=[];n>=0;){var h=l[n];(s=e.indexOf(h))!==-1&&(u(e,s),r.push(h),o&&o.call(t,h)),n--}return r}},83920:function(g,p,i){var u=i(28088);g.exports=function(e,l,o,t){if(t===void 0&&(t=e),l<0||l>e.length-1)throw new Error("Index out of bounds");var s=u(e,l);return o&&o.call(t,s),s}},55846:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){if(l===void 0&&(l=0),o===void 0&&(o=e.length),s===void 0&&(s=e),u(e,l,o)){var n=o-l,r=e.splice(l,n);if(t)for(var h=0;h<r.length;h++){var a=r[h];t.call(s,a)}return r}return[]}},48626:function(g,p,i){var u=i(28088);g.exports=function(e,l,o){l===void 0&&(l=0),o===void 0&&(o=e.length);var t=l+Math.floor(Math.random()*o);return u(e,t)}},99938:function(g){g.exports=function(p,i,u){var e=p.indexOf(i),l=p.indexOf(u);return e!==-1&&l===-1&&(p[e]=u,!0)}},34383:function(g){g.exports=function(p,i){i===void 0&&(i=1);for(var u=null,e=0;e<i;e++)u=p.shift(),p.push(u);return u}},8405:function(g){g.exports=function(p,i){i===void 0&&(i=1);for(var u=null,e=0;e<i;e++)u=p.pop(),p.unshift(u);return u}},30968:function(g){g.exports=function(p,i,u,e){var l=p.length;if(i<0||i>l||i>=u||u>l||i+u>l){if(e)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},51631:function(g){g.exports=function(p,i){var u=p.indexOf(i);return u!==-1&&u>0&&(p.splice(u,1),p.unshift(i)),i}},57715:function(g,p,i){var u=i(30968);g.exports=function(e,l,o,t,s){if(t===void 0&&(t=0),s===void 0&&(s=e.length),u(e,t,s))for(var n=t;n<s;n++){var r=e[n];r.hasOwnProperty(l)&&(r[l]=o)}return e}},80675:function(g){g.exports=function(p){for(var i=p.length-1;i>0;i--){var u=Math.floor(Math.random()*(i+1)),e=p[i];p[i]=p[u],p[u]=e}return p}},16068:function(g){g.exports=function(p){var i=/\D/g;return p.sort(function(u,e){return parseInt(u.replace(i,""),10)-parseInt(e.replace(i,""),10)}),p}},28088:function(g){g.exports=function(p,i){if(!(i>=p.length)){for(var u=p.length-1,e=p[i],l=i;l<u;l++)p[l]=p[l+1];return p.length=u,e}}},46414:function(g){function p(u,e){return String(u).localeCompare(e)}function i(u,e,l,o){var t,s,n,r,h,a=u.length,c=0,d=2*l;for(t=0;t<a;t+=d)for(n=(s=t+l)+l,s>a&&(s=a),n>a&&(n=a),r=t,h=s;;)if(r<s&&h<n)e(u[r],u[h])<=0?o[c++]=u[r++]:o[c++]=u[h++];else if(r<s)o[c++]=u[r++];else{if(!(h<n))break;o[c++]=u[h++]}}g.exports=function(u,e){e===void 0&&(e=p);var l=function(o,t){var s=o.length;if(s<=1)return o;for(var n=new Array(s),r=1;r<s;r*=2){i(o,t,r,n);var h=o;o=n,n=h}return o}(u,e);return l!==u&&i(l,null,u.length,u),u}},49011:function(g){g.exports=function(p,i,u){if(i===u)return p;var e=p.indexOf(i),l=p.indexOf(u);if(e<0||l<0)throw new Error("Supplied items must be elements of the same array");return p[e]=u,p[l]=i,p}},47205:function(g,p,i){g.exports={Matrix:i(84842),Add:i(18741),AddAt:i(41969),BringToTop:i(34696),CountAllMatching:i(52564),Each:i(51707),EachInRange:i(22397),FindClosestInSorted:i(81712),GetAll:i(14999),GetFirst:i(39161),GetRandom:i(88829),MoveDown:i(69286),MoveTo:i(29852),MoveUp:i(71136),MoveAbove:i(97154),MoveBelow:i(86252),NumberArray:i(74934),NumberArrayStep:i(89599),QuickSelect:i(48885),Range:i(17109),Remove:i(63083),RemoveAt:i(83920),RemoveBetween:i(55846),RemoveRandomElement:i(48626),Replace:i(99938),RotateLeft:i(34383),RotateRight:i(8405),SafeRange:i(30968),SendToBack:i(51631),SetAll:i(57715),Shuffle:i(80675),SortByDigits:i(16068),SpliceOne:i(28088),StableSort:i(46414),Swap:i(49011)}},74671:function(g){g.exports=function(p){if(!Array.isArray(p)||p.length<2||!Array.isArray(p[0]))return!1;for(var i=p[0].length,u=1;u<p.length;u++)if(p[u].length!==i)return!1;return!0}},20987:function(g,p,i){var u=i(47742),e=i(74671);g.exports=function(l){var o="";if(!e(l))return o;for(var t=0;t<l.length;t++){for(var s=0;s<l[t].length;s++){var n=l[t][s].toString();o+=n!=="undefined"?u(n,2):"?",s<l[t].length-1&&(o+=" |")}if(t<l.length-1){o+=`
`;for(var r=0;r<l[t].length;r++)o+="---",r<l[t].length-1&&(o+="+");o+=`
`}}return o}},78293:function(g){g.exports=function(p){return p.reverse()}},75362:function(g){g.exports=function(p){for(var i=0;i<p.length;i++)p[i].reverse();return p}},95382:function(g,p,i){var u=i(60741);g.exports=function(e){return u(e,180)}},56157:function(g,p,i){var u=i(60741);g.exports=function(e){return u(e,90)}},60741:function(g,p,i){var u=i(74671),e=i(45235);g.exports=function(l,o){if(o===void 0&&(o=90),!u(l))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")(l=e(l)).reverse();else if(o===-90||o===270||o==="rotateRight")l.reverse(),l=e(l);else if(Math.abs(o)===180||o==="rotate180"){for(var t=0;t<l.length;t++)l[t].reverse();l.reverse()}return l}},5392:function(g,p,i){var u=i(60741);g.exports=function(e){return u(e,-90)}},61650:function(g,p,i){var u=i(34383),e=i(8405);g.exports=function(l,o,t){if(o===void 0&&(o=0),t===void 0&&(t=0),t!==0&&(t<0?u(l,Math.abs(t)):e(l,t)),o!==0)for(var s=0;s<l.length;s++){var n=l[s];o<0?u(n,Math.abs(o)):e(n,o)}return l}},45235:function(g){g.exports=function(p){for(var i=p.length,u=p[0].length,e=new Array(u),l=0;l<u;l++){e[l]=new Array(i);for(var o=i-1;o>-1;o--)e[l][o]=p[o][l]}return e}},84842:function(g,p,i){g.exports={CheckMatrix:i(74671),MatrixToString:i(20987),ReverseColumns:i(78293),ReverseRows:i(75362),Rotate180:i(95382),RotateLeft:i(56157),RotateMatrix:i(60741),RotateRight:i(5392),Translate:i(61650),TransposeMatrix:i(45235)}},57809:function(g){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";g.exports=function(i,u){for(var e=new Uint8Array(i),l=e.length,o=u?"data:"+u+";base64,":"",t=0;t<l;t+=3)o+=p[e[t]>>2],o+=p[(3&e[t])<<4|e[t+1]>>4],o+=p[(15&e[t+1])<<2|e[t+2]>>6],o+=p[63&e[t+2]];return l%3==2?o=o.substring(0,o.length-1)+"=":l%3==1&&(o=o.substring(0,o.length-2)+"=="),o}},39118:function(g){for(var p=new Uint8Array(256),i=0;i<64;i++)p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(i)]=i;g.exports=function(u){var e,l,o,t,s=(u=u.substr(u.indexOf(",")+1)).length,n=.75*s,r=0;u[s-1]==="="&&(n--,u[s-2]==="="&&n--);for(var h=new ArrayBuffer(n),a=new Uint8Array(h),c=0;c<s;c+=4)e=p[u.charCodeAt(c)],l=p[u.charCodeAt(c+1)],o=p[u.charCodeAt(c+2)],t=p[u.charCodeAt(c+3)],a[r++]=e<<2|l>>4,a[r++]=(15&l)<<4|o>>2,a[r++]=(3&o)<<6|63&t;return h}},19237:function(g,p,i){g.exports={ArrayBufferToBase64:i(57809),Base64ToArrayBuffer:i(39118)}},74871:function(g,p,i){g.exports={Array:i(47205),Base64:i(19237),Objects:i(50408),String:i(80340),NOOP:i(45733)}},98409:function(g){g.exports=function(p){var i={};for(var u in p)Array.isArray(p[u])?i[u]=p[u].slice(0):i[u]=p[u];return i}},12229:function(g){var p=function(i){var u,e,l;if(typeof i!="object"||i===null)return i;for(l in u=Array.isArray(i)?[]:{},i)e=i[l],u[l]=p(e);return u};g.exports=p},72646:function(g,p,i){var u=i(53013),e=function(){var l,o,t,s,n,r,h=arguments[0]||{},a=1,c=arguments.length,d=!1;for(typeof h=="boolean"&&(d=h,h=arguments[1]||{},a=2),c===a&&(h=this,--a);a<c;a++)if((l=arguments[a])!=null)for(o in l)t=h[o],h!==(s=l[o])&&(d&&s&&(u(s)||(n=Array.isArray(s)))?(n?(n=!1,r=t&&Array.isArray(t)?t:[]):r=t&&u(t)?t:{},h[o]=e(d,r,s)):s!==void 0&&(h[o]=s));return h};g.exports=e},7973:function(g,p,i){var u=i(68533),e=i(76076);g.exports=function(l,o,t){var s=e(l,o,null);if(s===null)return t;if(Array.isArray(s))return u.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return u.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return u.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(o);return s}},25738:function(g){g.exports=function(p,i,u){var e=typeof p;return p&&e!=="number"&&e!=="string"&&p.hasOwnProperty(i)&&p[i]!==void 0?p[i]:u}},11778:function(g,p,i){var u=i(76076),e=i(2543);g.exports=function(l,o,t,s,n){n===void 0&&(n=t);var r=u(l,o,n);return e(r,t,s)}},76076:function(g){g.exports=function(p,i,u){if(p&&typeof p!="number"){if(p.hasOwnProperty(i))return p[i];if(i.indexOf(".")!==-1){for(var e=i.split("."),l=p,o=u,t=0;t<e.length;t++){if(!l.hasOwnProperty(e[t])){o=u;break}o=l[e[t]],l=l[e[t]]}return o}return u}return u}},36265:function(g){g.exports=function(p,i){for(var u=0;u<i.length;u++)if(!p.hasOwnProperty(i[u]))return!1;return!0}},86908:function(g){g.exports=function(p,i){for(var u=0;u<i.length;u++)if(p.hasOwnProperty(i[u]))return!0;return!1}},60419:function(g){g.exports=function(p,i){return p.hasOwnProperty(i)}},53013:function(g){g.exports=function(p){if(typeof p!="object"||p.nodeType||p===p.window)return!1;try{if(p.constructor&&!{}.hasOwnProperty.call(p.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0}},50247:function(g,p,i){var u=i(98409);g.exports=function(e,l){var o=u(e);for(var t in l)o.hasOwnProperty(t)||(o[t]=l[t]);return o}},92782:function(g,p,i){var u=i(98409);g.exports=function(e,l){var o=u(e);for(var t in l)o.hasOwnProperty(t)&&(o[t]=l[t]);return o}},59210:function(g,p,i){var u=i(60419);g.exports=function(e,l){for(var o={},t=0;t<l.length;t++){var s=l[t];u(e,s)&&(o[s]=e[s])}return o}},65157:function(g){g.exports=function(p,i,u){if(!p||typeof p=="number")return!1;if(p.hasOwnProperty(i))return p[i]=u,!0;if(i.indexOf(".")!==-1){for(var e=i.split("."),l=p,o=p,t=0;t<e.length;t++){if(!l.hasOwnProperty(e[t]))return!1;o=l,l=l[e[t]]}return o[e[e.length-1]]=u,!0}return!1}},50408:function(g,p,i){g.exports={Clone:i(98409),DeepCopy:i(12229),Extend:i(72646),GetAdvancedValue:i(7973),GetFastValue:i(25738),GetMinMaxValue:i(11778),GetValue:i(76076),HasAll:i(36265),HasAny:i(86908),HasValue:i(60419),IsPlainObject:i(53013),Merge:i(50247),MergeRight:i(92782),Pick:i(59210),SetValue:i(65157)}},57217:function(g){g.exports=function(p,i){return p.replace(/%([0-9]+)/g,function(u,e){return i[Number(e)-1]})}},47742:function(g){g.exports=function(p,i,u,e){i===void 0&&(i=0),u===void 0&&(u=" "),e===void 0&&(e=3);var l=0;if(i+1>=(p=p.toString()).length)switch(e){case 1:p=new Array(i+1-p.length).join(u)+p;break;case 3:var o=Math.ceil((l=i-p.length)/2);p=new Array(l-o+1).join(u)+p+new Array(o+1).join(u);break;default:p+=new Array(i+1-p.length).join(u)}return p}},22363:function(g){g.exports=function(p,i){return i===0?p.slice(1):p.slice(0,i-1)+p.slice(i)}},92274:function(g){g.exports=function(p){return p.split("").reverse().join("")}},61004:function(g){g.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var i=16*Math.random()|0;return(p==="x"?i:3&i|8).toString(16)})}},10963:function(g){g.exports=function(p){return p&&p[0].toUpperCase()+p.slice(1)}},80340:function(g,p,i){g.exports={Format:i(57217),Pad:i(47742),RemoveAt:i(22363),Reverse:i(92274),UppercaseFirst:i(10963),UUID:i(61004)}},54075:function(g,p,i){var u=i(55365),e=i(69186),l=i(92941),o=i(26729),t=i(55625),s=i(7478),n=i(34876),r=new e({Extends:o,initialize:function(h){o.call(this),this.game=h,this.data=new l(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(h,a,c){if(!this.dataLocked){var d={};d[a]=c;var f=this;FBInstant.player.setDataAsync(d).then(function(){f.emit("savedata",d)})}},changeDataHandler:function(h,a,c){if(!this.dataLocked){var d={};d[a]=c;var f=this;FBInstant.player.setDataAsync(d).then(function(){f.emit("savedata",d)})}},showLoadProgress:function(h){return h.load.on("progress",function(a){this.hasLoaded||FBInstant.setLoadingProgress(100*a)},this),h.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var h=FBInstant.getSupportedAPIs(),a={},c=function(f){return f[1].toUpperCase()};h.forEach(function(f){f=f.replace(/\../g,c),a[f]=!0}),this.supportedAPIs=a,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var d=this;FBInstant.onPause(function(){d.emit("pause")}),FBInstant.getEntryPointAsync().then(function(f){d.entryPoint=f,d.entryPointData=FBInstant.getEntryPointData(),d.emit("startgame")}).catch(function(f){d.emit("startgame"),console.warn(f)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){d.paymentsReady=!0}).catch(function(f){console.warn(f)})},checkAPI:function(h){return!!this.supportedAPIs[h]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(h,a){return this.playerPhotoURL&&(h.load.setCORS("anonymous"),h.load.image(a,this.playerPhotoURL),h.load.once("filecomplete-image-"+a,function(){this.emit("photocomplete",a)},this),h.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var h=this;FBInstant.player.canSubscribeBotAsync().then(function(){h.playerCanSubscribeBot=!0,h.emit("cansubscribebot")}).catch(function(a){h.emit("cansubscribebotfail",a)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var h=this;FBInstant.player.subscribeBotAsync().then(function(){h.emit("subscribebot")}).catch(function(a){h.emit("subscribebotfail",a)})}else this.emit("subscribebotfail");return this},getData:function(h){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(h)||(h=[h]);var a=this;return FBInstant.player.getDataAsync(h).then(function(c){for(var d in a.dataLocked=!0,c)a.data.set(d,c[d]);a.dataLocked=!1,a.emit("getdata",c)}),this},saveData:function(h){if(!this.checkAPI("playerSetDataAsync"))return this;var a=this;return FBInstant.player.setDataAsync(h).then(function(){a.emit("savedata",h)}).catch(function(c){a.emit("savedatafail",c)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var h=this;return FBInstant.player.flushDataAsync().then(function(){h.emit("flushdata")}).catch(function(a){h.emit("flushdatafail",a)}),this},getStats:function(h){if(!this.checkAPI("playerGetStatsAsync"))return this;var a=this;return FBInstant.player.getStatsAsync(h).then(function(c){a.emit("getstats",c)}).catch(function(c){a.emit("getstatsfail",c)}),this},saveStats:function(h){if(!this.checkAPI("playerSetStatsAsync"))return this;var a={};for(var c in h)typeof h[c]=="number"&&(a[c]=h[c]);var d=this;return FBInstant.player.setStatsAsync(a).then(function(){d.emit("savestats",a)}).catch(function(f){d.emit("savestatsfail",f)}),this},incStats:function(h){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var a={};for(var c in h)typeof h[c]=="number"&&(a[c]=h[c]);var d=this;return FBInstant.player.incrementStatsAsync(a).then(function(f){d.emit("incstats",f)}).catch(function(f){d.emit("incstatsfail",f)}),this},saveSession:function(h){return this.checkAPI("setSessionData")?(JSON.stringify(h).length<=1e3?FBInstant.setSessionData(h):console.warn("Session data too long. Max 1000 chars."),this):this},openShare:function(h,a,c,d){return this._share("SHARE",h,a,c,d)},openInvite:function(h,a,c,d){return this._share("INVITE",h,a,c,d)},openRequest:function(h,a,c,d){return this._share("REQUEST",h,a,c,d)},openChallenge:function(h,a,c,d){return this._share("CHALLENGE",h,a,c,d)},_share:function(h,a,c,d,f){if(!this.checkAPI("shareAsync"))return this;if(f===void 0&&(f={}),c)var v=this.game.textures.getBase64(c,d);var m={intent:h,image:v,text:a,data:f},x=this;return FBInstant.shareAsync(m).then(function(){x.emit("resume")}),this},isSizeBetween:function(h,a){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(h,a):this},switchContext:function(h){if(!this.checkAPI("contextSwitchAsync"))return this;if(h!==this.contextID){var a=this;FBInstant.context.switchAsync(h).then(function(){a.contextID=FBInstant.context.getID(),a.emit("switch",a.contextID)}).catch(function(c){a.emit("switchfail",c)})}return this},chooseContext:function(h){if(!this.checkAPI("contextChooseAsync"))return this;var a=this;return FBInstant.context.chooseAsync(h).then(function(){a.contextID=FBInstant.context.getID(),a.emit("choose",a.contextID)}).catch(function(c){a.emit("choosefail",c)}),this},createContext:function(h){if(!this.checkAPI("contextCreateAsync"))return this;var a=this;return FBInstant.context.createAsync(h).then(function(){a.contextID=FBInstant.context.getID(),a.emit("create",a.contextID)}).catch(function(c){a.emit("createfail",c)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var h=this;return FBInstant.player.getConnectedPlayersAsync().then(function(a){h.emit("players",a)}).catch(function(a){h.emit("playersfail",a)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var h=this,a=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(c){a=[],c.forEach(function(d){a.push(s(d))}),h.emit("getcatalog",a)}).catch(function(c){h.emit("getcatalogfail",c)}),this},getProduct:function(h){for(var a=0;a<this.catalog.length;a++)if(this.catalog[a].productID===h)return this.catalog[a];return null},purchase:function(h,a){if(!this.paymentsReady)return this;var c={productID:h};a&&(c.developerPayload=a);var d=this;return FBInstant.payments.purchaseAsync(c).then(function(f){var v=n(f);d.emit("purchase",v)}).catch(function(f){d.emit("purchasefail",f)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var h=this,a=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(c){a=[],c.forEach(function(d){a.push(n(d))}),h.emit("getpurchases",a)}).catch(function(c){h.emit("getpurchasesfail",c)}),this},consumePurchase:function(h){if(!this.paymentsReady)return this;var a=this;return FBInstant.payments.consumePurchaseAsync(h).then(function(){a.emit("consumepurchase",h)}).catch(function(c){a.emit("consumepurchasefail",c)}),this},update:function(h,a,c,d,f,v){return this._update("CUSTOM",h,a,c,d,f,v)},updateLeaderboard:function(h,a,c,d,f,v){return this._update("LEADERBOARD",h,a,c,d,f,v)},_update:function(h,a,c,d,f,v,m){if(!this.checkAPI("shareAsync"))return this;if(a===void 0&&(a=""),typeof c=="string"&&(c={default:c}),m===void 0&&(m={}),d)var x=this.game.textures.getBase64(d,f);var T={action:h,cta:a,image:x,text:c,template:v,data:m,strategy:"IMMEDIATE",notification:"NO_PUSH"},y=this;return FBInstant.updateAsync(T).then(function(){y.emit("update")}).catch(function(E){y.emit("updatefail",E)}),this},switchGame:function(h,a){if(!this.checkAPI("switchGameAsync"))return this;if(a&&JSON.stringify(a).length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this;var c=this;return FBInstant.switchGameAsync(h,a).then(function(){c.emit("switchgame",h)}).catch(function(d){c.emit("switchgamefail",d)}),this},createShortcut:function(){var h=this;return FBInstant.canCreateShortcutAsync().then(function(a){a&&FBInstant.createShortcutAsync().then(function(){h.emit("shortcutcreated")}).catch(function(c){h.emit("shortcutfailed",c)})}),this},quit:function(){FBInstant.quit()},log:function(h,a,c){return this.checkAPI("logEvent")?(c===void 0&&(c={}),h.length>=2&&h.length<=40&&FBInstant.logEvent(h,parseFloat(a),c),this):this},preloadAds:function(h){if(!this.checkAPI("getInterstitialAdAsync"))return this;var a;Array.isArray(h)||(h=[h]);var c=this,d=0;for(a=0;a<this.ads.length;a++)this.ads[a].shown||d++;if(d+h.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(a=0;a<h.length;a++){var f,v=h[a];FBInstant.getInterstitialAdAsync(v).then(function(m){return f=m,m.loadAsync()}).then(function(){var m=u(v,f,!1);c.ads.push(m),c.emit("adloaded",m)}).catch(function(m){m.code==="ADS_NO_FILL"?c.emit("adsnofill",v):m.code==="ADS_FREQUENT_LOAD"?c.emit("adsfrequentload",v):console.warn(m)})}return this},preloadVideoAds:function(h){if(!this.checkAPI("getRewardedVideoAsync"))return this;var a;Array.isArray(h)||(h=[h]);var c=this,d=0;for(a=0;a<this.ads.length;a++)this.ads[a].shown||d++;if(d+h.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(a=0;a<h.length;a++){var f,v=h[a];FBInstant.getRewardedVideoAsync(v).then(function(m){return f=m,m.loadAsync()}).then(function(){var m=u(v,f,!0);c.ads.push(m),c.emit("adloaded",m)}).catch(function(m){m.code==="ADS_NO_FILL"?c.emit("adsnofill",v):m.code==="ADS_FREQUENT_LOAD"?c.emit("adsfrequentload",v):console.warn(m)})}return this},showAd:function(h){for(var a=this,c=0;c<this.ads.length;c++){var d=this.ads[c];if(d.placementID===h&&!d.shown){d.instance.showAsync().then(function(){d.shown=!0,a.emit("adfinished",d)}).catch(function(f){f.code==="ADS_NOT_LOADED"?a.emit("adsnotloaded",d):f.code==="RATE_LIMITED"&&a.emit("adratelimited",d),a.emit("adshowerror",f,d)});break}}return this},showVideo:function(h){for(var a=this,c=0;c<this.ads.length;c++){var d=this.ads[c];if(d.placementID===h&&d.video&&!d.shown){d.instance.showAsync().then(function(){d.shown=!0,a.emit("adfinished",d)}).catch(function(f){f.code==="ADS_NOT_LOADED"?a.emit("adsnotloaded",d):f.code==="RATE_LIMITED"&&a.emit("adratelimited",d),a.emit("adshowerror",f,d)});break}}return this},matchPlayer:function(h,a){if(h===void 0&&(h=null),a===void 0&&(a=!1),!this.checkAPI("matchPlayerAsync"))return this;var c=this;return FBInstant.matchPlayerAsync(h,a).then(function(){c.getID(),c.getType(),c.emit("matchplayer",c.contextID,c.contextType)}),this},getLeaderboard:function(h){if(!this.checkAPI("getLeaderboardAsync"))return this;var a=this;return FBInstant.getLeaderboardAsync(h).then(function(c){var d=new t(a,c);a.leaderboards[h]=d,a.emit("getleaderboard",d)}).catch(function(c){console.warn(c)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});g.exports=r},3010:function(g,p,i){i(76417);var u=i(11318),e=i(72646),l={Actions:i(22603),Animations:i(88552),Cache:i(80425),Cameras:i(75527),Core:i(91004),Game:i(61003),Curves:i(994),Data:i(97216),Display:{Align:i(87150),Color:i(80586),Masks:i(88472)},Events:i(85817),GameObjects:{Events:i(99370),DisplayList:i(96656),GameObjectCreator:i(78757),GameObjectFactory:i(66642),UpdateList:i(66007),Components:i(19506),GetCalcMatrix:i(3142),BuildGameObject:i(90062),BuildGameObjectAnimation:i(38596),GameObject:i(38236),BitmapText:i(74797),Container:i(22675),Graphics:i(19613),Group:i(84262),Image:i(86479),Particles:i(42854),RenderTexture:i(131),Shader:i(33568),Sprite:i(38590),Text:i(77546),GetTextSize:i(83799),MeasureText:i(32800),TextStyle:i(22849),Zone:i(64043),Shape:i(56098),Arc:i(59226),Curve:i(98435),Grid:i(35308),Line:i(9417),Rectangle:i(41231),Factories:{Container:i(51273),Graphics:i(4268),Group:i(97058),Image:i(48950),Particles:i(65419),RenderTexture:i(35346),Shader:i(89775),Sprite:i(82364),StaticBitmapText:i(93676),Text:i(33979),Zone:i(59037),Arc:i(10555),Curve:i(84653),Grid:i(8098),Line:i(31059),Rectangle:i(98971)},Creators:{Container:i(92359),Graphics:i(2923),Group:i(57736),Image:i(16836),Particles:i(12495),RenderTexture:i(34387),Sprite:i(29525),StaticBitmapText:i(46292),Text:i(53912),Zone:i(42309)}},Geom:i(67449),Input:i(74353),Loader:i(74266),Math:i(68533),Physics:{},Plugins:i(25753),Renderer:{Events:i(37710),WebGL:i(94621)},Scale:i(17467),Scenes:i(1459),Scene:i(61116),Textures:{Events:i(61632),FilterMode:i(65794),Texture:i(84637),TextureManager:i(64138)},Time:i(69165),Tweens:i(62983),Utils:i(74871),Class:i(69186)};l=e(!1,l,u),g.exports=l,i.g.Phaser=l,window.Phaser=l}},z={};function M(g){var p=z[g];if(p!==void 0)return p.exports;var i=z[g]={exports:{}};return I[g](i,i.exports,M),i.exports}return M.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),M(3010)}()});/*! For license information please see phaser-spine-plugin.min.js.LICENSE.txt */window.SpinePlugin=function(I){var z={};function M(g){if(z[g])return z[g].exports;var p=z[g]={i:g,l:!1,exports:{}};return I[g].call(p.exports,p,p.exports,M),p.l=!0,p.exports}return M.m=I,M.c=z,M.d=function(g,p,i){M.o(g,p)||Object.defineProperty(g,p,{enumerable:!0,get:i})},M.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},M.t=function(g,p){if(1&p&&(g=M(g)),8&p||4&p&&typeof g=="object"&&g&&g.__esModule)return g;var i=Object.create(null);if(M.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:g}),2&p&&typeof g!="string")for(var u in g)M.d(i,u,function(e){return g[e]}.bind(null,u));return i},M.n=function(g){var p=g&&g.__esModule?function(){return g.default}:function(){return g};return M.d(p,"a",p),p},M.o=function(g,p){return Object.prototype.hasOwnProperty.call(g,p)},M.p="",M(M.s=63)}([function(I,z){function M(e,l,o){var t=o?e[l]:Object.getOwnPropertyDescriptor(e,l);return!o&&t.value&&typeof t.value=="object"&&(t=t.value),!(!t||!function(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}(t))&&(t.enumerable===void 0&&(t.enumerable=!0),t.configurable===void 0&&(t.configurable=!0),t)}function g(e,l){var o=Object.getOwnPropertyDescriptor(e,l);return!!o&&(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1)}function p(e,l,o,t){for(var s in l)if(l.hasOwnProperty(s)){var n=M(l,s,o);if(n!==!1){if(g((t||e).prototype,s)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,n)}else e.prototype[s]=l[s]}}function i(e,l){if(l){Array.isArray(l)||(l=[l]);for(var o=0;o<l.length;o++)p(e,l[o].prototype||l[o])}}function u(e){var l,o;if(e||(e={}),e.initialize){if(typeof e.initialize!="function")throw new Error("initialize must be a function");l=e.initialize,delete e.initialize}else if(e.Extends){var t=e.Extends;l=function(){t.apply(this,arguments)}}else l=function(){};e.Extends?(l.prototype=Object.create(e.Extends.prototype),l.prototype.constructor=l,o=e.Extends,delete e.Extends):l.prototype.constructor=l;var s=null;return e.Mixins&&(s=e.Mixins,delete e.Mixins),i(l,s),p(l,e,!0,o),l}u.extend=p,u.mixin=i,u.ignoreFinals=!1,I.exports=u},function(I,z){I.exports=function(){}},function(I,z,M){var g=M(0),p=M(32),i=new g({initialize:function(u,e){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(e===void 0&&(e=u),this.x=u||0,this.y=e||0)},clone:function(){return new i(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,e){return e===void 0&&(e=u),this.x=u,this.y=e,this},setTo:function(u,e){return this.set(u,e)},setToPolar:function(u,e){return e==null&&(e=1),this.x=Math.cos(u)*e,this.y=Math.sin(u)*e,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,e){return p(this.x,u.x,e)&&p(this.y,u.y,e)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var e=u.x-this.x,l=u.y-this.y;return Math.sqrt(e*e+l*l)},distanceSq:function(u){var e=u.x-this.x,l=u.y-this.y;return e*e+l*l},length:function(){var u=this.x,e=this.y;return Math.sqrt(u*u+e*e)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,e=this.y;return u*u+e*e},normalize:function(){var u=this.x,e=this.y,l=u*u+e*e;return l>0&&(l=1/Math.sqrt(l),this.x=u*l,this.y=e*l),this},normalizeRightHand:function(){var u=this.x;return this.x=-1*this.y,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=-1*u,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,e){e===void 0&&(e=0);var l=this.x,o=this.y;return this.x=l+e*(u.x-l),this.y=o+e*(u.y-o),this},transformMat3:function(u){var e=this.x,l=this.y,o=u.val;return this.x=o[0]*e+o[3]*l+o[6],this.y=o[1]*e+o[4]*l+o[7],this},transformMat4:function(u){var e=this.x,l=this.y,o=u.val;return this.x=o[0]*e+o[4]*l+o[12],this.y=o[1]*e+o[5]*l+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var e=this.length();return e&&e>u&&this.scale(u/e),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var e=Math.cos(u),l=Math.sin(u);return this.set(e*this.x-l*this.y,l*this.x+e*this.y)}});i.ZERO=new i,i.RIGHT=new i(1,0),i.LEFT=new i(-1,0),i.UP=new i(0,-1),i.DOWN=new i(0,1),i.ONE=new i(1,1),I.exports=i},function(I,z){I.exports=function(M,g,p){return Math.max(g,Math.min(p,M))}},function(I,z){var M={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};I.exports=M},function(I,z){I.exports=function(M,g,p,i){var u=M.length;if(g<0||g>u||g>=p||p>u||g+p>u){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(I,z){I.exports=function(M,g,p){var i=p-g;return g+((M-g)%i+i)%i}},function(I,z){I.exports=function(M){if(typeof M!="object"||M.nodeType||M===M.window)return!1;try{if(M.constructor&&!{}.hasOwnProperty.call(M.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0}},function(I,z,M){var g=M(4);I.exports=function(p){return p>Math.PI&&(p-=g.PI2),Math.abs(((p+g.TAU)%g.PI2-g.PI2)%g.PI2)}},function(I,z,M){var g=M(4);I.exports=function(p){return p*g.RAD_TO_DEG}},function(I,z){I.exports=function(M,g,p){if(M&&typeof M!="number"){if(M.hasOwnProperty(g))return M[g];if(g.indexOf(".")!==-1){for(var i=g.split("."),u=M,e=p,l=0;l<i.length;l++){if(!u.hasOwnProperty(i[l])){e=p;break}e=u[i[l]],u=u[i[l]]}return e}return p}return p}},function(I,z){I.exports=function(M,g,p){var i=typeof M;return M&&i!=="number"&&i!=="string"&&M.hasOwnProperty(g)&&M[g]!==void 0?M[g]:p}},function(I,z){I.exports=function(M,g){if(!(g>=M.length)){for(var p=M.length-1,i=M[g],u=g;u<p;u++)M[u]=M[u+1];return M.length=p,i}}},function(I,z,M){var g=M(0),p=M(26),i=new g({initialize:function(u,e){u===void 0&&(u=0),e===void 0&&(e=u),this.type=p.POINT,this.x=u,this.y=e},setTo:function(u,e){return u===void 0&&(u=0),e===void 0&&(e=u),this.x=u,this.y=e,this}});I.exports=i},function(I,z,M){var g=new(M(0))({initialize:function(p,i,u){this.x=0,this.y=0,this.z=0,typeof p=="object"?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):(this.x=p||0,this.y=i||0,this.z=u||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(p){return this.x=Math.min(this.x,p.x),this.y=Math.min(this.y,p.y),this.z=Math.min(this.z,p.z),this},max:function(p){return this.x=Math.max(this.x,p.x),this.y=Math.max(this.y,p.y),this.z=Math.max(this.z,p.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(p,i){return this.x=p.x+i.x,this.y=p.y+i.y,this.z=p.z+i.z,this},crossVectors:function(p,i){var u=p.x,e=p.y,l=p.z,o=i.x,t=i.y,s=i.z;return this.x=e*s-l*t,this.y=l*o-u*s,this.z=u*t-e*o,this},equals:function(p){return this.x===p.x&&this.y===p.y&&this.z===p.z},copy:function(p){return this.x=p.x,this.y=p.y,this.z=p.z||0,this},set:function(p,i,u){return typeof p=="object"?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):(this.x=p||0,this.y=i||0,this.z=u||0),this},setFromMatrixPosition:function(p){return this.fromArray(p.val,12)},setFromMatrixColumn:function(p,i){return this.fromArray(p.val,4*i)},fromArray:function(p,i){return i===void 0&&(i=0),this.x=p[i],this.y=p[i+1],this.z=p[i+2],this},add:function(p){return this.x+=p.x,this.y+=p.y,this.z+=p.z||0,this},addScalar:function(p){return this.x+=p,this.y+=p,this.z+=p,this},addScale:function(p,i){return this.x+=p.x*i,this.y+=p.y*i,this.z+=p.z*i||0,this},subtract:function(p){return this.x-=p.x,this.y-=p.y,this.z-=p.z||0,this},multiply:function(p){return this.x*=p.x,this.y*=p.y,this.z*=p.z||1,this},scale:function(p){return isFinite(p)?(this.x*=p,this.y*=p,this.z*=p):(this.x=0,this.y=0,this.z=0),this},divide:function(p){return this.x/=p.x,this.y/=p.y,this.z/=p.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(p){var i=p.x-this.x,u=p.y-this.y,e=p.z-this.z||0;return Math.sqrt(i*i+u*u+e*e)},distanceSq:function(p){var i=p.x-this.x,u=p.y-this.y,e=p.z-this.z||0;return i*i+u*u+e*e},length:function(){var p=this.x,i=this.y,u=this.z;return Math.sqrt(p*p+i*i+u*u)},lengthSq:function(){var p=this.x,i=this.y,u=this.z;return p*p+i*i+u*u},normalize:function(){var p=this.x,i=this.y,u=this.z,e=p*p+i*i+u*u;return e>0&&(e=1/Math.sqrt(e),this.x=p*e,this.y=i*e,this.z=u*e),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z},cross:function(p){var i=this.x,u=this.y,e=this.z,l=p.x,o=p.y,t=p.z;return this.x=u*t-e*o,this.y=e*l-i*t,this.z=i*o-u*l,this},lerp:function(p,i){i===void 0&&(i=0);var u=this.x,e=this.y,l=this.z;return this.x=u+i*(p.x-u),this.y=e+i*(p.y-e),this.z=l+i*(p.z-l),this},applyMatrix3:function(p){var i=this.x,u=this.y,e=this.z,l=p.val;return this.x=l[0]*i+l[3]*u+l[6]*e,this.y=l[1]*i+l[4]*u+l[7]*e,this.z=l[2]*i+l[5]*u+l[8]*e,this},applyMatrix4:function(p){var i=this.x,u=this.y,e=this.z,l=p.val,o=1/(l[3]*i+l[7]*u+l[11]*e+l[15]);return this.x=(l[0]*i+l[4]*u+l[8]*e+l[12])*o,this.y=(l[1]*i+l[5]*u+l[9]*e+l[13])*o,this.z=(l[2]*i+l[6]*u+l[10]*e+l[14])*o,this},transformMat3:function(p){var i=this.x,u=this.y,e=this.z,l=p.val;return this.x=i*l[0]+u*l[3]+e*l[6],this.y=i*l[1]+u*l[4]+e*l[7],this.z=i*l[2]+u*l[5]+e*l[8],this},transformMat4:function(p){var i=this.x,u=this.y,e=this.z,l=p.val;return this.x=l[0]*i+l[4]*u+l[8]*e+l[12],this.y=l[1]*i+l[5]*u+l[9]*e+l[13],this.z=l[2]*i+l[6]*u+l[10]*e+l[14],this},transformCoordinates:function(p){var i=this.x,u=this.y,e=this.z,l=p.val,o=i*l[0]+u*l[4]+e*l[8]+l[12],t=i*l[1]+u*l[5]+e*l[9]+l[13],s=i*l[2]+u*l[6]+e*l[10]+l[14],n=i*l[3]+u*l[7]+e*l[11]+l[15];return this.x=o/n,this.y=t/n,this.z=s/n,this},transformQuat:function(p){var i=this.x,u=this.y,e=this.z,l=p.x,o=p.y,t=p.z,s=p.w,n=s*i+o*e-t*u,r=s*u+t*i-l*e,h=s*e+l*u-o*i,a=-l*i-o*u-t*e;return this.x=n*s+a*-l+r*-t-h*-o,this.y=r*s+a*-o+h*-l-n*-t,this.z=h*s+a*-t+n*-o-r*-l,this},project:function(p){var i=this.x,u=this.y,e=this.z,l=p.val,o=l[0],t=l[1],s=l[2],n=l[3],r=l[4],h=l[5],a=l[6],c=l[7],d=l[8],f=l[9],v=l[10],m=l[11],x=l[12],T=l[13],y=l[14],E=1/(i*n+u*c+e*m+l[15]);return this.x=(i*o+u*r+e*d+x)*E,this.y=(i*t+u*h+e*f+T)*E,this.z=(i*s+u*a+e*v+y)*E,this},projectViewMatrix:function(p,i){return this.applyMatrix4(p).applyMatrix4(i)},unprojectViewMatrix:function(p,i){return this.applyMatrix4(p).applyMatrix4(i)},unproject:function(p,i){var u=p.x,e=p.y,l=p.z,o=p.w,t=this.x-u,s=o-this.y-1-e,n=this.z;return this.x=2*t/l-1,this.y=2*s/o-1,this.z=2*n-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),I.exports=g},function(I,z){I.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(I,z,M){var g=M(24),p=M(57);I.exports=function(i,u){if(u===void 0&&(u=90),!g(i))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")(i=p(i)).reverse();else if(u===-90||u===270||u==="rotateRight")i.reverse(),i=p(i);else if(Math.abs(u)===180||u==="rotate180"){for(var e=0;e<i.length;e++)i[e].reverse();i.reverse()}return i}},function(I,z){I.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(I,z){I.exports=function(M,g){return Math.random()*(g-M)+M}},function(I,z,M){var g=M(4);I.exports=function(p){return p*g.DEG_TO_RAD}},function(I,z,M){var g=M(0),p=M(14),i=1e-6,u=new g({initialize:function(n){this.val=new Float32Array(16),n?this.copy(n):this.identity()},clone:function(){return new u(this)},set:function(n){return this.copy(n)},setValues:function(n,r,h,a,c,d,f,v,m,x,T,y,E,w,R,C){var A=this.val;return A[0]=n,A[1]=r,A[2]=h,A[3]=a,A[4]=c,A[5]=d,A[6]=f,A[7]=v,A[8]=m,A[9]=x,A[10]=T,A[11]=y,A[12]=E,A[13]=w,A[14]=R,A[15]=C,this},copy:function(n){var r=n.val;return this.setValues(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])},fromArray:function(n){return this.setValues(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(n,r,h){var a=e.fromQuat(h).val,c=r.x,d=r.y,f=r.z;return this.setValues(a[0]*c,a[1]*c,a[2]*c,0,a[4]*d,a[5]*d,a[6]*d,0,a[8]*f,a[9]*f,a[10]*f,0,n.x,n.y,n.z,1)},xyz:function(n,r,h){this.identity();var a=this.val;return a[12]=n,a[13]=r,a[14]=h,this},scaling:function(n,r,h){this.zero();var a=this.val;return a[0]=n,a[5]=r,a[10]=h,a[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var n=this.val,r=n[1],h=n[2],a=n[3],c=n[6],d=n[7],f=n[11];return n[1]=n[4],n[2]=n[8],n[3]=n[12],n[4]=r,n[6]=n[9],n[7]=n[13],n[8]=h,n[9]=c,n[11]=n[14],n[12]=a,n[13]=d,n[14]=f,this},getInverse:function(n){return this.copy(n),this.invert()},invert:function(){var n=this.val,r=n[0],h=n[1],a=n[2],c=n[3],d=n[4],f=n[5],v=n[6],m=n[7],x=n[8],T=n[9],y=n[10],E=n[11],w=n[12],R=n[13],C=n[14],A=n[15],S=r*f-h*d,b=r*v-a*d,_=r*m-c*d,P=h*v-a*f,D=h*m-c*f,O=a*m-c*v,F=x*R-T*w,N=x*C-y*w,k=x*A-E*w,L=T*C-y*R,U=T*A-E*R,Y=y*A-E*C,B=S*Y-b*U+_*L+P*k-D*N+O*F;return B?(B=1/B,this.setValues((f*Y-v*U+m*L)*B,(a*U-h*Y-c*L)*B,(R*O-C*D+A*P)*B,(y*D-T*O-E*P)*B,(v*k-d*Y-m*N)*B,(r*Y-a*k+c*N)*B,(C*_-w*O-A*b)*B,(x*O-y*_+E*b)*B,(d*U-f*k+m*F)*B,(h*k-r*U-c*F)*B,(w*D-R*_+A*S)*B,(T*_-x*D-E*S)*B,(f*N-d*L-v*F)*B,(r*L-h*N+a*F)*B,(R*b-w*P-C*S)*B,(x*P-T*b+y*S)*B)):this},adjoint:function(){var n=this.val,r=n[0],h=n[1],a=n[2],c=n[3],d=n[4],f=n[5],v=n[6],m=n[7],x=n[8],T=n[9],y=n[10],E=n[11],w=n[12],R=n[13],C=n[14],A=n[15];return this.setValues(f*(y*A-E*C)-T*(v*A-m*C)+R*(v*E-m*y),-(h*(y*A-E*C)-T*(a*A-c*C)+R*(a*E-c*y)),h*(v*A-m*C)-f*(a*A-c*C)+R*(a*m-c*v),-(h*(v*E-m*y)-f*(a*E-c*y)+T*(a*m-c*v)),-(d*(y*A-E*C)-x*(v*A-m*C)+w*(v*E-m*y)),r*(y*A-E*C)-x*(a*A-c*C)+w*(a*E-c*y),-(r*(v*A-m*C)-d*(a*A-c*C)+w*(a*m-c*v)),r*(v*E-m*y)-d*(a*E-c*y)+x*(a*m-c*v),d*(T*A-E*R)-x*(f*A-m*R)+w*(f*E-m*T),-(r*(T*A-E*R)-x*(h*A-c*R)+w*(h*E-c*T)),r*(f*A-m*R)-d*(h*A-c*R)+w*(h*m-c*f),-(r*(f*E-m*T)-d*(h*E-c*T)+x*(h*m-c*f)),-(d*(T*C-y*R)-x*(f*C-v*R)+w*(f*y-v*T)),r*(T*C-y*R)-x*(h*C-a*R)+w*(h*y-a*T),-(r*(f*C-v*R)-d*(h*C-a*R)+w*(h*v-a*f)),r*(f*y-v*T)-d*(h*y-a*T)+x*(h*v-a*f))},determinant:function(){var n=this.val,r=n[0],h=n[1],a=n[2],c=n[3],d=n[4],f=n[5],v=n[6],m=n[7],x=n[8],T=n[9],y=n[10],E=n[11],w=n[12],R=n[13],C=n[14],A=n[15];return(r*f-h*d)*(y*A-E*C)-(r*v-a*d)*(T*A-E*R)+(r*m-c*d)*(T*C-y*R)+(h*v-a*f)*(x*A-E*w)-(h*m-c*f)*(x*C-y*w)+(a*m-c*v)*(x*R-T*w)},multiply:function(n){var r=this.val,h=r[0],a=r[1],c=r[2],d=r[3],f=r[4],v=r[5],m=r[6],x=r[7],T=r[8],y=r[9],E=r[10],w=r[11],R=r[12],C=r[13],A=r[14],S=r[15],b=n.val,_=b[0],P=b[1],D=b[2],O=b[3];return r[0]=_*h+P*f+D*T+O*R,r[1]=_*a+P*v+D*y+O*C,r[2]=_*c+P*m+D*E+O*A,r[3]=_*d+P*x+D*w+O*S,_=b[4],P=b[5],D=b[6],O=b[7],r[4]=_*h+P*f+D*T+O*R,r[5]=_*a+P*v+D*y+O*C,r[6]=_*c+P*m+D*E+O*A,r[7]=_*d+P*x+D*w+O*S,_=b[8],P=b[9],D=b[10],O=b[11],r[8]=_*h+P*f+D*T+O*R,r[9]=_*a+P*v+D*y+O*C,r[10]=_*c+P*m+D*E+O*A,r[11]=_*d+P*x+D*w+O*S,_=b[12],P=b[13],D=b[14],O=b[15],r[12]=_*h+P*f+D*T+O*R,r[13]=_*a+P*v+D*y+O*C,r[14]=_*c+P*m+D*E+O*A,r[15]=_*d+P*x+D*w+O*S,this},multiplyLocal:function(n){var r=this.val,h=n.val;return this.setValues(r[0]*h[0]+r[1]*h[4]+r[2]*h[8]+r[3]*h[12],r[0]*h[1]+r[1]*h[5]+r[2]*h[9]+r[3]*h[13],r[0]*h[2]+r[1]*h[6]+r[2]*h[10]+r[3]*h[14],r[0]*h[3]+r[1]*h[7]+r[2]*h[11]+r[3]*h[15],r[4]*h[0]+r[5]*h[4]+r[6]*h[8]+r[7]*h[12],r[4]*h[1]+r[5]*h[5]+r[6]*h[9]+r[7]*h[13],r[4]*h[2]+r[5]*h[6]+r[6]*h[10]+r[7]*h[14],r[4]*h[3]+r[5]*h[7]+r[6]*h[11]+r[7]*h[15],r[8]*h[0]+r[9]*h[4]+r[10]*h[8]+r[11]*h[12],r[8]*h[1]+r[9]*h[5]+r[10]*h[9]+r[11]*h[13],r[8]*h[2]+r[9]*h[6]+r[10]*h[10]+r[11]*h[14],r[8]*h[3]+r[9]*h[7]+r[10]*h[11]+r[11]*h[15],r[12]*h[0]+r[13]*h[4]+r[14]*h[8]+r[15]*h[12],r[12]*h[1]+r[13]*h[5]+r[14]*h[9]+r[15]*h[13],r[12]*h[2]+r[13]*h[6]+r[14]*h[10]+r[15]*h[14],r[12]*h[3]+r[13]*h[7]+r[14]*h[11]+r[15]*h[15])},premultiply:function(n){return this.multiplyMatrices(n,this)},multiplyMatrices:function(n,r){var h=n.val,a=r.val,c=h[0],d=h[4],f=h[8],v=h[12],m=h[1],x=h[5],T=h[9],y=h[13],E=h[2],w=h[6],R=h[10],C=h[14],A=h[3],S=h[7],b=h[11],_=h[15],P=a[0],D=a[4],O=a[8],F=a[12],N=a[1],k=a[5],L=a[9],U=a[13],Y=a[2],B=a[6],W=a[10],G=a[14],X=a[3],q=a[7],j=a[11],V=a[15];return this.setValues(c*P+d*N+f*Y+v*X,m*P+x*N+T*Y+y*X,E*P+w*N+R*Y+C*X,A*P+S*N+b*Y+_*X,c*D+d*k+f*B+v*q,m*D+x*k+T*B+y*q,E*D+w*k+R*B+C*q,A*D+S*k+b*B+_*q,c*O+d*L+f*W+v*j,m*O+x*L+T*W+y*j,E*O+w*L+R*W+C*j,A*O+S*L+b*W+_*j,c*F+d*U+f*G+v*V,m*F+x*U+T*G+y*V,E*F+w*U+R*G+C*V,A*F+S*U+b*G+_*V)},translate:function(n){return this.translateXYZ(n.x,n.y,n.z)},translateXYZ:function(n,r,h){var a=this.val;return a[12]=a[0]*n+a[4]*r+a[8]*h+a[12],a[13]=a[1]*n+a[5]*r+a[9]*h+a[13],a[14]=a[2]*n+a[6]*r+a[10]*h+a[14],a[15]=a[3]*n+a[7]*r+a[11]*h+a[15],this},scale:function(n){return this.scaleXYZ(n.x,n.y,n.z)},scaleXYZ:function(n,r,h){var a=this.val;return a[0]=a[0]*n,a[1]=a[1]*n,a[2]=a[2]*n,a[3]=a[3]*n,a[4]=a[4]*r,a[5]=a[5]*r,a[6]=a[6]*r,a[7]=a[7]*r,a[8]=a[8]*h,a[9]=a[9]*h,a[10]=a[10]*h,a[11]=a[11]*h,this},makeRotationAxis:function(n,r){var h=Math.cos(r),a=Math.sin(r),c=1-h,d=n.x,f=n.y,v=n.z,m=c*d,x=c*f;return this.setValues(m*d+h,m*f-a*v,m*v+a*f,0,m*f+a*v,x*f+h,x*v-a*d,0,m*v-a*f,x*v+a*d,c*v*v+h,0,0,0,0,1)},rotate:function(n,r){var h=this.val,a=r.x,c=r.y,d=r.z,f=Math.sqrt(a*a+c*c+d*d);if(Math.abs(f)<i)return this;a*=f=1/f,c*=f,d*=f;var v=Math.sin(n),m=Math.cos(n),x=1-m,T=h[0],y=h[1],E=h[2],w=h[3],R=h[4],C=h[5],A=h[6],S=h[7],b=h[8],_=h[9],P=h[10],D=h[11],O=h[12],F=h[13],N=h[14],k=h[15],L=a*a*x+m,U=c*a*x+d*v,Y=d*a*x-c*v,B=a*c*x-d*v,W=c*c*x+m,G=d*c*x+a*v,X=a*d*x+c*v,q=c*d*x-a*v,j=d*d*x+m;return this.setValues(T*L+R*U+b*Y,y*L+C*U+_*Y,E*L+A*U+P*Y,w*L+S*U+D*Y,T*B+R*W+b*G,y*B+C*W+_*G,E*B+A*W+P*G,w*B+S*W+D*G,T*X+R*q+b*j,y*X+C*q+_*j,E*X+A*q+P*j,w*X+S*q+D*j,O,F,N,k)},rotateX:function(n){var r=this.val,h=Math.sin(n),a=Math.cos(n),c=r[4],d=r[5],f=r[6],v=r[7],m=r[8],x=r[9],T=r[10],y=r[11];return r[4]=c*a+m*h,r[5]=d*a+x*h,r[6]=f*a+T*h,r[7]=v*a+y*h,r[8]=m*a-c*h,r[9]=x*a-d*h,r[10]=T*a-f*h,r[11]=y*a-v*h,this},rotateY:function(n){var r=this.val,h=Math.sin(n),a=Math.cos(n),c=r[0],d=r[1],f=r[2],v=r[3],m=r[8],x=r[9],T=r[10],y=r[11];return r[0]=c*a-m*h,r[1]=d*a-x*h,r[2]=f*a-T*h,r[3]=v*a-y*h,r[8]=c*h+m*a,r[9]=d*h+x*a,r[10]=f*h+T*a,r[11]=v*h+y*a,this},rotateZ:function(n){var r=this.val,h=Math.sin(n),a=Math.cos(n),c=r[0],d=r[1],f=r[2],v=r[3],m=r[4],x=r[5],T=r[6],y=r[7];return r[0]=c*a+m*h,r[1]=d*a+x*h,r[2]=f*a+T*h,r[3]=v*a+y*h,r[4]=m*a-c*h,r[5]=x*a-d*h,r[6]=T*a-f*h,r[7]=y*a-v*h,this},fromRotationTranslation:function(n,r){var h=n.x,a=n.y,c=n.z,d=n.w,f=h+h,v=a+a,m=c+c,x=h*f,T=h*v,y=h*m,E=a*v,w=a*m,R=c*m,C=d*f,A=d*v,S=d*m;return this.setValues(1-(E+R),T+S,y-A,0,T-S,1-(x+R),w+C,0,y+A,w-C,1-(x+E),0,r.x,r.y,r.z,1)},fromQuat:function(n){var r=n.x,h=n.y,a=n.z,c=n.w,d=r+r,f=h+h,v=a+a,m=r*d,x=r*f,T=r*v,y=h*f,E=h*v,w=a*v,R=c*d,C=c*f,A=c*v;return this.setValues(1-(y+w),x+A,T-C,0,x-A,1-(m+w),E+R,0,T+C,E-R,1-(m+y),0,0,0,0,1)},frustum:function(n,r,h,a,c,d){var f=1/(r-n),v=1/(a-h),m=1/(c-d);return this.setValues(2*c*f,0,0,0,0,2*c*v,0,0,(r+n)*f,(a+h)*v,(d+c)*m,-1,0,0,d*c*2*m,0)},perspective:function(n,r,h,a){var c=1/Math.tan(n/2),d=1/(h-a);return this.setValues(c/r,0,0,0,0,c,0,0,0,0,(a+h)*d,-1,0,0,2*a*h*d,0)},perspectiveLH:function(n,r,h,a){return this.setValues(2*h/n,0,0,0,0,2*h/r,0,0,0,0,-a/(h-a),1,0,0,h*a/(h-a),0)},ortho:function(n,r,h,a,c,d){var f=n-r,v=h-a,m=c-d;return f=f===0?f:1/f,v=v===0?v:1/v,m=m===0?m:1/m,this.setValues(-2*f,0,0,0,0,-2*v,0,0,0,0,2*m,0,(n+r)*f,(a+h)*v,(d+c)*m,1)},lookAtRH:function(n,r,h){var a=this.val;return s.subVectors(n,r),s.getLengthSquared()===0&&(s.z=1),s.normalize(),o.crossVectors(h,s),o.getLengthSquared()===0&&(Math.abs(h.z)===1?s.x+=1e-4:s.z+=1e-4,s.normalize(),o.crossVectors(h,s)),o.normalize(),t.crossVectors(s,o),a[0]=o.x,a[1]=o.y,a[2]=o.z,a[4]=t.x,a[5]=t.y,a[6]=t.z,a[8]=s.x,a[9]=s.y,a[10]=s.z,this},lookAt:function(n,r,h){var a=n.x,c=n.y,d=n.z,f=h.x,v=h.y,m=h.z,x=r.x,T=r.y,y=r.z;if(Math.abs(a-x)<i&&Math.abs(c-T)<i&&Math.abs(d-y)<i)return this.identity();var E=a-x,w=c-T,R=d-y,C=1/Math.sqrt(E*E+w*w+R*R),A=v*(R*=C)-m*(w*=C),S=m*(E*=C)-f*R,b=f*w-v*E;(C=Math.sqrt(A*A+S*S+b*b))?(A*=C=1/C,S*=C,b*=C):(A=0,S=0,b=0);var _=w*b-R*S,P=R*A-E*b,D=E*S-w*A;return(C=Math.sqrt(_*_+P*P+D*D))?(_*=C=1/C,P*=C,D*=C):(_=0,P=0,D=0),this.setValues(A,_,E,0,S,P,w,0,b,D,R,0,-(A*a+S*c+b*d),-(_*a+P*c+D*d),-(E*a+w*c+R*d),1)},yawPitchRoll:function(n,r,h){this.zero(),e.zero(),l.zero();var a=this.val,c=e.val,d=l.val,f=Math.sin(h),v=Math.cos(h);return a[10]=1,a[15]=1,a[0]=v,a[1]=f,a[4]=-f,a[5]=v,f=Math.sin(r),v=Math.cos(r),c[0]=1,c[15]=1,c[5]=v,c[10]=v,c[9]=-f,c[6]=f,f=Math.sin(n),v=Math.cos(n),d[5]=1,d[15]=1,d[0]=v,d[2]=-f,d[8]=f,d[10]=v,this.multiplyLocal(e),this.multiplyLocal(l),this},setWorldMatrix:function(n,r,h,a,c){return this.yawPitchRoll(n.y,n.x,n.z),e.scaling(h.x,h.y,h.z),l.xyz(r.x,r.y,r.z),this.multiplyLocal(e),this.multiplyLocal(l),a&&this.multiplyLocal(a),c&&this.multiplyLocal(c),this},multiplyToMat4:function(n,r){var h=this.val,a=n.val,c=h[0],d=h[1],f=h[2],v=h[3],m=h[4],x=h[5],T=h[6],y=h[7],E=h[8],w=h[9],R=h[10],C=h[11],A=h[12],S=h[13],b=h[14],_=h[15],P=a[0],D=a[1],O=a[2],F=a[3],N=a[4],k=a[5],L=a[6],U=a[7],Y=a[8],B=a[9],W=a[10],G=a[11],X=a[12],q=a[13],j=a[14],V=a[15];return r.setValues(P*c+D*m+O*E+F*A,D*d+D*x+O*w+F*S,O*f+D*T+O*R+F*b,F*v+D*y+O*C+F*_,N*c+k*m+L*E+U*A,N*d+k*x+L*w+U*S,N*f+k*T+L*R+U*b,N*v+k*y+L*C+U*_,Y*c+B*m+W*E+G*A,Y*d+B*x+W*w+G*S,Y*f+B*T+W*R+G*b,Y*v+B*y+W*C+G*_,X*c+q*m+j*E+V*A,X*d+q*x+j*w+V*S,X*f+q*T+j*R+V*b,X*v+q*y+j*C+V*_)},fromRotationXYTranslation:function(n,r,h){var a=r.x,c=r.y,d=r.z,f=Math.sin(n.x),v=Math.cos(n.x),m=Math.sin(n.y),x=Math.cos(n.y),T=a,y=c,E=d,w=-f,R=0-w*m,C=0-v*m,A=w*x,S=v*x;return h||(T=x*a+m*d,y=R*a+v*c+A*d,E=C*a+f*c+S*d),this.setValues(x,R,C,0,0,v,f,0,m,A,S,0,T,y,E,1)},getMaxScaleOnAxis:function(){var n=this.val,r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],h=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],a=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(r,h,a))}}),e=new u,l=new u,o=new p,t=new p,s=new p;I.exports=u},function(I,z,M){var g=M(0),p=M(15),i=M(205),u=M(11),e=M(216),l=M(45),o=M(217),t=M(46),s=new g({initialize:function(n,r){this.loader=n,this.cache=u(r,"cache",!1),this.type=u(r,"type",!1),this.key=u(r,"key",!1);var h=this.key;if(n.prefix&&n.prefix!==""&&(this.key=n.prefix+h),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var a=u(r,"url");a===void 0?a=n.path+h+"."+u(r,"extension",""):typeof a!="string"||a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(a=n.path+a),this.url=a,this.src="",this.xhrSettings=t(u(r,"responseType",void 0)),u(r,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,u(r,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?p.FILE_POPULATED:p.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(r,"config",{}),this.multiFile,this.linkFile},setLink:function(n){this.linkFile=n,n.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===p.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=p.FILE_LOADING,this.src=e(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,this.loader.xhr))},onLoad:function(n,r){var h=n.responseURL&&n.responseURL.indexOf("file://")===0&&r.target.status===0,a=!(r.target&&r.target.status!==200)||h;n.readyState===4&&n.status>=400&&n.status<=599&&(a=!1),this.state=p.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,a)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(n){n.lengthComputable&&(this.bytesLoaded=n.loaded,this.bytesTotal=n.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(i.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=p.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=p.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=p.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(n){n===void 0&&(n=this.data);var r=this.key,h=this.type;this.loader.emit(i.FILE_COMPLETE,r,h,n),this.loader.emit(i.FILE_KEY_COMPLETE+h+"-"+r,r,h,n),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});s.createObjectURL=function(n,r,h){if(typeof URL=="function")n.src=URL.createObjectURL(r);else{var a=new FileReader;a.onload=function(){n.removeAttribute("crossOrigin"),n.src="data:"+(r.type||h)+";base64,"+a.result.split(",")[1]},a.onerror=n.onerror,a.readAsDataURL(r)}},s.revokeObjectURL=function(n){typeof URL=="function"&&URL.revokeObjectURL(n.src)},I.exports=s},function(I,z){var M={},g={install:function(p){for(var i in M)p[i]=M[i]},register:function(p,i){M[p]=i},destroy:function(){M={}}};I.exports=g},function(I,z,M){var g=M(0),p=M(4),i=M(2),u=new g({initialize:function(e,l,o,t,s,n){e===void 0&&(e=1),l===void 0&&(l=0),o===void 0&&(o=0),t===void 0&&(t=1),s===void 0&&(s=0),n===void 0&&(n=0),this.matrix=new Float32Array([e,l,o,t,s,n,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,l=e[0],o=e[1],t=e[2],s=e[3];return l||o?o>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):t||s?p.TAU-(s>0?Math.acos(-t/this.scaleY):-Math.acos(t/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,l){var o=this.matrix;return o[4]=o[0]*e+o[2]*l+o[4],o[5]=o[1]*e+o[3]*l+o[5],this},scale:function(e,l){var o=this.matrix;return o[0]*=e,o[1]*=e,o[2]*=l,o[3]*=l,this},rotate:function(e){var l=Math.sin(e),o=Math.cos(e),t=this.matrix,s=t[0],n=t[1],r=t[2],h=t[3];return t[0]=s*o+r*l,t[1]=n*o+h*l,t[2]=s*-l+r*o,t[3]=n*-l+h*o,this},multiply:function(e,l){var o=this.matrix,t=e.matrix,s=o[0],n=o[1],r=o[2],h=o[3],a=o[4],c=o[5],d=t[0],f=t[1],v=t[2],m=t[3],x=t[4],T=t[5],y=l===void 0?this:l;return y.a=d*s+f*r,y.b=d*n+f*h,y.c=v*s+m*r,y.d=v*n+m*h,y.e=x*s+T*r+a,y.f=x*n+T*h+c,y},multiplyWithOffset:function(e,l,o){var t=this.matrix,s=e.matrix,n=t[0],r=t[1],h=t[2],a=t[3],c=l*n+o*h+t[4],d=l*r+o*a+t[5],f=s[0],v=s[1],m=s[2],x=s[3],T=s[4],y=s[5];return t[0]=f*n+v*h,t[1]=f*r+v*a,t[2]=m*n+x*h,t[3]=m*r+x*a,t[4]=T*n+y*h+c,t[5]=T*r+y*a+d,this},transform:function(e,l,o,t,s,n){var r=this.matrix,h=r[0],a=r[1],c=r[2],d=r[3],f=r[4],v=r[5];return r[0]=e*h+l*c,r[1]=e*a+l*d,r[2]=o*h+t*c,r[3]=o*a+t*d,r[4]=s*h+n*c+f,r[5]=s*a+n*d+v,this},transformPoint:function(e,l,o){o===void 0&&(o={x:0,y:0});var t=this.matrix,s=t[0],n=t[1],r=t[2],h=t[3],a=t[4],c=t[5];return o.x=e*s+l*r+a,o.y=e*n+l*h+c,o},invert:function(){var e=this.matrix,l=e[0],o=e[1],t=e[2],s=e[3],n=e[4],r=e[5],h=l*s-o*t;return e[0]=s/h,e[1]=-o/h,e[2]=-t/h,e[3]=l/h,e[4]=(t*r-s*n)/h,e[5]=-(l*r-o*n)/h,this},copyFrom:function(e){var l=this.matrix;return l[0]=e.a,l[1]=e.b,l[2]=e.c,l[3]=e.d,l[4]=e.e,l[5]=e.f,this},copyFromArray:function(e){var l=this.matrix;return l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3],l[4]=e[4],l[5]=e[5],this},copyToContext:function(e){var l=this.matrix;return e.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e},setToContext:function(e){var l=this.matrix;return e.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),e},copyToArray:function(e){var l=this.matrix;return e===void 0?e=[l[0],l[1],l[2],l[3],l[4],l[5]]:(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5]),e},setTransform:function(e,l,o,t,s,n){var r=this.matrix;return r[0]=e,r[1]=l,r[2]=o,r[3]=t,r[4]=s,r[5]=n,this},decomposeMatrix:function(){var e=this.decomposedMatrix,l=this.matrix,o=l[0],t=l[1],s=l[2],n=l[3],r=o*n-t*s;if(e.translateX=l[4],e.translateY=l[5],o||t){var h=Math.sqrt(o*o+t*t);e.rotation=t>0?Math.acos(o/h):-Math.acos(o/h),e.scaleX=h,e.scaleY=r/h}else if(s||n){var a=Math.sqrt(s*s+n*n);e.rotation=.5*Math.PI-(n>0?Math.acos(-s/a):-Math.acos(s/a)),e.scaleX=r/a,e.scaleY=a}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,l,o,t,s){var n=this.matrix,r=Math.sin(o),h=Math.cos(o);return n[4]=e,n[5]=l,n[0]=h*t,n[1]=r*t,n[2]=-r*s,n[3]=h*s,this},applyInverse:function(e,l,o){o===void 0&&(o=new i);var t=this.matrix,s=t[0],n=t[1],r=t[2],h=t[3],a=t[4],c=t[5],d=1/(s*h+r*-n);return o.x=h*d*e+-r*d*l+(c*r-a*h)*d,o.y=s*d*l+-n*d*e+(-c*s+a*n)*d,o},getX:function(e,l){return e*this.a+l*this.c+this.e},getY:function(e,l){return e*this.b+l*this.d+this.f},getXRound:function(e,l,o){var t=this.getX(e,l);return o&&(t=Math.round(t)),t},getYRound:function(e,l,o){var t=this.getY(e,l);return o&&(t=Math.round(t)),t},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});I.exports=u},function(I,z){I.exports=function(M){if(!Array.isArray(M)||M.length<2||!Array.isArray(M[0]))return!1;for(var g=M[0].length,p=1;p<M.length;p++)if(M[p].length!==g)return!1;return!0}},function(I,z,M){var g=M(0),p=M(299),i=M(61),u=M(300),e=M(26),l=M(301),o=M(306),t=new g({initialize:function(s,n,r,h){s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=0),h===void 0&&(h=0),this.type=e.RECTANGLE,this.x=s,this.y=n,this.width=r,this.height=h},contains:function(s,n){return p(this,s,n)},getPoint:function(s,n){return i(this,s,n)},getPoints:function(s,n,r){return u(this,s,n,r)},getRandomPoint:function(s){return o(this,s)},setTo:function(s,n,r,h){return this.x=s,this.y=n,this.width=r,this.height=h,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,n){return n===void 0&&(n=s),this.x=s,this.y=n,this},setSize:function(s,n){return n===void 0&&(n=s),this.width=s,this.height=n,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new l),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new l),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new l),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new l),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});I.exports=t},function(I,z){I.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(I,z,M){var g=M(7),p=function(){var i,u,e,l,o,t,s=arguments[0]||{},n=1,r=arguments.length,h=!1;for(typeof s=="boolean"&&(h=s,s=arguments[1]||{},n=2),r===n&&(s=this,--n);n<r;n++)if((i=arguments[n])!=null)for(u in i)e=s[u],s!==(l=i[u])&&(h&&l&&(g(l)||(o=Array.isArray(l)))?(o?(o=!1,t=e&&Array.isArray(e)?e:[]):t=e&&g(e)?e:{},s[u]=p(h,t,l)):l!==void 0&&(s[u]=l));return s};I.exports=p},function(I,z){I.exports=function(M,g,p,i){return Math.atan2(i-g,p-M)}},function(I,z){I.exports=function(M){return(M%=2*Math.PI)>=0?M:M+2*Math.PI}},function(I,z,M){var g=M(6);I.exports=function(p){return g(p,-Math.PI,Math.PI)}},function(I,z,M){var g=M(6);I.exports=function(p){return g(p,-180,180)}},function(I,z){I.exports=function(M,g,p){return p===void 0&&(p=1e-4),Math.abs(M-g)<p}},function(I,z,M){var g=M(34);I.exports=function(p,i){return g(p)/g(i)/g(p-i)}},function(I,z){I.exports=function(M){if(M===0)return 1;for(var g=M;--M;)g*=M;return g}},function(I,z){I.exports=function(M,g,p,i,u){var e=.5*(i-g),l=.5*(u-p),o=M*M;return(2*p-2*i+e+l)*(M*o)+(-3*p+3*i-2*e-l)*o+e*M+p}},function(I,z){I.exports=function(M,g,p){return(g-M)*p+M}},function(I,z){I.exports=function(M,g,p){return M<=g?0:M>=p?1:(M=(M-g)/(p-g))*M*(3-2*M)}},function(I,z){I.exports=function(M,g,p){return(M=Math.max(0,Math.min(1,(M-g)/(p-g))))*M*M*(M*(6*M-15)+10)}},function(I,z){I.exports=function(M,g,p,i){var u=Math.cos(i),e=Math.sin(i),l=M.x-g,o=M.y-p;return M.x=l*u-o*e+g,M.y=l*e+o*u+p,M}},function(I,z){I.exports=function(M){return M>0?Math.ceil(M):Math.floor(M)}},function(I,z,M){var g=M(2);I.exports=function(p,i,u,e,l,o,t,s){s===void 0&&(s=new g);var n=Math.sin(l),r=Math.cos(l),h=r*o,a=n*o,c=-n*t,d=r*t,f=1/(h*d+c*-a);return s.x=d*f*p+-c*f*i+(e*c-u*d)*f,s.y=h*f*i+-a*f*p+(-e*h+u*a)*f,s}},function(I,z,M){var g=new(M(0))({initialize:function(p){this.val=new Float32Array(9),p?this.copy(p):this.identity()},clone:function(){return new g(this)},set:function(p){return this.copy(p)},copy:function(p){var i=this.val,u=p.val;return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],this},fromMat4:function(p){var i=p.val,u=this.val;return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[4],u[4]=i[5],u[5]=i[6],u[6]=i[8],u[7]=i[9],u[8]=i[10],this},fromArray:function(p){var i=this.val;return i[0]=p[0],i[1]=p[1],i[2]=p[2],i[3]=p[3],i[4]=p[4],i[5]=p[5],i[6]=p[6],i[7]=p[7],i[8]=p[8],this},identity:function(){var p=this.val;return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=1,p[5]=0,p[6]=0,p[7]=0,p[8]=1,this},transpose:function(){var p=this.val,i=p[1],u=p[2],e=p[5];return p[1]=p[3],p[2]=p[6],p[3]=i,p[5]=p[7],p[6]=u,p[7]=e,this},invert:function(){var p=this.val,i=p[0],u=p[1],e=p[2],l=p[3],o=p[4],t=p[5],s=p[6],n=p[7],r=p[8],h=r*o-t*n,a=-r*l+t*s,c=n*l-o*s,d=i*h+u*a+e*c;return d?(d=1/d,p[0]=h*d,p[1]=(-r*u+e*n)*d,p[2]=(t*u-e*o)*d,p[3]=a*d,p[4]=(r*i-e*s)*d,p[5]=(-t*i+e*l)*d,p[6]=c*d,p[7]=(-n*i+u*s)*d,p[8]=(o*i-u*l)*d,this):null},adjoint:function(){var p=this.val,i=p[0],u=p[1],e=p[2],l=p[3],o=p[4],t=p[5],s=p[6],n=p[7],r=p[8];return p[0]=o*r-t*n,p[1]=e*n-u*r,p[2]=u*t-e*o,p[3]=t*s-l*r,p[4]=i*r-e*s,p[5]=e*l-i*t,p[6]=l*n-o*s,p[7]=u*s-i*n,p[8]=i*o-u*l,this},determinant:function(){var p=this.val,i=p[0],u=p[1],e=p[2],l=p[3],o=p[4],t=p[5],s=p[6],n=p[7],r=p[8];return i*(r*o-t*n)+u*(-r*l+t*s)+e*(n*l-o*s)},multiply:function(p){var i=this.val,u=i[0],e=i[1],l=i[2],o=i[3],t=i[4],s=i[5],n=i[6],r=i[7],h=i[8],a=p.val,c=a[0],d=a[1],f=a[2],v=a[3],m=a[4],x=a[5],T=a[6],y=a[7],E=a[8];return i[0]=c*u+d*o+f*n,i[1]=c*e+d*t+f*r,i[2]=c*l+d*s+f*h,i[3]=v*u+m*o+x*n,i[4]=v*e+m*t+x*r,i[5]=v*l+m*s+x*h,i[6]=T*u+y*o+E*n,i[7]=T*e+y*t+E*r,i[8]=T*l+y*s+E*h,this},translate:function(p){var i=this.val,u=p.x,e=p.y;return i[6]=u*i[0]+e*i[3]+i[6],i[7]=u*i[1]+e*i[4]+i[7],i[8]=u*i[2]+e*i[5]+i[8],this},rotate:function(p){var i=this.val,u=i[0],e=i[1],l=i[2],o=i[3],t=i[4],s=i[5],n=Math.sin(p),r=Math.cos(p);return i[0]=r*u+n*o,i[1]=r*e+n*t,i[2]=r*l+n*s,i[3]=r*o-n*u,i[4]=r*t-n*e,i[5]=r*s-n*l,this},scale:function(p){var i=this.val,u=p.x,e=p.y;return i[0]=u*i[0],i[1]=u*i[1],i[2]=u*i[2],i[3]=e*i[3],i[4]=e*i[4],i[5]=e*i[5],this},fromQuat:function(p){var i=p.x,u=p.y,e=p.z,l=p.w,o=i+i,t=u+u,s=e+e,n=i*o,r=i*t,h=i*s,a=u*t,c=u*s,d=e*s,f=l*o,v=l*t,m=l*s,x=this.val;return x[0]=1-(a+d),x[3]=r+m,x[6]=h-v,x[1]=r-m,x[4]=1-(n+d),x[7]=c+f,x[2]=h+v,x[5]=c-f,x[8]=1-(n+a),this},normalFromMat4:function(p){var i=p.val,u=this.val,e=i[0],l=i[1],o=i[2],t=i[3],s=i[4],n=i[5],r=i[6],h=i[7],a=i[8],c=i[9],d=i[10],f=i[11],v=i[12],m=i[13],x=i[14],T=i[15],y=e*n-l*s,E=e*r-o*s,w=e*h-t*s,R=l*r-o*n,C=l*h-t*n,A=o*h-t*r,S=a*m-c*v,b=a*x-d*v,_=a*T-f*v,P=c*x-d*m,D=c*T-f*m,O=d*T-f*x,F=y*O-E*D+w*P+R*_-C*b+A*S;return F?(F=1/F,u[0]=(n*O-r*D+h*P)*F,u[1]=(r*_-s*O-h*b)*F,u[2]=(s*D-n*_+h*S)*F,u[3]=(o*D-l*O-t*P)*F,u[4]=(e*O-o*_+t*b)*F,u[5]=(l*_-e*D-t*S)*F,u[6]=(m*A-x*C+T*R)*F,u[7]=(x*w-v*A-T*E)*F,u[8]=(v*C-m*w+T*y)*F,this):null}});I.exports=g},function(I,z,M){var g=M(0),p=M(42),i=M(1),u=M(14),e=1e-6,l=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),t=new u(1,0,0),s=new u(0,1,0),n=new u,r=new p,h=new g({initialize:function(a,c,d,f){this.onChangeCallback=i,this.set(a,c,d,f)},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(a){this._w=a,this.onChangeCallback(this)}},copy:function(a){return this.set(a)},set:function(a,c,d,f,v){return v===void 0&&(v=!0),typeof a=="object"?(this._x=a.x||0,this._y=a.y||0,this._z=a.z||0,this._w=a.w||0):(this._x=a||0,this._y=c||0,this._z=d||0,this._w=f||0),v&&this.onChangeCallback(this),this},add:function(a){return this._x+=a.x,this._y+=a.y,this._z+=a.z,this._w+=a.w,this.onChangeCallback(this),this},subtract:function(a){return this._x-=a.x,this._y-=a.y,this._z-=a.z,this._w-=a.w,this.onChangeCallback(this),this},scale:function(a){return this._x*=a,this._y*=a,this._z*=a,this._w*=a,this.onChangeCallback(this),this},length:function(){var a=this.x,c=this.y,d=this.z,f=this.w;return Math.sqrt(a*a+c*c+d*d+f*f)},lengthSq:function(){var a=this.x,c=this.y,d=this.z,f=this.w;return a*a+c*c+d*d+f*f},normalize:function(){var a=this.x,c=this.y,d=this.z,f=this.w,v=a*a+c*c+d*d+f*f;return v>0&&(v=1/Math.sqrt(v),this._x=a*v,this._y=c*v,this._z=d*v,this._w=f*v),this.onChangeCallback(this),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,c){c===void 0&&(c=0);var d=this.x,f=this.y,v=this.z,m=this.w;return this.set(d+c*(a.x-d),f+c*(a.y-f),v+c*(a.z-v),m+c*(a.w-m))},rotationTo:function(a,c){var d=a.x*c.x+a.y*c.y+a.z*c.z;return d<-.999999?(n.copy(t).cross(a).length()<e&&n.copy(s).cross(a),n.normalize(),this.setAxisAngle(n,Math.PI)):d>.999999?this.set(0,0,0,1):(n.copy(a).cross(c),this._x=n.x,this._y=n.y,this._z=n.z,this._w=1+d,this.normalize())},setAxes:function(a,c,d){var f=r.val;return f[0]=c.x,f[3]=c.y,f[6]=c.z,f[1]=d.x,f[4]=d.y,f[7]=d.z,f[2]=-a.x,f[5]=-a.y,f[8]=-a.z,this.fromMat3(r).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(a,c){c*=.5;var d=Math.sin(c);return this.set(d*a.x,d*a.y,d*a.z,Math.cos(c))},multiply:function(a){var c=this.x,d=this.y,f=this.z,v=this.w,m=a.x,x=a.y,T=a.z,y=a.w;return this.set(c*y+v*m+d*T-f*x,d*y+v*x+f*m-c*T,f*y+v*T+c*x-d*m,v*y-c*m-d*x-f*T)},slerp:function(a,c){var d=this.x,f=this.y,v=this.z,m=this.w,x=a.x,T=a.y,y=a.z,E=a.w,w=d*x+f*T+v*y+m*E;w<0&&(w=-w,x=-x,T=-T,y=-y,E=-E);var R=1-c,C=c;if(1-w>e){var A=Math.acos(w),S=Math.sin(A);R=Math.sin((1-c)*A)/S,C=Math.sin(c*A)/S}return this.set(R*d+C*x,R*f+C*T,R*v+C*y,R*m+C*E)},invert:function(){var a=this.x,c=this.y,d=this.z,f=this.w,v=a*a+c*c+d*d+f*f,m=v?1/v:0;return this.set(-a*m,-c*m,-d*m,f*m)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(a){a*=.5;var c=this.x,d=this.y,f=this.z,v=this.w,m=Math.sin(a),x=Math.cos(a);return this.set(c*x+v*m,d*x+f*m,f*x-d*m,v*x-c*m)},rotateY:function(a){a*=.5;var c=this.x,d=this.y,f=this.z,v=this.w,m=Math.sin(a),x=Math.cos(a);return this.set(c*x-f*m,d*x+v*m,f*x+c*m,v*x-d*m)},rotateZ:function(a){a*=.5;var c=this.x,d=this.y,f=this.z,v=this.w,m=Math.sin(a),x=Math.cos(a);return this.set(c*x+d*m,d*x-c*m,f*x+v*m,v*x-f*m)},calculateW:function(){var a=this.x,c=this.y,d=this.z;return this.w=-Math.sqrt(1-a*a-c*c-d*d),this},setFromEuler:function(a,c){var d=a.x/2,f=a.y/2,v=a.z/2,m=Math.cos(d),x=Math.cos(f),T=Math.cos(v),y=Math.sin(d),E=Math.sin(f),w=Math.sin(v);switch(a.order){case"XYZ":this.set(y*x*T+m*E*w,m*E*T-y*x*w,m*x*w+y*E*T,m*x*T-y*E*w,c);break;case"YXZ":this.set(y*x*T+m*E*w,m*E*T-y*x*w,m*x*w-y*E*T,m*x*T+y*E*w,c);break;case"ZXY":this.set(y*x*T-m*E*w,m*E*T+y*x*w,m*x*w+y*E*T,m*x*T-y*E*w,c);break;case"ZYX":this.set(y*x*T-m*E*w,m*E*T+y*x*w,m*x*w-y*E*T,m*x*T+y*E*w,c);break;case"YZX":this.set(y*x*T+m*E*w,m*E*T+y*x*w,m*x*w-y*E*T,m*x*T-y*E*w,c);break;case"XZY":this.set(y*x*T-m*E*w,m*E*T-y*x*w,m*x*w+y*E*T,m*x*T+y*E*w,c)}return this},setFromRotationMatrix:function(a){var c,d=a.val,f=d[0],v=d[4],m=d[8],x=d[1],T=d[5],y=d[9],E=d[2],w=d[6],R=d[10],C=f+T+R;return C>0?(c=.5/Math.sqrt(C+1),this.set((w-y)*c,(m-E)*c,(x-v)*c,.25/c)):f>T&&f>R?(c=2*Math.sqrt(1+f-T-R),this.set(.25*c,(v+x)/c,(m+E)/c,(w-y)/c)):T>R?(c=2*Math.sqrt(1+T-f-R),this.set((v+x)/c,.25*c,(y+w)/c,(m-E)/c)):(c=2*Math.sqrt(1+R-f-T),this.set((m+E)/c,(y+w)/c,.25*c,(x-v)/c)),this},fromMat3:function(a){var c,d=a.val,f=d[0]+d[4]+d[8];if(f>0)c=Math.sqrt(f+1),this.w=.5*c,c=.5/c,this._x=(d[7]-d[5])*c,this._y=(d[2]-d[6])*c,this._z=(d[3]-d[1])*c;else{var v=0;d[4]>d[0]&&(v=1),d[8]>d[3*v+v]&&(v=2);var m=l[v],x=l[m];c=Math.sqrt(d[3*v+v]-d[3*m+m]-d[3*x+x]+1),o[v]=.5*c,c=.5/c,o[m]=(d[3*m+v]+d[3*v+m])*c,o[x]=(d[3*x+v]+d[3*v+x])*c,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(d[3*x+m]-d[3*m+x])*c}return this.onChangeCallback(this),this}});I.exports=h},function(I,z,M){I.exports={ADDED_TO_SCENE:M(180),BOOT:M(181),CREATE:M(182),DESTROY:M(183),PAUSE:M(184),POST_UPDATE:M(185),PRE_RENDER:M(186),PRE_UPDATE:M(187),READY:M(188),REMOVED_FROM_SCENE:M(189),RENDER:M(190),RESUME:M(191),SHUTDOWN:M(192),SLEEP:M(193),START:M(194),TRANSITION_COMPLETE:M(195),TRANSITION_INIT:M(196),TRANSITION_OUT:M(197),TRANSITION_START:M(198),TRANSITION_WAKE:M(199),UPDATE:M(200),WAKE:M(201)}},function(I,z,M){var g=M(27),p=M(46);I.exports=function(i,u){var e=i===void 0?p():g({},i);if(u)for(var l in u)u[l]!==void 0&&(e[l]=u[l]);return e}},function(I,z){I.exports=function(M,g,p,i,u,e){return M===void 0&&(M=""),g===void 0&&(g=!0),p===void 0&&(p=""),i===void 0&&(i=""),u===void 0&&(u=0),e===void 0&&(e=!1),{responseType:M,async:g,user:p,password:i,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:e}}},function(I,z){I.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(M){this.scaleX=M/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(M){this.scaleY=M/this.height}},setSize:function(M,g){return this.width=M,this.height=g,this},setDisplaySize:function(M,g){return this.displayWidth=M,this.displayHeight=g,this}}},function(I,z){I.exports={_depth:0,depth:{get:function(){return this._depth},set:function(M){this.displayList&&this.displayList.queueDepthSort(),this._depth=M}},setDepth:function(M){return M===void 0&&(M=0),this.depth=M,this}}},function(I,z){I.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(M){return this.flipX=M,this},setFlipY:function(M){return this.flipY=M,this},setFlip:function(M,g){return this.flipX=M,this.flipY=g,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(I,z){I.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(M,g){return g===void 0&&(g=M),this.scrollFactorX=M,this.scrollFactorY=g,this}}},function(I,z,M){var g=M(4),p=M(23),i=M(41),u=M(30),e=M(31),l=M(2),o={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,t===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,t===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,t===0?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return e(this._rotation*g.RAD_TO_DEG)},set:function(t){this.rotation=e(t)*g.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=u(t)}},setPosition:function(t,s,n,r){return t===void 0&&(t=0),s===void 0&&(s=t),n===void 0&&(n=0),r===void 0&&(r=0),this.x=t,this.y=s,this.z=n,this.w=r,this},copyPosition:function(t){return t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.z!==void 0&&(this.z=t.z),t.w!==void 0&&(this.w=t.w),this},setRandomPosition:function(t,s,n,r){return t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=s+Math.random()*r,this},setRotation:function(t){return t===void 0&&(t=0),this.rotation=t,this},setAngle:function(t){return t===void 0&&(t=0),this.angle=t,this},setScale:function(t,s){return t===void 0&&(t=1),s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this},setX:function(t){return t===void 0&&(t=0),this.x=t,this},setY:function(t){return t===void 0&&(t=0),this.y=t,this},setZ:function(t){return t===void 0&&(t=0),this.z=t,this},setW:function(t){return t===void 0&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return t===void 0&&(t=new p),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,s){t===void 0&&(t=new p),s===void 0&&(s=new p);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)s.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),s.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,s,n,r){n||(n=new l),r||(r=this.scene.sys.cameras.main);var h=r.scrollX,a=r.scrollY,c=t+h*this.scrollFactorX-h,d=s+a*this.scrollFactorY-a;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(c,d,n):i(c,d,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,s=this.parentContainer;s;)t+=s.rotation,s=s.parentContainer;return t}};I.exports=o},function(I,z){I.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(M){M?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(M){return this.visible=M,this}}},function(I,z,M){var g=M(0),p=M(54),i=M(222),u=M(229),e=M(55),l=M(44),o=new g({Extends:u,initialize:function(t,s){u.call(this),this.scene=t,this.displayList=null,this.type=s,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(e.ADDED_TO_SCENE,this.addedToScene,this),this.on(e.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new i(this)),this},setData:function(t,s){return this.data||(this.data=new i(this)),this.data.set(t,s),this},incData:function(t,s){return this.data||(this.data=new i(this)),this.data.inc(t,s),this},toggleData:function(t){return this.data||(this.data=new i(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new i(this)),this.data.get(t)},setInteractive:function(t,s,n){return this.scene.sys.input.enable(this,t,s,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return p(this)},willRender:function(t){return!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,s=this.parentContainer,n=[];s&&(n.unshift(s.getIndex(t)),t=s,s.parentContainer);)s=s.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return t===void 0&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(e.ADDED_TO_SCENE,this,this.scene),t.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(e.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(e.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,I.exports=o},function(I,z){I.exports=function(M){var g={name:M.name,type:M.type,x:M.x,y:M.y,depth:M.depth,scale:{x:M.scaleX,y:M.scaleY},origin:{x:M.originX,y:M.originY},flipX:M.flipX,flipY:M.flipY,rotation:M.rotation,alpha:M.alpha,visible:M.visible,blendMode:M.blendMode,textureKey:"",frameKey:"",data:{}};return M.texture&&(g.textureKey=M.texture.key,g.frameKey=M.frame.name),g}},function(I,z,M){I.exports={ADDED_TO_SCENE:M(230),DESTROY:M(231),REMOVED_FROM_SCENE:M(232),VIDEO_COMPLETE:M(233),VIDEO_CREATED:M(234),VIDEO_ERROR:M(235),VIDEO_LOOP:M(236),VIDEO_PLAY:M(237),VIDEO_SEEKED:M(238),VIDEO_SEEKING:M(239),VIDEO_STOP:M(240),VIDEO_TIMEOUT:M(241),VIDEO_UNLOCKED:M(242)}},function(I,z,M){var g=M(23),p=new g,i=new g,u=new g,e={camera:p,sprite:i,calc:u};I.exports=function(l,o,t){var s=p,n=i,r=u;return n.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),s.copyFrom(o.matrix),t?(s.multiplyWithOffset(t,-o.scrollX*l.scrollFactorX,-o.scrollY*l.scrollFactorY),n.e=l.x,n.f=l.y):(n.e-=o.scrollX*l.scrollFactorX,n.f-=o.scrollY*l.scrollFactorY),s.multiply(n,r),e}},function(I,z){I.exports=function(M){for(var g=M.length,p=M[0].length,i=new Array(p),u=0;u<p;u++){i[u]=new Array(g);for(var e=g-1;e>-1;e--)i[u][e]=M[e][u]}return i}},function(I,z){I.exports=function(M,g){g===void 0&&(g=1);for(var p=null,i=0;i<g;i++)p=M.shift(),M.push(p);return p}},function(I,z){I.exports=function(M,g){g===void 0&&(g=1);for(var p=null,i=0;i<g;i++)p=M.pop(),M.unshift(p);return p}},function(I,z){I.exports=function(M){for(var g=M.length-1;g>0;g--){var p=Math.floor(Math.random()*(g+1)),i=M[g];M[g]=M[p],M[p]=i}return M}},function(I,z,M){var g=M(62),p=M(13);I.exports=function(i,u,e){if(e===void 0&&(e=new p),u<=0||u>=1)return e.x=i.x,e.y=i.y,e;var l=g(i)*u;return u>.5?(l-=i.width+i.height)<=i.width?(e.x=i.right-l,e.y=i.bottom):(e.x=i.x,e.y=i.bottom-(l-i.width)):l<=i.width?(e.x=i.x+l,e.y=i.y):(e.x=i.right,e.y=i.y+(l-i.width)),e}},function(I,z){I.exports=function(M){return 2*(M.width+M.height)}},function(I,z,M){var g,p=M(64),i=M(0),u=M(10),e=M(177),l=M(178),o=M(202),t=M(203),s=M(221),n=M(254),r=M(1),h=new i({Extends:l,initialize:function(a,c,d){l.call(this,a,c,d);var f=c.game;this.isWebGL=f.config.renderType===2,this.cache=f.cache.addCustom("spine"),this.spineTextures=f.cache.addCustom("spineTextures"),this.json=f.cache.json,this.textures=f.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=o,this.temp1,this.temp2,this.isWebGL?(this.runtime=o.webgl,this.renderer=f.renderer,this.gl=f.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=o.canvas,this.renderer=f.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:f.scale.width,height:f.scale.height,preRender:r,postRender:r,render:r,destroy:r}),c.registerFileType("spine",this.spineFileCallback,a),c.registerGameObject("spine",function(v,m,x,T,y){var E=this.scene.sys[d],w=new s(this.scene,E,v,m,x,T,y);return this.displayList.add(w),this.updateList.add(w),w},function(v,m){v===void 0&&(v={});var x=u(v,"key",null),T=u(v,"animationName",null),y=u(v,"loop",!1),E=this.scene.sys[d],w=new s(this.scene,E,0,0,x,T,y);m!==void 0&&(v.add=m),p(this.scene,w,v);var R=u(v,"skinName",!1);R&&w.setSkinByName(R);var C=u(v,"slotName",!1),A=u(v,"attachmentName",null);return C&&w.setAttachment(C,A),w.refresh()}),c.registerGameObject("spineContainer",function(v,m,x){var T=this.scene.sys[d],y=new n(this.scene,T,v,m,x);return this.displayList.add(y),y},function(v,m){v===void 0&&(v={});var x=u(v,"x",0),T=u(v,"y",0),y=u(v,"children",null),E=this.scene.sys[d],w=new n(this.scene,E,x,T,y);return m!==void 0&&(v.add=m),p(this.scene,w,v),w})},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(e,this.onResize,this)):this.bootCanvas();var a=this.systems.events;a.once("shutdown",this.shutdown,this),a.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new o.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){var a=function(c,d){if(c!==this.srcBlend||d!==this.dstBlend){var f=this.context.gl;this.srcBlend=c,this.dstBlend=d,this.isDrawing&&(this.flush(),f.blendFunc(this.srcBlend,this.dstBlend))}};g||((g=new o.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=a,g.shapes.setBlendMode=a),this.sceneRenderer=g,this.skeletonRenderer=g.skeletonRenderer,this.skeletonDebugRenderer=g.skeletonDebugRenderer,this.temp1=new o.webgl.Vector3(0,0,0),this.temp2=new o.webgl.Vector3(0,0,0)},getAtlasCanvas:function(a){var c=this.cache.get(a);if(c){var d,f=this.spineTextures;if(f.has(a))d=f.get(a);else{var v=this.textures;d=new o.TextureAtlas(c.data,function(m){return new o.canvas.CanvasTexture(v.get(c.prefix+m).getSourceImage())})}return d}console.warn("No atlas data for: "+a)},getAtlasWebGL:function(a){var c=this.cache.get(a);if(c){var d,f=this.spineTextures;if(f.has(a))d=f.get(a);else{var v=this.textures,m=this.sceneRenderer.context.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),d=new o.TextureAtlas(c.data,function(x){return new o.webgl.GLTexture(m,v.get(c.prefix+x).getSourceImage(),!1)})}return d}console.warn("No atlas data for: "+a)},spineFileCallback:function(a,c,d,f,v,m){var x;if(Array.isArray(a))for(var T=0;T<a.length;T++)x=new t(this,a[T]),this.addFile(x.files);else x=new t(this,a,c,d,f,v,m),this.addFile(x.files);return this},worldToLocal:function(a,c,d,f){var v=this.temp1,m=this.temp2,x=this.sceneRenderer.camera;v.set(a+d.x,c-d.y,0);var T=x.viewportWidth,y=x.viewportHeight;return x.screenToWorld(v,T,y),f&&f.parent!==null?(f.parent.worldToLocal(m.set(v.x-d.x,v.y-d.y,0)),new o.Vector2(m.x,m.y)):f?new o.Vector2(v.x-d.x,v.y-d.y):new o.Vector2(v.x,v.y)},getVector2:function(a,c){return new o.Vector2(a,c)},getVector3:function(a,c,d){return new o.webgl.Vector3(a,c,d)},setDebugBones:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawBones=a,this},setDebugRegionAttachments:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawRegionAttachments=a,this},setDebugBoundingBoxes:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawBoundingBoxes=a,this},setDebugMeshHull:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawMeshHull=a,this},setDebugMeshTriangles:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawMeshTriangles=a,this},setDebugPaths:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawPaths=a,this},setDebugSkeletonXY:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawSkeletonXY=a,this},setDebugClipping:function(a){return a===void 0&&(a=!0),this.skeletonDebugRenderer.drawClipping=a,this},setEffect:function(a){return this.sceneRenderer.skeletonRenderer.vertexEffect=a,this},createSkeleton:function(a,c){var d=a,f=a,v=a.indexOf(".")!==-1;if(v){var m=a.split(".");d=m.shift(),f=m.join(".")}var x=this.cache.get(d),T=this.getAtlas(d);if(!T)return null;this.spineTextures.has(d)||this.spineTextures.add(d,T);var y,E=x.preMultipliedAlpha,w=new o.AtlasAttachmentLoader(T),R=new o.SkeletonJson(w);if(c)y=c;else{var C=this.json.get(d);y=v?u(C,f):C}if(y){var A=R.readSkeletonData(y);return{skeletonData:A,skeleton:new o.Skeleton(A),preMultipliedAlpha:E}}return null},createAnimationState:function(a){var c=new o.AnimationStateData(a.data);return{stateData:c,state:new o.AnimationState(c)}},getBounds:function(a){var c=new o.Vector2,d=new o.Vector2;return a.getBounds(c,d,[]),{offset:c,size:d}},onResize:function(){var a=this.renderer,c=this.sceneRenderer,d=a.width,f=a.height;c.camera.position.x=d/2,c.camera.position.y=f/2,c.camera.setViewport(d,f)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(e,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,g&&(g.dispose(),g=null),this.sceneRenderer=null}});h.SpineGameObject=s,h.SpineContainer=n,I.exports=h},function(I,z,M){var g=M(17),p=M(65);I.exports=function(i,u,e){u.x=p(e,"x",0),u.y=p(e,"y",0),u.depth=p(e,"depth",0),u.flipX=p(e,"flipX",!1),u.flipY=p(e,"flipY",!1);var l=p(e,"scale",null);typeof l=="number"?u.setScale(l):l!==null&&(u.scaleX=p(l,"x",1),u.scaleY=p(l,"y",1));var o=p(e,"scrollFactor",null);typeof o=="number"?u.setScrollFactor(o):o!==null&&(u.scrollFactorX=p(o,"x",1),u.scrollFactorY=p(o,"y",1)),u.rotation=p(e,"rotation",0);var t=p(e,"angle",null);t!==null&&(u.angle=t),u.alpha=p(e,"alpha",1);var s=p(e,"origin",null);if(typeof s=="number")u.setOrigin(s);else if(s!==null){var n=p(s,"x",.5),r=p(s,"y",.5);u.setOrigin(n,r)}return u.blendMode=p(e,"blendMode",g.NORMAL),u.visible=p(e,"visible",!0),p(e,"add",!0)&&i.sys.displayList.add(u),u.preUpdate&&i.sys.updateList.add(u),u}},function(I,z,M){var g=M(66),p=M(10);I.exports=function(i,u,e){var l=p(i,u,null);if(l===null)return e;if(Array.isArray(l))return g.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return g.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return g.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(u);return l}},function(I,z,M){var g=M(4),p=M(27),i={Angle:M(67),Distance:M(76),Easing:M(84),Fuzzy:M(129),Interpolation:M(134),Pow2:M(142),Snap:M(146),RandomDataGenerator:M(150),Average:M(151),Bernstein:M(33),Between:M(152),CatmullRom:M(35),CeilTo:M(153),Clamp:M(3),DegToRad:M(19),Difference:M(154),Euler:M(155),Factorial:M(34),FloatBetween:M(18),FloorTo:M(156),FromPercent:M(157),GetSpeed:M(158),IsEven:M(159),IsEvenStrict:M(160),Linear:M(36),MaxAdd:M(161),Median:M(162),MinSub:M(163),Percent:M(164),RadToDeg:M(9),RandomXY:M(165),RandomXYZ:M(166),RandomXYZW:M(167),Rotate:M(168),RotateAround:M(39),RotateAroundDistance:M(169),RotateTo:M(170),RoundAwayFromZero:M(40),RoundTo:M(171),SinCosTableGenerator:M(172),SmootherStep:M(38),SmoothStep:M(37),ToXY:M(173),TransformXY:M(41),Within:M(174),Wrap:M(6),Vector2:M(2),Vector3:M(14),Vector4:M(175),Matrix3:M(42),Matrix4:M(20),Quaternion:M(43),RotateVec3:M(176)};i=p(!1,i,g),I.exports=i},function(I,z,M){I.exports={Between:M(28),BetweenPoints:M(68),BetweenPointsY:M(69),BetweenY:M(70),CounterClockwise:M(8),Normalize:M(29),Random:M(71),RandomDegrees:M(72),Reverse:M(73),RotateTo:M(74),ShortestBetween:M(75),Wrap:M(30),WrapDegrees:M(31)}},function(I,z){I.exports=function(M,g){return Math.atan2(g.y-M.y,g.x-M.x)}},function(I,z){I.exports=function(M,g){return Math.atan2(g.x-M.x,g.y-M.y)}},function(I,z){I.exports=function(M,g,p,i){return Math.atan2(p-M,i-g)}},function(I,z,M){var g=M(18);I.exports=function(){return g(-Math.PI,Math.PI)}},function(I,z,M){var g=M(18);I.exports=function(){return g(-180,180)}},function(I,z,M){var g=M(29);I.exports=function(p){return g(p+Math.PI)}},function(I,z,M){var g=M(4);I.exports=function(p,i,u){return u===void 0&&(u=.05),p===i||(Math.abs(i-p)<=u||Math.abs(i-p)>=g.PI2-u?p=i:(Math.abs(i-p)>Math.PI&&(i<p?i+=g.PI2:i-=g.PI2),i>p?p+=u:i<p&&(p-=u))),p}},function(I,z){I.exports=function(M,g){var p=g-M;return p===0?0:p-360*Math.floor((p- -180)/360)}},function(I,z,M){I.exports={Between:M(77),BetweenPoints:M(78),BetweenPointsSquared:M(79),Chebyshev:M(80),Power:M(81),Snake:M(82),Squared:M(83)}},function(I,z){I.exports=function(M,g,p,i){var u=M-p,e=g-i;return Math.sqrt(u*u+e*e)}},function(I,z){I.exports=function(M,g){var p=M.x-g.x,i=M.y-g.y;return Math.sqrt(p*p+i*i)}},function(I,z){I.exports=function(M,g){var p=M.x-g.x,i=M.y-g.y;return p*p+i*i}},function(I,z){I.exports=function(M,g,p,i){return Math.max(Math.abs(M-p),Math.abs(g-i))}},function(I,z){I.exports=function(M,g,p,i,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(p-M,u)+Math.pow(i-g,u))}},function(I,z){I.exports=function(M,g,p,i){return Math.abs(M-p)+Math.abs(g-i)}},function(I,z){I.exports=function(M,g,p,i){var u=M-p,e=g-i;return u*u+e*e}},function(I,z,M){I.exports={Back:M(85),Bounce:M(89),Circular:M(93),Cubic:M(97),Elastic:M(101),Expo:M(105),Linear:M(109),Quadratic:M(111),Quartic:M(115),Quintic:M(119),Sine:M(123),Stepped:M(127)}},function(I,z,M){I.exports={In:M(86),Out:M(87),InOut:M(88)}},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1.70158),M*M*((g+1)*M-g)}},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1.70158),--M*M*((g+1)*M+g)+1}},function(I,z){I.exports=function(M,g){g===void 0&&(g=1.70158);var p=1.525*g;return(M*=2)<1?M*M*((p+1)*M-p)*.5:.5*((M-=2)*M*((p+1)*M+p)+2)}},function(I,z,M){I.exports={In:M(90),Out:M(91),InOut:M(92)}},function(I,z){I.exports=function(M){return(M=1-M)<1/2.75?1-7.5625*M*M:M<2/2.75?1-(7.5625*(M-=1.5/2.75)*M+.75):M<2.5/2.75?1-(7.5625*(M-=2.25/2.75)*M+.9375):1-(7.5625*(M-=2.625/2.75)*M+.984375)}},function(I,z){I.exports=function(M){return M<1/2.75?7.5625*M*M:M<2/2.75?7.5625*(M-=1.5/2.75)*M+.75:M<2.5/2.75?7.5625*(M-=2.25/2.75)*M+.9375:7.5625*(M-=2.625/2.75)*M+.984375}},function(I,z){I.exports=function(M){var g=!1;return M<.5?(M=1-2*M,g=!0):M=2*M-1,M<1/2.75?M*=7.5625*M:M=M<2/2.75?7.5625*(M-=1.5/2.75)*M+.75:M<2.5/2.75?7.5625*(M-=2.25/2.75)*M+.9375:7.5625*(M-=2.625/2.75)*M+.984375,g?.5*(1-M):.5*M+.5}},function(I,z,M){I.exports={In:M(94),Out:M(95),InOut:M(96)}},function(I,z){I.exports=function(M){return 1-Math.sqrt(1-M*M)}},function(I,z){I.exports=function(M){return Math.sqrt(1- --M*M)}},function(I,z){I.exports=function(M){return(M*=2)<1?-.5*(Math.sqrt(1-M*M)-1):.5*(Math.sqrt(1-(M-=2)*M)+1)}},function(I,z,M){I.exports={In:M(98),Out:M(99),InOut:M(100)}},function(I,z){I.exports=function(M){return M*M*M}},function(I,z){I.exports=function(M){return--M*M*M+1}},function(I,z){I.exports=function(M){return(M*=2)<1?.5*M*M*M:.5*((M-=2)*M*M+2)}},function(I,z,M){I.exports={In:M(102),Out:M(103),InOut:M(104)}},function(I,z){I.exports=function(M,g,p){if(g===void 0&&(g=.1),p===void 0&&(p=.1),M===0)return 0;if(M===1)return 1;var i=p/4;return g<1?g=1:i=p*Math.asin(1/g)/(2*Math.PI),-g*Math.pow(2,10*(M-=1))*Math.sin((M-i)*(2*Math.PI)/p)}},function(I,z){I.exports=function(M,g,p){if(g===void 0&&(g=.1),p===void 0&&(p=.1),M===0)return 0;if(M===1)return 1;var i=p/4;return g<1?g=1:i=p*Math.asin(1/g)/(2*Math.PI),g*Math.pow(2,-10*M)*Math.sin((M-i)*(2*Math.PI)/p)+1}},function(I,z){I.exports=function(M,g,p){if(g===void 0&&(g=.1),p===void 0&&(p=.1),M===0)return 0;if(M===1)return 1;var i=p/4;return g<1?g=1:i=p*Math.asin(1/g)/(2*Math.PI),(M*=2)<1?g*Math.pow(2,10*(M-=1))*Math.sin((M-i)*(2*Math.PI)/p)*-.5:g*Math.pow(2,-10*(M-=1))*Math.sin((M-i)*(2*Math.PI)/p)*.5+1}},function(I,z,M){I.exports={In:M(106),Out:M(107),InOut:M(108)}},function(I,z){I.exports=function(M){return Math.pow(2,10*(M-1))-.001}},function(I,z){I.exports=function(M){return 1-Math.pow(2,-10*M)}},function(I,z){I.exports=function(M){return(M*=2)<1?.5*Math.pow(2,10*(M-1)):.5*(2-Math.pow(2,-10*(M-1)))}},function(I,z,M){I.exports=M(110)},function(I,z){I.exports=function(M){return M}},function(I,z,M){I.exports={In:M(112),Out:M(113),InOut:M(114)}},function(I,z){I.exports=function(M){return M*M}},function(I,z){I.exports=function(M){return M*(2-M)}},function(I,z){I.exports=function(M){return(M*=2)<1?.5*M*M:-.5*(--M*(M-2)-1)}},function(I,z,M){I.exports={In:M(116),Out:M(117),InOut:M(118)}},function(I,z){I.exports=function(M){return M*M*M*M}},function(I,z){I.exports=function(M){return 1- --M*M*M*M}},function(I,z){I.exports=function(M){return(M*=2)<1?.5*M*M*M*M:-.5*((M-=2)*M*M*M-2)}},function(I,z,M){I.exports={In:M(120),Out:M(121),InOut:M(122)}},function(I,z){I.exports=function(M){return M*M*M*M*M}},function(I,z){I.exports=function(M){return--M*M*M*M*M+1}},function(I,z){I.exports=function(M){return(M*=2)<1?.5*M*M*M*M*M:.5*((M-=2)*M*M*M*M+2)}},function(I,z,M){I.exports={In:M(124),Out:M(125),InOut:M(126)}},function(I,z){I.exports=function(M){return M===0?0:M===1?1:1-Math.cos(M*Math.PI/2)}},function(I,z){I.exports=function(M){return M===0?0:M===1?1:Math.sin(M*Math.PI/2)}},function(I,z){I.exports=function(M){return M===0?0:M===1?1:.5*(1-Math.cos(Math.PI*M))}},function(I,z,M){I.exports=M(128)},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1),M<=0?0:M>=1?1:1/g*(1+(g*M|0))}},function(I,z,M){I.exports={Ceil:M(130),Equal:M(32),Floor:M(131),GreaterThan:M(132),LessThan:M(133)}},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1e-4),Math.ceil(M-g)}},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1e-4),Math.floor(M+g)}},function(I,z){I.exports=function(M,g,p){return p===void 0&&(p=1e-4),M>g-p}},function(I,z){I.exports=function(M,g,p){return p===void 0&&(p=1e-4),M<g+p}},function(I,z,M){I.exports={Bezier:M(135),CatmullRom:M(136),CubicBezier:M(137),Linear:M(138),QuadraticBezier:M(139),SmoothStep:M(140),SmootherStep:M(141)}},function(I,z,M){var g=M(33);I.exports=function(p,i){for(var u=0,e=p.length-1,l=0;l<=e;l++)u+=Math.pow(1-i,e-l)*Math.pow(i,l)*p[l]*g(e,l);return u}},function(I,z,M){var g=M(35);I.exports=function(p,i){var u=p.length-1,e=u*i,l=Math.floor(e);return p[0]===p[u]?(i<0&&(l=Math.floor(e=u*(1+i))),g(e-l,p[(l-1+u)%u],p[l],p[(l+1)%u],p[(l+2)%u])):i<0?p[0]-(g(-e,p[0],p[0],p[1],p[1])-p[0]):i>1?p[u]-(g(e-u,p[u],p[u],p[u-1],p[u-1])-p[u]):g(e-l,p[l?l-1:0],p[l],p[u<l+1?u:l+1],p[u<l+2?u:l+2])}},function(I,z){I.exports=function(M,g,p,i,u){return function(e,l){var o=1-e;return o*o*o*l}(M,g)+function(e,l){var o=1-e;return 3*o*o*e*l}(M,p)+function(e,l){return 3*(1-e)*e*e*l}(M,i)+function(e,l){return e*e*e*l}(M,u)}},function(I,z,M){var g=M(36);I.exports=function(p,i){var u=p.length-1,e=u*i,l=Math.floor(e);return i<0?g(p[0],p[1],e):i>1?g(p[u],p[u-1],u-e):g(p[l],p[l+1>u?u:l+1],e-l)}},function(I,z){I.exports=function(M,g,p,i){return function(u,e){var l=1-u;return l*l*e}(M,g)+function(u,e){return 2*(1-u)*u*e}(M,p)+function(u,e){return u*u*e}(M,i)}},function(I,z,M){var g=M(37);I.exports=function(p,i,u){return i+(u-i)*g(p,0,1)}},function(I,z,M){var g=M(38);I.exports=function(p,i,u){return i+(u-i)*g(p,0,1)}},function(I,z,M){I.exports={GetNext:M(143),IsSize:M(144),IsValue:M(145)}},function(I,z){I.exports=function(M){var g=Math.log(M)/.6931471805599453;return 1<<Math.ceil(g)}},function(I,z){I.exports=function(M,g){return M>0&&(M&M-1)==0&&g>0&&(g&g-1)==0}},function(I,z){I.exports=function(M){return M>0&&(M&M-1)==0}},function(I,z,M){I.exports={Ceil:M(147),Floor:M(148),To:M(149)}},function(I,z){I.exports=function(M,g,p,i){return p===void 0&&(p=0),g===0?M:(M-=p,M=g*Math.ceil(M/g),i?(p+M)/g:p+M)}},function(I,z){I.exports=function(M,g,p,i){return p===void 0&&(p=0),g===0?M:(M-=p,M=g*Math.floor(M/g),i?(p+M)/g:p+M)}},function(I,z){I.exports=function(M,g,p,i){return p===void 0&&(p=0),g===0?M:(M-=p,M=g*Math.round(M/g),i?(p+M)/g:p+M)}},function(I,z,M){var g=new(M(0))({initialize:function(p){p===void 0&&(p=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],p&&this.init(p)},rnd:function(){var p=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|p,this.s0=this.s1,this.s1=this.s2,this.s2=p-this.c,this.s2},hash:function(p){var i,u=this.n;p=p.toString();for(var e=0;e<p.length;e++)i=.02519603282416938*(u+=p.charCodeAt(e)),i-=u=i>>>0,u=(i*=u)>>>0,u+=4294967296*(i-=u);return this.n=u,23283064365386963e-26*(u>>>0)},init:function(p){typeof p=="string"?this.state(p):this.sow(p)},sow:function(p){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,p)for(var i=0;i<p.length&&p[i]!=null;i++){var u=p[i];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(p,i){return Math.floor(this.realInRange(0,i-p+1)+p)},between:function(p,i){return Math.floor(this.realInRange(0,i-p+1)+p)},realInRange:function(p,i){return this.frac()*(i-p)+p},normal:function(){return 1-2*this.frac()},uuid:function(){var p="",i="";for(i=p="";p++<36;i+=~p%5|3*p&4?(15^p?8^this.frac()*(20^p?16:4):4).toString(16):"-");return i},pick:function(p){return p[this.integerInRange(0,p.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(p){return p[~~(Math.pow(this.frac(),2)*(p.length-1)+.5)]},timestamp:function(p,i){return this.realInRange(p||9466848e5,i||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(p){return typeof p=="string"&&p.match(/^!rnd/)&&(p=p.split(","),this.c=parseFloat(p[1]),this.s0=parseFloat(p[2]),this.s1=parseFloat(p[3]),this.s2=parseFloat(p[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(p){for(var i=p.length-1;i>0;i--){var u=Math.floor(this.frac()*(i+1)),e=p[u];p[u]=p[i],p[i]=e}return p}});I.exports=g},function(I,z){I.exports=function(M){for(var g=0,p=0;p<M.length;p++)g+=+M[p];return g/M.length}},function(I,z){I.exports=function(M,g){return Math.floor(Math.random()*(g-M+1)+M)}},function(I,z){I.exports=function(M,g,p){g===void 0&&(g=0),p===void 0&&(p=10);var i=Math.pow(p,-g);return Math.ceil(M*i)/i}},function(I,z){I.exports=function(M,g){return Math.abs(M-g)}},function(I,z,M){var g=M(3),p=M(0),i=M(20),u=M(1),e=new i,l=new p({initialize:function o(t,s,n,r){t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=o.DefaultOrder),this._x=t,this._y=s,this._z=n,this._order=r,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,t,s,n){return n===void 0&&(n=this._order),this._x=o,this._y=t,this._z=s,this._order=n,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,t,s){return t===void 0&&(t=this._order),s===void 0&&(s=!1),e.fromQuat(o),this.setFromRotationMatrix(e,t,s)},setFromRotationMatrix:function(o,t,s){t===void 0&&(t=this._order),s===void 0&&(s=!1);var n=o.val,r=n[0],h=n[4],a=n[8],c=n[1],d=n[5],f=n[9],v=n[2],m=n[6],x=n[10],T=0,y=0,E=0,w=.99999;switch(t){case"XYZ":y=Math.asin(g(a,-1,1)),Math.abs(a)<w?(T=Math.atan2(-f,x),E=Math.atan2(-h,r)):T=Math.atan2(m,d);break;case"YXZ":T=Math.asin(-g(f,-1,1)),Math.abs(f)<w?(y=Math.atan2(a,x),E=Math.atan2(c,d)):y=Math.atan2(-v,r);break;case"ZXY":T=Math.asin(g(m,-1,1)),Math.abs(m)<w?(y=Math.atan2(-v,x),E=Math.atan2(-h,d)):E=Math.atan2(c,r);break;case"ZYX":y=Math.asin(-g(v,-1,1)),Math.abs(v)<w?(T=Math.atan2(m,x),E=Math.atan2(c,r)):E=Math.atan2(-h,d);break;case"YZX":E=Math.asin(g(c,-1,1)),Math.abs(c)<w?(T=Math.atan2(-f,d),y=Math.atan2(-v,r)):y=Math.atan2(a,x);break;case"XZY":E=Math.asin(-g(h,-1,1)),Math.abs(h)<w?(T=Math.atan2(m,d),y=Math.atan2(a,r)):T=Math.atan2(-f,x)}return this._x=T,this._y=y,this._z=E,this._order=t,s&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",I.exports=l},function(I,z){I.exports=function(M,g,p){g===void 0&&(g=0),p===void 0&&(p=10);var i=Math.pow(p,-g);return Math.floor(M*i)/i}},function(I,z,M){var g=M(3);I.exports=function(p,i,u){return(u-i)*(p=g(p,0,1))+i}},function(I,z){I.exports=function(M,g){return M/g/1e3}},function(I,z){I.exports=function(M){return M==parseFloat(M)?!(M%2):void 0}},function(I,z){I.exports=function(M){return M===parseFloat(M)?!(M%2):void 0}},function(I,z){I.exports=function(M,g,p){return Math.min(M+g,p)}},function(I,z){I.exports=function(M){var g=M.length;if(g===0)return 0;M.sort(function(i,u){return i-u});var p=Math.floor(g/2);return g%2==0?(M[p]+M[p-1])/2:M[p]}},function(I,z){I.exports=function(M,g,p){return Math.max(M-g,p)}},function(I,z){I.exports=function(M,g,p,i){p===void 0&&(p=g+1);var u=(M-g)/(p-g);return u>1?i!==void 0?(u=(i-M)/(i-p))<0&&(u=0):u=1:u<0&&(u=0),u}},function(I,z){I.exports=function(M,g){g===void 0&&(g=1);var p=2*Math.random()*Math.PI;return M.x=Math.cos(p)*g,M.y=Math.sin(p)*g,M}},function(I,z){I.exports=function(M,g){g===void 0&&(g=1);var p=2*Math.random()*Math.PI,i=2*Math.random()-1,u=Math.sqrt(1-i*i)*g;return M.x=Math.cos(p)*u,M.y=Math.sin(p)*u,M.z=i*g,M}},function(I,z){I.exports=function(M,g){return g===void 0&&(g=1),M.x=(2*Math.random()-1)*g,M.y=(2*Math.random()-1)*g,M.z=(2*Math.random()-1)*g,M.w=(2*Math.random()-1)*g,M}},function(I,z){I.exports=function(M,g){var p=M.x,i=M.y;return M.x=p*Math.cos(g)-i*Math.sin(g),M.y=p*Math.sin(g)+i*Math.cos(g),M}},function(I,z){I.exports=function(M,g,p,i,u){var e=i+Math.atan2(M.y-p,M.x-g);return M.x=g+u*Math.cos(e),M.y=p+u*Math.sin(e),M}},function(I,z){I.exports=function(M,g,p,i,u){return M.x=g+u*Math.cos(i),M.y=p+u*Math.sin(i),M}},function(I,z){I.exports=function(M,g,p){g===void 0&&(g=0),p===void 0&&(p=10);var i=Math.pow(p,-g);return Math.round(M*i)/i}},function(I,z){I.exports=function(M,g,p,i){g===void 0&&(g=1),p===void 0&&(p=1),i===void 0&&(i=1),i*=Math.PI/M;for(var u=[],e=[],l=0;l<M;l++)g+=(p-=g*i)*i,u[l]=p,e[l]=g;return{sin:e,cos:u,length:M}}},function(I,z,M){var g=M(2);I.exports=function(p,i,u,e){e===void 0&&(e=new g);var l=0,o=0;return p>0&&p<=i*u&&(l=p>i-1?p-(o=Math.floor(p/i))*i:p,e.set(l,o)),e}},function(I,z){I.exports=function(M,g,p){return Math.abs(M-g)<=p}},function(I,z,M){var g=new(M(0))({initialize:function(p,i,u,e){this.x=0,this.y=0,this.z=0,this.w=0,typeof p=="object"?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0,this.w=p.w||0):(this.x=p||0,this.y=i||0,this.z=u||0,this.w=e||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(p){return this.x=p.x,this.y=p.y,this.z=p.z||0,this.w=p.w||0,this},equals:function(p){return this.x===p.x&&this.y===p.y&&this.z===p.z&&this.w===p.w},set:function(p,i,u,e){return typeof p=="object"?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0,this.w=p.w||0):(this.x=p||0,this.y=i||0,this.z=u||0,this.w=e||0),this},add:function(p){return this.x+=p.x,this.y+=p.y,this.z+=p.z||0,this.w+=p.w||0,this},subtract:function(p){return this.x-=p.x,this.y-=p.y,this.z-=p.z||0,this.w-=p.w||0,this},scale:function(p){return this.x*=p,this.y*=p,this.z*=p,this.w*=p,this},length:function(){var p=this.x,i=this.y,u=this.z,e=this.w;return Math.sqrt(p*p+i*i+u*u+e*e)},lengthSq:function(){var p=this.x,i=this.y,u=this.z,e=this.w;return p*p+i*i+u*u+e*e},normalize:function(){var p=this.x,i=this.y,u=this.z,e=this.w,l=p*p+i*i+u*u+e*e;return l>0&&(l=1/Math.sqrt(l),this.x=p*l,this.y=i*l,this.z=u*l,this.w=e*l),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w},lerp:function(p,i){i===void 0&&(i=0);var u=this.x,e=this.y,l=this.z,o=this.w;return this.x=u+i*(p.x-u),this.y=e+i*(p.y-e),this.z=l+i*(p.z-l),this.w=o+i*(p.w-o),this},multiply:function(p){return this.x*=p.x,this.y*=p.y,this.z*=p.z||1,this.w*=p.w||1,this},divide:function(p){return this.x/=p.x,this.y/=p.y,this.z/=p.z||1,this.w/=p.w||1,this},distance:function(p){var i=p.x-this.x,u=p.y-this.y,e=p.z-this.z||0,l=p.w-this.w||0;return Math.sqrt(i*i+u*u+e*e+l*l)},distanceSq:function(p){var i=p.x-this.x,u=p.y-this.y,e=p.z-this.z||0,l=p.w-this.w||0;return i*i+u*u+e*e+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(p){var i=this.x,u=this.y,e=this.z,l=this.w,o=p.val;return this.x=o[0]*i+o[4]*u+o[8]*e+o[12]*l,this.y=o[1]*i+o[5]*u+o[9]*e+o[13]*l,this.z=o[2]*i+o[6]*u+o[10]*e+o[14]*l,this.w=o[3]*i+o[7]*u+o[11]*e+o[15]*l,this},transformQuat:function(p){var i=this.x,u=this.y,e=this.z,l=p.x,o=p.y,t=p.z,s=p.w,n=s*i+o*e-t*u,r=s*u+t*i-l*e,h=s*e+l*u-o*i,a=-l*i-o*u-t*e;return this.x=n*s+a*-l+r*-t-h*-o,this.y=r*s+a*-o+h*-l-n*-t,this.z=h*s+a*-t+n*-o-r*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,I.exports=g},function(I,z,M){var g=M(14),p=M(20),i=M(43),u=new p,e=new i,l=new g;I.exports=function(o,t,s){return e.setAxisAngle(t,s),u.fromRotationTranslation(e,l.set(0,0,0)),o.transformMat4(u)}},function(I,z){I.exports="resize"},function(I,z,M){var g=M(179),p=M(0),i=M(44),u=new p({Extends:g,initialize:function(e,l,o){g.call(this,l),this.scene=e,this.systems=e.sys,this.pluginKey=o,e.sys.events.once(i.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});I.exports=u},function(I,z,M){var g=new(M(0))({initialize:function(p){this.pluginManager=p,this.game=p.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});I.exports=g},function(I,z){I.exports="addedtoscene"},function(I,z){I.exports="boot"},function(I,z){I.exports="create"},function(I,z){I.exports="destroy"},function(I,z){I.exports="pause"},function(I,z){I.exports="postupdate"},function(I,z){I.exports="prerender"},function(I,z){I.exports="preupdate"},function(I,z){I.exports="ready"},function(I,z){I.exports="removedfromscene"},function(I,z){I.exports="render"},function(I,z){I.exports="resume"},function(I,z){I.exports="shutdown"},function(I,z){I.exports="sleep"},function(I,z){I.exports="start"},function(I,z){I.exports="transitioncomplete"},function(I,z){I.exports="transitioninit"},function(I,z){I.exports="transitionout"},function(I,z){I.exports="transitionstart"},function(I,z){I.exports="transitionwake"},function(I,z){I.exports="update"},function(I,z){I.exports="wake"},function(I,z){(function(){var M,g,p,i=this&&this.__extends||(M=function(u,e){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(l[t]=o[t])},M(u,e)},function(u,e){function l(){this.constructor=u}M(u,e),u.prototype=e===null?Object.create(e):(l.prototype=e.prototype,new l)});(function(u){var e,l,o,t=function(){function A(S,b,_){if(S==null)throw new Error("name cannot be null.");if(b==null)throw new Error("timelines cannot be null.");this.name=S,this.timelines=b,this.timelineIds=[];for(var P=0;P<b.length;P++)this.timelineIds[b[P].getPropertyId()]=!0;this.duration=_}return A.prototype.hasTimeline=function(S){return this.timelineIds[S]==1},A.prototype.apply=function(S,b,_,P,D,O,F,N){if(S==null)throw new Error("skeleton cannot be null.");P&&this.duration!=0&&(_%=this.duration,b>0&&(b%=this.duration));for(var k=this.timelines,L=0,U=k.length;L<U;L++)k[L].apply(S,b,_,D,O,F,N)},A.binarySearch=function(S,b,_){_===void 0&&(_=1);var P=0,D=S.length/_-2;if(D==0)return _;for(var O=D>>>1;;){if(S[(O+1)*_]<=b?P=O+1:D=O,P==D)return(P+1)*_;O=P+D>>>1}},A.linearSearch=function(S,b,_){for(var P=0,D=S.length-_;P<=D;P+=_)if(S[P]>b)return P;return-1},A}();u.Animation=t,function(A){A[A.setup=0]="setup",A[A.first=1]="first",A[A.replace=2]="replace",A[A.add=3]="add"}(e=u.MixBlend||(u.MixBlend={})),function(A){A[A.mixIn=0]="mixIn",A[A.mixOut=1]="mixOut"}(l=u.MixDirection||(u.MixDirection={})),function(A){A[A.rotate=0]="rotate",A[A.translate=1]="translate",A[A.scale=2]="scale",A[A.shear=3]="shear",A[A.attachment=4]="attachment",A[A.color=5]="color",A[A.deform=6]="deform",A[A.event=7]="event",A[A.drawOrder=8]="drawOrder",A[A.ikConstraint=9]="ikConstraint",A[A.transformConstraint=10]="transformConstraint",A[A.pathConstraintPosition=11]="pathConstraintPosition",A[A.pathConstraintSpacing=12]="pathConstraintSpacing",A[A.pathConstraintMix=13]="pathConstraintMix",A[A.twoColor=14]="twoColor"}(o=u.TimelineType||(u.TimelineType={}));var s=function(){function A(S){if(S<=0)throw new Error("frameCount must be > 0: "+S);this.curves=u.Utils.newFloatArray((S-1)*A.BEZIER_SIZE)}return A.prototype.getFrameCount=function(){return this.curves.length/A.BEZIER_SIZE+1},A.prototype.setLinear=function(S){this.curves[S*A.BEZIER_SIZE]=A.LINEAR},A.prototype.setStepped=function(S){this.curves[S*A.BEZIER_SIZE]=A.STEPPED},A.prototype.getCurveType=function(S){var b=S*A.BEZIER_SIZE;if(b==this.curves.length)return A.LINEAR;var _=this.curves[b];return _==A.LINEAR?A.LINEAR:_==A.STEPPED?A.STEPPED:A.BEZIER},A.prototype.setCurve=function(S,b,_,P,D){var O=.03*(2*-b+P),F=.03*(2*-_+D),N=.006*(3*(b-P)+1),k=.006*(3*(_-D)+1),L=2*O+N,U=2*F+k,Y=.3*b+O+.16666667*N,B=.3*_+F+.16666667*k,W=S*A.BEZIER_SIZE,G=this.curves;G[W++]=A.BEZIER;for(var X=Y,q=B,j=W+A.BEZIER_SIZE-1;W<j;W+=2)G[W]=X,G[W+1]=q,Y+=L,B+=U,L+=N,U+=k,X+=Y,q+=B},A.prototype.getCurvePercent=function(S,b){b=u.MathUtils.clamp(b,0,1);var _=this.curves,P=S*A.BEZIER_SIZE,D=_[P];if(D==A.LINEAR)return b;if(D==A.STEPPED)return 0;for(var O=0,F=++P,N=P+A.BEZIER_SIZE-1;P<N;P+=2)if((O=_[P])>=b){var k=void 0,L=void 0;return P==F?(k=0,L=0):(k=_[P-2],L=_[P-1]),L+(_[P+1]-L)*(b-k)/(O-k)}var U=_[P-1];return U+(1-U)*(b-O)/(1-O)},A.LINEAR=0,A.STEPPED=1,A.BEZIER=2,A.BEZIER_SIZE=19,A}();u.CurveTimeline=s;var n=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b<<1),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.rotate<<24)+this.boneIndex},S.prototype.setFrame=function(b,_,P){b<<=1,this.frames[b]=_,this.frames[b+S.ROTATION]=P},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.bones[this.boneIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return void(L.rotation=L.data.rotation);case e.first:var U=L.data.rotation-L.rotation;L.rotation+=(U-360*(16384-(16384.499999999996-U/360|0)))*O}else if(P>=k[k.length-S.ENTRIES]){var Y=k[k.length+S.PREV_ROTATION];switch(F){case e.setup:L.rotation=L.data.rotation+Y*O;break;case e.first:case e.replace:Y+=L.data.rotation-L.rotation,Y-=360*(16384-(16384.499999999996-Y/360|0));case e.add:L.rotation+=Y*O}}else{var B=t.binarySearch(k,P,S.ENTRIES),W=k[B+S.PREV_ROTATION],G=k[B],X=this.getCurvePercent((B>>1)-1,1-(P-G)/(k[B+S.PREV_TIME]-G)),q=k[B+S.ROTATION]-W;switch(q=W+(q-360*(16384-(16384.499999999996-q/360|0)))*X,F){case e.setup:L.rotation=L.data.rotation+(q-360*(16384-(16384.499999999996-q/360|0)))*O;break;case e.first:case e.replace:q+=L.data.rotation-L.rotation;case e.add:L.rotation+=(q-360*(16384-(16384.499999999996-q/360|0)))*O}}},S.ENTRIES=2,S.PREV_TIME=-2,S.PREV_ROTATION=-1,S.ROTATION=1,S}(s);u.RotateTimeline=n;var r=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.translate<<24)+this.boneIndex},S.prototype.setFrame=function(b,_,P,D){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.X]=P,this.frames[b+S.Y]=D},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.bones[this.boneIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return L.x=L.data.x,void(L.y=L.data.y);case e.first:L.x+=(L.data.x-L.x)*O,L.y+=(L.data.y-L.y)*O}else{var U=0,Y=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_X],Y=k[k.length+S.PREV_Y];else{var B=t.binarySearch(k,P,S.ENTRIES);U=k[B+S.PREV_X],Y=k[B+S.PREV_Y];var W=k[B],G=this.getCurvePercent(B/S.ENTRIES-1,1-(P-W)/(k[B+S.PREV_TIME]-W));U+=(k[B+S.X]-U)*G,Y+=(k[B+S.Y]-Y)*G}switch(F){case e.setup:L.x=L.data.x+U*O,L.y=L.data.y+Y*O;break;case e.first:case e.replace:L.x+=(L.data.x+U-L.x)*O,L.y+=(L.data.y+Y-L.y)*O;break;case e.add:L.x+=U*O,L.y+=Y*O}}},S.ENTRIES=3,S.PREV_TIME=-3,S.PREV_X=-2,S.PREV_Y=-1,S.X=1,S.Y=2,S}(s);u.TranslateTimeline=r;var h=function(A){function S(b){return A.call(this,b)||this}return i(S,A),S.prototype.getPropertyId=function(){return(o.scale<<24)+this.boneIndex},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.bones[this.boneIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return L.scaleX=L.data.scaleX,void(L.scaleY=L.data.scaleY);case e.first:L.scaleX+=(L.data.scaleX-L.scaleX)*O,L.scaleY+=(L.data.scaleY-L.scaleY)*O}else{var U=0,Y=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_X]*L.data.scaleX,Y=k[k.length+S.PREV_Y]*L.data.scaleY;else{var B=t.binarySearch(k,P,S.ENTRIES);U=k[B+S.PREV_X],Y=k[B+S.PREV_Y];var W=k[B],G=this.getCurvePercent(B/S.ENTRIES-1,1-(P-W)/(k[B+S.PREV_TIME]-W));U=(U+(k[B+S.X]-U)*G)*L.data.scaleX,Y=(Y+(k[B+S.Y]-Y)*G)*L.data.scaleY}if(O==1)F==e.add?(L.scaleX+=U-L.data.scaleX,L.scaleY+=Y-L.data.scaleY):(L.scaleX=U,L.scaleY=Y);else{var X=0,q=0;if(N==l.mixOut)switch(F){case e.setup:X=L.data.scaleX,q=L.data.scaleY,L.scaleX=X+(Math.abs(U)*u.MathUtils.signum(X)-X)*O,L.scaleY=q+(Math.abs(Y)*u.MathUtils.signum(q)-q)*O;break;case e.first:case e.replace:X=L.scaleX,q=L.scaleY,L.scaleX=X+(Math.abs(U)*u.MathUtils.signum(X)-X)*O,L.scaleY=q+(Math.abs(Y)*u.MathUtils.signum(q)-q)*O;break;case e.add:X=L.scaleX,q=L.scaleY,L.scaleX=X+(Math.abs(U)*u.MathUtils.signum(X)-L.data.scaleX)*O,L.scaleY=q+(Math.abs(Y)*u.MathUtils.signum(q)-L.data.scaleY)*O}else switch(F){case e.setup:X=Math.abs(L.data.scaleX)*u.MathUtils.signum(U),q=Math.abs(L.data.scaleY)*u.MathUtils.signum(Y),L.scaleX=X+(U-X)*O,L.scaleY=q+(Y-q)*O;break;case e.first:case e.replace:X=Math.abs(L.scaleX)*u.MathUtils.signum(U),q=Math.abs(L.scaleY)*u.MathUtils.signum(Y),L.scaleX=X+(U-X)*O,L.scaleY=q+(Y-q)*O;break;case e.add:X=u.MathUtils.signum(U),q=u.MathUtils.signum(Y),L.scaleX=Math.abs(L.scaleX)*X+(U-Math.abs(L.data.scaleX)*X)*O,L.scaleY=Math.abs(L.scaleY)*q+(Y-Math.abs(L.data.scaleY)*q)*O}}}},S}(r);u.ScaleTimeline=h;var a=function(A){function S(b){return A.call(this,b)||this}return i(S,A),S.prototype.getPropertyId=function(){return(o.shear<<24)+this.boneIndex},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.bones[this.boneIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return L.shearX=L.data.shearX,void(L.shearY=L.data.shearY);case e.first:L.shearX+=(L.data.shearX-L.shearX)*O,L.shearY+=(L.data.shearY-L.shearY)*O}else{var U=0,Y=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_X],Y=k[k.length+S.PREV_Y];else{var B=t.binarySearch(k,P,S.ENTRIES);U=k[B+S.PREV_X],Y=k[B+S.PREV_Y];var W=k[B],G=this.getCurvePercent(B/S.ENTRIES-1,1-(P-W)/(k[B+S.PREV_TIME]-W));U+=(k[B+S.X]-U)*G,Y+=(k[B+S.Y]-Y)*G}switch(F){case e.setup:L.shearX=L.data.shearX+U*O,L.shearY=L.data.shearY+Y*O;break;case e.first:case e.replace:L.shearX+=(L.data.shearX+U-L.shearX)*O,L.shearY+=(L.data.shearY+Y-L.shearY)*O;break;case e.add:L.shearX+=U*O,L.shearY+=Y*O}}},S}(r);u.ShearTimeline=a;var c=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.color<<24)+this.slotIndex},S.prototype.setFrame=function(b,_,P,D,O,F){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.R]=P,this.frames[b+S.G]=D,this.frames[b+S.B]=O,this.frames[b+S.A]=F},S.prototype.apply=function(b,_,P,D,O,F,N){var k=b.slots[this.slotIndex];if(k.bone.active){var L=this.frames;if(P<L[0])switch(F){case e.setup:return void k.color.setFromColor(k.data.color);case e.first:var U=k.color,Y=k.data.color;U.add((Y.r-U.r)*O,(Y.g-U.g)*O,(Y.b-U.b)*O,(Y.a-U.a)*O)}else{var B=0,W=0,G=0,X=0;if(P>=L[L.length-S.ENTRIES]){var q=L.length;B=L[q+S.PREV_R],W=L[q+S.PREV_G],G=L[q+S.PREV_B],X=L[q+S.PREV_A]}else{var j=t.binarySearch(L,P,S.ENTRIES);B=L[j+S.PREV_R],W=L[j+S.PREV_G],G=L[j+S.PREV_B],X=L[j+S.PREV_A];var V=L[j],K=this.getCurvePercent(j/S.ENTRIES-1,1-(P-V)/(L[j+S.PREV_TIME]-V));B+=(L[j+S.R]-B)*K,W+=(L[j+S.G]-W)*K,G+=(L[j+S.B]-G)*K,X+=(L[j+S.A]-X)*K}O==1?k.color.set(B,W,G,X):(U=k.color,F==e.setup&&U.setFromColor(k.data.color),U.add((B-U.r)*O,(W-U.g)*O,(G-U.b)*O,(X-U.a)*O))}}},S.ENTRIES=5,S.PREV_TIME=-5,S.PREV_R=-4,S.PREV_G=-3,S.PREV_B=-2,S.PREV_A=-1,S.R=1,S.G=2,S.B=3,S.A=4,S}(s);u.ColorTimeline=c;var d=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.twoColor<<24)+this.slotIndex},S.prototype.setFrame=function(b,_,P,D,O,F,N,k,L){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.R]=P,this.frames[b+S.G]=D,this.frames[b+S.B]=O,this.frames[b+S.A]=F,this.frames[b+S.R2]=N,this.frames[b+S.G2]=k,this.frames[b+S.B2]=L},S.prototype.apply=function(b,_,P,D,O,F,N){var k=b.slots[this.slotIndex];if(k.bone.active){var L=this.frames;if(P<L[0])switch(F){case e.setup:return k.color.setFromColor(k.data.color),void k.darkColor.setFromColor(k.data.darkColor);case e.first:var U=k.color,Y=k.darkColor,B=k.data.color,W=k.data.darkColor;U.add((B.r-U.r)*O,(B.g-U.g)*O,(B.b-U.b)*O,(B.a-U.a)*O),Y.add((W.r-Y.r)*O,(W.g-Y.g)*O,(W.b-Y.b)*O,0)}else{var G=0,X=0,q=0,j=0,V=0,K=0,H=0;if(P>=L[L.length-S.ENTRIES]){var Z=L.length;G=L[Z+S.PREV_R],X=L[Z+S.PREV_G],q=L[Z+S.PREV_B],j=L[Z+S.PREV_A],V=L[Z+S.PREV_R2],K=L[Z+S.PREV_G2],H=L[Z+S.PREV_B2]}else{var Q=t.binarySearch(L,P,S.ENTRIES);G=L[Q+S.PREV_R],X=L[Q+S.PREV_G],q=L[Q+S.PREV_B],j=L[Q+S.PREV_A],V=L[Q+S.PREV_R2],K=L[Q+S.PREV_G2],H=L[Q+S.PREV_B2];var J=L[Q],et=this.getCurvePercent(Q/S.ENTRIES-1,1-(P-J)/(L[Q+S.PREV_TIME]-J));G+=(L[Q+S.R]-G)*et,X+=(L[Q+S.G]-X)*et,q+=(L[Q+S.B]-q)*et,j+=(L[Q+S.A]-j)*et,V+=(L[Q+S.R2]-V)*et,K+=(L[Q+S.G2]-K)*et,H+=(L[Q+S.B2]-H)*et}O==1?(k.color.set(G,X,q,j),k.darkColor.set(V,K,H,1)):(U=k.color,Y=k.darkColor,F==e.setup&&(U.setFromColor(k.data.color),Y.setFromColor(k.data.darkColor)),U.add((G-U.r)*O,(X-U.g)*O,(q-U.b)*O,(j-U.a)*O),Y.add((V-Y.r)*O,(K-Y.g)*O,(H-Y.b)*O,0))}}},S.ENTRIES=8,S.PREV_TIME=-8,S.PREV_R=-7,S.PREV_G=-6,S.PREV_B=-5,S.PREV_A=-4,S.PREV_R2=-3,S.PREV_G2=-2,S.PREV_B2=-1,S.R=1,S.G=2,S.B=3,S.A=4,S.R2=5,S.G2=6,S.B2=7,S}(s);u.TwoColorTimeline=d;var f=function(){function A(S){this.frames=u.Utils.newFloatArray(S),this.attachmentNames=new Array(S)}return A.prototype.getPropertyId=function(){return(o.attachment<<24)+this.slotIndex},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(S,b,_){this.frames[S]=b,this.attachmentNames[S]=_},A.prototype.apply=function(S,b,_,P,D,O,F){var N=S.slots[this.slotIndex];if(N.bone.active)if(F!=l.mixOut){var k=this.frames;if(_<k[0])O!=e.setup&&O!=e.first||this.setAttachment(S,N,N.data.attachmentName);else{var L;L=_>=k[k.length-1]?k.length-1:t.binarySearch(k,_,1)-1;var U=this.attachmentNames[L];S.slots[this.slotIndex].setAttachment(U==null?null:S.getAttachment(this.slotIndex,U))}}else O==e.setup&&this.setAttachment(S,N,N.data.attachmentName)},A.prototype.setAttachment=function(S,b,_){b.attachment=_==null?null:S.getAttachment(this.slotIndex,_)},A}();u.AttachmentTimeline=f;var v=null,m=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b),_.frameVertices=new Array(b),v==null&&(v=u.Utils.newFloatArray(64)),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.deform<<27)+ +this.attachment.id+this.slotIndex},S.prototype.setFrame=function(b,_,P){this.frames[b]=_,this.frameVertices[b]=P},S.prototype.apply=function(b,_,P,D,O,F,N){var k=b.slots[this.slotIndex];if(k.bone.active){var L=k.getAttachment();if(L instanceof u.VertexAttachment&&L.deformAttachment==this.attachment){var U=k.deform;U.length==0&&(F=e.setup);var Y=this.frameVertices,B=Y[0].length,W=this.frames;if(P<W[0]){var G=L;switch(F){case e.setup:return void(U.length=0);case e.first:if(O==1){U.length=0;break}var X=u.Utils.setArraySize(U,B);if(G.bones==null)for(var q=G.vertices,j=0;j<B;j++)X[j]+=(q[j]-X[j])*O;else for(O=1-O,j=0;j<B;j++)X[j]*=O}}else{var V=u.Utils.setArraySize(U,B);if(P>=W[W.length-1]){var K=Y[W.length-1];if(O==1)if(F==e.add)if((G=L).bones==null){q=G.vertices;for(var H=0;H<B;H++)V[H]+=K[H]-q[H]}else for(var Z=0;Z<B;Z++)V[Z]+=K[Z];else u.Utils.arrayCopy(K,0,V,0,B);else switch(F){case e.setup:var Q=L;if(Q.bones==null){q=Q.vertices;for(var J=0;J<B;J++){var et=q[J];V[J]=et+(K[J]-et)*O}}else for(var $=0;$<B;$++)V[$]=K[$]*O;break;case e.first:case e.replace:for(var tt=0;tt<B;tt++)V[tt]+=(K[tt]-V[tt])*O;break;case e.add:if((G=L).bones==null){q=G.vertices;for(var it=0;it<B;it++)V[it]+=(K[it]-q[it])*O}else for(var nt=0;nt<B;nt++)V[nt]+=K[nt]*O}}else{var rt=t.binarySearch(W,P),st=Y[rt-1],at=Y[rt],ct=W[rt],ht=this.getCurvePercent(rt-1,1-(P-ct)/(W[rt-1]-ct));if(O==1)if(F==e.add)if((G=L).bones==null){q=G.vertices;for(var ut=0;ut<B;ut++){var ot=st[ut];V[ut]+=ot+(at[ut]-ot)*ht-q[ut]}}else for(var ft=0;ft<B;ft++)ot=st[ft],V[ft]+=ot+(at[ft]-ot)*ht;else for(var lt=0;lt<B;lt++)ot=st[lt],V[lt]=ot+(at[lt]-ot)*ht;else switch(F){case e.setup:var gt=L;if(gt.bones==null){q=gt.vertices;for(var pt=0;pt<B;pt++)ot=st[pt],et=q[pt],V[pt]=et+(ot+(at[pt]-ot)*ht-et)*O}else for(var vt=0;vt<B;vt++)ot=st[vt],V[vt]=(ot+(at[vt]-ot)*ht)*O;break;case e.first:case e.replace:for(var dt=0;dt<B;dt++)ot=st[dt],V[dt]+=(ot+(at[dt]-ot)*ht-V[dt])*O;break;case e.add:if((G=L).bones==null){q=G.vertices;for(var mt=0;mt<B;mt++)ot=st[mt],V[mt]+=(ot+(at[mt]-ot)*ht-q[mt])*O}else for(var xt=0;xt<B;xt++)ot=st[xt],V[xt]+=(ot+(at[xt]-ot)*ht)*O}}}}}},S}(s);u.DeformTimeline=m;var x=function(){function A(S){this.frames=u.Utils.newFloatArray(S),this.events=new Array(S)}return A.prototype.getPropertyId=function(){return o.event<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(S,b){this.frames[S]=b.time,this.events[S]=b},A.prototype.apply=function(S,b,_,P,D,O,F){if(P!=null){var N=this.frames,k=this.frames.length;if(b>_)this.apply(S,b,Number.MAX_VALUE,P,D,O,F),b=-1;else if(b>=N[k-1])return;if(!(_<N[0])){var L=0;if(b<N[0])L=0;else for(var U=N[L=t.binarySearch(N,b)];L>0&&N[L-1]==U;)L--;for(;L<k&&_>=N[L];L++)P.push(this.events[L])}}},A}();u.EventTimeline=x;var T=function(){function A(S){this.frames=u.Utils.newFloatArray(S),this.drawOrders=new Array(S)}return A.prototype.getPropertyId=function(){return o.drawOrder<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(S,b,_){this.frames[S]=b,this.drawOrders[S]=_},A.prototype.apply=function(S,b,_,P,D,O,F){var N=S.drawOrder,k=S.slots;if(F!=l.mixOut){var L=this.frames;if(_<L[0])O!=e.setup&&O!=e.first||u.Utils.arrayCopy(S.slots,0,S.drawOrder,0,S.slots.length);else{var U;U=_>=L[L.length-1]?L.length-1:t.binarySearch(L,_)-1;var Y=this.drawOrders[U];if(Y==null)u.Utils.arrayCopy(k,0,N,0,k.length);else for(var B=0,W=Y.length;B<W;B++)N[B]=k[Y[B]]}}else O==e.setup&&u.Utils.arrayCopy(S.slots,0,S.drawOrder,0,S.slots.length)},A}();u.DrawOrderTimeline=T;var y=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.ikConstraint<<24)+this.ikConstraintIndex},S.prototype.setFrame=function(b,_,P,D,O,F,N){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.MIX]=P,this.frames[b+S.SOFTNESS]=D,this.frames[b+S.BEND_DIRECTION]=O,this.frames[b+S.COMPRESS]=F?1:0,this.frames[b+S.STRETCH]=N?1:0},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.ikConstraints[this.ikConstraintIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return L.mix=L.data.mix,L.softness=L.data.softness,L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,void(L.stretch=L.data.stretch);case e.first:L.mix+=(L.data.mix-L.mix)*O,L.softness+=(L.data.softness-L.softness)*O,L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,L.stretch=L.data.stretch}else if(P>=k[k.length-S.ENTRIES])F==e.setup?(L.mix=L.data.mix+(k[k.length+S.PREV_MIX]-L.data.mix)*O,L.softness=L.data.softness+(k[k.length+S.PREV_SOFTNESS]-L.data.softness)*O,N==l.mixOut?(L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,L.stretch=L.data.stretch):(L.bendDirection=k[k.length+S.PREV_BEND_DIRECTION],L.compress=k[k.length+S.PREV_COMPRESS]!=0,L.stretch=k[k.length+S.PREV_STRETCH]!=0)):(L.mix+=(k[k.length+S.PREV_MIX]-L.mix)*O,L.softness+=(k[k.length+S.PREV_SOFTNESS]-L.softness)*O,N==l.mixIn&&(L.bendDirection=k[k.length+S.PREV_BEND_DIRECTION],L.compress=k[k.length+S.PREV_COMPRESS]!=0,L.stretch=k[k.length+S.PREV_STRETCH]!=0));else{var U=t.binarySearch(k,P,S.ENTRIES),Y=k[U+S.PREV_MIX],B=k[U+S.PREV_SOFTNESS],W=k[U],G=this.getCurvePercent(U/S.ENTRIES-1,1-(P-W)/(k[U+S.PREV_TIME]-W));F==e.setup?(L.mix=L.data.mix+(Y+(k[U+S.MIX]-Y)*G-L.data.mix)*O,L.softness=L.data.softness+(B+(k[U+S.SOFTNESS]-B)*G-L.data.softness)*O,N==l.mixOut?(L.bendDirection=L.data.bendDirection,L.compress=L.data.compress,L.stretch=L.data.stretch):(L.bendDirection=k[U+S.PREV_BEND_DIRECTION],L.compress=k[U+S.PREV_COMPRESS]!=0,L.stretch=k[U+S.PREV_STRETCH]!=0)):(L.mix+=(Y+(k[U+S.MIX]-Y)*G-L.mix)*O,L.softness+=(B+(k[U+S.SOFTNESS]-B)*G-L.softness)*O,N==l.mixIn&&(L.bendDirection=k[U+S.PREV_BEND_DIRECTION],L.compress=k[U+S.PREV_COMPRESS]!=0,L.stretch=k[U+S.PREV_STRETCH]!=0))}},S.ENTRIES=6,S.PREV_TIME=-6,S.PREV_MIX=-5,S.PREV_SOFTNESS=-4,S.PREV_BEND_DIRECTION=-3,S.PREV_COMPRESS=-2,S.PREV_STRETCH=-1,S.MIX=1,S.SOFTNESS=2,S.BEND_DIRECTION=3,S.COMPRESS=4,S.STRETCH=5,S}(s);u.IkConstraintTimeline=y;var E=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.transformConstraint<<24)+this.transformConstraintIndex},S.prototype.setFrame=function(b,_,P,D,O,F){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.ROTATE]=P,this.frames[b+S.TRANSLATE]=D,this.frames[b+S.SCALE]=O,this.frames[b+S.SHEAR]=F},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.transformConstraints[this.transformConstraintIndex];if(L.active)if(P<k[0]){var U=L.data;switch(F){case e.setup:return L.rotateMix=U.rotateMix,L.translateMix=U.translateMix,L.scaleMix=U.scaleMix,void(L.shearMix=U.shearMix);case e.first:L.rotateMix+=(U.rotateMix-L.rotateMix)*O,L.translateMix+=(U.translateMix-L.translateMix)*O,L.scaleMix+=(U.scaleMix-L.scaleMix)*O,L.shearMix+=(U.shearMix-L.shearMix)*O}}else{var Y=0,B=0,W=0,G=0;if(P>=k[k.length-S.ENTRIES]){var X=k.length;Y=k[X+S.PREV_ROTATE],B=k[X+S.PREV_TRANSLATE],W=k[X+S.PREV_SCALE],G=k[X+S.PREV_SHEAR]}else{var q=t.binarySearch(k,P,S.ENTRIES);Y=k[q+S.PREV_ROTATE],B=k[q+S.PREV_TRANSLATE],W=k[q+S.PREV_SCALE],G=k[q+S.PREV_SHEAR];var j=k[q],V=this.getCurvePercent(q/S.ENTRIES-1,1-(P-j)/(k[q+S.PREV_TIME]-j));Y+=(k[q+S.ROTATE]-Y)*V,B+=(k[q+S.TRANSLATE]-B)*V,W+=(k[q+S.SCALE]-W)*V,G+=(k[q+S.SHEAR]-G)*V}F==e.setup?(U=L.data,L.rotateMix=U.rotateMix+(Y-U.rotateMix)*O,L.translateMix=U.translateMix+(B-U.translateMix)*O,L.scaleMix=U.scaleMix+(W-U.scaleMix)*O,L.shearMix=U.shearMix+(G-U.shearMix)*O):(L.rotateMix+=(Y-L.rotateMix)*O,L.translateMix+=(B-L.translateMix)*O,L.scaleMix+=(W-L.scaleMix)*O,L.shearMix+=(G-L.shearMix)*O)}},S.ENTRIES=5,S.PREV_TIME=-5,S.PREV_ROTATE=-4,S.PREV_TRANSLATE=-3,S.PREV_SCALE=-2,S.PREV_SHEAR=-1,S.ROTATE=1,S.TRANSLATE=2,S.SCALE=3,S.SHEAR=4,S}(s);u.TransformConstraintTimeline=E;var w=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.pathConstraintPosition<<24)+this.pathConstraintIndex},S.prototype.setFrame=function(b,_,P){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.VALUE]=P},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.pathConstraints[this.pathConstraintIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return void(L.position=L.data.position);case e.first:L.position+=(L.data.position-L.position)*O}else{var U=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_VALUE];else{var Y=t.binarySearch(k,P,S.ENTRIES);U=k[Y+S.PREV_VALUE];var B=k[Y],W=this.getCurvePercent(Y/S.ENTRIES-1,1-(P-B)/(k[Y+S.PREV_TIME]-B));U+=(k[Y+S.VALUE]-U)*W}F==e.setup?L.position=L.data.position+(U-L.data.position)*O:L.position+=(U-L.position)*O}},S.ENTRIES=2,S.PREV_TIME=-2,S.PREV_VALUE=-1,S.VALUE=1,S}(s);u.PathConstraintPositionTimeline=w;var R=function(A){function S(b){return A.call(this,b)||this}return i(S,A),S.prototype.getPropertyId=function(){return(o.pathConstraintSpacing<<24)+this.pathConstraintIndex},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.pathConstraints[this.pathConstraintIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return void(L.spacing=L.data.spacing);case e.first:L.spacing+=(L.data.spacing-L.spacing)*O}else{var U=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_VALUE];else{var Y=t.binarySearch(k,P,S.ENTRIES);U=k[Y+S.PREV_VALUE];var B=k[Y],W=this.getCurvePercent(Y/S.ENTRIES-1,1-(P-B)/(k[Y+S.PREV_TIME]-B));U+=(k[Y+S.VALUE]-U)*W}F==e.setup?L.spacing=L.data.spacing+(U-L.data.spacing)*O:L.spacing+=(U-L.spacing)*O}},S}(w);u.PathConstraintSpacingTimeline=R;var C=function(A){function S(b){var _=A.call(this,b)||this;return _.frames=u.Utils.newFloatArray(b*S.ENTRIES),_}return i(S,A),S.prototype.getPropertyId=function(){return(o.pathConstraintMix<<24)+this.pathConstraintIndex},S.prototype.setFrame=function(b,_,P,D){b*=S.ENTRIES,this.frames[b]=_,this.frames[b+S.ROTATE]=P,this.frames[b+S.TRANSLATE]=D},S.prototype.apply=function(b,_,P,D,O,F,N){var k=this.frames,L=b.pathConstraints[this.pathConstraintIndex];if(L.active)if(P<k[0])switch(F){case e.setup:return L.rotateMix=L.data.rotateMix,void(L.translateMix=L.data.translateMix);case e.first:L.rotateMix+=(L.data.rotateMix-L.rotateMix)*O,L.translateMix+=(L.data.translateMix-L.translateMix)*O}else{var U=0,Y=0;if(P>=k[k.length-S.ENTRIES])U=k[k.length+S.PREV_ROTATE],Y=k[k.length+S.PREV_TRANSLATE];else{var B=t.binarySearch(k,P,S.ENTRIES);U=k[B+S.PREV_ROTATE],Y=k[B+S.PREV_TRANSLATE];var W=k[B],G=this.getCurvePercent(B/S.ENTRIES-1,1-(P-W)/(k[B+S.PREV_TIME]-W));U+=(k[B+S.ROTATE]-U)*G,Y+=(k[B+S.TRANSLATE]-Y)*G}F==e.setup?(L.rotateMix=L.data.rotateMix+(U-L.data.rotateMix)*O,L.translateMix=L.data.translateMix+(Y-L.data.translateMix)*O):(L.rotateMix+=(U-L.rotateMix)*O,L.translateMix+=(Y-L.translateMix)*O)}},S.ENTRIES=3,S.PREV_TIME=-3,S.PREV_ROTATE=-2,S.PREV_TRANSLATE=-1,S.ROTATE=1,S.TRANSLATE=2,S}(s);u.PathConstraintMixTimeline=C})(p||(p={})),function(u){var e=function(){function n(r){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new t(this),this.propertyIDs=new u.IntSet,this.animationsChanged=!1,this.trackEntryPool=new u.Pool(function(){return new l}),this.data=r}return n.prototype.update=function(r){r*=this.timeScale;for(var h=this.tracks,a=0,c=h.length;a<c;a++){var d=h[a];if(d!=null){d.animationLast=d.nextAnimationLast,d.trackLast=d.nextTrackLast;var f=r*d.timeScale;if(d.delay>0){if(d.delay-=f,d.delay>0)continue;f=-d.delay,d.delay=0}var v=d.next;if(v!=null){var m=d.trackLast-v.delay;if(m>=0){for(v.delay=0,v.trackTime+=d.timeScale==0?0:(m/d.timeScale+r)*v.timeScale,d.trackTime+=f,this.setCurrent(a,v,!0);v.mixingFrom!=null;)v.mixTime+=r,v=v.mixingFrom;continue}}else if(d.trackLast>=d.trackEnd&&d.mixingFrom==null){h[a]=null,this.queue.end(d),this.disposeNext(d);continue}if(d.mixingFrom!=null&&this.updateMixingFrom(d,r)){var x=d.mixingFrom;for(d.mixingFrom=null,x!=null&&(x.mixingTo=null);x!=null;)this.queue.end(x),x=x.mixingFrom}d.trackTime+=f}}this.queue.drain()},n.prototype.updateMixingFrom=function(r,h){var a=r.mixingFrom;if(a==null)return!0;var c=this.updateMixingFrom(a,h);return a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,r.mixTime>0&&r.mixTime>=r.mixDuration?(a.totalAlpha!=0&&r.mixDuration!=0||(r.mixingFrom=a.mixingFrom,a.mixingFrom!=null&&(a.mixingFrom.mixingTo=r),r.interruptAlpha=a.interruptAlpha,this.queue.end(a)),c):(a.trackTime+=h*a.timeScale,r.mixTime+=h,!1)},n.prototype.apply=function(r){if(r==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var h=this.events,a=this.tracks,c=!1,d=0,f=a.length;d<f;d++){var v=a[d];if(!(v==null||v.delay>0)){c=!0;var m=d==0?u.MixBlend.first:v.mixBlend,x=v.alpha;v.mixingFrom!=null?x*=this.applyMixingFrom(v,r,m):v.trackTime>=v.trackEnd&&v.next==null&&(x=0);var T=v.animationLast,y=v.getAnimationTime(),E=v.animation.timelines.length,w=v.animation.timelines;if(d==0&&x==1||m==u.MixBlend.add)for(var R=0;R<E;R++){u.Utils.webkit602BugfixHelper(x,m);var C=w[R];C instanceof u.AttachmentTimeline?this.applyAttachmentTimeline(C,r,y,m,!0):C.apply(r,T,y,h,x,m,u.MixDirection.mixIn)}else{var A=v.timelineMode,S=v.timelinesRotation.length==0;S&&u.Utils.setArraySize(v.timelinesRotation,E<<1,null);var b=v.timelinesRotation;for(R=0;R<E;R++){var _=w[R],P=A[R]==n.SUBSEQUENT?m:u.MixBlend.setup;_ instanceof u.RotateTimeline?this.applyRotateTimeline(_,r,y,x,P,b,R<<1,S):_ instanceof u.AttachmentTimeline?this.applyAttachmentTimeline(_,r,y,m,!0):(u.Utils.webkit602BugfixHelper(x,m),_.apply(r,T,y,h,x,P,u.MixDirection.mixIn))}}this.queueEvents(v,y),h.length=0,v.nextAnimationLast=y,v.nextTrackLast=v.trackTime}}for(var D=this.unkeyedState+n.SETUP,O=r.slots,F=0,N=r.slots.length;F<N;F++){var k=O[F];if(k.attachmentState==D){var L=k.data.attachmentName;k.attachment=L==null?null:r.getAttachment(k.data.index,L)}}return this.unkeyedState+=2,this.queue.drain(),c},n.prototype.applyMixingFrom=function(r,h,a){var c=r.mixingFrom;c.mixingFrom!=null&&this.applyMixingFrom(c,h,a);var d=0;r.mixDuration==0?(d=1,a==u.MixBlend.first&&(a=u.MixBlend.setup)):((d=r.mixTime/r.mixDuration)>1&&(d=1),a!=u.MixBlend.first&&(a=c.mixBlend));var f=d<c.eventThreshold?this.events:null,v=d<c.attachmentThreshold,m=d<c.drawOrderThreshold,x=c.animationLast,T=c.getAnimationTime(),y=c.animation.timelines.length,E=c.animation.timelines,w=c.alpha*r.interruptAlpha,R=w*(1-d);if(a==u.MixBlend.add)for(var C=0;C<y;C++)E[C].apply(h,x,T,f,R,a,u.MixDirection.mixOut);else{var A=c.timelineMode,S=c.timelineHoldMix,b=c.timelinesRotation.length==0;b&&u.Utils.setArraySize(c.timelinesRotation,y<<1,null);var _=c.timelinesRotation;for(c.totalAlpha=0,C=0;C<y;C++){var P=E[C],D=u.MixDirection.mixOut,O=void 0,F=0;switch(A[C]){case n.SUBSEQUENT:if(!m&&P instanceof u.DrawOrderTimeline)continue;O=a,F=R;break;case n.FIRST:O=u.MixBlend.setup,F=R;break;case n.HOLD_SUBSEQUENT:O=a,F=w;break;case n.HOLD_FIRST:O=u.MixBlend.setup,F=w;break;default:O=u.MixBlend.setup;var N=S[C];F=w*Math.max(0,1-N.mixTime/N.mixDuration)}c.totalAlpha+=F,P instanceof u.RotateTimeline?this.applyRotateTimeline(P,h,T,F,O,_,C<<1,b):P instanceof u.AttachmentTimeline?this.applyAttachmentTimeline(P,h,T,O,v):(u.Utils.webkit602BugfixHelper(F,a),m&&P instanceof u.DrawOrderTimeline&&O==u.MixBlend.setup&&(D=u.MixDirection.mixIn),P.apply(h,x,T,f,F,O,D))}}return r.mixDuration>0&&this.queueEvents(c,T),this.events.length=0,c.nextAnimationLast=T,c.nextTrackLast=c.trackTime,d},n.prototype.applyAttachmentTimeline=function(r,h,a,c,d){var f=h.slots[r.slotIndex];if(f.bone.active){var v,m=r.frames;a<m[0]?c!=u.MixBlend.setup&&c!=u.MixBlend.first||this.setAttachment(h,f,f.data.attachmentName,d):(v=a>=m[m.length-1]?m.length-1:u.Animation.binarySearch(m,a)-1,this.setAttachment(h,f,r.attachmentNames[v],d)),f.attachmentState<=this.unkeyedState&&(f.attachmentState=this.unkeyedState+n.SETUP)}},n.prototype.setAttachment=function(r,h,a,c){h.attachment=a==null?null:r.getAttachment(h.data.index,a),c&&(h.attachmentState=this.unkeyedState+n.CURRENT)},n.prototype.applyRotateTimeline=function(r,h,a,c,d,f,v,m){if(m&&(f[v]=0),c!=1){var x=r,T=x.frames,y=h.bones[x.boneIndex];if(y.active){var E=0,w=0;if(a<T[0])switch(d){case u.MixBlend.setup:y.rotation=y.data.rotation;default:return;case u.MixBlend.first:E=y.rotation,w=y.data.rotation}else if(E=d==u.MixBlend.setup?y.data.rotation:y.rotation,a>=T[T.length-u.RotateTimeline.ENTRIES])w=y.data.rotation+T[T.length+u.RotateTimeline.PREV_ROTATION];else{var R=u.Animation.binarySearch(T,a,u.RotateTimeline.ENTRIES),C=T[R+u.RotateTimeline.PREV_ROTATION],A=T[R],S=x.getCurvePercent((R>>1)-1,1-(a-A)/(T[R+u.RotateTimeline.PREV_TIME]-A));w=T[R+u.RotateTimeline.ROTATION]-C,w=C+(w-=360*(16384-(16384.499999999996-w/360|0)))*S+y.data.rotation,w-=360*(16384-(16384.499999999996-w/360|0))}var b=0,_=w-E;if((_-=360*(16384-(16384.499999999996-_/360|0)))==0)b=f[v];else{var P=0,D=0;m?(P=0,D=_):(P=f[v],D=f[v+1]);var O=_>0,F=P>=0;u.MathUtils.signum(D)!=u.MathUtils.signum(_)&&Math.abs(D)<=90&&(Math.abs(P)>180&&(P+=360*u.MathUtils.signum(P)),F=O),b=_+P-P%360,F!=O&&(b+=360*u.MathUtils.signum(P)),f[v]=b}f[v+1]=_,E+=b*c,y.rotation=E-360*(16384-(16384.499999999996-E/360|0))}}else r.apply(h,0,a,null,1,d,u.MixDirection.mixIn)},n.prototype.queueEvents=function(r,h){for(var a=r.animationStart,c=r.animationEnd,d=c-a,f=r.trackLast%d,v=this.events,m=0,x=v.length;m<x;m++){var T=v[m];if(T.time<f)break;T.time>c||this.queue.event(r,T)}for((r.loop?d==0||f>r.trackTime%d:h>=c&&r.animationLast<c)&&this.queue.complete(r);m<x;m++)v[m].time<a||this.queue.event(r,v[m])},n.prototype.clearTracks=function(){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var h=0,a=this.tracks.length;h<a;h++)this.clearTrack(h);this.tracks.length=0,this.queue.drainDisabled=r,this.queue.drain()},n.prototype.clearTrack=function(r){if(!(r>=this.tracks.length)){var h=this.tracks[r];if(h!=null){this.queue.end(h),this.disposeNext(h);for(var a=h;;){var c=a.mixingFrom;if(c==null)break;this.queue.end(c),a.mixingFrom=null,a.mixingTo=null,a=c}this.tracks[h.trackIndex]=null,this.queue.drain()}}},n.prototype.setCurrent=function(r,h,a){var c=this.expandToIndex(r);this.tracks[r]=h,c!=null&&(a&&this.queue.interrupt(c),h.mixingFrom=c,c.mixingTo=h,h.mixTime=0,c.mixingFrom!=null&&c.mixDuration>0&&(h.interruptAlpha*=Math.min(1,c.mixTime/c.mixDuration)),c.timelinesRotation.length=0),this.queue.start(h)},n.prototype.setAnimation=function(r,h,a){var c=this.data.skeletonData.findAnimation(h);if(c==null)throw new Error("Animation not found: "+h);return this.setAnimationWith(r,c,a)},n.prototype.setAnimationWith=function(r,h,a){if(h==null)throw new Error("animation cannot be null.");var c=!0,d=this.expandToIndex(r);d!=null&&(d.nextTrackLast==-1?(this.tracks[r]=d.mixingFrom,this.queue.interrupt(d),this.queue.end(d),this.disposeNext(d),d=d.mixingFrom,c=!1):this.disposeNext(d));var f=this.trackEntry(r,h,a,d);return this.setCurrent(r,f,c),this.queue.drain(),f},n.prototype.addAnimation=function(r,h,a,c){var d=this.data.skeletonData.findAnimation(h);if(d==null)throw new Error("Animation not found: "+h);return this.addAnimationWith(r,d,a,c)},n.prototype.addAnimationWith=function(r,h,a,c){if(h==null)throw new Error("animation cannot be null.");var d=this.expandToIndex(r);if(d!=null)for(;d.next!=null;)d=d.next;var f=this.trackEntry(r,h,a,d);if(d==null)this.setCurrent(r,f,!0),this.queue.drain();else if(d.next=f,c<=0){var v=d.animationEnd-d.animationStart;v!=0?(d.loop?c+=v*(1+(d.trackTime/v|0)):c+=Math.max(v,d.trackTime),c-=this.data.getMix(d.animation,h)):c=d.trackTime}return f.delay=c,f},n.prototype.setEmptyAnimation=function(r,h){var a=this.setAnimationWith(r,n.emptyAnimation,!1);return a.mixDuration=h,a.trackEnd=h,a},n.prototype.addEmptyAnimation=function(r,h,a){a<=0&&(a-=h);var c=this.addAnimationWith(r,n.emptyAnimation,!1,a);return c.mixDuration=h,c.trackEnd=h,c},n.prototype.setEmptyAnimations=function(r){var h=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,c=this.tracks.length;a<c;a++){var d=this.tracks[a];d!=null&&this.setEmptyAnimation(d.trackIndex,r)}this.queue.drainDisabled=h,this.queue.drain()},n.prototype.expandToIndex=function(r){return r<this.tracks.length?this.tracks[r]:(u.Utils.ensureArrayCapacity(this.tracks,r+1,null),this.tracks.length=r+1,null)},n.prototype.trackEntry=function(r,h,a,c){var d=this.trackEntryPool.obtain();return d.trackIndex=r,d.animation=h,d.loop=a,d.holdPrevious=!1,d.eventThreshold=0,d.attachmentThreshold=0,d.drawOrderThreshold=0,d.animationStart=0,d.animationEnd=h.duration,d.animationLast=-1,d.nextAnimationLast=-1,d.delay=0,d.trackTime=0,d.trackLast=-1,d.nextTrackLast=-1,d.trackEnd=Number.MAX_VALUE,d.timeScale=1,d.alpha=1,d.interruptAlpha=1,d.mixTime=0,d.mixDuration=c==null?0:this.data.getMix(c.animation,h),d.mixBlend=u.MixBlend.replace,d},n.prototype.disposeNext=function(r){for(var h=r.next;h!=null;)this.queue.dispose(h),h=h.next;r.next=null},n.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var r=0,h=this.tracks.length;r<h;r++){var a=this.tracks[r];if(a!=null){for(;a.mixingFrom!=null;)a=a.mixingFrom;do a.mixingFrom!=null&&a.mixBlend==u.MixBlend.add||this.computeHold(a),a=a.mixingTo;while(a!=null)}}},n.prototype.computeHold=function(r){var h=r.mixingTo,a=r.animation.timelines,c=r.animation.timelines.length,d=u.Utils.setArraySize(r.timelineMode,c);r.timelineHoldMix.length=0;var f=u.Utils.setArraySize(r.timelineHoldMix,c),v=this.propertyIDs;if(h!=null&&h.holdPrevious)for(var m=0;m<c;m++)d[m]=v.add(a[m].getPropertyId())?n.HOLD_FIRST:n.HOLD_SUBSEQUENT;else t:for(m=0;m<c;m++){var x=a[m],T=x.getPropertyId();if(v.add(T))if(h==null||x instanceof u.AttachmentTimeline||x instanceof u.DrawOrderTimeline||x instanceof u.EventTimeline||!h.animation.hasTimeline(T))d[m]=n.FIRST;else{for(var y=h.mixingTo;y!=null;y=y.mixingTo)if(!y.animation.hasTimeline(T)){if(r.mixDuration>0){d[m]=n.HOLD_MIX,f[m]=y;continue t}break}d[m]=n.HOLD_FIRST}else d[m]=n.SUBSEQUENT}},n.prototype.getCurrent=function(r){return r>=this.tracks.length?null:this.tracks[r]},n.prototype.addListener=function(r){if(r==null)throw new Error("listener cannot be null.");this.listeners.push(r)},n.prototype.removeListener=function(r){var h=this.listeners.indexOf(r);h>=0&&this.listeners.splice(h,1)},n.prototype.clearListeners=function(){this.listeners.length=0},n.prototype.clearListenerNotifications=function(){this.queue.clear()},n.emptyAnimation=new u.Animation("<empty>",[],0),n.SUBSEQUENT=0,n.FIRST=1,n.HOLD_SUBSEQUENT=2,n.HOLD_FIRST=3,n.HOLD_MIX=4,n.SETUP=1,n.CURRENT=2,n}();u.AnimationState=e;var l=function(){function n(){this.mixBlend=u.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return n.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},n.prototype.getAnimationTime=function(){if(this.loop){var r=this.animationEnd-this.animationStart;return r==0?this.animationStart:this.trackTime%r+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},n.prototype.setAnimationLast=function(r){this.animationLast=r,this.nextAnimationLast=r},n.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},n.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},n}();u.TrackEntry=l;var o,t=function(){function n(r){this.objects=[],this.drainDisabled=!1,this.animState=r}return n.prototype.start=function(r){this.objects.push(o.start),this.objects.push(r),this.animState.animationsChanged=!0},n.prototype.interrupt=function(r){this.objects.push(o.interrupt),this.objects.push(r)},n.prototype.end=function(r){this.objects.push(o.end),this.objects.push(r),this.animState.animationsChanged=!0},n.prototype.dispose=function(r){this.objects.push(o.dispose),this.objects.push(r)},n.prototype.complete=function(r){this.objects.push(o.complete),this.objects.push(r)},n.prototype.event=function(r,h){this.objects.push(o.event),this.objects.push(r),this.objects.push(h)},n.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var r=this.objects,h=this.animState.listeners,a=0;a<r.length;a+=2){var c=r[a],d=r[a+1];switch(c){case o.start:d.listener!=null&&d.listener.start&&d.listener.start(d);for(var f=0;f<h.length;f++)h[f].start&&h[f].start(d);break;case o.interrupt:for(d.listener!=null&&d.listener.interrupt&&d.listener.interrupt(d),f=0;f<h.length;f++)h[f].interrupt&&h[f].interrupt(d);break;case o.end:for(d.listener!=null&&d.listener.end&&d.listener.end(d),f=0;f<h.length;f++)h[f].end&&h[f].end(d);case o.dispose:for(d.listener!=null&&d.listener.dispose&&d.listener.dispose(d),f=0;f<h.length;f++)h[f].dispose&&h[f].dispose(d);this.animState.trackEntryPool.free(d);break;case o.complete:for(d.listener!=null&&d.listener.complete&&d.listener.complete(d),f=0;f<h.length;f++)h[f].complete&&h[f].complete(d);break;case o.event:var v=r[2+a++];for(d.listener!=null&&d.listener.event&&d.listener.event(d,v),f=0;f<h.length;f++)h[f].event&&h[f].event(d,v)}}this.clear(),this.drainDisabled=!1}},n.prototype.clear=function(){this.objects.length=0},n}();u.EventQueue=t,function(n){n[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event"}(o=u.EventType||(u.EventType={}));var s=function(){function n(){}return n.prototype.start=function(r){},n.prototype.interrupt=function(r){},n.prototype.end=function(r){},n.prototype.dispose=function(r){},n.prototype.complete=function(r){},n.prototype.event=function(r,h){},n}();u.AnimationStateAdapter=s}(p||(p={})),function(u){var e=function(){function l(o){if(this.animationToMixTime={},this.defaultMix=0,o==null)throw new Error("skeletonData cannot be null.");this.skeletonData=o}return l.prototype.setMix=function(o,t,s){var n=this.skeletonData.findAnimation(o);if(n==null)throw new Error("Animation not found: "+o);var r=this.skeletonData.findAnimation(t);if(r==null)throw new Error("Animation not found: "+t);this.setMixWith(n,r,s)},l.prototype.setMixWith=function(o,t,s){if(o==null)throw new Error("from cannot be null.");if(t==null)throw new Error("to cannot be null.");var n=o.name+"."+t.name;this.animationToMixTime[n]=s},l.prototype.getMix=function(o,t){var s=o.name+"."+t.name,n=this.animationToMixTime[s];return n===void 0?this.defaultMix:n},l}();u.AnimationStateData=e}(p||(p={})),function(u){var e=function(){function l(o,t){t===void 0&&(t=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=o,this.pathPrefix=t}return l.prototype.downloadText=function(o,t,s){var n=new XMLHttpRequest;n.overrideMimeType("text/html"),this.rawDataUris[o]&&(o=this.rawDataUris[o]),n.open("GET",o,!0),n.onload=function(){n.status==200?t(n.responseText):s(n.status,n.responseText)},n.onerror=function(){s(n.status,n.responseText)},n.send()},l.prototype.downloadBinary=function(o,t,s){var n=new XMLHttpRequest;this.rawDataUris[o]&&(o=this.rawDataUris[o]),n.open("GET",o,!0),n.responseType="arraybuffer",n.onload=function(){n.status==200?t(new Uint8Array(n.response)):s(n.status,n.responseText)},n.onerror=function(){s(n.status,n.responseText)},n.send()},l.prototype.setRawDataURI=function(o,t){this.rawDataUris[this.pathPrefix+o]=t},l.prototype.loadBinary=function(o,t,s){var n=this;t===void 0&&(t=null),s===void 0&&(s=null),o=this.pathPrefix+o,this.toLoad++,this.downloadBinary(o,function(r){n.assets[o]=r,t&&t(o,r),n.toLoad--,n.loaded++},function(r,h){n.errors[o]="Couldn't load binary "+o+": status "+status+", "+h,s&&s(o,"Couldn't load binary "+o+": status "+status+", "+h),n.toLoad--,n.loaded++})},l.prototype.loadText=function(o,t,s){var n=this;t===void 0&&(t=null),s===void 0&&(s=null),o=this.pathPrefix+o,this.toLoad++,this.downloadText(o,function(r){n.assets[o]=r,t&&t(o,r),n.toLoad--,n.loaded++},function(r,h){n.errors[o]="Couldn't load text "+o+": status "+status+", "+h,s&&s(o,"Couldn't load text "+o+": status "+status+", "+h),n.toLoad--,n.loaded++})},l.prototype.loadTexture=function(o,t,s){var n=this;t===void 0&&(t=null),s===void 0&&(s=null);var r=o=this.pathPrefix+o;this.toLoad++;var h=new Image;h.crossOrigin="anonymous",h.onload=function(a){var c=n.textureLoader(h);n.assets[r]=c,n.toLoad--,n.loaded++,t&&t(o,h)},h.onerror=function(a){n.errors[o]="Couldn't load image "+o,n.toLoad--,n.loaded++,s&&s(o,"Couldn't load image "+o)},this.rawDataUris[o]&&(o=this.rawDataUris[o]),h.src=o},l.prototype.loadTextureAtlas=function(o,t,s){var n=this;t===void 0&&(t=null),s===void 0&&(s=null);var r=o.lastIndexOf("/")>=0?o.substring(0,o.lastIndexOf("/")):"";o=this.pathPrefix+o,this.toLoad++,this.downloadText(o,function(h){var a={count:0},c=new Array;try{new u.TextureAtlas(h,function(x){c.push(r==""?x:r+"/"+x);var T=document.createElement("img");return T.width=16,T.height=16,new u.FakeTexture(T)})}catch(x){var d=x;return n.errors[o]="Couldn't load texture atlas "+o+": "+d.message,s&&s(o,"Couldn't load texture atlas "+o+": "+d.message),n.toLoad--,void n.loaded++}for(var f=function(x){var T=!1;n.loadTexture(x,function(y,E){if(a.count++,a.count==c.length)if(T)n.errors[o]="Couldn't load texture atlas page "+y+"} of atlas "+o,s&&s(o,"Couldn't load texture atlas page "+y+" of atlas "+o),n.toLoad--,n.loaded++;else try{var w=new u.TextureAtlas(h,function(C){return n.get(r==""?C:r+"/"+C)});n.assets[o]=w,t&&t(o,w),n.toLoad--,n.loaded++}catch(C){var R=C;n.errors[o]="Couldn't load texture atlas "+o+": "+R.message,s&&s(o,"Couldn't load texture atlas "+o+": "+R.message),n.toLoad--,n.loaded++}},function(y,E){T=!0,a.count++,a.count==c.length&&(n.errors[o]="Couldn't load texture atlas page "+y+"} of atlas "+o,s&&s(o,"Couldn't load texture atlas page "+y+" of atlas "+o),n.toLoad--,n.loaded++)})},v=0,m=c;v<m.length;v++)f(m[v])},function(h,a){n.errors[o]="Couldn't load texture atlas "+o+": status "+status+", "+a,s&&s(o,"Couldn't load texture atlas "+o+": status "+status+", "+a),n.toLoad--,n.loaded++})},l.prototype.get=function(o){return o=this.pathPrefix+o,this.assets[o]},l.prototype.remove=function(o){o=this.pathPrefix+o;var t=this.assets[o];t.dispose&&t.dispose(),this.assets[o]=null},l.prototype.removeAll=function(){for(var o in this.assets){var t=this.assets[o];t.dispose&&t.dispose()}this.assets={}},l.prototype.isLoadingComplete=function(){return this.toLoad==0},l.prototype.getToLoad=function(){return this.toLoad},l.prototype.getLoaded=function(){return this.loaded},l.prototype.dispose=function(){this.removeAll()},l.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},l.prototype.getErrors=function(){return this.errors},l}();u.AssetManager=e}(p||(p={})),function(u){var e=function(){function l(o){this.atlas=o}return l.prototype.newRegionAttachment=function(o,t,s){var n=this.atlas.findRegion(s);if(n==null)throw new Error("Region not found in atlas: "+s+" (region attachment: "+t+")");n.renderObject=n;var r=new u.RegionAttachment(t);return r.setRegion(n),r},l.prototype.newMeshAttachment=function(o,t,s){var n=this.atlas.findRegion(s);if(n==null)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+t+")");n.renderObject=n;var r=new u.MeshAttachment(t);return r.region=n,r},l.prototype.newBoundingBoxAttachment=function(o,t){return new u.BoundingBoxAttachment(t)},l.prototype.newPathAttachment=function(o,t){return new u.PathAttachment(t)},l.prototype.newPointAttachment=function(o,t){return new u.PointAttachment(t)},l.prototype.newClippingAttachment=function(o,t){return new u.ClippingAttachment(t)},l}();u.AtlasAttachmentLoader=e}(p||(p={})),function(u){var e;(e=u.BlendMode||(u.BlendMode={}))[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(p||(p={})),function(u){var e=function(){function l(o,t,s){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,o==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=o,this.skeleton=t,this.parent=s,this.setToSetupPose()}return l.prototype.isActive=function(){return this.active},l.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},l.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},l.prototype.updateWorldTransformWith=function(o,t,s,n,r,h,a){this.ax=o,this.ay=t,this.arotation=s,this.ascaleX=n,this.ascaleY=r,this.ashearX=h,this.ashearY=a,this.appliedValid=!0;var c=this.parent;if(c==null){var d=this.skeleton,f=s+90+a,v=d.scaleX,m=d.scaleY;return this.a=u.MathUtils.cosDeg(s+h)*n*v,this.b=u.MathUtils.cosDeg(f)*r*v,this.c=u.MathUtils.sinDeg(s+h)*n*m,this.d=u.MathUtils.sinDeg(f)*r*m,this.worldX=o*v+d.x,void(this.worldY=t*m+d.y)}var x=c.a,T=c.b,y=c.c,E=c.d;switch(this.worldX=x*o+T*t+c.worldX,this.worldY=y*o+E*t+c.worldY,this.data.transformMode){case u.TransformMode.Normal:f=s+90+a;var w=u.MathUtils.cosDeg(s+h)*n,R=u.MathUtils.cosDeg(f)*r,C=u.MathUtils.sinDeg(s+h)*n,A=u.MathUtils.sinDeg(f)*r;return this.a=x*w+T*C,this.b=x*R+T*A,this.c=y*w+E*C,void(this.d=y*R+E*A);case u.TransformMode.OnlyTranslation:f=s+90+a,this.a=u.MathUtils.cosDeg(s+h)*n,this.b=u.MathUtils.cosDeg(f)*r,this.c=u.MathUtils.sinDeg(s+h)*n,this.d=u.MathUtils.sinDeg(f)*r;break;case u.TransformMode.NoRotationOrReflection:var S=0;(P=x*x+y*y)>1e-4?(P=Math.abs(x*E-T*y)/P,x/=this.skeleton.scaleX,T=(y/=this.skeleton.scaleY)*P,E=x*P,S=Math.atan2(y,x)*u.MathUtils.radDeg):(x=0,y=0,S=90-Math.atan2(E,T)*u.MathUtils.radDeg);var b=s+h-S,_=s+a-S+90;w=u.MathUtils.cosDeg(b)*n,R=u.MathUtils.cosDeg(_)*r,C=u.MathUtils.sinDeg(b)*n,A=u.MathUtils.sinDeg(_)*r,this.a=x*w-T*C,this.b=x*R-T*A,this.c=y*w+E*C,this.d=y*R+E*A;break;case u.TransformMode.NoScale:case u.TransformMode.NoScaleOrReflection:var P,D=u.MathUtils.cosDeg(s),O=u.MathUtils.sinDeg(s),F=(x*D+T*O)/this.skeleton.scaleX,N=(y*D+E*O)/this.skeleton.scaleY;(P=Math.sqrt(F*F+N*N))>1e-5&&(P=1/P),F*=P,N*=P,P=Math.sqrt(F*F+N*N),this.data.transformMode==u.TransformMode.NoScale&&x*E-T*y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(P=-P);var k=Math.PI/2+Math.atan2(N,F),L=Math.cos(k)*P,U=Math.sin(k)*P;w=u.MathUtils.cosDeg(h)*n,R=u.MathUtils.cosDeg(90+a)*r,C=u.MathUtils.sinDeg(h)*n,A=u.MathUtils.sinDeg(90+a)*r,this.a=F*w+L*C,this.b=F*R+L*A,this.c=N*w+U*C,this.d=N*R+U*A}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},l.prototype.setToSetupPose=function(){var o=this.data;this.x=o.x,this.y=o.y,this.rotation=o.rotation,this.scaleX=o.scaleX,this.scaleY=o.scaleY,this.shearX=o.shearX,this.shearY=o.shearY},l.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*u.MathUtils.radDeg},l.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*u.MathUtils.radDeg},l.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},l.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},l.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var o=this.parent;if(o==null)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*u.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*u.MathUtils.radDeg);var t=o.a,s=o.b,n=o.c,r=o.d,h=1/(t*r-s*n),a=this.worldX-o.worldX,c=this.worldY-o.worldY;this.ax=a*r*h-c*s*h,this.ay=c*t*h-a*n*h;var d=h*r,f=h*t,v=h*s,m=h*n,x=d*this.a-v*this.c,T=d*this.b-v*this.d,y=f*this.c-m*this.a,E=f*this.d-m*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(x*x+y*y),this.ascaleX>1e-4){var w=x*E-T*y;this.ascaleY=w/this.ascaleX,this.ashearY=Math.atan2(x*T+y*E,w)*u.MathUtils.radDeg,this.arotation=Math.atan2(y,x)*u.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(T*T+E*E),this.ashearY=0,this.arotation=90-Math.atan2(E,T)*u.MathUtils.radDeg},l.prototype.worldToLocal=function(o){var t=this.a,s=this.b,n=this.c,r=this.d,h=1/(t*r-s*n),a=o.x-this.worldX,c=o.y-this.worldY;return o.x=a*r*h-c*s*h,o.y=c*t*h-a*n*h,o},l.prototype.localToWorld=function(o){var t=o.x,s=o.y;return o.x=t*this.a+s*this.b+this.worldX,o.y=t*this.c+s*this.d+this.worldY,o},l.prototype.worldToLocalRotation=function(o){var t=u.MathUtils.sinDeg(o),s=u.MathUtils.cosDeg(o);return Math.atan2(this.a*t-this.c*s,this.d*s-this.b*t)*u.MathUtils.radDeg+this.rotation-this.shearX},l.prototype.localToWorldRotation=function(o){o-=this.rotation-this.shearX;var t=u.MathUtils.sinDeg(o),s=u.MathUtils.cosDeg(o);return Math.atan2(s*this.c+t*this.d,s*this.a+t*this.b)*u.MathUtils.radDeg},l.prototype.rotateWorld=function(o){var t=this.a,s=this.b,n=this.c,r=this.d,h=u.MathUtils.cosDeg(o),a=u.MathUtils.sinDeg(o);this.a=h*t-a*n,this.b=h*s-a*r,this.c=a*t+h*n,this.d=a*s+h*r,this.appliedValid=!1},l}();u.Bone=e}(p||(p={})),function(u){var e;u.BoneData=function(l,o,t){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new u.Color,l<0)throw new Error("index must be >= 0.");if(o==null)throw new Error("name cannot be null.");this.index=l,this.name=o,this.parent=t},function(l){l[l.Normal=0]="Normal",l[l.OnlyTranslation=1]="OnlyTranslation",l[l.NoRotationOrReflection=2]="NoRotationOrReflection",l[l.NoScale=3]="NoScale",l[l.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=u.TransformMode||(u.TransformMode={}))}(p||(p={})),function(u){u.ConstraintData=function(e,l,o){this.name=e,this.order=l,this.skinRequired=o}}(p||(p={})),function(u){u.Event=function(e,l){if(l==null)throw new Error("data cannot be null.");this.time=e,this.data=l}}(p||(p={})),function(u){u.EventData=function(e){this.name=e}}(p||(p={})),function(u){var e=function(){function l(o,t){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,o==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=o,this.mix=o.mix,this.softness=o.softness,this.bendDirection=o.bendDirection,this.compress=o.compress,this.stretch=o.stretch,this.bones=new Array;for(var s=0;s<o.bones.length;s++)this.bones.push(t.findBone(o.bones[s].name));this.target=t.findBone(o.target.name)}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update()},l.prototype.update=function(){var o=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],o.worldX,o.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(t[0],t[1],o.worldX,o.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},l.prototype.apply1=function(o,t,s,n,r,h,a){o.appliedValid||o.updateAppliedTransform();var c=o.parent,d=c.a,f=c.b,v=c.c,m=c.d,x=-o.ashearX-o.arotation,T=0,y=0;switch(o.data.transformMode){case u.TransformMode.OnlyTranslation:T=t-o.worldX,y=s-o.worldY;break;case u.TransformMode.NoRotationOrReflection:var E=Math.abs(d*m-f*v)/(d*d+v*v),w=d/o.skeleton.scaleX,R=v/o.skeleton.scaleY;f=-R*E*o.skeleton.scaleX,m=w*E*o.skeleton.scaleY,x+=Math.atan2(R,w)*u.MathUtils.radDeg;default:var C=t-c.worldX,A=s-c.worldY,S=d*m-f*v;T=(C*m-A*f)/S-o.ax,y=(A*d-C*v)/S-o.ay}x+=Math.atan2(y,T)*u.MathUtils.radDeg,o.ascaleX<0&&(x+=180),x>180?x-=360:x<-180&&(x+=360);var b=o.ascaleX,_=o.ascaleY;if(n||r){switch(o.data.transformMode){case u.TransformMode.NoScale:case u.TransformMode.NoScaleOrReflection:T=t-o.worldX,y=s-o.worldY}var P=o.data.length*b,D=Math.sqrt(T*T+y*y);(n&&D<P||r&&D>P&&P>1e-4)&&(b*=E=(D/P-1)*a+1,h&&(_*=E))}o.updateWorldTransformWith(o.ax,o.ay,o.arotation+x*a,b,_,o.ashearX,o.ashearY)},l.prototype.apply2=function(o,t,s,n,r,h,a,c){if(c!=0){o.appliedValid||o.updateAppliedTransform(),t.appliedValid||t.updateAppliedTransform();var d=o.ax,f=o.ay,v=o.ascaleX,m=v,x=o.ascaleY,T=t.ascaleX,y=0,E=0,w=0;v<0?(v=-v,y=180,w=-1):(y=0,w=1),x<0&&(x=-x,w=-w),T<0?(T=-T,E=180):E=0;var R=t.ax,C=0,A=0,S=0,b=o.a,_=o.b,P=o.c,D=o.d,O=Math.abs(v-x)<=1e-4;O?(A=b*R+_*(C=t.ay)+o.worldX,S=P*R+D*C+o.worldY):(C=0,A=b*R+o.worldX,S=P*R+o.worldY);var F=o.parent;b=F.a,_=F.b,P=F.c;var N,k,L=1/(b*(D=F.d)-_*P),U=A-F.worldX,Y=S-F.worldY,B=(U*D-Y*_)*L-d,W=(Y*b-U*P)*L-f,G=Math.sqrt(B*B+W*W),X=t.data.length*T;if(G<1e-4)return this.apply1(o,s,n,!1,h,!1,c),void t.updateWorldTransformWith(R,C,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);var q=((U=s-F.worldX)*D-(Y=n-F.worldY)*_)*L-d,j=(Y*b-U*P)*L-f,V=q*q+j*j;if(a!=0){a*=v*(T+1)/2;var K=Math.sqrt(V),H=K-G-X*v+a;if(H>0){var Z=Math.min(1,H/(2*a))-1;V=(q-=(Z=(H-a*(1-Z*Z))/K)*q)*q+(j-=Z*j)*j}}t:if(O){var Q=(V-G*G-(X*=v)*X)/(2*G*X);Q<-1?Q=-1:Q>1&&(Q=1,h&&(m*=(Math.sqrt(V)/(G+X)-1)*c+1)),k=Math.acos(Q)*r,b=G+X*Q,_=X*Math.sin(k),N=Math.atan2(j*b-q*_,q*b+j*_)}else{var J=(b=v*X)*b,et=(_=x*X)*_,$=Math.atan2(j,q),tt=-2*et*G,it=et-J;if((D=tt*tt-4*it*(P=et*G*G+J*V-J*et))>=0){var nt=Math.sqrt(D);tt<0&&(nt=-nt);var rt=(nt=-(tt+nt)/2)/it,st=P/nt,at=Math.abs(rt)<Math.abs(st)?rt:st;if(at*at<=V){Y=Math.sqrt(V-at*at)*r,N=$-Math.atan2(Y,at),k=Math.atan2(Y/x,(at-G)/v);break t}}var ct=u.MathUtils.PI,ht=G-b,ut=ht*ht,ot=0,ft=0,lt=G+b,gt=lt*lt,pt=0;(P=-b*G/(J-et))>=-1&&P<=1&&(P=Math.acos(P),(D=(U=b*Math.cos(P)+G)*U+(Y=_*Math.sin(P))*Y)<ut&&(ct=P,ut=D,ht=U,ot=Y),D>gt&&(ft=P,gt=D,lt=U,pt=Y)),V<=(ut+gt)/2?(N=$-Math.atan2(ot*r,ht),k=ct*r):(N=$-Math.atan2(pt*r,lt),k=ft*r)}var vt=Math.atan2(C,R)*w,dt=o.arotation;(N=(N-vt)*u.MathUtils.radDeg+y-dt)>180?N-=360:N<-180&&(N+=360),o.updateWorldTransformWith(d,f,dt+N*c,m,o.ascaleY,0,0),dt=t.arotation,(k=((k+vt)*u.MathUtils.radDeg-t.ashearX)*w+E-dt)>180?k-=360:k<-180&&(k+=360),t.updateWorldTransformWith(R,C,dt+k*c,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}else t.updateWorldTransform()},l}();u.IkConstraint=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t,0,!1)||this;return s.bones=new Array,s.bendDirection=1,s.compress=!1,s.stretch=!1,s.uniform=!1,s.mix=1,s.softness=0,s}return i(o,l),o}(u.ConstraintData);u.IkConstraintData=e}(p||(p={})),function(u){var e=function(){function l(o,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,o==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=o,this.bones=new Array;for(var s=0,n=o.bones.length;s<n;s++)this.bones.push(t.findBone(o.bones[s].name));this.target=t.findSlot(o.target.name),this.position=o.position,this.spacing=o.spacing,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update()},l.prototype.update=function(){var o=this.target.getAttachment();if(o instanceof u.PathAttachment){var t=this.rotateMix,s=this.translateMix,n=t>0;if(s>0||n){var r=this.data,h=r.spacingMode==u.SpacingMode.Percent,a=r.rotateMode,c=a==u.RotateMode.Tangent,d=a==u.RotateMode.ChainScale,f=this.bones.length,v=c?f:f+1,m=this.bones,x=u.Utils.setArraySize(this.spaces,v),T=null,y=this.spacing;if(d||!h){d&&(T=u.Utils.setArraySize(this.lengths,f));for(var E=r.spacingMode==u.SpacingMode.Length,w=0,R=v-1;w<R;){var C=(L=m[w]).data.length;if(C<l.epsilon)d&&(T[w]=0),x[++w]=0;else if(h){if(d){var A=C*L.a,S=C*L.c,b=Math.sqrt(A*A+S*S);T[w]=b}x[++w]=y}else{A=C*L.a,S=C*L.c;var _=Math.sqrt(A*A+S*S);d&&(T[w]=_),x[++w]=(E?C+y:y)*_/C}}}else for(w=1;w<v;w++)x[w]=y;var P=this.computeWorldPositions(o,v,c,r.positionMode==u.PositionMode.Percent,h),D=P[0],O=P[1],F=r.offsetRotation,N=!1;F==0?N=a==u.RotateMode.Chain:(N=!1,F*=(k=this.target.bone).a*k.d-k.b*k.c>0?u.MathUtils.degRad:-u.MathUtils.degRad),w=0;for(var k=3;w<f;w++,k+=3){var L;(L=m[w]).worldX+=(D-L.worldX)*s,L.worldY+=(O-L.worldY)*s;var U=(A=P[k])-D,Y=(S=P[k+1])-O;if(d){var B=T[w];if(B!=0){var W=(Math.sqrt(U*U+Y*Y)/B-1)*t+1;L.a*=W,L.c*=W}}if(D=A,O=S,n){var G=L.a,X=L.b,q=L.c,j=L.d,V=0,K=0,H=0;if(V=c?P[k-1]:x[w+1]==0?P[k+2]:Math.atan2(Y,U),V-=Math.atan2(q,G),N){K=Math.cos(V),H=Math.sin(V);var Z=L.data.length;D+=(Z*(K*G-H*q)-U)*t,O+=(Z*(H*G+K*q)-Y)*t}else V+=F;V>u.MathUtils.PI?V-=u.MathUtils.PI2:V<-u.MathUtils.PI&&(V+=u.MathUtils.PI2),V*=t,K=Math.cos(V),H=Math.sin(V),L.a=K*G-H*q,L.b=K*X-H*j,L.c=H*G+K*q,L.d=H*X+K*j}L.appliedValid=!1}}}},l.prototype.computeWorldPositions=function(o,t,s,n,r){var h=this.target,a=this.position,c=this.spaces,d=u.Utils.setArraySize(this.positions,3*t+2),f=null,v=o.closed,m=o.worldVerticesLength,x=m/6,T=l.NONE;if(!o.constantSpeed){var y=o.lengths,E=y[x-=v?1:2];if(n&&(a*=E),r)for(var w=1;w<t;w++)c[w]*=E;f=u.Utils.setArraySize(this.world,8),w=0;for(var R=0,C=0;w<t;w++,R+=3){var A=a+=J=c[w];if(v)(A%=E)<0&&(A+=E),C=0;else{if(A<0){T!=l.BEFORE&&(T=l.BEFORE,o.computeWorldVertices(h,2,4,f,0,2)),this.addBeforePosition(A,f,0,d,R);continue}if(A>E){T!=l.AFTER&&(T=l.AFTER,o.computeWorldVertices(h,m-6,4,f,0,2)),this.addAfterPosition(A-E,f,0,d,R);continue}}for(;;C++){var S=y[C];if(!(A>S)){C==0?A/=S:A=(A-(it=y[C-1]))/(S-it);break}}C!=T&&(T=C,v&&C==x?(o.computeWorldVertices(h,m-4,4,f,0,2),o.computeWorldVertices(h,0,4,f,4,2)):o.computeWorldVertices(h,6*C+2,8,f,0,2)),this.addCurvePosition(A,f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],d,R,s||w>0&&J==0)}return d}v?(m+=2,f=u.Utils.setArraySize(this.world,m),o.computeWorldVertices(h,2,m-4,f,0,2),o.computeWorldVertices(h,0,2,f,m-4,2),f[m-2]=f[0],f[m-1]=f[1]):(x--,m-=4,f=u.Utils.setArraySize(this.world,m),o.computeWorldVertices(h,2,m,f,0,2));for(var b=u.Utils.setArraySize(this.curves,x),_=0,P=f[0],D=f[1],O=0,F=0,N=0,k=0,L=0,U=0,Y=0,B=0,W=0,G=0,X=0,q=0,j=0,V=0,K=(w=0,2);w<x;w++,K+=6)O=f[K],F=f[K+1],N=f[K+2],k=f[K+3],X=2*(Y=.1875*(P-2*O+N))+(W=.09375*(3*(O-N)-P+(L=f[K+4]))),q=2*(B=.1875*(D-2*F+k))+(G=.09375*(3*(F-k)-D+(U=f[K+5]))),j=.75*(O-P)+Y+.16666667*W,V=.75*(F-D)+B+.16666667*G,_+=Math.sqrt(j*j+V*V),j+=X,V+=q,X+=W,q+=G,_+=Math.sqrt(j*j+V*V),j+=X,V+=q,_+=Math.sqrt(j*j+V*V),j+=X+W,V+=q+G,_+=Math.sqrt(j*j+V*V),b[w]=_,P=L,D=U;if(a*=n?_:_/o.lengths[x-1],r)for(w=1;w<t;w++)c[w]*=_;for(var H=this.segments,Z=0,Q=(w=0,R=0,C=0,0);w<t;w++,R+=3){var J;if(A=a+=J=c[w],v)(A%=_)<0&&(A+=_),C=0;else{if(A<0){this.addBeforePosition(A,f,0,d,R);continue}if(A>_){this.addAfterPosition(A-_,f,m-4,d,R);continue}}for(;;C++){var et=b[C];if(!(A>et)){C==0?A/=et:A=(A-(it=b[C-1]))/(et-it);break}}if(C!=T){T=C;var $=6*C;for(P=f[$],D=f[$+1],O=f[$+2],F=f[$+3],N=f[$+4],k=f[$+5],X=2*(Y=.03*(P-2*O+N))+(W=.006*(3*(O-N)-P+(L=f[$+6]))),q=2*(B=.03*(D-2*F+k))+(G=.006*(3*(F-k)-D+(U=f[$+7]))),j=.3*(O-P)+Y+.16666667*W,V=.3*(F-D)+B+.16666667*G,Z=Math.sqrt(j*j+V*V),H[0]=Z,$=1;$<8;$++)j+=X,V+=q,X+=W,q+=G,Z+=Math.sqrt(j*j+V*V),H[$]=Z;j+=X,V+=q,Z+=Math.sqrt(j*j+V*V),H[8]=Z,j+=X+W,V+=q+G,Z+=Math.sqrt(j*j+V*V),H[9]=Z,Q=0}for(A*=Z;;Q++){var tt=H[Q];if(!(A>tt)){var it;Q==0?A/=tt:A=Q+(A-(it=H[Q-1]))/(tt-it);break}}this.addCurvePosition(.1*A,P,D,O,F,N,k,L,U,d,R,s||w>0&&J==0)}return d},l.prototype.addBeforePosition=function(o,t,s,n,r){var h=t[s],a=t[s+1],c=t[s+2]-h,d=t[s+3]-a,f=Math.atan2(d,c);n[r]=h+o*Math.cos(f),n[r+1]=a+o*Math.sin(f),n[r+2]=f},l.prototype.addAfterPosition=function(o,t,s,n,r){var h=t[s+2],a=t[s+3],c=h-t[s],d=a-t[s+1],f=Math.atan2(d,c);n[r]=h+o*Math.cos(f),n[r+1]=a+o*Math.sin(f),n[r+2]=f},l.prototype.addCurvePosition=function(o,t,s,n,r,h,a,c,d,f,v,m){if(o==0||isNaN(o))return f[v]=t,f[v+1]=s,void(f[v+2]=Math.atan2(r-s,n-t));var x=o*o,T=x*o,y=1-o,E=y*y,w=E*y,R=y*o,C=3*R,A=y*C,S=C*o,b=t*w+n*A+h*S+c*T,_=s*w+r*A+a*S+d*T;f[v]=b,f[v+1]=_,m&&(f[v+2]=o<.001?Math.atan2(r-s,n-t):Math.atan2(_-(s*E+r*R*2+a*x),b-(t*E+n*R*2+h*x)))},l.NONE=-1,l.BEFORE=-2,l.AFTER=-3,l.epsilon=1e-5,l}();u.PathConstraint=e}(p||(p={})),function(u){var e,l,o,t=function(s){function n(r){var h=s.call(this,r,0,!1)||this;return h.bones=new Array,h}return i(n,s),n}(u.ConstraintData);u.PathConstraintData=t,(o=u.PositionMode||(u.PositionMode={}))[o.Fixed=0]="Fixed",o[o.Percent=1]="Percent",(l=u.SpacingMode||(u.SpacingMode={}))[l.Length=0]="Length",l[l.Fixed=1]="Fixed",l[l.Percent=2]="Percent",(e=u.RotateMode||(u.RotateMode={}))[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(p||(p={})),function(u){var e=function(){function o(t){this.toLoad=new Array,this.assets={},this.clientId=t}return o.prototype.loaded=function(){var t=0;for(var s in this.assets)t++;return t},o}(),l=function(){function o(t){t===void 0&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return o.prototype.queueAsset=function(t,s,n){var r=this.clientAssets[t];return r==null&&(r=new e(t),this.clientAssets[t]=r),s!==null&&(r.textureLoader=s),r.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},o.prototype.loadText=function(t,s){var n=this;if(s=this.pathPrefix+s,this.queueAsset(t,null,s)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[s]=r.responseText:n.errors[s]="Couldn't load text "+s+": status "+r.status+", "+r.responseText)},r.open("GET",s,!0),r.send()}},o.prototype.loadJson=function(t,s){var n=this;if(s=this.pathPrefix+s,this.queueAsset(t,null,s)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[s]=JSON.parse(r.responseText):n.errors[s]="Couldn't load text "+s+": status "+r.status+", "+r.responseText)},r.open("GET",s,!0),r.send()}},o.prototype.loadTexture=function(t,s,n){var r=this;if(n=this.pathPrefix+n,this.queueAsset(t,s,n))if(typeof window<"u"&&typeof navigator<"u"&&window.document||typeof importScripts>"u"){var h=new Image;h.crossOrigin="anonymous",h.onload=function(a){r.rawAssets[n]=h},h.onerror=function(a){r.errors[n]="Couldn't load image "+n},h.src=n}else fetch(n,{mode:"cors"}).then(function(a){return a.ok||(r.errors[n]="Couldn't load image "+n),a.blob()}).then(function(a){return createImageBitmap(a,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(a){r.rawAssets[n]=a})},o.prototype.get=function(t,s){s=this.pathPrefix+s;var n=this.clientAssets[t];return n==null||n.assets[s]},o.prototype.updateClientAssets=function(t){for(var s=!(typeof window<"u"&&typeof navigator<"u"&&window.document)&&typeof importScripts<"u",n=0;n<t.toLoad.length;n++){var r=t.toLoad[n];if(t.assets[r]==null){var h=this.rawAssets[r];if(h==null)continue;s?h instanceof ImageBitmap?t.assets[r]=t.textureLoader(h):t.assets[r]=h:h instanceof HTMLImageElement?t.assets[r]=t.textureLoader(h):t.assets[r]=h}}},o.prototype.isLoadingComplete=function(t){var s=this.clientAssets[t];return s==null||(this.updateClientAssets(s),s.toLoad.length==s.loaded())},o.prototype.dispose=function(){},o.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},o.prototype.getErrors=function(){return this.errors},o}();u.SharedAssetManager=l}(p||(p={})),function(u){var e=function(){function l(o){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,o==null)throw new Error("data cannot be null.");this.data=o,this.bones=new Array;for(var t=0;t<o.bones.length;t++){var s=o.bones[t],n=void 0;if(s.parent==null)n=new u.Bone(s,this,null);else{var r=this.bones[s.parent.index];n=new u.Bone(s,this,r),r.children.push(n)}this.bones.push(n)}for(this.slots=new Array,this.drawOrder=new Array,t=0;t<o.slots.length;t++){var h=o.slots[t],a=(n=this.bones[h.boneData.index],new u.Slot(h,n));this.slots.push(a),this.drawOrder.push(a)}for(this.ikConstraints=new Array,t=0;t<o.ikConstraints.length;t++){var c=o.ikConstraints[t];this.ikConstraints.push(new u.IkConstraint(c,this))}for(this.transformConstraints=new Array,t=0;t<o.transformConstraints.length;t++){var d=o.transformConstraints[t];this.transformConstraints.push(new u.TransformConstraint(d,this))}for(this.pathConstraints=new Array,t=0;t<o.pathConstraints.length;t++){var f=o.pathConstraints[t];this.pathConstraints.push(new u.PathConstraint(f,this))}this.color=new u.Color(1,1,1,1),this.updateCache()}return l.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var o=this.bones,t=0,s=o.length;t<s;t++)(r=o[t]).sorted=r.data.skinRequired,r.active=!r.sorted;if(this.skin!=null){var n=this.skin.bones;for(t=0,s=this.skin.bones.length;t<s;t++){var r=this.bones[n[t].index];do r.sorted=!1,r.active=!0,r=r.parent;while(r!=null)}}var h=this.ikConstraints,a=this.transformConstraints,c=this.pathConstraints,d=h.length,f=a.length,v=c.length,m=d+f+v;t:for(t=0;t<m;t++){for(var x=0;x<d;x++)if((T=h[x]).data.order==t){this.sortIkConstraint(T);continue t}for(x=0;x<f;x++)if((T=a[x]).data.order==t){this.sortTransformConstraint(T);continue t}for(x=0;x<v;x++){var T;if((T=c[x]).data.order==t){this.sortPathConstraint(T);continue t}}}for(t=0,s=o.length;t<s;t++)this.sortBone(o[t])},l.prototype.sortIkConstraint=function(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||this.skin!=null&&u.Utils.contains(this.skin.constraints,o.data,!0)),o.active){var t=o.target;this.sortBone(t);var s=o.bones,n=s[0];if(this.sortBone(n),s.length>1){var r=s[s.length-1];this._updateCache.indexOf(r)>-1||this.updateCacheReset.push(r)}this._updateCache.push(o),this.sortReset(n.children),s[s.length-1].sorted=!0}},l.prototype.sortPathConstraint=function(o){if(o.active=o.target.bone.isActive()&&(!o.data.skinRequired||this.skin!=null&&u.Utils.contains(this.skin.constraints,o.data,!0)),o.active){var t=o.target,s=t.data.index,n=t.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,s,n),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,n);for(var r=0,h=this.data.skins.length;r<h;r++)this.sortPathConstraintAttachment(this.data.skins[r],s,n);var a=t.getAttachment();a instanceof u.PathAttachment&&this.sortPathConstraintAttachmentWith(a,n);var c=o.bones,d=c.length;for(r=0;r<d;r++)this.sortBone(c[r]);for(this._updateCache.push(o),r=0;r<d;r++)this.sortReset(c[r].children);for(r=0;r<d;r++)c[r].sorted=!0}},l.prototype.sortTransformConstraint=function(o){if(o.active=o.target.isActive()&&(!o.data.skinRequired||this.skin!=null&&u.Utils.contains(this.skin.constraints,o.data,!0)),o.active){this.sortBone(o.target);var t=o.bones,s=t.length;if(o.data.local)for(var n=0;n<s;n++){var r=t[n];this.sortBone(r.parent),this._updateCache.indexOf(r)>-1||this.updateCacheReset.push(r)}else for(n=0;n<s;n++)this.sortBone(t[n]);this._updateCache.push(o);for(var h=0;h<s;h++)this.sortReset(t[h].children);for(h=0;h<s;h++)t[h].sorted=!0}},l.prototype.sortPathConstraintAttachment=function(o,t,s){var n=o.attachments[t];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],s)},l.prototype.sortPathConstraintAttachmentWith=function(o,t){if(o instanceof u.PathAttachment){var s=o.bones;if(s==null)this.sortBone(t);else for(var n=this.bones,r=0;r<s.length;)for(var h=s[r++],a=r+h;r<a;r++){var c=s[r];this.sortBone(n[c])}}},l.prototype.sortBone=function(o){if(!o.sorted){var t=o.parent;t!=null&&this.sortBone(t),o.sorted=!0,this._updateCache.push(o)}},l.prototype.sortReset=function(o){for(var t=0,s=o.length;t<s;t++){var n=o[t];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},l.prototype.updateWorldTransform=function(){for(var o=this.updateCacheReset,t=0,s=o.length;t<s;t++){var n=o[t];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}var r=this._updateCache;for(t=0,s=r.length;t<s;t++)r[t].update()},l.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},l.prototype.setBonesToSetupPose=function(){for(var o=this.bones,t=0,s=o.length;t<s;t++)o[t].setToSetupPose();var n=this.ikConstraints;for(t=0,s=n.length;t<s;t++)(c=n[t]).mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch;var r=this.transformConstraints;for(t=0,s=r.length;t<s;t++){var h=(c=r[t]).data;c.rotateMix=h.rotateMix,c.translateMix=h.translateMix,c.scaleMix=h.scaleMix,c.shearMix=h.shearMix}var a=this.pathConstraints;for(t=0,s=a.length;t<s;t++){var c;h=(c=a[t]).data,c.position=h.position,c.spacing=h.spacing,c.rotateMix=h.rotateMix,c.translateMix=h.translateMix}},l.prototype.setSlotsToSetupPose=function(){var o=this.slots;u.Utils.arrayCopy(o,0,this.drawOrder,0,o.length);for(var t=0,s=o.length;t<s;t++)o[t].setToSetupPose()},l.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},l.prototype.findBone=function(o){if(o==null)throw new Error("boneName cannot be null.");for(var t=this.bones,s=0,n=t.length;s<n;s++){var r=t[s];if(r.data.name==o)return r}return null},l.prototype.findBoneIndex=function(o){if(o==null)throw new Error("boneName cannot be null.");for(var t=this.bones,s=0,n=t.length;s<n;s++)if(t[s].data.name==o)return s;return-1},l.prototype.findSlot=function(o){if(o==null)throw new Error("slotName cannot be null.");for(var t=this.slots,s=0,n=t.length;s<n;s++){var r=t[s];if(r.data.name==o)return r}return null},l.prototype.findSlotIndex=function(o){if(o==null)throw new Error("slotName cannot be null.");for(var t=this.slots,s=0,n=t.length;s<n;s++)if(t[s].data.name==o)return s;return-1},l.prototype.setSkinByName=function(o){var t=this.data.findSkin(o);if(t==null)throw new Error("Skin not found: "+o);this.setSkin(t)},l.prototype.setSkin=function(o){if(o!=this.skin){if(o!=null)if(this.skin!=null)o.attachAll(this,this.skin);else for(var t=this.slots,s=0,n=t.length;s<n;s++){var r=t[s],h=r.data.attachmentName;if(h!=null){var a=o.getAttachment(s,h);a!=null&&r.setAttachment(a)}}this.skin=o,this.updateCache()}},l.prototype.getAttachmentByName=function(o,t){return this.getAttachment(this.data.findSlotIndex(o),t)},l.prototype.getAttachment=function(o,t){if(t==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var s=this.skin.getAttachment(o,t);if(s!=null)return s}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(o,t):null},l.prototype.setAttachment=function(o,t){if(o==null)throw new Error("slotName cannot be null.");for(var s=this.slots,n=0,r=s.length;n<r;n++){var h=s[n];if(h.data.name==o){var a=null;if(t!=null&&(a=this.getAttachment(n,t))==null)throw new Error("Attachment not found: "+t+", for slot: "+o);return void h.setAttachment(a)}}throw new Error("Slot not found: "+o)},l.prototype.findIkConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.data.name==o)return r}return null},l.prototype.findTransformConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.data.name==o)return r}return null},l.prototype.findPathConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.data.name==o)return r}return null},l.prototype.getBounds=function(o,t,s){if(s===void 0&&(s=new Array(2)),o==null)throw new Error("offset cannot be null.");if(t==null)throw new Error("size cannot be null.");for(var n=this.drawOrder,r=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=0,f=n.length;d<f;d++){var v=n[d];if(v.bone.active){var m=0,x=null,T=v.getAttachment();if(T instanceof u.RegionAttachment)m=8,x=u.Utils.setArraySize(s,m,0),T.computeWorldVertices(v.bone,x,0,2);else if(T instanceof u.MeshAttachment){var y=T;m=y.worldVerticesLength,x=u.Utils.setArraySize(s,m,0),y.computeWorldVertices(v,0,m,x,0,2)}if(x!=null)for(var E=0,w=x.length;E<w;E+=2){var R=x[E],C=x[E+1];r=Math.min(r,R),h=Math.min(h,C),a=Math.max(a,R),c=Math.max(c,C)}}}o.set(r,h),t.set(a-r,c-h)},l.prototype.update=function(o){this.time+=o},l}();u.Skeleton=e}(p||(p={})),function(u){var e=function(){function s(n){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=n}return s.prototype.readSkeletonData=function(n){var r=this.scale,h=new u.SkeletonData;h.name="";var a=new l(n);if(h.hash=a.readString(),h.version=a.readString(),h.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");h.x=a.readFloat(),h.y=a.readFloat(),h.width=a.readFloat(),h.height=a.readFloat();var c=a.readBoolean();c&&(h.fps=a.readFloat(),h.imagesPath=a.readString(),h.audioPath=a.readString());var d=0;d=a.readInt(!0);for(var f=0;f<d;f++)a.strings.push(a.readString());for(d=a.readInt(!0),f=0;f<d;f++){var v=a.readString(),m=f==0?null:h.bones[a.readInt(!0)];(y=new u.BoneData(f,v,m)).rotation=a.readFloat(),y.x=a.readFloat()*r,y.y=a.readFloat()*r,y.scaleX=a.readFloat(),y.scaleY=a.readFloat(),y.shearX=a.readFloat(),y.shearY=a.readFloat(),y.length=a.readFloat()*r,y.transformMode=s.TransformModeValues[a.readInt(!0)],y.skinRequired=a.readBoolean(),c&&u.Color.rgba8888ToColor(y.color,a.readInt32()),h.bones.push(y)}for(d=a.readInt(!0),f=0;f<d;f++){var x=a.readString(),T=h.bones[a.readInt(!0)],y=new u.SlotData(f,x,T);u.Color.rgba8888ToColor(y.color,a.readInt32());var E=a.readInt32();E!=-1&&u.Color.rgb888ToColor(y.darkColor=new u.Color,E),y.attachmentName=a.readStringRef(),y.blendMode=s.BlendModeValues[a.readInt(!0)],h.slots.push(y)}d=a.readInt(!0),f=0;for(var w=void 0;f<d;f++){(y=new u.IkConstraintData(a.readString())).order=a.readInt(!0),y.skinRequired=a.readBoolean(),w=a.readInt(!0);for(var R=0;R<w;R++)y.bones.push(h.bones[a.readInt(!0)]);y.target=h.bones[a.readInt(!0)],y.mix=a.readFloat(),y.softness=a.readFloat()*r,y.bendDirection=a.readByte(),y.compress=a.readBoolean(),y.stretch=a.readBoolean(),y.uniform=a.readBoolean(),h.ikConstraints.push(y)}for(d=a.readInt(!0),f=0,w=void 0;f<d;f++){for((y=new u.TransformConstraintData(a.readString())).order=a.readInt(!0),y.skinRequired=a.readBoolean(),w=a.readInt(!0),R=0;R<w;R++)y.bones.push(h.bones[a.readInt(!0)]);y.target=h.bones[a.readInt(!0)],y.local=a.readBoolean(),y.relative=a.readBoolean(),y.offsetRotation=a.readFloat(),y.offsetX=a.readFloat()*r,y.offsetY=a.readFloat()*r,y.offsetScaleX=a.readFloat(),y.offsetScaleY=a.readFloat(),y.offsetShearY=a.readFloat(),y.rotateMix=a.readFloat(),y.translateMix=a.readFloat(),y.scaleMix=a.readFloat(),y.shearMix=a.readFloat(),h.transformConstraints.push(y)}for(d=a.readInt(!0),f=0,w=void 0;f<d;f++){for((y=new u.PathConstraintData(a.readString())).order=a.readInt(!0),y.skinRequired=a.readBoolean(),w=a.readInt(!0),R=0;R<w;R++)y.bones.push(h.bones[a.readInt(!0)]);y.target=h.slots[a.readInt(!0)],y.positionMode=s.PositionModeValues[a.readInt(!0)],y.spacingMode=s.SpacingModeValues[a.readInt(!0)],y.rotateMode=s.RotateModeValues[a.readInt(!0)],y.offsetRotation=a.readFloat(),y.position=a.readFloat(),y.positionMode==u.PositionMode.Fixed&&(y.position*=r),y.spacing=a.readFloat(),y.spacingMode!=u.SpacingMode.Length&&y.spacingMode!=u.SpacingMode.Fixed||(y.spacing*=r),y.rotateMix=a.readFloat(),y.translateMix=a.readFloat(),h.pathConstraints.push(y)}var C=this.readSkin(a,h,!0,c);for(C!=null&&(h.defaultSkin=C,h.skins.push(C)),f=h.skins.length,u.Utils.setArraySize(h.skins,d=f+a.readInt(!0));f<d;f++)h.skins[f]=this.readSkin(a,h,!1,c);for(d=this.linkedMeshes.length,f=0;f<d;f++){var A=this.linkedMeshes[f],S=A.skin==null?h.defaultSkin:h.findSkin(A.skin);if(S==null)throw new Error("Skin not found: "+A.skin);var b=S.getAttachment(A.slotIndex,A.parent);if(b==null)throw new Error("Parent mesh not found: "+A.parent);A.mesh.deformAttachment=A.inheritDeform?b:A.mesh,A.mesh.setParentMesh(b),A.mesh.updateUVs()}for(this.linkedMeshes.length=0,d=a.readInt(!0),f=0;f<d;f++)(y=new u.EventData(a.readStringRef())).intValue=a.readInt(!1),y.floatValue=a.readFloat(),y.stringValue=a.readString(),y.audioPath=a.readString(),y.audioPath!=null&&(y.volume=a.readFloat(),y.balance=a.readFloat()),h.events.push(y);for(d=a.readInt(!0),f=0;f<d;f++)h.animations.push(this.readAnimation(a,a.readString(),h));return h},s.prototype.readSkin=function(n,r,h,a){var c=null,d=0;if(h){if((d=n.readInt(!0))==0)return null;c=new u.Skin("default")}else{(c=new u.Skin(n.readStringRef())).bones.length=n.readInt(!0);for(var f=0,v=c.bones.length;f<v;f++)c.bones[f]=r.bones[n.readInt(!0)];for(f=0,v=n.readInt(!0);f<v;f++)c.constraints.push(r.ikConstraints[n.readInt(!0)]);for(f=0,v=n.readInt(!0);f<v;f++)c.constraints.push(r.transformConstraints[n.readInt(!0)]);for(f=0,v=n.readInt(!0);f<v;f++)c.constraints.push(r.pathConstraints[n.readInt(!0)]);d=n.readInt(!0)}for(f=0;f<d;f++)for(var m=n.readInt(!0),x=0,T=n.readInt(!0);x<T;x++){var y=n.readStringRef(),E=this.readAttachment(n,r,c,m,y,a);E!=null&&c.setAttachment(m,y,E)}return c},s.prototype.readAttachment=function(n,r,h,a,c,d){var f=this.scale,v=n.readStringRef();v==null&&(v=c);var m=n.readByte();switch(s.AttachmentTypeValues[m]){case u.AttachmentType.Region:var x=n.readStringRef(),T=n.readFloat(),y=n.readFloat(),E=n.readFloat(),w=n.readFloat(),R=n.readFloat(),C=n.readFloat(),A=n.readFloat(),S=n.readInt32();x==null&&(x=v);var b=this.attachmentLoader.newRegionAttachment(h,v,x);return b==null?null:(b.path=x,b.x=y*f,b.y=E*f,b.scaleX=w,b.scaleY=R,b.rotation=T,b.width=C*f,b.height=A*f,u.Color.rgba8888ToColor(b.color,S),b.updateOffset(),b);case u.AttachmentType.BoundingBox:var _=n.readInt(!0),P=this.readVertices(n,_),D=(S=d?n.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(h,v));return D==null?null:(D.worldVerticesLength=_<<1,D.vertices=P.vertices,D.bones=P.bones,d&&u.Color.rgba8888ToColor(D.color,S),D);case u.AttachmentType.Mesh:x=n.readStringRef(),S=n.readInt32(),_=n.readInt(!0);var O=this.readFloatArray(n,_<<1,1),F=this.readShortArray(n),N=(P=this.readVertices(n,_),n.readInt(!0)),k=null;return C=0,A=0,d&&(k=this.readShortArray(n),C=n.readFloat(),A=n.readFloat()),x==null&&(x=v),(L=this.attachmentLoader.newMeshAttachment(h,v,x))==null?null:(L.path=x,u.Color.rgba8888ToColor(L.color,S),L.bones=P.bones,L.vertices=P.vertices,L.worldVerticesLength=_<<1,L.triangles=F,L.regionUVs=O,L.updateUVs(),L.hullLength=N<<1,d&&(L.edges=k,L.width=C*f,L.height=A*f),L);case u.AttachmentType.LinkedMesh:x=n.readStringRef(),S=n.readInt32();var L,U=n.readStringRef(),Y=n.readStringRef(),B=n.readBoolean();return C=0,A=0,d&&(C=n.readFloat(),A=n.readFloat()),x==null&&(x=v),(L=this.attachmentLoader.newMeshAttachment(h,v,x))==null?null:(L.path=x,u.Color.rgba8888ToColor(L.color,S),d&&(L.width=C*f,L.height=A*f),this.linkedMeshes.push(new o(L,U,a,Y,B)),L);case u.AttachmentType.Path:for(var W=n.readBoolean(),G=n.readBoolean(),X=(_=n.readInt(!0),P=this.readVertices(n,_),u.Utils.newArray(_/3,0)),q=0,j=X.length;q<j;q++)X[q]=n.readFloat()*f;return S=d?n.readInt32():0,(x=this.attachmentLoader.newPathAttachment(h,v))==null?null:(x.closed=W,x.constantSpeed=G,x.worldVerticesLength=_<<1,x.vertices=P.vertices,x.bones=P.bones,x.lengths=X,d&&u.Color.rgba8888ToColor(x.color,S),x);case u.AttachmentType.Point:T=n.readFloat(),y=n.readFloat(),E=n.readFloat(),S=d?n.readInt32():0;var V=this.attachmentLoader.newPointAttachment(h,v);return V==null?null:(V.x=y*f,V.y=E*f,V.rotation=T,d&&u.Color.rgba8888ToColor(V.color,S),V);case u.AttachmentType.Clipping:var K=n.readInt(!0),H=(_=n.readInt(!0),P=this.readVertices(n,_),S=d?n.readInt32():0,this.attachmentLoader.newClippingAttachment(h,v));return H==null?null:(H.endSlot=r.slots[K],H.worldVerticesLength=_<<1,H.vertices=P.vertices,H.bones=P.bones,d&&u.Color.rgba8888ToColor(H.color,S),H)}return null},s.prototype.readVertices=function(n,r){var h=r<<1,a=new t,c=this.scale;if(!n.readBoolean())return a.vertices=this.readFloatArray(n,h,c),a;for(var d=new Array,f=new Array,v=0;v<r;v++){var m=n.readInt(!0);f.push(m);for(var x=0;x<m;x++)f.push(n.readInt(!0)),d.push(n.readFloat()*c),d.push(n.readFloat()*c),d.push(n.readFloat())}return a.vertices=u.Utils.toFloatArray(d),a.bones=f,a},s.prototype.readFloatArray=function(n,r,h){var a=new Array(r);if(h==1)for(var c=0;c<r;c++)a[c]=n.readFloat();else for(c=0;c<r;c++)a[c]=n.readFloat()*h;return a},s.prototype.readShortArray=function(n){for(var r=n.readInt(!0),h=new Array(r),a=0;a<r;a++)h[a]=n.readShort();return h},s.prototype.readAnimation=function(n,r,h){for(var a=new Array,c=this.scale,d=0,f=new u.Color,v=new u.Color,m=0,x=n.readInt(!0);m<x;m++)for(var T=n.readInt(!0),y=0,E=n.readInt(!0);y<E;y++){var w=n.readByte(),R=n.readInt(!0);switch(w){case s.SLOT_ATTACHMENT:(b=new u.AttachmentTimeline(R)).slotIndex=T;for(var C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readStringRef());a.push(b),d=Math.max(d,b.frames[R-1]);break;case s.SLOT_COLOR:for((b=new u.ColorTimeline(R)).slotIndex=T,C=0;C<R;C++){var A=n.readFloat();u.Color.rgba8888ToColor(f,n.readInt32()),b.setFrame(C,A,f.r,f.g,f.b,f.a),C<R-1&&this.readCurve(n,C,b)}a.push(b),d=Math.max(d,b.frames[(R-1)*u.ColorTimeline.ENTRIES]);break;case s.SLOT_TWO_COLOR:for((b=new u.TwoColorTimeline(R)).slotIndex=T,C=0;C<R;C++)A=n.readFloat(),u.Color.rgba8888ToColor(f,n.readInt32()),u.Color.rgb888ToColor(v,n.readInt32()),b.setFrame(C,A,f.r,f.g,f.b,f.a,v.r,v.g,v.b),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.TwoColorTimeline.ENTRIES])}}for(m=0,x=n.readInt(!0);m<x;m++){var S=n.readInt(!0);for(y=0,E=n.readInt(!0);y<E;y++)switch(w=n.readByte(),R=n.readInt(!0),w){case s.BONE_ROTATE:for((b=new u.RotateTimeline(R)).boneIndex=S,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat()),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.RotateTimeline.ENTRIES]);break;case s.BONE_TRANSLATE:case s.BONE_SCALE:case s.BONE_SHEAR:var b=void 0,_=1;for(w==s.BONE_SCALE?b=new u.ScaleTimeline(R):w==s.BONE_SHEAR?b=new u.ShearTimeline(R):(b=new u.TranslateTimeline(R),_=c),b.boneIndex=S,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat()*_,n.readFloat()*_),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.TranslateTimeline.ENTRIES])}}for(m=0,x=n.readInt(!0);m<x;m++){var P=n.readInt(!0);for(R=n.readInt(!0),(b=new u.IkConstraintTimeline(R)).ikConstraintIndex=P,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat(),n.readFloat()*c,n.readByte(),n.readBoolean(),n.readBoolean()),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.IkConstraintTimeline.ENTRIES])}for(m=0,x=n.readInt(!0);m<x;m++){for(P=n.readInt(!0),R=n.readInt(!0),(b=new u.TransformConstraintTimeline(R)).transformConstraintIndex=P,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat()),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.TransformConstraintTimeline.ENTRIES])}for(m=0,x=n.readInt(!0);m<x;m++){P=n.readInt(!0);var D=h.pathConstraints[P];for(y=0,E=n.readInt(!0);y<E;y++)switch(w=n.readByte(),R=n.readInt(!0),w){case s.PATH_POSITION:case s.PATH_SPACING:for(b=void 0,_=1,w==s.PATH_SPACING?(b=new u.PathConstraintSpacingTimeline(R),D.spacingMode!=u.SpacingMode.Length&&D.spacingMode!=u.SpacingMode.Fixed||(_=c)):(b=new u.PathConstraintPositionTimeline(R),D.positionMode==u.PositionMode.Fixed&&(_=c)),b.pathConstraintIndex=P,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat()*_),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.PathConstraintPositionTimeline.ENTRIES]);break;case s.PATH_MIX:for((b=new u.PathConstraintMixTimeline(R)).pathConstraintIndex=P,C=0;C<R;C++)b.setFrame(C,n.readFloat(),n.readFloat(),n.readFloat()),C<R-1&&this.readCurve(n,C,b);a.push(b),d=Math.max(d,b.frames[(R-1)*u.PathConstraintMixTimeline.ENTRIES])}}for(m=0,x=n.readInt(!0);m<x;m++){var O=h.skins[n.readInt(!0)];for(y=0,E=n.readInt(!0);y<E;y++){T=n.readInt(!0);for(var F=0,N=n.readInt(!0);F<N;F++){var k=O.getAttachment(T,n.readStringRef()),L=k.bones!=null,U=k.vertices,Y=L?U.length/3*2:U.length;for(R=n.readInt(!0),(b=new u.DeformTimeline(R)).slotIndex=T,b.attachment=k,C=0;C<R;C++){A=n.readFloat();var B=void 0,W=n.readInt(!0);if(W==0)B=L?u.Utils.newFloatArray(Y):U;else{B=u.Utils.newFloatArray(Y);var G=n.readInt(!0);if(W+=G,c==1)for(var X=G;X<W;X++)B[X]=n.readFloat();else for(X=G;X<W;X++)B[X]=n.readFloat()*c;if(!L){X=0;for(var q=B.length;X<q;X++)B[X]+=U[X]}}b.setFrame(C,A,B),C<R-1&&this.readCurve(n,C,b)}a.push(b),d=Math.max(d,b.frames[R-1])}}}var j=n.readInt(!0);if(j>0){b=new u.DrawOrderTimeline(j);var V=h.slots.length;for(m=0;m<j;m++){A=n.readFloat();var K=n.readInt(!0),H=u.Utils.newArray(V,0);for(y=V-1;y>=0;y--)H[y]=-1;var Z=u.Utils.newArray(V-K,0),Q=0,J=0;for(y=0;y<K;y++){for(T=n.readInt(!0);Q!=T;)Z[J++]=Q++;H[Q+n.readInt(!0)]=Q++}for(;Q<V;)Z[J++]=Q++;for(y=V-1;y>=0;y--)H[y]==-1&&(H[y]=Z[--J]);b.setFrame(m,A,H)}a.push(b),d=Math.max(d,b.frames[j-1])}var et=n.readInt(!0);if(et>0){for(b=new u.EventTimeline(et),m=0;m<et;m++){A=n.readFloat();var $=h.events[n.readInt(!0)],tt=new u.Event(A,$);tt.intValue=n.readInt(!1),tt.floatValue=n.readFloat(),tt.stringValue=n.readBoolean()?n.readString():$.stringValue,tt.data.audioPath!=null&&(tt.volume=n.readFloat(),tt.balance=n.readFloat()),b.setFrame(m,tt)}a.push(b),d=Math.max(d,b.frames[et-1])}return new u.Animation(r,a,d)},s.prototype.readCurve=function(n,r,h){switch(n.readByte()){case s.CURVE_STEPPED:h.setStepped(r);break;case s.CURVE_BEZIER:this.setCurve(h,r,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat())}},s.prototype.setCurve=function(n,r,h,a,c,d){n.setCurve(r,h,a,c,d)},s.AttachmentTypeValues=[0,1,2,3,4,5,6],s.TransformModeValues=[u.TransformMode.Normal,u.TransformMode.OnlyTranslation,u.TransformMode.NoRotationOrReflection,u.TransformMode.NoScale,u.TransformMode.NoScaleOrReflection],s.PositionModeValues=[u.PositionMode.Fixed,u.PositionMode.Percent],s.SpacingModeValues=[u.SpacingMode.Length,u.SpacingMode.Fixed,u.SpacingMode.Percent],s.RotateModeValues=[u.RotateMode.Tangent,u.RotateMode.Chain,u.RotateMode.ChainScale],s.BlendModeValues=[u.BlendMode.Normal,u.BlendMode.Additive,u.BlendMode.Multiply,u.BlendMode.Screen],s.BONE_ROTATE=0,s.BONE_TRANSLATE=1,s.BONE_SCALE=2,s.BONE_SHEAR=3,s.SLOT_ATTACHMENT=0,s.SLOT_COLOR=1,s.SLOT_TWO_COLOR=2,s.PATH_POSITION=0,s.PATH_SPACING=1,s.PATH_MIX=2,s.CURVE_LINEAR=0,s.CURVE_STEPPED=1,s.CURVE_BEZIER=2,s}();u.SkeletonBinary=e;var l=function(){function s(n,r,h,a){r===void 0&&(r=new Array),h===void 0&&(h=0),a===void 0&&(a=new DataView(n.buffer)),this.strings=r,this.index=h,this.buffer=a}return s.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},s.prototype.readShort=function(){var n=this.buffer.getInt16(this.index);return this.index+=2,n},s.prototype.readInt32=function(){var n=this.buffer.getInt32(this.index);return this.index+=4,n},s.prototype.readInt=function(n){var r=this.readByte(),h=127&r;return 128&r&&(h|=(127&(r=this.readByte()))<<7,128&r&&(h|=(127&(r=this.readByte()))<<14,128&r&&(h|=(127&(r=this.readByte()))<<21,128&r&&(h|=(127&(r=this.readByte()))<<28)))),n?h:h>>>1^-(1&h)},s.prototype.readStringRef=function(){var n=this.readInt(!0);return n==0?null:this.strings[n-1]},s.prototype.readString=function(){var n=this.readInt(!0);switch(n){case 0:return null;case 1:return""}n--;for(var r="",h=0;h<n;){var a=this.readByte();switch(a>>4){case 12:case 13:r+=String.fromCharCode((31&a)<<6|63&this.readByte()),h+=2;break;case 14:r+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),h+=3;break;default:r+=String.fromCharCode(a),h++}}return r},s.prototype.readFloat=function(){var n=this.buffer.getFloat32(this.index);return this.index+=4,n},s.prototype.readBoolean=function(){return this.readByte()!=0},s}(),o=function(s,n,r,h,a){this.mesh=s,this.skin=n,this.slotIndex=r,this.parent=h,this.inheritDeform=a},t=function(s,n){s===void 0&&(s=null),n===void 0&&(n=null),this.bones=s,this.vertices=n}}(p||(p={})),function(u){var e=function(){function l(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new u.Pool(function(){return u.Utils.newFloatArray(16)})}return l.prototype.update=function(o,t){if(o==null)throw new Error("skeleton cannot be null.");var s=this.boundingBoxes,n=this.polygons,r=this.polygonPool,h=o.slots,a=h.length;s.length=0,r.freeAll(n),n.length=0;for(var c=0;c<a;c++){var d=h[c];if(d.bone.active){var f=d.getAttachment();if(f instanceof u.BoundingBoxAttachment){var v=f;s.push(v);var m=r.obtain();m.length!=v.worldVerticesLength&&(m=u.Utils.newFloatArray(v.worldVerticesLength)),n.push(m),v.computeWorldVertices(d,0,v.worldVerticesLength,m,0,2)}}}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},l.prototype.aabbCompute=function(){for(var o=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,h=0,a=r.length;h<a;h++)for(var c=r[h],d=c,f=0,v=c.length;f<v;f+=2){var m=d[f],x=d[f+1];o=Math.min(o,m),t=Math.min(t,x),s=Math.max(s,m),n=Math.max(n,x)}this.minX=o,this.minY=t,this.maxX=s,this.maxY=n},l.prototype.aabbContainsPoint=function(o,t){return o>=this.minX&&o<=this.maxX&&t>=this.minY&&t<=this.maxY},l.prototype.aabbIntersectsSegment=function(o,t,s,n){var r=this.minX,h=this.minY,a=this.maxX,c=this.maxY;if(o<=r&&s<=r||t<=h&&n<=h||o>=a&&s>=a||t>=c&&n>=c)return!1;var d=(n-t)/(s-o),f=d*(r-o)+t;if(f>h&&f<c||(f=d*(a-o)+t)>h&&f<c)return!0;var v=(h-t)/d+o;return v>r&&v<a||(v=(c-t)/d+o)>r&&v<a},l.prototype.aabbIntersectsSkeleton=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},l.prototype.containsPoint=function(o,t){for(var s=this.polygons,n=0,r=s.length;n<r;n++)if(this.containsPointPolygon(s[n],o,t))return this.boundingBoxes[n];return null},l.prototype.containsPointPolygon=function(o,t,s){for(var n=o,r=o.length,h=r-2,a=!1,c=0;c<r;c+=2){var d=n[c+1],f=n[h+1];if(d<s&&f>=s||f<s&&d>=s){var v=n[c];v+(s-d)/(f-d)*(n[h]-v)<t&&(a=!a)}h=c}return a},l.prototype.intersectsSegment=function(o,t,s,n){for(var r=this.polygons,h=0,a=r.length;h<a;h++)if(this.intersectsSegmentPolygon(r[h],o,t,s,n))return this.boundingBoxes[h];return null},l.prototype.intersectsSegmentPolygon=function(o,t,s,n,r){for(var h=o,a=o.length,c=t-n,d=s-r,f=t*r-s*n,v=h[a-2],m=h[a-1],x=0;x<a;x+=2){var T=h[x],y=h[x+1],E=v*y-m*T,w=v-T,R=m-y,C=c*R-d*w,A=(f*w-c*E)/C;if((A>=v&&A<=T||A>=T&&A<=v)&&(A>=t&&A<=n||A>=n&&A<=t)){var S=(f*R-d*E)/C;if((S>=m&&S<=y||S>=y&&S<=m)&&(S>=s&&S<=r||S>=r&&S<=s))return!0}v=T,m=y}return!1},l.prototype.getPolygon=function(o){if(o==null)throw new Error("boundingBox cannot be null.");var t=this.boundingBoxes.indexOf(o);return t==-1?null:this.polygons[t]},l.prototype.getWidth=function(){return this.maxX-this.minX},l.prototype.getHeight=function(){return this.maxY-this.minY},l}();u.SkeletonBounds=e}(p||(p={})),function(u){var e=function(){function l(){this.triangulator=new u.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return l.prototype.clipStart=function(o,t){if(this.clipAttachment!=null)return 0;this.clipAttachment=t;var s=t.worldVerticesLength,n=u.Utils.setArraySize(this.clippingPolygon,s);t.computeWorldVertices(o,0,s,n,0,2);var r=this.clippingPolygon;l.makeClockwise(r);for(var h=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r)),a=0,c=h.length;a<c;a++){var d=h[a];l.makeClockwise(d),d.push(d[0]),d.push(d[1])}return h.length},l.prototype.clipEndWithSlot=function(o){this.clipAttachment!=null&&this.clipAttachment.endSlot==o.data&&this.clipEnd()},l.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return this.clipAttachment!=null},l.prototype.clipTriangles=function(o,t,s,n,r,h,a,c){var d=this.clipOutput,f=this.clippedVertices,v=this.clippedTriangles,m=this.clippingPolygons,x=this.clippingPolygons.length,T=c?12:8,y=0;f.length=0,v.length=0;t:for(var E=0;E<n;E+=3)for(var w=s[E]<<1,R=o[w],C=o[w+1],A=r[w],S=r[w+1],b=o[w=s[E+1]<<1],_=o[w+1],P=r[w],D=r[w+1],O=o[w=s[E+2]<<1],F=o[w+1],N=r[w],k=r[w+1],L=0;L<x;L++){var U=f.length;if(!this.clip(R,C,b,_,O,F,m[L],d)){(K=u.Utils.setArraySize(f,U+3*T))[U]=R,K[U+1]=C,K[U+2]=h.r,K[U+3]=h.g,K[U+4]=h.b,K[U+5]=h.a,c?(K[U+6]=A,K[U+7]=S,K[U+8]=a.r,K[U+9]=a.g,K[U+10]=a.b,K[U+11]=a.a,K[U+12]=b,K[U+13]=_,K[U+14]=h.r,K[U+15]=h.g,K[U+16]=h.b,K[U+17]=h.a,K[U+18]=P,K[U+19]=D,K[U+20]=a.r,K[U+21]=a.g,K[U+22]=a.b,K[U+23]=a.a,K[U+24]=O,K[U+25]=F,K[U+26]=h.r,K[U+27]=h.g,K[U+28]=h.b,K[U+29]=h.a,K[U+30]=N,K[U+31]=k,K[U+32]=a.r,K[U+33]=a.g,K[U+34]=a.b,K[U+35]=a.a):(K[U+6]=A,K[U+7]=S,K[U+8]=b,K[U+9]=_,K[U+10]=h.r,K[U+11]=h.g,K[U+12]=h.b,K[U+13]=h.a,K[U+14]=P,K[U+15]=D,K[U+16]=O,K[U+17]=F,K[U+18]=h.r,K[U+19]=h.g,K[U+20]=h.b,K[U+21]=h.a,K[U+22]=N,K[U+23]=k),U=v.length,(nt=u.Utils.setArraySize(v,U+3))[U]=y,nt[U+1]=y+1,nt[U+2]=y+2,y+=3;continue t}var Y=d.length;if(Y!=0){for(var B=_-F,W=O-b,G=R-O,X=F-C,q=1/(B*G+W*(C-F)),j=Y>>1,V=this.clipOutput,K=u.Utils.setArraySize(f,U+j*T),H=0;H<Y;H+=2){var Z=V[H],Q=V[H+1];K[U]=Z,K[U+1]=Q,K[U+2]=h.r,K[U+3]=h.g,K[U+4]=h.b,K[U+5]=h.a;var J=Z-O,et=Q-F,$=(B*J+W*et)*q,tt=(X*J+G*et)*q,it=1-$-tt;K[U+6]=A*$+P*tt+N*it,K[U+7]=S*$+D*tt+k*it,c&&(K[U+8]=a.r,K[U+9]=a.g,K[U+10]=a.b,K[U+11]=a.a),U+=T}U=v.length;var nt=u.Utils.setArraySize(v,U+3*(j-2));for(j--,H=1;H<j;H++)nt[U]=y,nt[U+1]=y+H,nt[U+2]=y+H+1,U+=3;y+=j+1}}},l.prototype.clip=function(o,t,s,n,r,h,a,c){var d=c,f=!1,v=null;a.length%4>=2?(v=c,c=this.scratch):v=this.scratch,v.length=0,v.push(o),v.push(t),v.push(s),v.push(n),v.push(r),v.push(h),v.push(o),v.push(t),c.length=0;for(var m=a,x=a.length-4,T=0;;T+=2){for(var y=m[T],E=m[T+1],w=m[T+2],R=m[T+3],C=y-w,A=E-R,S=v,b=v.length-2,_=c.length,P=0;P<b;P+=2){var D=S[P],O=S[P+1],F=S[P+2],N=S[P+3],k=C*(N-R)-A*(F-w)>0;if(C*(O-R)-A*(D-w)>0){if(k){c.push(F),c.push(N);continue}var L=(Y=N-O)*(w-y)-(B=F-D)*(R-E);if(Math.abs(L)>1e-6){var U=(B*(E-O)-Y*(y-D))/L;c.push(y+(w-y)*U),c.push(E+(R-E)*U)}else c.push(y),c.push(E)}else if(k){var Y,B;L=(Y=N-O)*(w-y)-(B=F-D)*(R-E),Math.abs(L)>1e-6?(U=(B*(E-O)-Y*(y-D))/L,c.push(y+(w-y)*U),c.push(E+(R-E)*U)):(c.push(y),c.push(E)),c.push(F),c.push(N)}f=!0}if(_==c.length)return d.length=0,!0;if(c.push(c[0]),c.push(c[1]),T==x)break;var W=c;(c=v).length=0,v=W}if(d!=c){d.length=0,T=0;for(var G=c.length-2;T<G;T++)d[T]=c[T]}else d.length=d.length-2;return f},l.makeClockwise=function(o){for(var t=o,s=o.length,n=t[s-2]*t[1]-t[0]*t[s-1],r=0,h=0,a=0,c=0,d=s-3;c<d;c+=2)r=t[c],h=t[c+1],a=t[c+2],n+=r*t[c+3]-a*h;if(!(n<0)){c=0;var f=s-2;for(d=s>>1;c<d;c+=2){var v=t[c],m=t[c+1],x=f-c;t[c]=t[x],t[c+1]=t[x+1],t[x]=v,t[x+1]=m}}},l}();u.SkeletonClipping=e}(p||(p={})),function(u){var e=function(){function l(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return l.prototype.findBone=function(o){if(o==null)throw new Error("boneName cannot be null.");for(var t=this.bones,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findBoneIndex=function(o){if(o==null)throw new Error("boneName cannot be null.");for(var t=this.bones,s=0,n=t.length;s<n;s++)if(t[s].name==o)return s;return-1},l.prototype.findSlot=function(o){if(o==null)throw new Error("slotName cannot be null.");for(var t=this.slots,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findSlotIndex=function(o){if(o==null)throw new Error("slotName cannot be null.");for(var t=this.slots,s=0,n=t.length;s<n;s++)if(t[s].name==o)return s;return-1},l.prototype.findSkin=function(o){if(o==null)throw new Error("skinName cannot be null.");for(var t=this.skins,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findEvent=function(o){if(o==null)throw new Error("eventDataName cannot be null.");for(var t=this.events,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findAnimation=function(o){if(o==null)throw new Error("animationName cannot be null.");for(var t=this.animations,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findIkConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findTransformConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findPathConstraint=function(o){if(o==null)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,s=0,n=t.length;s<n;s++){var r=t[s];if(r.name==o)return r}return null},l.prototype.findPathConstraintIndex=function(o){if(o==null)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,s=0,n=t.length;s<n;s++)if(t[s].name==o)return s;return-1},l}();u.SkeletonData=e}(p||(p={})),function(u){var e=function(){function o(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return o.prototype.readSkeletonData=function(t){var s=this.scale,n=new u.SkeletonData,r=typeof t=="string"?JSON.parse(t):t,h=r.skeleton;if(h!=null){if(n.hash=h.hash,n.version=h.spine,n.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");n.x=h.x,n.y=h.y,n.width=h.width,n.height=h.height,n.fps=h.fps,n.imagesPath=h.images}if(r.bones)for(var a=0;a<r.bones.length;a++){var c=r.bones[a],d=null,f=this.getValue(c,"parent",null);if(f!=null&&(d=n.findBone(f))==null)throw new Error("Parent bone not found: "+f);(T=new u.BoneData(n.bones.length,c.name,d)).length=this.getValue(c,"length",0)*s,T.x=this.getValue(c,"x",0)*s,T.y=this.getValue(c,"y",0)*s,T.rotation=this.getValue(c,"rotation",0),T.scaleX=this.getValue(c,"scaleX",1),T.scaleY=this.getValue(c,"scaleY",1),T.shearX=this.getValue(c,"shearX",0),T.shearY=this.getValue(c,"shearY",0),T.transformMode=o.transformModeFromString(this.getValue(c,"transform","normal")),T.skinRequired=this.getValue(c,"skin",!1),n.bones.push(T)}if(r.slots)for(a=0;a<r.slots.length;a++){var v=(O=r.slots[a]).name,m=O.bone,x=n.findBone(m);if(x==null)throw new Error("Slot bone not found: "+m);var T=new u.SlotData(n.slots.length,v,x),y=this.getValue(O,"color",null);y!=null&&T.color.setFromString(y);var E=this.getValue(O,"dark",null);E!=null&&(T.darkColor=new u.Color(1,1,1,1),T.darkColor.setFromString(E)),T.attachmentName=this.getValue(O,"attachment",null),T.blendMode=o.blendModeFromString(this.getValue(O,"blend","normal")),n.slots.push(T)}if(r.ik)for(a=0;a<r.ik.length;a++){var w=r.ik[a];(T=new u.IkConstraintData(w.name)).order=this.getValue(w,"order",0),T.skinRequired=this.getValue(w,"skin",!1);for(var R=0;R<w.bones.length;R++){if(m=w.bones[R],(_=n.findBone(m))==null)throw new Error("IK bone not found: "+m);T.bones.push(_)}var C=w.target;if(T.target=n.findBone(C),T.target==null)throw new Error("IK target bone not found: "+C);T.mix=this.getValue(w,"mix",1),T.softness=this.getValue(w,"softness",0)*s,T.bendDirection=this.getValue(w,"bendPositive",!0)?1:-1,T.compress=this.getValue(w,"compress",!1),T.stretch=this.getValue(w,"stretch",!1),T.uniform=this.getValue(w,"uniform",!1),n.ikConstraints.push(T)}if(r.transform)for(a=0;a<r.transform.length;a++){for(w=r.transform[a],(T=new u.TransformConstraintData(w.name)).order=this.getValue(w,"order",0),T.skinRequired=this.getValue(w,"skin",!1),R=0;R<w.bones.length;R++){if(m=w.bones[R],(_=n.findBone(m))==null)throw new Error("Transform constraint bone not found: "+m);T.bones.push(_)}if(C=w.target,T.target=n.findBone(C),T.target==null)throw new Error("Transform constraint target bone not found: "+C);T.local=this.getValue(w,"local",!1),T.relative=this.getValue(w,"relative",!1),T.offsetRotation=this.getValue(w,"rotation",0),T.offsetX=this.getValue(w,"x",0)*s,T.offsetY=this.getValue(w,"y",0)*s,T.offsetScaleX=this.getValue(w,"scaleX",0),T.offsetScaleY=this.getValue(w,"scaleY",0),T.offsetShearY=this.getValue(w,"shearY",0),T.rotateMix=this.getValue(w,"rotateMix",1),T.translateMix=this.getValue(w,"translateMix",1),T.scaleMix=this.getValue(w,"scaleMix",1),T.shearMix=this.getValue(w,"shearMix",1),n.transformConstraints.push(T)}if(r.path)for(a=0;a<r.path.length;a++){for(w=r.path[a],(T=new u.PathConstraintData(w.name)).order=this.getValue(w,"order",0),T.skinRequired=this.getValue(w,"skin",!1),R=0;R<w.bones.length;R++){if(m=w.bones[R],(_=n.findBone(m))==null)throw new Error("Transform constraint bone not found: "+m);T.bones.push(_)}if(C=w.target,T.target=n.findSlot(C),T.target==null)throw new Error("Path target slot not found: "+C);T.positionMode=o.positionModeFromString(this.getValue(w,"positionMode","percent")),T.spacingMode=o.spacingModeFromString(this.getValue(w,"spacingMode","length")),T.rotateMode=o.rotateModeFromString(this.getValue(w,"rotateMode","tangent")),T.offsetRotation=this.getValue(w,"rotation",0),T.position=this.getValue(w,"position",0),T.positionMode==u.PositionMode.Fixed&&(T.position*=s),T.spacing=this.getValue(w,"spacing",0),T.spacingMode!=u.SpacingMode.Length&&T.spacingMode!=u.SpacingMode.Fixed||(T.spacing*=s),T.rotateMix=this.getValue(w,"rotateMix",1),T.translateMix=this.getValue(w,"translateMix",1),n.pathConstraints.push(T)}if(r.skins)for(a=0;a<r.skins.length;a++){var A=r.skins[a],S=new u.Skin(A.name);if(A.bones)for(var b=0;b<A.bones.length;b++){var _;if((_=n.findBone(A.bones[b]))==null)throw new Error("Skin bone not found: "+A.bones[a]);S.bones.push(_)}if(A.ik)for(b=0;b<A.ik.length;b++){if((P=n.findIkConstraint(A.ik[b]))==null)throw new Error("Skin IK constraint not found: "+A.ik[a]);S.constraints.push(P)}if(A.transform)for(b=0;b<A.transform.length;b++){if((P=n.findTransformConstraint(A.transform[b]))==null)throw new Error("Skin transform constraint not found: "+A.transform[a]);S.constraints.push(P)}if(A.path)for(b=0;b<A.path.length;b++){var P;if((P=n.findPathConstraint(A.path[b]))==null)throw new Error("Skin path constraint not found: "+A.path[a]);S.constraints.push(P)}for(var v in A.attachments){var D=n.findSlot(v);if(D==null)throw new Error("Slot not found: "+v);var O=A.attachments[v];for(var F in O){var N=this.readAttachment(O[F],S,D.index,F,n);N!=null&&S.setAttachment(D.index,F,N)}}n.skins.push(S),S.name=="default"&&(n.defaultSkin=S)}a=0;for(var k=this.linkedMeshes.length;a<k;a++){var L=this.linkedMeshes[a];if((S=L.skin==null?n.defaultSkin:n.findSkin(L.skin))==null)throw new Error("Skin not found: "+L.skin);var U=S.getAttachment(L.slotIndex,L.parent);if(U==null)throw new Error("Parent mesh not found: "+L.parent);L.mesh.deformAttachment=L.inheritDeform?U:L.mesh,L.mesh.setParentMesh(U),L.mesh.updateUVs()}if(this.linkedMeshes.length=0,r.events)for(var Y in r.events){var B=r.events[Y];(T=new u.EventData(Y)).intValue=this.getValue(B,"int",0),T.floatValue=this.getValue(B,"float",0),T.stringValue=this.getValue(B,"string",""),T.audioPath=this.getValue(B,"audio",null),T.audioPath!=null&&(T.volume=this.getValue(B,"volume",1),T.balance=this.getValue(B,"balance",0)),n.events.push(T)}if(r.animations)for(var W in r.animations){var G=r.animations[W];this.readAnimation(G,W,n)}return n},o.prototype.readAttachment=function(t,s,n,r,h){var a=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var c=this.getValue(t,"path",r),d=this.attachmentLoader.newRegionAttachment(s,r,c);return d==null?null:(d.path=c,d.x=this.getValue(t,"x",0)*a,d.y=this.getValue(t,"y",0)*a,d.scaleX=this.getValue(t,"scaleX",1),d.scaleY=this.getValue(t,"scaleY",1),d.rotation=this.getValue(t,"rotation",0),d.width=t.width*a,d.height=t.height*a,(C=this.getValue(t,"color",null))!=null&&d.color.setFromString(C),d.updateOffset(),d);case"boundingbox":var f=this.attachmentLoader.newBoundingBoxAttachment(s,r);return f==null?null:(this.readVertices(t,f,t.vertexCount<<1),(C=this.getValue(t,"color",null))!=null&&f.color.setFromString(C),f);case"mesh":case"linkedmesh":c=this.getValue(t,"path",r);var v=this.attachmentLoader.newMeshAttachment(s,r,c);if(v==null)return null;v.path=c,(C=this.getValue(t,"color",null))!=null&&v.color.setFromString(C),v.width=this.getValue(t,"width",0)*a,v.height=this.getValue(t,"height",0)*a;var m=this.getValue(t,"parent",null);if(m!=null)return this.linkedMeshes.push(new l(v,this.getValue(t,"skin",null),n,m,this.getValue(t,"deform",!0))),v;var x=t.uvs;return this.readVertices(t,v,x.length),v.triangles=t.triangles,v.regionUVs=x,v.updateUVs(),v.edges=this.getValue(t,"edges",null),v.hullLength=2*this.getValue(t,"hull",0),v;case"path":if((c=this.attachmentLoader.newPathAttachment(s,r))==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var T=t.vertexCount;this.readVertices(t,c,T<<1);for(var y=u.Utils.newArray(T/3,0),E=0;E<t.lengths.length;E++)y[E]=t.lengths[E]*a;return c.lengths=y,(C=this.getValue(t,"color",null))!=null&&c.color.setFromString(C),c;case"point":var w=this.attachmentLoader.newPointAttachment(s,r);return w==null?null:(w.x=this.getValue(t,"x",0)*a,w.y=this.getValue(t,"y",0)*a,w.rotation=this.getValue(t,"rotation",0),(C=this.getValue(t,"color",null))!=null&&w.color.setFromString(C),w);case"clipping":var R=this.attachmentLoader.newClippingAttachment(s,r);if(R==null)return null;var C,A=this.getValue(t,"end",null);if(A!=null){var S=h.findSlot(A);if(S==null)throw new Error("Clipping end slot not found: "+A);R.endSlot=S}return T=t.vertexCount,this.readVertices(t,R,T<<1),(C=this.getValue(t,"color",null))!=null&&R.color.setFromString(C),R}return null},o.prototype.readVertices=function(t,s,n){var r=this.scale;s.worldVerticesLength=n;var h=t.vertices;if(n!=h.length){var a=new Array,c=new Array;for(m=0,x=h.length;m<x;){var d=h[m++];c.push(d);for(var f=m+4*d;m<f;m+=4)c.push(h[m]),a.push(h[m+1]*r),a.push(h[m+2]*r),a.push(h[m+3])}s.bones=c,s.vertices=u.Utils.toFloatArray(a)}else{var v=u.Utils.toFloatArray(h);if(r!=1)for(var m=0,x=h.length;m<x;m++)v[m]*=r;s.vertices=v}},o.prototype.readAnimation=function(t,s,n){var r=this.scale,h=new Array,a=0;if(t.slots)for(var c in t.slots){var d=t.slots[c];if((st=n.findSlotIndex(c))==-1)throw new Error("Slot not found: "+c);for(var f in d){var v=d[f];if(f=="attachment"){(S=new u.AttachmentTimeline(v.length)).slotIndex=st;for(var m=0,x=0;x<v.length;x++){var T=v[x];S.setFrame(m++,this.getValue(T,"time",0),T.name)}h.push(S),a=Math.max(a,S.frames[S.getFrameCount()-1])}else if(f=="color"){for((S=new u.ColorTimeline(v.length)).slotIndex=st,m=0,x=0;x<v.length;x++){T=v[x];var y=new u.Color;y.setFromString(T.color),S.setFrame(m,this.getValue(T,"time",0),y.r,y.g,y.b,y.a),this.readCurve(T,S,m),m++}h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.ColorTimeline.ENTRIES])}else{if(f!="twoColor")throw new Error("Invalid timeline type for a slot: "+f+" ("+c+")");for((S=new u.TwoColorTimeline(v.length)).slotIndex=st,m=0,x=0;x<v.length;x++){T=v[x];var E=new u.Color,w=new u.Color;E.setFromString(T.light),w.setFromString(T.dark),S.setFrame(m,this.getValue(T,"time",0),E.r,E.g,E.b,E.a,w.r,w.g,w.b),this.readCurve(T,S,m),m++}h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var R in t.bones){var C=t.bones[R],A=n.findBoneIndex(R);if(A==-1)throw new Error("Bone not found: "+R);for(var f in C)if(v=C[f],f==="rotate"){for((S=new u.RotateTimeline(v.length)).boneIndex=A,m=0,x=0;x<v.length;x++)T=v[x],S.setFrame(m,this.getValue(T,"time",0),this.getValue(T,"angle",0)),this.readCurve(T,S,m),m++;h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.RotateTimeline.ENTRIES])}else{if(f!=="translate"&&f!=="scale"&&f!=="shear")throw new Error("Invalid timeline type for a bone: "+f+" ("+R+")");var S=null,b=1,_=0;for(f==="scale"?(S=new u.ScaleTimeline(v.length),_=1):f==="shear"?S=new u.ShearTimeline(v.length):(S=new u.TranslateTimeline(v.length),b=r),S.boneIndex=A,m=0,x=0;x<v.length;x++){T=v[x];var P=this.getValue(T,"x",_),D=this.getValue(T,"y",_);S.setFrame(m,this.getValue(T,"time",0),P*b,D*b),this.readCurve(T,S,m),m++}h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.TranslateTimeline.ENTRIES])}}if(t.ik)for(var O in t.ik){var F=t.ik[O],N=n.findIkConstraint(O);for((S=new u.IkConstraintTimeline(F.length)).ikConstraintIndex=n.ikConstraints.indexOf(N),m=0,x=0;x<F.length;x++)T=F[x],S.setFrame(m,this.getValue(T,"time",0),this.getValue(T,"mix",1),this.getValue(T,"softness",0)*r,this.getValue(T,"bendPositive",!0)?1:-1,this.getValue(T,"compress",!1),this.getValue(T,"stretch",!1)),this.readCurve(T,S,m),m++;h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var O in t.transform){for(F=t.transform[O],N=n.findTransformConstraint(O),(S=new u.TransformConstraintTimeline(F.length)).transformConstraintIndex=n.transformConstraints.indexOf(N),m=0,x=0;x<F.length;x++)T=F[x],S.setFrame(m,this.getValue(T,"time",0),this.getValue(T,"rotateMix",1),this.getValue(T,"translateMix",1),this.getValue(T,"scaleMix",1),this.getValue(T,"shearMix",1)),this.readCurve(T,S,m),m++;h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.TransformConstraintTimeline.ENTRIES])}if(t.path)for(var O in t.path){F=t.path[O];var k=n.findPathConstraintIndex(O);if(k==-1)throw new Error("Path constraint not found: "+O);var L=n.pathConstraints[k];for(var f in F)if(v=F[f],f==="position"||f==="spacing"){for(S=null,b=1,f==="spacing"?(S=new u.PathConstraintSpacingTimeline(v.length),L.spacingMode!=u.SpacingMode.Length&&L.spacingMode!=u.SpacingMode.Fixed||(b=r)):(S=new u.PathConstraintPositionTimeline(v.length),L.positionMode==u.PositionMode.Fixed&&(b=r)),S.pathConstraintIndex=k,m=0,x=0;x<v.length;x++)T=v[x],S.setFrame(m,this.getValue(T,"time",0),this.getValue(T,f,0)*b),this.readCurve(T,S,m),m++;h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.PathConstraintPositionTimeline.ENTRIES])}else if(f==="mix"){for((S=new u.PathConstraintMixTimeline(v.length)).pathConstraintIndex=k,m=0,x=0;x<v.length;x++)T=v[x],S.setFrame(m,this.getValue(T,"time",0),this.getValue(T,"rotateMix",1),this.getValue(T,"translateMix",1)),this.readCurve(T,S,m),m++;h.push(S),a=Math.max(a,S.frames[(S.getFrameCount()-1)*u.PathConstraintMixTimeline.ENTRIES])}}if(t.deform)for(var U in t.deform){var Y=t.deform[U],B=n.findSkin(U);if(B==null)throw new Error("Skin not found: "+U);for(var c in Y){if(d=Y[c],(st=n.findSlotIndex(c))==-1)throw new Error("Slot not found: "+d.name);for(var f in d){v=d[f];var W=B.getAttachment(st,f);if(W==null)throw new Error("Deform attachment not found: "+v.name);var G=W.bones!=null,X=W.vertices,q=G?X.length/3*2:X.length;(S=new u.DeformTimeline(v.length)).slotIndex=st,S.attachment=W,m=0;for(var j=0;j<v.length;j++){T=v[j];var V=void 0,K=this.getValue(T,"vertices",null);if(K==null)V=G?u.Utils.newFloatArray(q):X;else{V=u.Utils.newFloatArray(q);var H=this.getValue(T,"offset",0);if(u.Utils.arrayCopy(K,0,V,H,K.length),r!=1)for(var Z=(x=H)+K.length;x<Z;x++)V[x]*=r;if(!G)for(x=0;x<q;x++)V[x]+=X[x]}S.setFrame(m,this.getValue(T,"time",0),V),this.readCurve(T,S,m),m++}h.push(S),a=Math.max(a,S.frames[S.getFrameCount()-1])}}}var Q=t.drawOrder;if(Q==null&&(Q=t.draworder),Q!=null){S=new u.DrawOrderTimeline(Q.length);var J=n.slots.length;for(m=0,j=0;j<Q.length;j++){var et=Q[j],$=null,tt=this.getValue(et,"offsets",null);if(tt!=null){$=u.Utils.newArray(J,-1);var it=u.Utils.newArray(J-tt.length,0),nt=0,rt=0;for(x=0;x<tt.length;x++){var st,at=tt[x];if((st=n.findSlotIndex(at.slot))==-1)throw new Error("Slot not found: "+at.slot);for(;nt!=st;)it[rt++]=nt++;$[nt+at.offset]=nt++}for(;nt<J;)it[rt++]=nt++;for(x=J-1;x>=0;x--)$[x]==-1&&($[x]=it[--rt])}S.setFrame(m++,this.getValue(et,"time",0),$)}h.push(S),a=Math.max(a,S.frames[S.getFrameCount()-1])}if(t.events){for(S=new u.EventTimeline(t.events.length),m=0,x=0;x<t.events.length;x++){var ct=t.events[x],ht=n.findEvent(ct.name);if(ht==null)throw new Error("Event not found: "+ct.name);var ut=new u.Event(u.Utils.toSinglePrecision(this.getValue(ct,"time",0)),ht);ut.intValue=this.getValue(ct,"int",ht.intValue),ut.floatValue=this.getValue(ct,"float",ht.floatValue),ut.stringValue=this.getValue(ct,"string",ht.stringValue),ut.data.audioPath!=null&&(ut.volume=this.getValue(ct,"volume",1),ut.balance=this.getValue(ct,"balance",0)),S.setFrame(m++,ut)}h.push(S),a=Math.max(a,S.frames[S.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new u.Animation(s,h,a))},o.prototype.readCurve=function(t,s,n){if(t.hasOwnProperty("curve"))if(t.curve=="stepped")s.setStepped(n);else{var r=t.curve;s.setCurve(n,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},o.prototype.getValue=function(t,s,n){return t[s]!==void 0?t[s]:n},o.blendModeFromString=function(t){if((t=t.toLowerCase())=="normal")return u.BlendMode.Normal;if(t=="additive")return u.BlendMode.Additive;if(t=="multiply")return u.BlendMode.Multiply;if(t=="screen")return u.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},o.positionModeFromString=function(t){if((t=t.toLowerCase())=="fixed")return u.PositionMode.Fixed;if(t=="percent")return u.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},o.spacingModeFromString=function(t){if((t=t.toLowerCase())=="length")return u.SpacingMode.Length;if(t=="fixed")return u.SpacingMode.Fixed;if(t=="percent")return u.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},o.rotateModeFromString=function(t){if((t=t.toLowerCase())=="tangent")return u.RotateMode.Tangent;if(t=="chain")return u.RotateMode.Chain;if(t=="chainscale")return u.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},o.transformModeFromString=function(t){if((t=t.toLowerCase())=="normal")return u.TransformMode.Normal;if(t=="onlytranslation")return u.TransformMode.OnlyTranslation;if(t=="norotationorreflection")return u.TransformMode.NoRotationOrReflection;if(t=="noscale")return u.TransformMode.NoScale;if(t=="noscaleorreflection")return u.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},o}();u.SkeletonJson=e;var l=function(o,t,s,n,r){this.mesh=o,this.skin=t,this.slotIndex=s,this.parent=n,this.inheritDeform=r}}(p||(p={})),function(u){var e=function(o,t,s){this.slotIndex=o,this.name=t,this.attachment=s};u.SkinEntry=e;var l=function(){function o(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return o.prototype.setAttachment=function(t,s,n){if(n==null)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][s]=n},o.prototype.addSkin=function(t){for(var s=0;s<t.bones.length;s++){for(var n=t.bones[s],r=!1,h=0;h<this.bones.length;h++)if(this.bones[h]==n){r=!0;break}r||this.bones.push(n)}for(s=0;s<t.constraints.length;s++){var a=t.constraints[s];for(r=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==a){r=!0;break}r||this.constraints.push(a)}var c=t.getAttachments();for(s=0;s<c.length;s++){var d=c[s];this.setAttachment(d.slotIndex,d.name,d.attachment)}},o.prototype.copySkin=function(t){for(var s=0;s<t.bones.length;s++){for(var n=t.bones[s],r=!1,h=0;h<this.bones.length;h++)if(this.bones[h]==n){r=!0;break}r||this.bones.push(n)}for(s=0;s<t.constraints.length;s++){var a=t.constraints[s];for(r=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==a){r=!0;break}r||this.constraints.push(a)}var c=t.getAttachments();for(s=0;s<c.length;s++){var d=c[s];d.attachment!=null&&(d.attachment instanceof u.MeshAttachment?(d.attachment=d.attachment.newLinkedMesh(),this.setAttachment(d.slotIndex,d.name,d.attachment)):(d.attachment=d.attachment.copy(),this.setAttachment(d.slotIndex,d.name,d.attachment)))}},o.prototype.getAttachment=function(t,s){var n=this.attachments[t];return n?n[s]:null},o.prototype.removeAttachment=function(t,s){var n=this.attachments[t];n&&(n[s]=null)},o.prototype.getAttachments=function(){for(var t=new Array,s=0;s<this.attachments.length;s++){var n=this.attachments[s];if(n)for(var r in n){var h=n[r];h&&t.push(new e(s,r,h))}}return t},o.prototype.getAttachmentsForSlot=function(t,s){var n=this.attachments[t];if(n)for(var r in n){var h=n[r];h&&s.push(new e(t,r,h))}},o.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},o.prototype.attachAll=function(t,s){for(var n=0,r=0;r<t.slots.length;r++){var h=t.slots[r],a=h.getAttachment();if(a&&n<s.attachments.length){var c=s.attachments[n];for(var d in c)if(a==c[d]){var f=this.getAttachment(n,d);f!=null&&h.setAttachment(f);break}}n++}},o}();u.Skin=l}(p||(p={})),function(u){var e=function(){function l(o,t){if(this.deform=new Array,o==null)throw new Error("data cannot be null.");if(t==null)throw new Error("bone cannot be null.");this.data=o,this.bone=t,this.color=new u.Color,this.darkColor=o.darkColor==null?null:new u.Color,this.setToSetupPose()}return l.prototype.getSkeleton=function(){return this.bone.skeleton},l.prototype.getAttachment=function(){return this.attachment},l.prototype.setAttachment=function(o){this.attachment!=o&&(this.attachment=o,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},l.prototype.setAttachmentTime=function(o){this.attachmentTime=this.bone.skeleton.time-o},l.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},l.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},l}();u.Slot=e}(p||(p={})),function(u){u.SlotData=function(e,l,o){if(this.color=new u.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(l==null)throw new Error("name cannot be null.");if(o==null)throw new Error("boneData cannot be null.");this.index=e,this.name=l,this.boneData=o}}(p||(p={})),function(u){var e,l,o=function(){function s(n){this._image=n}return s.prototype.getImage=function(){return this._image},s.filterFromString=function(n){switch(n.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+n)}},s.wrapFromString=function(n){switch(n.toLowerCase()){case"mirroredtepeat":return l.MirroredRepeat;case"clamptoedge":return l.ClampToEdge;case"repeat":return l.Repeat;default:throw new Error("Unknown texture wrap "+n)}},s}();u.Texture=o,function(s){s[s.Nearest=9728]="Nearest",s[s.Linear=9729]="Linear",s[s.MipMap=9987]="MipMap",s[s.MipMapNearestNearest=9984]="MipMapNearestNearest",s[s.MipMapLinearNearest=9985]="MipMapLinearNearest",s[s.MipMapNearestLinear=9986]="MipMapNearestLinear",s[s.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=u.TextureFilter||(u.TextureFilter={})),function(s){s[s.MirroredRepeat=33648]="MirroredRepeat",s[s.ClampToEdge=33071]="ClampToEdge",s[s.Repeat=10497]="Repeat"}(l=u.TextureWrap||(u.TextureWrap={})),u.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};var t=function(s){function n(){return s!==null&&s.apply(this,arguments)||this}return i(n,s),n.prototype.setFilters=function(r,h){},n.prototype.setWraps=function(r,h){},n.prototype.dispose=function(){},n}(o);u.FakeTexture=t}(p||(p={})),function(u){var e=function(){function s(n,r){this.pages=new Array,this.regions=new Array,this.load(n,r)}return s.prototype.load=function(n,r){if(r==null)throw new Error("textureLoader cannot be null.");for(var h=new l(n),a=new Array(4),c=null;;){var d=h.readLine();if(d==null)break;if((d=d.trim()).length==0)c=null;else if(c){var f=new t;f.name=d,f.page=c;var v=h.readValue();v.toLocaleLowerCase()=="true"?f.degrees=90:v.toLocaleLowerCase()=="false"?f.degrees=0:f.degrees=parseFloat(v),f.rotate=f.degrees==90,h.readTuple(a);var m=parseInt(a[0]),x=parseInt(a[1]);h.readTuple(a);var T=parseInt(a[0]),y=parseInt(a[1]);f.u=m/c.width,f.v=x/c.height,f.rotate?(f.u2=(m+y)/c.width,f.v2=(x+T)/c.height):(f.u2=(m+T)/c.width,f.v2=(x+y)/c.height),f.x=m,f.y=x,f.width=Math.abs(T),f.height=Math.abs(y),h.readTuple(a)==4&&h.readTuple(a)==4&&h.readTuple(a),f.originalWidth=parseInt(a[0]),f.originalHeight=parseInt(a[1]),h.readTuple(a),f.offsetX=parseInt(a[0]),f.offsetY=parseInt(a[1]),f.index=parseInt(h.readValue()),f.texture=c.texture,this.regions.push(f)}else{(c=new o).name=d,h.readTuple(a)==2&&(c.width=parseInt(a[0]),c.height=parseInt(a[1]),h.readTuple(a)),h.readTuple(a),c.minFilter=u.Texture.filterFromString(a[0]),c.magFilter=u.Texture.filterFromString(a[1]);var E=h.readValue();c.uWrap=u.TextureWrap.ClampToEdge,c.vWrap=u.TextureWrap.ClampToEdge,E=="x"?c.uWrap=u.TextureWrap.Repeat:E=="y"?c.vWrap=u.TextureWrap.Repeat:E=="xy"&&(c.uWrap=c.vWrap=u.TextureWrap.Repeat),c.texture=r(d),c.texture.setFilters(c.minFilter,c.magFilter),c.texture.setWraps(c.uWrap,c.vWrap),c.width=c.texture.getImage().width,c.height=c.texture.getImage().height,this.pages.push(c)}}},s.prototype.findRegion=function(n){for(var r=0;r<this.regions.length;r++)if(this.regions[r].name==n)return this.regions[r];return null},s.prototype.dispose=function(){for(var n=0;n<this.pages.length;n++)this.pages[n].texture.dispose()},s}();u.TextureAtlas=e;var l=function(){function s(n){this.index=0,this.lines=n.split(/\r\n|\r|\n/)}return s.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},s.prototype.readValue=function(){var n=this.readLine(),r=n.indexOf(":");if(r==-1)throw new Error("Invalid line: "+n);return n.substring(r+1).trim()},s.prototype.readTuple=function(n){var r=this.readLine(),h=r.indexOf(":");if(h==-1)throw new Error("Invalid line: "+r);for(var a=0,c=h+1;a<3;a++){var d=r.indexOf(",",c);if(d==-1)break;n[a]=r.substr(c,d-c).trim(),c=d+1}return n[a]=r.substring(c).trim(),a+1},s}(),o=function(){};u.TextureAtlasPage=o;var t=function(s){function n(){return s!==null&&s.apply(this,arguments)||this}return i(n,s),n}(u.TextureRegion);u.TextureAtlasRegion=t}(p||(p={})),function(u){var e=function(){function l(o,t){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new u.Vector2,this.active=!1,o==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=o,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix,this.scaleMix=o.scaleMix,this.shearMix=o.shearMix,this.bones=new Array;for(var s=0;s<o.bones.length;s++)this.bones.push(t.findBone(o.bones[s].name));this.target=t.findBone(o.target.name)}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update()},l.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},l.prototype.applyAbsoluteWorld=function(){for(var o=this.rotateMix,t=this.translateMix,s=this.scaleMix,n=this.shearMix,r=this.target,h=r.a,a=r.b,c=r.c,d=r.d,f=h*d-a*c>0?u.MathUtils.degRad:-u.MathUtils.degRad,v=this.data.offsetRotation*f,m=this.data.offsetShearY*f,x=this.bones,T=0,y=x.length;T<y;T++){var E=x[T],w=!1;if(o!=0){var R=E.a,C=E.b,A=E.c,S=E.d;(F=Math.atan2(c,h)-Math.atan2(A,R)+v)>u.MathUtils.PI?F-=u.MathUtils.PI2:F<-u.MathUtils.PI&&(F+=u.MathUtils.PI2),F*=o;var b=Math.cos(F),_=Math.sin(F);E.a=b*R-_*A,E.b=b*C-_*S,E.c=_*R+b*A,E.d=_*C+b*S,w=!0}if(t!=0){var P=this.temp;r.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),E.worldX+=(P.x-E.worldX)*t,E.worldY+=(P.y-E.worldY)*t,w=!0}if(s>0){var D=Math.sqrt(E.a*E.a+E.c*E.c),O=Math.sqrt(h*h+c*c);D>1e-5&&(D=(D+(O-D+this.data.offsetScaleX)*s)/D),E.a*=D,E.c*=D,D=Math.sqrt(E.b*E.b+E.d*E.d),O=Math.sqrt(a*a+d*d),D>1e-5&&(D=(D+(O-D+this.data.offsetScaleY)*s)/D),E.b*=D,E.d*=D,w=!0}if(n>0){C=E.b,S=E.d;var F,N=Math.atan2(S,C);(F=Math.atan2(d,a)-Math.atan2(c,h)-(N-Math.atan2(E.c,E.a)))>u.MathUtils.PI?F-=u.MathUtils.PI2:F<-u.MathUtils.PI&&(F+=u.MathUtils.PI2),F=N+(F+m)*n,D=Math.sqrt(C*C+S*S),E.b=Math.cos(F)*D,E.d=Math.sin(F)*D,w=!0}w&&(E.appliedValid=!1)}},l.prototype.applyRelativeWorld=function(){for(var o=this.rotateMix,t=this.translateMix,s=this.scaleMix,n=this.shearMix,r=this.target,h=r.a,a=r.b,c=r.c,d=r.d,f=h*d-a*c>0?u.MathUtils.degRad:-u.MathUtils.degRad,v=this.data.offsetRotation*f,m=this.data.offsetShearY*f,x=this.bones,T=0,y=x.length;T<y;T++){var E,w=x[T],R=!1;if(o!=0){var C=w.a,A=w.b,S=w.c,b=w.d;(E=Math.atan2(c,h)+v)>u.MathUtils.PI?E-=u.MathUtils.PI2:E<-u.MathUtils.PI&&(E+=u.MathUtils.PI2),E*=o;var _=Math.cos(E),P=Math.sin(E);w.a=_*C-P*S,w.b=_*A-P*b,w.c=P*C+_*S,w.d=P*A+_*b,R=!0}if(t!=0){var D=this.temp;r.localToWorld(D.set(this.data.offsetX,this.data.offsetY)),w.worldX+=D.x*t,w.worldY+=D.y*t,R=!0}if(s>0){var O=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleX)*s+1;w.a*=O,w.c*=O,O=(Math.sqrt(a*a+d*d)-1+this.data.offsetScaleY)*s+1,w.b*=O,w.d*=O,R=!0}n>0&&((E=Math.atan2(d,a)-Math.atan2(c,h))>u.MathUtils.PI?E-=u.MathUtils.PI2:E<-u.MathUtils.PI&&(E+=u.MathUtils.PI2),A=w.b,b=w.d,E=Math.atan2(b,A)+(E-u.MathUtils.PI/2+m)*n,O=Math.sqrt(A*A+b*b),w.b=Math.cos(E)*O,w.d=Math.sin(E)*O,R=!0),R&&(w.appliedValid=!1)}},l.prototype.applyAbsoluteLocal=function(){var o=this.rotateMix,t=this.translateMix,s=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var h=this.bones,a=0,c=h.length;a<c;a++){var d=h[a];d.appliedValid||d.updateAppliedTransform();var f=d.arotation;if(o!=0){var v=r.arotation-f+this.data.offsetRotation;f+=(v-=360*(16384-(16384.499999999996-v/360|0)))*o}var m=d.ax,x=d.ay;t!=0&&(m+=(r.ax-m+this.data.offsetX)*t,x+=(r.ay-x+this.data.offsetY)*t);var T=d.ascaleX,y=d.ascaleY;s!=0&&(T>1e-5&&(T=(T+(r.ascaleX-T+this.data.offsetScaleX)*s)/T),y>1e-5&&(y=(y+(r.ascaleY-y+this.data.offsetScaleY)*s)/y));var E=d.ashearY;n!=0&&(v=r.ashearY-E+this.data.offsetShearY,v-=360*(16384-(16384.499999999996-v/360|0)),d.shearY+=v*n),d.updateWorldTransformWith(m,x,f,T,y,d.ashearX,E)}},l.prototype.applyRelativeLocal=function(){var o=this.rotateMix,t=this.translateMix,s=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var h=this.bones,a=0,c=h.length;a<c;a++){var d=h[a];d.appliedValid||d.updateAppliedTransform();var f=d.arotation;o!=0&&(f+=(r.arotation+this.data.offsetRotation)*o);var v=d.ax,m=d.ay;t!=0&&(v+=(r.ax+this.data.offsetX)*t,m+=(r.ay+this.data.offsetY)*t);var x=d.ascaleX,T=d.ascaleY;s!=0&&(x>1e-5&&(x*=(r.ascaleX-1+this.data.offsetScaleX)*s+1),T>1e-5&&(T*=(r.ascaleY-1+this.data.offsetScaleY)*s+1));var y=d.ashearY;n!=0&&(y+=(r.ashearY+this.data.offsetShearY)*n),d.updateWorldTransformWith(v,m,f,x,T,d.ashearX,y)}},l}();u.TransformConstraint=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t,0,!1)||this;return s.bones=new Array,s.rotateMix=0,s.translateMix=0,s.scaleMix=0,s.shearMix=0,s.offsetRotation=0,s.offsetX=0,s.offsetY=0,s.offsetScaleX=0,s.offsetScaleY=0,s.offsetShearY=0,s.relative=!1,s.local=!1,s}return i(o,l),o}(u.ConstraintData);u.TransformConstraintData=e}(p||(p={})),function(u){var e=function(){function l(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new u.Pool(function(){return new Array}),this.polygonIndicesPool=new u.Pool(function(){return new Array})}return l.prototype.triangulate=function(o){var t=o,s=o.length>>1,n=this.indicesArray;n.length=0;for(var r=0;r<s;r++)n[r]=r;var h=this.isConcaveArray;h.length=0,r=0;for(var a=s;r<a;++r)h[r]=l.isConcave(r,s,t,n);var c=this.triangles;for(c.length=0;s>3;){for(var d=s-1,f=(r=0,1);;){t:if(!h[r]){for(var v=n[d]<<1,m=n[r]<<1,x=n[f]<<1,T=t[v],y=t[v+1],E=t[m],w=t[m+1],R=t[x],C=t[x+1],A=(f+1)%s;A!=d;A=(A+1)%s)if(h[A]){var S=n[A]<<1,b=t[S],_=t[S+1];if(l.positiveArea(R,C,T,y,b,_)&&l.positiveArea(T,y,E,w,b,_)&&l.positiveArea(E,w,R,C,b,_))break t}break}if(f==0){do{if(!h[r])break;r--}while(r>0);break}d=r,r=f,f=(f+1)%s}c.push(n[(s+r-1)%s]),c.push(n[r]),c.push(n[(r+1)%s]),n.splice(r,1),h.splice(r,1);var P=(--s+r-1)%s,D=r==s?0:r;h[P]=l.isConcave(P,s,t,n),h[D]=l.isConcave(D,s,t,n)}return s==3&&(c.push(n[2]),c.push(n[0]),c.push(n[1])),c},l.prototype.decompose=function(o,t){var s=o,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;var h=this.polygonIndicesPool.obtain();h.length=0;var a=this.polygonPool.obtain();a.length=0;for(var c=-1,d=0,f=0,v=t.length;f<v;f+=3){var m=t[f]<<1,x=t[f+1]<<1,T=t[f+2]<<1,y=s[m],E=s[m+1],w=s[x],R=s[x+1],C=s[T],A=s[T+1],S=!1;if(c==m){var b=a.length-4,_=l.winding(a[b],a[b+1],a[b+2],a[b+3],C,A),P=l.winding(C,A,a[0],a[1],a[2],a[3]);_==d&&P==d&&(a.push(C),a.push(A),h.push(T),S=!0)}S||(a.length>0?(n.push(a),r.push(h)):(this.polygonPool.free(a),this.polygonIndicesPool.free(h)),(a=this.polygonPool.obtain()).length=0,a.push(y),a.push(E),a.push(w),a.push(R),a.push(C),a.push(A),(h=this.polygonIndicesPool.obtain()).length=0,h.push(m),h.push(x),h.push(T),d=l.winding(y,E,w,R,C,A),c=m)}for(a.length>0&&(n.push(a),r.push(h)),f=0,v=n.length;f<v;f++)if((h=r[f]).length!=0){for(var D=h[0],O=h[h.length-1],F=(a=n[f])[b=a.length-4],N=a[b+1],k=a[b+2],L=a[b+3],U=a[0],Y=a[1],B=a[2],W=a[3],G=l.winding(F,N,k,L,U,Y),X=0;X<v;X++)if(X!=f){var q=r[X];if(q.length==3){var j=q[0],V=q[1],K=q[2],H=n[X];C=H[H.length-2],A=H[H.length-1],j==D&&V==O&&(_=l.winding(F,N,k,L,C,A),P=l.winding(C,A,U,Y,B,W),_==G&&P==G&&(H.length=0,q.length=0,a.push(C),a.push(A),h.push(K),F=k,N=L,k=C,L=A,X=0))}}}for(f=n.length-1;f>=0;f--)(a=n[f]).length==0&&(n.splice(f,1),this.polygonPool.free(a),h=r[f],r.splice(f,1),this.polygonIndicesPool.free(h));return n},l.isConcave=function(o,t,s,n){var r=n[(t+o-1)%t]<<1,h=n[o]<<1,a=n[(o+1)%t]<<1;return!this.positiveArea(s[r],s[r+1],s[h],s[h+1],s[a],s[a+1])},l.positiveArea=function(o,t,s,n,r,h){return o*(h-n)+s*(t-h)+r*(n-t)>=0},l.winding=function(o,t,s,n,r,h){var a=s-o,c=n-t;return r*c-h*a+a*t-o*c>=0?1:-1},l}();u.Triangulator=e}(p||(p={})),function(u){var e=function(){function v(){this.array=new Array}return v.prototype.add=function(m){var x=this.contains(m);return this.array[0|m]=0|m,!x},v.prototype.contains=function(m){return this.array[0|m]!=null},v.prototype.remove=function(m){this.array[0|m]=void 0},v.prototype.clear=function(){this.array.length=0},v}();u.IntSet=e;var l=function(){function v(m,x,T,y){m===void 0&&(m=0),x===void 0&&(x=0),T===void 0&&(T=0),y===void 0&&(y=0),this.r=m,this.g=x,this.b=T,this.a=y}return v.prototype.set=function(m,x,T,y){return this.r=m,this.g=x,this.b=T,this.a=y,this.clamp(),this},v.prototype.setFromColor=function(m){return this.r=m.r,this.g=m.g,this.b=m.b,this.a=m.a,this},v.prototype.setFromString=function(m){return m=m.charAt(0)=="#"?m.substr(1):m,this.r=parseInt(m.substr(0,2),16)/255,this.g=parseInt(m.substr(2,2),16)/255,this.b=parseInt(m.substr(4,2),16)/255,this.a=(m.length!=8?255:parseInt(m.substr(6,2),16))/255,this},v.prototype.add=function(m,x,T,y){return this.r+=m,this.g+=x,this.b+=T,this.a+=y,this.clamp(),this},v.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},v.rgba8888ToColor=function(m,x){m.r=((4278190080&x)>>>24)/255,m.g=((16711680&x)>>>16)/255,m.b=((65280&x)>>>8)/255,m.a=(255&x)/255},v.rgb888ToColor=function(m,x){m.r=((16711680&x)>>>16)/255,m.g=((65280&x)>>>8)/255,m.b=(255&x)/255},v.WHITE=new v(1,1,1,1),v.RED=new v(1,0,0,1),v.GREEN=new v(0,1,0,1),v.BLUE=new v(0,0,1,1),v.MAGENTA=new v(1,0,1,1),v}();u.Color=l;var o=function(){function v(){}return v.clamp=function(m,x,T){return m<x?x:m>T?T:m},v.cosDeg=function(m){return Math.cos(m*v.degRad)},v.sinDeg=function(m){return Math.sin(m*v.degRad)},v.signum=function(m){return m>0?1:m<0?-1:0},v.toInt=function(m){return m>0?Math.floor(m):Math.ceil(m)},v.cbrt=function(m){var x=Math.pow(Math.abs(m),.3333333333333333);return m<0?-x:x},v.randomTriangular=function(m,x){return v.randomTriangularWith(m,x,.5*(m+x))},v.randomTriangularWith=function(m,x,T){var y=Math.random(),E=x-m;return y<=(T-m)/E?m+Math.sqrt(y*E*(T-m)):x-Math.sqrt((1-y)*E*(x-T))},v.PI=3.1415927,v.PI2=2*v.PI,v.radiansToDegrees=180/v.PI,v.radDeg=v.radiansToDegrees,v.degreesToRadians=v.PI/180,v.degRad=v.degreesToRadians,v}();u.MathUtils=o;var t=function(){function v(){}return v.prototype.apply=function(m,x,T){return m+(x-m)*this.applyInternal(T)},v}();u.Interpolation=t;var s=function(v){function m(x){var T=v.call(this)||this;return T.power=2,T.power=x,T}return i(m,v),m.prototype.applyInternal=function(x){return x<=.5?Math.pow(2*x,this.power)/2:Math.pow(2*(x-1),this.power)/(this.power%2==0?-2:2)+1},m}(t);u.Pow=s;var n=function(v){function m(x){return v.call(this,x)||this}return i(m,v),m.prototype.applyInternal=function(x){return Math.pow(x-1,this.power)*(this.power%2==0?-1:1)+1},m}(s);u.PowOut=n;var r=function(){function v(){}return v.arrayCopy=function(m,x,T,y,E){for(var w=x,R=y;w<x+E;w++,R++)T[R]=m[w]},v.setArraySize=function(m,x,T){T===void 0&&(T=0);var y=m.length;if(y==x)return m;if(m.length=x,y<x)for(var E=y;E<x;E++)m[E]=T;return m},v.ensureArrayCapacity=function(m,x,T){return T===void 0&&(T=0),m.length>=x?m:v.setArraySize(m,x,T)},v.newArray=function(m,x){for(var T=new Array(m),y=0;y<m;y++)T[y]=x;return T},v.newFloatArray=function(m){if(v.SUPPORTS_TYPED_ARRAYS)return new Float32Array(m);for(var x=new Array(m),T=0;T<x.length;T++)x[T]=0;return x},v.newShortArray=function(m){if(v.SUPPORTS_TYPED_ARRAYS)return new Int16Array(m);for(var x=new Array(m),T=0;T<x.length;T++)x[T]=0;return x},v.toFloatArray=function(m){return v.SUPPORTS_TYPED_ARRAYS?new Float32Array(m):m},v.toSinglePrecision=function(m){return v.SUPPORTS_TYPED_ARRAYS?Math.fround(m):m},v.webkit602BugfixHelper=function(m,x){},v.contains=function(m,x,T){for(var y=0;y<m.length;y++)if(m[y]==x)return!0;return!1},v.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",v}();u.Utils=r;var h=function(){function v(){}return v.logBones=function(m){for(var x=0;x<m.bones.length;x++){var T=m.bones[x];console.log(T.data.name+", "+T.a+", "+T.b+", "+T.c+", "+T.d+", "+T.worldX+", "+T.worldY)}},v}();u.DebugUtils=h;var a=function(){function v(m){this.items=new Array,this.instantiator=m}return v.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},v.prototype.free=function(m){m.reset&&m.reset(),this.items.push(m)},v.prototype.freeAll=function(m){for(var x=0;x<m.length;x++)this.free(m[x])},v.prototype.clear=function(){this.items.length=0},v}();u.Pool=a;var c=function(){function v(m,x){m===void 0&&(m=0),x===void 0&&(x=0),this.x=m,this.y=x}return v.prototype.set=function(m,x){return this.x=m,this.y=x,this},v.prototype.length=function(){var m=this.x,x=this.y;return Math.sqrt(m*m+x*x)},v.prototype.normalize=function(){var m=this.length();return m!=0&&(this.x/=m,this.y/=m),this},v}();u.Vector2=c;var d=function(){function v(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return v.prototype.update=function(){var m=Date.now()/1e3;this.delta=m-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=m,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},v}();u.TimeKeeper=d;var f=function(){function v(m){m===void 0&&(m=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(m)}return v.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},v.prototype.addValue=function(m){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=m,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},v.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var m=0,x=0;x<this.values.length;x++)m+=this.values[x];this.mean=m/this.values.length,this.dirty=!1}return this.mean}return 0},v}();u.WindowedMean=f}(p||(p={})),Math.fround||(Math.fround=(g=new Float32Array(1),function(u){return g[0]=u,g[0]})),function(u){var e=function(o){if(o==null)throw new Error("name cannot be null.");this.name=o};u.Attachment=e;var l=function(o){function t(s){var n=o.call(this,s)||this;return n.id=(65535&t.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return i(t,o),t.prototype.computeWorldVertices=function(s,n,r,h,a,c){r=a+(r>>1)*c;var d=s.bone.skeleton,f=s.deform,v=this.vertices,m=this.bones;if(m!=null){for(var x=0,T=0,y=0;y<n;y+=2)x+=(C=m[x])+1,T+=C;var E=d.bones;if(f.length==0)for(U=a,F=3*T;U<r;U+=c){var w=0,R=0,C=m[x++];for(C+=x;x<C;x++,F+=3){_=E[m[x]],Y=v[F],B=v[F+1];var A=v[F+2];w+=(Y*_.a+B*_.b+_.worldX)*A,R+=(Y*_.c+B*_.d+_.worldY)*A}h[U]=w,h[U+1]=R}else for(var S=f,b=(U=a,F=3*T,T<<1);U<r;U+=c){for(w=0,R=0,C=m[x++],C+=x;x<C;x++,F+=3,b+=2)_=E[m[x]],Y=v[F]+S[b],B=v[F+1]+S[b+1],A=v[F+2],w+=(Y*_.a+B*_.b+_.worldX)*A,R+=(Y*_.c+B*_.d+_.worldY)*A;h[U]=w,h[U+1]=R}}else{f.length>0&&(v=f);for(var _,P=(_=s.bone).worldX,D=_.worldY,O=_.a,F=_.b,N=_.c,k=_.d,L=n,U=a;U<r;L+=2,U+=c){var Y=v[L],B=v[L+1];h[U]=Y*O+B*F+P,h[U+1]=Y*N+B*k+D}}},t.prototype.copyTo=function(s){this.bones!=null?(s.bones=new Array(this.bones.length),u.Utils.arrayCopy(this.bones,0,s.bones,0,this.bones.length)):s.bones=null,this.vertices!=null?(s.vertices=u.Utils.newFloatArray(this.vertices.length),u.Utils.arrayCopy(this.vertices,0,s.vertices,0,this.vertices.length)):s.vertices=null,s.worldVerticesLength=this.worldVerticesLength,s.deformAttachment=this.deformAttachment},t.nextID=0,t}(e);u.VertexAttachment=l}(p||(p={})),function(u){var e;(e=u.AttachmentType||(u.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.color=new u.Color(1,1,1,1),s}return i(o,l),o.prototype.copy=function(){var t=new o(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},o}(u.VertexAttachment);u.BoundingBoxAttachment=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.color=new u.Color(.2275,.2275,.8078,1),s}return i(o,l),o.prototype.copy=function(){var t=new o(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},o}(u.VertexAttachment);u.ClippingAttachment=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.color=new u.Color(1,1,1,1),s.tempColor=new u.Color(0,0,0,0),s}return i(o,l),o.prototype.updateUVs=function(){var t=this.regionUVs;this.uvs!=null&&this.uvs.length==t.length||(this.uvs=u.Utils.newFloatArray(t.length));var s=this.uvs,n=this.uvs.length,r=this.region.u,h=this.region.v,a=0,c=0;if(this.region instanceof u.TextureAtlasRegion){var d=this.region,f=d.texture.getImage().width,v=d.texture.getImage().height;switch(d.degrees){case 90:r-=(d.originalHeight-d.offsetY-d.height)/f,h-=(d.originalWidth-d.offsetX-d.width)/v,a=d.originalHeight/f,c=d.originalWidth/v;for(var m=0;m<n;m+=2)s[m]=r+t[m+1]*a,s[m+1]=h+(1-t[m])*c;return;case 180:for(r-=(d.originalWidth-d.offsetX-d.width)/f,h-=d.offsetY/v,a=d.originalWidth/f,c=d.originalHeight/v,m=0;m<n;m+=2)s[m]=r+(1-t[m])*a,s[m+1]=h+(1-t[m+1])*c;return;case 270:for(r-=d.offsetY/f,h-=d.offsetX/v,a=d.originalHeight/f,c=d.originalWidth/v,m=0;m<n;m+=2)s[m]=r+(1-t[m+1])*a,s[m+1]=h+t[m]*c;return}r-=d.offsetX/f,h-=(d.originalHeight-d.offsetY-d.height)/v,a=d.originalWidth/f,c=d.originalHeight/v}else this.region==null?(r=h=0,a=c=1):(a=this.region.u2-r,c=this.region.v2-h);for(m=0;m<n;m+=2)s[m]=r+t[m]*a,s[m+1]=h+t[m+1]*c},o.prototype.getParentMesh=function(){return this.parentMesh},o.prototype.setParentMesh=function(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},o.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var t=new o(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),u.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),u.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),u.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges!=null&&(t.edges=new Array(this.edges.length),u.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},o.prototype.newLinkedMesh=function(){var t=new o(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh!=null?this.parentMesh:this),t.updateUVs(),t},o}(u.VertexAttachment);u.MeshAttachment=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.closed=!1,s.constantSpeed=!1,s.color=new u.Color(1,1,1,1),s}return i(o,l),o.prototype.copy=function(){var t=new o(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),u.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},o}(u.VertexAttachment);u.PathAttachment=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.color=new u.Color(.38,.94,0,1),s}return i(o,l),o.prototype.computeWorldPosition=function(t,s){return s.x=this.x*t.a+this.y*t.b+t.worldX,s.y=this.x*t.c+this.y*t.d+t.worldY,s},o.prototype.computeWorldRotation=function(t){var s=u.MathUtils.cosDeg(this.rotation),n=u.MathUtils.sinDeg(this.rotation),r=s*t.a+n*t.b,h=s*t.c+n*t.d;return Math.atan2(h,r)*u.MathUtils.radDeg},o.prototype.copy=function(){var t=new o(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},o}(u.VertexAttachment);u.PointAttachment=e}(p||(p={})),function(u){var e=function(l){function o(t){var s=l.call(this,t)||this;return s.x=0,s.y=0,s.scaleX=1,s.scaleY=1,s.rotation=0,s.width=0,s.height=0,s.color=new u.Color(1,1,1,1),s.offset=u.Utils.newFloatArray(8),s.uvs=u.Utils.newFloatArray(8),s.tempColor=new u.Color(1,1,1,1),s}return i(o,l),o.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*s,h=n+this.region.width*t,a=r+this.region.height*s,c=this.rotation*Math.PI/180,d=Math.cos(c),f=Math.sin(c),v=n*d+this.x,m=n*f,x=r*d+this.y,T=r*f,y=h*d+this.x,E=h*f,w=a*d+this.y,R=a*f,C=this.offset;C[o.OX1]=v-T,C[o.OY1]=x+m,C[o.OX2]=v-R,C[o.OY2]=w+m,C[o.OX3]=y-R,C[o.OY3]=w+E,C[o.OX4]=y-T,C[o.OY4]=x+E},o.prototype.setRegion=function(t){this.region=t;var s=this.uvs;t.rotate?(s[2]=t.u,s[3]=t.v2,s[4]=t.u,s[5]=t.v,s[6]=t.u2,s[7]=t.v,s[0]=t.u2,s[1]=t.v2):(s[0]=t.u,s[1]=t.v2,s[2]=t.u,s[3]=t.v,s[4]=t.u2,s[5]=t.v,s[6]=t.u2,s[7]=t.v2)},o.prototype.computeWorldVertices=function(t,s,n,r){var h=this.offset,a=t.worldX,c=t.worldY,d=t.a,f=t.b,v=t.c,m=t.d,x=0,T=0;x=h[o.OX1],T=h[o.OY1],s[n]=x*d+T*f+a,s[n+1]=x*v+T*m+c,n+=r,x=h[o.OX2],T=h[o.OY2],s[n]=x*d+T*f+a,s[n+1]=x*v+T*m+c,n+=r,x=h[o.OX3],T=h[o.OY3],s[n]=x*d+T*f+a,s[n+1]=x*v+T*m+c,n+=r,x=h[o.OX4],T=h[o.OY4],s[n]=x*d+T*f+a,s[n+1]=x*v+T*m+c},o.prototype.copy=function(){var t=new o(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,u.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),u.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},o.OX1=0,o.OY1=1,o.OX2=2,o.OY2=3,o.OX3=4,o.OY3=5,o.OX4=6,o.OY4=7,o.X1=0,o.Y1=1,o.C1R=2,o.C1G=3,o.C1B=4,o.C1A=5,o.U1=6,o.V1=7,o.X2=8,o.Y2=9,o.C2R=10,o.C2G=11,o.C2B=12,o.C2A=13,o.U2=14,o.V2=15,o.X3=16,o.Y3=17,o.C3R=18,o.C3G=19,o.C3B=20,o.C3A=21,o.U3=22,o.V3=23,o.X4=24,o.Y4=25,o.C4R=26,o.C4G=27,o.C4B=28,o.C4A=29,o.U4=30,o.V4=31,o}(u.Attachment);u.RegionAttachment=e}(p||(p={})),function(u){var e=function(){function l(o,t){this.jitterX=0,this.jitterY=0,this.jitterX=o,this.jitterY=t}return l.prototype.begin=function(o){},l.prototype.transform=function(o,t,s,n){o.x+=u.MathUtils.randomTriangular(-this.jitterX,this.jitterY),o.y+=u.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},l.prototype.end=function(){},l}();u.JitterEffect=e}(p||(p={})),function(u){var e=function(){function l(o){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=o}return l.prototype.begin=function(o){this.worldX=o.x+this.centerX,this.worldY=o.y+this.centerY},l.prototype.transform=function(o,t,s,n){var r=this.angle*u.MathUtils.degreesToRadians,h=o.x-this.worldX,a=o.y-this.worldY,c=Math.sqrt(h*h+a*a);if(c<this.radius){var d=l.interpolation.apply(0,r,(this.radius-c)/this.radius),f=Math.cos(d),v=Math.sin(d);o.x=f*h-v*a+this.worldX,o.y=v*h+f*a+this.worldY}},l.prototype.end=function(){},l.interpolation=new u.PowOut(2),l}();u.SwirlEffect=e}(p||(p={})),function(u){var e,l;e=u.canvas||(u.canvas={}),l=function(o){function t(s){return s===void 0&&(s=""),o.call(this,function(n){return new u.canvas.CanvasTexture(n)},s)||this}return i(t,o),t}(u.AssetManager),e.AssetManager=l}(p||(p={})),function(u){var e,l;e=u.canvas||(u.canvas={}),l=function(o){function t(s){return o.call(this,s)||this}return i(t,o),t.prototype.setFilters=function(s,n){},t.prototype.setWraps=function(s,n){},t.prototype.dispose=function(){},t}(u.Texture),e.CanvasTexture=l}(p||(p={})),function(u){var e,l;e=u.canvas||(u.canvas={}),l=function(){function o(t){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=u.Utils.newFloatArray(8192),this.tempColor=new u.Color,this.ctx=t}return o.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},o.prototype.drawImages=function(t){var s=this.ctx,n=t.drawOrder;this.debugRendering&&(s.strokeStyle="green"),s.save();for(var r=0,h=n.length;r<h;r++){var a=n[r];if(a.bone.active){var c=a.getAttachment(),d=null,f=null,v=null;if(c instanceof u.RegionAttachment){v=(f=(d=c).region).texture.getImage();var m=a.bone.skeleton.color,x=a.color,T=d.color,y=m.a*x.a*T.a,E=this.tempColor;E.set(m.r*x.r*T.r,m.g*x.g*T.g,m.b*x.b*T.b,y);var w=c,R=a.bone,C=f.width,A=f.height;s.save(),s.transform(R.a,R.c,R.b,R.d,R.worldX,R.worldY),s.translate(c.offset[0],c.offset[1]),s.rotate(c.rotation*Math.PI/180);var S=w.width/C;if(s.scale(S*c.scaleX,S*c.scaleY),s.translate(C/2,A/2),c.region.rotate){var b=C;C=A,A=b,s.rotate(-Math.PI/2)}s.scale(1,-1),s.translate(-C/2,-A/2),E.r==1&&E.g==1&&E.b==1&&E.a==1||(s.globalAlpha=E.a),s.drawImage(v,f.x,f.y,C,A,0,0,C,A),this.debugRendering&&s.strokeRect(0,0,C,A),s.restore()}}}s.restore()},o.prototype.drawTriangles=function(t){for(var s=null,n=this.vertices,r=null,h=t.drawOrder,a=0,c=h.length;a<c;a++){var d=h[a],f=d.getAttachment(),v=null;if(f instanceof u.RegionAttachment){var m=f;n=this.computeRegionVertices(d,m,!1),r=o.QUAD_TRIANGLES,v=m.region.texture.getImage()}else{if(!(f instanceof u.MeshAttachment))continue;var x=f;n=this.computeMeshVertices(d,x,!1),r=x.triangles,v=x.region.renderObject.texture.getImage()}if(v!=null){var T=d.data.blendMode;T!=s&&(s=T);var y=d.bone.skeleton.color,E=d.color,w=f.color,R=y.a*E.a*w.a,C=this.tempColor;C.set(y.r*E.r*w.r,y.g*E.g*w.g,y.b*E.b*w.b,R);var A=this.ctx;C.r==1&&C.g==1&&C.b==1&&C.a==1||(A.globalAlpha=C.a);for(var S=0;S<r.length;S+=3){var b=8*r[S],_=8*r[S+1],P=8*r[S+2],D=n[b],O=n[b+1],F=n[b+6],N=n[b+7],k=n[_],L=n[_+1],U=n[_+6],Y=n[_+7],B=n[P],W=n[P+1],G=n[P+6],X=n[P+7];this.drawTriangle(v,D,O,F,N,k,L,U,Y,B,W,G,X),this.debugRendering&&(A.strokeStyle="green",A.beginPath(),A.moveTo(D,O),A.lineTo(k,L),A.lineTo(B,W),A.lineTo(D,O),A.stroke())}}}this.ctx.globalAlpha=1},o.prototype.drawTriangle=function(t,s,n,r,h,a,c,d,f,v,m,x,T){var y=this.ctx;r*=t.width,h*=t.height,d*=t.width,f*=t.height,x*=t.width,T*=t.height,y.beginPath(),y.moveTo(s,n),y.lineTo(a,c),y.lineTo(v,m),y.closePath();var E=1/((d-=r)*(T-=h)-(x-=r)*(f-=h)),w=(T*(a-=s)-f*(v-=s))*E,R=(T*(c-=n)-f*(m-=n))*E,C=(d*v-x*a)*E,A=(d*m-x*c)*E,S=s-w*r-C*h,b=n-R*r-A*h;y.save(),y.transform(w,R,C,A,S,b),y.clip(),y.drawImage(t,0,0),y.restore()},o.prototype.computeRegionVertices=function(t,s,n){var r=t.bone.skeleton.color,h=t.color,a=s.color,c=r.a*h.a*a.a,d=n?c:1,f=this.tempColor;f.set(r.r*h.r*a.r*d,r.g*h.g*a.g*d,r.b*h.b*a.b*d,c),s.computeWorldVertices(t.bone,this.vertices,0,o.VERTEX_SIZE);var v=this.vertices,m=s.uvs;return v[u.RegionAttachment.C1R]=f.r,v[u.RegionAttachment.C1G]=f.g,v[u.RegionAttachment.C1B]=f.b,v[u.RegionAttachment.C1A]=f.a,v[u.RegionAttachment.U1]=m[0],v[u.RegionAttachment.V1]=m[1],v[u.RegionAttachment.C2R]=f.r,v[u.RegionAttachment.C2G]=f.g,v[u.RegionAttachment.C2B]=f.b,v[u.RegionAttachment.C2A]=f.a,v[u.RegionAttachment.U2]=m[2],v[u.RegionAttachment.V2]=m[3],v[u.RegionAttachment.C3R]=f.r,v[u.RegionAttachment.C3G]=f.g,v[u.RegionAttachment.C3B]=f.b,v[u.RegionAttachment.C3A]=f.a,v[u.RegionAttachment.U3]=m[4],v[u.RegionAttachment.V3]=m[5],v[u.RegionAttachment.C4R]=f.r,v[u.RegionAttachment.C4G]=f.g,v[u.RegionAttachment.C4B]=f.b,v[u.RegionAttachment.C4A]=f.a,v[u.RegionAttachment.U4]=m[6],v[u.RegionAttachment.V4]=m[7],v},o.prototype.computeMeshVertices=function(t,s,n){var r=t.bone.skeleton.color,h=t.color,a=s.color,c=r.a*h.a*a.a,d=n?c:1,f=this.tempColor;f.set(r.r*h.r*a.r*d,r.g*h.g*a.g*d,r.b*h.b*a.b*d,c);var v=s.worldVerticesLength/2;this.vertices.length<s.worldVerticesLength&&(this.vertices=u.Utils.newFloatArray(s.worldVerticesLength));var m=this.vertices;s.computeWorldVertices(t,0,s.worldVerticesLength,m,0,o.VERTEX_SIZE);for(var x=s.uvs,T=0,y=v,E=0,w=2;T<y;T++)m[w++]=f.r,m[w++]=f.g,m[w++]=f.b,m[w++]=f.a,m[w++]=x[E++],m[w++]=x[E++],w+=2;return m},o.QUAD_TRIANGLES=[0,1,2,2,3,0],o.VERTEX_SIZE=8,o}(),e.SkeletonRenderer=l}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(o){function t(s,n){return n===void 0&&(n=""),o.call(this,function(r){return new u.webgl.GLTexture(s,r)},n)||this}return i(t,o),t}(u.AssetManager),e.AssetManager=l}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(){function o(t,s){this.position=new e.Vector3(0,0,0),this.direction=new e.Vector3(0,0,-1),this.up=new e.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new e.Matrix4,this.inverseProjectionView=new e.Matrix4,this.projection=new e.Matrix4,this.view=new e.Matrix4,this.tmp=new e.Vector3,this.viewportWidth=t,this.viewportHeight=s,this.update()}return o.prototype.update=function(){var t=this.projection,s=this.view,n=this.projectionView,r=this.inverseProjectionView,h=this.zoom,a=this.viewportWidth,c=this.viewportHeight;t.ortho(h*(-a/2),h*(a/2),h*(-c/2),h*(c/2),this.near,this.far),s.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(s),r.set(n.values).invert()},o.prototype.screenToWorld=function(t,s,n){var r=t.x,h=n-t.y-1,a=this.tmp;return a.x=2*r/s-1,a.y=2*h/n-1,a.z=2*t.z-1,a.project(this.inverseProjectionView),t.set(a.x,a.y,a.z),t},o.prototype.setViewport=function(t,s){this.viewportWidth=t,this.viewportHeight=s},o}(),e.OrthoCamera=l}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(o){function t(s,n,r){r===void 0&&(r=!1);var h=o.call(this,n)||this;return h.texture=null,h.boundUnit=0,h.useMipMaps=!1,h.context=s instanceof e.ManagedWebGLRenderingContext?s:new e.ManagedWebGLRenderingContext(s),h.useMipMaps=r,h.restore(),h.context.addRestorable(h),h}return i(t,o),t.prototype.setFilters=function(s,n){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t.validateMagFilter(n))},t.validateMagFilter=function(s){switch(s){case u.TextureFilter.MipMap:case u.TextureFilter.MipMapLinearLinear:case u.TextureFilter.MipMapLinearNearest:case u.TextureFilter.MipMapNearestLinear:case u.TextureFilter.MipMapNearestNearest:return u.TextureFilter.Linear;default:return s}},t.prototype.setWraps=function(s,n){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,n)},t.prototype.update=function(s){var n=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,s?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),s&&n.generateMipmap(n.TEXTURE_2D)},t.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},t.prototype.bind=function(s){s===void 0&&(s=0);var n=this.context.gl;this.boundUnit=s,n.activeTexture(n.TEXTURE0+s),n.bindTexture(n.TEXTURE_2D,this.texture)},t.prototype.unbind=function(){var s=this.context.gl;s.activeTexture(s.TEXTURE0+this.boundUnit),s.bindTexture(s.TEXTURE_2D,null)},t.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,t}(u.Texture),e.GLTexture=l}(p||(p={})),function(u){(function(e){e.M00=0,e.M01=4,e.M02=8,e.M03=12,e.M10=1,e.M11=5,e.M12=9,e.M13=13,e.M20=2,e.M21=6,e.M22=10,e.M23=14,e.M30=3,e.M31=7,e.M32=11,e.M33=15;var l=function(){function o(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var t=this.values;t[e.M00]=1,t[e.M11]=1,t[e.M22]=1,t[e.M33]=1}return o.prototype.set=function(t){return this.values.set(t),this},o.prototype.transpose=function(){var t=this.temp,s=this.values;return t[e.M00]=s[e.M00],t[e.M01]=s[e.M10],t[e.M02]=s[e.M20],t[e.M03]=s[e.M30],t[e.M10]=s[e.M01],t[e.M11]=s[e.M11],t[e.M12]=s[e.M21],t[e.M13]=s[e.M31],t[e.M20]=s[e.M02],t[e.M21]=s[e.M12],t[e.M22]=s[e.M22],t[e.M23]=s[e.M32],t[e.M30]=s[e.M03],t[e.M31]=s[e.M13],t[e.M32]=s[e.M23],t[e.M33]=s[e.M33],this.set(t)},o.prototype.identity=function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this},o.prototype.invert=function(){var t=this.values,s=this.temp,n=t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33];if(n==0)throw new Error("non-invertible matrix");var r=1/n;return s[e.M00]=t[e.M12]*t[e.M23]*t[e.M31]-t[e.M13]*t[e.M22]*t[e.M31]+t[e.M13]*t[e.M21]*t[e.M32]-t[e.M11]*t[e.M23]*t[e.M32]-t[e.M12]*t[e.M21]*t[e.M33]+t[e.M11]*t[e.M22]*t[e.M33],s[e.M01]=t[e.M03]*t[e.M22]*t[e.M31]-t[e.M02]*t[e.M23]*t[e.M31]-t[e.M03]*t[e.M21]*t[e.M32]+t[e.M01]*t[e.M23]*t[e.M32]+t[e.M02]*t[e.M21]*t[e.M33]-t[e.M01]*t[e.M22]*t[e.M33],s[e.M02]=t[e.M02]*t[e.M13]*t[e.M31]-t[e.M03]*t[e.M12]*t[e.M31]+t[e.M03]*t[e.M11]*t[e.M32]-t[e.M01]*t[e.M13]*t[e.M32]-t[e.M02]*t[e.M11]*t[e.M33]+t[e.M01]*t[e.M12]*t[e.M33],s[e.M03]=t[e.M03]*t[e.M12]*t[e.M21]-t[e.M02]*t[e.M13]*t[e.M21]-t[e.M03]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M13]*t[e.M22]+t[e.M02]*t[e.M11]*t[e.M23]-t[e.M01]*t[e.M12]*t[e.M23],s[e.M10]=t[e.M13]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M20]*t[e.M32]+t[e.M10]*t[e.M23]*t[e.M32]+t[e.M12]*t[e.M20]*t[e.M33]-t[e.M10]*t[e.M22]*t[e.M33],s[e.M11]=t[e.M02]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M22]*t[e.M30]+t[e.M03]*t[e.M20]*t[e.M32]-t[e.M00]*t[e.M23]*t[e.M32]-t[e.M02]*t[e.M20]*t[e.M33]+t[e.M00]*t[e.M22]*t[e.M33],s[e.M12]=t[e.M03]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M10]*t[e.M32]+t[e.M00]*t[e.M13]*t[e.M32]+t[e.M02]*t[e.M10]*t[e.M33]-t[e.M00]*t[e.M12]*t[e.M33],s[e.M13]=t[e.M02]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M12]*t[e.M20]+t[e.M03]*t[e.M10]*t[e.M22]-t[e.M00]*t[e.M13]*t[e.M22]-t[e.M02]*t[e.M10]*t[e.M23]+t[e.M00]*t[e.M12]*t[e.M23],s[e.M20]=t[e.M11]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M21]*t[e.M30]+t[e.M13]*t[e.M20]*t[e.M31]-t[e.M10]*t[e.M23]*t[e.M31]-t[e.M11]*t[e.M20]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M33],s[e.M21]=t[e.M03]*t[e.M21]*t[e.M30]-t[e.M01]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M20]*t[e.M31]+t[e.M00]*t[e.M23]*t[e.M31]+t[e.M01]*t[e.M20]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M33],s[e.M22]=t[e.M01]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M11]*t[e.M30]+t[e.M03]*t[e.M10]*t[e.M31]-t[e.M00]*t[e.M13]*t[e.M31]-t[e.M01]*t[e.M10]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M33],s[e.M23]=t[e.M03]*t[e.M11]*t[e.M20]-t[e.M01]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M10]*t[e.M21]+t[e.M00]*t[e.M13]*t[e.M21]+t[e.M01]*t[e.M10]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M23],s[e.M30]=t[e.M12]*t[e.M21]*t[e.M30]-t[e.M11]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M20]*t[e.M31]+t[e.M10]*t[e.M22]*t[e.M31]+t[e.M11]*t[e.M20]*t[e.M32]-t[e.M10]*t[e.M21]*t[e.M32],s[e.M31]=t[e.M01]*t[e.M22]*t[e.M30]-t[e.M02]*t[e.M21]*t[e.M30]+t[e.M02]*t[e.M20]*t[e.M31]-t[e.M00]*t[e.M22]*t[e.M31]-t[e.M01]*t[e.M20]*t[e.M32]+t[e.M00]*t[e.M21]*t[e.M32],s[e.M32]=t[e.M02]*t[e.M11]*t[e.M30]-t[e.M01]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M10]*t[e.M31]+t[e.M00]*t[e.M12]*t[e.M31]+t[e.M01]*t[e.M10]*t[e.M32]-t[e.M00]*t[e.M11]*t[e.M32],s[e.M33]=t[e.M01]*t[e.M12]*t[e.M20]-t[e.M02]*t[e.M11]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]+t[e.M00]*t[e.M11]*t[e.M22],t[e.M00]=s[e.M00]*r,t[e.M01]=s[e.M01]*r,t[e.M02]=s[e.M02]*r,t[e.M03]=s[e.M03]*r,t[e.M10]=s[e.M10]*r,t[e.M11]=s[e.M11]*r,t[e.M12]=s[e.M12]*r,t[e.M13]=s[e.M13]*r,t[e.M20]=s[e.M20]*r,t[e.M21]=s[e.M21]*r,t[e.M22]=s[e.M22]*r,t[e.M23]=s[e.M23]*r,t[e.M30]=s[e.M30]*r,t[e.M31]=s[e.M31]*r,t[e.M32]=s[e.M32]*r,t[e.M33]=s[e.M33]*r,this},o.prototype.determinant=function(){var t=this.values;return t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33]},o.prototype.translate=function(t,s,n){var r=this.values;return r[e.M03]+=t,r[e.M13]+=s,r[e.M23]+=n,this},o.prototype.copy=function(){return new o().set(this.values)},o.prototype.projection=function(t,s,n,r){this.identity();var h=1/Math.tan(n*(Math.PI/180)/2),a=(s+t)/(t-s),c=2*s*t/(t-s),d=this.values;return d[e.M00]=h/r,d[e.M10]=0,d[e.M20]=0,d[e.M30]=0,d[e.M01]=0,d[e.M11]=h,d[e.M21]=0,d[e.M31]=0,d[e.M02]=0,d[e.M12]=0,d[e.M22]=a,d[e.M32]=-1,d[e.M03]=0,d[e.M13]=0,d[e.M23]=c,d[e.M33]=0,this},o.prototype.ortho2d=function(t,s,n,r){return this.ortho(t,t+n,s,s+r,0,1)},o.prototype.ortho=function(t,s,n,r,h,a){this.identity();var c=2/(s-t),d=2/(r-n),f=-2/(a-h),v=-(s+t)/(s-t),m=-(r+n)/(r-n),x=-(a+h)/(a-h),T=this.values;return T[e.M00]=c,T[e.M10]=0,T[e.M20]=0,T[e.M30]=0,T[e.M01]=0,T[e.M11]=d,T[e.M21]=0,T[e.M31]=0,T[e.M02]=0,T[e.M12]=0,T[e.M22]=f,T[e.M32]=0,T[e.M03]=v,T[e.M13]=m,T[e.M23]=x,T[e.M33]=1,this},o.prototype.multiply=function(t){var s=this.temp,n=this.values,r=t.values;return s[e.M00]=n[e.M00]*r[e.M00]+n[e.M01]*r[e.M10]+n[e.M02]*r[e.M20]+n[e.M03]*r[e.M30],s[e.M01]=n[e.M00]*r[e.M01]+n[e.M01]*r[e.M11]+n[e.M02]*r[e.M21]+n[e.M03]*r[e.M31],s[e.M02]=n[e.M00]*r[e.M02]+n[e.M01]*r[e.M12]+n[e.M02]*r[e.M22]+n[e.M03]*r[e.M32],s[e.M03]=n[e.M00]*r[e.M03]+n[e.M01]*r[e.M13]+n[e.M02]*r[e.M23]+n[e.M03]*r[e.M33],s[e.M10]=n[e.M10]*r[e.M00]+n[e.M11]*r[e.M10]+n[e.M12]*r[e.M20]+n[e.M13]*r[e.M30],s[e.M11]=n[e.M10]*r[e.M01]+n[e.M11]*r[e.M11]+n[e.M12]*r[e.M21]+n[e.M13]*r[e.M31],s[e.M12]=n[e.M10]*r[e.M02]+n[e.M11]*r[e.M12]+n[e.M12]*r[e.M22]+n[e.M13]*r[e.M32],s[e.M13]=n[e.M10]*r[e.M03]+n[e.M11]*r[e.M13]+n[e.M12]*r[e.M23]+n[e.M13]*r[e.M33],s[e.M20]=n[e.M20]*r[e.M00]+n[e.M21]*r[e.M10]+n[e.M22]*r[e.M20]+n[e.M23]*r[e.M30],s[e.M21]=n[e.M20]*r[e.M01]+n[e.M21]*r[e.M11]+n[e.M22]*r[e.M21]+n[e.M23]*r[e.M31],s[e.M22]=n[e.M20]*r[e.M02]+n[e.M21]*r[e.M12]+n[e.M22]*r[e.M22]+n[e.M23]*r[e.M32],s[e.M23]=n[e.M20]*r[e.M03]+n[e.M21]*r[e.M13]+n[e.M22]*r[e.M23]+n[e.M23]*r[e.M33],s[e.M30]=n[e.M30]*r[e.M00]+n[e.M31]*r[e.M10]+n[e.M32]*r[e.M20]+n[e.M33]*r[e.M30],s[e.M31]=n[e.M30]*r[e.M01]+n[e.M31]*r[e.M11]+n[e.M32]*r[e.M21]+n[e.M33]*r[e.M31],s[e.M32]=n[e.M30]*r[e.M02]+n[e.M31]*r[e.M12]+n[e.M32]*r[e.M22]+n[e.M33]*r[e.M32],s[e.M33]=n[e.M30]*r[e.M03]+n[e.M31]*r[e.M13]+n[e.M32]*r[e.M23]+n[e.M33]*r[e.M33],this.set(this.temp)},o.prototype.multiplyLeft=function(t){var s=this.temp,n=this.values,r=t.values;return s[e.M00]=r[e.M00]*n[e.M00]+r[e.M01]*n[e.M10]+r[e.M02]*n[e.M20]+r[e.M03]*n[e.M30],s[e.M01]=r[e.M00]*n[e.M01]+r[e.M01]*n[e.M11]+r[e.M02]*n[e.M21]+r[e.M03]*n[e.M31],s[e.M02]=r[e.M00]*n[e.M02]+r[e.M01]*n[e.M12]+r[e.M02]*n[e.M22]+r[e.M03]*n[e.M32],s[e.M03]=r[e.M00]*n[e.M03]+r[e.M01]*n[e.M13]+r[e.M02]*n[e.M23]+r[e.M03]*n[e.M33],s[e.M10]=r[e.M10]*n[e.M00]+r[e.M11]*n[e.M10]+r[e.M12]*n[e.M20]+r[e.M13]*n[e.M30],s[e.M11]=r[e.M10]*n[e.M01]+r[e.M11]*n[e.M11]+r[e.M12]*n[e.M21]+r[e.M13]*n[e.M31],s[e.M12]=r[e.M10]*n[e.M02]+r[e.M11]*n[e.M12]+r[e.M12]*n[e.M22]+r[e.M13]*n[e.M32],s[e.M13]=r[e.M10]*n[e.M03]+r[e.M11]*n[e.M13]+r[e.M12]*n[e.M23]+r[e.M13]*n[e.M33],s[e.M20]=r[e.M20]*n[e.M00]+r[e.M21]*n[e.M10]+r[e.M22]*n[e.M20]+r[e.M23]*n[e.M30],s[e.M21]=r[e.M20]*n[e.M01]+r[e.M21]*n[e.M11]+r[e.M22]*n[e.M21]+r[e.M23]*n[e.M31],s[e.M22]=r[e.M20]*n[e.M02]+r[e.M21]*n[e.M12]+r[e.M22]*n[e.M22]+r[e.M23]*n[e.M32],s[e.M23]=r[e.M20]*n[e.M03]+r[e.M21]*n[e.M13]+r[e.M22]*n[e.M23]+r[e.M23]*n[e.M33],s[e.M30]=r[e.M30]*n[e.M00]+r[e.M31]*n[e.M10]+r[e.M32]*n[e.M20]+r[e.M33]*n[e.M30],s[e.M31]=r[e.M30]*n[e.M01]+r[e.M31]*n[e.M11]+r[e.M32]*n[e.M21]+r[e.M33]*n[e.M31],s[e.M32]=r[e.M30]*n[e.M02]+r[e.M31]*n[e.M12]+r[e.M32]*n[e.M22]+r[e.M33]*n[e.M32],s[e.M33]=r[e.M30]*n[e.M03]+r[e.M31]*n[e.M13]+r[e.M32]*n[e.M23]+r[e.M33]*n[e.M33],this.set(this.temp)},o.prototype.lookAt=function(t,s,n){o.initTemps();var r=o.xAxis,h=o.yAxis,a=o.zAxis;a.setFrom(s).normalize(),r.setFrom(s).normalize(),r.cross(n).normalize(),h.setFrom(r).cross(a).normalize(),this.identity();var c=this.values;return c[e.M00]=r.x,c[e.M01]=r.y,c[e.M02]=r.z,c[e.M10]=h.x,c[e.M11]=h.y,c[e.M12]=h.z,c[e.M20]=-a.x,c[e.M21]=-a.y,c[e.M22]=-a.z,o.tmpMatrix.identity(),o.tmpMatrix.values[e.M03]=-t.x,o.tmpMatrix.values[e.M13]=-t.y,o.tmpMatrix.values[e.M23]=-t.z,this.multiply(o.tmpMatrix),this},o.initTemps=function(){o.xAxis===null&&(o.xAxis=new e.Vector3),o.yAxis===null&&(o.yAxis=new e.Vector3),o.zAxis===null&&(o.zAxis=new e.Vector3)},o.xAxis=null,o.yAxis=null,o.zAxis=null,o.tmpMatrix=new o,o}();e.Matrix4=l})(u.webgl||(u.webgl={}))}(p||(p={})),function(u){(function(e){var l=function(){function c(d,f,v,m){this.attributes=f,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=d instanceof e.ManagedWebGLRenderingContext?d:new e.ManagedWebGLRenderingContext(d),this.elementsPerVertex=0;for(var x=0;x<f.length;x++)this.elementsPerVertex+=f[x].numElements;this.vertices=new Float32Array(v*this.elementsPerVertex),this.indices=new Uint16Array(m),this.context.addRestorable(this)}return c.prototype.getAttributes=function(){return this.attributes},c.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},c.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},c.prototype.setVerticesLength=function(d){this.dirtyVertices=!0,this.verticesLength=d},c.prototype.getVertices=function(){return this.vertices},c.prototype.maxIndices=function(){return this.indices.length},c.prototype.numIndices=function(){return this.indicesLength},c.prototype.setIndicesLength=function(d){this.dirtyIndices=!0,this.indicesLength=d},c.prototype.getIndices=function(){return this.indices},c.prototype.getVertexSizeInFloats=function(){for(var d=0,f=0;f<this.attributes.length;f++)d+=this.attributes[f].numElements;return d},c.prototype.setVertices=function(d){if(this.dirtyVertices=!0,d.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(d,0),this.verticesLength=d.length},c.prototype.setIndices=function(d){if(this.dirtyIndices=!0,d.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(d,0),this.indicesLength=d.length},c.prototype.draw=function(d,f){this.drawWithOffset(d,f,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},c.prototype.drawWithOffset=function(d,f,v,m){var x=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(d),this.indicesLength>0?x.drawElements(f,m,x.UNSIGNED_SHORT,2*v):x.drawArrays(f,v,m),this.unbind(d)},c.prototype.bind=function(d){var f=this.context.gl;f.bindBuffer(f.ARRAY_BUFFER,this.verticesBuffer);for(var v=0,m=0;m<this.attributes.length;m++){var x=this.attributes[m],T=d.getAttributeLocation(x.name);f.enableVertexAttribArray(T),f.vertexAttribPointer(T,x.numElements,f.FLOAT,!1,4*this.elementsPerVertex,4*v),v+=x.numElements}this.indicesLength>0&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},c.prototype.unbind=function(d){for(var f=this.context.gl,v=0;v<this.attributes.length;v++){var m=this.attributes[v],x=d.getAttributeLocation(m.name);f.disableVertexAttribArray(x)}f.bindBuffer(f.ARRAY_BUFFER,null),this.indicesLength>0&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null)},c.prototype.update=function(){var d=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=d.createBuffer()),d.bindBuffer(d.ARRAY_BUFFER,this.verticesBuffer),d.bufferData(d.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),d.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=d.createBuffer()),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),d.DYNAMIC_DRAW),this.dirtyIndices=!1)},c.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},c.prototype.dispose=function(){this.context.removeRestorable(this);var d=this.context.gl;d.deleteBuffer(this.verticesBuffer),d.deleteBuffer(this.indicesBuffer)},c}();e.Mesh=l;var o=function(c,d,f){this.name=c,this.type=d,this.numElements=f};e.VertexAttribute=o;var t=function(c){function d(){return c.call(this,e.Shader.POSITION,h.Float,2)||this}return i(d,c),d}(o);e.Position2Attribute=t;var s=function(c){function d(){return c.call(this,e.Shader.POSITION,h.Float,3)||this}return i(d,c),d}(o);e.Position3Attribute=s;var n=function(c){function d(f){return f===void 0&&(f=0),c.call(this,e.Shader.TEXCOORDS+(f==0?"":f),h.Float,2)||this}return i(d,c),d}(o);e.TexCoordAttribute=n;var r=function(c){function d(){return c.call(this,e.Shader.COLOR,h.Float,4)||this}return i(d,c),d}(o);e.ColorAttribute=r;var h,a=function(c){function d(){return c.call(this,e.Shader.COLOR2,h.Float,4)||this}return i(d,c),d}(o);e.Color2Attribute=a,function(c){c[c.Float=0]="Float"}(h=e.VertexAttributeType||(e.VertexAttributeType={}))})(u.webgl||(u.webgl={}))}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(){function o(t,s,n){if(s===void 0&&(s=!0),n===void 0&&(n=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t);var r=s?[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute,new e.Color2Attribute]:[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute];this.mesh=new e.Mesh(t,r,n,3*n),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return o.prototype.begin=function(t){var s=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,s.enable(s.BLEND),s.blendFunc(this.srcBlend,this.dstBlend)},o.prototype.setBlendMode=function(t,s){var n=this.context.gl;this.srcBlend=t,this.dstBlend=s,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},o.prototype.draw=function(t,s,n){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+s.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();var r=this.mesh.numVertices();this.mesh.getVertices().set(s,this.verticesLength),this.verticesLength+=s.length,this.mesh.setVerticesLength(this.verticesLength);for(var h=this.mesh.getIndices(),a=this.indicesLength,c=0;c<n.length;a++,c++)h[a]=n[c]+r;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength)},o.prototype.flush=function(){var t=this.context.gl;this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},o.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},o.prototype.getDrawCalls=function(){return this.drawCalls},o.prototype.dispose=function(){this.mesh.dispose()},o}(),e.PolygonBatcher=l}(p||(p={})),function(u){var e,l,o;e=u.webgl||(u.webgl={}),o=function(){function t(s,n,r){r===void 0&&(r=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new u.Color(1,1,1,1),this.canvas=s,this.context=n instanceof e.ManagedWebGLRenderingContext?n:new e.ManagedWebGLRenderingContext(n),this.twoColorTint=r,this.camera=new e.OrthoCamera(s.width,s.height),this.batcherShader=r?e.Shader.newTwoColoredTextured(this.context):e.Shader.newColoredTextured(this.context),this.batcher=new e.PolygonBatcher(this.context,r),this.shapesShader=e.Shader.newColored(this.context),this.shapes=new e.ShapeRenderer(this.context),this.skeletonRenderer=new e.SkeletonRenderer(this.context,r),this.skeletonDebugRenderer=new e.SkeletonDebugRenderer(this.context)}return t.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},t.prototype.drawSkeleton=function(s,n,r,h){n===void 0&&(n=!1),r===void 0&&(r=-1),h===void 0&&(h=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=n,this.skeletonRenderer.draw(this.batcher,s,r,h)},t.prototype.drawSkeletonDebug=function(s,n,r){n===void 0&&(n=!1),r===void 0&&(r=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=n,this.skeletonDebugRenderer.draw(this.shapes,s,r)},t.prototype.drawTexture=function(s,n,r,h,a,c){c===void 0&&(c=null),this.enableRenderer(this.batcher),c===null&&(c=this.WHITE);var d=this.QUAD,f=0;d[f++]=n,d[f++]=r,d[f++]=c.r,d[f++]=c.g,d[f++]=c.b,d[f++]=c.a,d[f++]=0,d[f++]=1,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=n+h,d[f++]=r,d[f++]=c.r,d[f++]=c.g,d[f++]=c.b,d[f++]=c.a,d[f++]=1,d[f++]=1,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=n+h,d[f++]=r+a,d[f++]=c.r,d[f++]=c.g,d[f++]=c.b,d[f++]=c.a,d[f++]=1,d[f++]=0,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=n,d[f++]=r+a,d[f++]=c.r,d[f++]=c.g,d[f++]=c.b,d[f++]=c.a,d[f++]=0,d[f++]=0,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),this.batcher.draw(s,d,this.QUAD_TRIANGLES)},t.prototype.drawTextureUV=function(s,n,r,h,a,c,d,f,v,m){m===void 0&&(m=null),this.enableRenderer(this.batcher),m===null&&(m=this.WHITE);var x=this.QUAD,T=0;x[T++]=n,x[T++]=r,x[T++]=m.r,x[T++]=m.g,x[T++]=m.b,x[T++]=m.a,x[T++]=c,x[T++]=d,this.twoColorTint&&(x[T++]=0,x[T++]=0,x[T++]=0,x[T++]=0),x[T++]=n+h,x[T++]=r,x[T++]=m.r,x[T++]=m.g,x[T++]=m.b,x[T++]=m.a,x[T++]=f,x[T++]=d,this.twoColorTint&&(x[T++]=0,x[T++]=0,x[T++]=0,x[T++]=0),x[T++]=n+h,x[T++]=r+a,x[T++]=m.r,x[T++]=m.g,x[T++]=m.b,x[T++]=m.a,x[T++]=f,x[T++]=v,this.twoColorTint&&(x[T++]=0,x[T++]=0,x[T++]=0,x[T++]=0),x[T++]=n,x[T++]=r+a,x[T++]=m.r,x[T++]=m.g,x[T++]=m.b,x[T++]=m.a,x[T++]=c,x[T++]=v,this.twoColorTint&&(x[T++]=0,x[T++]=0,x[T++]=0,x[T++]=0),this.batcher.draw(s,x,this.QUAD_TRIANGLES)},t.prototype.drawTextureRotated=function(s,n,r,h,a,c,d,f,v,m){v===void 0&&(v=null),this.enableRenderer(this.batcher),v===null&&(v=this.WHITE);var x=this.QUAD,T=n+c,y=r+d,E=-c,w=-d,R=h-c,C=a-d,A=E,S=w,b=E,_=C,P=R,D=C,O=R,F=w,N=0,k=0,L=0,U=0,Y=0,B=0,W=0,G=0;if(f!=0){var X=u.MathUtils.cosDeg(f),q=u.MathUtils.sinDeg(f);L=(Y=X*P-q*D)+((N=X*A-q*S)-(W=X*b-q*_)),U=(B=q*P+X*D)+((k=q*A+X*S)-(G=q*b+X*_))}else N=A,k=S,W=b,G=_,Y=P,B=D,L=O,U=F;N+=T,k+=y,L+=T,U+=y,Y+=T,B+=y,W+=T,G+=y;var j=0;x[j++]=N,x[j++]=k,x[j++]=v.r,x[j++]=v.g,x[j++]=v.b,x[j++]=v.a,x[j++]=0,x[j++]=1,this.twoColorTint&&(x[j++]=0,x[j++]=0,x[j++]=0,x[j++]=0),x[j++]=L,x[j++]=U,x[j++]=v.r,x[j++]=v.g,x[j++]=v.b,x[j++]=v.a,x[j++]=1,x[j++]=1,this.twoColorTint&&(x[j++]=0,x[j++]=0,x[j++]=0,x[j++]=0),x[j++]=Y,x[j++]=B,x[j++]=v.r,x[j++]=v.g,x[j++]=v.b,x[j++]=v.a,x[j++]=1,x[j++]=0,this.twoColorTint&&(x[j++]=0,x[j++]=0,x[j++]=0,x[j++]=0),x[j++]=W,x[j++]=G,x[j++]=v.r,x[j++]=v.g,x[j++]=v.b,x[j++]=v.a,x[j++]=0,x[j++]=0,this.twoColorTint&&(x[j++]=0,x[j++]=0,x[j++]=0,x[j++]=0),this.batcher.draw(s,x,this.QUAD_TRIANGLES)},t.prototype.drawRegion=function(s,n,r,h,a,c,d){c===void 0&&(c=null),this.enableRenderer(this.batcher),c===null&&(c=this.WHITE);var f=this.QUAD,v=0;f[v++]=n,f[v++]=r,f[v++]=c.r,f[v++]=c.g,f[v++]=c.b,f[v++]=c.a,f[v++]=s.u,f[v++]=s.v2,this.twoColorTint&&(f[v++]=0,f[v++]=0,f[v++]=0,f[v++]=0),f[v++]=n+h,f[v++]=r,f[v++]=c.r,f[v++]=c.g,f[v++]=c.b,f[v++]=c.a,f[v++]=s.u2,f[v++]=s.v2,this.twoColorTint&&(f[v++]=0,f[v++]=0,f[v++]=0,f[v++]=0),f[v++]=n+h,f[v++]=r+a,f[v++]=c.r,f[v++]=c.g,f[v++]=c.b,f[v++]=c.a,f[v++]=s.u2,f[v++]=s.v,this.twoColorTint&&(f[v++]=0,f[v++]=0,f[v++]=0,f[v++]=0),f[v++]=n,f[v++]=r+a,f[v++]=c.r,f[v++]=c.g,f[v++]=c.b,f[v++]=c.a,f[v++]=s.u,f[v++]=s.v,this.twoColorTint&&(f[v++]=0,f[v++]=0,f[v++]=0,f[v++]=0),this.batcher.draw(s.texture,f,this.QUAD_TRIANGLES)},t.prototype.line=function(s,n,r,h,a,c){a===void 0&&(a=null),this.enableRenderer(this.shapes),this.shapes.line(s,n,r,h,a)},t.prototype.triangle=function(s,n,r,h,a,c,d,f,v,m){f===void 0&&(f=null),v===void 0&&(v=null),m===void 0&&(m=null),this.enableRenderer(this.shapes),this.shapes.triangle(s,n,r,h,a,c,d,f,v,m)},t.prototype.quad=function(s,n,r,h,a,c,d,f,v,m,x,T,y){m===void 0&&(m=null),x===void 0&&(x=null),T===void 0&&(T=null),y===void 0&&(y=null),this.enableRenderer(this.shapes),this.shapes.quad(s,n,r,h,a,c,d,f,v,m,x,T,y)},t.prototype.rect=function(s,n,r,h,a,c){c===void 0&&(c=null),this.enableRenderer(this.shapes),this.shapes.rect(s,n,r,h,a,c)},t.prototype.rectLine=function(s,n,r,h,a,c,d){d===void 0&&(d=null),this.enableRenderer(this.shapes),this.shapes.rectLine(s,n,r,h,a,c,d)},t.prototype.polygon=function(s,n,r,h){h===void 0&&(h=null),this.enableRenderer(this.shapes),this.shapes.polygon(s,n,r,h)},t.prototype.circle=function(s,n,r,h,a,c){a===void 0&&(a=null),c===void 0&&(c=0),this.enableRenderer(this.shapes),this.shapes.circle(s,n,r,h,a,c)},t.prototype.curve=function(s,n,r,h,a,c,d,f,v,m){m===void 0&&(m=null),this.enableRenderer(this.shapes),this.shapes.curve(s,n,r,h,a,c,d,f,v,m)},t.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},t.prototype.resize=function(s){var n=this.canvas,r=n.clientWidth,h=n.clientHeight;if(n.width==r&&n.height==h||(n.width=r,n.height=h),this.context.gl.viewport(0,0,n.width,n.height),s!==l.Stretch){if(s===l.Expand)this.camera.setViewport(r,h);else if(s===l.Fit){var a=n.width,c=n.height,d=this.camera.viewportWidth,f=this.camera.viewportHeight,v=f/d<c/a?d/a:f/c;this.camera.viewportWidth=a*v,this.camera.viewportHeight=c*v}}this.camera.update()},t.prototype.enableRenderer=function(s){this.activeRenderer!==s&&(this.end(),s instanceof e.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):s instanceof e.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},t.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},t}(),e.SceneRenderer=o,function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(l=e.ResizeMode||(e.ResizeMode={}))}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(){function o(t,s,n){this.vertexShader=s,this.fragmentShader=n,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=s,this.fsSource=n,this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return o.prototype.getProgram=function(){return this.program},o.prototype.getVertexShader=function(){return this.vertexShader},o.prototype.getFragmentShader=function(){return this.fragmentShader},o.prototype.getVertexShaderSource=function(){return this.vsSource},o.prototype.getFragmentSource=function(){return this.fsSource},o.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(s){throw this.dispose(),s}},o.prototype.compileShader=function(t,s){var n=this.context.gl,r=n.createShader(t);if(n.shaderSource(r,s),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var h="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(h)}return r},o.prototype.compileProgram=function(t,s){var n=this.context.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){var h="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(h)}return r},o.prototype.restore=function(){this.compile()},o.prototype.bind=function(){this.context.gl.useProgram(this.program)},o.prototype.unbind=function(){this.context.gl.useProgram(null)},o.prototype.setUniformi=function(t,s){this.context.gl.uniform1i(this.getUniformLocation(t),s)},o.prototype.setUniformf=function(t,s){this.context.gl.uniform1f(this.getUniformLocation(t),s)},o.prototype.setUniform2f=function(t,s,n){this.context.gl.uniform2f(this.getUniformLocation(t),s,n)},o.prototype.setUniform3f=function(t,s,n,r){this.context.gl.uniform3f(this.getUniformLocation(t),s,n,r)},o.prototype.setUniform4f=function(t,s,n,r,h){this.context.gl.uniform4f(this.getUniformLocation(t),s,n,r,h)},o.prototype.setUniform2x2f=function(t,s){var n=this.context.gl;this.tmp2x2.set(s),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},o.prototype.setUniform3x3f=function(t,s){var n=this.context.gl;this.tmp3x3.set(s),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},o.prototype.setUniform4x4f=function(t,s){var n=this.context.gl;this.tmp4x4.set(s),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},o.prototype.getUniformLocation=function(t){var s=this.context.gl,n=s.getUniformLocation(this.program,t);if(!n&&!s.isContextLost())throw new Error("Couldn't find location for uniform "+t);return n},o.prototype.getAttributeLocation=function(t){var s=this.context.gl,n=s.getAttribLocation(this.program,t);if(n==-1&&!s.isContextLost())throw new Error("Couldn't find location for attribute "+t);return n},o.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},o.newColoredTextured=function(t){return new o(t,`
				attribute vec4 `+o.POSITION+`;
				attribute vec4 `+o.COLOR+`;
				attribute vec2 `+o.TEXCOORDS+`;
				uniform mat4 `+o.MVP_MATRIX+`;
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = `+o.COLOR+`;
					v_texCoords = `+o.TEXCOORDS+`;
					gl_Position = `+o.MVP_MATRIX+" * "+o.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`)},o.newTwoColoredTextured=function(t){return new o(t,`
				attribute vec4 `+o.POSITION+`;
				attribute vec4 `+o.COLOR+`;
				attribute vec4 `+o.COLOR2+`;
				attribute vec2 `+o.TEXCOORDS+`;
				uniform mat4 `+o.MVP_MATRIX+`;
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = `+o.COLOR+`;
					v_dark = `+o.COLOR2+`;
					v_texCoords = `+o.TEXCOORDS+`;
					gl_Position = `+o.MVP_MATRIX+" * "+o.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`)},o.newColored=function(t){return new o(t,`
				attribute vec4 `+o.POSITION+`;
				attribute vec4 `+o.COLOR+`;
				uniform mat4 `+o.MVP_MATRIX+`;
				varying vec4 v_color;

				void main () {
					v_color = `+o.COLOR+`;
					gl_Position = `+o.MVP_MATRIX+" * "+o.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`)},o.MVP_MATRIX="u_projTrans",o.POSITION="a_position",o.COLOR="a_color",o.COLOR2="a_color2",o.TEXCOORDS="a_texCoords",o.SAMPLER="u_texture",o}(),e.Shader=l}(p||(p={})),function(u){var e,l,o;e=u.webgl||(u.webgl={}),o=function(){function t(s,n){if(n===void 0&&(n=10920),this.isDrawing=!1,this.shapeType=l.Filled,this.color=new u.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new u.Vector2,n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=s instanceof e.ManagedWebGLRenderingContext?s:new e.ManagedWebGLRenderingContext(s),this.mesh=new e.Mesh(s,[new e.Position2Attribute,new e.ColorAttribute],n,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return t.prototype.begin=function(s){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=s,this.vertexIndex=0,this.isDrawing=!0;var n=this.context.gl;n.enable(n.BLEND),n.blendFunc(this.srcBlend,this.dstBlend)},t.prototype.setBlendMode=function(s,n){var r=this.context.gl;this.srcBlend=s,this.dstBlend=n,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},t.prototype.setColor=function(s){this.color.setFromColor(s)},t.prototype.setColorWith=function(s,n,r,h){this.color.set(s,n,r,h)},t.prototype.point=function(s,n,r){r===void 0&&(r=null),this.check(l.Point,1),r===null&&(r=this.color),this.vertex(s,n,r)},t.prototype.line=function(s,n,r,h,a){a===void 0&&(a=null),this.check(l.Line,2),this.mesh.getVertices(),this.vertexIndex,a===null&&(a=this.color),this.vertex(s,n,a),this.vertex(r,h,a)},t.prototype.triangle=function(s,n,r,h,a,c,d,f,v,m){f===void 0&&(f=null),v===void 0&&(v=null),m===void 0&&(m=null),this.check(s?l.Filled:l.Line,3),this.mesh.getVertices(),this.vertexIndex,f===null&&(f=this.color),v===null&&(v=this.color),m===null&&(m=this.color),s?(this.vertex(n,r,f),this.vertex(h,a,v),this.vertex(c,d,m)):(this.vertex(n,r,f),this.vertex(h,a,v),this.vertex(h,a,f),this.vertex(c,d,v),this.vertex(c,d,f),this.vertex(n,r,v))},t.prototype.quad=function(s,n,r,h,a,c,d,f,v,m,x,T,y){m===void 0&&(m=null),x===void 0&&(x=null),T===void 0&&(T=null),y===void 0&&(y=null),this.check(s?l.Filled:l.Line,3),this.mesh.getVertices(),this.vertexIndex,m===null&&(m=this.color),x===null&&(x=this.color),T===null&&(T=this.color),y===null&&(y=this.color),s?(this.vertex(n,r,m),this.vertex(h,a,x),this.vertex(c,d,T),this.vertex(c,d,T),this.vertex(f,v,y),this.vertex(n,r,m)):(this.vertex(n,r,m),this.vertex(h,a,x),this.vertex(h,a,x),this.vertex(c,d,T),this.vertex(c,d,T),this.vertex(f,v,y),this.vertex(f,v,y),this.vertex(n,r,m))},t.prototype.rect=function(s,n,r,h,a,c){c===void 0&&(c=null),this.quad(s,n,r,n+h,r,n+h,r+a,n,r+a,c,c,c,c)},t.prototype.rectLine=function(s,n,r,h,a,c,d){d===void 0&&(d=null),this.check(s?l.Filled:l.Line,8),d===null&&(d=this.color);var f=this.tmp.set(a-r,n-h);f.normalize(),c*=.5;var v=f.x*c,m=f.y*c;s?(this.vertex(n+v,r+m,d),this.vertex(n-v,r-m,d),this.vertex(h+v,a+m,d),this.vertex(h-v,a-m,d),this.vertex(h+v,a+m,d),this.vertex(n-v,r-m,d)):(this.vertex(n+v,r+m,d),this.vertex(n-v,r-m,d),this.vertex(h+v,a+m,d),this.vertex(h-v,a-m,d),this.vertex(h+v,a+m,d),this.vertex(n+v,r+m,d),this.vertex(h-v,a-m,d),this.vertex(n-v,r-m,d))},t.prototype.x=function(s,n,r){this.line(s-r,n-r,s+r,n+r),this.line(s-r,n+r,s+r,n-r)},t.prototype.polygon=function(s,n,r,h){if(h===void 0&&(h=null),r<3)throw new Error("Polygon must contain at least 3 vertices");this.check(l.Line,2*r),h===null&&(h=this.color),this.mesh.getVertices(),this.vertexIndex,r<<=1;for(var a=s[n<<=1],c=s[n+1],d=n+r,f=n,v=n+r-2;f<v;f+=2){var m=s[f],x=s[f+1],T=0,y=0;f+2>=d?(T=a,y=c):(T=s[f+2],y=s[f+3]),this.vertex(m,x,h),this.vertex(T,y,h)}},t.prototype.circle=function(s,n,r,h,a,c){if(a===void 0&&(a=null),c===void 0&&(c=0),c===0&&(c=Math.max(1,6*u.MathUtils.cbrt(h)|0)),c<=0)throw new Error("segments must be > 0.");a===null&&(a=this.color);var d=2*u.MathUtils.PI/c,f=Math.cos(d),v=Math.sin(d),m=h,x=0;if(s){for(this.check(l.Filled,3*c+3),c--,y=0;y<c;y++){this.vertex(n,r,a),this.vertex(n+m,r+x,a);var T=m;m=f*m-v*x,x=v*T+f*x,this.vertex(n+m,r+x,a)}this.vertex(n,r,a),this.vertex(n+m,r+x,a)}else{this.check(l.Line,2*c+2);for(var y=0;y<c;y++){this.vertex(n+m,r+x,a);var E=m;m=f*m-v*x,x=v*E+f*x,this.vertex(n+m,r+x,a)}this.vertex(n+m,r+x,a)}m=h,x=0,this.vertex(n+m,r+x,a)},t.prototype.curve=function(s,n,r,h,a,c,d,f,v,m){m===void 0&&(m=null),this.check(l.Line,2*v+2),m===null&&(m=this.color);for(var x=1/v,T=x*x,y=x*x*x,E=3*x,w=3*T,R=6*T,C=6*y,A=s-2*r+a,S=n-2*h+c,b=3*(r-a)-s+d,_=3*(h-c)-n+f,P=s,D=n,O=(r-s)*E+A*w+b*y,F=(h-n)*E+S*w+_*y,N=A*R+b*C,k=S*R+_*C,L=b*C,U=_*C;v-- >0;)this.vertex(P,D,m),P+=O,D+=F,O+=N,F+=k,N+=L,k+=U,this.vertex(P,D,m);this.vertex(P,D,m),this.vertex(d,f,m)},t.prototype.vertex=function(s,n,r){var h=this.vertexIndex,a=this.mesh.getVertices();a[h++]=s,a[h++]=n,a[h++]=r.r,a[h++]=r.g,a[h++]=r.b,a[h++]=r.a,this.vertexIndex=h},t.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},t.prototype.flush=function(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},t.prototype.check=function(s,n){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==s){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<n))return;this.flush()}else this.flush(),this.shapeType=s},t.prototype.dispose=function(){this.mesh.dispose()},t}(),e.ShapeRenderer=o,function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(l=e.ShapeType||(e.ShapeType={}))}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(){function o(t){this.boneLineColor=new u.Color(1,0,0,1),this.boneOriginColor=new u.Color(0,1,0,1),this.attachmentLineColor=new u.Color(0,0,1,.5),this.triangleLineColor=new u.Color(1,.64,0,.5),this.pathColor=new u.Color().setFromString("FF7F00"),this.clipColor=new u.Color(.8,0,0,2),this.aabbColor=new u.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new u.SkeletonBounds,this.temp=new Array,this.vertices=u.Utils.newFloatArray(2048),this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t)}return o.prototype.draw=function(t,s,n){n===void 0&&(n=null);var r=s.x,h=s.y,a=this.context.gl,c=this.premultipliedAlpha?a.ONE:a.SRC_ALPHA;t.setBlendMode(c,a.ONE_MINUS_SRC_ALPHA);var d=s.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(var f=0,v=d.length;f<v;f++){var m=d[f];if(!(n&&n.indexOf(m.data.name)>-1)&&m.parent!=null){var x=r+m.data.length*m.a+m.worldX,T=h+m.data.length*m.c+m.worldY;t.rectLine(!0,r+m.worldX,h+m.worldY,x,T,this.boneWidth*this.scale)}}this.drawSkeletonXY&&t.x(r,h,4*this.scale)}if(this.drawRegionAttachments){for(t.setColor(this.attachmentLineColor),f=0,v=(Z=s.slots).length;f<v;f++)if((J=(Q=Z[f]).getAttachment())instanceof u.RegionAttachment){var y=J,E=this.vertices;y.computeWorldVertices(Q.bone,E,0,2),t.line(E[0],E[1],E[2],E[3]),t.line(E[2],E[3],E[4],E[5]),t.line(E[4],E[5],E[6],E[7]),t.line(E[6],E[7],E[0],E[1])}}if(this.drawMeshHull||this.drawMeshTriangles){for(f=0,v=(Z=s.slots).length;f<v;f++)if((Q=Z[f]).bone.active&&(J=Q.getAttachment())instanceof u.MeshAttachment){var w=J;E=this.vertices,w.computeWorldVertices(Q,0,w.worldVerticesLength,E,0,2);var R=w.triangles,C=w.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(var A=0,S=R.length;A<S;A+=3){var b=2*R[A],_=2*R[A+1],P=2*R[A+2];t.triangle(!1,E[b],E[b+1],E[_],E[_+1],E[P],E[P+1])}}if(this.drawMeshHull&&C>0){t.setColor(this.attachmentLineColor);var D=E[(C=2*(C>>1))-2],O=E[C-1];for(A=0,S=C;A<S;A+=2)x=E[A],T=E[A+1],t.line(x,T,D,O),D=x,O=T}}}if(this.drawBoundingBoxes){var F=this.bounds;F.update(s,!0),t.setColor(this.aabbColor),t.rect(!1,F.minX,F.minY,F.getWidth(),F.getHeight());var N=F.polygons,k=F.boundingBoxes;for(f=0,v=N.length;f<v;f++){var L=N[f];t.setColor(k[f].color),t.polygon(L,0,L.length)}}if(this.drawPaths){for(f=0,v=(Z=s.slots).length;f<v;f++)if((Q=Z[f]).bone.active&&(J=Q.getAttachment())instanceof u.PathAttachment){var U=J,Y=(S=U.worldVerticesLength,this.temp=u.Utils.setArraySize(this.temp,S,0));U.computeWorldVertices(Q,0,S,Y,0,2);var B=this.pathColor,W=Y[2],G=Y[3],X=0,q=0;if(U.closed){t.setColor(B);var j=Y[0],V=Y[1],K=Y[S-2],H=Y[S-1];X=Y[S-4],q=Y[S-3],t.curve(W,G,j,V,K,H,X,q,32),t.setColor(o.LIGHT_GRAY),t.line(W,G,j,V),t.line(X,q,K,H)}for(S-=4,A=4;A<S;A+=6)j=Y[A],V=Y[A+1],K=Y[A+2],H=Y[A+3],X=Y[A+4],q=Y[A+5],t.setColor(B),t.curve(W,G,j,V,K,H,X,q,32),t.setColor(o.LIGHT_GRAY),t.line(W,G,j,V),t.line(X,q,K,H),W=X,G=q}}if(this.drawBones)for(t.setColor(this.boneOriginColor),f=0,v=d.length;f<v;f++)m=d[f],n&&n.indexOf(m.data.name)>-1||t.circle(!0,r+m.worldX,h+m.worldY,3*this.scale,o.GREEN,8);if(this.drawClipping){var Z=s.slots;for(t.setColor(this.clipColor),f=0,v=Z.length;f<v;f++){var Q,J;if((Q=Z[f]).bone.active&&(J=Q.getAttachment())instanceof u.ClippingAttachment){var et=J;S=et.worldVerticesLength,Y=this.temp=u.Utils.setArraySize(this.temp,S,0),et.computeWorldVertices(Q,0,S,Y,0,2);for(var $=0,tt=Y.length;$<tt;$+=2)x=Y[$],T=Y[$+1],X=Y[($+2)%Y.length],q=Y[($+3)%Y.length],t.line(x,T,X,q)}}}},o.prototype.dispose=function(){},o.LIGHT_GRAY=new u.Color(192/255,192/255,192/255,1),o.GREEN=new u.Color(0,1,0,1),o}(),e.SkeletonDebugRenderer=l}(p||(p={})),function(u){var e,l,o;e=u.webgl||(u.webgl={}),l=function(t,s,n){this.vertices=t,this.numVertices=s,this.numFloats=n},o=function(){function t(s,n){n===void 0&&(n=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new u.Color,this.tempColor2=new u.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new l(null,0,0),this.clipper=new u.SkeletonClipping,this.temp=new u.Vector2,this.temp2=new u.Vector2,this.temp3=new u.Color,this.temp4=new u.Color,this.twoColorTint=n,n&&(this.vertexSize+=4),this.vertices=u.Utils.newFloatArray(1024*this.vertexSize)}return t.prototype.draw=function(s,n,r,h){r===void 0&&(r=-1),h===void 0&&(h=-1);var a=this.clipper,c=this.premultipliedAlpha,d=this.twoColorTint,f=null,v=this.temp,m=this.temp2,x=this.temp3,T=this.temp4,y=this.renderable,E=null,w=null,R=n.drawOrder,C=null,A=n.color,S=d?12:8,b=!1;r==-1&&(b=!0);for(var _=0,P=R.length;_<P;_++){var D=a.isClipping()?2:S,O=R[_];if(O.bone.active)if(r>=0&&r==O.data.index&&(b=!0),b){h>=0&&h==O.data.index&&(b=!1);var F=O.getAttachment(),N=null;if(F instanceof u.RegionAttachment){var k=F;y.vertices=this.vertices,y.numVertices=4,y.numFloats=D<<2,k.computeWorldVertices(O.bone,y.vertices,0,D),w=t.QUAD_TRIANGLES,E=k.uvs,N=k.region.renderObject.texture,C=k.color}else{if(!(F instanceof u.MeshAttachment)){if(F instanceof u.ClippingAttachment){var L=F;a.clipStart(O,L);continue}a.clipEndWithSlot(O);continue}var U=F;y.vertices=this.vertices,y.numVertices=U.worldVerticesLength>>1,y.numFloats=y.numVertices*D,y.numFloats>y.vertices.length&&(y.vertices=this.vertices=u.Utils.newFloatArray(y.numFloats)),U.computeWorldVertices(O,0,U.worldVerticesLength,y.vertices,0,D),w=U.triangles,N=U.region.renderObject.texture,E=U.uvs,C=U.color}if(N!=null){var Y=O.color,B=this.tempColor;B.r=A.r*Y.r*C.r,B.g=A.g*Y.g*C.g,B.b=A.b*Y.b*C.b,B.a=A.a*Y.a*C.a,c&&(B.r*=B.a,B.g*=B.a,B.b*=B.a);var W=this.tempColor2;O.darkColor==null?W.set(0,0,0,1):(c?(W.r=O.darkColor.r*B.a,W.g=O.darkColor.g*B.a,W.b=O.darkColor.b*B.a):W.setFromColor(O.darkColor),W.a=c?1:0);var G=O.data.blendMode;if(G!=f&&(f=G,s.setBlendMode(e.WebGLBlendModeConverter.getSourceGLBlendMode(f,c),e.WebGLBlendModeConverter.getDestGLBlendMode(f))),a.isClipping()){a.clipTriangles(y.vertices,y.numFloats,w,w.length,E,B,W,d);var X=new Float32Array(a.clippedVertices),q=a.clippedTriangles;if(this.vertexEffect!=null){var j=this.vertexEffect,V=X;if(d){H=0;for(var K=X.length;H<K;H+=S)v.x=V[H],v.y=V[H+1],x.set(V[H+2],V[H+3],V[H+4],V[H+5]),m.x=V[H+6],m.y=V[H+7],T.set(V[H+8],V[H+9],V[H+10],V[H+11]),j.transform(v,m,x,T),V[H]=v.x,V[H+1]=v.y,V[H+2]=x.r,V[H+3]=x.g,V[H+4]=x.b,V[H+5]=x.a,V[H+6]=m.x,V[H+7]=m.y,V[H+8]=T.r,V[H+9]=T.g,V[H+10]=T.b,V[H+11]=T.a}else for(var H=0,Z=X.length;H<Z;H+=S)v.x=V[H],v.y=V[H+1],x.set(V[H+2],V[H+3],V[H+4],V[H+5]),m.x=V[H+6],m.y=V[H+7],T.set(0,0,0,0),j.transform(v,m,x,T),V[H]=v.x,V[H+1]=v.y,V[H+2]=x.r,V[H+3]=x.g,V[H+4]=x.b,V[H+5]=x.a,V[H+6]=m.x,V[H+7]=m.y}s.draw(N,X,q)}else{if(V=y.vertices,this.vertexEffect!=null)if(j=this.vertexEffect,d){H=0,J=0;for(var Q=y.numFloats;H<Q;H+=S,J+=2)v.x=V[H],v.y=V[H+1],m.x=E[J],m.y=E[J+1],x.setFromColor(B),T.setFromColor(W),j.transform(v,m,x,T),V[H]=v.x,V[H+1]=v.y,V[H+2]=x.r,V[H+3]=x.g,V[H+4]=x.b,V[H+5]=x.a,V[H+6]=m.x,V[H+7]=m.y,V[H+8]=T.r,V[H+9]=T.g,V[H+10]=T.b,V[H+11]=T.a}else{H=0;for(var J=0,et=y.numFloats;H<et;H+=S,J+=2)v.x=V[H],v.y=V[H+1],m.x=E[J],m.y=E[J+1],x.setFromColor(B),T.set(0,0,0,0),j.transform(v,m,x,T),V[H]=v.x,V[H+1]=v.y,V[H+2]=x.r,V[H+3]=x.g,V[H+4]=x.b,V[H+5]=x.a,V[H+6]=m.x,V[H+7]=m.y}else if(d){H=2,J=0;for(var $=y.numFloats;H<$;H+=S,J+=2)V[H]=B.r,V[H+1]=B.g,V[H+2]=B.b,V[H+3]=B.a,V[H+4]=E[J],V[H+5]=E[J+1],V[H+6]=W.r,V[H+7]=W.g,V[H+8]=W.b,V[H+9]=W.a}else{H=2,J=0;for(var tt=y.numFloats;H<tt;H+=S,J+=2)V[H]=B.r,V[H+1]=B.g,V[H+2]=B.b,V[H+3]=B.a,V[H+4]=E[J],V[H+5]=E[J+1]}var it=y.vertices.subarray(0,y.numFloats);s.draw(N,it,w)}}a.clipEndWithSlot(O)}else a.clipEndWithSlot(O);else a.clipEndWithSlot(O)}a.clipEnd()},t.QUAD_TRIANGLES=[0,1,2,2,3,0],t}(),e.SkeletonRenderer=o}(p||(p={})),function(u){var e,l;e=u.webgl||(u.webgl={}),l=function(){function o(t,s,n){t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=s,this.z=n}return o.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},o.prototype.set=function(t,s,n){return this.x=t,this.y=s,this.z=n,this},o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},o.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},o.prototype.normalize=function(){var t=this.length();return t==0||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},o.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},o.prototype.multiply=function(t){var s=t.values;return this.set(this.x*s[e.M00]+this.y*s[e.M01]+this.z*s[e.M02]+s[e.M03],this.x*s[e.M10]+this.y*s[e.M11]+this.z*s[e.M12]+s[e.M13],this.x*s[e.M20]+this.y*s[e.M21]+this.z*s[e.M22]+s[e.M23])},o.prototype.project=function(t){var s=t.values,n=1/(this.x*s[e.M30]+this.y*s[e.M31]+this.z*s[e.M32]+s[e.M33]);return this.set((this.x*s[e.M00]+this.y*s[e.M01]+this.z*s[e.M02]+s[e.M03])*n,(this.x*s[e.M10]+this.y*s[e.M11]+this.z*s[e.M12]+s[e.M13])*n,(this.x*s[e.M20]+this.y*s[e.M21]+this.z*s[e.M22]+s[e.M23])*n)},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},o.prototype.distance=function(t){var s=t.x-this.x,n=t.y-this.y,r=t.z-this.z;return Math.sqrt(s*s+n*n+r*r)},o}(),e.Vector3=l}(p||(p={})),function(u){(function(e){var l=function(){function t(s,n){n===void 0&&(n={alpha:"true"}),this.restorables=new Array,s instanceof HTMLCanvasElement||s instanceof EventTarget?this.setupCanvas(s,n):(this.gl=s,this.canvas=this.gl.canvas)}return t.prototype.setupCanvas=function(s,n){var r=this;this.gl=s.getContext("webgl2",n)||s.getContext("webgl",n),this.canvas=s,s.addEventListener("webglcontextlost",function(h){h&&h.preventDefault()}),s.addEventListener("webglcontextrestored",function(h){for(var a=0,c=r.restorables.length;a<c;a++)r.restorables[a].restore()})},t.prototype.addRestorable=function(s){this.restorables.push(s)},t.prototype.removeRestorable=function(s){var n=this.restorables.indexOf(s);n>-1&&this.restorables.splice(n,1)},t}();e.ManagedWebGLRenderingContext=l;var o=function(){function t(){}return t.getDestGLBlendMode=function(s){switch(s){case u.BlendMode.Normal:return t.ONE_MINUS_SRC_ALPHA;case u.BlendMode.Additive:return t.ONE;case u.BlendMode.Multiply:case u.BlendMode.Screen:return t.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+s)}},t.getSourceGLBlendMode=function(s,n){switch(n===void 0&&(n=!1),s){case u.BlendMode.Normal:case u.BlendMode.Additive:return n?t.ONE:t.SRC_ALPHA;case u.BlendMode.Multiply:return t.DST_COLOR;case u.BlendMode.Screen:return t.ONE;default:throw new Error("Unknown blend mode: "+s)}},t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t}();e.WebGLBlendModeConverter=o})(u.webgl||(u.webgl={}))}(p||(p={})),I.exports=p}).call(window)},function(I,z,M){var g=M(0),p=M(11),i=M(204),u=M(7),e=M(218),l=M(219),o=M(220),t=new g({Extends:l,initialize:function(s,n,r,h,a,c,d){var f,v,m,x=[],T=s.cacheManager.custom.spine;if(u(n)){var y=n;for(n=p(y,"key"),v=new e(s,{key:n,url:p(y,"jsonURL"),extension:p(y,"jsonExtension","json"),xhrSettings:p(y,"jsonXhrSettings")}),h=p(y,"atlasURL"),a=p(y,"preMultipliedAlpha"),Array.isArray(h)||(h=[h]),f=0;f<h.length;f++)(m=new o(s,{key:n+"!"+f,url:h[f],extension:p(y,"atlasExtension","atlas"),xhrSettings:p(y,"atlasXhrSettings")})).cache=T,x.push(m)}else for(v=new e(s,n,r,c),Array.isArray(h)||(h=[h]),f=0;f<h.length;f++)(m=new o(s,n+"!"+f,h[f],d)).cache=T,x.push(m);x.unshift(v),l.call(this,s,"spine",n,x),this.config.preMultipliedAlpha=a},onFileComplete:function(s){if(this.files.indexOf(s)!==-1&&(this.pending--,s.type==="text")){for(var n=s.data.split(`
`),r=[],h=0;h<n.length;h++){var a=n[h];a.trim()===""&&h<n.length-1&&(a=n[h+1],r.push(a))}var c=this.config,d=this.loader,f=d.baseURL,v=d.path,m=d.prefix,x=p(c,"baseURL",this.baseURL),T=p(c,"path",s.src.match(/^.*\//))[0],y=p(c,"prefix",this.prefix),E=p(c,"textureXhrSettings");d.setBaseURL(x),d.setPath(T),d.setPrefix(y);for(var w=0;w<r.length;w++){var R=r[w],C=new i(d,R,R,E);d.keyExists(C)||(this.addToMultiFile(C),d.addFile(C))}d.setBaseURL(f),d.setPath(v),d.setPrefix(m)}},addToCache:function(){if(this.isReadyToProcess()){var s;this.files[0].addToCache();for(var n="",r="",h=!!this.config.preMultipliedAlpha,a=this.loader.textureManager,c=1;c<this.files.length;c++){var d=this.files[c];if(d.type==="text")n=d.key.replace(/![\d]$/,""),s=d.cache,r=r.concat(d.data);else{var f=d.key.trim(),v=f.indexOf("!"),m=f.substr(v+1);a.exists(m)||a.addImage(m,d.data)}d.pendingDestroy()}s.add(n,{preMultipliedAlpha:h,data:r,prefix:this.prefix}),this.complete=!0}}});I.exports=t},function(I,z,M){var g=M(0),p=M(15),i=M(21),u=M(22),e=M(11),l=M(7),o=new g({Extends:i,initialize:function t(s,n,r,h,a){var c,d="png";if(l(n)){var f=n;n=e(f,"key"),r=e(f,"url"),c=e(f,"normalMap"),h=e(f,"xhrSettings"),d=e(f,"extension",d),a=e(f,"frameConfig")}Array.isArray(r)&&(c=r[1],r=r[0]);var v={type:"image",cache:s.textureManager,extension:d,responseType:"blob",key:n,url:r,xhrSettings:h,config:a};if(i.call(this,s,v),c){var m=new t(s,this.key,c,h,a);m.type="normalMap",this.setLink(m),s.addFile(m)}},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){i.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){i.revokeObjectURL(t.data),t.onProcessError()},i.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,s=this.linkFile;s&&s.state===p.FILE_COMPLETE?(t=this.type==="image"?this.cache.addImage(this.key,this.data,s.data):this.cache.addImage(s.key,s.data,this.data),this.pendingDestroy(t),s.pendingDestroy(t)):s||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});u.register("image",function(t,s,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new o(this,t[r]));else this.addFile(new o(this,t,s,n));return this}),I.exports=o},function(I,z,M){I.exports={ADD:M(206),COMPLETE:M(207),FILE_COMPLETE:M(208),FILE_KEY_COMPLETE:M(209),FILE_LOAD_ERROR:M(210),FILE_LOAD:M(211),FILE_PROGRESS:M(212),POST_PROCESS:M(213),PROGRESS:M(214),START:M(215)}},function(I,z){I.exports="addfile"},function(I,z){I.exports="complete"},function(I,z){I.exports="filecomplete"},function(I,z){I.exports="filecomplete-"},function(I,z){I.exports="loaderror"},function(I,z){I.exports="load"},function(I,z){I.exports="fileprogress"},function(I,z){I.exports="postprocess"},function(I,z){I.exports="progress"},function(I,z){I.exports="start"},function(I,z){I.exports=function(M,g){return!!M.url&&(M.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?M.url:g+M.url)}},function(I,z,M){var g=M(45);I.exports=function(p,i){var u=g(i,p.xhrSettings),e=new XMLHttpRequest;if(e.open("GET",p.src,u.async,u.user,u.password),e.responseType=p.xhrSettings.responseType,e.timeout=u.timeout,u.headers)for(var l in u.headers)e.setRequestHeader(l,u.headers[l]);return u.header&&u.headerValue&&e.setRequestHeader(u.header,u.headerValue),u.requestedWith&&e.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&e.overrideMimeType(u.overrideMimeType),u.withCredentials&&(e.withCredentials=!0),e.onload=p.onLoad.bind(p,e),e.onerror=p.onError.bind(p,e),e.onprogress=p.onProgress.bind(p),e.send(),e}},function(I,z,M){var g=M(0),p=M(15),i=M(21),u=M(22),e=M(11),l=M(10),o=M(7),t=new g({Extends:i,initialize:function(s,n,r,h,a){var c="json";if(o(n)){var d=n;n=e(d,"key"),r=e(d,"url"),h=e(d,"xhrSettings"),c=e(d,"extension",c),a=e(d,"dataKey",a)}var f={type:"json",cache:s.cacheManager.json,extension:c,responseType:"text",key:n,url:r,xhrSettings:h,config:a};i.call(this,s,f),o(r)&&(this.data=a?l(r,a):r,this.state=p.FILE_POPULATED)},onProcess:function(){if(this.state!==p.FILE_POPULATED){this.state=p.FILE_PROCESSING;try{var s=JSON.parse(this.xhrLoader.responseText)}catch(r){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),r}var n=this.config;this.data=typeof n=="string"?l(s,n,s):s}this.onProcessComplete()}});u.register("json",function(s,n,r,h){if(Array.isArray(s))for(var a=0;a<s.length;a++)this.addFile(new t(this,s[a]));else this.addFile(new t(this,s,n,h,r));return this}),I.exports=t},function(I,z,M){var g=new(M(0))({initialize:function(p,i,u,e){var l=[];e.forEach(function(t){t&&l.push(t)}),this.loader=p,this.type=i,this.key=u,this.multiKeyIndex=p.multiKeyIndex++,this.files=l,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=p.baseURL,this.path=p.path,this.prefix=p.prefix;for(var o=0;o<l.length;o++)l[o].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(p){return this.files.push(p),p.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(p){this.files.indexOf(p)!==-1&&this.pending--},onFileFailed:function(p){this.files.indexOf(p)!==-1&&this.failed++}});I.exports=g},function(I,z,M){var g=M(0),p=M(15),i=M(21),u=M(22),e=M(11),l=M(7),o=new g({Extends:i,initialize:function(t,s,n,r){var h="text",a="txt",c=t.cacheManager.text;if(l(s)){var d=s;s=e(d,"key"),n=e(d,"url"),r=e(d,"xhrSettings"),a=e(d,"extension",a),h=e(d,"type",h),c=e(d,"cache",c)}var f={type:h,cache:c,extension:a,responseType:"text",key:s,url:n,xhrSettings:r};i.call(this,t,f)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(t,s,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new o(this,t[r]));else this.addFile(new o(this,t,s,n));return this}),I.exports=o},function(I,z,M){var g=M(28),p=M(3),i=M(0),u=M(47),e=M(48),l=M(49),o=M(50),t=M(51),s=M(52),n=M(8),r=M(19),h=M(53),a=M(9),c=M(243),d=M(250),f=new i({Extends:h,Mixins:[u,e,l,o,t,s,d],initialize:function(v,m,x,T,y,E,w){h.call(this,v,"Spine"),this.plugin=m,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(x,T),y&&this.setSkeleton(y,E,w)},willRender:function(v,m){var x=!this.skeleton||!(this.renderFlags!==15||this.cameraFilter!==0&&this.cameraFilter&v.id);if(!m&&!x&&this.parentContainer){var T=this.plugin,y=T.sceneRenderer;T.gl&&y.batcher.isDrawing&&(y.end(),T.renderer.pipelines.rebind())}return x},setAlpha:function(v,m){if(v===void 0&&(v=1),m){var x=this.findSlot(m);x&&(x.color.a=p(v,0,1))}else this.alpha=v;return this},alpha:{get:function(){return this.skeleton.color.a},set:function(v){var m=p(v,0,1);this.skeleton&&(this.skeleton.color.a=m),m===0?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(v){var m=p(v,0,1);this.skeleton&&(this.skeleton.color.r=m)}},green:{get:function(){return this.skeleton.color.g},set:function(v){var m=p(v,0,1);this.skeleton&&(this.skeleton.color.g=m)}},blue:{get:function(){return this.skeleton.color.b},set:function(v){var m=p(v,0,1);this.skeleton&&(this.skeleton.color.b=m)}},setColor:function(v,m){v===void 0&&(v=16777215);var x=(v>>16&255)/255,T=(v>>8&255)/255,y=(255&v)/255,E=v>16777215?(v>>>24)/255:null,w=this.skeleton;if(m){var R=this.findSlot(m);R&&(w=R)}return w.color.r=x,w.color.g=T,w.color.b=y,E!==null&&(w.color.a=E),this},setSkeletonFromJSON:function(v,m,x,T){return this.setSkeleton(v,m,x,T)},setSkeleton:function(v,m,x,T){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var y=this.plugin.createSkeleton(v,T);this.skeletonData=y.skeletonData,this.preMultipliedAlpha=y.preMultipliedAlpha;var E=y.skeleton;return E.setSkin(),E.setToSetupPose(),this.skeleton=E,y=this.plugin.createAnimationState(E),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=y.state,this.stateData=y.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),m&&this.setAnimation(0,m,x),this.root=this.getRootBone(),this.root&&(this.root.rotation=a(n(this.rotation))+90),this.state.apply(E),E.updateCache(),this.updateSize()},onComplete:function(v){this.emit(c.COMPLETE,v)},onDispose:function(v){this.emit(c.DISPOSE,v)},onEnd:function(v){this.emit(c.END,v)},onEvent:function(v,m){this.emit(c.EVENT,v,m)},onInterrupted:function(v){this.emit(c.INTERRUPTED,v)},onStart:function(v){this.emit(c.START,v)},refresh:function(){return this.root&&(this.root.rotation=a(n(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(v,m,x,T){var y=this.skeleton;return v===void 0&&(v=y.data.width),m===void 0&&(m=y.data.height),x===void 0&&(x=0),T===void 0&&(T=0),this.width=v,this.height=m,this.displayOriginX=y.x-x,this.displayOriginY=y.y-T,this},setOffset:function(v,m){var x=this.skeleton;return v===void 0&&(v=0),m===void 0&&(m=0),this.displayOriginX=x.x-v,this.displayOriginY=x.y-m,this},updateSize:function(){var v=this.skeleton,m=this.plugin.renderer.height,x=this.scaleX,T=this.scaleY;v.x=this.x,v.y=m-this.y,v.scaleX=1,v.scaleY=1,v.updateWorldTransform();var y=this.getBounds();return this.width=y.size.x,this.height=y.size.y,this.displayOriginX=this.x-y.offset.x,this.displayOriginY=this.y-(m-(this.height+y.offset.y)),v.scaleX=x,v.scaleY=T,v.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(v){this._scaleX=v,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(v){this._scaleY=v,this.refresh()}},getBoneList:function(){var v=[],m=this.skeletonData;if(m)for(var x=0;x<m.bones.length;x++)v.push(m.bones[x].name);return v},getSkinList:function(){var v=[],m=this.skeletonData;if(m)for(var x=0;x<m.skins.length;x++)v.push(m.skins[x].name);return v},getSlotList:function(){for(var v=[],m=this.skeleton,x=0;x<m.slots.length;x++)v.push(m.slots[x].data.name);return v},getAnimationList:function(){var v=[],m=this.skeletonData;if(m)for(var x=0;x<m.animations.length;x++)v.push(m.animations[x].name);return v},getCurrentAnimation:function(v){v===void 0&&(v=0);var m=this.state.getCurrent(v);if(m)return m.animation},play:function(v,m,x){return this.setAnimation(0,v,m,x),this},setAnimation:function(v,m,x,T){if(x===void 0&&(x=!1),T===void 0&&(T=!1),T&&this.state){var y=this.state.getCurrent(v);if(y&&y.animation.name===m&&!y.isComplete())return}if(this.findAnimation(m))return this.state.setAnimation(v,m,x)},addAnimation:function(v,m,x,T){return x===void 0&&(x=!1),T===void 0&&(T=0),this.state.addAnimation(v,m,x,T)},setEmptyAnimation:function(v,m){return this.state.setEmptyAnimation(v,m)},clearTrack:function(v){return this.state.clearTrack(v),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(v){var m=this.skeleton;return m.setSkinByName(v),m.setSlotsToSetupPose(),this.state.apply(m),this},setSkin:function(v){var m=this.skeleton;return m.setSkin(v),m.setSlotsToSetupPose(),this.state.apply(m),this},setMix:function(v,m,x){return this.stateData.setMix(v,m,x),this},getAttachment:function(v,m){return this.skeleton.getAttachment(v,m)},getAttachmentByName:function(v,m){return this.skeleton.getAttachmentByName(v,m)},setAttachment:function(v,m){if(Array.isArray(v)&&Array.isArray(m)&&v.length===m.length)for(var x=0;x<v.length;x++)this.skeleton.setAttachment(v[x],m[x]);else this.skeleton.setAttachment(v,m);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(v,m,x,T,y,E){T===void 0&&(T=0),y===void 0&&(y=0),E===void 0&&(E=360);var w=this.plugin.renderer.height,R=n(g(v.worldX,w-v.worldY,m,x)+r(T));return v.rotation=p(a(R),y,E),this},findBone:function(v){return this.skeleton.findBone(v)},findBoneIndex:function(v){return this.skeleton.findBoneIndex(v)},findSlot:function(v){return this.skeleton.findSlot(v)},findSlotIndex:function(v){return this.skeleton.findSlotIndex(v)},findSkin:function(v){return this.skeletonData.findSkin(v)},findEvent:function(v){return this.skeletonData.findEvent(v)},findAnimation:function(v){return this.skeletonData.findAnimation(v)},findIkConstraint:function(v){return this.skeletonData.findIkConstraint(v)},findTransformConstraint:function(v){return this.skeletonData.findTransformConstraint(v)},findPathConstraint:function(v){return this.skeletonData.findPathConstraint(v)},findPathConstraintIndex:function(v){return this.skeletonData.findPathConstraintIndex(v)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(v,m){var x=this.skeleton;this.state.update(m/1e3*this.timeScale),this.state.apply(x)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});I.exports=f},function(I,z,M){var g=M(0),p=M(223),i=new g({initialize:function(u,e){this.parent=u,this.events=e,e||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(p.DESTROY,this.destroy,this)},get:function(u){var e=this.list;if(Array.isArray(u)){for(var l=[],o=0;o<u.length;o++)l.push(e[u[o]]);return l}return e[u]},getAll:function(){var u={};for(var e in this.list)this.list.hasOwnProperty(e)&&(u[e]=this.list[e]);return u},query:function(u){var e={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(u)&&(e[l]=this.list[l]);return e},set:function(u,e){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,e);for(var l in u)this.setValue(l,u[l]);return this},inc:function(u,e){if(this._frozen)return this;e===void 0&&(e=1);var l=this.get(u);return l===void 0&&(l=0),this.set(u,l+e),this},toggle:function(u){return this._frozen||this.set(u,!this.get(u)),this},setValue:function(u,e){if(this._frozen)return this;if(this.has(u))this.values[u]=e;else{var l=this,o=this.list,t=this.events,s=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return o[u]},set:function(n){if(!l._frozen){var r=o[u];o[u]=n,t.emit(p.CHANGE_DATA,s,u,n,r),t.emit(p.CHANGE_DATA_KEY+u,s,n,r)}}}),o[u]=e,t.emit(p.SET_DATA,s,u,e)}return this},each:function(u,e){for(var l=[this.parent,null,void 0],o=1;o<arguments.length;o++)l.push(arguments[o]);for(var t in this.list)l[1]=t,l[2]=this.list[t],u.apply(e,l);return this},merge:function(u,e){for(var l in e===void 0&&(e=!0),u)u.hasOwnProperty(l)&&(e||!e&&!this.has(l))&&this.setValue(l,u[l]);return this},remove:function(u){if(this._frozen)return this;if(!Array.isArray(u))return this.removeValue(u);for(var e=0;e<u.length;e++)this.removeValue(u[e]);return this},removeValue:function(u){if(this.has(u)){var e=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,e)}return this},pop:function(u){var e=void 0;return!this._frozen&&this.has(u)&&(e=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,e)),e},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(p.CHANGE_DATA),this.events.off(p.SET_DATA),this.events.off(p.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var e in this.list)this.list[e]!==void 0&&u++;return u}}});I.exports=i},function(I,z,M){I.exports={CHANGE_DATA:M(224),CHANGE_DATA_KEY:M(225),DESTROY:M(226),REMOVE_DATA:M(227),SET_DATA:M(228)}},function(I,z){I.exports="changedata"},function(I,z){I.exports="changedata-"},function(I,z){I.exports="destroy"},function(I,z){I.exports="removedata"},function(I,z){I.exports="setdata"},function(I,z,M){var g=Object.prototype.hasOwnProperty,p="~";function i(){}function u(t,s,n){this.fn=t,this.context=s,this.once=n||!1}function e(t,s,n,r,h){if(typeof n!="function")throw new TypeError("The listener must be a function");var a=new u(n,r||t,h),c=p?p+s:s;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function l(t,s){--t._eventsCount==0?t._events=new i:delete t._events[s]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(p=!1)),o.prototype.eventNames=function(){var t,s,n=[];if(this._eventsCount===0)return n;for(s in t=this._events)g.call(t,s)&&n.push(p?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var s=p?p+t:t,n=this._events[s];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,h=n.length,a=new Array(h);r<h;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(t){var s=p?p+t:t,n=this._events[s];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,s,n,r,h,a){var c=p?p+t:t;if(!this._events[c])return!1;var d,f,v=this._events[c],m=arguments.length;if(v.fn){switch(v.once&&this.removeListener(t,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,s),!0;case 3:return v.fn.call(v.context,s,n),!0;case 4:return v.fn.call(v.context,s,n,r),!0;case 5:return v.fn.call(v.context,s,n,r,h),!0;case 6:return v.fn.call(v.context,s,n,r,h,a),!0}for(f=1,d=new Array(m-1);f<m;f++)d[f-1]=arguments[f];v.fn.apply(v.context,d)}else{var x,T=v.length;for(f=0;f<T;f++)switch(v[f].once&&this.removeListener(t,v[f].fn,void 0,!0),m){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,s);break;case 3:v[f].fn.call(v[f].context,s,n);break;case 4:v[f].fn.call(v[f].context,s,n,r);break;default:if(!d)for(x=1,d=new Array(m-1);x<m;x++)d[x-1]=arguments[x];v[f].fn.apply(v[f].context,d)}}return!0},o.prototype.on=function(t,s,n){return e(this,t,s,n,!1)},o.prototype.once=function(t,s,n){return e(this,t,s,n,!0)},o.prototype.removeListener=function(t,s,n,r){var h=p?p+t:t;if(!this._events[h])return this;if(!s)return l(this,h),this;var a=this._events[h];if(a.fn)a.fn!==s||r&&!a.once||n&&a.context!==n||l(this,h);else{for(var c=0,d=[],f=a.length;c<f;c++)(a[c].fn!==s||r&&!a[c].once||n&&a[c].context!==n)&&d.push(a[c]);d.length?this._events[h]=d.length===1?d[0]:d:l(this,h)}return this},o.prototype.removeAllListeners=function(t){var s;return t?(s=p?p+t:t,this._events[s]&&l(this,s)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=p,o.EventEmitter=o,I.exports=o},function(I,z){I.exports="addedtoscene"},function(I,z){I.exports="destroy"},function(I,z){I.exports="removedfromscene"},function(I,z){I.exports="complete"},function(I,z){I.exports="created"},function(I,z){I.exports="error"},function(I,z){I.exports="loop"},function(I,z){I.exports="play"},function(I,z){I.exports="seeked"},function(I,z){I.exports="seeking"},function(I,z){I.exports="stop"},function(I,z){I.exports="timeout"},function(I,z){I.exports="unlocked"},function(I,z,M){I.exports={COMPLETE:M(244),DISPOSE:M(245),END:M(246),EVENT:M(247),INTERRUPTED:M(248),START:M(249)}},function(I,z){I.exports="complete"},function(I,z){I.exports="dispose"},function(I,z){I.exports="end"},function(I,z){I.exports="event"},function(I,z){I.exports="interrupted"},function(I,z){I.exports="start"},function(I,z,M){var g=M(1),p=M(1),i=M(1);g=M(251),i=M(252),p=M(253),I.exports={renderWebGL:g,renderCanvas:p,renderDirect:i}},function(I,z,M){var g=M(3),p=M(8),i=M(56),u=M(9),e=M(6);I.exports=function(l,o,t,s,n){var r=o.plugin,h=o.skeleton,a=r.sceneRenderer;l.newType&&(l.pipelines.clear(),a.begin());var c=o.scrollFactorX,d=o.scrollFactorY,f=h.color.a;n&&(o.scrollFactorX=n.scrollFactorX,o.scrollFactorY=n.scrollFactorY,h.color.a=g(f*n.alpha,0,1)),t.addToRenderList(o);var v=i(o,t,s).calc,m=l.height;if(h.x=v.tx,h.y=m-v.ty,h.scaleX=v.scaleX,h.scaleY=v.scaleY,o.scaleX<0?(h.scaleX*=-1,o.root.rotation=e(u(v.rotationNormalized)-180,0,360)):o.root.rotation=e(u(p(v.rotationNormalized))+90,0,360),o.scaleY<0&&(h.scaleY*=-1,o.scaleX<0?o.root.rotation-=2*u(v.rotationNormalized):o.root.rotation+=2*u(v.rotationNormalized)),h.updateWorldTransform(),a.drawSkeleton(h,o.preMultipliedAlpha),n&&(o.scrollFactorX=c,o.scrollFactorY=d,h.color.a=f),r.drawDebug||o.drawDebug){var x=h.x,T=h.y;h.x=0,h.y=0,a.drawSkeletonDebug(h,o.preMultipliedAlpha),h.x=x,h.y=T}l.nextTypeMatch||(a.end(),l.pipelines.rebind())}},function(I,z,M){var g=M(3),p=M(8),i=M(56),u=M(9),e=M(6);I.exports=function(l,o,t,s,n){var r=o.plugin,h=o.skeleton,a=r.sceneRenderer;l.pipelines.clear(),a.begin();var c=o.scrollFactorX,d=o.scrollFactorY,f=h.color.a;n&&(o.scrollFactorX=n.scrollFactorX,o.scrollFactorY=n.scrollFactorY,h.color.a=g(f*n.alpha,0,1)),t.addToRenderList(o);var v=i(o,t,s).calc,m=l.height;if(h.x=v.tx,h.y=m-v.ty,h.scaleX=v.scaleX,h.scaleY=v.scaleY,o.scaleX<0?(h.scaleX*=-1,o.root.rotation=e(u(v.rotationNormalized)-180,0,360)):o.root.rotation=e(u(p(v.rotationNormalized))+90,0,360),o.scaleY<0&&(h.scaleY*=-1,o.scaleX<0?o.root.rotation-=2*u(v.rotationNormalized):o.root.rotation+=2*u(v.rotationNormalized)),h.updateWorldTransform(),a.drawSkeleton(h,o.preMultipliedAlpha),n&&(o.scrollFactorX=c,o.scrollFactorY=d,h.color.a=f),r.drawDebug||o.drawDebug){var x=h.x,T=h.y;h.x=0,h.y=0,a.drawSkeletonDebug(h,o.preMultipliedAlpha),h.x=x,h.y=T}a.end(),l.pipelines.rebind()}},function(I,z,M){var g=M(8),p=M(9),i=M(6);I.exports=function(u,e,l,o){var t=u.currentContext,s=e.plugin,n=e.skeleton,r=s.skeletonRenderer,h=u._tempMatrix1,a=u._tempMatrix2,c=u._tempMatrix3;l.addToRenderList(e),a.applyITRS(e.x,e.y,e.rotation,Math.abs(e.scaleX),Math.abs(e.scaleY)),h.copyFrom(l.matrix),o?(h.multiplyWithOffset(o,-l.scrollX*e.scrollFactorX,-l.scrollY*e.scrollFactorY),a.e=e.x,a.f=e.y,h.multiply(a,c)):(a.e-=l.scrollX*e.scrollFactorX,a.f-=l.scrollY*e.scrollFactorY,h.multiply(a,c)),n.x=c.tx,n.y=c.ty,n.scaleX=c.scaleX,n.scaleY=-1*c.scaleY,e.scaleX<0?(n.scaleX*=-1,e.root.rotation=p(c.rotationNormalized)):e.root.rotation=i(p(g(c.rotationNormalized))+90,0,360),e.scaleY<0&&(n.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*p(c.rotationNormalized):e.root.rotation+=2*p(c.rotationNormalized)),l.renderToTexture&&(n.y=c.ty,n.scaleY*=-1),n.updateWorldTransform(),r.ctx=t,r.debugRendering=s.drawDebug||e.drawDebug,t.save(),r.draw(n),t.restore()}},function(I,z,M){var g=M(0),p=M(255),i=M(347),u=new g({Extends:p,Mixins:[i],initialize:function(e,l,o,t,s){p.call(this,e,o,t,s),this.type="Spine",this.plugin=l},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});I.exports=u},function(I,z,M){var g=M(256),p=M(17),i=M(0),u=M(293),e=M(55),l=M(53),o=M(25),t=M(343),s=M(346),n=M(2),r=new i({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,t],initialize:function(h,a,c,d){l.call(this,h,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._sortKey="",this._sysEvents=h.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(a,c),this.clearAlpha(),this.setBlendMode(p.SKIP_CHECK),d&&this.add(d)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(h){return h===void 0&&(h=!0),this.exclusive=h,this},getBounds:function(h){if(h===void 0&&(h=new o),h.setTo(this.x,this.y,0,0),this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);h.setTo(a.x,a.y,0,0)}if(this.list.length>0){var c=this.list,d=new o,f=!1;h.setEmpty();for(var v=0;v<c.length;v++){var m=c[v];m.getBounds&&(m.getBounds(d),f?s(d,h,h):(h.setTo(d.x,d.y,d.width,d.height),f=!0))}}return h},addHandler:function(h){h.once(e.DESTROY,this.remove,this),this.exclusive&&(h.parentContainer&&h.parentContainer.remove(h),h.removeFromDisplayList(),h.parentContainer=this)},removeHandler:function(h){h.off(e.DESTROY,this.remove),this.exclusive&&(h.parentContainer=null,h.addToDisplayList())},pointToContainer:function(h,a){a===void 0&&(a=new n),this.parentContainer?this.parentContainer.pointToContainer(h,a):a=new n(h.x,h.y);var c=this.tempTransformMatrix;return c.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),c.invert(),c.transformPoint(h.x,h.y,a),a},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(h){return g.Add(this.list,h,this.maxSize,this.addHandler,this),this},addAt:function(h,a){return g.AddAt(this.list,h,a,this.maxSize,this.addHandler,this),this},getAt:function(h){return this.list[h]},getIndex:function(h){return this.list.indexOf(h)},sort:function(h,a){return h?(a===void 0&&(a=function(c,d){return c[h]-d[h]}),g.StableSort(this.list,a),this):this},getByName:function(h){return g.GetFirst(this.list,"name",h)},getRandom:function(h,a){return g.GetRandom(this.list,h,a)},getFirst:function(h,a,c,d){return g.GetFirst(this.list,h,a,c,d)},getAll:function(h,a,c,d){return g.GetAll(this.list,h,a,c,d)},count:function(h,a,c,d){return g.CountAllMatching(this.list,h,a,c,d)},swap:function(h,a){return g.Swap(this.list,h,a),this},moveTo:function(h,a){return g.MoveTo(this.list,h,a),this},remove:function(h,a){var c=g.Remove(this.list,h,this.removeHandler,this);if(a&&c){Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)c[d].destroy()}return this},removeAt:function(h,a){var c=g.RemoveAt(this.list,h,this.removeHandler,this);return a&&c&&c.destroy(),this},removeBetween:function(h,a,c){var d=g.RemoveBetween(this.list,h,a,this.removeHandler,this);if(c)for(var f=0;f<d.length;f++)d[f].destroy();return this},removeAll:function(h){var a=g.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(h)for(var c=0;c<a.length;c++)a[c].destroy();return this},bringToTop:function(h){return g.BringToTop(this.list,h),this},sendToBack:function(h){return g.SendToBack(this.list,h),this},moveUp:function(h){return g.MoveUp(this.list,h),this},moveDown:function(h){return g.MoveDown(this.list,h),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return g.Shuffle(this.list),this},replace:function(h,a,c){return g.Replace(this.list,h,a)&&(this.addHandler(a),this.removeHandler(h),c&&h.destroy()),this},exists:function(h){return this.list.indexOf(h)>-1},setAll:function(h,a,c,d){return g.SetAll(this.list,h,a,c,d),this},each:function(h,a){var c,d=[null],f=this.list.slice(),v=f.length;for(c=2;c<arguments.length;c++)d.push(arguments[c]);for(c=0;c<v;c++)d[0]=f[c],h.apply(a,d);return this},iterate:function(h,a){var c,d=[null];for(c=2;c<arguments.length;c++)d.push(arguments[c]);for(c=0;c<this.list.length;c++)d[0]=this.list[c],h.apply(a,d);return this},setScrollFactor:function(h,a,c){return a===void 0&&(a=h),c===void 0&&(c=!1),this.scrollFactorX=h,this.scrollFactorY=a,c&&(g.SetAll(this.list,"scrollFactorX",h),g.SetAll(this.list,"scrollFactorY",a)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});I.exports=r},function(I,z,M){I.exports={Matrix:M(257),Add:M(266),AddAt:M(267),BringToTop:M(268),CountAllMatching:M(269),Each:M(270),EachInRange:M(271),FindClosestInSorted:M(272),GetAll:M(273),GetFirst:M(274),GetRandom:M(275),MoveDown:M(276),MoveTo:M(277),MoveUp:M(278),NumberArray:M(279),NumberArrayStep:M(280),QuickSelect:M(281),Range:M(282),Remove:M(283),RemoveAt:M(284),RemoveBetween:M(285),RemoveRandomElement:M(286),Replace:M(287),RotateLeft:M(58),RotateRight:M(59),SafeRange:M(5),SendToBack:M(288),SetAll:M(289),Shuffle:M(60),SortByDigits:M(290),SpliceOne:M(12),StableSort:M(291),Swap:M(292)}},function(I,z,M){I.exports={CheckMatrix:M(24),MatrixToString:M(258),ReverseColumns:M(260),ReverseRows:M(261),Rotate180:M(262),RotateLeft:M(263),RotateMatrix:M(16),RotateRight:M(264),Translate:M(265),TransposeMatrix:M(57)}},function(I,z,M){var g=M(259),p=M(24);I.exports=function(i){var u="";if(!p(i))return u;for(var e=0;e<i.length;e++){for(var l=0;l<i[e].length;l++){var o=i[e][l].toString();u+=o!=="undefined"?g(o,2):"?",l<i[e].length-1&&(u+=" |")}if(e<i.length-1){u+=`
`;for(var t=0;t<i[e].length;t++)u+="---",t<i[e].length-1&&(u+="+");u+=`
`}}return u}},function(I,z){I.exports=function(M,g,p,i){g===void 0&&(g=0),p===void 0&&(p=" "),i===void 0&&(i=3);var u=0;if(g+1>=(M=M.toString()).length)switch(i){case 1:M=new Array(g+1-M.length).join(p)+M;break;case 3:var e=Math.ceil((u=g-M.length)/2);M=new Array(u-e+1).join(p)+M+new Array(e+1).join(p);break;default:M+=new Array(g+1-M.length).join(p)}return M}},function(I,z){I.exports=function(M){return M.reverse()}},function(I,z){I.exports=function(M){for(var g=0;g<M.length;g++)M[g].reverse();return M}},function(I,z,M){var g=M(16);I.exports=function(p){return g(p,180)}},function(I,z,M){var g=M(16);I.exports=function(p){return g(p,90)}},function(I,z,M){var g=M(16);I.exports=function(p){return g(p,-90)}},function(I,z,M){var g=M(58),p=M(59);I.exports=function(i,u,e){if(u===void 0&&(u=0),e===void 0&&(e=0),e!==0&&(e<0?g(i,Math.abs(e)):p(i,e)),u!==0)for(var l=0;l<i.length;l++){var o=i[l];u<0?g(o,Math.abs(u)):p(o,u)}return i}},function(I,z){I.exports=function(M,g,p,i,u){if(u===void 0&&(u=M),p>0){var e=p-M.length;if(e<=0)return null}if(!Array.isArray(g))return M.indexOf(g)===-1?(M.push(g),i&&i.call(u,g),g):null;for(var l=g.length-1;l>=0;)M.indexOf(g[l])!==-1&&g.splice(l,1),l--;if((l=g.length)===0)return null;p>0&&l>e&&(g.splice(e),l=e);for(var o=0;o<l;o++){var t=g[o];M.push(t),i&&i.call(u,t)}return g}},function(I,z){I.exports=function(M,g,p,i,u,e){if(p===void 0&&(p=0),e===void 0&&(e=M),i>0){var l=i-M.length;if(l<=0)return null}if(!Array.isArray(g))return M.indexOf(g)===-1?(M.splice(p,0,g),u&&u.call(e,g),g):null;for(var o=g.length-1;o>=0;)M.indexOf(g[o])!==-1&&g.pop(),o--;if((o=g.length)===0)return null;i>0&&o>l&&(g.splice(l),o=l);for(var t=o-1;t>=0;t--){var s=g[t];M.splice(p,0,s),u&&u.call(e,s)}return g}},function(I,z){I.exports=function(M,g){var p=M.indexOf(g);return p!==-1&&p<M.length&&(M.splice(p,1),M.push(g)),g}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){e===void 0&&(e=0),l===void 0&&(l=p.length);var o=0;if(g(p,e,l))for(var t=e;t<l;t++)p[t][i]===u&&o++;return o}},function(I,z){I.exports=function(M,g,p){var i,u=[null];for(i=3;i<arguments.length;i++)u.push(arguments[i]);for(i=0;i<M.length;i++)u[0]=M[i],g.apply(p,u);return M}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){if(e===void 0&&(e=0),l===void 0&&(l=p.length),g(p,e,l)){var o,t=[null];for(o=5;o<arguments.length;o++)t.push(arguments[o]);for(o=e;o<l;o++)t[0]=p[o],i.apply(u,t)}return p}},function(I,z){I.exports=function(M,g,p){if(!g.length)return NaN;if(g.length===1)return g[0];var i,u,e=1;if(p){if(M<g[0][p])return g[0];for(;g[e][p]<M;)e++}else for(;g[e]<M;)e++;return e>g.length&&(e=g.length),p?(i=g[e-1][p],(u=g[e][p])-M<=M-i?g[e]:g[e-1]):(i=g[e-1],(u=g[e])-M<=M-i?u:i)}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){e===void 0&&(e=0),l===void 0&&(l=p.length);var o=[];if(g(p,e,l))for(var t=e;t<l;t++){var s=p[t];(!i||i&&u===void 0&&s.hasOwnProperty(i)||i&&u!==void 0&&s[i]===u)&&o.push(s)}return o}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){if(e===void 0&&(e=0),l===void 0&&(l=p.length),g(p,e,l))for(var o=e;o<l;o++){var t=p[o];if(!i||i&&u===void 0&&t.hasOwnProperty(i)||i&&u!==void 0&&t[i]===u)return t}return null}},function(I,z){I.exports=function(M,g,p){g===void 0&&(g=0),p===void 0&&(p=M.length);var i=g+Math.floor(Math.random()*p);return M[i]===void 0?null:M[i]}},function(I,z){I.exports=function(M,g){var p=M.indexOf(g);if(p>0){var i=M[p-1],u=M.indexOf(i);M[p]=i,M[u]=g}return M}},function(I,z){I.exports=function(M,g,p){var i=M.indexOf(g);if(i===-1||p<0||p>=M.length)throw new Error("Supplied index out of bounds");return i!==p&&(M.splice(i,1),M.splice(p,0,g)),g}},function(I,z){I.exports=function(M,g){var p=M.indexOf(g);if(p!==-1&&p<M.length-1){var i=M[p+1],u=M.indexOf(i);M[p]=i,M[u]=g}return M}},function(I,z){I.exports=function(M,g,p,i){var u,e=[],l=!1;if((p||i)&&(l=!0,p||(p=""),i||(i="")),g<M)for(u=M;u>=g;u--)l?e.push(p+u.toString()+i):e.push(u);else for(u=M;u<=g;u++)l?e.push(p+u.toString()+i):e.push(u);return e}},function(I,z,M){var g=M(40);I.exports=function(p,i,u){p===void 0&&(p=0),i===void 0&&(i=null),u===void 0&&(u=1),i===null&&(i=p,p=0);for(var e=[],l=Math.max(g((i-p)/(u||1)),0),o=0;o<l;o++)e.push(p),p+=u;return e}},function(I,z){function M(i,u,e){var l=i[u];i[u]=i[e],i[e]=l}function g(i,u){return i<u?-1:i>u?1:0}var p=function(i,u,e,l,o){for(e===void 0&&(e=0),l===void 0&&(l=i.length-1),o===void 0&&(o=g);l>e;){if(l-e>600){var t=l-e+1,s=u-e+1,n=Math.log(t),r=.5*Math.exp(2*n/3),h=.5*Math.sqrt(n*r*(t-r)/t)*(s-t/2<0?-1:1),a=Math.max(e,Math.floor(u-s*r/t+h)),c=Math.min(l,Math.floor(u+(t-s)*r/t+h));p(i,u,a,c,o)}var d=i[u],f=e,v=l;for(M(i,e,u),o(i[l],d)>0&&M(i,e,l);f<v;){for(M(i,f,v),f++,v--;o(i[f],d)<0;)f++;for(;o(i[v],d)>0;)v--}o(i[e],d)===0?M(i,e,v):M(i,++v,l),v<=u&&(e=v+1),u<=v&&(l=v-1)}};I.exports=p},function(I,z,M){var g=M(10),p=M(60),i=function(u,e,l){for(var o=[],t=0;t<u.length;t++)for(var s=0;s<e.length;s++)for(var n=0;n<l;n++)o.push({a:u[t],b:e[s]});return o};I.exports=function(u,e,l){var o=g(l,"max",0),t=g(l,"qty",1),s=g(l,"random",!1),n=g(l,"randomB",!1),r=g(l,"repeat",0),h=g(l,"yoyo",!1),a=[];if(n&&p(e),r===-1)if(o===0)r=0;else{var c=u.length*e.length*t;h&&(c*=2),r=Math.ceil(o/c)}for(var d=0;d<=r;d++){var f=i(u,e,t);s&&p(f),a=a.concat(f),h&&(f.reverse(),a=a.concat(f))}return o&&a.splice(o),a}},function(I,z,M){var g=M(12);I.exports=function(p,i,u,e){var l;if(e===void 0&&(e=p),!Array.isArray(i))return(l=p.indexOf(i))!==-1?(g(p,l),u&&u.call(e,i),i):null;for(var o=i.length-1,t=[];o>=0;){var s=i[o];(l=p.indexOf(s))!==-1&&(g(p,l),t.push(s),u&&u.call(e,s)),o--}return t}},function(I,z,M){var g=M(12);I.exports=function(p,i,u,e){if(e===void 0&&(e=p),i<0||i>p.length-1)throw new Error("Index out of bounds");var l=g(p,i);return u&&u.call(e,l),l}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){if(i===void 0&&(i=0),u===void 0&&(u=p.length),l===void 0&&(l=p),g(p,i,u)){var o=u-i,t=p.splice(i,o);if(e)for(var s=0;s<t.length;s++){var n=t[s];e.call(l,n)}return t}return[]}},function(I,z,M){var g=M(12);I.exports=function(p,i,u){i===void 0&&(i=0),u===void 0&&(u=p.length);var e=i+Math.floor(Math.random()*u);return g(p,e)}},function(I,z){I.exports=function(M,g,p){var i=M.indexOf(g),u=M.indexOf(p);return i!==-1&&u===-1&&(M[i]=p,!0)}},function(I,z){I.exports=function(M,g){var p=M.indexOf(g);return p!==-1&&p>0&&(M.splice(p,1),M.unshift(g)),g}},function(I,z,M){var g=M(5);I.exports=function(p,i,u,e,l){if(e===void 0&&(e=0),l===void 0&&(l=p.length),g(p,e,l))for(var o=e;o<l;o++){var t=p[o];t.hasOwnProperty(i)&&(t[i]=u)}return p}},function(I,z){I.exports=function(M){var g=/\D/g;return M.sort(function(p,i){return parseInt(p.replace(g,""),10)-parseInt(i.replace(g,""),10)}),M}},function(I,z){function M(p,i){return String(p).localeCompare(i)}function g(p,i,u,e){var l,o,t,s,n,r=p.length,h=0,a=2*u;for(l=0;l<r;l+=a)for(t=(o=l+u)+u,o>r&&(o=r),t>r&&(t=r),s=l,n=o;;)if(s<o&&n<t)i(p[s],p[n])<=0?e[h++]=p[s++]:e[h++]=p[n++];else if(s<o)e[h++]=p[s++];else{if(!(n<t))break;e[h++]=p[n++]}}I.exports=function(p,i){i===void 0&&(i=M);var u=function(e,l){var o=e.length;if(o<=1)return e;for(var t=new Array(o),s=1;s<o;s*=2){g(e,l,s,t);var n=e;e=t,t=n}return e}(p,i);return u!==p&&g(u,null,p.length,p),p}},function(I,z){I.exports=function(M,g,p){if(g!==p){var i=M.indexOf(g),u=M.indexOf(p);if(i<0||u<0)throw new Error("Supplied items must be elements of the same array");return M[i]=p,M[u]=g,M}}},function(I,z,M){I.exports={Alpha:M(294),AlphaSingle:M(295),BlendMode:M(296),ComputedSize:M(47),Crop:M(297),Depth:M(48),Flip:M(49),GetBounds:M(298),Mask:M(307),Origin:M(332),PathFollower:M(333),Pipeline:M(336),ScrollFactor:M(50),Size:M(339),Texture:M(340),TextureCrop:M(341),Tint:M(342),ToJSON:M(54),Transform:M(51),TransformMatrix:M(23),Visible:M(52)}},function(I,z,M){var g=M(3),p={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(i,u,e,l){return i===void 0&&(i=1),u===void 0?this.alpha=i:(this._alphaTL=g(i,0,1),this._alphaTR=g(u,0,1),this._alphaBL=g(e,0,1),this._alphaBR=g(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(i){var u=g(i,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(i){var u=g(i,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(i){var u=g(i,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(i){var u=g(i,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(i){var u=g(i,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=2)}}};I.exports=p},function(I,z,M){var g=M(3),p={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(i){return i===void 0&&(i=1),this.alpha=i,this},alpha:{get:function(){return this._alpha},set:function(i){var u=g(i,0,1);this._alpha=u,u===0?this.renderFlags&=-3:this.renderFlags|=2}}};I.exports=p},function(I,z,M){var g=M(17),p={_blendMode:g.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(i){typeof i=="string"&&(i=g[i]),(i|=0)>=-1&&(this._blendMode=i)}},setBlendMode:function(i){return this.blendMode=i,this}};I.exports=p},function(I,z){I.exports={texture:null,frame:null,isCropped:!1,setCrop:function(M,g,p,i){if(M===void 0)this.isCropped=!1;else if(this.frame){if(typeof M=="number")this.frame.setCropUVs(this._crop,M,g,p,i,this.flipX,this.flipY);else{var u=M;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(I,z,M){var g=M(25),p=M(39),i=M(2),u={prepareBoundsOutput:function(e,l){return l===void 0&&(l=!1),this.rotation!==0&&p(e,this.x,this.y,this.rotation),l&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(e.x,e.y,e),e},getCenter:function(e){return e===void 0&&(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,l)},getTopCenter:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,l)},getTopRight:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,l)},getLeftCenter:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,l)},getRightCenter:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,l)},getBottomLeft:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,l)},getBottomCenter:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,l)},getBottomRight:function(e,l){return e||(e=new i),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,l)},getBounds:function(e){var l,o,t,s,n,r,h,a;if(e===void 0&&(e=new g),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),c.transformPoint(e.x,e.y,e),l=e.x,o=e.y,this.getTopRight(e),c.transformPoint(e.x,e.y,e),t=e.x,s=e.y,this.getBottomLeft(e),c.transformPoint(e.x,e.y,e),n=e.x,r=e.y,this.getBottomRight(e),c.transformPoint(e.x,e.y,e),h=e.x,a=e.y}else this.getTopLeft(e),l=e.x,o=e.y,this.getTopRight(e),t=e.x,s=e.y,this.getBottomLeft(e),n=e.x,r=e.y,this.getBottomRight(e),h=e.x,a=e.y;return e.x=Math.min(l,t,n,h),e.y=Math.min(o,s,r,a),e.width=Math.max(l,t,n,h)-e.x,e.height=Math.max(o,s,r,a)-e.y,e}};I.exports=u},function(I,z){I.exports=function(M,g,p){return!(M.width<=0||M.height<=0)&&M.x<=g&&M.x+M.width>=g&&M.y<=p&&M.y+M.height>=p}},function(I,z,M){var g=M(61),p=M(62);I.exports=function(i,u,e,l){l===void 0&&(l=[]),!u&&e>0&&(u=p(i)/e);for(var o=0;o<u;o++){var t=o/u;l.push(g(i,t))}return l}},function(I,z,M){var g=M(0),p=M(302),i=M(303),u=M(26),e=M(305),l=M(2),o=new g({initialize:function(t,s,n,r){t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=0),this.type=u.LINE,this.x1=t,this.y1=s,this.x2=n,this.y2=r},getPoint:function(t,s){return p(this,t,s)},getPoints:function(t,s,n){return i(this,t,s,n)},getRandomPoint:function(t){return e(this,t)},setTo:function(t,s,n,r){return t===void 0&&(t=0),s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x1=t,this.y1=s,this.x2=n,this.y2=r,this},getPointA:function(t){return t===void 0&&(t=new l),t.set(this.x1,this.y1),t},getPointB:function(t){return t===void 0&&(t=new l),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});I.exports=o},function(I,z,M){var g=M(13);I.exports=function(p,i,u){return u===void 0&&(u=new g),u.x=p.x1+(p.x2-p.x1)*i,u.y=p.y1+(p.y2-p.y1)*i,u}},function(I,z,M){var g=M(304),p=M(13);I.exports=function(i,u,e,l){l===void 0&&(l=[]),!u&&e>0&&(u=g(i)/e);for(var o=i.x1,t=i.y1,s=i.x2,n=i.y2,r=0;r<u;r++){var h=r/u,a=o+(s-o)*h,c=t+(n-t)*h;l.push(new p(a,c))}return l}},function(I,z){I.exports=function(M){return Math.sqrt((M.x2-M.x1)*(M.x2-M.x1)+(M.y2-M.y1)*(M.y2-M.y1))}},function(I,z,M){var g=M(13);I.exports=function(p,i){i===void 0&&(i=new g);var u=Math.random();return i.x=p.x1+u*(p.x2-p.x1),i.y=p.y1+u*(p.y2-p.y1),i}},function(I,z,M){var g=M(13);I.exports=function(p,i){return i===void 0&&(i=new g),i.x=p.x+Math.random()*p.width,i.y=p.y+Math.random()*p.height,i}},function(I,z,M){var g=M(308),p=M(331),i={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u){return u===void 0&&(this.texture||this.shader)&&(u=this),new g(this.scene,u)},createGeometryMask:function(u){return u===void 0&&this.type==="Graphics"&&(u=this),new p(this.scene,u)}};I.exports=i},function(I,z,M){var g=M(0),p=M(309),i=M(326),u=new g({initialize:function(e,l){var o=e.sys.renderer;this.renderer=o,this.bitmapMask=l,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),e.sys.game.events.on(p.CONTEXT_RESTORED,this.createMask,this),o&&o.on(i.RESIZE,this.createMask,this)},createMask:function(){var e=this.renderer;if(e&&e.gl){this.mainTexture&&this.clearMask();var l=e.width,o=e.height,t=(l&l-1)==0&&(o&o-1)==0,s=e.gl,n=t?s.REPEAT:s.CLAMP_TO_EDGE,r=s.LINEAR;this.mainTexture=e.createTexture2D(0,r,r,n,n,s.RGBA,null,l,o),this.maskTexture=e.createTexture2D(0,r,r,n,n,s.RGBA,null,l,o),this.mainFramebuffer=e.createFramebuffer(l,o,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(l,o,this.maskTexture,!0)}},clearMask:function(){var e=this.renderer;e&&e.gl&&this.mainTexture&&(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,l,o){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,o)},postRenderWebGL:function(e,l){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(i.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});I.exports=u},function(I,z,M){I.exports={BLUR:M(310),BOOT:M(311),CONTEXT_LOST:M(312),CONTEXT_RESTORED:M(313),DESTROY:M(314),FOCUS:M(315),HIDDEN:M(316),PAUSE:M(317),POST_RENDER:M(318),POST_STEP:M(319),PRE_RENDER:M(320),PRE_STEP:M(321),READY:M(322),RESUME:M(323),STEP:M(324),VISIBLE:M(325)}},function(I,z){I.exports="blur"},function(I,z){I.exports="boot"},function(I,z){I.exports="contextlost"},function(I,z){I.exports="contextrestored"},function(I,z){I.exports="destroy"},function(I,z){I.exports="focus"},function(I,z){I.exports="hidden"},function(I,z){I.exports="pause"},function(I,z){I.exports="postrender"},function(I,z){I.exports="poststep"},function(I,z){I.exports="prerender"},function(I,z){I.exports="prestep"},function(I,z){I.exports="ready"},function(I,z){I.exports="resume"},function(I,z){I.exports="step"},function(I,z){I.exports="visible"},function(I,z,M){I.exports={POST_RENDER:M(327),PRE_RENDER:M(328),RENDER:M(329),RESIZE:M(330)}},function(I,z){I.exports="postrender"},function(I,z){I.exports="prerender"},function(I,z){I.exports="render"},function(I,z){I.exports="resize"},function(I,z,M){var g=new(M(0))({initialize:function(p,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(p){return this.geometryMask=p,this},setInvertAlpha:function(p){return p===void 0&&(p=!0),this.invertAlpha=p,this},preRenderWebGL:function(p,i,u){var e=p.gl;p.flush(),p.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),p.maskCount=0),p.currentCameraMask.mask!==this&&(p.currentMask.mask=this),p.maskStack.push({mask:this,camera:u}),this.applyStencil(p,u,!0),p.maskCount++},applyStencil:function(p,i,u){var e=p.gl,l=this.geometryMask,o=p.maskCount;e.colorMask(!1,!1,!1,!1),u?(e.stencilFunc(e.EQUAL,o,255),e.stencilOp(e.KEEP,e.KEEP,e.INCR)):(e.stencilFunc(e.EQUAL,o+1,255),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),l.renderWebGL(p,l,i),p.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),u?this.invertAlpha?e.stencilFunc(e.NOTEQUAL,o+1,255):e.stencilFunc(e.EQUAL,o+1,255):this.invertAlpha?e.stencilFunc(e.NOTEQUAL,o,255):e.stencilFunc(e.EQUAL,o,255)},postRenderWebGL:function(p){var i=p.gl;p.maskStack.pop(),p.maskCount--,p.flush();var u=p.currentMask;if(p.maskStack.length===0)u.mask=null,i.disable(i.STENCIL_TEST);else{var e=p.maskStack[p.maskStack.length-1];e.mask.applyStencil(p,e.camera,!1),p.currentCameraMask.mask!==e.mask?(u.mask=e.mask,u.camera=e.camera):u.mask=null}},preRenderCanvas:function(p,i,u){var e=this.geometryMask;p.currentContext.save(),e.renderCanvas(p,e,u,null,null,!0),p.currentContext.clip()},postRenderCanvas:function(p){p.currentContext.restore()},destroy:function(){this.geometryMask=null}});I.exports=g},function(I,z){I.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(M){this._displayOriginX=M,this.originX=M/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(M){this._displayOriginY=M,this.originY=M/this.height}},setOrigin:function(M,g){return M===void 0&&(M=.5),g===void 0&&(g=M),this.originX=M,this.originY=g,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(M,g){return M===void 0&&(M=0),g===void 0&&(g=M),this.displayOriginX=M,this.displayOriginY=g,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(I,z,M){var g=M(19),p=M(334),i=M(10),u=M(335),e=M(2),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(o,t){t===void 0&&(t=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=o,t&&this.startFollow(t),this},setRotateToPath:function(o,t){return t===void 0&&(t=0),this.rotateToPath=o,this.pathRotationOffset=t,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,t){o===void 0&&(o={}),t===void 0&&(t=0);var s=this.pathTween;s&&s.isPlaying()&&s.stop(),typeof o=="number"&&(o={duration:o}),o.from=i(o,"from",0),o.to=i(o,"to",1);var n=p(o,"positionOnPath",!1);this.rotateToPath=p(o,"rotateToPath",!1),this.pathRotationOffset=i(o,"rotationOffset",0);var r=i(o,"startAt",t);if(r&&(o.onStart=function(a){var c=a.data[0];c.progress=r,c.elapsed=c.duration*r;var d=c.ease(c.progress);c.current=c.start+(c.end-c.start)*d,c.target[c.key]=c.current}),this.pathOffset||(this.pathOffset=new e(this.x,this.y)),this.pathVector||(this.pathVector=new e),this.pathDelta||(this.pathDelta=new e),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),n&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var h=this.path.getPoint(.1);this.rotation=Math.atan2(h.y-this.y,h.x-this.x)+g(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o){var t=o.data[0],s=this.pathDelta,n=this.pathVector;if(s.copy(n).negate(),t.state===u.COMPLETE)return this.path.getPoint(1,n),s.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(t.state!==u.PLAYING_FORWARD&&t.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),n),s.add(n),n.add(this.pathOffset);var r=this.x,h=this.y;this.setPosition(n.x,n.y);var a=this.x-r,c=this.y-h;if(a===0&&c===0)return;if(t.state!==this._prevDirection)return void(this._prevDirection=t.state);this.rotateToPath&&(this.rotation=Math.atan2(c,a)+g(this.pathRotationOffset))}}};I.exports=l},function(I,z){I.exports=function(M,g,p){return M&&M.hasOwnProperty(g)?M[g]:p}},function(I,z){I.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(I,z,M){var g=M(337),p=M(338),i=M(12),u={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){e===void 0&&(e=p.MULTI_PIPELINE);var l=this.scene.sys.renderer;if(!l)return!1;var o=l.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var t=o.get(e);if(t)return this.defaultPipeline=t,this.pipeline=t,!0}return!1},setPipeline:function(e,l,o){var t=this.scene.sys.renderer;if(!t)return this;var s=t.pipelines;if(s){var n=s.get(e);n&&(this.pipeline=n),l&&(this.pipelineData=o?g(l):l)}return this},setPostPipeline:function(e,l,o){var t=this.scene.sys.renderer;if(!t)return this;var s=t.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=s.getPostPipeline(e[n],this);r&&this.postPipelines.push(r)}l&&(this.pipelineData=o?g(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(e,l){var o=this.pipelineData;return l===void 0?delete o[e]:o[e]=l,this},getPostPipeline:function(e){for(var l=this.postPipelines,o=[],t=0;t<l.length;t++){var s=l[t];(typeof e=="string"&&s.name===e||s instanceof e)&&o.push(s)}return o.length===1?o[0]:o},resetPipeline:function(e,l){return e===void 0&&(e=!1),l===void 0&&(l=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),l&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(e){e===void 0&&(e=!1);for(var l=this.postPipelines,o=0;o<l.length;o++)l[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var l=this.postPipelines,o=l.length-1;o>=0;o--){var t=l[o];(typeof e=="string"&&t.name===e||typeof e!="string"&&t instanceof e)&&(t.destroy(),i(l,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};I.exports=u},function(I,z){var M=function(g){var p,i,u;if(typeof g!="object"||g===null)return g;for(u in p=Array.isArray(g)?[]:{},g)i=g[u],p[u]=M(i);return p};I.exports=M},function(I,z){I.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(I,z){var M={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(g){this.scaleX=g/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(g){this.scaleY=g/this.frame.realHeight}},setSizeToFrame:function(g){return g===void 0&&(g=this.frame),this.width=g.realWidth,this.height=g.realHeight,this},setSize:function(g,p){return this.width=g,this.height=p,this},setDisplaySize:function(g,p){return this.displayWidth=g,this.displayHeight=p,this}};I.exports=M},function(I,z){I.exports={texture:null,frame:null,isCropped:!1,setTexture:function(M,g){return this.texture=this.scene.sys.textures.get(M),this.setFrame(g)},setFrame:function(M,g,p){return g===void 0&&(g=!0),p===void 0&&(p=!0),this.frame=this.texture.get(M),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&g&&this.setSizeToFrame(),this._originComponent&&p&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(I,z){I.exports={texture:null,frame:null,isCropped:!1,setCrop:function(M,g,p,i){if(M===void 0)this.isCropped=!1;else if(this.frame){if(typeof M=="number")this.frame.setCropUVs(this._crop,M,g,p,i,this.flipX,this.flipY);else{var u=M;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(M,g){return this.texture=this.scene.sys.textures.get(M),this.setFrame(g)},setFrame:function(M,g,p){return g===void 0&&(g=!0),p===void 0&&(p=!0),this.frame=this.texture.get(M),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&g&&this.setSizeToFrame(),this._originComponent&&p&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(I,z){I.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(M,g,p,i){return M===void 0&&(M=16777215),g===void 0&&(g=M,p=M,i=M),this.tintTopLeft=M,this.tintTopRight=g,this.tintBottomLeft=p,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(M,g,p,i){return this.setTint(M,g,p,i),this.tintFill=!0,this},tint:{set:function(M){this.setTint(M,M,M,M)}},isTinted:{get:function(){var M=16777215;return this.tintFill||this.tintTopLeft!==M||this.tintTopRight!==M||this.tintBottomLeft!==M||this.tintBottomRight!==M}}}},function(I,z,M){var g=M(1),p=M(1);g=M(344),p=M(345),I.exports={renderWebGL:g,renderCanvas:p}},function(I,z){I.exports=function(M,g,p,i){var u=g.list,e=u.length;if(e!==0){p.addToRenderList(g);var l=g.localTransform;i?(l.loadIdentity(),l.multiply(i),l.translate(g.x,g.y),l.rotate(g.rotation),l.scale(g.scaleX,g.scaleY)):l.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY),M.pipelines.preBatch(g);var o=g.blendMode!==-1;o||M.setBlendMode(0);for(var t=g.alpha,s=g.scrollFactorX,n=g.scrollFactorY,r=0;r<e;r++){var h=u[r];if(h.willRender(p)){var a,c,d,f;if(h.alphaTopLeft!==void 0)a=h.alphaTopLeft,c=h.alphaTopRight,d=h.alphaBottomLeft,f=h.alphaBottomRight;else{var v=h.alpha;a=v,c=v,d=v,f=v}var m=h.scrollFactorX,x=h.scrollFactorY;o||h.blendMode===M.currentBlendMode||M.setBlendMode(h.blendMode);var T=h.mask;T&&T.preRenderWebGL(M,h,p);var y=h.type;y!==M.currentType&&(M.newType=!0,M.currentType=y),M.nextTypeMatch=r<e-1&&u[r+1].type===M.currentType,h.setScrollFactor(m*s,x*n),h.setAlpha(a*t,c*t,d*t,f*t),h.renderWebGL(M,h,p,l),h.setAlpha(a,c,d,f),h.setScrollFactor(m,x),T&&T.postRenderWebGL(M,p),M.newType=!1}}M.pipelines.postBatch(g)}}},function(I,z){I.exports=function(M,g,p,i){var u=g.list;if(u.length!==0){p.addToRenderList(g);var e=g.localTransform;i?(e.loadIdentity(),e.multiply(i),e.translate(g.x,g.y),e.rotate(g.rotation),e.scale(g.scaleX,g.scaleY)):e.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);var l=g.blendMode!==-1;l||M.setBlendMode(0);var o=g._alpha,t=g.scrollFactorX,s=g.scrollFactorY;g.mask&&g.mask.preRenderCanvas(M,null,p);for(var n=0;n<u.length;n++){var r=u[n];if(r.willRender(p)){var h=r.alpha,a=r.scrollFactorX,c=r.scrollFactorY;l||r.blendMode===M.currentBlendMode||M.setBlendMode(r.blendMode),r.setScrollFactor(a*t,c*s),r.setAlpha(h*o),r.renderCanvas(M,r,p,e),r.setAlpha(h),r.setScrollFactor(a,c)}}g.mask&&g.mask.postRenderCanvas(M)}}},function(I,z,M){var g=M(25);I.exports=function(p,i,u){u===void 0&&(u=new g);var e=Math.min(p.x,i.x),l=Math.min(p.y,i.y),o=Math.max(p.right,i.right)-e,t=Math.max(p.bottom,i.bottom)-l;return u.setTo(e,l,o,t)}},function(I,z,M){var g=M(1),p=M(1);g=M(348),p=M(349),I.exports={renderWebGL:g,renderCanvas:p}},function(I,z){I.exports=function(M,g,p,i){var u=g.plugin.sceneRenderer,e=g.list;if(e.length!==0){p.addToRenderList(g);var l=g.localTransform;i?(l.loadIdentity(),l.multiply(i),l.translate(g.x,g.y),l.rotate(g.rotation),l.scale(g.scaleX,g.scaleY)):l.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY),M.newType&&(M.pipelines.clear(),u.begin());var o=M.nextTypeMatch;M.nextTypeMatch=!0,M.newType=!1;for(var t=0;t<e.length;t++){var s=e[t];if(s.willRender(p,g)){var n=s.mask;n&&(u.end(),M.pipelines.rebind(),n.preRenderWebGL(M,s,p),M.pipelines.clear(),u.begin()),s.renderWebGL(M,s,p,l,g),n&&(u.end(),M.pipelines.rebind(),n.postRenderWebGL(M,p),M.pipelines.clear(),u.begin())}}M.nextTypeMatch=o,o||(u.end(),M.pipelines.rebind())}else u.batcher.isDrawing&&M.finalType&&(u.end(),M.pipelines.rebind())}},function(I,z){I.exports=function(M,g,p,i){var u=g.list;if(u.length!==0){p.addToRenderList(g);var e=g.localTransform;i?(e.loadIdentity(),e.multiply(i),e.translate(g.x,g.y),e.rotate(g.rotation),e.scale(g.scaleX,g.scaleY)):e.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);var l=g.blendMode!==-1;l||M.setBlendMode(0);var o=g._alpha,t=g.scrollFactorX,s=g.scrollFactorY;g.mask&&g.mask.preRenderCanvas(M,null,p);for(var n=0;n<u.length;n++){var r=u[n];if(r.willRender(p)){var h=r.alpha,a=r.scrollFactorX,c=r.scrollFactorY;l||r.blendMode===M.currentBlendMode||M.setBlendMode(r.blendMode),r.setScrollFactor(a*t,c*s),r.setAlpha(h*o),r.renderCanvas(M,r,p,e),r.setAlpha(h),r.setScrollFactor(a,c)}}g.mask&&g.mask.postRenderCanvas(M)}}}])});export default At();
