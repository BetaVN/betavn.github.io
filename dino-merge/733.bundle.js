"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[733],{607:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n(0),r=n(4),a=n.n(r),s=n(660),o=n(657),c=n(653),l=function(e){function t(t,n,i,r,a){var s;return void 0===a&&(a=!1),(s=e.call(this,t,n,i)||this).placementArea=void 0,s.areaRect=void 0,s.currentScene=void 0,s.rowId=void 0,s.colId=void 0,s.id=void 0,s.isPlayer=void 0,s.handleOnClickArea=function(){var e;null==(e=s.currentScene.currentChooseSquare)||e.setZoneColor(),s.currentScene.currentChooseSquare=(0,c.Z)(s),s.setZoneColor(!0),s.scene.game.levelBuilder.showEditorFolderForSquare((0,c.Z)(s))},s.currentScene=t,s.isPlayer=a,s.createAreaRect(r),s.createPlacementArea(r),s.addEventListener(),s.setDepth(10),s.scene.add.existing((0,c.Z)(s)),s}(0,i.Z)(t,e);var n=t.prototype;return n.createAreaRect=function(e){this.areaRect=this.scene.add.rectangle(0,0,e,e,16777215,1),this.add(this.areaRect),this.setZoneColor()},n.createPlacementArea=function(e){this.placementArea=this.scene.add.zone(0,0,e,e),this.add(this.placementArea)},n.addEventListener=function(){this.placementArea.setInteractive({useHandCursor:!0}),this.placementArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnClickArea)},n.setZoneColor=function(e){if(void 0===e&&(e=!1),e)return this.areaRect.setStrokeStyle(4,0),void this.setDepth(11);this.setDepth(10),this.isPlayer?this.areaRect.setStrokeStyle(2,65280):this.areaRect.setStrokeStyle(2,16711680)},n.setSquarePosition=function(e,t){this.rowId=e,this.colId=t,this.id=""+e+t},t}(Phaser.GameObjects.Container),h=function(){function e(e){this.scene=void 0,this.fieldBackground=void 0,this.playerPlacementSquares=void 0,this.enemyPlacementSquares=void 0,this.scene=e,this.playerPlacementSquares=[],this.enemyPlacementSquares=[],this.createBattleField(),this.showPlacementSquares()}var t=e.prototype;return t.createBattleField=function(){this.createFieldBackground(),this.createPlacementSquares()},t.createFieldBackground=function(){var e=this.scene.gameZone,t=e.displayWidth,n=e.displayHeight;this.fieldBackground=this.scene.add.rectangle(0,0,t,n,12502996,.75),Phaser.Display.Align.In.Center(this.fieldBackground,this.scene.gameZone),this.fieldBackground.setDepth(o.Z.BACKGROUND)},t.createPlacementSquares=function(){this.createPlayerPlacementSquares(),this.createEnemyPlacementSquares()},t.createPlayerPlacementSquares=function(){for(var e=this.fieldBackground.getBottomLeft(),t=this.fieldBackground.displayWidth,n=0;n<3;n++)for(var i=0;i<5;i++){var r=new l(this.scene,e.x+i*t/5+t/10,e.y+(n-2)*t/5-t/10,t/5,!0);r.setSquarePosition(n+1,i+1),this.playerPlacementSquares.push(r),this.scene.game.levelBuilder.createEditorFolderForSquare(r)}},t.createEnemyPlacementSquares=function(){for(var e=this.fieldBackground.getTopLeft(),t=this.fieldBackground.displayWidth,n=0;n<3;n++)for(var i=0;i<5;i++){var r=new l(this.scene,e.x+i*t/5+t/10,e.y+n*t/5+t/10,t/5,!1);r.setSquarePosition(n+1,i+1),this.enemyPlacementSquares.push(r),this.scene.game.levelBuilder.createEditorFolderForSquare(r)}},t.showPlacementSquares=function(){this.playerPlacementSquares.forEach((function(e){return e.setVisible(!0)})),this.enemyPlacementSquares.forEach((function(e){return e.setVisible(!0)}))},e}(),u=n(675),d=n(683),f=function(){function e(e){this.scene=void 0,this.meleeSpawnPool=void 0,this.rangedSpawnPool=void 0,this.scene=e,this.createFactories()}var t=e.prototype;return t.createFactories=function(){this.meleeSpawnPool=new u.Z(this.scene),this.rangedSpawnPool=new d.Z(this.scene)},t.createRange=function(e){return this.rangedSpawnPool.requestUnitByLevel(e,!1)},t.createMelee=function(e){return this.meleeSpawnPool.requestUnitByLevel(e,!1)},e}(),v=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,a()(t=[this]).call(t,r))||this).fontName=void 0,n.text=void 0,n.field=void 0,n.currentChooseSquare=void 0,n.unitManager=void 0,n.run=function(){},n}(0,i.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.fontName="LilitaOne",this.textStyler.addFont({type:"local",fontName:this.fontName,fontType:"truetype"})},n.create=function(){e.prototype.create.call(this),this.cameras.main.setBackgroundColor(4868682),this.createManager(),this.createTextObject(),this.createField(),this.showEditor()},n.createManager=function(){this.unitManager=new f(this)},n.createTextObject=function(){this.text=this.add.text(0,0,"Level Builder",{fontFamily:this.fontName,fontSize:"50px",color:"#ffffff",stroke:"#000000",strokeThickness:3}),this.text.setHighQuality(),Phaser.Display.Align.In.Center(this.text,this.gameZone)},n.createField=function(){this.field=new h(this)},n.showEditor=function(){this.game.levelBuilder.show()},t}(s.Z),m=v}}]);