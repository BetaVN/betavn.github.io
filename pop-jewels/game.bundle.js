(function(){var e={415:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=i.charCodeAt(u++)|i.charCodeAt(u++)<<8|i.charCodeAt(u++)<<16|i.charCodeAt(u++)<<24;for(var l=3&a;l--;)s[u]=i.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},501:function(e,t,n){"use strict";n.d(t,{J:function(){return g}});var i=n(3),a=n(67),r=n.n(a),s=n(52),o=n.n(s),c=n(2),u=n.n(c),l=n(595),h=n(502),d=n(594),p=GameCore.Configs.Notification,f=p.GameTitle,m=p.GameImage,g=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),v=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var e=(0,i.Z)(u().mark((function e(n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new h.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i,a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,"ANDROID"!==GameSDK.getPlatform()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut)||!(0,d.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(a=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:a}),r()(t=GameSDK.getSupportedAPIs()).call(t,"canCreateShortcutAsync")){e.next=20;break}return e.abrupt("return",!1);case 20:return e.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!e.sent){e.next=40;break}return s=l._.SHORTCUT_CREATE,o=l._.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=27,e.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return e.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 36:return e.prev=36,e.t1=e.catch(27),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 40:return e.abrupt("return",!1);case 43:return e.prev=43,e.t2=e.catch(2),e.abrupt("return",!1);case 46:case"end":return e.stop()}}),e,this,[[2,43],[27,36]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,r()(t=GameSDK.getSupportedAPIs()).call(t,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(n=e.t0,!(i=n.lastCallSubscribeBot)||!(0,d.Gm)(+i)){e.next=19;break}return e.abrupt("return",!1);case 19:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),s=l._.BOT_SUBSCRIBE,o=l._.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,i.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r()(a=GameSDK.getSupportedAPIs()).call(a,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"ru"},t.injectTournament=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,n.e(543).then(n.bind(n,496));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new g;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,e.next=5,FBInstant.graphApi.requestAsync("/me/notifications","POST",{message:o()({title:f,body:n,media_url:m}),schedule_interval:i});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}();t.Z=v},505:function(e,t,n){"use strict";var i=n(95),a=n.n(i),r=n(35),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(32),u=n.n(c),l=n(67),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},f=n(25),m=n.n(f),g=function(e,t,n){return m()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return u()(e).call(e,g)},E={chunk:o,difference:d,shuffle:p,unique:v},A=n(47),y=n.n(A),S=n(248),T=n.n(S),I=T()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),b=T()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),C=T()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),u=a[o-1],l=y()(r=new Array(+c)).call(r,u);n.push.apply(n,l)}else n.push(a)}return n})),w=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return b(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),C(e).forEach((function(e){r++,a[s][r]=I(e,i)}))})),a},O=T()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),R=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))a+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=O(u,n);l===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+l,r=l}}return a=a.replace(/1([A-Z])/g,"$1")},P=function(e){try{return atob(e)}catch(t){return""}},_={decodeMap:w,encodeMap:R,hashToString:P,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},x=function(e){try{return JSON.parse(e)}catch(t){return null}},k=n(52),D=n.n(k),L=function(e){try{return D()(e,null,0)}catch(t){return""}},M=function(e){return x(L(e))},N={clone:M,decode:x,encode:L},B=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},U=function e(t){if(!B(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];B(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},F=n(20),Y=n.n(F),H=function(e){var t={};return Y()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},W=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},V={clear:U,hasOwn:Z,invert:H,keyBy:W},K=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},z=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(123),X=n.n(j),q=function(e){var t;return X()(t=Y()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},J=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(Math.random()*n.length);i+=n.charAt(s)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(5),te=n.n(ee),ne=n(425),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=ie()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},re=n(255),se=n.n(re),oe={capitalize:K,hashCode:z,params:q,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:J,random:Q,removeDiacritics:$,getShortName:ae,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+se()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},ue=function(){return false},le=function(e){return"function"===typeof e},he=function(e){return"number"===typeof e},de=function(e){var t;return m()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},fe=n(26),me=n.n(fe),ge=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(me())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},ve=function(e){if(m()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},Ee=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,m=-1===l?99999999:l;if(e>=s){var g=Math.floor(e/Math.pow(10,c)),v=Math.floor((g.toString().length-1)/c)+1,E=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),A=m-f[v].length,y=E.substring(0,A);return(d?ve(y):y)+f[v]}var S=e.toFixed(a),T=m-f[0].length,I=S.substring(0,T);return d?ve(I):I+f[0]},Ae={Array:E,Hash:_,Json:N,Object:V,String:oe,Valid:{isBoolean:ce,isDebugger:ue,isFunction:le,isNumber:he,isObject:B,isPropertyKey:de,isString:pe,isValueChangeAsync:ge},Image:{drawCircle:function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},drawBorder:function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),u=c.context,l=Math.min(r,s)/100*a/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0}},Number:{toAbbreviatedString:Ee,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i}},Device:{isDesktop:function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)&&!/like Mac OS/.test(e)},isMobile:function(){var e=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(e)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},ye=n(8),Se=n(592),Te={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",AppId:"5e5f92faa2534d97bf064f6564222c4d",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards",LeaderboardId:"641bca1e4967c13f76e78c9a"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Gameplay:{GiftTime:3630}},Ie={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},be={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Pop Jewels",GameImage:"https://static-tt.citigo.site/fbig-singleplay-apps/pop-jewels-banner.jpg"},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,DisableLandscape:!0,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"6419959d17453316f3671f7c",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!1,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:60},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};be=(0,Se.TS)((0,ye.Z)({},be),Ie);var Ce=be=(0,Se.TS)((0,ye.Z)({},be),Te),we=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},Oe=n(428),Re=n.n(Oe),Pe=n(429),_e=n.n(Pe),xe=n(430),ke=n.n(xe),De=n(499),Le=!1,Me=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return}var o=Re()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(m()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=_e()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===_e()(a,e))))}));l.length<1||l.forEach((function(e){if(a){var t=_e()(n,e);_e()(a,e),ke()(a,e,t)}}))}}}))},Ne={Configs:Ce,Utils:Ae,LiveUpdate:{Scene:we,SceneObjects:function(e,t){return void 0===t&&(t=Le),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;Le=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,De.D)((function(){var e=c.children.getAll();Me(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(u){}}}}};window.GameCore=Ne},634:function(e,t,n){"use strict";var i=n(3),a=n(0),r=n(2),s=n.n(r),o=n(607),c=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.INTERSTITIAL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.REWARDED?4:e.t0===GameCore.Ads.Types.INTERSTITIAL?7:10;break;case 4:return e.next=6,n.getRewardedVideoAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getInterstitialAdAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},599:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return r},fJ:function(){return a},kL:function(){return i},qj:function(){return s},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},611:function(e,t,n){"use strict";var i=n(592),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},626:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(611),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(a=r.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,i.Z)(r)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},610:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},619:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:400,ease:n(187).Z,props:{scale:"-=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},621:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:400,ease:n(187).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},187:function(e,t,n){"use strict";var i=n(184),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},614:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},629:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},615:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},612:function(e,t,n){"use strict";var i=n(0),a=n(611),r={targets:[],duration:300,ease:n(187).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},620:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(611),s={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},o=function(e){function t(t){var n,a;(a=e.call(this,s,t)||this).spline=void 0,a.createCounter=function(e,t){var n=a.config.onCurveUpdate,i="function"===typeof n?n:null;t.forEach((function(t,n){if(a.scene){var r=e.data[n],s=r.duration,o=r.delay,c=new Phaser.Math.Vector2;a.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){a.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,i&&i(t)}})}}))};var r=a.config.curve;return r?(a.spline=new Phaser.Curves.Spline(r),null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,a.createCounter),a):(0,i.Z)(a)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},618:function(e,t,n){"use strict";var i=n(43),a=n(609),r=n(0),s=n(595),o=n(619),c=n(613),u=n(617),l=n(500),h=function(e){function t(t,n,i,r,s,l){var h;return void 0===l&&(l=!1),(h=e.call(this,t)||this).useSound=!0,h.isClicked=!1,h.scaleUp=-1,h.scaleDown=-1,h.button=void 0,h.upAnimation=void 0,h.downAnimation=void 0,h.isUsePixelPerfect=!1,h.hitArea=void 0,h.hitZone=void 0,h.scaleDownPress=void 0,h.parentName=void 0,h.handelObjectDestroy=function(){h.scene&&h.scene.events.off(Phaser.Scenes.Events.SLEEP,h.handleSceneSleep)},h.handleSceneSleep=function(){h.scene&&h.scene.tweens.killTweensOf((0,a.Z)(h))},h.handlePointerDown=function(){var e,t;h.isClicked||null!=(e=h.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(h.isClicked=!0,h.runDownAnimation())},h.handleOnClick=function(e){return function(){var t,n,i,a;h.isClicked&&(null!=(t=h.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(h.isClicked=!1,h.runUpAnimation(),null==(i=h.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){h.logButtonEvent(),h.addDebugData(),h.processCallback(e)}))))}},h.handlePointerOut=function(){var e,t;h.isClicked&&(null!=(e=h.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(h.isClicked=!1,h.runUpAnimation()))},h.runDownAnimation=function(){var e;-1===h.scaleDown&&(h.scaleUp=h.scale,h.scaleDown=h.scaleDownPress),h.useSound&&h.scene.audio.playSound(u.Z.BUTTON_CLICK),null==(e=h.downAnimation)||e.remove(),h.downAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleDown},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.downAnimation.play()},h.runUpAnimation=function(){var e;-1!==h.scaleUp&&(null==(e=h.upAnimation)||e.remove(),h.upAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleUp},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.upAnimation.play())},h.isUsePixelPerfect=l,h.setDepth(c.Z.BUTTON),h.createButton(n,i,r,s),h.updateSize(),h.listenEvents(),h.scene.add.existing((0,a.Z)(h)),h}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=h},630:function(e,t,n){"use strict";var i=n(0),a=n(605),r=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n.key,n.button,i,a)||this).icon=void 0,r.text=void 0,r.payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25),this.icon=e},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t),this.text=t},t}(n(618).Z);t.Z=r},608:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606),s=n(610),o=r.Z.DEFAULT,c=o.KEY,u=o.FRAME,l=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,u.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(113,113),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new s.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=l},633:function(e,t,n){"use strict";var i=n(8),a=n(43),r=n(609),s=n(0),o=n(41),c=n.n(o),u=n(123),l=n.n(u),h=n(47),d=n.n(h),p=n(32),f=n.n(p),m=n(35),g=n.n(m),v=n(95),E=n.n(v),A=n(110),y=n.n(A),S=n(132),T=n.n(S),I=n(613),b=n(499);function C(e,t){var n="undefined"!==typeof y()&&T()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return w(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return E()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var O=function(e){function t(t,n){var a,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,b.D)((function(e,t,n){if(s.isEnable){var i;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(i=s.lastScrollY).call(i,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=a,s.isReachTop()&&a>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&a<=0){var u=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,u)}var l=a*o,h=s.maxScrollOver*s.height;s.value+l>s.marginTop+h?s.value=s.marginTop+h:s.value+l<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=l,s.callOnScrollEvents(s.value,l)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling){var n=l()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,u=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(a=new Array(3)).call(a,0),s.setSize(o,u),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(I.Z.PRIORITY),this.boundBottom.setDepth(I.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=C(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=O},613:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},605:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"notoSans",TEXTURE:{en:"./assets/fonts/bebas.png",ru:"./assets/fonts/bebas.png",ja:"./assets/fonts/MochiyPopOne-Regular-JA.png",id:"./assets/fonts/bebas.png"},DATA:{en:"./assets/fonts/bebas.xml",ru:"./assets/fonts/bebas.xml",ja:"./assets/fonts/MochiyPopOne-Regular-JA.xml",id:"./assets/fonts/bebas.xml"}},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},503:function(e,t,n){"use strict";var i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+(0,n(504).t)()+"x/bg.jpg",CONFIG:{}}};t.Z=i},606:function(e,t,n){"use strict";var i=n(8),a=(0,n(504).t)(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",LOGO_JA:"title-logo-ja",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",BOTTOM_HORIZONTAL_LINE:"bottom-horizontal-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",NO_THANK_TEXT_JA:"texts/no-thank-ja",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",TEXT_COOL_JA:"texts/cool-ja",TEXT_GOOD_JA:"texts/good-ja",TEXT_GREAT_JA:"texts/great-ja",TEXT_EXCELLENT_JA:"texts/excellent-ja",TEXT_CONGRATULATION_JA:"texts/congratulation-ja",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},602:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(110),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},604:function(e,t,n){"use strict";n.d(t,{Ks:function(){return r},Xs:function(){return s},o4:function(){return a}});var i=n(601),a={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN"},r={SCREEN:200,POPUP:300,PRIORITY:999},s=i.Z},617:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",DIAMONDS_DROP:"diamonds_drop",DIAMONDS_EAT:"diamonds_eat",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small",GEM_DROP:"gem_drop",GAME_OVER_SCENE:"game_over_scene",GEM_EXPLOSIVE_1:"gem_explosive_1",GEM_EXPLOSIVE_2:"gem_explosive_2",GEM_EXPLOSIVE_3:"gem_explosive_3",GEM_EXPLOSIVE_4:"gem_explosive_4",GEM_EXPLOSIVE_5:"gem_explosive_5",GEM_EXPLOSIVE_6:"gem_explosive_6",GEM_EXPLOSIVE_FREEZE:"gem_explosive_freeze",GEM_FALLING:"gem_falling",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",ITEM_ACTIVE_AMBIENCE:"item_active_ambience",MISSION_COMPLETED:"mission_completed",MISSION_REWARD:"mission_reward",MOVE_WRONG:"move_wrong",START_LEVEL:"start_level",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",START_GAME:"start_game",USE_HAMMER:"use_hammer",USE_PAINT:"use_paint",USE_SHUFFLE:"use_shuffle",YOU_LOSE:"you_lose",YOU_WIN:"you_win"}},631:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},622:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},632:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606),s=n(592),o=r.Z.EFFECTS,c=o.KEY,u=o.FRAME,l=function(e){function t(t,n){var a;return(a=e.call(this,t,c,u.FX_CONFETTI_SMALL_1)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=u.FX_CONFETTI_SMALL_1,t=u.FX_CONFETTI_SMALL_2,n=u.FX_CONFETTI_SMALL_3,i=u.FX_CONFETTI_SMALL_4,a=1/this.scene.world.getPixelRatio(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},625:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.ICON_DIAMOND)||this).emitter=void 0,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.ICON_DIAMOND,gravityY:160,angle:{min:-180,max:0},speed:{min:50,max:200},scale:{min:.3*e,max:1*e},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:1500})},n.explode=function(e,t,n){this.setActive(!0),this.setVisible(!0),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},628:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_SPARK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},624:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},627:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},623:function(e,t,n){"use strict";var i=n(609),a=n(0),r=n(606).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.scene=t,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_WHITE,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:80,maxParticles:15,scale:{start:0,end:1*e,ease:Phaser.Math.Easing.Bounce.Out},lifespan:400})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(-i/2,-a/2),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},616:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(0),a=n(595),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){var t=1.05;return"ja"===this.lang.getCurrentLanguage()&&(t=1.4),"ru"===this.lang.getCurrentLanguage()&&(t=1.05),e/t},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,r=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(r,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},607:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var i=n(3),a=n(43),r=n(0),s=n(2),o=n.n(s),c=n(5),u=n.n(c),l=n(614),h=n(615),d=n(606),p=n(602),f=n(604),m=n(603),g=(0,n(600).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),v=n(500),E=n(616),A=n(609),y=n(605),S=n(613),T=d.Z.DEFAULT,I=T.KEY,b=T.FRAME,C=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(S.Z.DEBUG),n.scene.add.existing((0,A.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,r.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:I,frame:b.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:y.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),w=C,O=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(S.Z.DEBUG),n.scene.add.existing((0,A.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,A.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,r.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:y.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),R=O,P=n(612),_=n(608),x=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(f.Ks.PRIORITY),r.background.setAlpha(.8),r}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),r=a[0],s=void 0===r?"":r,o=a[1],c=void 0===o?0:o,u=a[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new _.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:y.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new P.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),k=x,D=d.Z.DEFAULT,L=D.KEY,M=D.FRAME,N=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,v.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==p.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==p.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this,this.handleShowInterAdWhenStartGame()},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(f.o4.NOTIFY_SCREEN,k);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:L,frame:M.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new w(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new R(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new l.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new h.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(p.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==p.C.GLOBAL_SCENE&&this.storage.dispatch((0,m.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.handleShowInterAdWhenStartGame=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.audio.stopMusic(),this.audio.muteAll(),e.next=8,this.ads.preloadInterstitialAdAsync();case 8:return e.next=10,this.ads.showInterstitialAdAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),(0,v.tO)(e.t0);case 15:return e.prev=15,this.audio.unmuteAll(),this.audio.playMusic(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[3,12,15,19]])})));return function(){return e.apply(this,arguments)}}(),(0,a.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=g(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(E.Z),B=N},554:function(e,t,n){"use strict";var i=n(500),a=n(102),r=n(8),s=n(3),o=n(0),c=n(2),u=n.n(c),l=n(501),h=0,d=0,p=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;d=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(d)),d+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!d||d<30)&&(d=60),h=d;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(d)),d+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-d,n=Math.round(e*t+d);n>h&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),f=p,m=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,i,a,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),g=m,v=n(5),E=n.n(v),A=n(342),y=n.n(A),S=GameCore.Configs.Ads.Mockup.GiphyApiKey,T=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(n=document.getElementById("mock-banner-ads"))){e.next=11;break}if((i=n.getElementsByTagName("img"))&&!(i.length<=0)){e.next=8;break}return e.abrupt("return");case 8:i[0].src=t,e.next=27;break;case 11:(a=document.createElement("div")).id="mock-banner-ads",a.style.width="100%",a.style.height="50px",a.style.bottom="var(--sab)",a.style.position="fixed",a.style.background="#fff url("+t+") center center/auto no-repeat",a.style.outline="2px solid #ffffff40",a.style.outlineOffset="-2px",r=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(r),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",r.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),a.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(a);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+S+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(i=e.sent,GameCore.Utils.Valid.isObject(i)){e.next=9;break}return e.abrupt("return","");case 9:return a=i.data,r=Math.floor(Math.random()*a.length),e.abrupt("return",a[r].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),I={LOADED:"loaded",DISPLAYED:"displayed"},b=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(b||{}),C=b,w=function(e){return e.REWARDED="rewarded",e.INTERSTITIAL="interstitial",e}(w||{}),O=w,R=n(21),P=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),_=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=C.IDLE};GameCore.Ads={Types:O,Status:C,Events:I,AdError:P,AdInstance:_};var x=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=y()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(O.INTERSTITIAL,n.pID),this.rewardedVideo=new e(O.REWARDED,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(O.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new P("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(O.INTERSTITIAL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(O.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new P("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(O.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(I.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t===O.INTERSTITIAL&&(this.lastInterAdShownTime=window.performance.now()/1e3),t===O.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(I.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case O.INTERSTITIAL:return this.interstitial;case O.REWARDED:return this.rewardedVideo;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.showBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n),this.reloadBannerAdIntervals[n]=setInterval((function(){a.loadBannerAdAsync(n)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.enabled){e.next=5;break}return e.abrupt("return");case 5:if(!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,T.loadBannerAdAsync();case 9:e.next=13;break;case 11:return e.next=13,GameSDK.loadBannerAdAsync(t);case 13:this.showingBannerAd[t]=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,this.enabled){e.next=7;break}return e.abrupt("return");case 7:if(!GameCore.Configs.Ads.Mockup.Enable){e.next=13;break}return e.next=11,T.hideBannerAdAsync();case 11:e.next=17;break;case 13:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=17,GameSDK.hideBannerAdAsync();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4);case 22:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;var e=(this.bannerAdConfig||{}).bannerHeight,t=(void 0===e?0:e)+this.safeAreaBottom;if(this.game.world){var n=this.game.world,i=n.getPixelRatio(),a=n.getZoomRatio();return this.game.world.getPhysicPixels(t,i/a)}return t},t}(Phaser.Plugins.BasePlugin),k=x,D=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:D};var L=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),M=L,N=function(){function e(e,t,n){var i=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!i.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!i.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=n,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,s=(0,r.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),B=N,G=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new B(n.game,e,!1),n.setMusicVolume(n.isMuteAll?0:1)},n.initSound=function(e){n.soundManager=new B(n.game,e,!0),n.setSoundVolume(n.isMuteAll?0:1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.globalScene.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.globalScene.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),U=G,Z=n(43),F="AUTH_TOKEN_REQUEST",Y="AUTH_TOKEN_RECEIVED",H=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),W=n(600),V="auth",K=(0,W.P1)([function(e){return e[V].token}],(function(e){return e})),z=(0,W.P1)([function(e){return e[V].isRequesting}],(function(e){return e})),j=function(e){return{type:Y,payload:{token:e}}},X=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,r=n(),s=K(r),!z(r)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:F,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(j(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(j("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new H);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return K(this.state)},(0,Z.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),q=X,J=n(20),Q=n.n(J),$=n(26),ee=n.n($),te=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},ne=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=Q()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(ee())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],r=a.name,s=a.image;if(s)e.scene.textures.get(r).key!==r&&e.scene.load.image(r,s)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(a),l=u.getSourceImage(r);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&te(e),e},t}(Phaser.Plugins.ScenePlugin),ie=ne,ae=n(67),re=n.n(ae),se=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),oe=se,ce=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ue=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(re()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,r=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,a.Z)(e,ce);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=s,this.fpsTracker=new oe(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),le=ue,he={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},de=n(32),pe=n.n(de),fe=n(41),me=n.n(fe),ge=he.sound,ve=he.music,Ee=he.vibrate,Ae=he.language,ye=he.theme,Se=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,r=t.language,s=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:ge,this.music=GameCore.Utils.Valid.isBoolean(i)?i:ve,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Ee,this.language=GameCore.Utils.Valid.isString(r)?r:Ae,this.theme=GameCore.Utils.Valid.isString(s)?s:ye}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Te=Se,Ie=GameCore.Utils,be=Ie.Valid,Ce=Ie.Object,we=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,r.Z)({},he),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==be.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==be.isObject(t)){var n=new Te(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==be.isObject(t)){if(Ce.hasOwn(t,"coins")&&be.isNumber(t.coins)&&(this.gameData.coins=t.coins),Ce.hasOwn(t,"diamond")&&be.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Ce.hasOwn(t,"lastReceiveGift")&&be.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Ce.hasOwn(t,"dailyRewarded")&&be.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Ce.hasOwn(n,"lastRewarded")&&be.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Ce.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Ce.hasOwn(t,"dailyTasks")&&be.isObject(t.dailyTasks)){var i=t.dailyTasks;Ce.hasOwn(i,"startedTime")&&be.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Ce.hasOwn(i,"logTasks")&&be.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==be.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,r=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:r},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),Oe=(GameCore.Configs.ApiHost,function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Re=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe="PLAYER_RECEIVED",_e="PLAYER_DATA_UPDATE",xe="PLAYER_SCORE_UPDATE",ke="PLAYER_PROFILE_UPDATE",De="PLAYER_SETTING_UPDATE",Le="PLAYER_CONNECTED_PLAYERS_UPDATE",Me=n(502),Ne=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Be=n(35),Ge=n.n(Be),Ue="player",Ze=(0,W.P1)([function(e){return e[Ue]}],(function(e){return e})),Fe=(0,W.P1)([Ze],(function(e){return e.playerId})),Ye=(0,W.P1)([Ze],(function(e){return e.ASID})),He=(0,W.P1)([function(e){return e[Ue].data}],(function(e){return e})),We=((0,W.P1)([He],(function(e){return e.settings})),(0,W.P1)([function(e){return e[Ue].connectedPlayers}],(function(e){return e}))),Ve=(0,W.P1)([We,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=Q()(e);return Ge()(i).call(i,n,t+n)||[]})),Ke=(0,W.P1)([He],(function(e){return e.score})),ze=(0,W.P1)([He],(function(e){return e.customFields})),je=GameCore.Configs,Xe=je.AppId,qe=je.Tutorial,Je=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:Pe,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},Qe=function(e){return{type:Le,payload:{connectedPlayers:e}}},$e=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:De,payload:{name:e,value:t}});case 3:s=r(),o=He(s),c=new we({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},et=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(nt(o));case 4:c=r(),l=He(c),h=new we({}).convertToFacebookData(l),FBInstant.player.setDataAsync(h),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Ne)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},tt=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,a){var r,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={customFields:e},t.next=4,n(nt(r));case 4:s=a(),o=He(s),c=new we({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Ne)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},nt=function(e){return{type:_e,payload:{data:e}}},it=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,a){var r,s,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:xe,payload:{score:e}});case 3:Oe({score:e}),r=a(),s=He(r),o=new we({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},at=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!qe.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(nt({userGuideDisplays:1}));case 5:a=n(),r=Fe(a),s=He(a),o=new we({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),Re(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Je(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),r=Ze(a),s=r.playerId,o=r.name,c=r.photo,l=r.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return h=e.sent,d={appId:Xe,playerId:s,name:o,photo:c,locale:l,ASID:h},e.next=10,t({type:ke,payload:{profile:d}});case 10:return e.next=12,Oe(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(it(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch($e(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(et(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t){var n,a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game.facebook,e.next=4,new(ee())((function(e,t){a.once("players",(function(t){e(t)})),a.once("playersfail",(function(){return t([])})),a.getPlayers()}));case 4:if(r=e.sent,s=function(e){return!!e},o=pe()(n=me()(r).call(r,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Me.Z(t,n,i).toObject():null}))).call(n,s),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(Qe(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,i.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Qe(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Ze(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Ye(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(he,e)?he[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return Ke(this.state)},n.getCustomData=function(e){var t=ze(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return We(this.state)},n.getConnectedPlayerIds=function(e,t){return Ve(this.state,{limit:e,offset:t})},(0,Z.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),rt=at,st=n(52),ot=n.n(st),ct=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),ut=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),lt=n(594),ht=GameCore.Configs,dt=ht.AppId,pt=ht.Network,ft=function(e){if(!e.ok)throw new ct(null,{response:e})},mt=function(){var e=window.game.auth.getToken();return{token:e,timeout:pt.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},gt=function(e,t,n,i){return(0,s.Z)(u().mark((function a(){var r,s,o,c,l;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+dt+"/"+t,s=new AbortController,n.signal=s.signal,o=setTimeout((function(){s.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=ot()(i)),a.next=8,fetch(r,n);case 8:return c=a.sent,clearTimeout(o),ft(c),a.next=13,c.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return l=a.t0,a.abrupt("return",l);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof ct)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new ut(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},vt=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof ut&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,lt.qZ)(600);case 10:return e.next=12,vt(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof ut)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,a){var s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=pt.Retries),e.prev=2,s=(0,r.Z)({},mt(),n,{method:"GET"}),o=gt(i,t,s),e.next=7,vt(o,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),At=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,a,s){var o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===s&&(s=pt.Retries),e.prev=2,o=(0,r.Z)({},mt(),i,{method:"POST"}),c=gt(a,t,o,n),e.next=7,vt(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}(),yt=GameCore.Configs.ApiHost,St=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,Et("players?"+n,{},yt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt="PROFILES_DATA_UPDATE",It="profile",bt=(0,W.P1)([function(e){return e[It].data}],(function(e){return e})),Ct=(0,W.P1)([function(e){return e[It].profileIds}],(function(e){return e})),wt=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,a){var r,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=a(),s=Ct(r),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,St({playerIds:o});case 8:c=t.sent,n({type:Tt,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Ot=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(wt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return bt(this.state)},(0,Z.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Rt=Ot,Pt=n(25),_t=n.n(Pt),xt=n(182),kt=n.n(xt),Dt=["player","match"],Lt="null",Mt=GameCore.Configs.Rollbar,Nt=Mt.UseMockup,Bt=Mt.FilterError,Gt=Mt.ListPlayerDevIds,Ut=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,E()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){Nt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r,s,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(r=a.trace)?void 0:r.frames)||[];(s=n.events).push.apply(s,c);var u=document.getElementById("popup-error");u||((u=document.createElement("div")).id="popup-error",document.body.appendChild(u)),u.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+ot()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',u.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var l=document.getElementById("close");l&&(l.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=Bt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(_t()(i).call(i,t)>=0)return!1;if(_t()(a).call(a,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var r=e.name,s=Bt.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(_t()(o).call(o,r)>=0)return!1;if(_t()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=Bt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(_t()(i).call(i,t)>=0)return!1;if(_t()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,r=(0,a.Z)(e,Dt);n.rollbar.configure({payload:{player:t,match:i,other:r}})}catch(s){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(kt())({accessToken:Lt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"201"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();re()(Gt).call(Gt,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Zt=Ut,Ft=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Yt=Ft,Ht=n(595),Wt=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Ht._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Vt=Wt,Kt=n(601);GameCore.Screen=Vt,GameCore.Screens={Events:Kt.Z};var zt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Yt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),jt=zt,Xt=n(380),qt=n.n(Xt),Jt=n(596),Qt=n(597),$t=n(599),en=n(598),tn={currentSceneKey:"",prevSceneKey:""};(0,en.pV)();var nn,an,rn,sn,on,cn,un,ln,hn,dn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},pn=dn,fn={data:{}},mn={token:"",isRequesting:!1},gn=(nn={},nn[V]=function(e,t){return void 0===e&&(e=mn),(0,en.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case F:e.isRequesting=!0;break;case Y:e.token=i,e.isRequesting=!1}}}))},nn),vn=n(592),En={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:he,userGuideDisplays:0,customFields:{}},isUserNew:!0},An=(an={},an[Ue]=function(e,t){return void 0===e&&(e=En),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,u=i.connectedPlayers,l=void 0===u?[]:u,h=i.profile;switch(t.type){case Pe:var d=i.playerId,p=i.name,f=i.photo,m=i.locale,g=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=m,GameCore.Utils.Valid.isObject(g)){var v=g;n.data=(0,vn.TS)(e.data,v)}g.userGuideDisplays>0&&(n.isUserNew=!1);break;case ke:var E=h.playerId,A=h.name,y=h.photo,S=h.locale,T=h.ASID;n.ASID=T,n.playerId=E,n.name=A,n.photo=y,n.locale=S;break;case xe:n.data.score=c;break;case De:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=r;break;case _e:n.data=(0,vn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Le:if(l.length<=0)break;var I=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,vn.TS)(e.connectedPlayers,I)}}}))},an),yn=n(555),Sn=n.n(yn),Tn={data:{},profileIds:[]},In=(rn={},rn[It]=function(e,t){return void 0===e&&(e=Tn),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,s=void 0===a?[]:a;if(t.type===Tt){var o,c,u=GameCore.Utils.Object.keyBy(s,"playerId"),l=Q()(u);n.data=(0,vn.TS)((0,r.Z)({},e.data),u),n.profileIds=E()(o=[]).call(o,new(Sn())(E()(c=[]).call(c,e.profileIds,l)))}}}))},rn),bn="match",Cn="MATCH_GAMEPLAY_INITIALIZE",wn="MATCH_GAMEPLAY_START",On="MATCH_GAMEPLAY_FINISH",Rn="MATCH_GAMEPLAY_UPDATE",Pn="MATCH_GAMEPLAY_RESCUE",_n="MATCH_STATS_DATA_CLEAR",xn="MATCH_STATS_DATA_UPDATE",kn="MATCH_STATS_CURRENT_UPDATE",Dn="MATCH_SINGLE_CREATE_REQUEST",Ln="MATCH_SINGLE_DETAIL_REQUEST",Mn="MATCH_SINGLE_MOVE_UPDATED",Nn="MATCH_SINGLE_DATA_RECEIVED",Bn="MATCH_SINGLE_DATA_CLEAR",Gn="MATCH_CHALLENGE_JOIN_REQUEST",Un="MATCH_CHALLENGE_CREATE_REQUEST",Zn="MATCH_CHALLENGE_FINISH_REQUEST",Fn="MATCH_CHALLENGE_CONTINUE_REQUEST",Yn="MATCH_CHALLENGE_DATA_RECEIVED",Hn="MATCH_CHALLENGE_DATA_CLEAR",Wn="MATCH_GROUP_CREATE_REQUEST",Vn="MATCH_GROUP_FINISH_REQUEST",Kn="MATCH_ONLINE_CREATE_REQUEST",zn="MATCH_ONLINE_DATA_RECEIVED",jn="open",Xn="active",qn="finished",Jn={mode:"",status:jn,rescued:0,startAt:0,finishAt:0},Qn={single:{_id:"",data:{fen:""},playerId:"",status:jn},group:{status:jn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:jn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:jn,players:{}},updateAt:0,isRequesting:!1},$n={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},ei=(sn={},sn[bn]=(0,Jt.UY)({gameplay:function(e,t){return void 0===e&&(e=Jn),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,r=i.status;switch(t.type){case Cn:n.status=jn,n.mode=Jn.mode,n.rescued=Jn.rescued,n.startAt=Jn.startAt,n.finishAt=Jn.finishAt,n.opponentInfo=Jn.opponentInfo;break;case wn:n.mode=a,n.status=Xn,n.rescued=Jn.rescued,n.startAt=Date.now();break;case Rn:n.mode="string"===typeof a?a:e.mode,n.status=r||e.status;break;case On:n.status=qn,n.finishAt=Date.now();break;case Pn:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Qn),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,s=i.opponentInfo,o=i.players;switch(t.type){case Dn:case Ln:case Gn:case Zn:case Kn:n.isRequesting=!0;break;case Mn:n.single=(0,r.Z)({},e.single,a),n.updateAt=Date.now();break;case Nn:n.isRequesting=!1,n.single=a||Qn.single;break;case Bn:n.isRequesting=!1,n.single=Qn.single;break;case Un:case Fn:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case Yn:n.isRequesting=!1,n.challenge=(0,r.Z)({},a||Qn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Hn:n.isRequesting=!1,n.challenge=Qn.challenge;break;case Wn:n.group.status=Xn,s&&(n.group.opponentInfo=s);break;case Vn:n.group.status=qn;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Qn.online.status,n.online.players=Qn.online.players;break;case zn:n.online.status=Xn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=qn}}}))},stats:function(e,t){return void 0===e&&(e=$n),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,s=i.stats,o=i.match,c=i.current,u=i.players,l=i.leaders;switch(t.type){case _n:delete n.data[a],n.current=$n.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=$n.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case xn:n.data[a]=s;break;case kn:n.current=(0,vn.TS)((0,r.Z)({},e.current),s);break;case zn:Q()(u).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":l.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Yn:var h=o||{},d=h.blackPlayerId,p=h.blackPlayerScore,f=h.whitePlayerId,m=h.whitePlayerScore,g=h.whitePlayerLevel,v=h.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:m,level:g}}}}))}}),sn),ti="TOURNAMENT_ACTIVE",ni="TOURNAMENT_REQUEST",ii="TOURNAMENT_RECEIVED",ai={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},ri=(on={},on.tournament=function(e,t){return void 0===e&&(e=ai),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId;switch(t.type){case ti:n.active=!0,n.tournamentId=s;break;case ni:n.isRequesting=!0;break;case ii:n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},on),si="leaderboards",oi=n(87),ci=n.n(oi),ui=n(101),li=n.n(ui),hi="LEADERBOARD_DATA_REQUEST",di="LEADERBOARD_DATA_UPDATE",pi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},fi=(cn={},cn[si]=function(e,t){return void 0===e&&(e=pi),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,u=i.leaders;switch(t.type){case hi:e.type!==s&&0===c&&(n.leaders=pi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case di:if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,u)),h=ci()(l),d=pe()(h).call(h,(function(e){return!!e.name&&!!e.photo}));li()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=pi.type,n.limit=pi.limit,n.offset=pi.offset,n.leaders=pi.leaders,n.leaderboardId=pi.leaderboardId}}}))},cn),mi="missions",gi="MISSIONS_DATA_REQUEST",vi="MISSIONS_DATA_RECEIVE",Ei="MISSION_START",Ai="MISSION_UPDATE",yi="MISSION_COMPLETED",Si={mission:null,missions:null,isRequesting:!1},Ti=(un={},un[mi]=function(e,t){return void 0===e&&(e=Si),(0,en.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case gi:n.isRequesting=!0;break;case vi:if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case Ei:if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},Q()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case Ai:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case yi:if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},un),Ii="dailyTasks",bi="DAILY_TASKS_DATA_REQUEST",Ci="DAILY_TASKS_DATA_RECEIVE",wi="DAILY_TASKS_PROCESS_UPDATE",Oi="DAILY_TASK_VALUE_ADD",Ri="DAILY_TASK_REWARDED",Pi="DAILY_TASKS_SEEN",_i="DAILY_TASK_FINISHED",xi={tasks:[],process:[],isRequesting:!1,isNotice:!1},ki=(ln={},ln[Ii]=function(e,t){return void 0===e&&(e=xi),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,r=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case bi:n.isRequesting=!0;break;case Ci:n.isRequesting=!1,n.tasks=o;break;case wi:n.process=c;break;case Oi:if(!e.process[a])break;n.process[a][r]+=s;break;case Ri:if(!e.process[a])break;n.process[a].rewarded=!0;break;case Pi:n.isNotice=!1;break;case _i:n.isNotice=!0}}}))},ln),Di="dailyRewards",Li="DAILY_REWARDS_REQUEST",Mi="DAILY_REWARDS_RECEIVE",Ni={rewards:[],isRequesting:!1},Bi=(hn={},hn[Di]=function(e,t){return void 0===e&&(e=Ni),(0,en.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case Li:e.isRequesting=!0;break;case Mi:e.isRequesting=!1,e.rewards=i}}}))},hn),Gi=(0,Jt.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=tn),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===$t.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=dn),(0,en.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case $t.kL:e.contextId=a,e.contextType=r,e.entryPointData=s;break;case $t.fJ:e.contextId=a,e.contextType=r,e.processed=!0;break;case $t.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=fn),(0,en.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case $t.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case $t.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},gn,An,In,ei,ri,fi,Ti,ki,Bi)),Ui=Gi,Zi=window,Fi=Zi.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Yi=Jt.qC,Hi=function(e){Fi&&(Yi=Fi({trace:!0,traceLimit:25})||Jt.qC);var t=Yi((0,Jt.md)(Qt.Z));return(0,Jt.MT)(Ui,e,t)},Wi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=qt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Hi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Vi=Wi,Ki=n(494),zi=n.n(Ki),ji=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}zi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';r.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Xi=ji,qi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new Xi(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Ji=qi,Qi=n(499),$i=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Qi.D)((function(){n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}))},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),ea=$i,ta=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||pn.contextId,this.contextType=t||pn.contextType,this.entryPointData=n||pn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),na=ta,ia=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),aa=ia,ra="share_invite",sa="tournament",oa="challenge_friend_match",ca="matching_group_match",ua=n(503),la=new Me.Z("10","Your Friend",ua.Z.AVATAR.FILE).toObject(),ha="single",da="challenge-friends",pa="matching-group",fa="tournaments",ma=(0,W.P1)([function(e){return e.context}],(function(e){return e})),ga=(0,W.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),va=function(e,t){return{type:$t.fJ,payload:{contextId:e,contextType:t}}},Ea=function(e){return function(t){t({type:$t.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Aa={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},ya=GameCore.Configs.SyncProfileFromAPI,Sa=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new na(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:$t.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=(0,s.Z)(u().mark((function e(){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=ci()(Aa),e.next=5,FBInstant.player.getDataAsync(a);case 5:return r=e.sent,s=new we(r),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ya){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.toObject()).gameData=i,s=new we({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,r.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new we(s));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new aa(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Me.Z(e,t,n,i).toObject()}catch(a){return new Me.Z("123","You").toObject()}},this.game=e},Ta=n(602),Ia=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return _t()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=Q()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),ba=JSON.parse('{"Text":{"PLAY_NOW":"PLAY NOW","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","GUIDE_1_TAP":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_2_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_3_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","LEVEL":"LEVEL","TARGET":"TARGET","REPLAY":"REPLAY","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","PLAY":"PLAY","WITH_FRIENDS":"WITH_FRIENDS","HOME":"HOME","DAILY_REWARDS":"DAILY REWARDS","DAY_X":"DAY {X}","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","CANCELLED_AD":"SORRY, NO REWARDS!\\nYOU HAVE CANCELLED\\nTHE AD!","LOADING":"LOADING...","WATCH_A_VIDEO":"WATCH A VIDEO TO GET\\n{X} DIAMONDS","GET_NOW":"GET NOW!","NO_THANKS":"NO THANKS!","LOADING_ADS":"LOADING ADS...","NO_ADS":"NO ADS TO DISPLAY!","DAILY_MISSIONS":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300":"COLLECT 300 DIAMONDS","INVITE_2":"INVITE 2 FRIENDS","REACH_TOTAL":"REACH TOTAL SCORES","LEADERBOARDS":"LEADERBOARDS","FRIENDS":"FRIENDS","WORLD":"WORLD","HAMMER":"HAMMER","USE_HAMMER":"USE HAMMER TO SMASH\\nANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","USE_MAGIC":"USE MAGIC BOTTLE TO \\nCHANGE A GEM COLOR","CONGRATULATIONS":"CONGRATULATIONS !","GOOD":"GOOD !","EXCELLENT":"EXCELLENT !","COOL":"COOL !","GREAT":"GREAT !","LOADING_INTER_AD":"Loading interstitial ad...","LEVEL_FAILED":"LEVEL FAILED","YOU_DID_NOT_REACH":"YOU DID NOT REACH THE TARGET SCORE","YOUR_SCORE":"YOUR SCORE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","CONTINUE":"CONTINUE","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_OPPONENT":"WAITING FOR OPPONENT","DRAW":"DRAW","YOU_WIN":"YOU WIN","YOU_LOSE":"YOU LOSE","RESTART":"RESTART","A_HA":"A ha, I\'m the best!","PHEWW":"Pheww, a great match!","DIAMOND":"DIAMOND","LB_IS_EMPTY":"Leaderboard is empty!","YOU_RECEIVED_X_DIAMONDS":"You have just received\\n{X} diamonds","MISSION":"Mission","REQUESTING":"requesting...","MILESTONE":"MILESTONE","DAY":"DAY"},"Texture":{"NO_THANK":"texts/no-thank","COOL":"texts/cool","GOOD":"texts/good","GREAT":"texts/great","EXCELLENT":"texts/excellent","CONGRATULATION":"texts/congratulation","LOGO":"title-logo"}}'),Ca=JSON.parse('{"Text":{"PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","GUIDE_1_TAP":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_2_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_3_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","TARGET":"\u0426\u0415\u041b\u042c","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","HOME":"\u0414\u041e\u041c\u041e\u0419","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","DAY_X":"\u0414\u0415\u041d\u042c {X}","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","CANCELLED_AD":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422! \u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","WATCH_A_VIDEO":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c!","NO_THANKS":"Texture only","LOADING_ADS":"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","NO_ADS":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","DAILY_MISSIONS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","PASS_10_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418 10 \u0423\u0420\u041e\u0412\u041d\u0415\u0419","COLLECT_300":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","USE_HAMMER":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","USE_MAGIC":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","CONGRATULATIONS":"Texture only","GOOD":"Texture only","EXCELLENT":"Texture only","COOL":"Texture only","GREAT":"Texture only","LOADING_INTER_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","YOU_DID_NOT_REACH":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","YOUR_SCORE":"\u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","A_HA":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","PHEWW":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","DIAMOND":"\u0410\u041b\u041c\u0410\u0417","LB_IS_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","YOU_RECEIVED_X_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","MILESTONE":"\u0432\u0435\u0445\u0430","DAY":"\u0414\u0415\u041d\u042c"},"Texture":{"NO_THANK":"texts/no-thank-ru","COOL":"texts/cool-ru","GOOD":"texts/good-ru","GREAT":"texts/great-ru","EXCELLENT":"texts/excellent-ru","CONGRATULATION":"texts/congratulation-ru","LOGO":"title-logo"}}'),wa=JSON.parse('{"Text":{"PLAY_NOW":"\u4eca\u3059\u3050\u30d7\u30ec\u30a4","RANK":"\u30e9\u30f3\u30af","DAILY":"\u6bce\u65e5","GIFT":"\u30ae\u30d5\u30c8","SETTINGS":"\u8a2d\u5b9a","GUIDE_1_TAP":"\u540c\u3058\u8272\u306e\u30b8\u30a7\u30e0\u3092\\n2\u3064\u4ee5\u4e0a\u30bf\u30c3\u30d7\u3059\u308b\\n\u3068\u7834\u58ca\u3067\u304d\u307e\u3059","GUIDE_2_SCORE":"\u73fe\u5728\u306e\u30b9\u30b3\u30a2\u306f\u3053\u3061\u3089\u3067\u3059","GUIDE_3_TARGET_SCORE":"\u3053\u308c\u304c\u5404\u30ec\u30d9\u30eb\u306e\u30af\u30ea\u30a2\u306b\\n\u5fc5\u8981\u306a\u76ee\u6a19\u30b9\u30b3\u30a2\u3067\u3059","LEVEL":"\u30ec\u30d9\u30eb","TARGET":"\u76ee\u6a19","REPLAY":"\u30ea\u30d7\u30ec\u30a4","PLAY_WITH_FRIENDS":"\u53cb\u9054\u3068\u904a\u3076","PLAY":"\u30d7\u30ec\u30a4","WITH_FRIENDS":"\u53cb\u9054\u3068","HOME":"\u30db\u30fc\u30e0","DAILY_REWARDS":"1\u65e5\u3042\u305f\u308a\u306e\u5831\u916c","DAY_X":"{X}\u65e5\u76ee","CLAIM":"\u7372\u5f97","CLAIM_X2":"2\u500d\u7372\u5f97","CANCELLED_AD":"\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\\n\u5831\u916c\u306f\u3042\u308a\u307e\u305b\u3093\uff01\\n\u3042\u306a\u305f\u306f\u5e83\u544a\u3092\\n\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3057\u305f\uff01","LOADING":"\u8aad\u307f\u8fbc\u307f\u4e2d","WATCH_A_VIDEO":"\u52d5\u753b\u306e\u8996\u8074\u3067\\n\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9 {X}\u500b\u3092\u7372\u5f97","GET_NOW":"\u4eca\u3059\u3050\u5165\u624b\uff01","NO_THANKS":"\u7d50\u69cb\u3067\u3059\uff01","LOADING_ADS":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","NO_ADS":"\u8868\u793a\u3059\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093\uff01","DAILY_MISSIONS":"\u6bce\u65e5\u306e\u30df\u30c3\u30b7\u30e7\u30f3","PASS_10_LEVELS":"10\u306e\u30ec\u30d9\u30eb\u3092\u30af\u30ea\u30a2","COLLECT_300":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u3092300\u500b\u96c6\u3081\u308b","INVITE_2":"2\u4eba\u306e\u53cb\u9054\u3092\u62db\u5f85","REACH_TOTAL":"\u5408\u8a08\u30b9\u30b3\u30a2\u306b\u5230\u9054","LEADERBOARDS":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9","FRIENDS":"\u53cb\u9054","WORLD":"\u4e16\u754c","HAMMER":"\u30cf\u30f3\u30de\u30fc","USE_HAMMER":"\u30cf\u30f3\u30de\u30fc\u3092\u4f7f\u3063\u3066  \\n\u30b8\u30a7\u30e0\u3092\u7834\u58ca","MAGIC_BOTTLE":"\u30de\u30b8\u30c3\u30af\u30dc\u30c8\u30eb","USE_MAGIC":"\u30de\u30b8\u30c3\u30af\u30dc\u30c8\u30eb\u3092\u4f7f\u3063\u3066   \\n\u30b8\u30a7\u30e0\u306e\u8272\u3092\u5909\u3048\u308b","CONGRATULATIONS":"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01","GOOD":"\u826f\u3044\uff01","EXCELLENT":"\u7d20\u6674\u3089\u3057\u3044\uff01","COOL":"\u304b\u3063\u3053\u3044\u3044 !","GREAT":"\u6700\u9ad8\uff01","LOADING_INTER_AD":"\u30a4\u30f3\u30bf\u30fc\u30b9\u30c6\u30a3\u30b7\u30e3\u30eb\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","LEVEL_FAILED":"\u30ec\u30d9\u30eb\u30af\u30ea\u30a2\u5931\u6557","YOU_DID_NOT_REACH":"\u76ee\u6a19\u30b9\u30b3\u30a2\u306b\u9054\u3057\u307e\u305b\u3093\u3067\u3057\u305f","YOUR_SCORE":"\u3042\u306a\u305f\u306e\u30b9\u30b3\u30a2","BEST_SCORE":"\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2","GLOBAL":"\u30b0\u30ed\u30fc\u30d0\u30eb","JOIN":"\u53c2\u52a0","CONTINUE":"\u30b3\u30f3\u30c6\u30a3\u30cb\u30e5\u30fc\u3057\u307e\u3059\u304b","TODAY_RECORD":"\u4eca\u65e5\u306e\u8a18\u9332","SHARE":"\u5171\u6709","WAITING":"\u5f85\u6a5f\u4e2d","WAITING_OPPONENT":"\u5bfe\u6226\u76f8\u624b\u3092\u5f85\u3063\u3066\u3044\u307e\u3059","DRAW":"\u5f15\u304d\u5206\u3051","YOU_WIN":"\u52dd\u3061\u307e\u3057\u305f","YOU_LOSE":"\u8ca0\u3051\u307e\u3057\u305f","RESTART":"\u30ea\u30b9\u30bf\u30fc\u30c8","A_HA":"\u3042\u3042\u3001\u79c1\u306f\u6700\u9ad8 !","PHEWW":"\u3075\u3045\u3001\u7d20\u6674\u3089\u3057\u3044\u8a66\u5408\u3060\u3063\u305f\uff01","DIAMOND":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9","LB_IS_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3067\u3059\uff01","YOU_RECEIVED_X_DIAMONDS":"{X} \u500b\u306e\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\\n\u3092\u53d7\u3051\u53d6\u308a\u307e\u3057\u305f","MISSION":"\u30df\u30c3\u30b7\u30e7\u30f3","REQUESTING":"\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059...","MILESTONE":"\u30de\u30a4\u30eb\u30b9\u30c8\u30fc\u30f3","DAY":"\u65e5"},"Texture":{"NO_THANK":"texts/no-thank-ja","COOL":"texts/cool-ja","GOOD":"texts/good-ja","GREAT":"texts/great-ja","EXCELLENT":"texts/excellent-ja","CONGRATULATION":"texts/congratulation-ja","LOGO":"title-logo-ja"}}'),Oa=JSON.parse('{"Text":{"PLAY_NOW":"MAINKAN SEKARANG","RANK":"PERINGKAT","DAILY":"HARIAN","GIFT":"HADIAH","SETTINGS":"PENGATURAN","GUIDE_1_TAP":"KETUK PADA DUA ATAU LEBIH PERMATA BERWARNA SAMA UNTUK MENGHANCURKANNYA","GUIDE_2_SCORE":"INI ADALAH SKORMU SEKARANG","GUIDE_3_TARGET_SCORE":"INI ADALAH SKOR TARGET UNTUK SETIAP LEVEL YANG DIPERLUKAN UNTUK MENYELESAIKAN LEVEL","LEVEL":"LEVEL","TARGET":"TARGET","REPLAY":"MAINKAN ULANG","PLAY_WITH_FRIENDS":"MAIN DENGAN TEMAN","PLAY":"MAIN","WITH_FRIENDS":"DENGAN TEMAN","HOME":"HALAMAN UTAMA","DAILY_REWARDS":"HADIAH HARIAN","DAY_X":"HARI {X}","CLAIM":"KLAIM","CLAIM_X2":"KLAIM X2","CANCELLED_AD":"MAAF, TIDAK ADA HADIAH!\\nKAMU MEMBATALKAN\\nIKLANNYA!","LOADING":"MEMULAI ...","WATCH_A_VIDEO":"TONTON VIDEO UNTUK\\nMENDAPATKAN {X} BERLIAN","GET_NOW":"DAPATKAN\\nSEKARANG!","NO_THANKS":"TIDAK, TERIMA KASIH!","LOADING_ADS":"MEMULAI IKLAN ...","NO_ADS":"TIDAK ADA IKLAN\\nUNTUK DITAMPILKAN!","DAILY_MISSIONS":"MISI HARIAN","PASS_10_LEVELS":"LEWATI 10 LEVEL","COLLECT_300":"KUMPULKAN 300 BERLIAN","INVITE_2":"UNDANG 2 TEMAN","REACH_TOTAL":"CAPAI SKOR TOTAL","LEADERBOARDS":"PAPAN PERINGKAT","FRIENDS":"TEMAN","WORLD":"DUNIA","HAMMER":"PALU","USE_HAMMER":"GUNAKAN PALU UNTUK MENGHANCURKAN  PERMATA APA PUN","MAGIC_BOTTLE":"BOTOL AJAIB","USE_MAGIC":"GUNAKAN BOTOL AJAIB UNTUK\\nMENGUBAH WARNA SATU PERMATA","CONGRATULATIONS":"SELAMAT !","GOOD":"BAGUS !","EXCELLENT":"LUAR BIASA !","COOL":"KEREN !","GREAT":"HEBAT !","LOADING_INTER_AD":"Memulai iklan pengantara ...","LEVEL_FAILED":"LEVEL GAGAL","YOU_DID_NOT_REACH":"KAMU TIDAK MENCAPAI SKOR TARGET","YOUR_SCORE":"SKOR KAMU","BEST_SCORE":"SKOR TERBAIK","GLOBAL":"GLOBAL","JOIN":"GABUNG","CONTINUE":"Lanjut","TODAY_RECORD":"REKOR HARI INI","SHARE":"BAGIKAN","WAITING":"MENUNGGU","WAITING_OPPONENT":"MENUNGGU LAWAN","DRAW":"SERI","YOU_WIN":"KAMU MENANG","YOU_LOSE":"KAMU KALAH","RESTART":"MULAI ULANG","A_HA":"A ha, akulah yang terbaik!","PHEWW":"Fiuh, pertandingan hebat!","DIAMOND":"BERLIAN","LB_IS_EMPTY":"Papan peringkat kosong!","YOU_RECEIVED_X_DIAMONDS":"Kamu baru saja menerima\\n{100} berlian","MISSION":"Misi","REQUESTING":"meminta ...","MILESTONE":"TONGGAK PENCAPAIAN","DAY":"HARI"},"Texture":{"NO_THANK":"texts/no-thank-id","COOL":"texts/cool-id","GOOD":"texts/good-id","GREAT":"texts/great-id","EXCELLENT":"texts/excellent-id","CONGRATULATION":"texts/congratulation-id","LOGO":"title-logo-id"}}'),Ra={en:ba,ru:Ca,ja:wa,id:Oa},Pa=Ra,_a=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:Pa,locale:"en",upperCaseText:!1},t))},t}(Ia),xa=_a,ka=[Ht._.SCREEN_OPEN],Da=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(_t()(ka).call(ka,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Ht._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Ht._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Ht._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Ht._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowInterstitialAd=function(e){this.processEvent(Ht._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(Ht._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(Ht._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(Ht._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Ht._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return ga(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,E()(t=[this]).call(t,r))||this).startGame=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initAnalytics(),n.analytics.event(Ht._.LOAD_START),n.scene.launch(Ta.C.GLOBAL_SCENE),n.scene.start(Ta.C.LOAD_SCENE),n.analytics.pageview(Ta.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Ta.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,r,s,o,c,l,h,d,p,f,m,g,v,E,A,y,S,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=ma(a),s=window.game,o=s.player,c=s.facebook,l=o.getPlayerId(),h=r.contextId,d=r.entryPointData,f=(p=d||{}).type,m=p.matchId,g=p.playerId,v=p.opponentId,E=void 0===v?la.playerId:v,A=p.tournamentContextId,y=l===g,S=E===la.playerId||_t()(i=[E,g]).call(i,l)>=0,T=ha,!h||void 0!==f&&f!==sa){e.next=18;break}return e.prev=10,e.next=13,c.getTournamentAsync();case 13:T=fa,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:f===sa&&A&&(T=fa),h&&f===ra&&!y&&(T=da),m&&h&&S&&f===oa&&(T=da),h&&f===ca&&(T=pa),t(Ea(T));case 23:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initAnalytics=function(){},t}(Phaser.Scene)),La=Da,Ma=n(613),Na=n(604),Ba=n(609),Ga=n(606),Ua=n(617),Za=Ga.Z.EFFECTS,Fa=Za.KEY,Ya=Za.FRAME,Ha=Ua.Z.FIREWORKS_SMALL,Wa=Ua.Z.FIREWORKS_BIG,Va=Ua.Z.FIREWORKS_SOAR,Ka=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).soar=void 0,n.fireworks1=void 0,n.fireworks2=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.runSoarExplosiveAnimation=function(){n.setAlpha(0),n.setScale(0),n.soar.setOrigin(.5,.5),n.soar.setFrame(Ya.FX_FIREWORKS_SOAR_CIRCLE),n.scene.tweens.add({targets:[(0,Ba.Z)(n)],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},scale:{from:0,to:Phaser.Math.RND.between(.8,1)/n.scene.world.getZoomRatio()}},onComplete:n.runFireworkExplosiveAnimation})},n.runFireworkExplosiveAnimation=function(){n.fireworks1.setAlpha(0),n.fireworks1.setScale(.1),n.fireworks1.setVisible(!0),n.scene.tweens.add({targets:[n.fireworks1],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1,duration:300},scale:{from:.1,to:Phaser.Math.RND.between(.6,.8)}}}),n.fireworks2.setVisible(!0),n.fireworks2.setScale(.1),n.scene.tweens.add({targets:[n.fireworks2],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:.1,to:Phaser.Math.RND.between(.5,.6)}}}),n.runExistAnimation()},n.runExistAnimation=function(){n.scene.tweens.add({targets:[(0,Ba.Z)(n)],duration:600,delay:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){n.setVisible(!1),n.setAlpha(1),n.soar.setVisible(!1),n.fireworks1.setVisible(!1),n.fireworks2.setVisible(!1)}})},n.kill(),n.createObjects(),n.setDepth(Ma.Z.FIREWORKS),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.soar=this.scene.make.image({key:Fa,frame:Ya.FX_FIREWORKS_SOAR_LINE,visible:!1}),this.fireworks1=this.scene.make.image({key:Fa,frame:Ya.FX_FIREWORKS_BIG_0,visible:!1}),this.fireworks2=this.scene.make.image({key:Fa,frame:Ya.FX_FIREWORKS_BIG_1,visible:!1}),this.add([this.soar,this.fireworks2,this.fireworks1])},n.playExplosiveSound=function(){var e,t=Phaser.Math.RND.between(0,100);e=t<30?Va:t<70?Wa:Ha,this.scene.audio.playSound(e)},n.randomColor=function(){var e=ci()(this.colors),t=Phaser.Math.RND.between(0,e.length-1),n=e[t];this.fireworks1.setTint(n),n=e[t=Phaser.Math.RND.between(0,e.length-1)],this.fireworks2.setAlpha(.5),this.fireworks2.setTint(n)},n.fire=function(e,t,n){this.setVisible(!0),this.setPosition(e,t),this.runFireworkAnimation(n),this.playExplosiveSound()},n.runFireworkAnimation=function(e){if(this.scene){var t=Phaser.Math.RND.between(-120,120);this.setAlpha(.6),this.soar.setVisible(!0),this.soar.setOrigin(.5,.1),this.soar.setFrame(Ya.FX_FIREWORKS_SOAR_LINE),this.scene.tweens.add({targets:[this],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{y:e+t,alpha:{from:.6,to:.2},scale:{from:.1,to:1/this.scene.world.getZoomRatio()}},onComplete:this.runSoarExplosiveAnimation})}},t}(Phaser.GameObjects.Container),za=Ka,ja=Ga.Z.DEFAULT,Xa=ja.KEY,qa=ja.FRAME,Ja=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Xa,qa.ICON_DIAMOND)||this).onUpdate=void 0,i.onComplete=void 0,i.positions=void 0,i.visibleAnimation=void 0,i.eatAnimation=void 0,i.setWorldSize(25,24),i.positions=n,i.setVisible(!1),i.setDepth(Ma.Z.PRIORITY),i.createAnimation(),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimation=function(){var e=this,t=this.positions,n=t.from,i=t.to,a=1/this.scene.world.getPixelRatio();this.visibleAnimation=this.scene.add.tween({targets:this,duration:1e3,paused:!0,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Cubic.Out,value:{from:0,to:1}},x:{getStart:function(){return n.x}},y:{ease:Phaser.Math.Easing.Bounce.Out,value:{getStart:function(){return n.y},getEnd:function(){return n.y+100}}},scale:{duration:400,ease:Phaser.Math.Easing.Cubic.Out,value:{from:2*a,to:a}}},onStart:function(){e.setVisible(!0),e.scene.audio.playSound(Ua.Z.DIAMONDS_EAT)},onComplete:function(){e.eatAnimation.play()}}),this.eatAnimation=this.scene.add.tween({targets:this,duration:500,delay:50,ease:"Circ.easeOut",paused:!0,props:{x:{getEnd:function(){return i.x}},y:{getEnd:function(){return i.y}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},n.run=function(){this.visibleAnimation.play()},t}(Phaser.GameObjects.Image),Qa=Ja,$a=n(611),er=n(184),tr=n.n(er),nr=tr()(.55,.47,.43,.91),ir=nr,ar={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:ir,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},rr=function(e){function t(t){return e.call(this,ar,t)||this}return(0,o.Z)(t,e),t}($a.Z),sr=rr,or=n(626),cr=n(619),ur=n(614),lr=n(615),hr=n(612),dr=n(620),pr=n(618),fr=Ga.Z.TUTORIAL,mr=fr.KEY,gr=fr.FRAME,vr=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.name="TapTutorialHand",n.addHand(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:mr,frame:gr.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.playAnimation=function(e,t){var n,i=this;void 0===e&&(e=0),void 0===t&&(t=800);var a=1/this.scene.world.getPixelRatio();this.hand.angle=30,null==(n=this.scene)||n.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,value:1,duration:200},scale:{duration:400,start:1.6*a,to:1.2*a},angle:{from:30,value:0,duration:400}},onComplete:function(){var e;null==(e=i.scene)||e.tweens.add({targets:[i.hand],delay:200,duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){i.hand.x=0,i.hand.y=0,i.hand.scale=a,i.playAnimation(t)}})}})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this.hand)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Er=vr,Ar=n(605),yr=n(622),Sr=n(628),Tr=n(627),Ir=GameCore.Configs.Network,br=Ga.Z.DEFAULT,Cr=br.KEY,wr=br.FRAME,Or=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).rewardValue=void 0,r.onReward=void 0,r.hand=void 0,r.viewAdButton=void 0,r.skipButton=void 0,r.giftIcon=void 0,r.giftIconWhite=void 0,r.currencyIcon=void 0,r.currencyText=void 0,r.popupContents=void 0,r.cometTwinkle=void 0,r.starTwinkleUp=void 0,r.sparksExplosive=void 0,r.popupFadeOutAnimation=void 0,r.backgroundFadeInAnimation=void 0,r.contentShowUpAnimation=void 0,r.giftEntrancesAnimation=void 0,r.giftAttentionAnimation=void 0,r.iconAttentionAnimation=void 0,r.giftShakeAnimation=void 0,r.giftOpenAnimation=void 0,r.adsTimer=void 0,r.open=function(t){e.prototype.open.call((0,Ba.Z)(r),t);var n=r.getData("awardDiamonds");r.setRewardValue(n),r.runOpenAnimation()},r.handleClosePopup=function(){r.runCloseAnimation()},r.handleShowRewardedVideoAd=(0,s.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.viewAdButton.setDisabled(!0),i.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=8,new(ee())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Ir.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,r.scene.ads.showRewardedVideoAsync();case 10:i.globalScene.screen.close(Na.o4.NOTIFY_SCREEN),r.starTwinkleUp.stop(),r.scene.audio.playSound(Ua.Z.DAILY_REWARD),r.popupContents.killGroup(),r.runTheGiftEntrancesAnimation(0,1500),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return r.showNotifySkipAds(),e.abrupt("return");case 23:r.showNotifyNoAds();case 24:return e.prev=24,null==(a=r.adsTimer)||a.destroy(),n.unmuteAll(),n.playMusic(),r.viewAdButton.setDisabled(!1),e.finish(24);case 30:case"end":return e.stop()}}),e,null,[[1,17,24,30]])}))),r.handleTheGiftClick=function(){r.setTheGiftClickable(!1),r.logButtonEvent("OpenGift"),r.hand.kill(),r.giftIconWhite.revive(),r.scene.tweens.killTweensOf(r.giftIcon),Phaser.Display.Align.In.Center(r.giftIconWhite,r.giftIcon),r.scene.audio.playSound(Ua.Z.GIFT_CHARGE),r.runShakeTheGift(),r.runOpenTheGift()},r.showNotifyNoAds=function(e){e&&e.name!==Na.o4.NOTIFY_SCREEN||r.scene.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:1200,loading:!1})},r.showNotifySkipAds=function(){r.scene.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},r.runCloseAnimation=function(){r.runExitsAnimation(0,200)},r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r.createViewAdsButton(),r.createSkipButton(),r.createCurrencyIcon(),r.createCurrencyText(),r.createEffects(),r.createGiftIcon(),r.createHand(),r.createContentsGroup(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:e,screen_name:t})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new ur.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new hr.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.currencyIcon,n=t.x,i=t.y,a=t.width,r=t.height;this.starTwinkleUp.run(1,n,i,a,r),this.iconAttentionAnimation||(this.iconAttentionAnimation=new sr({targets:[this.currencyIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var a=this.giftIcon,r=a.x,s=a.y,o=this.currencyText,c={x:r,y:s},u={x:o.x,y:o.y},l=1/this.scene.world.getPixelRatio();this.giftEntrancesAnimation=new dr.Z({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[u.x,u.y]],props:{scale:{start:.5*l,to:l},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,t,n)},onComplete:function(){i.scene.audio.playSound(Ua.Z.GIFT_REVEAL);i.starTwinkleUp.setScale(1.5);var e=i.giftIcon,t=e.x,n=e.y,a=e.width,r=e.height;i.starTwinkleUp.run(1,t,n,a/1.5,r/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new sr({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),this.hand.playAnimation(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new or.Z({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/this.scene.world.getPixelRatio();this.giftOpenAnimation=new cr.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.scene.audio.playSound(Ua.Z.GIFT_EXPLODE),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new lr.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Er(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,Cr,wr.LOGO_GIFT_ADS),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-80),this.add(this.currencyIcon)},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:Ar.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText(this.scene.lang.getText({key:"WATCH_A_VIDEO",variables:[e]})),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,60)},n.createViewAdsButton=function(){this.viewAdButton=new pr.Z(this.scene,Cr,wr.BUTTON_BLUE_LONG,232,69),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Cr,wr.ICON_ADS);e.setWorldSize(37,34),Phaser.Display.Align.In.Center(e,this.viewAdButton);var t=70,n=30;if("id"===this.scene.lang.getCurrentLanguage())t=50,n=18;e.setX(this.viewAdButton.x-t),this.viewAdButton.add(e);var i=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({size:this.scene.fontSize(n),text:this.scene.lang.Text.GET_NOW,font:Ar.Z.PRIMARY.KEY}),r="id"===i?30:15;Phaser.Display.Align.In.Center(a,this.viewAdButton,r,0),this.viewAdButton.add(a),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},n.createSkipButton=function(){var e=this.scene.lang.getCurrentLanguage(),t="ja"===e?125:"id"===e?161.5:129,n="ja"===e?31:"id"===e?16.5:25;this.skipButton=new pr.Z(this.scene,Cr,this.scene.lang.Texture.NO_THANK,t,n),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:Cr,frame:wr.LOGO_GIFT_WHITE,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(Ma.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:Cr,frame:wr.LOGO_GIFT,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new yr.Z(this.scene),this.starTwinkleUp=new Tr.Z(this.scene),this.sparksExplosive=new Sr.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),Rr=Or,Pr={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},_r=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),xr=_r,kr="global",Dr="friend",Lr=GameCore.Configs,Mr=(Lr.ApiHost,Lr.OtherHost),Nr=Lr.LeadersBoard,Br=Nr.Prefix,Gr=Nr.LeaderboardId,Ur=Nr.Name,Zr=Br+"/"+Gr+"/leaders",Fr=Br+"/"+Gr+"/players",Yr=function(e){var t="";return Gr?(e===kr?t=Zr:e===Dr&&(t=Fr),t):t},Hr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=me()(t).call(t,(function(e){return e.playerId})),e.next=3,window.GameSDK.player.getConnectedPlayersAsync(n);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return",[]);case 6:return a=GameCore.Utils.Object.keyBy(t,"playerId"),s=me()(i).call(i,(function(e){var t=a[e.getID()];return(0,r.Z)({},e,{score:t.score,rank:t.rank,playerId:e.getID(),getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return e}})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wr=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Gr){e.next=3;break}return e.abrupt("return",Vr(t));case 3:return e.abrupt("return",Kr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Yr(kr)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Et(i+"?"+a,{},Mr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Hr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Ur);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zr=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Gr){e.next=3;break}return e.abrupt("return",jr(t));case 3:return e.abrupt("return",Xr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Yr(Dr)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Et(i+"?"+a,{},Mr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Hr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Ur);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qr=(function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Gr){e.next=2;break}return e.abrupt("return",qr(t));case 2:return e.abrupt("return",Jr());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Yr(Dr)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,Et(i+"?"+a,{},Mr);case 9:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return n=Hr(s)[0],e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Jr=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Ur);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qr=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Gr){e.next=2;break}return e.abrupt("return",$r(t,n));case 2:return e.abrupt("return",es(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$r=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At("leaderboards/"+Gr+"/players/"+t,{score:n},{},Mr);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),es=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Ur);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ts=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),ns=ts,is=function(e){return e[bn]},as=(0,W.P1)([function(e){return is(e).gameplay.mode}],(function(e){return e})),rs=(0,W.P1)([function(e){return is(e).gameplay.rescued}],(function(e){return e})),ss=(0,W.P1)([function(e){return is(e).gameplay.startAt}],(function(e){return e})),os=(0,W.P1)([function(e){return is(e).gameplay.finishAt}],(function(e){return e})),cs=GameCore.Configs,us=cs.AppId,ls=cs.OtherHost,hs=cs.LeadersBoard,ds=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:us,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!hs.UseMock){e.next=5;break}return e.next=4,(0,lt.qZ)(1e3);case 4:return e.abrupt("return",(0,r.Z)({},n,t,{_id:hs.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,At("leaderboards",(0,r.Z)({},n,t),{},ls);case 8:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ps=function(){var e=(0,s.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At("leaderboards/"+t+"/players/"+n,{score:i},{},ls);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),fs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),ms=fs,gs=GameCore.Configs.Tournament.UseLeaderboard,vs=function(e){return{type:ti,payload:{tournamentId:e}}},Es=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var a,r,s,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,r=e.playerId,s=e.playerName,o=e.score,c=e.autoStartGame,l=s+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:r,playerName:s,leaderboardId:h}});case 7:return d=t.sent,p=d.getID(),c&&(n(vs(p)),n(lc())),t.next=12,ds({_id:h,createdBy:r,name:p,description:l,expireTime:6048e5});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,ps(h,r,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},As=function(e){return(0,s.Z)(u().mark((function t(){var n,i,a,r,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,r=e.leaderboardId,s=e.score,r&&ps(r,i,s),t.next=5,n.tournament.shareAsync({score:s,data:{type:sa,playerId:i,playerName:a}});case 5:ps(r,i,s);case 6:case"end":return t.stop()}}),t)})))},ys=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Ss=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ts=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var a,r,s,o,c,l,h,d,p,f,m,g,v,E;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,r=window.game,s=r.player,o=r.facebook,c=r.analytics,t.prev=2,h=i(),d=as(h),re()(l=[ha,fa]).call(l,d)){t.next=7;break}return t.abrupt("return");case 7:return n({type:ni,payload:{}}),p=s.getPlayer(),f=p.playerId,m=p.name,t.next=11,Ss();case 11:if(!t.sent){t.next=23;break}if(a=Ht._.TOURNAMENT_SHARE,!gs){t.next=21;break}return t.next=17,ys();case 17:return g=t.sent,v={playerId:f,playerName:m,score:e,leaderboardId:g},t.next=21,n(As(v));case 21:t.next=28;break;case 23:if(a=Ht._.TOURNAMENT_CREATE,!gs){t.next=28;break}return E={playerId:f,playerName:m,score:e,autoStartGame:!1},t.next=28,n(Es(E));case 28:if(c.event(a,{success:!0}),!1!==gs){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(Is(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof ms)){t.next=39;break}return t.abrupt("return");case 39:a&&c.event(a,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},Is=function(e){return{type:ii,payload:{score:e}}},bs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Cs=bs,ws=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Os=ws,Rs=function(e,t){return t.playerId},Ps=(0,W.P1)([function(e){return is(e).match.single}],(function(e){return e})),_s=(0,W.P1)([function(e){return is(e).match.single._id}],(function(e){return e})),xs=(0,W.P1)([function(e){return is(e).match.single.score}],(function(e){return e||0})),ks=(0,W.P1)([function(e){return is(e).match.single.level}],(function(e){return e||0})),Ds=(0,W.P1)([function(e){var t;return null==(t=is(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),Ls=(0,W.P1)([function(e){var t;return null==(t=is(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),Ms=(0,W.P1)([function(e){return is(e).match.challenge}],(function(e){return e})),Ns=(0,W.P1)([function(e){return is(e).match.challenge._id}],(function(e){return e})),Bs=(0,W.P1)([function(e){return is(e).match.challenge.status}],(function(e){return e})),Gs=(0,W.P1)([function(e){return is(e).match.challenge.opponentInfo}],(function(e){return e})),Us=(0,W.P1)([Ms,Rs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:la.playerId})),Zs=(0,W.P1)([Ms,Rs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),Fs=(0,W.P1)([Ms,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),Ys=(0,W.P1)([function(e){return is(e).match.group.opponentInfo}],(function(e){return e})),Hs=(0,W.P1)([function(e){return is(e).stats.data}],(function(e){return e})),Ws=(0,W.P1)([function(e){return is(e).stats.current}],(function(e){return e})),Vs=(0,W.P1)([function(e){return e.messages.data}],(function(e){return e})),Ks=(0,W.P1)([Vs,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),zs=n(332),js=n.n(zs),Xs=function(e){if("string"!==typeof e||!e)throw new Os(null,{imageShare:e})},qs=(function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r,s,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,o=a.data,c=(o||{}).score,l=Js({playerId:r,playerPhoto:s,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return h={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s,o,c,l,h,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Ws(t),s=Hs(t),o=i.getPlayer(),c=o.playerId,l=o.photo,h=s[c]||{},d=h.score,r.bestScore>d&&(d=r.bestScore),p=Js({playerId:c,playerPhoto:l,playerScore:d})){e.next=10;break}return e.abrupt("return");case 10:return f={name:"share-current-score",width:952,height:492,renderOptions:p},e.next=13,a.frameCapture.capture(f);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Js=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:ua.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+s,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"}}},Qs=(function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r,s,o,c,l,h,d,p,f,m,g,v,E,A,y,S;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,r=n.getPlayer(),s=r.playerId,o=r.name,c=r.photo,(l=n.getConnectedPlayerIds(99,0)).push(s),h=[],e.next=7,zr({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,s)&&(f=p[s]),h.push(f),e.t0=js()(u()).call(u(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(m=e.t1.value,!GameCore.Utils.Object.hasOwn(p,m)){e.next=25;break}if(g=p[m],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(g.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(g.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(g);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(E=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(E,n)){var i=E[n],a=i.name,r=i.photo;h[t].name=a,h[t].photo=r}})),h.length<3)for(A=0;A<=3-h.length;)h.push({playerId:"bot"+A,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),A++;if(y=Qs({playerId:s,playerName:o,playerPhoto:c,listLeaders:h})){e.next=37;break}return e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:y},e.next=40,a.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:250,image:a,width:525,height:525,fallbackWithImage:ua.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:475,y:1215+385*t,image:i,width:150,height:150,fallbackWithImage:ua.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:690,y:1312+193*t,font:"600 60px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1070,y:1312+193*t,font:"600 55px",text:a,fillStyle:"#b18151"}})),o}),$s=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s,o,c,l,h,d,p,f,m,g,v,E,A,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Hs(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=Gs(t),h=l.playerId,d=l.photo,p=Zs(t,{playerId:c}),f=Fs(t,{opponentId:h}),m=r[c]||{},g=m.score,v=r[h]||{},E=v.score,A=to({playerId:c,playerPhoto:o,playerScore:g,opponentId:h,opponentPhoto:d,opponentScore:E,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return e.abrupt("return");case 12:return y={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=15,a.frameCapture.capture(y);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eo=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s,o,c,l,h,d,p,f,m,g,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Hs(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=Ys(t),h=l.playerId,d=l.photo,p=l.score,f=r[c]||{},m=f.score,g=to({playerId:c,playerPhoto:o,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:g},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),to=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var m=s===d,g=s>d,v=p||f,E=p&&f,A={leftPhoto:{name:""+n,type:"image",x:55,y:162,image:a,width:200,height:200,fallbackWithImage:ua.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:702,y:162,image:l,width:200,height:200,fallbackWithImage:ua.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(A.leftScoreShadow={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#c4683f",text:p?""+s:"???",textAlign:"center"},A.leftScore={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#f2a62e",text:p?""+s:"???",textAlign:"center"},A.rightScoreShadow={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},A.rightScore={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),!m&&E&&(g?A.leftCrown={name:"crown-icon",type:"image",x:12,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}:A.rightCrown={name:"crown-icon",type:"image",x:665,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}),A},no=(function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,o=n.getBestScore(),c=no({playerId:r,playerPhoto:s,playerScore:o})){e.next=7;break}return e.abrupt("return");case 7:return l={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:ua.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+s,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"}}}),io=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new xr(null,{contextId:t})},ao=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Cs(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new xr(null,{contextId:n})},ro=function(e){if(null===e.imageShare)throw new Os},so=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,r=i(),s=Vs(r);if(t){var o;if(null!=(o=s[e])&&o.sent)return;n(oo(e))}null!=(a=s[e])&&a.sent&&n(co(e))}},oo=function(e){return{type:$t.qj,payload:{opponentId:e}}},co=function(e){return{type:$t.rh,payload:{opponentId:e}}},uo=function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,ao({opponentId:t,contextId:n}),(r=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",r);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),lo=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h,d,p,f,m,g,v,E;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=window.game,o=s.player,c=s.analytics,l=s.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,uo(e,d);case 5:return p=n.sent,io({contextId:p}),f=r(),n.next=10,$s(f);case 10:return m=n.sent,ro({imageShare:m}),g=o.getPlayer(),v=g.name,E=g.playerId,n.next=15,l.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:v+" challenges you",localizations:{en_US:v+" challenges you",vi_VN:v+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:m||"",template:"challenge",data:{type:oa,matchId:h,playerId:E,opponentId:e,status:Xn}});case 15:a(so(e)),c.event(Ht._.MESSAGE,{message_content_type:"Invite",success:!0}),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),c.event(Ht._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},ho=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h,d,p,f,m,g,v,E;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=window.game,o=s.player,c=s.analytics,l=s.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,uo(e,d);case 5:return p=n.sent,io({contextId:p}),f=r(),n.next=10,$s(f);case 10:return m=n.sent,ro({imageShare:m}),g=o.getPlayer(),v=g.name,E=g.playerId,n.next=15,l.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" just finished. Check them now.",localizations:{en_US:v+" just finished. Check them now.",vi_VN:v+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:m||"",template:"finished",data:{type:oa,matchId:h,playerId:E,opponentId:e,status:qn}});case 15:a(so(e)),c.event(Ht._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),c.event(Ht._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},po=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h,d,p,f,m,g,v,E,A,y,S,T;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=window.game,o=s.player,c=s.analytics,l=s.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,uo(e,d);case 5:return p=n.sent,io({contextId:p}),f=r(),n.next=10,$s(f);case 10:return m=n.sent,ro({imageShare:m}),g=o.getPlayer(),v=g.name,E=g.playerId,A=Hs(f),y=A[E]||{},S=y.score,T=void 0===S?0:S,n.next=17,l.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" beat your high score. Their score: "+T,localizations:{en_US:v+" beat your high score. Their score: "+T,vi_VN:v+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+T+" \u0111i\u1ec3m!"}},image:m||"",template:"pass_score",data:{type:oa,matchId:h,playerId:E,opponentId:e,status:qn}});case 17:a(so(e)),c.event(Ht._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Ht._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},fo=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h,d,p,f,m,g,v,E,A;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=window.game,o=s.player,c=s.analytics,l=s.facebook,n.prev=1,h=t.matchId,d=t.contextId,p=t.score,n.next=5,uo(e,d);case 5:return f=n.sent,io({contextId:f}),m=r(),n.next=10,$s(m);case 10:return g=n.sent,ro({imageShare:g}),v=o.getPlayer(),E=v.name,A=v.playerId,n.next=15,l.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:E+" got "+p+" scores. So easy! Can you?",localizations:{en_US:E+" got "+p+" scores. So easy! Can you?",vi_VN:E+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:g||"",template:"play_turn",data:{type:oa,matchId:h,playerId:A,opponentId:e,status:Xn}});case 15:a(so(e)),c.event(Ht._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(1),c.event(Ht._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof xr)){n.next=24;break}return n.abrupt("return");case 24:(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},mo=function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c,l,h,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,r=a.player,s=a.facebook,o=r.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=Ws(n),p=d.score,f={type:ca,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:l+" beats your high score. Their score: "+p+".",localizations:{en_US:l+" beats your high score. Their score: "+p+".",vi_VN:l+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),go=function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c,l,h,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,r=a.player,s=a.facebook,e.prev=1,o=r.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=Ws(n),p=d.score,f={type:ca,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:l+" got "+p+" scores. So easy! Can you?",localizations:{en_US:l+" got "+p+" scores. So easy! Can you?",vi_VN:l+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),vo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Eo=vo,Ao=n(47),yo=n.n(Ao),So=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},To=function(e,t){try{var n=So(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var r=GameCore.Utils.Object.clear(a),s=(0,vn.TS)(i,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},Io=GameCore.Configs.ApiHost,bo=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,At("matches",{opponentPlayerId:t},{},Io);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Co=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,At(n,{},{},Io);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wo=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,Et(n,{},Io);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oo=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,a){var r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="matches/"+t+"/finish",e.next=3,At(r,{matchId:t,score:n,level:i,extraData:a},{},Io);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Ro=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Po=Ro,_o=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),xo=_o,ko=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Do=ko,Lo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Mo=Lo,No=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Bo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),Go=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Eo(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Eo(null,{currentMatchId:n});if(t!==n)throw new Mo(null,{matchId:t,currentMatchId:n})},Uo=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,r=n.status;if(""===i||"string"!==typeof i)throw new Eo(null,{matchId:i});if("finished"===r||"string"!==typeof r)throw new Po("This match is finished",{status:r});if(a!==t)throw new aa(null,{playerId:a,currentPlayerId:t})},Zo=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new xo(null,{opponentId:t})},Fo=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Eo(null,{matchId:t})},Yo=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Eo(null,{matchId:n});if(""===i||"string"!==typeof i)throw new Bo(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new Do(null,{blackPlayerId:a})},Ho=GameCore.Configs.Match,Wo=function(e){try{return GameCore.Utils.Hash.stringToHash(ot()(e))}catch(t){return""}},Vo=function(){return function(){var e=(0,s.Z)(u().mark((function e(t){var n,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,n.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:Dn,payload:{}}),s=a.getPlayerId(),o=(0,r.Z)({},Ho.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),Uo({playerId:s,match:o}),t(Xo(o)),To(Ho.SingleMatchStore,o),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Xo(null)),!(e.t0 instanceof Eo)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Po)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Ko=function(){return function(e){try{var t=window.game.player;e({type:Ln,payload:{}});var n=t.getPlayerId(),a=So(Ho.SingleMatchStore)||{},r=a.data;a.data=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}}(r),Uo({playerId:n,match:a}),e(Xo(a))}catch(s){if(e(Xo(null)),s instanceof Eo)return;if(s instanceof aa)return;if(s instanceof Po)return;(0,i.tO)(s)}}},zo=function(e,t){return function(n,a){try{!function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new Eo(null,{matchId:t});if("number"!==typeof n)throw new No(null,{score:n})}((0,r.Z)({matchId:e},t));var s=a(),o=_s(s);!function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Eo(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Eo(null,{currentMatchId:n});if(t!==n)throw new Mo(null,{matchId:t,currentMatchId:n})}({matchId:e,currentMatchId:o}),n({type:Mn,payload:{match:t}});var c=t.data;t.data=Wo(c),To(Ho.SingleMatchStore,t)}catch(u){if(u instanceof Eo)return;(0,i.tO)(u)}}},jo=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,a){var s,o,c,l,h,d,p,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Fo({matchId:e}),o=a(),c=_s(o),l=s.getPlayerId(),Go({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),h=Ps(o),Uo({playerId:l,match:h}),d=(0,r.Z)({},Ho.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(Xo(d)),p=d.data,(f=(0,r.Z)({},d)).data=Wo(p),To(Ho.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Xo(null)),!(t.t0 instanceof Eo)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Po)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Xo=function(e){return{type:Nn,payload:{match:e}}},qo=function(){return{type:Bn,payload:{}}},Jo=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var a,r,s,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.profile,a.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),s=e.playerId,Zo({opponentId:s}),n({type:Un,payload:{opponentInfo:e}}),t.next=8,bo(s);case 8:return o=t.sent,Yo({match:o}),t.next=12,r.requestProfiles([s]);case 12:n(tc(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(tc(null)),!(t.t0 instanceof Eo)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof xo)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},Qo=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var a,r,s,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.player,s=a.profile,a.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Fo({matchId:e}),n({type:Gn,payload:{matchId:e}}),t.next=7,Co(e);case 7:if(o=t.sent,Yo({match:o}),c=o.status,l=o.whitePlayerId,h=o.blackPlayerId,c!==Xn){t.next=16;break}return d=r.getPlayerId(),p=d===l?h:l,t.next=16,s.requestProfiles([p]);case 16:n(tc(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(tc(null)),!(t.t0 instanceof Eo)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},$o=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a){var r,s,o,c,l,h,d,p,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.game,s=r.player,r.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Fo({matchId:e}),a({type:Fn,payload:{matchId:e,opponentInfo:t}}),n.next=7,wo(e);case 7:o=n.sent,Yo({match:o}),c=o.whitePlayerId,l=o.whitePlayerScore,h=o.blackPlayerScore,d=s.getPlayerId(),p=s.getPlayerData(),f=p.score,a(tc(o,{score:d===c?l:h,bestScore:f})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(tc(null)),!(n.t0 instanceof Eo)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},ec=function(e,t,n){return function(){var a=(0,s.Z)(u().mark((function a(r){var s,o;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,window.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Fo({matchId:e}),r({type:Zn,payload:{matchId:e,score:t,extraData:n}}),s=n.level,a.next=8,Oo(e,t,s,n);case 8:return o=a.sent,Yo({match:o}),a.next=12,r(tc(o));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),r(tc(null)),!(a.t0 instanceof Eo)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},tc=function(e,t,n){return void 0===n&&(n=null),{type:Yn,payload:{match:e,opponentInfo:t,current:n}}},nc=function(e){return{type:Wn,payload:{opponentInfo:e}}},ic=function(e,t){return{type:zn,payload:{matchId:e,players:t}}},ac=function(e){return{type:_n,payload:{playerId:e}}},rc=function(e,t){return{type:xn,payload:{playerId:e,stats:t}}},sc=function(e){return{type:kn,payload:{stats:e}}},oc=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new xr(null,{contextId:t})},cc=null,uc=function(e){clearTimeout(cc),cc=setTimeout((function(){window.game.globalScene.screen.close(Na.o4.NOTIFY_SCREEN)}),e)},lc=function(){return function(e){try{e(qo()),e(Ec(fa))}catch(t){(0,i.tO)(t)}}},hc=function(){return function(e){try{e(qo()),e(Ec(ha))}catch(t){(0,i.tO)(t)}}},dc=function(){return function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=window.game.globalScene).screen.open(Na.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,loading:!0}),s=n(),o=as(s),_t()(a=[ha,fa]).call(a,o)>=0&&(t(qo()),t(Vo())),c=null,o===da&&(c=Gs(s),t({type:Hn,payload:{}})),t(ac()),e.next=11,t(Ec(o,c));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,uc(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()},pc=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(fc("reset",e,t))}catch(a){(0,i.tO)(a)}}},fc=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,s.Z)(u().mark((function a(r){var s,o,c,l,h,d,p,f,m,g,v,E,A,y,S,T,I;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s=window.game,o=s.player,c=s.facebook,(l=s.globalScene).screen.open(Na.o4.NOTIFY_SCREEN,{message:l.lang.Text.LOADING,loading:!0}),h=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?f:p),e){a.next=15;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(h=a.sent)){a.next=13;break}return n&&l.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE),a.abrupt("return");case 13:a.next=25;break;case 15:if(!t||t===la.playerId){a.next=23;break}return a.next=18,c.createAsync(t);case 18:if(!1!==(h=a.sent)){a.next=22;break}return n&&l.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE),a.abrupt("return");case 22:h||"reset"===e||(h=e);case 23:d=c.contextType,r(va(h,d));case 25:return oc({contextId:h}),m=o.getPlayerId(),g=o.getConnectedPlayers(),a.next=30,c.getContextPlayers(m);case 30:return v=a.sent,t!==(E=la).playerId&&g[t]?E=g[t]:1===v.length&&(E=v[0]),r(ac()),y=(A=E).playerId,S=A.name,T=A.photo,I={playerId:y,name:S,photo:T},a.next=38,r(Ec(da,I));case 38:r(va(h,d)),a.next=50;break;case 41:if(a.prev=41,a.t0=a.catch(0),!(a.t0 instanceof xr)){a.next=45;break}return a.abrupt("return");case 45:if("USER_INPUT"!==(null==a.t0?void 0:a.t0.code)){a.next=47;break}return a.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==a.t0?void 0:a.t0.code)){a.next=49;break}return a.abrupt("return");case 49:(0,i.tO)(a.t0);case 50:return a.prev=50,uc(1e3),a.finish(50);case 53:case"end":return a.stop()}}),a,null,[[0,41,50,53]])})));return function(e){return a.apply(this,arguments)}}()},mc=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(a,r){var s,o,c,l,h,d,p,f,m,g,v,E,A,y,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.profile,l=s.facebook,(h=s.globalScene).screen.open(Na.o4.NOTIFY_SCREEN,{message:h.lang.Text.LOADING,loading:!0}),d=r(),p=o.getPlayerId(d),!((f=o.getConnectedPlayers(d)).length>0)||f[t]){n.next=9;break}return h.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE),n.abrupt("return");case 9:return m=la,n.next=12,l.getContextPlayers(p);case 12:if(g=n.sent,t===p||t===m.playerId||!f[t]){n.next=17;break}m=f[t],n.next=25;break;case 17:if(1!==g.length){n.next=21;break}m=g[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(v=c.getProfiles())[t]&&(m=v[t]);case 25:return n.next=27,a($o(e,m));case 27:if(d=r(),Us(d,{playerId:p})!==la.playerId){n.next=32;break}return n.next=32,a(Qo(e));case 32:if(d=r(),Us(d,{playerId:p})===p||!f[t]){n.next=37;break}return a(pc(t,!0)),n.abrupt("return");case 37:if(Ns(d)===e){n.next=41;break}return h.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE),n.abrupt("return");case 41:if(E=Bs(d),A=Zs(d,{playerId:p}),a(yc({mode:da,status:E})),y=l.getContextID(),S=l.contextType,a(va(y,S)),!A){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return h.events.emit(Ta.K.SWITCH,Ta.C.GAME_OVER_SCENE),n.abrupt("return");case 52:h.events.emit(Ta.K.SWITCH,Ta.C.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,uc(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},gc=function(){return function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,o,c,l,h,d,p,f,m,g,v,E,A,y,S,T,I,b,C,w,O,R,P,_;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,r=a.analytics,o=a.facebook,(c=a.globalScene).screen.open(Na.o4.NOTIFY_SCREEN,{message:c.lang.Text.LOADING,loading:!0}),l=n(),h=as(l),d=Ws(l),p=d.score,f=void 0===p?0:p,m=d.level,g=void 0===m?0:m,t(Ts(f)),t(vc(f)),e.next=10,t(Ac(h,{score:f}));case 10:if(l=n(),v=ss(l),E=os(l),A=Math.floor((E-v)/1e3),r.event(Ht._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(h),level:g,level_name:"level_"+g,time_played:A}),y=o.getContextID(),h===pa&&y&&t(function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game.analytics,e.prev=1,r=FBInstant.context.getID(),io({contextId:r}),s=n(),o=Ys(s),c=o.playerId,l=o.score,h=Ws(s),d=h.score,!c||c===la.playerId){e.next=25;break}if(!(d>l)){e.next=18;break}return e.next=13,eo(s);case 13:return p=e.sent,e.next=16,mo(p,s);case 16:e.next=23;break;case 18:return e.next=20,qs(s);case 20:return p=e.sent,e.next=23,go(p,s);case 23:e.next=30;break;case 25:return e.next=27,qs(s);case 27:return p=e.sent,e.next=30,go(p,s);case 30:ro({imageShare:p}),a.event(Ht._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),a.event(Ht._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,i.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!y||h!==da){e.next=26;break}if(S=Gs(l),(T=S.playerId)&&T!==la.playerId){e.next=21;break}return e.abrupt("return");case 21:I=Hs(l),b=I[T]||{},C=b.score,w=void 0===C?0:C,O=Ms(l),R=O._id,P=O.whitePlayerFinish,_=O.blackPlayerFinish,t(P&&_?f>w?po(T,{matchId:R,contextId:y}):ho(T,{matchId:R,contextId:y}):fo(T,{matchId:R,contextId:y,score:f}));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),(0,i.tO)(e.t0);case 31:return e.prev=31,uc(300),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})));return function(t,n){return e.apply(this,arguments)}}()},vc=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();Qr(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var r=n.getPlayerData(),s=r.score,o=void 0===s?0:s,c=r.level;o<e&&n.setBestScore(e);var u={score:e,level:c};t(rc(a,u)),t(sc(u))}catch(l){if(l instanceof ns)return;(0,i.tO)(l)}}},Ec=function(e,t){return void 0===t&&(t=null),function(){var n=(0,s.Z)(u().mark((function n(a,r){var o,c,l,h,d,p,f,m,g,v,E,A,y,S,T;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,h=c.analytics,d=c.facebook,p=c.globalScene,f=d.getContextID(),m=0,g=r(),h.event(Ht._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a({type:Cn,payload:{}}),!_t()(o=[ha,fa]).call(o,e)){n.next=16;break}return n.next=10,a(Ko());case 10:if(g=r(),_s(g)){n.next=15;break}return n.next=15,a(Vo());case 15:m=xs(g);case 16:if(e===pa&&a(nc(t)),e!==da){n.next=26;break}return n.next=20,a(Jo(t));case 20:g=r(),v=Ns(g),E=Gs(g),A=E.playerId,f||(f=window.FBInstant.context.getID()),y=Ks(g,{opponentId:A}),f&&A&&!y&&a(lo(A,{contextId:f,matchId:v}));case 26:"online"===e&&a(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,r=a.getPlayer(),s=r.playerId,o=r.name,c=r.photo,t({type:Kn,payload:{playerId:s}}),l={},me()(n=yo()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[s]={playerId:s,name:o,photo:c},t(ic("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=l.getPlayerData(g),T=S.score,a(sc({score:m,bestScore:void 0===T?0:T})),a({type:wn,payload:{mode:e,contextId:f}}),a(Ea(e)),p.events.emit(Ta.K.SWITCH,Ta.C.GAME_SCENE),n.next=41;break;case 34:if(n.prev=34,n.t0=n.catch(0),!(n.t0 instanceof Eo)){n.next=40;break}return window.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 40:(0,i.tO)(n.t0);case 41:return n.prev=41,uc(0),n.finish(41);case 44:case"end":return n.stop()}}),n,null,[[0,34,41,44]])})));return function(e,t){return n.apply(this,arguments)}}()},Ac=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,a){var r,s,o,c,l,h,d,p,f,m,g,v;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=window.game,o=s.player,c=s.globalScene,l=t.score,h=void 0===l?0:l,d=t.level,p=void 0===d?0:d,f=a(),!(_t()(r=[ha,fa]).call(r,e)>=0)){n.next=7;break}return m=_s(f),n.next=7,i(jo(m));case 7:if(e===pa&&(i({type:Vn,payload:{}}),g=o.getPlayerId(),i(rc(g,t))),e!==da){n.next=12;break}return v=Ns(f),n.next=12,i(ec(v,h,{level:p}));case 12:i({type:On,payload:{mode:e}}),c.events.emit(Ta.K.SWITCH,Ta.C.GAME_OVER_SCENE);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},yc=function(e){return function(t){var n=e.mode,a=e.status;t({type:Rn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},Sc=n(406),Tc=new(n.n(Sc)()),Ic=n(616),bc=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).label=void 0,a&&r&&s.button.setWorldSize(a,r),s.createLabel(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setLabel=function(e){this.label.setText(e)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.label.setAlpha(.45),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.button,0,12)},t}(pr.Z),Cc=bc,wc=(0,W.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.tasks}],(function(e){return e})),Oc=(0,W.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.process}],(function(e){return e})),Rc=(0,W.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isRequesting}],(function(e){return e})),Pc=(0,W.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isNotice}],(function(e){return e})),_c=Ga.Z.DEFAULT,xc=_c.KEY,kc=_c.FRAME,Dc=function(e){function t(t){var n;return(n=e.call(this,t,xc,kc.ICON_DAILY,60,60)||this).noticeIcon=void 0,n.checkNotice=function(){var e=n.scene.storage.getState(),t=Pc(e)||!1;n.noticeIcon.setVisible(t)},n.setName(n.scene.lang.Text.DAILY),n.useSound=!1,n.setLabel(n.scene.lang.Text.DAILY),n.drawNoticeIcon(),n}return(0,o.Z)(t,e),t.prototype.drawNoticeIcon=function(){this.noticeIcon=this.scene.make.image({key:xc,frame:kc.ICON_DOT}),this.noticeIcon.setWorldSize(15,16),this.add(this.noticeIcon),Phaser.Display.Align.In.TopRight(this.noticeIcon,this.button,4,4)},t}(Cc),Lc=Dc,Mc=Ga.Z.DEFAULT,Nc=Mc.KEY,Bc=Mc.FRAME,Gc=function(e){function t(t){var n;return(n=e.call(this,t,Nc,Bc.ICON_GIFT,60,60)||this).checkUseable=function(){},n.setName(n.scene.lang.Text.GIFT),n.setLabel(n.scene.lang.Text.GIFT),n}return(0,o.Z)(t,e),t}(Cc),Uc=Gc,Zc=Ga.Z.DEFAULT,Fc=Zc.KEY,Yc=Zc.FRAME,Hc=function(e){function t(t){var n;return(n=e.call(this,t,Fc,Yc.ICON_RANK,60,60)||this).setName("Rank"),n.setLabel(n.scene.lang.Text.RANK),n}return(0,o.Z)(t,e),t}(Cc),Wc=Hc,Vc=Ga.Z.DEFAULT,Kc=Vc.KEY,zc=Vc.FRAME,jc=function(e){function t(t){var n;return(n=e.call(this,t,Kc,zc.ICON_SETTING,60,60)||this).setName("Setting"),n.useSound=!1,n.setLabel(n.scene.lang.Text.SETTINGS),n}return(0,o.Z)(t,e),t}(Cc),Xc=jc,qc=Ga.Z.DEFAULT,Jc=qc.KEY,Qc=qc.FRAME,$c=function(e){function t(t){var n;return(n=e.call(this,t)||this).rankIcon=void 0,n.giftIcon=void 0,n.dailyIcon=void 0,n.settingIcon=void 0,n.buttons=void 0,n.lines=void 0,n.background=void 0,n.createBackground(),n.createLines(),n.createButtons(),n.alignLines(),n.alignButtons(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLines=function(){var e=-(this.lines.getLength()-1)/2*95;this.lines.setX(e,95)},n.alignButtons=function(){var e=-(this.buttons.getLength()-1)/2*95;this.buttons.setX(e,95),this.buttons.setY(-55)},n.createBackground=function(){this.background=this.scene.make.image({key:Jc,frame:Qc.BOTTOM_BG,origin:{x:.5,y:1}}),this.background.setDepth(Ma.Z.BACKGROUND),this.background.setWorldSize(375,85),this.add(this.background)},n.createLines=function(){this.lines=this.scene.make.group({key:Jc,frame:Qc.BOTTOM_LINE,repeat:2,setOrigin:{x:.5,y:1}});var e=this.lines.getChildren();e.forEach((function(e){e.setWorldSize(1,85)})),this.add(e)},n.createButtons=function(){this.buttons=this.scene.add.group(),this.createRankButton(),this.createDailyButton(),this.createGiftButton(),this.createSettingsButton()},n.createRankButton=function(){this.rankIcon=new Wc(this.scene),this.add(this.rankIcon),this.buttons.add(this.rankIcon)},n.createDailyButton=function(){this.dailyIcon=new Lc(this.scene),this.add(this.dailyIcon),this.buttons.add(this.dailyIcon)},n.createGiftButton=function(){this.giftIcon=new Uc(this.scene),this.add(this.giftIcon),this.buttons.add(this.giftIcon)},n.createSettingsButton=function(){this.settingIcon=new Xc(this.scene),this.add(this.settingIcon),this.buttons.add(this.settingIcon)},t}(Phaser.GameObjects.Container),eu=$c,tu=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).maxValue=void 0,a.key=void 0,a.frames=void 0,a.bar=void 0,a.icon=void 0,a.button=void 0,a.value=void 0,a.key=n,a.frames=i,a.maxValue=1e4,a.createBar(),a.createValue(),a.createIcon(),a.createButton(),a.alignObject(),a.scene.add.existing((0,Ba.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=""+e;e>=this.maxValue&&(t=Math.floor(e/1e3)+"k"),this.value.setText(t)},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.Center(this.value,this.bar,2,-2),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,Z.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e(),t.scene.audio.playSound(Ua.Z.BUTTON_CLICK)})))}}]),t}(Phaser.GameObjects.Container),nu=tu,iu=Ga.Z.DEFAULT,au=iu.KEY,ru=iu.FRAME,su=function(e){function t(t){var n,i;return(i=e.call(this,t,au,{background:ru.TOP_BG_LONG,icon:ru.ICON_DIAMOND,button:ru.ICON_PLUS})||this).setName("DiamondBar"),i.bar.setWorldSize(105,39),i.icon.setWorldSize(25,24),null==(n=i.button)||n.setWorldSize(18.5,20),i.alignObject(),i}return(0,o.Z)(t,e),t}(nu),ou=su,cu=Ga.Z.DEFAULT,uu=cu.KEY,lu=cu.FRAME,hu=function(e){function t(t){var n;return(n=e.call(this,t,uu,{background:lu.TOP_BG_LONG,icon:lu.ICON_CUP})||this).setName("ScoreBar"),n.maxValue=1e6,n.bar.setWorldSize(105,39),n.icon.setWorldSize(34,28),n.alignObject(),n}return(0,o.Z)(t,e),t}(nu),du=hu,pu=function(e){function t(t){var n;(n=e.call(this,t)||this).scoreBar=void 0,n.diamondBar=void 0;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createScoreBar(),n.createDiamondBar(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createScoreBar=function(){this.scoreBar=new du(this.scene),this.add(this.scoreBar),Phaser.Display.Align.In.LeftCenter(this.scoreBar,this,-10)},n.createDiamondBar=function(){this.diamondBar=new ou(this.scene),this.add(this.diamondBar),Phaser.Display.Align.In.RightCenter(this.diamondBar,this,-10)},t}(Phaser.GameObjects.Container),fu=pu,mu=Ga.Z.DEFAULT,gu=mu.KEY,vu=mu.FRAME,Eu=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).logo=void 0,a.gems=void 0,a.logoAnimation=void 0,a.gemsAnimation=void 0,a.drawGems(),a.drawLogo(),a.setDepth(Ma.Z.LOGO),a.runAnimations(),t.add.existing((0,Ba.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.drawLogo=function(){var e=this.scene.lang.getCurrentLanguage();this.logo=this.scene.add.image(0,0,gu,this.scene.lang.Texture.LOGO),"ja"===e?this.logo.setWorldSize(232,226):"id"===e?this.logo.setWorldSize(229.5,226):this.logo.setWorldSize(210,231),this.add(this.logo)},n.drawGems=function(){this.gems=this.scene.add.image(0,0,gu,vu.GEMS),this.gems.setOrigin(.5,.8),this.gems.setWorldSize(233,84.5),this.add(this.gems)},n.runAnimations=function(){this.runLogoAnimation(),this.runGemsAnimation()},n.runLogoAnimation=function(){this.logoAnimation||(this.logoAnimation=new sr({targets:[this.logo],duration:1400,repeatDelay:200,props:{scale:"+=0.03"}})),this.logoAnimation.play()},n.runGemsAnimation=function(){this.gemsAnimation||(this.gemsAnimation=new sr({targets:[this.gems],duration:1500,repeatDelay:200,props:{scale:"+=0.1"}})),this.gemsAnimation.play()},t}(Phaser.GameObjects.Container),Au=Eu,yu=Ga.Z.DEFAULT,Su=yu.KEY,Tu=yu.FRAME,Iu=function(e){function t(t){var n;return(n=e.call(this,t,Su,Tu.BUTTON_BLUE_SHORT)||this).button.setWorldSize(170,70.5),n.setName("PlaySingle"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize("id"===e?21:26),text:this.scene.lang.Text.PLAY_NOW,origin:{x:.5,y:.5}});this.add(t)},t}(pr.Z),bu=Iu,Cu=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.createLogo(),n.createPlaySingleButton(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new Au(this.scene,0,0),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-110)},n.createPlaySingleButton=function(){this.playSingleButton=new bu(this.scene),this.add(this.playSingleButton),Phaser.Display.Align.In.Center(this.playSingleButton,this,0,90)},t}(Phaser.GameObjects.Container),wu=Cu,Ou={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Ru=function(e){function t(t){return e.call(this,Ou,t)||this}return(0,o.Z)(t,e),t}($a.Z),Pu=Ga.Z.DEFAULT,_u=Pu.KEY,xu=Pu.FRAME,ku=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(Ma.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Ba.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,_u,xu.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,_u,xu.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,_u,xu.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,_u,xu.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,_u,xu.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,_u,xu.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,_u,xu.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,_u,xu.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,_u,xu.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,Z.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Du=ku,Lu=n(624),Mu=Ga.Z.DEFAULT,Nu=Mu.KEY,Bu=Mu.FRAME,Gu=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,r=e.displayHeight,s=i-20;n.effect.run(1,t,s,a,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:Nu,frame:Bu.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Lu.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new sr({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),Uu=Gu,Zu=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],Fu=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zu);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Yu=GameCore.Configs.DailyTasks,Hu=function(e){return function(t){t({type:Ci,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,r=n.logTasks,s=void 0===r?{}:r;t((Date.now()-a)/1e3>Yu.Duration?Wu(e):Vu(s))}},Wu=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},Q()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Vu(n)),Tc.emit(Pr.EVENTS.TASKS_RESET)}},Vu=function(e){return{type:wi,payload:{process:e}}},Ku=function(){return function(e){e({type:Pi,payload:{}}),Tc.emit(Pr.EVENTS.NOTICE_UPDATE)}},zu=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressBoxLeft=void 0,i.progressBoxBg=void 0,i.progressBoxRight=void 0,i.progressBarLeft=void 0,i.progressBarBg=void 0,i.progressBarRight=void 0,i.progressAnimation=void 0,i.payload=n;var a=n.width;return i.setSize(a,16),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBox(),i.createProgressBar(),i.createContainer(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},n.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var n=this.progressBarBg.x;this.progressBarRight.setX(n+t)},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.getDisplayWidthByProcess=function(e){return(this.width-17)*e},n.runProcessAnimation=function(e){var t,n=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=n.getCorrectValue(e);return n.getDisplayWidthByProcess(t)}},onStart:function(){var e=n.progressBarBg.displayHeight,t=n.getDisplayWidthByProcess(n.process);n.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=n.progressBarBg,t=e.x,i=e.displayWidth;n.progressBarRight.setX(t+i)},onComplete:function(){n.updateProcess()}})},n.createProgressBox=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(11,16),this.progressBoxRight=this.scene.make.image({key:t,frame:n.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(11,16),this.progressBoxBg=this.scene.make.image({key:t,frame:n.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(11,16);var i=this.progressBoxBg.displayHeight,a=this.displayWidth,r=this.progressBoxLeft.displayWidth,s=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(r,i),this.progressBoxRight.setWorldSize(s,i),this.progressBoxBg.setWorldSize(a-(r+s),i),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},n.createProgressBar=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(11,16),this.progressBarRight=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(11,16),this.progressBarBg=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(11,16);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-5.8),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,-1),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,-1),this.setProcess(0,!0)},n.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),ju=zu,Xu=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},qu=Ga.Z.DEFAULT,Ju=qu.KEY,Qu=qu.FRAME,$u=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).payload=void 0,a.process=void 0,a.isCompleted=void 0,a.background=void 0,a.titleText=void 0,a.processText=void 0,a.progressBar=void 0,a.claimButton=void 0,a.rewardedIcon=void 0,a.handleOnClaim=function(e){return function(){a.updateClaimButton();var t=a.payload,n=t.id,i=t.reward;a.scene.storage.dispatch(function(e){return function(t){var n=Xu();if(GameCore.Utils.Valid.isObject(n)){var i=n;GameCore.Utils.Object.hasOwn(i,e)&&(i[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:i}),t({type:Ri,payload:{id:e}}))}}}(n)),Q()(i).forEach((function(t){var n=i[t];e(t,n)}))}},a.updateData=function(){var e,t,n=a.getProcessValue(),i=n.current,r=n.target,s=i/r;a.progressBar.setProcess(s,!0),a.setProcessText(i,r),a.isCompleted=i>=r&&!(null!=(e=a.process)&&e.rewarded),a.claimButton.setDisabled(!a.isCompleted),null!=(t=a.process)&&t.rewarded&&a.updateClaimButton()},a.updateClaimButton=function(){a.rewardedIcon=a.scene.make.image({key:Ju,frame:Qu.ICON_CHECK}),a.rewardedIcon.setWorldSize(25.5,26),a.add(a.rewardedIcon),Phaser.Display.Align.In.Center(a.rewardedIcon,a.claimButton),a.claimButton.kill()},a.payload=n,a.process=i,a.setName("Task: "+n.id),a.createBackground(),a.updateSize(),a.createTitle(),a.createProcessBar(),a.createProcessStatus(),a.createClaimButton(),a.updateData(),a}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e){this.process=e,this.updateData()},n.getId=function(){return this.payload.id},n.getProcessValue=function(){var e=this,t=this.payload.require,n=Q()(t),i=0,a=0;return n.forEach((function(n){i=t[n]||0;var r=e.process[n];a="number"===typeof r?r:0})),{current:a,target:i}},n.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},n.createBackground=function(){this.background=this.scene.make.image({key:Ju,frame:Qu.MISSION_BLOCK_BG}),this.background.setWorldSize(262,55),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.payload.title;this.titleText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:e,origin:{x:0,y:.5}}),this.titleText.setTint(11436629),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this,-10,-10)},n.createProcessBar=function(){this.progressBar=new ju(this.scene,{width:170,key:Ju,frames:Qu}),this.add(this.progressBar),Phaser.Display.Align.In.LeftCenter(this.progressBar,this,-10,10)},n.createProcessStatus=function(){this.processText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,0)},n.createClaimButton=function(){this.claimButton=new pr.Z(this.scene,Ju,Qu.BUTTON_GREEN_MINOR,62.5,38.5);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this,-6)},n.createRewardIcon=function(){var e=this.scene.make.image({key:Ju,frame:Qu.ICON_DIAMOND_SMALL});e.setWorldSize(19,18),this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,-15)},n.createRewardValue=function(){var e=this.payload.reward,t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:""+e.diamond,origin:{x:0,y:.5}});this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,10,-1)},(0,Z.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),el=$u,tl=Ga.Z.DEFAULT,nl=tl.KEY,il=tl.FRAME,al=GameCore.Configs.DailyTasks,rl=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.missionsData=void 0,r.missionProcess=void 0,r.startedTime=void 0,r.popup=void 0,r.missionBlocks=void 0,r.countdownTimer=void 0,r.countdownText=void 0,r.countdownContainer=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.handleClosePopup=function(){r.scene.storage.dispatch(Ku()),r.runCloseAnimation()},r.handleOnClaim=function(e,t){r.claimReward(e,t)},r.resetTaskData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.startedTime=Date.now(),e.next=3,r.scene.storage.dispatch(Wu(r.missionsData));case 3:r.updateTasksData(),r.createMissionBlocks();case 5:case"end":return e.stop()}}),e)}))),r.updateTasksData=function(){var e=r.scene,t=e.player,n=e.storage.getState(),i=wc(n)||[],a=Oc(n)||{},s=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===s?0:s;r.missionsData=i,r.missionProcess=a,r.startedTime=o},r.updateCountdown=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),n=t-r.startedTime,!((i=1e3*al.Duration-n)<0)){e.next=9;break}return i=0,e.next=9,r.resetTaskData();case 9:r.countdownText.setText(""+(0,lt.F0)(i,!0));case 10:case"end":return e.stop()}}),e)}))),r.createPopup(),r.createPopupContents(),r.createDebugTools(),r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.scene.storage.dispatch(Ku()),this.updateTasksData(),this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation()},n.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks(),this.scene.audio.playSound(Ua.Z.DAILY_REWARD))},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Ua.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},n.runCloseAnimation=function(){this.scene.audio.playSound(Ua.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n;this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new ur.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}}})),null==(n=this.backgroundFadeInAnimation)||n.play()},n.runPopupEntrancesAnimation=function(e,t){var n,i;if(!this.popupShowUpAnimation)return this.popupShowUpAnimation=new Ru({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}}),void(null==(i=this.popupShowUpAnimation)||i.play());null==(n=this.popupShowUpAnimation)||n.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,a=this.missionBlocks.getChildren();a.length<1||(this.missionBlocks.setAlpha(0),null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new hr.Z({targets:a,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(i=this.contentShowUpAnimation)||i.play())},n.runPopupExitsAnimation=function(e,t){var n,i,a=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new lr.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.scene.screen.close(a.name)}}),void(null==(i=this.popupExitsAnimation)||i.play());null==(n=this.popupExitsAnimation)||n.play()},n.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new pr.Z(this.scene,nl,il.ICON_CANCEL);e.button.setSize(21,23),e.button.setDisplaySize(21,23),e.setName("Reset"),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-60,-90)}},n.createPopup=function(){this.popup=new Du(this.scene,0,0,284,440),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,15)},n.createPopupContents=function(){this.createCat(),this.createTitle(),this.createCountdown()},n.createCat=function(){var e=new Uu(this.scene);this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,35)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:nl,frame:il.RIBBON_LONG});t.setWorldSize(341,79.5);var n=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.DAILY_MISSIONS});Phaser.Display.Align.In.Center(n,t,0,-10);var i=new pr.Z(this.scene,nl,il.BUTTON_CLOSE);i.button.setWorldSize(37.5,37.5),i.setName("Close"),i.useSound=!1,i.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(i,t,-5,-5),e.add([t,n,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-55)},n.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:nl,frame:il.MISSION_CLOCK_BG});e.setWorldSize(96,27);var t=this.scene.make.image({key:nl,frame:il.ICON_CLOCK});t.setWorldSize(26,28),Phaser.Display.Align.In.LeftCenter(t,e,6),this.countdownText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"00:00:00"}),this.countdownText.setTint(11436629),Phaser.Display.Align.In.Center(this.countdownText,e,10,-1.3),this.countdownContainer.add([e,t,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,0,-98)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createMissionBlocks=function(){var e,t,n=this;null==(e=this.missionBlocks)||e.destroy(!0);var i=this.missionsData.length,a=yo()(t=new Array(i)).call(t,null);this.missionBlocks=this.scene.add.group({maxSize:i}),a.forEach((function(e,t){var i=n.creatMissionBlock(t);null!==i&&n.missionBlocks.add(i)})),this.missionBlocks.setX(0),this.missionBlocks.setY(-50,58)},n.creatMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var n=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(n))return null;var i=new el(this.scene,this.missionsData[e],n);return i.onClaim=this.handleOnClaim,this.popup.add(i),i},n.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof el){var n=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,n))return;var i=e.missionProcess[n];if(!GameCore.Utils.Valid.isObject(i))return;t.setProcess(i)}}))},t}(GameCore.Screen),sl=rl,ol=n(88),cl=n.n(ol),ul=n(608),ll=[{id:1,type:"diamond",value:50},{id:2,type:"diamond",value:75},{id:3,type:"diamond",value:100},{id:4,type:"diamond",value:125},{id:5,type:"diamond",value:150},{id:6,type:"diamond",value:200}],hl=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ll);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dl={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},pl=(0,W.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.rewards}],(function(e){return e})),fl=(0,W.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.isRequesting}],(function(e){return e})),ml=GameCore.Configs.DailyRewards,gl=function(e){return function(t){var n,i=window.game.player.getCustomData("dailyRewarded")||{},a=i.logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,u=new Date,l=new Date(c),h=new Date(l.toDateString()),d=Math.abs(u.valueOf()-h.valueOf()),p=Math.floor(d/864e5)>1,f=ml.CheckInterrupt&&p||s.length>=ml.MaxDays,m=f?[!1]:E()(n=[]).call(n,s,[!1]);vl(m);var g=me()(e).call(e,(function(e,t){var n=t<m.length,i=m.length===t+1,a=!1===m[t],s=dl.WAITING;return i?s=dl.READY:f?s=dl.WAITING:n&&a?s=dl.SKIPPED:n&&(s=dl.REWARDED),(0,r.Z)({},e,{status:s})}));t({type:Mi,payload:{rewards:g}})}},vl=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},El=Ga.Z.DEFAULT,Al=El.KEY,yl=El.FRAME,Sl=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.blockBg=void 0,i.titleBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.label=void 0,i.starTwinkleUp=void 0,i.pulsateBubbleAnimation=void 0,i.payload=n,i.setName("Day: "+n.day),i.draw(),i.setStatus(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setStatus=function(){switch(this.payload.status){case dl.READY:this.setStatusReady(),this.runAnimations();break;case dl.SKIPPED:this.setStatusSkipped();break;case dl.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.blockBg.setVisible(!1),this.titleBg.setFrame(yl.DAILY_DAY_TITLE_ORANGE),this.setCurrentIconByDay(this.payload.day)},n.setStatusRewarded=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(yl.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(yl.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(yl.ICON_CHECK),this.setCurrentIconByDay(this.payload.day)},n.setStatusSkipped=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(yl.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(yl.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(yl.ICON_CANCEL),this.setCurrentIconByDay(this.payload.day)},n.setStatusWaiting=function(){this.setCurrentIconByDay(this.payload.day)},n.setCurrentIconByDay=function(e){var t=yl.ICON_DIAMOND_LIGHT;switch(e){case 1:t=yl.ICON_DIAMOND_LIGHT,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38.5,36.5);break;case 2:t=yl.LOGO_DIAMONDS_LIGHT_2,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(52,38);break;case 3:t=yl.LOGO_DIAMONDS_LIGHT_3,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(60,40.5);break;case 4:t=yl.LOGO_DIAMONDS_LIGHT_4,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,53.5);break;case 5:t=yl.LOGO_DIAMONDS_LIGHT_5,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(62.5,54);break;case 6:t=yl.LOGO_DIAMONDS_LIGHT_6,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(64,53)}},n.draw=function(){this.createBackground(),this.updateBlockSize(),this.createBlockBG(),this.createTitleBg(),this.createTitleText(),this.createLabel(),this.createCurrencyText(),this.createCurrencyIcon(),this.createIconStatus()},n.createBackground=function(){this.background=this.scene.make.image({key:Al,frame:yl.DAILY_DAY_BG}),this.background.setWorldSize(82,102),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:Al,frame:yl.DAILY_DAY_BG_WAIT}),this.blockBg.setWorldSize(76,69),this.add(this.blockBg),Phaser.Display.Align.In.BottomCenter(this.blockBg,this.background,0,-4)},n.createTitleBg=function(){this.titleBg=this.scene.make.image({key:Al,frame:yl.DAILY_DAY_TITLE_GREY}),this.titleBg.setWorldSize(68,25),this.add(this.titleBg),Phaser.Display.Align.In.TopCenter(this.titleBg,this,0,-1)},n.createTitleText=function(){var e=this.payload.day;this.titleText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.DAY+" "+e,origin:{x:.5,y:.5}}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.titleBg)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:Al,frame:yl.ICON_DIAMOND_GREY}),this.currencyIcon.setWorldSize(38.5,36.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.background)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:Al,frame:yl.ICON_DOT}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(15,16),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createLabel=function(){this.label=this.scene.make.image({key:Al,frame:yl.DAILY_DAY_LABEL}),this.label.setWorldSize(73,19),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.background,0,-5)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"+"+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.Center(this.currencyText,this.label,-2,-1)},n.runAnimations=function(){this.runSparksIdle()},n.runSparksIdle=function(){this.starTwinkleUp||(this.starTwinkleUp=new Tr.Z(this.scene),this.starTwinkleUp.emitter.setFrequency(100),this.add(this.starTwinkleUp));var e=this.currencyIcon,t=e.x,n=e.y,i=e.width,a=e.height;this.starTwinkleUp.run(1,t,n,i,a)},n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new sr({targets:[this.currencyIcon],props:{scale:"+=0.04"}})),this.pulsateBubbleAnimation.play()},t}(Phaser.GameObjects.Container),Tl=Sl,Il=Ga.Z.DEFAULT,bl=Il.KEY,Cl=Il.FRAME,wl=GameCore.Configs,Ol=wl.Network,Rl=wl.DailyRewards,Pl={id:0,type:"diamond",value:0},_l=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.onSkipAd=void 0,r.onNoAd=void 0,r.logDays=void 0,r.rewardsData=void 0,r.popup=void 0,r.loading=void 0,r.dayBlocks=void 0,r.claimButton=void 0,r.claimButton2X=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.adsTimer=void 0,r.handleClosePopup=function(){r.runCloseAnimation()},r.handleOnClaim=function(){var e=r.getCurrentRewardValue();r.claimReward(e)},r.handleOnClaimX2=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.claimButton.setDisabled(!0),r.claimButton2X.setDisabled(!0),i.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING,duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=9,new(ee())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Ol.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,r.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(Na.o4.NOTIFY_SCREEN),a=r.getCurrentRewardValue(),r.claimReward(2*a),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return r.onSkipAd(),e.abrupt("return");case 22:r.onNoAd();case 23:return e.prev=23,null==(s=r.adsTimer)||s.destroy(),n.unmuteAll(),n.playMusic(),r.claimButton.setDisabled(!1),r.claimButton2X.setDisabled(!1),e.finish(23);case 30:case"end":return e.stop()}}),e,null,[[1,16,23,30]])}))),r.updateRewardsData=(0,s.Z)(u().mark((function e(){var t,n,i,a,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.scene,i=n.storage,a=n.player,e.next=3,i.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!fl(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Li,payload:{}}),e.next=7,hl();case 7:a=e.sent,t(gl(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(o=i.getState(),!((null==(c=pl(o)||[])?void 0:c.length)<1)){e.next=7;break}return e.abrupt("return");case 7:r.rewardsData=c,l=a.getCustomData("dailyRewarded"),h=(l||{}).logDays,d=void 0===h?[]:h,r.logDays=E()(t=[]).call(t,d);case 11:case"end":return e.stop()}}),e)}))),r.checkOpenable=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.player,n=t.getCustomData("dailyRewarded"),a=(i=n||{}).logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,!(s.length>Rl.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(Rl.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*Rl.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,lt.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),r.rewardsData=[],r.createPopup(),r.createPopupContents(),r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkOpenable();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.prototype.open.call(this),t.next=8,this.updateRewardsData();case 8:this.createDayBlocks(),this.runOpenAnimation();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t;"function"===typeof this.onReward&&((null==(t=this.logDays)?void 0:t.length)<1||(this.logDays[this.logDays.length-1]=!0,vl(this.logDays),this.onReward(e),this.scene.audio.playSound(Ua.Z.DAILY_REWARD),this.runCloseAnimation()))},n.getCurrentRewardValue=function(){var e,t=cl()(e=this.rewardsData).call(e,(function(e){return e.status===dl.READY}));return(null==t?void 0:t.value)||0},n.getRewardByDay=function(e){var t;return cl()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||Pl},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Ua.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},n.runCloseAnimation=function(){this.scene.audio.playSound(Ua.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new ur.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}}})),this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new Ru({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new hr.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new lr.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createPopup=function(){this.popup=new Du(this.scene,0,0,310,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.add.container(),t=30,n=-10;if("ru"===this.scene.lang.getCurrentLanguage())t=27,n=-7;var i=this.scene.make.image({key:bl,frame:Cl.RIBBON_SHORT});i.setWorldSize(271,81);var a=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.DAILY_REWARDS});Phaser.Display.Align.In.Center(a,i,0,n);var r=new pr.Z(this.scene,bl,Cl.BUTTON_CLOSE,38,38);r.setName("Close"),r.useSound=!1,r.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(r,i,35,15),e.add([i,a,r]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createLoading=function(){this.loading=new ul.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t,n=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var i=Rl.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:i}),yo()(t=new Array(i)).call(t,null).forEach((function(e,t){var i=n.createDayBlock(t+1);n.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:92,cellHeight:112,x:-88,y:-75})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,a=t.status,r=void 0===a?"":a,s=new Tl(this.scene,{day:e,type:n,value:i,status:r});return s.setAlpha(0),this.popup.add(s),s},n.createClaimButton=function(){this.claimButton=new pr.Z(this.scene,bl,Cl.BUTTON_BLUE_CIRCLE,79,68),this.claimButton.setName("Claim");var e=22,t=-3;if("ru"===this.scene.lang.getCurrentLanguage())e=20,t=-1;var n=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM,origin:{x:.5,y:.5}});this.claimButton.add(n),Phaser.Display.Align.In.Center(n,this.claimButton,0,t),this.popup.add(this.claimButton),Phaser.Display.Align.In.BottomCenter(this.claimButton,this.popup,-86,-30),this.claimButton.onClick=this.handleOnClaim},n.createClaimX2Button=function(){this.claimButton2X=new pr.Z(this.scene,bl,Cl.BUTTON_GREEN_SHORT,161,68),this.claimButton2X.setName("ClaimX2");var e=22,t=-38,n=24,i=-3;if("ru"===this.scene.lang.getCurrentLanguage())e=20,t=-42,n=22,i=-1;var a=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM_X2,origin:{x:0,y:.5}}),r=this.scene.make.image({key:bl,frame:Cl.ICON_ADS});r.setWorldSize(37,34),Phaser.Display.Align.In.Center(r,this.claimButton2X,t,-2),Phaser.Display.Align.In.Center(a,this.claimButton2X,n,i),this.claimButton2X.add([a,r]),this.popup.add(this.claimButton2X),Phaser.Display.Align.In.BottomCenter(this.claimButton2X,this.popup,52,-30),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),xl=_l,kl=Ga.Z.DEFAULT.KEY,Dl=function(e){function t(t,n){var i;return(i=e.call(this,t,kl,n.backgroundOn)||this).options=void 0,i.icon=void 0,i.getFrameByStatus=function(){var e=i.options,t=e.enable,n=e.frameOn,a=e.frameOff;return t?n:a},i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.options=n,i.createIcon(),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.getBackgroundByStatus();this.button.setFrame(n)},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:kl,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(pr.Z),Ll=Dl,Ml=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isMobile()&&"function"===typeof t},Nl=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return r=a(),o=(0,lt.qZ)(80),i+=1,e.next=9,ee().all([r,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bl=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},Gl=function(e){try{var t;if(!Ml())return!1;re()(t=window.navigator.userAgent).call(t,"Android")?Bl(e):Nl(e).catch((function(e){}))}catch(n){}},Ul=Ga.Z.DEFAULT,Zl=Ul.KEY,Fl=Ul.FRAME,Yl=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.title=void 0,r.buttonClose=void 0,r.contents=void 0,r.settingMusic=void 0,r.settingSound=void 0,r.settingVibrate=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.handleClose=function(){r.runCloseAnimation()},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.createPopup(),r.createTitle(),r.createButtons(),r.addItem(),r.arrangeItems(),r.createInput(),r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.music,i=t.sound,a=t.vibrate;if(this.settingMusic.updateStatus(n),this.settingSound.updateStatus(i),this.settingVibrate.updateStatus(a),!Ml()){this.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(this.settingMusic,this.popup,-65,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,65,5)}this.runOpenAnimation()},n.createInput=function(){this.buttonClose.useSound=!1,this.buttonClose.onClick=this.handleClose,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Du(this.scene,0,0,310,180),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Zl,frame:Fl.RIBBON_SHORT});e.setWorldSize(271,81);var t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-10),this.buttonClose=new pr.Z(this.scene,Zl,Fl.BUTTON_CLOSE,38,38),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,e,-5,-5),this.title.add([e,t,this.buttonClose])},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.sound,i=e.vibrate;this.createMusicButton(t),this.createVibrateButton(i),this.createSoundButton(n)},n.createMusicButton=function(e){this.settingMusic=new Ll(this.scene,{enable:e,frameOn:Fl.ICON_MUSIC_ON,frameOff:Fl.ICON_MUSIC_OFF,backgroundOn:Fl.BUTTON_GREEN_CIRCLE,backgroundOff:Fl.BUTTON_GREEN_CIRCLE}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(e){this.settingVibrate=new Ll(this.scene,{enable:e,frameOn:Fl.ICON_VIB_ON,frameOff:Fl.ICON_VIB_OFF,backgroundOn:Fl.BUTTON_GREEN_CIRCLE,backgroundOff:Fl.BUTTON_GREEN_CIRCLE}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(e){this.settingSound=new Ll(this.scene,{enable:e,frameOn:Fl.ICON_SOUND_ON,frameOff:Fl.ICON_SOUND_OFF,backgroundOn:Fl.BUTTON_GREEN_CIRCLE,backgroundOff:Fl.BUTTON_GREEN_CIRCLE}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.addItem=function(){this.popup.add([this.title,this.settingVibrate,this.settingMusic,this.settingSound]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.settingVibrate,this.settingMusic,this.settingSound])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup);Phaser.Display.Align.In.Center(this.settingVibrate,this.popup,0,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,-90,5),Phaser.Display.Align.In.Center(this.settingMusic,this.popup,90,5)},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ua.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ua.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Ru({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new hr.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new lr.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Hl=Yl,Wl=GameCore.Configs.Gameplay,Vl=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).main=void 0,n.header=void 0,n.footer=void 0,n.rewardScreen=void 0,n.dailyMissionScreen=void 0,n.dailyRewardsScreen=void 0,n.fireworks=void 0,n.currentDiamond=void 0,n.timerDailyRewards=void 0,n.run=function(){var e,t,i;n.currentDiamond=0,null==(e=n.footer.giftIcon)||e.checkUseable(),null==(t=n.footer.dailyIcon)||t.checkNotice(),Tc.off(Pr.EVENTS.NOTICE_UPDATE,n.footer.dailyIcon.checkNotice),Tc.on(Pr.EVENTS.NOTICE_UPDATE,n.footer.dailyIcon.checkNotice),n.updateCurrentBestScore(),n.updateCurrentDiamond(),null==(i=n.timerDailyRewards)||i.remove(),n.timerDailyRewards=n.time.delayedCall(300,(function(){n.screen.open(Na.o4.DAILY_REWARD_SCREEN)}))},n.eatDiamond=function(e){n.createDiamondsEffect(10,e),Tc.emit(Pr.COLLECT_DIAMONDS.EVENTS.COLLECT_DIAMONDS,{type:"diamond",value:e})},n.showNotifyNoAds=function(){n.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:n.lang.Text.NO_ADS,duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:n.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},n.fireFireworks=function(){var e=n.gameZone,t=e.width,i=e.height,a=n.main.logo.getWorldPosition().y;n.tweens.addCounter({duration:300,repeat:Phaser.Math.RND.between(2,4),onRepeat:function(){var e=n.fireworks.getMatching("visible",!1),r=e[0];e.length<1&&(r=n.createFirework()),r.randomColor();var s=Phaser.Math.RND.between(20,t-20);r.fire(s,i,a)},completeDelay:1e3,onComplete:n.fireFireworks})},n.handlePlaySingle=function(){n.storage.dispatch(hc())},n.handleSettingClick=function(){n.screen.open(Na.o4.SETTINGS_SCREEN)},n.handleRankIconClick=function(){n.scene.switch(Ta.C.LEADERBOARD_SCENE)},n.handleDailyIconClick=function(){n.screen.open(Na.o4.DAILY_MISSIONS_SCREEN)},n.handleGiftIconClick=function(){n.rewardScreen.onReward=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.eatDiamond(t),e.next=3,n.player.setCustomData("lastReceiveGift",Date.now());case 3:n.footer.giftIcon.checkUseable();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.screen.open(Na.o4.REWARD_SCREEN,{awardDiamonds:Wl.AwardDiamonds})},n.handleDiamondBarClick=function(){n.rewardScreen.onReward=n.eatDiamond,n.screen.open(Na.o4.REWARD_SCREEN,{awardDiamonds:Wl.AwardDiamonds})},n}(0,o.Z)(t,e);var n=t.prototype;return n.updateCurrentBestScore=function(){var e=this.player.getBestScore(),t=this.storage.getState(),n=Ws(t).bestScore,i=void 0===n?0:n,a=e>i?e:i;this.header.scoreBar.setValue(a)},n.updateCurrentDiamond=function(){var e=this.player.getDiamond();this.setDiamond(e)},n.preload=function(){var e=this;this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()}))},n.create=function(){e.prototype.create.call(this),this.createBackground(ua.Z.BACKGROUND.KEY),this.createSettingsScreen(),this.createRewardScreen(),this.createDailyMissionScreen(),this.createDailyRewardsScreen(),this.createHeaderBar(),this.createMainContent(),this.createFooterBar(),this.fireworks=this.add.group(),this.fireFireworks()},n.createDiamondsEffect=function(e,t){var n=this,i=this.header.diamondBar.getWorldPosition(),a=i.x,r=i.y,s=this.main.logo.getWorldPosition(),o=s.x,c=s.y,u=0;this.tweens.addCounter({duration:1e3/e,repeat:e,repeatDelay:30,onRepeat:function(){var i=Phaser.Math.RND.between(o-60,o+60),s=new Qa(n,{from:{x:i,y:c-80},to:{x:a-40,y:r+7}});s.setDepth(Ma.Z.ON_TOP),s.onUpdate=function(){n.header.setDepth(Ma.Z.ON_TOP)},s.onComplete=function(){var i=n.currentDiamond+Math.floor(t/e);n.setDiamond(i),++u>=e&&(n.header.setDepth(Ma.Z.ITEM),n.player.setCustomData("diamond",n.currentDiamond))},s.run()}})},n.setDiamond=function(e){var t=e<0?0:e;this.currentDiamond=t,this.header.diamondBar.setValue(t)},n.createSettingsScreen=function(){this.screen.add(Na.o4.SETTINGS_SCREEN,Hl)},n.createRewardScreen=function(){this.rewardScreen=this.screen.add(Na.o4.REWARD_SCREEN,Rr)},n.createDailyMissionScreen=function(){var e=this;this.dailyMissionScreen=this.screen.add(Na.o4.DAILY_MISSIONS_SCREEN,sl),this.dailyMissionScreen.onReward=function(t,n){"diamond"===t&&e.eatDiamond(n)}},n.createDailyRewardsScreen=function(){var e=this;this.dailyRewardsScreen=this.screen.add(Na.o4.DAILY_REWARD_SCREEN,xl),this.dailyRewardsScreen.onNoAd=this.showNotifyNoAds,this.dailyRewardsScreen.onSkipAd=this.showNotifySkipAds,this.dailyRewardsScreen.onReward=function(t){e.eatDiamond(t)}},n.createHeaderBar=function(){this.header=new fu(this),this.header.setDepth(Ma.Z.BUTTON),this.header.diamondBar.onClick=this.handleDiamondBarClick,Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMainContent=function(){this.main=new wu(this),this.main.setDepth(Ma.Z.LOGO),this.main.playSingleButton.onClick=this.handlePlaySingle,Phaser.Display.Align.In.Center(this.main,this.gameZone)},n.createFooterBar=function(){this.footer=new eu(this),this.footer.setDepth(Ma.Z.BUTTON),this.footer.rankIcon.onClick=this.handleRankIconClick,this.footer.dailyIcon.onClick=this.handleDailyIconClick,this.footer.giftIcon.onClick=this.handleGiftIconClick,this.footer.settingIcon.onClick=this.handleSettingClick;var e=this.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,-e)},n.createFirework=function(){var e=new za(this);return this.fireworks.add(e),e},t}(Ic.Z);var Kl=Vl,zl=n(632),jl=n(629),Xl=Ga.Z.DEFAULT,ql=Xl.KEY,Jl=Xl.FRAME,Ql=function(e){function t(t){var n;return(n=e.call(this,t,ql,Jl.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:ql,frame:Jl.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(pr.Z),$l=Ql,eh=Ga.Z.DEFAULT,th=eh.KEY,nh=eh.FRAME,ih=function(e){function t(t){var n;return(n=e.call(this,t,th,nh.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName(window.game.globalScene.lang.Text.RANK),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:th,frame:nh.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(pr.Z),ah=ih,rh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new jl.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new $l(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new ah(this.scene),this.add(this.rankButton)},t}(Phaser.GameObjects.Container),sh=rh,oh={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},ch=function(e){function t(t){return e.call(this,oh,t)||this}return(0,o.Z)(t,e),t}($a.Z),uh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),lh=uh,hh=Ga.Z.DEFAULT,dh=hh.KEY,ph=hh.FRAME,fh=function(e){function t(t){var n;return(n=e.call(this,t)||this).bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this,t=this.payload.bestScore;this.setBestScore(t),this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound(Ua.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n),n>i&&t.setBestScore(n)},onComplete:function(){t.bestScore=i>a?i:a,t.setBestScore(t.bestScore),t.setCurrentScore(a),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText(this.scene.lang.Text.BEST_SCORE+": "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Du(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Uu(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:dh,frame:ph.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:this.scene.lang.Text.YOUR_SCORE}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new lh(this.scene,{font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.BEST_SCORE+": "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new sr({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new ch({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),mh=fh,gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new mh(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),vh=gh,Eh=n(621),Ah=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=i.getPhotoId(),o=i.scene.textures.get(s);if(o&&o.key===s)i.setPhoto(o.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Ba.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,r=a.id,s=a.url,o=a.radius;return r&&s&&i.loadPhoto(r,s,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.getPhotoId=function(){var e=this.payload,t=e.id,n=e.radius,i=void 0===n?0:n;return t?i>0?t+"_bordered_"+i:t:ua.Z.AVATAR.KEY},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(ua.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,ua.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new ul.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=Math.max(this.width,this.height)-7;this.photo.setWorldSize(t,t),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),yh=Ah,Sh=n(630),Th=n(631),Ih=Ga.Z.DEFAULT,bh=Ih.KEY,Ch=Ih.FRAME,wh=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).avatar=void 0,r.scoreText=void 0,r.shareButton=void 0,r.bigStarExplosive=void 0,r.open=function(t){e.prototype.open.call((0,Ba.Z)(r),t);var n=r.getData("bestScore");r.setBestScore(n);var i=r.scene.player.getPlayer();r.avatar.loadPhoto(i.playerId,i.photo,60),r.runOpenAnimation(),r.scene.audio.playSound(Ua.Z.CONGRATULATION)},r.handleClose=function(){r.scene.screen.close(r.name)},r.handleShareBestScore=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.shareAsync({data:"",intent:"SHARE",text:"",image:""});case 2:case"end":return e.stop()}}),e)}))),r.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(r.bigStarExplosive,r.scoreText),r.bigStarExplosive.run()},r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r.createObjects(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:bh,frame:Ch.RIBBON_SMALL});e.setWorldSize(162,36);var t=-70;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=17;if("ru"===this.scene.lang.getCurrentLanguage())n=15;var i=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(n),text:this.scene.lang.Text.TODAY_RECORD});t=-3,Phaser.Display.Align.In.Center(i,e,0,t),this.add([e,i])},n.createClose=function(){var e=new pr.Z(this.scene,bh,Ch.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:40,text:this.scene.lang.Text.BEST_SCORE});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new lh(this.scene,{font:Ar.Z.PRIMARY.KEY,size:85}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new yh(this.scene,{key:bh,frame:Ch.AVATAR_FRAME_YELLOW_BIG,background:Ch.AVATAR_BG_YELLOW_BIG,width:95,height:95}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,30)},n.createGlowEffect=function(){var e=Ga.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){var e=0,t=0;if("ru"===this.scene.lang.getCurrentLanguage())e=-8,t=-6;this.shareButton=new Sh.Z(this.scene,{key:bh,button:Ch.BUTTON_BLUE,icon:Ch.ICON_FLAT_SHARE,text:this.scene.lang.Text.SHARE},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.icon.x+=e,this.shareButton.text.x+=t,this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Lu.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Th.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Ru({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new Eh.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new ur.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),Oh=wh,Rh=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.footerBar=void 0,n.main=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateScore(),n.explodeConfettiEffect(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(Ua.Z.GAME_OVER_SCENE)},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handleHomeClick=function(){n.scene.switch(Ta.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(Ta.C.LEADERBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(qo())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(ua.Z.BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createMain(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateScore=function(){var e=this.storage.getState(),t=Ws(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,r=void 0===a?0:a;this.bestScore=r<this.bestScore?this.bestScore:r,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createMain=function(){this.bestScore=0,this.main=new vh(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createFooterBar=function(){this.footerBar=new sh(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-110),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add(Na.o4.BEST_SCORE_SCREEN,Oh)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new zl.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new zl.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Ma.Z.EFFECT),this.confettiRightEffect.setDepth(Ma.Z.EFFECT)},n.handleShowBestScorePopup=function(){this.currentScore>this.bestScore&&this.storage.dispatch(sc({bestScore:this.currentScore})),this.currentScore>this.bestScore&&(this.screen.open(Na.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=as(t);if(-1!==_t()(e=[da,pa]).call(e,n)&&Ns(t)){var i=Gs(t).playerId;n===pa&&i===la.playerId||(this.scene.pause(Ta.C.GAME_OVER_SCENE),this.scene.launch(Ta.C.RESULT_MATCH_SCENE))}},t}(Ic.Z);var Ph,_h,xh,kh,Dh,Lh=Rh,Mh=function(){function e(e){var t=this;this.scene=void 0,this.bonusScore=void 0,this.fadeInAnimation=void 0,this.fadeOutAnimation=void 0,this.bonusScoreAnimation=void 0,this.bonusScoreText=void 0,this.runAnimation=function(){var e;t.bonusScoreText.setVisible(!0),t.runFadeInAnimations(),t.runBonusScoreAnimations(),null==(e=t.bonusScoreAnimation)||e.next(t.eatScore)},this.eatScore=function(){var e;t.scene.eatScore(t.bonusScore),t.runFadeOutAnimations(),null==(e=t.fadeOutAnimation)||e.next(t.hideScore)},this.hideScore=function(){t.bonusScoreText.setVisible(!1)},this.scene=e,this.createText()}var t=e.prototype;return t.setBonusScore=function(e){this.bonusScore=e,this.bonusScoreText.setText(""+e)},t.createText=function(){var e=this.scene.gameZone.width;this.bonusScoreText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(36),depth:Ma.Z.TEXT,origin:{x:.5,y:.5},visible:!1,x:e/2,y:200})},t.runBonusScoreAnimations=function(){this.bonusScoreAnimation||(this.bonusScoreAnimation=new ch({targets:[this.bonusScoreText],duration:250,props:{scale:1.8}})),this.bonusScoreAnimation.play()},t.runFadeInAnimations=function(){this.fadeInAnimation||(this.fadeInAnimation=new ur.Z({targets:[this.bonusScoreText],duration:50})),this.fadeInAnimation.play()},t.runFadeOutAnimations=function(){this.fadeOutAnimation||(this.fadeOutAnimation=new lr.Z({targets:[this.bonusScoreText],duration:200})),this.fadeOutAnimation.play()},e}(),Nh=Mh,Bh={COOL:"cool",GOOD:"good",GREAT:"great",TEXT_EXCELLENT:"very-excellent",CONGRATULATION:"congratulation"},Gh=Ga.Z.EFFECTS,Uh=Gh.KEY,Zh=(Gh.FRAME,function(){function e(e){var t=this;this.scene=void 0,this.originScale=void 0,this.isPlayTextTween=void 0,this.mushPlayCongratulationTween=void 0,this.textTween=void 0,this.endTween=void 0,this.congratulationTween=void 0,this.textImage=void 0,this.runAnimation=function(e){t.textTween||e===Bh.CONGRATULATION||t.createTextAnimation();var n=t.scene.lang.getCurrentLanguage();switch(e){case Bh.COOL:t.textImage.setFrame(t.scene.lang.Texture.COOL),"ja"===n||"id"===n?t.textImage.setWorldSize(226,74.5):t.textImage.setWorldSize(165,75),t.playTextAnimation();break;case Bh.GOOD:t.textImage.setFrame(t.scene.lang.Texture.GOOD),"ja"===n||"id"===n?t.textImage.setWorldSize(179,75.5):t.textImage.setWorldSize(179,76),t.playTextAnimation();break;case Bh.GREAT:t.textImage.setFrame(t.scene.lang.Texture.GREAT),"ja"===n||"id"===n?t.textImage.setWorldSize(191.5,82):t.textImage.setWorldSize(192,82),t.playTextAnimation();break;case Bh.TEXT_EXCELLENT:t.textImage.setFrame(t.scene.lang.Texture.EXCELLENT),"ja"===n||"id"===n?t.textImage.setWorldSize(255,84.5):t.textImage.setWorldSize(255,85),t.playTextAnimation();break;case Bh.CONGRATULATION:var i;if(null!=(i=t.congratulationTween)&&i.isPlaying())return;if(t.isPlayTextTween)return void(t.mushPlayCongratulationTween=!0);t.playCongratulationAnimation()}},this.playTextAnimation=function(){t.isPlayTextTween=!0,t.textImage.setVisible(!0),t.textTween.restart()},this.playCongratulationAnimation=function(){t.scene.lang.getCurrentLanguage();t.textImage.setFrame(t.scene.lang.Texture.CONGRATULATION),t.textImage.setVisible(!0),t.textImage.setWorldSize(306,99),t.congratulationTween?t.congratulationTween.restart():t.createCongratulationTween()},this.alignText=function(){var e=t.textImage.displayHeight/2-220;Phaser.Display.Align.In.TopCenter(t.textImage,t.scene.gameZone,0,e)},this.createEndAnimation=function(){t.endTween=t.scene.add.tween({targets:t.textImage,duration:300,delay:100,props:{alpha:{from:1,to:0}},onComplete:function(){t.mushPlayCongratulationTween?t.playCongratulationAnimation():t.textImage.setVisible(!1)}})},this.scene=e,this.createText()}var t=e.prototype;return t.createText=function(){this.textImage=this.scene.add.sprite(0,0,Uh),this.textImage.setVisible(!1),this.originScale=1/this.scene.world.getPixelRatio(),this.textImage.setDepth(Ma.Z.ENCOURAGING),this.alignText()},t.createCongratulationTween=function(){var e=this,t=.8*this.originScale;this.congratulationTween=this.scene.add.tween({targets:this.textImage,completeDelay:200,props:{alpha:{duration:150,value:{from:0,to:1}},scale:{delay:100,duration:450,ease:"Bounce.easeOut",value:{from:t,to:this.originScale}}},onStart:function(){var n,i;null==(n=e.endTween)||n.stop(),null==(i=e.textTween)||i.stop(),e.textImage.setScale(t),e.textImage.setFrame(e.scene.lang.Texture.CONGRATULATION)},onComplete:function(){e.mushPlayCongratulationTween=!1,e.endTween?e.endTween.restart():e.createEndAnimation()}})},t.createTextAnimation=function(){var e=this;this.textTween=this.scene.add.tween({targets:this.textImage,props:{scale:{delay:0,duration:350,ease:Phaser.Math.Easing.Back.Out,value:{from:.5*this.originScale,to:this.originScale}},alpha:{repeat:4,delay:500,duration:120,value:{from:1,to:0}}},onComplete:function(){e.isPlayTextTween=!1,e.endTween?e.endTween.restart():e.createEndAnimation()}})},e}()),Fh=Zh,Yh=function(){function e(e){var t=this;this.scene=void 0,this.posX=void 0,this.posY=void 0,this.totalScoreAnimation=void 0,this.totalScoreText=void 0,this.runAnimation=function(e,n){var i=t.scene.boardManager.boardContainer;t.posX=i.x+e,t.posY=i.y+n,t.posX<40?t.posX=40:t.posX>330&&(t.posX=330),t.runTotalScoreAnimation()},this.scene=e,this.createTexts()}var t=e.prototype;return t.setTotalScore=function(e){this.totalScoreText.setText(""+e)},t.createTexts=function(){this.totalScoreText=new lh(this.scene,{font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(50)}),this.totalScoreText.setDropShadow(0,1,2368548),this.totalScoreText.setDepth(Ma.Z.TEXT),this.totalScoreText.kill()},t.runTotalScoreAnimation=function(){var e,t=this;this.totalScoreText.revive(),this.totalScoreText.setAlpha(1),this.totalScoreText.setScale(.2),this.totalScoreText.setPosition(this.posX,this.posY),null==(e=this.totalScoreAnimation)||e.remove(),this.totalScoreAnimation=this.scene.tweens.add({targets:[this.totalScoreText],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{duration:400,getStart:function(){return t.posX}},y:{duration:400,getStart:function(){return t.posY},getEnd:function(){return t.posY-70}},scale:{ease:Phaser.Math.Easing.Back.Out,value:{from:.2,to:1}},alpha:{value:{from:1,to:0},delay:900,duration:300}},onComplete:function(){var e;t.scene&&(null==(e=t.totalScoreText)||e.kill())}})},e}(),Hh=Yh,Wh=Ga.Z.EFFECTS,Vh={COLORFUL:{KEY:"colorful-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_COLORFUL,FRAME_RATE:30,END:17,ZERO_PAD:1},COLOR_CHANGE:{KEY:"color-change-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_COLOR_CHANGE,FRAME_RATE:18,END:18,ZERO_PAD:1},PAINT_EXPLOSIVE:{KEY:"paint-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_PAINT_EXPLOSIVE,FRAME_RATE:18,END:12,ZERO_PAD:1},FREEZE_EXPLOSIVE:{KEY:"freeze-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_FREEZE_EXPLOSIVE,FRAME_RATE:30,END:9,ZERO_PAD:1},COLORFUL_EXPLOSIVE:{KEY:"colorful-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_COLORFUL_EXPLOSIVE,FRAME_RATE:30,END:9,ZERO_PAD:1},RED_EXPLOSIVE:{KEY:"red-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_RED_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},BLUE_EXPLOSIVE:{KEY:"blue-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_BLUE_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},PINK_EXPLOSIVE:{KEY:"pink-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_PINK_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},GREEN_EXPLOSIVE:{KEY:"green-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_GREEN_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},YELLOW_EXPLOSIVE:{KEY:"yellow-explosive-animation",TEXTURE:Wh.KEY,PREFIX:Wh.FRAME.FX_YELLOW_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1}},Kh=Vh,zh=Kh.BLUE_EXPLOSIVE,jh=zh.KEY,Xh=zh.TEXTURE,qh=zh.FRAME_RATE,Jh=zh.END,Qh=zh.PREFIX,$h=zh.ZERO_PAD,ed=function(e){function t(t){var n={repeat:0,frameRate:qh,frames:t.generateFrameNames(Xh,{prefix:Qh,end:Jh,zeroPad:$h}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,jh,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),td=ed,nd=Kh.COLORFUL_EXPLOSIVE,id=nd.KEY,ad=nd.TEXTURE,rd=nd.FRAME_RATE,sd=nd.END,od=nd.PREFIX,cd=nd.ZERO_PAD,ud=function(e){function t(t){var n={repeat:0,frameRate:rd,frames:t.generateFrameNames(ad,{prefix:od,end:sd,zeroPad:cd}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,id,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),ld=ud,hd=Kh.GREEN_EXPLOSIVE,dd=hd.KEY,pd=hd.TEXTURE,fd=hd.FRAME_RATE,md=hd.END,gd=hd.PREFIX,vd=hd.ZERO_PAD,Ed=function(e){function t(t){var n={repeat:0,frameRate:fd,frames:t.generateFrameNames(pd,{prefix:gd,end:md,zeroPad:vd}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,dd,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Ad=Ed,yd=Kh.PAINT_EXPLOSIVE,Sd=yd.KEY,Td=yd.TEXTURE,Id=yd.FRAME_RATE,bd=yd.END,Cd=yd.PREFIX,wd=yd.ZERO_PAD,Od=function(e){function t(t){var n={repeat:0,frameRate:Id,frames:t.generateFrameNames(Td,{prefix:Cd,end:bd,zeroPad:wd}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Sd,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Rd=Od,Pd=Kh.PINK_EXPLOSIVE,_d=Pd.KEY,xd=Pd.TEXTURE,kd=Pd.FRAME_RATE,Dd=Pd.END,Ld=Pd.PREFIX,Md=Pd.ZERO_PAD,Nd=function(e){function t(t){var n={repeat:0,frameRate:kd,frames:t.generateFrameNames(xd,{prefix:Ld,end:Dd,zeroPad:Md}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,_d,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Bd=Nd,Gd=Kh.RED_EXPLOSIVE,Ud=Gd.KEY,Zd=Gd.TEXTURE,Fd=Gd.FRAME_RATE,Yd=Gd.END,Hd=Gd.PREFIX,Wd=Gd.ZERO_PAD,Vd=function(e){function t(t){var n={repeat:0,frameRate:Fd,frames:t.generateFrameNames(Zd,{prefix:Hd,end:Yd,zeroPad:Wd}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Ud,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Kd=Vd,zd=Kh.YELLOW_EXPLOSIVE,jd=zd.KEY,Xd=zd.TEXTURE,qd=zd.FRAME_RATE,Jd=zd.END,Qd=zd.PREFIX,$d=zd.ZERO_PAD,ep=function(e){function t(t){var n={repeat:0,frameRate:qd,frames:t.generateFrameNames(Xd,{prefix:Qd,end:Jd,zeroPad:$d}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,jd,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),tp=ep,np=Kh.COLOR_CHANGE,ip=np.KEY,ap=np.TEXTURE,rp=np.FRAME_RATE,sp=np.END,op=np.PREFIX,cp=np.ZERO_PAD,up=function(e){function t(t){var n={repeat:-1,frameRate:rp,frames:t.generateFrameNames(ap,{prefix:op,end:sp,zeroPad:cp}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,ip,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),lp=up,hp=Kh.COLORFUL,dp=hp.KEY,pp=hp.TEXTURE,fp=hp.FRAME_RATE,mp=hp.END,gp=hp.PREFIX,vp=hp.ZERO_PAD,Ep=function(e){function t(t){var n={repeat:-1,frameRate:fp,frames:t.generateFrameNames(pp,{prefix:gp,end:mp,zeroPad:vp}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,dp,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Ap=Ep,yp=Ga.Z.GAMEPLAY.FRAME,Sp=yp.TILE_RED,Tp=yp.TILE_BLUE,Ip=yp.TILE_PINK,bp=yp.TILE_GREEN,Cp=yp.TILE_YELLOW,wp=yp.TILE_FREEZE,Op=yp.TILE_COLORFUL,Rp=yp.TILE_COLOR_CHANGE,Pp={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},_p={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},xp=Pp.RED,kp=Pp.BLUE,Dp=Pp.PINK,Lp=Pp.GREEN,Mp=Pp.YELLOW,Np=_p.FREEZE,Bp=_p.COLORFUL,Gp=_p.COLOR_CHANGE,Up=((Ph={})[xp]="r",Ph[kp]="b",Ph[Dp]="p",Ph[Lp]="g",Ph[Mp]="y",Ph[Np]="f",Ph[Bp]="c",Ph[Gp]="m",Ph),Zp={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(_h={},_h[xp]=Sp,_h[kp]=Tp,_h[Dp]=Ip,_h[Lp]=bp,_h[Mp]=Cp,_h[Np]=wp,_h[Bp]=Op,_h[Gp]=Rp,_h),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:Pp,SPECIALS:_p,HASH:Up},Fp=Ga.Z.EFFECTS,Yp=Fp.KEY,Hp=Fp.FRAME,Wp=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Yp,Hp.FX_FIREWORKS_SMALL)||this).bonusPosY=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.bonusPosY=100,n.kill(),n.setWorldSize(49,49.5),n.setDepth(Ma.Z.FIREWORKS),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.randomColor=function(){var e=ci()(this.colors),t=e[Phaser.Math.RND.between(0,e.length-1)];this.setTintFill(t)},n.setColor=function(e){this.setTintFill(this.colors[e])},n.fire=function(e,t,n){this.revive(),this.setPosition(e,t),this.runFireworkAnimation(n),this.scene.audio.playSound(Ua.Z.FIREWORKS_SOAR,{volume:.2})},n.runFireworkAnimation=function(e){var t=this;if(this.scene){var n=1/this.scene.world.getPixelRatio(),i=Phaser.Math.RND.between(0,this.bonusPosY);this.scene.tweens.add({targets:[this],duration:300,ease:Phaser.Math.Easing.Circular.Out,props:{angle:{repeat:-1,value:360},scale:{yoyo:!0,value:.8*n}}}),this.scene.tweens.add({targets:[this],duration:800,ease:Phaser.Math.Easing.Circular.Out,props:{y:e+i},onComplete:function(){t.scene.tweens.killTweensOf(t),t.kill()}})}},t}(Phaser.GameObjects.Sprite),Vp=Wp,Kp=Ga.Z.GAMEPLAY,zp=Ga.Z.EFFECTS,jp=Zp.STATUS,Xp=[Ua.Z.GEM_EXPLOSIVE_1,Ua.Z.GEM_EXPLOSIVE_2,Ua.Z.GEM_EXPLOSIVE_3,Ua.Z.GEM_EXPLOSIVE_4,Ua.Z.GEM_EXPLOSIVE_5,Ua.Z.GEM_EXPLOSIVE_6],qp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0)||this).scene=void 0,a.scaleUp=1,a.scaleDown=1,a.eatScore=0,a.row=void 0,a.column=void 0,a.color=void 0,a.frame=void 0,a.tileType=void 0,a.block=void 0,a.highlight=void 0,a.score=void 0,a.firework=void 0,a.unselectAnimation=void 0,a.selectAnimation=void 0,a.highlightTween=void 0,a.soundTimer=void 0,a.explosiveTimer=void 0,a.hideHighlight=function(){var e;a.highlight||a.drawHighlight(),null==(e=a.highlightTween)||e.remove(),a.highlight.setAlpha(0),a.highlight.setVisible(!1)},a.explosive=function(e,t,n){var i,r;void 0===e&&(e=0),void 0===n&&(n=!0),a.scene&&(null==(i=a.explosiveTimer)||i.remove(),a.explosiveTimer=a.scene.time.addEvent({delay:e,callback:function(){n&&a.eatScoreAnimation(),a.explosiveAnimation(),a.fireworksAnimation()}}),null==(r=a.soundTimer)||r.remove(),a.soundTimer=a.scene.time.addEvent({delay:e-300,callback:function(){a.playSoundByIndex(t)}}))},a.handleOnSelect=function(){a.removeEvents(),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,a.handleOnUnselect),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,a.handleOnUnselect),a.runSelectAnimation()},a.handleOnUnselect=function(){a.runUnselectAnimation()},a.eatScoreAnimation=function(){a.scene&&a.score&&a.runShowScoreAnimation()},a.getExplosiveAnimationKey=function(){return Kh.BLUE_EXPLOSIVE.KEY},a.explosiveAnimation=function(){if(a.block&&a.block.anims){var e=a.getExplosiveAnimationKey();a.block.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){a.hideHighlight(),a.removeTile(),a.block.revive(),a.block.setTexture(Kp.KEY),a.block.setFrame(a.frame),a.block.setDisplaySize(37,37)})),a.block.anims.play(e,!0)}},a.runUnselectAnimation=function(){a.scene&&(a.unselectAnimation||(a.unselectAnimation=new Eh.Z({targets:[(0,Ba.Z)(a)],duration:100,props:{scale:a.scaleUp}})),a.unselectAnimation.play())},a.scene=t,i&&(a.color=i,a.tileType=i),a.scaleUp=a.scale,a.scaleDown=a.scale-.1,a.setDepth(Ma.Z.TILE),n&&(a.frame=n,a.drawBlock(n)),a.scene.add.existing((0,Ba.Z)(a)),a.setState(jp.READY),a}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.block.setVisible(!0),this.setVisible(!0)},n.setRow=function(e){this.row=e},n.setColumn=function(e){this.column=e},n.setEatScore=function(e){var t=this.scene.tileManager.scoreTextGroup.getMatching("visible",!1);t.length<1?this.createScoreText():this.score=t[0],this.eatScore=e,this.score.setAlpha(0),this.score.setVisible(!0),this.score.setText(""+e)},n.removeEvents=function(){this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnUnselect),this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOnUnselect)},n.createInput=function(){this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnSelect),this.block.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnSelect)},n.showHighlight=function(e,t){var n;void 0===e&&(e=-1),void 0===t&&(t=0),this.scene&&(this.scene.boardManager.boardContainer.bringToTop(this),this.highlight||this.drawHighlight(),null!=(n=this.highlightTween)&&n.isPlaying()||this.runHighlightAnimations(e,t))},n.playSoundByIndex=function(e){if(!(e<0)&&Xp[e]){var t=Xp[e]||Xp[Xp.length-1];this.scene.audio.playSound(t)}},n.fireworksAnimation=function(){if(this.scene){var e=this.scene,t=e.levelHandler,n=e.tileManager,i=e.currentScore,a=e.boardManager,r=e.layoutManager;if(!(i<t.targetScore)&&n.isEndBoard){var s=this.x,o=this.y,c=this.color,u=a.boardContainer,l=u.x+s,h=u.y+o,d=r.objects.header.topBar.y+100;this.firework||(this.firework=new Vp(this.scene),this.firework.setColor(c)),this.firework.setVisible(!0),this.firework.fire(l,h,d)}}},n.enableTile=function(){this.revive(),this.setState(Zp.STATUS.READY)},n.removeTile=function(){this.scene&&this.scene.tileManager.removeTile(this)},n.drawBlock=function(e){this.block=this.scene.make.sprite({key:Kp.KEY,frame:e}),this.block.setDisplaySize(37,37),this.add(this.block)},n.drawHighlight=function(){this.highlight=this.scene.add.image(0,0,zp.KEY,zp.FRAME.FX_HIGHLIGHT),this.highlight.setWorldSize(40,40),this.highlight.setVisible(!1),this.add(this.highlight)},n.createScoreText=function(){this.score=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(26),origin:{x:.5,y:.5}}),this.score.setVisible(!1),this.score.setDepth(Ma.Z.TEXT),this.scene.tileManager.scoreTextGroup.add(this.score)},n.runHighlightAnimations=function(e,t){var n,i=this;null==(n=this.highlightTween)||n.remove(),this.scene.tweens.killTweensOf(this.highlight),this.highlightTween=this.scene.tweens.add({targets:this.highlight,duration:130,repeat:e,delay:t,ease:Phaser.Math.Easing.Cubic.InOut,props:{alpha:{from:.3,to:1}},onStart:function(){i.highlight.setAlpha(0),i.highlight.setVisible(!0),i.moveUp(i.highlight)},onComplete:this.hideHighlight})},n.runShowScoreAnimation=function(){var e=this;this.add(this.score),Phaser.Display.Align.In.Center(this.score,this.block);var t=this.score.getWorldPosition(),n=t.x,i=t.y;this.remove(this.score),this.score.setPosition(n,i),this.scene.tweens.killTweensOf(this.score),this.scene.tweens.add({targets:this.score,duration:400,ease:Phaser.Math.Easing.Cubic.InOut,props:{y:"-=3",alpha:{from:0,to:.8}},onComplete:function(){e.scene&&e.runEatScoreAnimation()}})},n.runEatScoreAnimation=function(){var e=this,t=this.scene.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition(),n=t.x,i=t.y;this.scene.tweens.add({targets:this.score,duration:600,ease:Phaser.Math.Easing.Cubic.InOut,props:{x:n,y:i,alpha:{duration:100,delay:370,value:0}},onComplete:function(){var t;e.score.setVisible(!1),null==(t=e.scene)||t.eatScore(e.eatScore),e.removeTile()}})},n.runSelectAnimation=function(){this.scene&&(this.selectAnimation||(this.selectAnimation=new cr.Z({targets:[this],duration:100,yoyo:!0,props:{scale:{start:this.scaleUp,from:this.scaleUp,to:this.scaleDown}}})),this.selectAnimation.play())},n.isReady=function(){return this.state===jp.READY},n.isMoving=function(){return this.state===jp.MOVING},n.isCaptured=function(){return this.state===jp.CAPTURED},t}(Phaser.GameObjects.Container),Jp=qp,Qp=Ga.Z.GAMEPLAY.FRAME,$p=Zp.SPECIALS,ef=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Qp.TILE_FREEZE,$p.FREEZE)||this).getExplosiveAnimationKey=function(){return Kh.FREEZE_EXPLOSIVE.KEY},a.handleStartExplosive=function(){var e=a.scene.boardManager.boardContainer;a.scene.audio.playSound(Ua.Z.GEM_EXPLOSIVE_FREEZE),e.moveTo((0,Ba.Z)(a),e.count("visible",!0)-1)},a.setName("FreezeTile"),a.setRow(n),a.setColumn(i),a.block.removeInteractive(),a.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),a.block.once(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}return(0,o.Z)(t,e),t}(Jp),tf=ef,nf={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}}.STATUS,af=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(nf.READY)},t.start=function(){this.isRunning()||this.setState(nf.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(nf.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===nf.READY},t.isRunning=function(){return this.state===nf.RUNNING},t.isStopped=function(){return this.state===nf.STOPPED},e}(),rf=af,sf=Kh.FREEZE_EXPLOSIVE,of=sf.KEY,cf=sf.TEXTURE,uf=sf.FRAME_RATE,lf=sf.END,hf=sf.PREFIX,df=sf.ZERO_PAD,pf=function(e){function t(t){var n={repeat:0,frameRate:uf,frames:t.generateFrameNames(cf,{prefix:hf,end:lf,zeroPad:df}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,of,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),ff=pf,mf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.moveDuration=250,n.moveRowsTween=void 0,n.moveColumnsTween=void 0,n.scene=t,n.createAnimations(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimations=function(){var e=Kh.COLORFUL,t=Kh.COLOR_CHANGE,n=Kh.RED_EXPLOSIVE,i=Kh.BLUE_EXPLOSIVE,a=Kh.PINK_EXPLOSIVE,r=Kh.GREEN_EXPLOSIVE,s=Kh.YELLOW_EXPLOSIVE,o=Kh.FREEZE_EXPLOSIVE,c=Kh.COLORFUL_EXPLOSIVE,u=Kh.PAINT_EXPLOSIVE,l=new Ap(this.scene.anims),h=new lp(this.scene.anims),d=new ff(this.scene.anims),p=new ld(this.scene.anims),f=new Kd(this.scene.anims),m=new td(this.scene.anims),g=new Bd(this.scene.anims),v=new Ad(this.scene.anims),E=new tp(this.scene.anims),A=new Rd(this.scene.anims);this.scene.anims.add(e.KEY,l),this.scene.anims.add(t.KEY,h),this.scene.anims.add(o.KEY,d),this.scene.anims.add(c.KEY,p),this.scene.anims.add(n.KEY,f),this.scene.anims.add(i.KEY,m),this.scene.anims.add(a.KEY,g),this.scene.anims.add(r.KEY,v),this.scene.anims.add(s.KEY,E),this.scene.anims.add(u.KEY,A)},n.moveEase=function(e){var t=1.70158;return 2.70158*e*e*e-t*e*e},n.startBoard=function(e){var t=this,n=[],i=600,a=i/e.length;return e.forEach((function(e){var t=e.x,i=e.y,a=e.scale;n.push({x:t,y:i,scale:a}),e.setX(-50),e.setY(-900),e.setAlpha(0),e.setScale(0)})),this.scene.time.addEvent({repeat:10,delay:60,callback:function(){t.scene.audio.playSound(Ua.Z.GEM_FALLING)}}),this.scene.tweens.add({targets:e,duration:i,props:{y:{value:{getEnd:function(e,t,i,a){return n[a].y}},duration:550},x:{value:{getEnd:function(e,t,i,a){return n[a].x}},duration:480},scale:{value:{getEnd:function(e,t,i,a){return n[a].scale}},delay:0},alpha:{value:1,duration:500}},delay:function(e,t,n,i){var r=Phaser.Math.RND.between(0,a*i/2);return a*i-r}})},n.endBoard=function(e){var t=this,n=e.length,i=this.scene,a=i.levelHandler,r=i.currentScore>=a.targetScore;e.forEach((function(e,t){var n=250*t+400,i=r?-1:1;t>=10?(n=100*t+2e3,e.explosive(n,i,!1)):e.explosive(n,i,!1),e.showHighlight(0,n-400)}));var s=10;return this.scene.tweens.addCounter({repeat:n+1,duration:250,onRepeat:function(e){s<0?e.setTimeScale(1.6):(t.scene.runBonusScoreAnimation(200*s),s--)}})},n.capturing=function(e,t,n){return e.forEach((function(e,i){var a=100*i,r=n?i:-1;e.explosive(a+t,r),e instanceof tf||e.showHighlight(0,a)})),this.scene.time.addEvent({delay:100*e.length+t+150})},n.moveRows=function(e,t){var n;void 0===t&&(t=0);var i=e.tile,a=e.fromRow,r=e.toRow;if(a&&r){var s=r*Zp.SIZE-a*Zp.SIZE;null!=(n=this.moveRowsTween)&&n.isPlaying()&&this.moveRowsTween.stop(),this.moveRowsTween=this.scene.tweens.add({targets:i,props:{y:{value:i.y+s,delay:t,duration:this.moveDuration,ease:this.moveEase}}})}},n.moveColumns=function(e,t){var n;void 0===t&&(t=0);var i=e.tile,a=e.fromColumn,r=e.toColumn;if(a&&r){var s=r*Zp.SIZE-a*Zp.SIZE;null!=(n=this.moveColumnsTween)&&n.isPlaying()&&this.moveColumnsTween.stop(),this.moveColumnsTween=this.scene.tweens.add({targets:i,props:{x:{value:i.x+s,delay:t,duration:this.moveDuration,ease:this.moveEase}}})}},t}(rf),gf=mf,vf={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Ef=vf.STATUS,Af=Zp.SETS,yf=Af.SET_3,Sf=Af.SET_4,Tf=Af.SET_5,If=Af.SET_6,bf=Af.SET_7,Cf=Af.SET_8,wf=Af.SET_9,Of=GameCore.Configs.Match,Rf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tileMap={},n.boardMap={},n.boardContainer=void 0,n.scene=t,n.boardContainer=n.scene.make.container({}),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.clearBoard(),this.setState(Ef.READY)},n.start=function(){this.isRunning()||(this.loadSavedBoard(),this.generateBoard(),this.setState(Ef.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(Ef.STOPPED)},n.loadSavedBoard=function(){if(this.scene.gameplayMode===ha&&Of.ContinueSingleMatchEnabled){var e=this.scene.storage.getState(),t=Ls(e);t&&this.loadBoardByFen(t)}},n.loadBoardByFen=function(e){var t=this.scene.tileManager;for(var n in this.tileMap=GameCore.Utils.Hash.decodeMap(e,Zp.HASH),this.tileMap){var i=this.tileMap[n];if(GameCore.Utils.Valid.isObject(i))for(var a in i){var r=i[a],s=t.createTileByType(r,+n,+a);this.setTileToMap(s,+n,+a)}}},n.clearBoard=function(){this.tileMap={},this.boardMap={},this.boardContainer.removeAll()},n.generateBoard=function(){this.generateTiles(),this.placeBoard(),this.alignBoard()},n.generateTiles=function(){var e,t=this.scene,n=t.tileManager,i=t.levelHandler.getConfigs(),a=i.rows,r=i.columns,s=i.colors,o=i.specials,c=i.sets,u=a*r;if(!(Q()(this.boardMap).length>0)){var l=Q()(c),h=Q()(o),d=E()(e=[]).call(e,s,h),p=[],f={};l.forEach((function(e){for(var t=c[e]||0,n=0;n<t;n++)p.push(e)})),GameCore.Utils.Array.shuffle(p),h.forEach((function(e){f[e]=o[e]}));for(var m=0,g="red",v=0;v<u;v++){var A=this.getPositionByIndex(v),y=A.row,S=A.column;if(!this.boardMap[y]||!this.boardMap[y][S]){var T=this.getRandomTileId(d,[g]),I=f[T]||0;if(I>0&&!(1===y||y===a)&&!(1===S||S===r)){var b=n.createTileByType(T,y,S);this.setTileToMap(b,y,S),f[T]=I-1,g=T}else{T=this.getRandomTileId(s,[g]);var C=[];if(this.findSameColor(y,S,C,T),Phaser.Math.RND.between(0,100)>60){_t()(C).call(C,T)>=0&&(T=this.getRandomTileId(s,C)),g=T;var w=p[m],O=this.getSetCount(w);if(O>0)if(this.createTilesBySet(v,O,T)){m++;continue}}g=T;var R=n.createTileByType(T,y,S);this.setTileToMap(R,y,S)}}}}},n.getSetCount=function(e){switch(e){case yf:return 3;case Sf:return 4;case Tf:return 5;case If:return 6;case bf:return 7;case Cf:return 8;case wf:return 9;default:return 0}},n.getRandomTileId=function(e,t){var n=GameCore.Utils.Array.difference(e,t),i=n.length-1;return n[Phaser.Math.RND.between(0,i)]},n.createTilesBySet=function(e,t,n){var i=this,a=this.scene.tileManager,r=[],s=this.getPositionByIndex(e),o=s.row,c=s.column;return this.findEmptySlot(o,c,r,t),!(r.length<t)&&(r.forEach((function(e){var t=e.row,r=e.column,s=a.createTileByType(n,t,r);i.setTileToMap(s,t,r)})),!0)},n.findSameColor=function(e,t,n,i,a,r){if(void 0===a&&(a=2),void 0===r&&(r=!1),!(a<1)){var s=this.scene.levelHandler.getConfigs(),o=s.rows,c=s.columns;if(!(e<1||t<1)&&!(e>o||t>c)){if(r){if(!(e in this.boardMap))return;if(!(t in this.boardMap[e]))return;var u=this.boardMap[e][t];n.push(u.color)}this.findSameColor(e,t-1,n,i,a-1,!0),this.findSameColor(e-1,t,n,i,a-1,!0),this.findSameColor(e-1,t+1,n,i,a-1,!0)}}},n.findEmptySlot=function(e,t,n,i){if(!(n.length>=i)){var a=this.scene.levelHandler.getConfigs(),r=a.rows,s=a.columns;if(!(e<1||t<1))if(!(e>r||t>s))if(!(e in this.boardMap)||!(t in this.boardMap[e]))n.push({row:e,column:t}),Phaser.Math.RND.between(0,100)>=40?this.findEmptySlot(e,t+1,n,i):this.findEmptySlot(e+1,t,n,i)}},n.getTilesByMap=function(){var e=[];for(var t in this.boardMap){var n=this.boardMap[t];for(var i in n){var a=this.boardMap[t][i];e.push(a)}}return e},n.placeBoard=function(){var e=this.scene.levelHandler.getConfigs(),t=e.rows,n=e.columns,i=this.getTilesByMap();Phaser.Actions.GridAlign(i,{width:n,height:t,cellWidth:Zp.SIZE,cellHeight:Zp.SIZE,x:-n*Zp.SIZE/2,y:-t*Zp.SIZE})},n.alignBoard=function(){var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.boardContainer,this.scene.gameZone,Zp.SIZE,20-e)},n.getPositionByIndex=function(e){var t=this.scene.levelHandler.getConfigs().columns;return{row:Math.floor(e/t)+1,column:e%t+1}},n.getTileByIndex=function(e){var t=this.getPositionByIndex(e),n=t.row,i=t.column;return this.boardMap[n][i]},n.setTileToMap=function(e,t,n){var i=this.scene.tileManager;this.tileMap[t]||(this.tileMap[t]={}),this.boardMap[t]||(this.boardMap[t]={}),e.setRow(t),e.setColumn(n),this.tileMap[t][n]=e.color;var a=this.boardMap[t][n];a&&i.removeTile(a),this.boardMap[t][n]=e,this.boardContainer.add(e),i.addTile(e)},n.tileSwap=function(e){var t=e.fromRow,n=e.toRow,i=e.fromColumn,a=e.toColumn,r=this.boardMap[n][a],s=this.boardMap[t][i];r.setRow(t),r.setColumn(i),s.setRow(n),s.setColumn(a),this.boardMap[n][a]=s,this.boardMap[t][i]=r,this.tileMap[n][a]=s.color,this.tileMap[t][i]=r.color},t}(rf),Pf=Rf,_f={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},xf=n(610),kf=Ga.Z.GAMEPLAY,Df=kf.KEY,Lf=kf.FRAME,Mf=function(){function e(e){this.scene=void 0,this.fadeInAnimation=void 0,this.rotateAnimation=void 0,this.hammer=void 0,this.onCompleted=void 0,this.scene=e}var t=e.prototype;return t.runAnimation=function(e,t){var n;this.addToAScene(),this.hammer.revive(),this.hammer.setAlpha(1),this.hammer.setPosition(e+35,t),this.runFadeInAnimation(),this.runRotateAnimation(),"function"===typeof this.onCompleted&&(null==(n=this.rotateAnimation)||n.next(this.onCompleted))},t.addToAScene=function(){var e=this.scene.boardManager.boardContainer;this.createHammer(),e.exists(this.hammer)||e.add(this.hammer);var t=e.count("visible",!0);e.moveTo(this.hammer,t)},t.createHammer=function(){if(!this.scene.children.exists(this.hammer)){this.hammer=this.scene.add.image(0,0,Df,Lf.ITEM_HAMMER),this.hammer.setFlipX(!0),this.hammer.setAngle(50),this.hammer.setOrigin(1,1),this.hammer.setWorldSize(29.5,37.5);var e=1/this.scene.world.getPixelRatio();this.hammer.setScale(1.2*e),this.hammer.setDepth(Ma.Z.ITEM),this.hammer.kill()}},t.runFadeInAnimation=function(){var e,t;this.hammer.setVisible(!0),null==(e=this.fadeInAnimation)||e.remove(),this.fadeInAnimation=new ur.Z({targets:[this.hammer]}),null==(t=this.fadeInAnimation)||t.play()},t.runRotateAnimation=function(){var e,t,n=this;null==(e=this.rotateAnimation)||e.remove(),this.rotateAnimation=new xf.Z({targets:[this.hammer],ease:Phaser.Math.Easing.Back.In,duration:500,props:{angle:-20},onComplete:function(){n.hammer.kill()}}),null==(t=this.rotateAnimation)||t.play()},e}(),Nf=Mf,Bf={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},Gf=function(e){function t(t){return e.call(this,Bf,t)||this}return(0,o.Z)(t,e),t}($a.Z),Uf=GameCore.Configs.Gameplay,Zf=Ga.Z.GAMEPLAY,Ff=Zf.KEY,Yf=Zf.FRAME,Hf=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t)||this).scene=void 0,r.isActive=!0,r.value=void 0,r.autoRunUpAnimation=!0,r.item=void 0,r.bg=void 0,r.bar=void 0,r.icon=void 0,r.diamond=void 0,r.showItemAnimation=void 0,r.bubbleAnimation=void 0,r.shakeAnimation=void 0,r.scene=t,r.createBg(),r.createItem(n,i,a),r.createBar(),r.createIcon(),r.createDiamond(),r.createAnimations(),r.setDepth(Ma.Z.ITEM),r.scene.add.existing((0,Ba.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){this.isActive=!0,this.showItemAnimation.play(),this.bg.setVisible(!1),this.bar.setVisible(!1),this.icon.setVisible(!1),this.diamond.setVisible(!1)},n.deactivateItem=function(){this.isActive=!1,this.bg.setVisible(!0),this.bar.setVisible(!Uf.FreeItems),this.icon.setVisible(!Uf.FreeItems),this.diamond.setVisible(!Uf.FreeItems)},n.createBg=function(){var e=Ga.Z.GAMEPLAY,t=e.KEY,n=e.FRAME;this.bg=this.scene.add.image(0,0,t,n.ITEM_BG_ITEM),this.bg.setWorldSize(50,50),this.add(this.bg)},n.createItem=function(e,t,n){this.item=this.scene.add.image(0,0,Ff,e),this.item.setWorldSize(t,n),Phaser.Display.Align.In.Center(this.item,this.bg),this.add(this.item)},n.createBar=function(){this.bar=this.scene.add.image(0,0,Ff,Yf.ITEM_BG_COIN),this.bar.setWorldSize(47,17),Phaser.Display.Align.In.BottomCenter(this.bar,this.bg,0,15),this.add(this.bar)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,Ff,Yf.ICON_DIAMOND_SMALL),this.icon.setWorldSize(10,10),Phaser.Display.Align.In.RightCenter(this.icon,this.bar,-4),this.add(this.icon)},n.createDiamond=function(){this.diamond=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.setDiamond(0),this.add(this.diamond)},n.setDiamond=function(e){this.value=e,this.diamond.setText("-"+e),this.icon.setVisible(!0);var t=this.icon.width+6;Phaser.Display.Align.In.RightCenter(this.diamond,this.bar,-t)},n.createAnimations=function(){var e=1/this.scene.world.getPixelRatio();this.showItemAnimation=new Gf({targets:[this.item],props:{scale:{duration:1e3,value:{start:.8*e,from:.8*e,to:e},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.bubbleAnimation=new sr({targets:[this.item],props:{scale:{from:e,to:1.2*e}}}),this.shakeAnimation=new or.Z({targets:[this.diamond],repeat:3,props:{x:4}})},(0,Z.Z)(t,[{key:"onClick",set:function(e){var t=this.bg,n=t.width,i=t.height,a=this.item.height;this.setSize(n,i+a),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e)}}]),t}(Phaser.GameObjects.Container),Wf=Hf,Vf="FirstMove",Kf="TargetScore",zf="CurrentScore",jf="ColorfulGem",Xf="ItemPaint",qf="ItemHammer",Jf="ItemShuffle",Qf="tut-start",$f="tut-setup-completed",em="tut-gems-eat",tm="tut-gems-dropped",nm=_f.HAMMER.ID,im=Ga.Z.GAMEPLAY.FRAME,am=function(e){function t(t){var n;return(n=e.call(this,t,im.ITEM_HAMMER,29.5,37.5)||this).scene=void 0,n.isRunning=!1,n.hammerAnimation=void 0,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene,t=e.itemManager,i=e.tutorialManager,a=e.tileManager;if(n.isActive){if(i.tutorialId===qf)return;t.deactivateItem(nm)}else{if(!t.activeItem(nm))return n.scene.audio.playSound(Ua.Z.MOVE_WRONG),void n.shakeAnimation.play();a.removeSuggestionsTiles()}}},n.hitTile=function(e){return function(){var t=n.scene,i=t.tileManager,a=t.itemManager;i.isSelectable=!0,i.tilesCapturing([e],!1,0,300),i.isSelectable=!1,n.scene.audio.playSound(Ua.Z.USE_HAMMER),n.scene.time.addEvent({delay:1e3,callback:function(){n.isRunning=!1,a.deactivateItem(nm),i.isSelectable=!0,i.suggestionsEatableTiles()}})}},n.scene=t,n.setDiamond(45),n.createAnimations(),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){e.prototype.activeItem.call(this),this.bubbleAnimation.play(),this.scene.audio.pauseMusic()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.bubbleAnimation.stop(),this.scene.audio.playMusic()},n.createAnimations=function(){e.prototype.createAnimations.call(this),this.hammerAnimation=new Nf(this.scene)},n.useItem=function(e){if(this.scene.audio.stopSound(Ua.Z.ITEM_ACTIVE_AMBIENCE),!this.isActive||this.isRunning)return!1;this.isRunning=!0;var t=this.scene,n=t.tileManager,i=t.boardManager.boardContainer;n.isSelectable=!1;var a=e.x,r=e.y,s=i.count("visible",!0);return i.moveTo(e,s-1),this.hammerAnimation.onCompleted=this.hitTile(e),this.hammerAnimation.runAnimation(a,r),!0},t}(Wf),rm=am,sm=Ga.Z.GAMEPLAY.KEY,om=function(){function e(e){this.scene=void 0,this.paint=void 0,this.scene=e}var t=e.prototype;return t.runAnimation=function(e,t){return this.addToAScene(),this.paint.revive(),this.paint.setPosition(e,t),this.paint.anims.play(Kh.PAINT_EXPLOSIVE.KEY),this.paint.setWorldSize(134,133),this.scene.audio.playSound(Ua.Z.USE_PAINT),this.paint},t.addToAScene=function(){var e=this.scene.boardManager.boardContainer;if(e.exists(this.paint)){var t=e.count("visible",!0);e.moveTo(this.paint,t)}else this.createPaint(),e.add(this.paint)},t.createPaint=function(){var e;null==(e=this.paint)||e.destroy(),this.paint=this.scene.add.sprite(0,0,sm),this.paint.kill(),this.paint.setDepth(Ma.Z.ITEM)},e}(),cm=om,um=_f.PAINT.ID,lm=Ga.Z.GAMEPLAY.FRAME,hm=function(e){function t(t){var n;return(n=e.call(this,t,lm.ITEM_PAINT,31.5,33)||this).scene=void 0,n.isRunning=void 0,n.paintAnimation=void 0,n.maxRowsAround=1,n.maxColumnsAround=1,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene,t=e.itemManager,i=e.tutorialManager,a=e.tileManager;if(n.isActive){if(i.tutorialId===Xf)return;t.deactivateItem(um)}else{if(!t.activeItem(um))return n.scene.audio.playSound(Ua.Z.MOVE_WRONG),void n.shakeAnimation.play();a.removeSuggestionsTiles()}}},n.scene=t,n.isRunning=!1,n.setDiamond(100),n.createAnimations(),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){e.prototype.activeItem.call(this),this.bubbleAnimation.play(),this.scene.audio.pauseMusic()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.bubbleAnimation.stop(),this.scene.audio.playMusic()},n.createAnimations=function(){e.prototype.createAnimations.call(this),this.paintAnimation=new cm(this.scene)},n.useItem=function(e){var t=this;if(this.scene.audio.stopSound(Ua.Z.ITEM_ACTIVE_AMBIENCE),!this.isActive||this.isRunning)return!1;this.isRunning=!0;var n=this.scene,i=n.tileManager,a=n.itemManager;i.isSelectable=!1;var r=i.getTilesAround(e,this.maxRowsAround,this.maxColumnsAround),s=e.x,o=e.y,c=e.tileType;return this.paintAnimation.runAnimation(s,o).once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.tilesChangeColor(c,r),a.deactivateItem(um),i.isSelectable=!0,i.suggestionsEatableTiles(),t.isRunning=!1})),!0},t}(Wf),dm=hm,pm={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,r.Z)({},Zp.COLORS,Zp.SPECIALS,{PAINT:_f.PAINT.ID,HAMMER:_f.HAMMER.ID,SHUFFLE:_f.SHUFFLE.ID})},fm=vf.STATUS,mm=GameCore.Configs.Gameplay,gm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.itemTitle=void 0,n.itemDescription=void 0,n.items={},n.itemActive="",n.currentHideableObjects=[],n.itemUI=void 0,n.scene=t,n.itemUI=n.scene.add.group(),n.createItems(),n.createItemTitle(),n.createItemDescription(),n.currentHideableObjects=[],n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){for(var e in this.items)this.deactivateItem(e);this.setState(fm.READY)},n.activeItem=function(e){if(!this.isRunning())return!1;var t=this.scene,n=t.tileManager,i=t.tutorialManager;if(!this.items[e])return!1;if(this.itemActive&&this.itemActive!==e)return!1;if(this.scene.currentDiamond<this.items[e].value&&!mm.FreeItems)return!1;var a=i.tutorialId===e;if(!n.isUseableItem&&!a)return!1;for(var r in this.items)this.deactivateItem(r,!1);return this.itemActive=e,this.items[e].activeItem(),this.showMask(),!0},n.deactivateItem=function(e,t){void 0===t&&(t=!0),this.items[e]&&(this.itemActive="",this.items[e].deactivateItem(),this.scene.audio.stopSound(Ua.Z.ITEM_ACTIVE_AMBIENCE),this.scene.updateMove(),t&&this.hideMask())},n.getActiveItem=function(){if(this.isRunning()&&this.items[this.itemActive])return this.items[this.itemActive]},n.showMask=function(){var e,t=this;if(-1!==_t()(e=[_f.HAMMER.ID,_f.PAINT.ID]).call(e,this.itemActive)){switch(this.scene.tweens.killTweensOf(this.currentHideableObjects),this.scene.tweens.killTweensOf([this.itemTitle,this.itemDescription,this.scene.background]),this.itemUI.killGroup(),this.itemActive){case _f.HAMMER.ID:this.items[_f.HAMMER.ID].setVisible(!0),this.scene.audio.playSound(Ua.Z.ITEM_ACTIVE_AMBIENCE,{volume:.4,loop:!0});break;case _f.PAINT.ID:this.items[_f.PAINT.ID].setVisible(!0),this.scene.audio.playSound(Ua.Z.ITEM_ACTIVE_AMBIENCE,{volume:.4,loop:!0})}switch(this.currentHideableObjects=this.itemUI.getMatching("visible",!1),this.currentHideableObjects.forEach((function(e){e.setVisible(!0)})),this.scene.add.tween({targets:this.currentHideableObjects,duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:0},onComplete:function(){t.currentHideableObjects.forEach((function(e){e.setVisible(!1)}))}}),this.scene.add.tween({targets:[this.scene.background],duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:.2}}),this.itemTitle.setVisible(!0),this.itemDescription.setVisible(!0),this.itemActive){case _f.HAMMER.ID:this.itemTitle.setText(this.scene.lang.Text.HAMMER),this.itemDescription.setFontSize(this.scene.fontSize(28)),this.itemDescription.setText(this.scene.lang.Text.USE_HAMMER);break;case _f.PAINT.ID:"ja"===this.scene.lang.getCurrentLanguage()?this.itemDescription.setFontSize(this.scene.fontSize(28)):this.itemDescription.setFontSize(this.scene.fontSize(25)),this.itemTitle.setText(this.scene.lang.Text.MAGIC_BOTTLE),this.itemDescription.setText(this.scene.lang.Text.USE_MAGIC)}this.itemTitle.setAlpha(0),this.itemDescription.setAlpha(0),this.scene.add.tween({targets:[this.itemTitle,this.itemDescription],duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:1}})}},n.hideMask=function(){var e,t=this;this.scene.tweens.killTweensOf(this.currentHideableObjects),this.scene.tweens.killTweensOf([this.itemTitle,this.itemDescription,this.scene.background]),this.scene.add.tween({targets:[this.itemTitle,this.itemDescription],duration:400,ease:Phaser.Math.Easing.Quadratic.In,props:{alpha:0},onComplete:function(){t.itemTitle.setVisible(!1),t.itemDescription.setVisible(!1),t.itemTitle.setText(""),t.itemDescription.setText("")}}),this.itemUI.reviveGroup(),this.scene.add.tween({targets:E()(e=[this.scene.background]).call(e,this.currentHideableObjects),duration:400,ease:Phaser.Math.Easing.Quadratic.In,props:{alpha:1}})},n.applyItem=function(e){if(!this.isRunning())return!1;var t=this.getActiveItem();if(!t)return!1;var n=!1;switch(this.itemActive){case _f.HAMMER.ID:if(e instanceof tf)return!1;t instanceof rm&&(n=t.useItem(e));break;case _f.PAINT.ID:if(e instanceof tf)return!1;t instanceof dm&&(n=t.useItem(e));break;default:return!1}if(n){var i,a=this.scene.tutorialManager.tutorialId,r=qf,s=Xf,o=Jf;a&&-1!==_t()(i=[r,s,o]).call(i,a)||this.scene.useDiamond(t.value),this.scene.missionsManager.updateMission(pm.TYPES.USE_ITEM,this.itemActive,1)}return n},n.createItemTitle=function(){var e=this.scene.lang.getCurrentLanguage();this.itemTitle=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(35),text:"Title",origin:{x:.5,y:.5},visible:!1}),this.itemTitle.setTint(16705563);var t=-95;"id"===e&&(t=-80),Phaser.Display.Align.In.TopCenter(this.itemTitle,this.scene.gameZone,0,t)},n.createItemDescription=function(){var e=this.scene.lang.getCurrentLanguage();this.itemDescription=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(28),text:"Description",origin:{x:.5,y:.5},visible:!1}),this.itemDescription.setMaxWidth(250),this.itemDescription.setCenterAlign();var t=-180;"id"===e&&(t=-165),Phaser.Display.Align.In.TopCenter(this.itemDescription,this.scene.gameZone,0,t)},n.createItems=function(){var e=this.scene.layoutManager.objects;this.items[_f.GIFT.ID]=e.giftItem,this.items[_f.PAINT.ID]=e.paintItem,this.items[_f.HAMMER.ID]=e.hammerItem,this.items[_f.SHUFFLE.ID]=e.shuffleItem,this.itemUI.addMultiple([e.giftItem,e.paintItem,e.hammerItem,e.shuffleItem])},t}(rf),vm=gm,Em={NORMAL:"normal",FALL_DOWN:"fall-down",FLY_UP:"fly-up",PUSH_LEFT:"push-left",PUSH_RIGHT:"push-right",PUT_ROWS_MIDDLE:"put-rows-middle",PUT_COLUMNS_MIDDLE:"put-columns-middle",FLY_UP_PUSH_LEFT:"fly-up-push-left",FLY_UP_PUSH_RIGHT:"fly-up-push-right",FALL_DOWN_PUSH_LEFT:"fall-down-push-left",FALL_DOWN_PUSH_RIGHT:"fall-down-push-right",FLY_UP_PUT_COLUMNS_MIDDLE:"fly-up-put-columns-middle",FALL_DOWN_PUT_COLUMNS_MIDDLE:"fall-down-put-columns-middle"},Am=Zp.SETS,ym=Am.SET_3,Sm=Am.SET_4,Tm=Am.SET_5,Im=Am.SET_6,bm=Am.SET_7,Cm=Am.SET_8,wm=Am.SET_9,Om=Zp.COLORS,Rm=Om.RED,Pm=Om.BLUE,_m=Om.PINK,xm=Om.GREEN,km=Om.YELLOW,Dm=Zp.SPECIALS,Lm=Dm.FREEZE,Mm=Dm.COLORFUL,Nm=Dm.COLOR_CHANGE,Bm=E()(xh=[{mode:Em.NORMAL,colors:[Rm,Pm,_m,xm,km],specials:(kh={},kh[Lm]=1,kh[Mm]=1,kh[Nm]=1,kh),sets:(Dh={},Dh[ym]=1,Dh[Sm]=1,Dh[Tm]=1,Dh[Im]=1,Dh[bm]=1,Dh[Cm]=1,Dh[wm]=1,Dh),rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:0}]).call(xh,[{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{},sets:{set_3:10,set_5:2,set_7:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:1200},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{colorful:2},sets:{set_3:8,set_4:4,set_5:2,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:3e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{colorful:2,freeze:2},sets:{set_3:8,set_4:7,set_5:2},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:5e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:2,color_change:2},sets:{set_3:9,set_4:5,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:7500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:1,color_change:2},sets:{set_3:6,set_4:4,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:1e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:1,color_change:2},sets:{set_3:6,set_4:3,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:12500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:3,color_change:5},sets:{set_3:6,set_4:3,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:15e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:1,color_change:1},sets:{set_3:8,set_4:2,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:18e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:1,colorful:3,color_change:2},sets:{set_3:8,set_4:1,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:2e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:1,colorful:2,color_change:4},sets:{set_3:7,set_4:1,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:22e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:2,color_change:3},sets:{set_3:6,set_4:1,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:25e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:1,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:27500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:6,color_change:5},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:3e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:6,colorful:1,color_change:3},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:33e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:3,color_change:4},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:36e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:3,color_change:5},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:38500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:7,color_change:7},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:41e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:4,color_change:8},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:44e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:5,color_change:4},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:46500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:3,color_change:7},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:5e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:7,colorful:4,color_change:4},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:52500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:5,color_change:4},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:55e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:8,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:58e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:6,colorful:5,color_change:8},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:61e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:7,colorful:5,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:63500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:7,color_change:7},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:66500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:7,color_change:1},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:69e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:10,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:72e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:10,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:75e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:11,colorful:4,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:78e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:11,colorful:4,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:80500}]),Gm=GameCore.Configs.Gameplay,Um=function(){function e(e){this.scene=void 0,this.level=0,this.targetScore=0,this.gameLevel=void 0,this.levelConfig=void 0,this.scene=e,this.gameLevel=Bm}var t=e.prototype;return t.init=function(){this.level=Gm.StartLevel,this.setConfig(this.level)},t.getConfigs=function(){return this.levelConfig},t.getConfigByLevel=function(e){return this.gameLevel[e]||null},t.up=function(e){if(e<this.targetScore)return!1;var t=this.canLevelUp(this.level),n=t>=Bm.length-1;return t===this.level?!!n&&(this.level+=1,this.setConfig(this.level),!0):(this.level=t,this.setConfig(t),!0)},t.canLevelUp=function(e){var t=e+1;return!!this.gameLevel[t]?t:e},t.calcByDifficult=function(e,t){var n=1,i=Gm.LevelDifficultRate;return e<=30?n=i.FromUnder30:e<=35?n=i.FromUnder35:e<=45?n=i.FromUnder45:e>45&&(n=i.FromUnder200),100*Math.round(t*n/100)},t.setConfig=function(e){var t=Bm.length-1,n=e>t,i=n?t:e;this.levelConfig=this.gameLevel[i];var a=this.levelConfig.targetScore,r=void 0===a?0:a,s=this.scene.currentScore,o=(s>r?s:r)+2e3;this.targetScore=this.calcByDifficult(i,n?o:r),this.scene.setTargetScore(this.targetScore)},e}(),Zm=Um,Fm=(0,W.P1)([function(e){var t;return null==(t=e[mi])?void 0:t.mission}],(function(e){return e})),Ym=(0,W.P1)([function(e){var t;return null==(t=e[mi])?void 0:t.missions}],(function(e){return e})),Hm=(0,W.P1)([function(e){var t;return null==(t=e[mi])?void 0:t.isRequesting}],(function(e){return e})),Wm=vf.STATUS,Vm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.timer=void 0,n.requireData=void 0,n.missionIds=void 0,n.startMission=function(e){var t=n.getRandomMissionId(e);return!!t&&(n.scene.storage.dispatch({type:Ei,payload:{name:t}}),Tc.emit(pm.EVENTS.MISSION_START,t),!0)},n.updateMission=function(e,t,i){n.isRunning()&&(Tc.emit(pm.EVENTS.MISSION_UPDATE,{id:e,type:t,value:i}),n.updateMissionBlock())},n.missionFailed=function(e){var t;null==(t=n.timer)||t.remove(),n.nextMission(e)},n.missionCompleted=function(e){var t;if(null==(t=n.timer)||t.stop(),n.isRunning()){var i=e.name,a=e.reward;if(GameCore.Utils.Valid.isString(i)&&GameCore.Utils.Valid.isNumber(a)){var r=n.getMissionBlock();n.updateMissionBlock(),n.scene.audio.playSound(Ua.Z.MISSION_COMPLETED),r.runRewardAnimation(a),Tc.emit(Pr.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:a}),n.nextMission(i)}}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setupData()&&(this.listenEvents(),this.setState(Wm.READY))},n.setupData=function(){var e=this,t=this.scene.storage.getState(),n=Ym(t);return!!n&&(this.missionIds=[],this.requireData={},Q()(n).forEach((function(t){e.missionIds.push(t);var i=n[t].require;Q()(i).forEach((function(n){var i;e.requireData[n]?_t()(i=e.requireData[n]).call(i,t)>=0||e.requireData[n].push(t):e.requireData[n]=[t]}))})),!0)},n.listenEvents=function(){Tc.off(pm.EVENTS.MISSION_FAILED,this.missionFailed),Tc.off(pm.EVENTS.MISSION_COMPLETED,this.missionCompleted),Tc.on(pm.EVENTS.MISSION_FAILED,this.missionFailed),Tc.on(pm.EVENTS.MISSION_COMPLETED,this.missionCompleted)},n.start=function(){this.isReady()&&(this.isRunning()||(this.startMission()?(this.updateMissionBlock(),this.startCountdown(),this.setState(Wm.RUNNING)):this.getMissionBlock().showRequesting(!0)))},n.stop=function(){this.isRunning()&&this.setState(Wm.STOPPED)},n.getMissionBlock=function(){return this.scene.layoutManager.objects.header.topBar.missionBlock},n.startCountdown=function(){var e,t=this,n=Phaser.Math.RND.between(20,40);null==(e=this.timer)||e.stop();var i=0,a=this.getMissionBlock();this.timer=this.scene.tweens.addCounter({duration:1e3,repeat:n,onRepeat:function(){i++,n-i===2&&a.runTimeOutAnimation()},onComplete:function(){var e=t.scene.storage.getState(),n=Fm(e);Tc.emit(pm.EVENTS.MISSION_FAILED,null==n?void 0:n.name)}})},n.updateMissionBlock=function(){var e=this.scene.storage.getState(),t=Fm(e);t&&this.getMissionBlock().updateInfo(t)},n.getRandomMissionId=function(e){var t,n,i=this.scene.levelHandler.getConfigs(),a=i.colors,r=i.specials,s=me()(t=Q()(r)).call(t,(function(e){return e})),o=E()(n=[]).call(n,a,s),c=Phaser.Math.RND.between(0,this.missionIds.length-1),u=Phaser.Math.RND.between(0,o.length-1),l=o[u];if(!l)return this.missionIds[c];var h=this.requireData[l]||[];return h.length<1?this.missionIds[c]:(e&&(h=pe()(h).call(h,(function(t){return t!==e}))||[]),h.length<1?this.missionIds[c]:h[u])},n.nextMission=function(e){var t=this;this.scene.time.delayedCall(1200,(function(){var n=t.startMission(e);(t.startCountdown(),n)?t.updateMissionBlock():t.getMissionBlock().showRequesting(!0)}))},t}(rf),Km=Vm,zm=n(174),jm=n.n(zm),Xm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.applyMode=function(){var e=n.scene.levelHandler.getConfigs().mode,t=n.scene.animationManager.moveDuration-50;switch(n.scene.time.delayedCall(t-150,(function(){n.scene.audio.playSound(Ua.Z.GEM_DROP,{volume:.5})})),e){case Em.NORMAL:break;case Em.FALL_DOWN:n.tilesFallDown(0);break;case Em.FLY_UP:n.tilesFlyUp(0);break;case Em.PUSH_LEFT:n.tilesPushLeft(0);break;case Em.PUSH_RIGHT:n.tilesPushRight(0);break;case Em.FALL_DOWN_PUSH_LEFT:n.tilesFallDown(0),n.tilesPushLeft(t);break;case Em.FLY_UP_PUSH_RIGHT:n.tilesFlyUp(0),n.tilesPushRight(t);break;case Em.FALL_DOWN_PUSH_RIGHT:n.tilesFallDown(0),n.tilesPushRight(t);break;case Em.FLY_UP_PUSH_LEFT:n.tilesFlyUp(0),n.tilesPushLeft(t);break;case Em.PUT_COLUMNS_MIDDLE:n.tilesPutColumnsMiddle(0);break;case Em.PUT_ROWS_MIDDLE:n.tilesPutRowsMiddle(0);break;case Em.FALL_DOWN_PUT_COLUMNS_MIDDLE:n.tilesFallDown(0),n.tilesPutColumnsMiddle(t);break;case Em.FLY_UP_PUT_COLUMNS_MIDDLE:n.tilesFlyUp(0),n.tilesPutColumnsMiddle(t)}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.getTiles=function(){var e=this.scene.boardManager.boardMap,t=[];for(var n in e)for(var i in e[n]){var a=e[n][i];t.push(a)}return t},n.tilesFlyUp=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager;this.getTiles().forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesAbove(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r-o,fromColumn:s,toColumn:s}),a.moveRows({tile:n,fromRow:r,toRow:r-o},e))}}))},n.tilesFallDown=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();jm()(r).call(r),r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesBlow(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r+o,fromColumn:s,toColumn:s}),a.moveRows({tile:n,fromRow:r,toRow:r+o},e))}}))},n.tilesPushLeft=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager;this.getTiles().forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesLeft(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r,fromColumn:s,toColumn:s-o}),a.moveColumns({tile:n,fromColumn:s,toColumn:s-o},e))}}))},n.tilesPushRight=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();jm()(r).call(r),r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesRight(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r,fromColumn:s,toColumn:s+o}),a.moveColumns({tile:n,fromColumn:s,toColumn:s+o},e))}}))},n.tilesPutColumnsMiddle=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesMiddleLeft(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r,fromColumn:s,toColumn:s-o}),a.moveColumns({tile:n,fromColumn:s,toColumn:s-o},e))}})),jm()(r).call(r),r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesMiddleRight(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r,fromColumn:s,toColumn:s+o}),a.moveColumns({tile:n,fromColumn:s,toColumn:s+o},e))}}))},n.tilesPutRowsMiddle=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesMiddleAbove(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r-o,fromColumn:s,toColumn:s}),a.moveRows({tile:n,fromRow:s,toRow:s-o},e))}})),jm()(r).call(r),r.forEach((function(n){var r=n.row,s=n.column;if(!n.isCaptured()){var o=t.getEmptySpacesMiddleBelow(r,s);o<1||(i.tileSwap({fromRow:r,toRow:r+o,fromColumn:s,toColumn:s}),a.moveRows({tile:n,fromRow:s,toRow:s+o},e))}}))},n.getEmptySpacesAbove=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceAbove(e,t)){n++;var i=e-1;return this.getEmptySpacesAbove(i,t,n)}return n},n.getEmptySpacesBlow=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceBlow(e,t)){n++;var i=e+1;return this.getEmptySpacesBlow(i,t,n)}return n},n.getEmptySpacesLeft=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceLeft(e,t)){n++;var i=t-1;return this.getEmptySpacesLeft(e,i,n)}return n},n.getEmptySpacesRight=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceRight(e,t)){n++;var i=t+1;return this.getEmptySpacesRight(e,i,n)}return n},n.getEmptySpacesMiddleLeft=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleLeft(e,t)){n++;var i=t-1;return this.getEmptySpacesMiddleLeft(e,i,n)}return n},n.getEmptySpacesMiddleRight=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleRight(e,t)){n++;var i=t+1;return this.getEmptySpacesMiddleRight(e,i,n)}return n},n.getEmptySpacesMiddleAbove=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleAbove(e,t)){n++;var i=e-1;return this.getEmptySpacesMiddleAbove(i,t,n)}return n},n.getEmptySpacesMiddleBelow=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleBelow(e,t)){n++;var i=e+1;return this.getEmptySpacesMiddleBelow(i,t,n)}return n},n.isEmptySpaceAbove=function(e,t){var n=e-1,i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceBlow=function(e,t){var n=e+1,i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceLeft=function(e,t){var n=t-1,i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceRight=function(e,t){var n=t+1,i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleLeft=function(e,t){var n=t-1;if(n<this.scene.levelHandler.getConfigs().columns/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleRight=function(e,t){var n=t+1;if(n>this.scene.levelHandler.getConfigs().columns/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleAbove=function(e,t){var n=e-1;if(n<this.scene.levelHandler.getConfigs().rows/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceMiddleBelow=function(e,t){var n=e+1;if(n>this.scene.levelHandler.getConfigs().rows/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},t}(rf),qm=Xm,Jm=n(95),Qm=n.n(Jm),$m=n(110),eg=n.n($m),tg=n(132),ng=n.n(tg),ig=Ga.Z.GAMEPLAY.FRAME,ag=Zp.COLORS,rg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,ig.TILE_BLUE,ag.BLUE)||this).getExplosiveAnimationKey=function(){return Kh.BLUE_EXPLOSIVE.KEY},a.setName("BlueTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Jp),sg=rg,og=Ga.Z.GAMEPLAY,cg=og.KEY,ug=og.FRAME,lg=Zp.COLORS,hg=Zp.SPECIALS,dg=function(e){function t(t,n,i){var a;(a=e.call(this,t,ug.TILE_COLOR_CHANGE,hg.COLOR_CHANGE)||this).effect=void 0,a.background=void 0,a.getExplosiveAnimationKey=function(){switch(a.color){case lg.RED:return Kh.RED_EXPLOSIVE.KEY;case lg.BLUE:return Kh.BLUE_EXPLOSIVE.KEY;case lg.PINK:return Kh.PINK_EXPLOSIVE.KEY;case lg.GREEN:return Kh.GREEN_EXPLOSIVE.KEY;case lg.YELLOW:return Kh.YELLOW_EXPLOSIVE.KEY;default:return Kh.BLUE_EXPLOSIVE.KEY}},a.handleStartExplosive=function(){var e,t;null==(e=a.effect)||e.setVisible(!1),null==(t=a.background)||t.setVisible(!1)},a.setName("ColorChangeTile"),a.setRow(n),a.setColumn(i),a.createEffect();var r=a.randomColor();return a.setColor(r),a.block.off(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a.block.on(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}(0,o.Z)(t,e);var n=t.prototype;return n.enableTile=function(){e.prototype.enableTile.call(this),this.block.setVisible(!0),this.effect.setVisible(!0),this.background.setVisible(!0)},n.createEffect=function(){this.effect=this.scene.make.sprite({key:cg,frame:ug.TILE_COLOR_CHANGE}),this.effect.anims.playReverse(Kh.COLOR_CHANGE.KEY),this.effect.setWorldSize(37,37),this.effect.setRotation(1),this.scene.add.tween({repeat:-1,ease:Phaser.Math.Easing.Cubic.InOut,targets:[this.effect],duration:15e3,props:{angle:{from:0,to:360}}}),this.add(this.effect)},n.randomColor=function(){var e=this.scene.levelHandler.getConfigs().colors;return e[Phaser.Math.RND.between(0,e.length-1)]},n.setColor=function(e){this.isCaptured()||(this.background&&this.remove(this.background,!0),this.color=e,this.background=this.scene.add.image(0,0,cg,Zp.FRAME[e]),this.block.setAlpha(.75),this.background.setVisible(!0),this.background.setWorldSize(36,36),this.effect.setVisible(!0),this.add(this.background),this.moveTo(this.background,0),this.moveTo(this.block,1),this.moveTo(this.effect,2))},t}(Jp),pg=dg,fg=Ga.Z.GAMEPLAY,mg=fg.KEY,gg=fg.FRAME,vg=Zp.SPECIALS,Eg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,gg.TILE_COLORFUL,vg.COLORFUL)||this).effect=void 0,a.getExplosiveAnimationKey=function(){return Kh.COLORFUL_EXPLOSIVE.KEY},a.handleStartExplosive=function(){var e,t=a.scene.boardManager.boardContainer,n=t.count("visible",!0);t.moveTo((0,Ba.Z)(a),n-1),null==(e=a.effect)||e.setVisible(!1)},a.setName("ColorfulTile"),a.setRow(n),a.setColumn(i),a.createEffect(),a.block.once(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}(0,o.Z)(t,e);var n=t.prototype;return n.createEffect=function(){this.effect=this.scene.make.sprite({key:mg,frame:gg.TILE_COLORFUL}),this.effect.setWorldSize(Zp.SIZE,Zp.SIZE),this.effect.anims.play(Kh.COLORFUL.KEY),this.add(this.effect)},n.removeTile=function(){var t;e.prototype.removeTile.call(this),null==(t=this.effect)||t.setVisible(!0)},t}(Jp),Ag=Eg,yg=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).setName("EmptyTile"),a.setRow(n),a.setColumn(i),a.setState(Zp.STATUS.CAPTURED),a.destroy(),a}return(0,o.Z)(t,e),t}(Jp),Sg=yg,Tg=Ga.Z.GAMEPLAY.FRAME,Ig=Zp.COLORS,bg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Tg.TILE_GREEN,Ig.GREEN)||this).getExplosiveAnimationKey=function(){return Kh.GREEN_EXPLOSIVE.KEY},a.setName("GreenTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Jp),Cg=bg,wg=Ga.Z.GAMEPLAY.FRAME,Og=Zp.COLORS,Rg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,wg.TILE_PINK,Og.PINK)||this).getExplosiveAnimationKey=function(){return Kh.PINK_EXPLOSIVE.KEY},a.setName("PinkTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Jp),Pg=Rg,_g=Ga.Z.GAMEPLAY.FRAME,xg=Zp.COLORS,kg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,_g.TILE_RED,xg.RED)||this).getExplosiveAnimationKey=function(){return Kh.RED_EXPLOSIVE.KEY},a.setName("RedTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Jp),Dg=kg,Lg=Ga.Z.GAMEPLAY.FRAME,Mg=Zp.COLORS,Ng=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Lg.TILE_YELLOW,Mg.YELLOW)||this).getExplosiveAnimationKey=function(){return Kh.YELLOW_EXPLOSIVE.KEY},a.setName("YellowTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Jp),Bg=Ng;function Gg(e,t){var n="undefined"!==typeof eg()&&ng()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ug(e,t);var i=Ge()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Qm()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ug(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Zg=vf.STATUS,Fg=Zp.COLORS,Yg=Fg.RED,Hg=Fg.BLUE,Wg=Fg.PINK,Vg=Fg.GREEN,Kg=Fg.YELLOW,zg=Zp.SPECIALS,jg=zg.FREEZE,Xg=zg.COLORFUL,qg=zg.COLOR_CHANGE,Jg=GameCore.Configs.Gameplay,Qg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isSelectable=!1,n.isUseableItem=!1,n.isEndBoard=!1,n.tilesHighlight=[],n.suggestionsDelay=5e3,n.suggestionsTimer=void 0,n.freezeCheckTimer=void 0,n.delayEnableItemTimer=void 0,n.tilesGroup=void 0,n.scoreTextGroup=void 0,n.addEventsTile=function(e){e.block&&(e.block.setInteractive({useHandCursor:!0}),e.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),e.block.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,n.tileSelect(e)),e.createInput())},n.tileSelect=function(e){return function(){var t=n.scene,i=t.itemManager,a=t.missionsManager;if(n.isSelectable){if(n.removeSuggestionsTiles(),""!==i.itemActive)if(i.applyItem(e))return;var r=[],s=e.color,o=-1;switch(s){case Xg:o=10,r=n.getTilesAround(e,1,1);break;case jg:break;default:r=n.captureTilesSameColor(e)}if(r.length<1)return n.scene.audio.playSound(Ua.Z.MOVE_WRONG),void n.suggestionsEatableTiles();n.tilesCapturing(r,!0,o,200),n.startVibrate(r.length),a.updateMission(pm.TYPES.COMBO,s,r.length),a.updateMission(pm.TYPES.COLLECT_GEMS,s,r.length)}}},n.updateAfterMoved=function(e){var t;if(n.scene&&!(e[0]instanceof tf)){var i=null==(t=e[0])?void 0:t.color;n.updateColorChangeTiles(i)}},n.scene=t,n.createGroup(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.isSelectable=!1,this.isUseableItem=!1,this.hideTexts(),this.removeSuggestionsTiles(),this.clearTiles(),this.setState(Zg.READY)},n.start=function(){this.isRunning()||(this.isSelectable=!1,this.isUseableItem=!1,this.showUpTilesAnimation(),this.setState(Zg.RUNNING))},n.stop=function(){this.isRunning()&&(this.isSelectable=!1,this.isUseableItem=!1,this.hideTexts(),this.removeSuggestionsTiles(),this.setState(Zg.STOPPED))},n.createGroup=function(){this.scoreTextGroup=this.scene.add.group(),this.tilesGroup=this.scene.make.group({active:!1,runChildUpdate:!1})},n.hideTexts=function(){this.scoreTextGroup.setVisible(!1);var e=this.scoreTextGroup.getChildren();this.scene.tweens.killTweensOf(e)},n.getTiles=function(){var e;return this.scene&&null!=(e=this.tilesGroup)&&e.scene?this.tilesGroup.getMatching("visible",!0):[]},n.clearTiles=function(){var e=this,t=this.scene.boardManager;this.tilesGroup&&this.tilesGroup.children.each((function(n){n.setVisible(!1),e.tilesGroup.killAndHide(n),t.boardContainer.remove(n)}))},n.getTileExits=function(e){var t=this.tilesGroup.getMatching("tileType",e);return t.length<1?null:cl()(t).call(t,(function(e){return!1===e.visible}))||null},n.createTileByType=function(e,t,n){var i=this.getTileExits(e);if(i)return i.enableTile(),i.setRow(t),i.setColumn(n),i;switch(e){case Yg:return new Dg(this.scene,t,n);case Wg:return new Pg(this.scene,t,n);case Hg:return new sg(this.scene,t,n);case Vg:return new Cg(this.scene,t,n);case Kg:return new Bg(this.scene,t,n);case jg:return new tf(this.scene,t,n);case Xg:return new Ag(this.scene,t,n);case qg:return new pg(this.scene,t,n);default:return new Sg(this.scene,t,n)}},n.addTile=function(e){this.tilesGroup.add(e),this.addEventsTile(e)},n.tileCapture=function(e){e.setState(Zp.STATUS.CAPTURED)},n.removeTile=function(e){if(e){var t=this.scene.boardManager,n=t.boardContainer,i=t.tileMap,a=e.row,r=e.column;i[a]&&i[a][r]&&(i[a][r]="?"),e.setVisible(!1),n.remove(e),this.tilesGroup.killAndHide(e)}},n.showUpTilesAnimation=function(){var e,t=this,n=E()(e=[]).call(e,this.getTiles());jm()(n).call(n),this.scene.animationManager.startBoard(n).once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){t.scene.tweens.killTweensOf(n),n.forEach((function(e){e.setAlpha(1)})),t.suggestionsEatableTiles(),t.isSelectable=!0,t.isUseableItem=!0,t.scene.events.emit(tm)}))},n.isCanMove=function(){if(!this.isRunning())return!1;var e=!0;if(this.tilesGroup.countActive()<1)return!1;for(var t,n=Gg(this.getTiles());!(t=n()).done;){var i=t.value;if(!i.isCaptured())if(this.getTilesSameColor(i).length>1){e=!1;break}}return!e},n.processNextLevel=function(){for(var e,t=this,n=this.getTiles(),i=[],a=Gg(n);!(e=a()).done;){var r=e.value;r.isCaptured()||i.push(r)}this.isEndBoard=!0,this.scene.time.addEvent({delay:800,callback:function(){if(i.length<=0)return t.scene.runBonusScoreAnimation(2e3),Tc.emit(Pr.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:2e3}),void t.scene.time.addEvent({delay:1400,callback:function(){t.isEndBoard=!1,t.scene.levelUp()}});var e=t.scene.animationManager.endBoard(i);i.length<10&&i.length>0&&Tc.emit(Pr.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:2e3-200*i.length}),e.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){i.forEach((function(e){t.tileCapture(e),t.removeTile(e)})),t.scene.time.addEvent({delay:600,callback:function(){t.isEndBoard=!1,t.scene.levelUp()}})}))}})},n.getTilesCanCapture=function(){for(var e,t=this.scene.levelHandler.getConfigs().eatableSize,n=[],i=Gg(this.getTiles());!(e=i()).done;){var a=e.value;if(!a.isCaptured()){var r=this.getTilesSameColor(a);r.length<t||n.push(r)}}return n},n.getBoundOfTiles=function(e){var t=this.scene.gameZone,n=t.displayWidth,i=t.displayHeight,a=n,r=i,s=10,o=1,c=10,u=1,l=Zp.SIZE,h=Zp.SIZE;e.forEach((function(e){var t=e.x,n=e.y,i=e.row,l=e.column;t<a&&(a=t),n<r&&(r=n),i<s&&(s=i),i>o&&(o=i),l<c&&(c=l),l>u&&(u=l)})),l*=u-c+1,h*=o-s+1;l+=2,h+=2,a=(c-1)*Zp.SIZE+2;var d=this.scene.levelHandler.getConfigs().rows,p=this.scene.ads.getBannerHeight()+18;return{x:a,y:r=i-p-(d-s+1)*Zp.SIZE,width:l,height:h}},n.suggestionsEatableTiles=function(){var e,t=this;null==(e=this.suggestionsTimer)||e.remove(),this.removeSuggestionsTiles();var n=this.scene.levelHandler.getConfigs().eatableSize;this.suggestionsTimer=this.scene.time.addEvent({delay:this.suggestionsDelay,callback:function(){if(t.isRunning()){t.removeSuggestionsTiles();var e=t.getTilesCanCapture();if(!(e.length<1)){var i=Phaser.Math.RND.between(0,e.length-1);t.tilesHighlight=e[i],t.tilesHighlight.length<n||t.showHighlightTiles(t.tilesHighlight)}}}})},n.removeSuggestionsTiles=function(){this.tilesHighlight.length<1||(this.hideHighlightTiles(this.tilesHighlight),this.tilesHighlight=[])},n.showHighlightTiles=function(e){e.forEach((function(e){e.showHighlight()}))},n.hideHighlightTiles=function(e){e.forEach((function(e){e.hideHighlight()}))},n.captureTilesSameColor=function(e){var t=this.scene.levelHandler,n=this.getTilesSameColor(e),i=t.getConfigs().eatableSize;return n.length<i?[]:n},n.getTilesSameColor=function(e){var t=[],n=e.color,i=e.row,a=e.column;return this.findTilesSameColor(i,a,n,t),t},n.findTilesSameColor=function(e,t,n,i){var a=this.scene,r=a.boardManager,s=a.levelHandler.getConfigs(),o=s.rows,c=s.columns;if(!(e<1||t<1)&&!(e>o||t>c)){var u=r.boardMap[e][t];u.isCaptured()||this.isSameColor(n,u)&&(_t()(i).call(i,u)>=0||(i.push(u),this.findTilesSameColor(e-1,t,n,i),this.findTilesSameColor(e,t+1,n,i),this.findTilesSameColor(e+1,t,n,i),this.findTilesSameColor(e,t-1,n,i)))}},n.isSameColor=function(e,t){return e===t.color&&!(t instanceof tf)||t instanceof Ag},n.getTilesAround=function(e,t,n){var i=[],a=e.row,r=e.column,s=a+t,o=r+n,c=a-t,u=r-n;return this.findTilesAround({row:a,column:r,maxRow:s,maxColumn:o,minRow:c,minColumn:u},i),i},n.findTilesAround=function(e,t){var n=this.scene.boardManager.boardMap,i=e.row,a=e.column,s=e.maxRow,o=e.maxColumn,c=e.minRow,u=e.minColumn;if(n[i]&&n[i][a]&&!(i<c||a<u)&&!(i>s||a>o)){var l=n[i][a];l.isCaptured()||_t()(t).call(t,l)>=0||(t.push(l),this.findTilesAround((0,r.Z)({},e,{row:i-1}),t),this.findTilesAround((0,r.Z)({},e,{column:a+1}),t),this.findTilesAround((0,r.Z)({},e,{row:i+1}),t),this.findTilesAround((0,r.Z)({},e,{column:a-1}),t))}},n.tilesChangeColor=function(e,t){var n=this,i=this.scene.boardManager;t.forEach((function(t){var a=t.row,r=t.column,s=t.x,o=t.y,c=n.createTileByType(e,a,r);i.setTileToMap(c,a,r),c.setX(s),c.setY(o),n.removeTile(t)}))},n.updateColorChangeTiles=function(e){var t=this.scene.levelHandler.getConfigs(),n=t.colors,i=t.specials,a=e;if(i[e]){var r=Phaser.Math.RND.between(0,n.length-1);a=n[r]}this.getTiles().forEach((function(e){e instanceof pg&&e.setColor(a)}))},n.updateFreezeTiles=function(e){var t,n=this;void 0===e&&(e=!1);var i=this.scene,a=i.levelHandler,r=i.animationManager,s=a.getConfigs().rows;null==(t=this.freezeCheckTimer)||t.remove(),this.freezeCheckTimer=this.scene.time.addEvent({delay:r.moveDuration,callback:function(){if(n.isRunning()){var t=n.getTiles(),i=[];t.forEach((function(e){e instanceof tf&&(e.isCaptured()||e.row<s&&e.row>1||i.push(e))})),i.length<1?e&&!n.isEndBoard&&n.processNextLevel():(e&&(n.isSelectable=!0),n.tilesCapturing(i,!1,100),n.isSelectable=!1)}}})},n.tilesCapturing=function(e,t,n,i,a){var r,s=this;if(void 0===t&&(t=!0),void 0===n&&(n=-1),void 0===i&&(i=0),void 0===a&&(a=!1),this.isSelectable||a){this.isSelectable=!1,this.isUseableItem=!1,null==(r=this.delayEnableItemTimer)||r.remove();var o=this.scene,c=o.modeManager,u=o.animationManager,l=o.levelHandler.getConfigs().scorePerItem,h=e.length,d=l*h;n>-1&&(d=n),e.forEach((function(e){s.tileCapture(e),e.setEatScore(d)})),u.capturing(e,300,t).callback=function(){s.updateAfterMoved(e),s.isCanMove()?(s.updateFreezeTiles(),s.suggestionsEatableTiles(),s.isSelectable=!0,s.delayEnableItemTimer=s.scene.time.addEvent({delay:300,callback:function(){s.isUseableItem=!0,s.scene.events.emit(em)}})):s.updateFreezeTiles(!0)},this.scene.time.addEvent({delay:1e3,callback:function(){s.showEncouragingText(h)}}),this.scene.time.addEvent({delay:100*e.length-1+i,callback:function(){if(c.applyMode(),e.length>1){var t=e[0];if(!t)return;var n=d*h,i=t.x,a=t.y;s.scene.runTotalScoreAnimation(n,i,a)}}})}},n.showEncouragingText=function(e){e<=4||(e<=6?this.scene.runEncouragingAnimation(Bh.COOL):e<=8?this.scene.runEncouragingAnimation(Bh.GOOD):e<=9?this.scene.runEncouragingAnimation(Bh.GREAT):e>9&&this.scene.runEncouragingAnimation(Bh.TEXT_EXCELLENT))},n.startVibrate=function(e){try{if(!Jg.EnableVibrate)return;if(e<=4)return;if(!this.scene.player.getPlayerSetting("vibrate"))return;if(e<=6)return void Gl(340);if(e<=8)return void Gl(410);if(e<=9)return void Gl(480);if(e>9)return void Gl(600)}catch(t){(0,i.tO)(t)}},t}(rf),$g=Qg,ev=Ga.Z.TUTORIAL,tv=ev.KEY,nv=ev.FRAME,iv=function(e){function t(t){var n;return(n=e.call(this,t)||this).theCat=void 0,n.popover=void 0,n.description=void 0,n.name="PopoverTutorial",n.createAvatarCat(),n.createPopover(),n.createDescription(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAvatarCat=function(){this.theCat=this.scene.make.image({key:tv,frame:nv.AVATAR_CAT,origin:{x:.95,y:0}}),this.theCat.setWorldSize(126,126.5),this.add(this.theCat)},n.createPopover=function(){this.popover=this.scene.make.image({key:tv,frame:nv.POPUP_TALK,origin:{x:0,y:0}}),this.popover.setWorldSize(219.5,124),this.add(this.popover)},n.createDescription=function(){this.description=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(20)}),this.description.setTint(11632977),this.description.setCenterAlign(),this.add(this.description)},n.updateData=function(e,t){this.theCat.setVisible(!0),this.popover.setVisible(!0),this.description.setText(t),this.description.setVisible(!0),this.description.setMaxWidth(e),Phaser.Display.Align.In.Center(this.description,this.popover,15,-5)},n.playAnimation=function(e){var t;void 0===e&&(e=0),this.setAlpha(0),null==(t=this.scene)||t.tweens.add({delay:e,targets:this,duration:200,ease:Phaser.Math.Easing.Cubic.Out,alpha:1})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this)},t}(Phaser.GameObjects.Container),av=iv,rv=function(){function e(e){var t=this;this.manager=void 0,this.startGuideFirstFeature=function(){var e=t.manager.scene,n=e.boardManager,i=e.tileManager;i.isSelectable=!1,i.isUseableItem=!1;var a=n.getTileByIndex(14),r=n.getTileByIndex(36);t.createHighlightTiles([a,r]),t.createDescription([a,r],{text:"Rainbow gem can clear the gems surrounding it",popoverWidth:160});var s=n.getTileByIndex(25);t.createHandAtTile(s),s.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUseGem(s))},this.startGuideSecondFeature=function(){var e=t.manager.scene,n=e.boardManager,i=e.tileManager;i.isSelectable=!1,i.isUseableItem=!1;var a=n.getTileByIndex(47),r=n.getTileByIndex(53),s=n.getTileByIndex(68),o=n.getTileByIndex(87);t.createHighlightTiles([a,r,s,o]),t.createDescription([a,r,s,o],{text:"Rainbow gem can be match to any color",popoverWidth:160});var c=n.getTileByIndex(53);t.createHandAtTile(c),c.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUseGem(c)),c.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.closeTutorial)},this.handleUseGem=function(e){return function(){t.manager.hand.kill(),t.manager.popover.kill(),t.manager.background.kill();var n=t.manager.scene.tileManager;n.isSelectable=!0,n.tileSelect(e)()}},this.closeTutorial=function(){t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(tm,this.startGuideFirstFeature)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":P2GRYPBRPR:2P2G2YPGBG:BGYBRC2PYB:YRYBGBGP2Y:P2YP3YRBG:YBG2RPGPRP:3GBRBRCRP:3RPG2BGYR:PBY2P3RPY:RPYG2YBGBP")},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+Zp.SIZE/2,r=i+Zp.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createHighlightTiles=function(e){var t=this.manager.scene.tileManager.getBoundOfTiles(e),n=t.x,i=t.y,a=t.width,r=t.height;this.manager.createMask(n,i,a,r)},t.createDescription=function(e,t){var n=this.manager.scene.tileManager,i=t.text,a=t.popoverWidth;this.manager.popover.updateData(a,i);var r=n.getBoundOfTiles(e),s=r.y,o=r.height;this.manager.popover.setY(s-80-o),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),sv=rv,ov=function(){function e(e){var t=this;this.manager=void 0,this.handleOnCloseTutorial=function(){t.manager.stopTutorial();var e=t.manager.scene.tileManager;e.isSelectable=!0,e.isUseableItem=!0,t.manager.startTutorial(Kf).then((function(e){e||t.manager.stopTutorial()}))},this.manager=e}var t=e.prototype;return t.setup=function(){var e=this.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1,this.createHighlight(),this.createDescription(),this.manager.background.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnCloseTutorial)},t.createHighlight=function(){this.manager.createMask(146,-3,85,85,40)},t.createDescription=function(){var e=this.manager.scene,t=this.manager.scene.lang.Text.GUIDE_2_SCORE;this.manager.popover.updateData(140,t);var n=e.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition().y;this.manager.popover.setY(n+60),this.manager.popover.setActive(!0),this.manager.popover.setVisible(!0),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),cv=ov,uv=function(){function e(e){var t=this;this.manager=void 0,this.handleOnTileClicked=function(e){var n=t.manager,i=n.scene.tileManager;i.isSelectable=!0,i.tileSelect(e)(),n.hand.kill(),n.popover.kill(),n.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){var e,t=this,n=this.manager.scene,i=n.tileManager,a=n.levelHandler,r=i.getTilesCanCapture();if(r.length<1)this.manager.stop();else{var s=ci()(Zp.SPECIALS),o=a.getConfigs().eatableSize,c=pe()(r).call(r,(function(e){return!cl()(e).call(e,(function(e){return _t()(s).call(s,e.color)>=0}))})),u=li()(c).call(c,(function(e,t){return t.length-e.length}))[0];(null==u?void 0:u.length)<o?this.manager.stop():(i.isSelectable=!1,i.isUseableItem=!1,null==(e=i.suggestionsTimer)||e.remove(),i.showHighlightTiles(u),this.createHighlightTiles(u),this.createHandAtCenterTitles(u),this.manager.displayCount(Vf)<1&&this.createDescription(u),u.forEach((function(e){e.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){u.forEach((function(e){e.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN)})),t.handleOnTileClicked(e)}))})))}},t.createHighlightTiles=function(e){var t=this.manager.scene.tileManager.getBoundOfTiles(e),n=t.x,i=t.y,a=t.width,r=t.height;this.manager.createMask(n,i,a,r)},t.createHandAtCenterTitles=function(e){li()(e).call(e,(function(e,t){return e.row-t.row+e.column-t.column}));var t=e[Math.floor(e.length/2)].getWorldPosition(),n=t.x,i=t.y,a=n+Zp.SIZE/2,r=i+Zp.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(e){var t=this.manager.scene.lang.Text.GUIDE_1_TAP;this.manager.popover.updateData(170,t);var n=this.manager.scene.tileManager.getBoundOfTiles(e),i=n.y,a=n.height;this.manager.popover.setY(i-100-a),this.manager.popover.y<0&&this.manager.popover.setY(5),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),lv=uv,hv=function(){function e(e){var t=this;this.manager=void 0,this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.hammerItem;n.isSelectable=!1,n.isUseableItem=!1,t.createHighlightItem(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){var e=t.manager.scene,n=e.boardManager,i=e.tileManager,a=n.getTileByIndex(26);if(a){var r=i.getTilesCanCapture();pe()(r).call(r,(function(e){return cl()(e).call(e,(function(e){return e.color===Zp.COLORS.RED}))})).length<1?t.manager.stopTutorial():(t.manager.popover.kill(),t.createHandAtTile(a),t.manager.background.setVisible(!1),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUseHammer(a)))}else t.manager.stop()},this.handleUseHammer=function(e){return function(){t.manager.scene.itemManager.applyItem(e),t.manager.hand.kill(),t.closeTutorial()}},this.closeTutorial=function(){t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(tm,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":BGPY3BYGY:B2PYBYRYGY:BYBYRB2PGB:2YB5RYP:2GB5RYG:PGYB3RBYG:BRGYGRYBGB:2GBP2G2PCB:GYCBPGYGPY:BPY2BPRPGP")},t.createHighlightItem=function(){var e=this.manager.scene.layoutManager.objects.hammerItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.hammerItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.hammerItem;this.manager.popover.updateData(160,"This is a Hammer, use it to smash any gem!"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+Zp.SIZE/2,r=i+Zp.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},e}(),dv=hv,pv=function(){function e(e){var t=this;this.manager=void 0,this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.paintItem;n.isSelectable=!1,n.isUseableItem=!1,t.createHighlightItem(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){var e=t.manager.scene,n=e.tileManager,i=e.boardManager,a=n.getTilesCanCapture(),r=pe()(a).call(a,(function(e){return cl()(e).call(e,(function(e){return e.color===Zp.COLORS.YELLOW}))}));if((null==r?void 0:r.length)<1)t.manager.stop();else{t.manager.popover.kill(),t.manager.background.kill();var s=i.getTileByIndex(45);t.createHandAtTile(s),s.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUsePaint(s))}},this.handleUsePaint=function(e){return function(){t.manager.scene.itemManager.applyItem(e),t.manager.hand.kill(),t.closeTutorial()}},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(tm,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":PRPRBGRYRP:PBRY2BR2GB:GPRB2RGBGR:2GP3YBPBP:GBP3Y2RPB:RGR3YGRPR:YBG4YGYG:PYBGRPBRPG:PBRYGRBGBR:BGR2GPBRBP")},t.createHighlightItem=function(){var e=this.manager.scene.layoutManager.objects.paintItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.paintItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.setActive(!0),this.manager.hand.setVisible(!0),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.paintItem;this.manager.popover.updateData(160,"This is a Magic bottle, use it to change a gem colour"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+Zp.SIZE/2,r=i+Zp.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.closeTutorial=function(){this.manager.stopTutorial()},e}(),fv=pv,mv=function(){function e(e){var t=this;this.manager=void 0,this.disableUseItem=function(){t.manager.tutorialId="";var e=t.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1},this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.shuffleItem;t.manager.tutorialId=Jf,n.isSelectable=!1,n.isUseableItem=!1,t.createHighlight(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){t.manager.hand.kill(),t.manager.popover.kill(),t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once($f,this.disableUseItem),this.manager.scene.events.once(tm,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":BPBPRBPRGB:PYGBGRYGRG:YGYPBCBRGY:PRBGRYGPBG:YGPRPRBRGR:GRGCGBRBYB:RPYGBRBPGY:GRGYPBGYPB:YPBGYGYGRP:RGRBPBPRYB")},t.createHighlight=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem;this.manager.popover.updateData(160,"This is a Shuffle tile, use it to shuffle all gems"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),gv=mv,vv=function(){function e(e){var t=this;this.manager=void 0,this.handleOnCloseTutorial=function(){t.manager.stopTutorial();var e=t.manager.scene.tileManager;e.isSelectable=!0,e.isUseableItem=!0,t.manager.startTutorial(Vf).then((function(e){e||t.manager.stopTutorial()}))},this.manager=e}var t=e.prototype;return t.setup=function(){var e=this.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1,this.createHighlight(),this.createDescription(),this.manager.background.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnCloseTutorial)},t.createHighlight=function(){this.manager.createMask(50,0,95,50)},t.createDescription=function(){var e=this.manager.scene,t=this.manager.scene.lang.Text.GUIDE_3_TARGET_SCORE;this.manager.popover.updateData(170,t);var n=e.layoutManager.objects.header.topBar.targetScoreBar.getWorldPosition().y;this.manager.popover.setY(n+30),this.manager.popover.setActive(!0),this.manager.popover.setVisible(!0),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),Ev=vv,Av=vf.STATUS,yv=Ga.Z.TUTORIAL,Sv=yv.KEY,Tv=yv.FRAME,Iv=GameCore.Configs.Tutorial,bv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tutorialId=void 0,n.tutorialsDisplayed=[],n.hand=void 0,n.popover=void 0,n.background=void 0,n.maskGraphics=void 0,n.tutFirstMove=void 0,n.tutTargetScore=void 0,n.tutCurrentScore=void 0,n.tutColorfulGem=void 0,n.tutItemPaint=void 0,n.tutItemHammer=void 0,n.tutItemShuffle=void 0,n.showTutorialWhenStart=function(){var e=n.scene.levelHandler;1===e.level&&n.scene.analytics.event(Ht._.TUTORIAL_BEGIN),2===e.level&&n.startTutorial(jf),3===e.level&&n.startTutorial(qf),4===e.level&&n.startTutorial(Jf),5===e.level&&n.startTutorial(Xf)},n.showTutorialWhenGemsDropped=function(){1===n.scene.levelHandler.level&&n.startTutorial(Vf)},n.showTutorialWhenGemsMove=function(){1===n.scene.levelHandler.level&&n.startTutorial(zf).then((function(e){e||n.startTutorial(Vf).then((function(e){e||n.stopTutorial()}))}))},n.startTutorial=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isRunning()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!n.isNothingToDisplay()){e.next=4;break}return e.abrupt("return",!1);case 4:if(!n.hasDisplayedEnough(t)){e.next=6;break}return e.abrupt("return",!1);case 6:n.background.kill(),e.t0=t,e.next=e.t0===Vf?10:e.t0===zf?13:e.t0===Kf?16:e.t0===jf?19:e.t0===Xf?22:e.t0===qf?25:e.t0===Jf?28:31;break;case 10:return n.tutFirstMove=new lv((0,Ba.Z)(n)),n.tutFirstMove.setup(),e.abrupt("break",32);case 13:return n.tutCurrentScore=new cv((0,Ba.Z)(n)),n.tutCurrentScore.setup(),e.abrupt("break",32);case 16:return n.tutTargetScore=new Ev((0,Ba.Z)(n)),n.tutTargetScore.setup(),e.abrupt("break",32);case 19:return n.tutColorfulGem=new sv((0,Ba.Z)(n)),n.tutColorfulGem.setup(),e.abrupt("break",32);case 22:return n.tutItemPaint=new fv((0,Ba.Z)(n)),n.tutItemPaint.setup(),e.abrupt("break",32);case 25:return n.tutItemHammer=new dv((0,Ba.Z)(n)),n.tutItemHammer.setup(),e.abrupt("break",32);case 28:return n.tutItemShuffle=new gv((0,Ba.Z)(n)),n.tutItemShuffle.setup(),e.abrupt("break",32);case 31:return e.abrupt("return",!1);case 32:if(n.isRunning()){e.next=34;break}return e.abrupt("return",!1);case 34:return n.tutorialId=t,n.tutorialsDisplayed.push(n.tutorialId),n.scene.events.emit($f),n.scene.analytics.event(Ht._.TUTORIAL_STEP,{step:n.tutorialId}),e.abrupt("return",!0);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.scene=t,n.createBackground(),n.createHand(),n.createPopover(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.hand.kill(),this.popover.kill(),this.background.kill(),this.removeEvents(),this.setState(Av.READY)},n.start=function(){this.isRunning()||(this.isValidForTutorial()||Iv.ForceUseTutorial)&&(this.scene.player.incUserGuideDisplays(),this.setState(Av.RUNNING),this.listenEvents(),this.scene.events.emit(Qf))},n.stop=function(){this.isRunning()&&(this.removeEvents(),this.scene.tweens.killTweensOf([this.background,this.hand]),this.setState(Av.STOPPED))},n.displayCount=function(e){var t;return pe()(t=this.tutorialsDisplayed).call(t,(function(t){return t===e})).length},n.hasDisplayedEnough=function(e){if(!GameCore.Utils.Object.hasOwn(Iv.NumberOfTutorial,e))return!0;var t=Iv.NumberOfTutorial[e];return!GameCore.Utils.Valid.isNumber(t)||this.displayCount(e)>=t},n.isNothingToDisplay=function(){var e,t=this;return pe()(e=Q()(Iv.NumberOfTutorial)).call(e,(function(e){return!t.hasDisplayedEnough(e)})).length<1},n.listenEvents=function(){this.scene.events.on(Qf,this.showTutorialWhenStart),this.scene.events.on(em,this.showTutorialWhenGemsMove),this.scene.events.on(tm,this.showTutorialWhenGemsDropped)},n.removeEvents=function(){this.scene.events.off(Qf,this.showTutorialWhenStart),this.scene.events.off(em,this.showTutorialWhenGemsMove),this.scene.events.off(tm,this.showTutorialWhenGemsDropped)},n.stopTutorial=function(){this.tutorialId="",this.hand.kill(),this.popover.kill(),this.background.kill(),this.isNothingToDisplay()&&this.scene.analytics.event(Ht._.TUTORIAL_COMPLETE)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayer().isUserNew},n.createHand=function(){this.hand=new Er(this.scene),this.hand.kill(),this.hand.setDepth(Ma.Z.PRIORITY)},n.createPopover=function(){this.popover=new av(this.scene),this.popover.kill(),this.popover.setDepth(Ma.Z.PRIORITY),Phaser.Display.Align.In.Center(this.popover,this.scene.gameZone,-50,-150)},n.createBackground=function(){this.background=this.scene.make.image({key:Sv,frame:Tv.BLANK}),this.background.setInteractive({}),this.scene.input.setTopOnly(!1),this.background.setTint(0),this.background.setAlpha(.8),this.background.setDepth(Ma.Z.PRIORITY);var e=this.scene.gameZone,t=e.displayWidth+100,n=e.displayHeight+100;this.background.setDisplaySize(t,n),Phaser.Display.Align.In.Center(this.background,this.scene.gameZone)},n.createMask=function(e,t,n,i,a){var r;void 0===a&&(a=10),null==(r=this.maskGraphics)||r.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:16711680,alpha:1}}),this.maskGraphics.setName("MaskGraphics"),this.maskGraphics.fillRoundedRect(e,t,n,i,a),this.background.revive(),this.background.clearMask(!0),this.background.setMask(this.maskGraphics.createGeometryMask()),this.background.mask.invertAlpha=!0,this.runShowMaskAnimation()},n.runShowMaskAnimation=function(){var e=[this.background];this.background.setAlpha(0),this.scene.tweens.killTweensOf(e),this.scene.tweens.add({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{from:0,to:.8}}})},t}(rf),Cv=bv,wv={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins"},Ov=Ga.Z.DEFAULT,Rv=Ov.KEY,Pv=Ov.FRAME,_v=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.line=void 0,r.title=void 0,r.replayButton=void 0,r.addFriendButton=void 0,r.homeButton=void 0,r.settingMusic=void 0,r.settingSound=void 0,r.settingVibrate=void 0,r.contents=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.open=function(){e.prototype.open.call((0,Ba.Z)(r));var t=r.scene.player.getPlayerSettings(),n=t.music,i=t.sound,a=t.vibrate;if(r.settingMusic.updateStatus(n),r.settingSound.updateStatus(i),r.settingVibrate.updateStatus(a),!Ml()){r.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(r.settingMusic,r.settingVibrate,-80),Phaser.Display.Align.In.Center(r.settingSound,r.settingVibrate,80)}r.runOpenAnimation()},r.handleClosePopup=function(){r.scene.audio.playSound(Ua.Z.POPUP_OFF,{volume:.6}),r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name)}))},r.handleReplayGame=function(){r.runCloseAnimation(),r.popupFadeOutAnimation.next((0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.scene.screen.close(r.name),e.next=3,r.scene.storage.dispatch(dc());case 3:Tc.emit(wv.REPLAY);case 4:case"end":return e.stop()}}),e)}))))},r.handleGotoDashboard=function(){r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name),r.scene.scene.switch(Ta.C.DASHBOARD_SCENE)}))},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.handlePlayWithFriend=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.shareAsync({data:"",intent:"SHARE",text:"",image:""});case 2:case"end":return e.stop()}}),e)}))),r.createPopup(),r.createPopupContent(),r.createInput(),r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.6),r}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){this.replayButton.onClick=this.handleReplayGame,this.addFriendButton.onClick=this.handlePlayWithFriend,this.homeButton.onClick=this.handleGotoDashboard,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Du(this.scene,0,0,310,370),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMenuButtons(),this.createLine(),this.createFooterButtons(),this.popup.add([this.line,this.title,this.replayButton,this.addFriendButton,this.homeButton,this.settingMusic,this.settingSound,this.settingVibrate]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.replayButton,this.addFriendButton,this.homeButton,this.settingMusic,this.settingVibrate,this.settingSound])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Rv,frame:Pv.RIBBON_SHORT});e.setWorldSize(271,81);var t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-10);var n=new pr.Z(this.scene,Rv,Pv.BUTTON_CLOSE,38,38);n.setName("Close"),n.useSound=!1,n.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(n,e,-5,-5),this.title.add([e,t,n]),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createMenuButtons=function(){this.replayButton=new pr.Z(this.scene,Rv,Pv.BUTTON_BLUE_LONG,232,76.94),this.replayButton.setName("Replay");var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.REPLAY});Phaser.Display.Align.In.Center(e,this.replayButton),this.replayButton.add(e),Phaser.Display.Align.In.Center(this.replayButton,this.popup,0,-105),this.addFriendButton=new pr.Z(this.scene,Rv,Pv.BUTTON_YELLOW_LONG,231,68),this.addFriendButton.setName("PlayWithFriends");var t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(28),text:this.scene.lang.Text.PLAY_WITH_FRIENDS});Phaser.Display.Align.In.Center(t,this.addFriendButton),this.addFriendButton.add(t),Phaser.Display.Align.In.BottomCenter(this.addFriendButton,this.replayButton,0,70),this.homeButton=new pr.Z(this.scene,Rv,Pv.BUTTON_RED_LONG,231,68),this.homeButton.setName("Home");var n=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(28),text:this.scene.lang.Text.HOME});Phaser.Display.Align.In.Center(n,this.homeButton),this.homeButton.add(n),Phaser.Display.Align.In.BottomCenter(this.homeButton,this.addFriendButton,0,70)},n.createLine=function(){this.line=this.scene.make.image({key:Rv,frame:Pv.LINE}),this.line.setWorldSize(228.5,2),Phaser.Display.Align.In.BottomCenter(this.line,this.popup,0,-100)},n.createFooterButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate,i=e.music;this.createMusicButton(i),this.createVibrateButton(n),this.createSoundButton(t);var a=this.popup.height;this.settingVibrate.setPosition(0,a/2-65);Phaser.Display.Align.In.BottomCenter(this.settingMusic,this.settingVibrate,-75),Phaser.Display.Align.In.BottomCenter(this.settingSound,this.settingVibrate,75)},n.createMusicButton=function(e){this.settingMusic=new Ll(this.scene,{enable:e,frameOn:Pv.ICON_MUSIC_ON,frameOff:Pv.ICON_MUSIC_OFF,backgroundOn:Pv.BUTTON_GREEN_CIRCLE,backgroundOff:Pv.BUTTON_GREEN_CIRCLE}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(e){this.settingVibrate=new Ll(this.scene,{enable:e,frameOn:Pv.ICON_VIB_ON,frameOff:Pv.ICON_VIB_OFF,backgroundOn:Pv.BUTTON_GREEN_CIRCLE,backgroundOff:Pv.BUTTON_GREEN_CIRCLE}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(e){this.settingSound=new Ll(this.scene,{enable:e,frameOn:Pv.ICON_SOUND_ON,frameOff:Pv.ICON_SOUND_OFF,backgroundOn:Pv.BUTTON_GREEN_CIRCLE,backgroundOff:Pv.BUTTON_GREEN_CIRCLE}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ua.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Ru({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new hr.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new lr.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),xv=_v,kv=Ga.Z.DEFAULT,Dv=kv.KEY,Lv=kv.FRAME,Mv=GameCore.Configs,Nv=Mv.Network,Bv=Mv.Match,Gv=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).isUseRescue=void 0,r.countdownText=void 0,r.countdownTimer=void 0,r.countdownCount=void 0,r.progressColor=0,r.progressTween=void 0,r.progressCircle=void 0,r.progressAngle=void 0,r.progressSize=void 0,r.progressRadius=void 0,r.skipText=void 0,r.continueButton=void 0,r.continueButtonAnimation=void 0,r.adsTimer=void 0,r.open=function(){e.prototype.open.call((0,Ba.Z)(r)),r.isUseRescue=!1,r.progressColor=4249855,r.countdownCount=Bv.RescueGamePopupTimeout,r.setTime(r.countdownCount),r.runCountdown(),r.runContinueButtonAnimation(),r.scene.audio.playSound(Ua.Z.POPUP_SHOW)},r.handleShowRewardedVideoAd=(0,s.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.game,n=t.globalScene,i=t.audio,e.prev=1,!r.isUseRescue){e.next=4;break}return e.abrupt("return");case 4:return r.scene.storage.dispatch((function(e,t){var n=t(),i=Ws(n).level,a=void 0===i?0:i,r=as(n);window.game.analytics.event(Ht._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(r),level:a,level_name:"level_"+a}),e({type:Pn,payload:{}})})),r.isUseRescue=!0,r.progressTween.pause(),r.countdownTimer.remove(),n.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=13,new(ee())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Nv.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 13:return e.next=15,r.scene.ads.showRewardedVideoAsync();case 15:r.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),Tc.emit(wv.RESCUE),i.playSound(Ua.Z.DAILY_REWARD),n.screen.close(Na.o4.NOTIFY_SCREEN),e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=28;break}if("USER_INPUT"!==e.t0.code){e.next=28;break}return r.showNotifySkipAds(),e.abrupt("return");case 28:r.showNotifyNoAds();case 29:return e.prev=29,null==(a=r.adsTimer)||a.destroy(),i.unmuteAll(),i.playMusic(),r.scene.screen.close(r.name),e.finish(29);case 35:case"end":return e.stop()}}),e,null,[[1,22,29,35]])}))),r.showNotifyNoAds=function(e){if(!e||e.name===Na.o4.NOTIFY_SCREEN){var t=r.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),t.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:2e3,loading:!1})}},r.showNotifySkipAds=function(){var e=r.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),e.screen.open(Na.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.CANCELLED_AD,duration:3e3,loading:!1})},r.showGameOver=function(e){e&&e.name!==Na.o4.NOTIFY_SCREEN||(r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name),r.scene.storage.dispatch(gc()))},r.handleSkip=function(){r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name),r.scene.storage.dispatch(gc())},r.handleRunCountdown=function(){if(r.countdownCount-=1,5===r.countdownCount&&(r.progressColor=15812177),r.countdownCount<=0)return r.countdownTimer.remove(),r.progressTween.complete(),void r.rescueTimeout();r.setTime(r.countdownCount)},r.progressColor=0,r.progressAngle=-90,r.progressSize=15,r.progressRadius=70,r.countdownCount=Bv.MaxRescueCount,r.setDepth(Na.Ks.POPUP),r.background.setAlpha(.8),r.createContent(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createProgressCircle(),this.createCountdown(),this.createContinueButton(),this.createSkipText()},n.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({size:this.scene.fontSize(75),font:Ar.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.add(this.countdownText),this.setTime(this.countdownCount)},n.runCountdown=function(){var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e),this.startProgressCircle()},n.setProgressCircle=function(e){var t=this.countdownText,n=t.x,i=t.y,a=Phaser.Math.DegToRad(e-360+this.progressAngle),r=Phaser.Math.DegToRad(this.progressAngle);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(n,i,this.progressRadius,a,r,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.setTime=function(e){this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-120)},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.startProgressCircle=function(){var e=this;this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*Bv.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)}})},n.createContinueButton=function(){this.continueButton=new pr.Z(this.scene,Dv,Lv.BUTTON_BLUE_LONG,232,68),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Dv,Lv.ICON_ADS);Phaser.Display.Align.In.Center(e,this.continueButton),e.setWorldSize(36.5,33.5),e.setX(this.continueButton.x-70),this.continueButton.add(e);var t=this.scene.lang.getCurrentLanguage(),n=this.scene.make.bitmapText({size:"ja"===t?this.scene.fontSize(15):this.scene.fontSize(28),text:this.scene.lang.Text.CONTINUE,font:Ar.Z.PRIMARY.KEY,origin:{x:.35,y:.55}});this.continueButton.add(n),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,30)},n.createSkipText=function(){var e=this.scene.lang.getCurrentLanguage(),t="ja"===e?125:"id"===e?161.5:129,n="ja"===e?31:"id"===e?16.5:25;this.skipText=new pr.Z(this.scene,Dv,this.scene.lang.Texture.NO_THANK,t,n),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,60)},n.rescueTimeout=function(){this.scene.screen.close(this.name),this.scene.storage.dispatch(gc())},n.runContinueButtonAnimation=function(){var e;this.continueButtonAnimation||(this.continueButtonAnimation=new sr({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(e=this.continueButtonAnimation)||e.play()},t}(GameCore.Screen),Uv=Gv,Zv=Ga.Z.GAMEPLAY,Fv=Zv.KEY,Yv=Zv.FRAME,Hv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.score=void 0,n.scoreAnimation=void 0,n.scene=t,n.createBar(),n.createTitle(),n.createScoreText(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=""+e;e>99999&&(t=Math.floor(e/1e3)+"k"),this.score.setText(t),this.scoreAnimation.play()},n.createBar=function(){var e=this.scene.make.image({key:Fv,frame:Yv.BIG_CIRCLE});e.setSize(71,71).setDisplaySize(71,71),this.add(e);var t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize("ja"===e?10:12),text:this.scene.lang.Text.YOUR_SCORE,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this,0,-14)},n.createScoreText=function(){this.score=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:"0",origin:{x:.5,y:.5}}),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this,0,8)},n.createScoreAnimation=function(){this.scoreAnimation=new ch({targets:[this.score]})},t}(Phaser.GameObjects.Container),Wv=Hv,Vv=n(623),Kv=Ga.Z.GAMEPLAY,zv=Kv.KEY,jv=Kv.FRAME,Xv=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.objectType=void 0,a.payload=void 0,a.icon=void 0,a.checkIcon=void 0,a.requireText=void 0,a.scene=t,a.objectType=n,a.payload=i,a.createIcon(),a.createCheckIcon(),a.createRequireText(),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateCount=function(e){e<=0?(this.checkIcon.revive(),this.requireText.kill()):(this.checkIcon.kill(),this.requireText.revive(),this.requireText.setText(""+e))},n.createIcon=function(){this.icon=this.scene.make.image({key:zv,frame:this.payload.icon}),this.icon.setWorldSize(18.5,18.5),this.add(this.icon)},n.createRequireText=function(){this.requireText=new lh(this.scene,{font:Ar.Z.PRIMARY.KEY,size:14}),this.requireText.setDropShadow(.5,.5,8158332),this.requireText.setText(""+this.payload.require),this.add(this.requireText),Phaser.Display.Align.In.Center(this.requireText,this.icon,6,5)},n.createCheckIcon=function(){this.checkIcon=this.scene.make.image({key:zv,frame:jv.ICON_CHECK,visible:!1}),this.checkIcon.setWorldSize(13,13),this.add(this.checkIcon),Phaser.Display.Align.In.Center(this.checkIcon,this.icon,6,5)},t}(Phaser.GameObjects.Container),qv=Xv,Jv=Ga.Z.GAMEPLAY.FRAME,Qv=pm.OBJECTS,$v=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.missionName=void 0,n.currentReward=void 0,n.score=void 0,n.title=void 0,n.label=void 0,n.objects=void 0,n.circleLight=void 0,n.cometTwinkle=void 0,n.starWhiteTwinkle=void 0,n.rewardAnimation=void 0,n.circleLightAnimation=void 0,n.requireObjectsAnimation=void 0,n.scene=t,n.createTitle(),n.createLabel(),n.createScore(),n.createGroup(),n.createCircleLight(),n.createCircleLightAnimation(),n.createEffects(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showRequesting=function(e){this.label.setVisible(e),this.objects&&this.objects.killGroup()},n.updateInfo=function(e){var t=e.name,n=e.require,i=e.process;this.showRequesting(!1),this.createRequireObjects(n,i),this.alignRequireObjects(),this.missionName!==t&&(this.missionName=t,this.runRequireObjectsAnimation())},n.createRequireObjects=function(e,t){var n=this;this.scene.tweens.killTweensOf(this.objects.getChildren());var i=Q()(e),a=0;i.forEach((function(i){var r=n.getIconObjectByType(i);if(null!==r){a=(a=e[i]-t[i])<0?0:a;var s=n.objects.getMatching("type",i);if(s.length>0){var o=s[0];return o.revive(),o.setAlpha(1),o.setScale(1),void o.updateCount(a)}var c=new qv(n.scene,i,{icon:r,require:a});n.add(c),n.objects.add(c)}}))},n.alignRequireObjects=function(){this.objects.setY(3);var e=this.getActiveObjects(),t=-(e.length-1)/2*30;Phaser.Actions.SetX(e,t,30)},n.getIconObjectByType=function(e){switch(e){case Qv.RED:return Jv.TILE_RED;case Qv.BLUE:return Jv.TILE_BLUE;case Qv.GREEN:return Jv.TILE_GREEN;case Qv.PINK:return Jv.TILE_PINK;case Qv.YELLOW:return Jv.TILE_YELLOW;case Qv.PAINT:return Jv.ITEM_PAINT;case Qv.HAMMER:return Jv.ITEM_HAMMER;case Qv.SHUFFLE:return Jv.ITEM_SHUFFLE;default:return null}},n.getActiveObjects=function(){return this.objects.getMatching("active",!0)},n.runRequireObjectsAnimation=function(){var e,t=this.getActiveObjects();this.scene.tweens.killTweensOf(t),null==(e=this.requireObjectsAnimation)||e.remove(),this.requireObjectsAnimation=new Gf({targets:t,duration:1e3,delay:this.scene.tweens.stagger(50,{}),ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:{start:.8,to:1}}}),this.requireObjectsAnimation.play()},n.runRewardAnimation=function(e){var t,n,i,a=this;if(null!=(t=this.rewardAnimation)&&null!=(n=t.tween)&&n.isPlaying())return this.currentReward+=e,void this.score.setText(""+this.currentReward);this.currentReward=e,this.score.setText(""+this.currentReward),this.score.setAlpha(1),this.score.setScale(1),this.score.setVisible(!0),this.resetScorePosition();var r=this.scene.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition(),s=r.x,o=r.y,c=this.score,u={x:c.x,y:c.y},l={x:s,y:o};null==(i=this.rewardAnimation)||i.remove(),this.rewardAnimation=new dr.Z({targets:[this.score],duration:Phaser.Math.RND.between(1e3,2500),curve:[[u.x,u.y],[u.x+Phaser.Math.RND.between(0,30),u.y+Phaser.Math.RND.between(40,80)],[l.x,l.y]],props:{scale:{start:1,to:.5}},onComplete:function(){var e;null==(e=a.scene)||e.eatScore(a.currentReward),a.currentReward=0,a.score.setVisible(!1),a.runStarTouchAnimation()},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-10,10),n=e.y+Phaser.Math.RND.between(-10,10);a.cometTwinkle.explode(1,t,n),a.scene.audio.playSound(Ua.Z.MISSION_REWARD,{volume:.6})}}),this.rewardAnimation.play()},n.runStarTouchAnimation=function(){var e=this.score,t=e.x,n=e.y,i=this.scene.layoutManager.objects.header.topBar.currentScoreBar,a=i.width,r=i.height,s=n+2;this.circleLight.setPosition(t,s),this.circleLightAnimation.play(),this.starWhiteTwinkle.run(1,t,s,a,r)},n.runTimeOutAnimation=function(){var e=this.getActiveObjects();this.scene.tweens.killTweensOf(e),this.scene.tweens.add({targets:e,yoyo:!0,repeat:3,duration:400,ease:Phaser.Math.Easing.Quadratic.InOut,props:{alpha:0}})},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.MISSION,origin:{x:.5,y:.5}}),this.add(this.title),Phaser.Display.Align.In.Center(this.title,this,0,-18)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:this.scene.lang.Text.REQUESTING,origin:{x:.5,y:.5}}),this.label.setTint(1095418),this.add(this.label),new lr.Z({targets:[this.label],yoyo:!0,repeat:-1,props:{alpha:{start:.8,to:.2}}}).play()},n.createScore=function(){this.score=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(32),visible:!1,alpha:.9,depth:Ma.Z.EFFECT,origin:{x:.5,y:.5}})},n.resetScorePosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix(),t=e.translateX,n=e.translateY;this.score.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.add.group()},n.createCircleLight=function(){var e=Ga.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.circleLight=this.scene.make.image({key:t,frame:n.FX_CIRCLE_LIGHT}),this.circleLight.setWorldSize(75.5,75),this.circleLight.kill()},n.createCircleLightAnimation=function(){var e=this;this.circleLightAnimation=new Eh.Z({targets:[this.circleLight],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:2.5,alpha:0},onActive:function(){e.circleLight.revive()},completeDelay:300,onComplete:function(){e.circleLight.kill(),e.starWhiteTwinkle.stop()}})},n.createEffects=function(){this.cometTwinkle=new yr.Z(this.scene),this.cometTwinkle.setDepth(Ma.Z.PRIORITY),this.starWhiteTwinkle=new Vv.Z(this.scene),this.starWhiteTwinkle.setDepth(Ma.Z.PRIORITY)},t}(Phaser.GameObjects.Container),eE=$v,tE=Ga.Z.GAMEPLAY,nE=tE.KEY,iE=tE.FRAME,aE=function(e){function t(t,n,i){var a;return(a=e.call(this,t,nE,iE.BUTTON_SETTING,n,i)||this).scene=void 0,a.handlePauseGame=function(){var e=a.scene,t=e.tileManager,n=e.layoutManager;t.isSelectable&&n.showPauseScreen()},a.scene=t,a.useSound=!1,a.setName("Pause"),a.onClick=a.handlePauseGame,a}return(0,o.Z)(t,e),t}(pr.Z),rE=aE,sE=Ga.Z.GAMEPLAY,oE=sE.KEY,cE=sE.FRAME,uE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.progressBar=void 0,n.scoreText=void 0,n.scene=t,n.createProgressBar(),n.createScore(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=""+e;e>99999&&(t=Math.floor(e/1e3)+"k"),this.scoreText.setText(this.scene.lang.Text.TARGET+": "+t)},n.setProcess=function(e){this.progressBar.setProcess(e,!0)},n.createProgressBar=function(){this.progressBar=new ju(this.scene,{width:90,key:oE,frames:cE}),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,0,10)},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.TopCenter(this.scoreText,this.progressBar,0,10),this.add(this.scoreText),this.setScore(0)},t}(Phaser.GameObjects.Container),lE=uE,hE=Ga.Z.GAMEPLAY,dE=hE.KEY,pE=hE.FRAME,fE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.targetScoreBar=void 0,n.currentScoreBar=void 0,n.missionBlock=void 0,n.scene=t,n.createBackground(),n.createSettingButton(),n.createTargetScoreBar(),n.createCurrentScoreBar(),n.createMissionBlock(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:dE,frame:pE.BIG_TOP,origin:{x:.5,y:.5}}),this.background.setWorldSize(364,80),this.setSize(364,80),this.add(this.background)},n.createSettingButton=function(){var e=new rE(this.scene,35,35);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this.background,-5,-15)},n.createTargetScoreBar=function(){this.targetScoreBar=new lE(this.scene),this.add(this.targetScoreBar),Phaser.Display.Align.In.Center(this.targetScoreBar,this.background,-90,-15)},n.createCurrentScoreBar=function(){this.currentScoreBar=new Wv(this.scene),this.add(this.currentScoreBar),Phaser.Display.Align.In.Center(this.currentScoreBar,this.background)},n.createMissionBlock=function(){this.missionBlock=new eE(this.scene),this.add(this.missionBlock),Phaser.Display.Align.In.Center(this.missionBlock,this.background,110,-8)},t}(Phaser.GameObjects.Container),mE=fE,gE=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.topBar=void 0,n.scene=t,n.createTopBar();var i=n.topBar,a=i.width,r=i.height;return n.setSize(a,r),t.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createTopBar=function(){this.topBar=new mE(this.scene),this.topBar.setDepth(Ma.Z.ITEM),this.add(this.topBar)},t}(Phaser.GameObjects.Container),vE=gE,EE=_f.CHANGE_COLOR.ID,AE=Ga.Z.GAMEPLAY,yE=AE.KEY,SE=AE.FRAME,TE=Zp.COLORS,IE=Zp.SPECIALS,bE=TE.RED,CE=TE.BLUE,wE=TE.PINK,OE=TE.GREEN,RE=TE.YELLOW,PE=IE.FREEZE,_E=IE.COLORFUL,xE=IE.COLOR_CHANGE,kE=function(e){function t(t){var n;return(n=e.call(this,t,SE.TILE_COLOR_CHANGE,37,37)||this).scene=void 0,n.index=void 0,n.colors=void 0,n.color=void 0,n.activeItem=function(){e.prototype.activeItem.call((0,Ba.Z)(n)),n.setAlpha(1)},n.deactivateItem=function(){e.prototype.deactivateItem.call((0,Ba.Z)(n)),n.setAlpha(.015)},n.scene=t,n.item.setTexture(yE),n.item.setFrame(SE.TILE_COLOR_CHANGE),n.index=0,n.colors=[bE,CE,wE,OE,RE,PE,_E,xE],n.setDiamond(0),n.onClick=function(){n.scene.itemManager.activeItem(EE)&&n.nextColor()},n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,n.activeItem),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,(function(e){e.wasTouch&&(n.active&&(n.deactivateItem(),n.scene.itemManager.deactivateItem(EE)))})),n.on(Phaser.Input.Events.POINTER_WHEEL,(function(){n.scene.itemManager.deactivateItem(EE)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.nextColor=function(){this.color=this.colors[this.index],this.index+=1,this.index>=this.colors.length&&(this.index=0),this.item.setTexture(yE),this.item.setFrame(Zp.FRAME[this.color])},n.useItem=function(e){return this.scene.tileManager.tilesChangeColor(this.color,[e]),this.scene.updateMove(),!0},t}(Wf),DE=kE,LE=n(625),ME=_f.GIFT.ID,NE=Ga.Z.GAMEPLAY.FRAME,BE=GameCore.Configs.Gameplay,GE=function(e){function t(t){var n;return(n=e.call(this,t,NE.ITEM_GIFT,31,32)||this).scene=void 0,n.giftTime=void 0,n.timer=void 0,n.customField="lastReceiveGift",n.messageReceived=void 0,n.showMessageAnimation=void 0,n.handleReceiveGift=function(){var e=(0,s.Z)(u().mark((function e(t){var i,a,r,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.scene,a=i.player,r=i.gameZone,s=r.width,o=r.height,c=Date.now(),n.scene.eatDiamond(t),(l=new LE.Z(n.scene)).setDepth(Ma.Z.PRIORITY),l.explode(20,s/2,o/2),n.runShowMessage(),e.next=10,a.setCustomData("lastReceiveGift",c);case 10:n.checkUseable();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleGameSceneResume=function(){n.scene.itemManager.deactivateItem(ME)},n.scene=t,n.giftTime=1e3*BE.GiftTime,n.onClick=function(){var e=n.scene.tileManager;e.isUseableItem&&(e.removeSuggestionsTiles(),n.useGiftItem(),n.deactivateItem())},n.createMessageReceived(),n}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){e.prototype.activeItem.call(this),this.icon.setVisible(!1)},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.icon.setVisible(!1),this.bar.setVisible(!0),this.diamond.setVisible(!0)},n.checkUseable=function(){var e=this.scene.player,t=Date.now(),n=e.getCustomData("lastReceiveGift"),i=0;if(GameCore.Utils.Valid.isNumber(n)&&(i=n),t-i<this.giftTime)return this.disableItem(),void this.startCountdown(i);this.enableItem()},n.enableItem=function(){var e;this.setLabel(this.scene.lang.Text.GIFT),this.setInteractive(),null==(e=this.bubbleAnimation)||e.play()},n.disableItem=function(){var e;this.disableInteractive(),null==(e=this.bubbleAnimation)||e.stop()},n.startCountdown=function(e){var t=this;this.stopCountdown(),this.setLabel(this.scene.lang.Text.GIFT),this.timer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:function(){var n=Date.now()-e,i=t.giftTime-n;if(i<=0)t.enableItem();else{var a=(0,lt.F0)(i,!0);t.setLabel(a)}}})},n.stopCountdown=function(){var e;null==(e=this.timer)||e.remove()},n.setLabel=function(e){this.icon.setVisible(!1),this.diamond.setCenterAlign(),this.diamond.setText(e),Phaser.Display.Align.In.Center(this.diamond,this.bar)},n.useGiftItem=function(){var e=this.scene.itemManager;this.isActive?e.deactivateItem(ME):(e.activeItem(ME),this.useItem())},n.useItem=function(){var e=this;return!!this.isActive&&(this.scene.screen.events.once(Na.Xs.OPEN,(function(t){t.onReward=e.handleReceiveGift})),this.scene.screen.events.once(Na.Xs.CLOSE,this.handleGameSceneResume),this.scene.layoutManager.showRewardScreen(BE.AwardDiamonds),!0)},n.createMessageReceived=function(){this.messageReceived=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(24),visible:!1,text:this.scene.lang.getText({key:"YOU_RECEIVED_X_DIAMONDS",variables:[BE.AwardDiamonds]}),origin:{x:.5,y:.5}}),this.messageReceived.setCenterAlign(),this.messageReceived.setDepth(Ma.Z.MESSAGE)},n.runShowMessage=function(){var e=this;this.messageReceived.revive(),Phaser.Display.Align.In.TopCenter(this.messageReceived,this.scene.gameZone,0,-150),this.showMessageAnimation||(this.showMessageAnimation=new Gf({targets:[this.messageReceived],delay:500,duration:800,completeDelay:1500,onComplete:function(){e.messageReceived.kill()}})),this.showMessageAnimation.play()},t}(Wf),UE=GE,ZE=_f.SHUFFLE.ID,FE=Ga.Z.GAMEPLAY.FRAME,YE=function(e){function t(t){var n;return(n=e.call(this,t,FE.ITEM_SHUFFLE,28,28.5)||this).scene=void 0,n.isRunning=!1,n.costTimer=void 0,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene.itemManager;if(n.isActive)e.deactivateItem(ZE);else{if(!e.activeItem(ZE))return n.scene.audio.playSound(Ua.Z.MOVE_WRONG),void n.shakeAnimation.play();n.scene.useDiamond(n.value),n.useItem()}}},n.useItem=function(e){var t;void 0===e&&(e=3);var i=n.scene,a=i.tileManager,r=i.itemManager,s=i.animationManager;if(n.isRunning=!0,a.isSelectable=!1,a.isUseableItem=!1,e<1&&a.isCanMove())return n.isRunning=!1,r.deactivateItem(ZE),a.isSelectable=!0,a.isUseableItem=!0,a.updateFreezeTiles(),void a.suggestionsEatableTiles();n.scene.audio.playSound(Ua.Z.USE_SHUFFLE),a.removeSuggestionsTiles(),null==(t=n.costTimer)||t.remove(),n.costTimer=n.scene.time.delayedCall(s.moveDuration+100,(function(){n.useItem(e-1)})),n.runShuffle()},n.runShuffle=function(){var e=n.getTilesAlive(),t=n.shuffleTiles();n.shuffleAnimation(e,t),n.updateTilesPosition(e,t)},n.scene=t,n.setDiamond(25),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.getTilesAlive=function(){var e=this.scene.tileManager.getTiles(),t=[];return e.forEach((function(e){e.isCaptured()||e instanceof tf||t.push(e)})),t},n.shuffleTiles=function(){var e=this.getTilesAlive();GameCore.Utils.Array.unique(e);var t=[];return e.forEach((function(e){var n=e.row,i=e.column;t.push({row:n,column:i})})),GameCore.Utils.Array.shuffle(t),t},n.shuffleAnimation=function(e,t){var n=this.scene.animationManager;e.forEach((function(e,i){var a=e.row,r=e.column,s=t[i],o=s.row,c=s.column;a!==o&&n.moveRows({tile:e,fromRow:a,toRow:o}),r!==c&&n.moveColumns({tile:e,fromColumn:r,toColumn:c})}))},n.updateTilesPosition=function(e,t){var n=this.scene.boardManager;e.forEach((function(e,i){var a=e.row,r=e.column,s=t[i],o=s.row,c=s.column;a===o&&r===c||n.tileSwap({fromRow:a,toRow:o,fromColumn:r,toColumn:c})}))},t}(Wf),HE=YE,WE={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},VE=function(e){function t(t){return e.call(this,WE,t)||this}return(0,o.Z)(t,e),t}($a.Z),KE=Ga.Z.DEFAULT,zE=KE.KEY,jE=KE.FRAME,XE=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:zE,frame:jE.SAD_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(100,117),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){},n.runCatAnimation=function(){new sr({targets:[this.cat],duration:1e3,props:{scale:"-=0.02"}}).play()},t}(Phaser.GameObjects.Container),qE=XE,JE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.sadCat=void 0,n.board=void 0,n.titleText=void 0,n.descriptionText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new VE({targets:e,duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+150}},alpha:{value:0,delay:250,duration:150}},onComplete:function(){Phaser.Actions.IncY(e,-150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.setVisible(!1),n.createBoard(),n.createTitleText(),n.createDescriptionText(),n.createTheCat(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Du(this.scene,0,0,600,102),this.board.setDepth(Ma.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.sadCat=new qE(this.scene),this.sadCat.setDepth(Ma.Z.LOGO),this.add(this.sadCat),Phaser.Display.Align.In.Center(this.sadCat,this.board,-140,-19)},n.createTitleText=function(){this.titleText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:Ma.Z.TEXT,origin:{x:.5,y:.5},text:this.scene.lang.Text.LEVEL_FAILED}),this.add(this.titleText),this.titleText.setTint(12010469),Phaser.Display.Align.In.Center(this.titleText,this.board,35,-20)},n.createDescriptionText=function(){this.descriptionText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(20),depth:Ma.Z.TEXT,origin:{x:.5,y:.5},text:this.scene.lang.Text.YOU_DID_NOT_REACH}),this.add(this.descriptionText),this.descriptionText.setTint(11632977),Phaser.Display.Align.In.Center(this.descriptionText,this.board,35,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new VE({targets:[this.board],duration:300,props:{y:{start:e+80,to:e},alpha:{start:0,from:0,to:1}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.sadCat.x;this.theCatAnimation=new VE({targets:[this.sadCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.6,1],delay:150,duration:800,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.titleText.setAlpha(0),this.descriptionText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new VE({targets:[this.titleText,this.descriptionText],duration:500,delay:this.scene.tweens.stagger(200,{start:200}),props:{y:{getEnd:function(e){return e.y}},alpha:{start:0,from:0,to:1}},completeDelay:1e3,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),QE=JE,$E=Ga.Z.GAMEPLAY,eA=$E.KEY,tA=$E.FRAME,nA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.cup=void 0,n.background=void 0,n.playerName=void 0,n.playerScore=void 0,n.waitingText=void 0,n.scene=t,n.createBackground(),n.createAvatar(),n.createPlayerName(),n.createPlayerScore(),n.createWaitingText(),n.createCup(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.playerScore.setText(""+e)},n.updateInfo=function(e,t,n,i){this.playerName.setText(t),this.avatar.loadPhoto(e,n,50),i?(this.setScore(i),this.playerScore.setVisible(!0),this.waitingText.setVisible(!1)):(this.playerScore.setVisible(!1),this.waitingText.setVisible(!0))},n.createBackground=function(){this.background=this.scene.make.image({key:eA,frame:tA.BIG_PLAYER}),this.background.setWorldSize(107,44.5),this.add(this.background)},n.createAvatar=function(){this.avatar=new yh(this.scene,{key:eA,frame:tA.AVATAR_BLUE_FRAME,background:tA.AVATAR_BLUE_BG,width:38,height:39.5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,-5)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Ar.Z.FONT_FAMILY,fontSize:this.scene.fontSize(24)+"px"},alpha:.8,origin:{x:.5,y:.5}}),this.playerName.setHighQuality(),Phaser.Display.Align.In.Center(this.playerName,this.background,20,-10),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:0,y:.5}}),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.background,8,8)},n.createWaitingText=function(){this.waitingText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:0,y:.5},text:this.scene.lang.Text.WAITING}),this.waitingText.setAlpha(.6),this.add(this.waitingText),Phaser.Display.Align.In.Center(this.waitingText,this.background,24,8)},n.createCup=function(){this.cup=this.scene.make.image({key:eA,frame:tA.ICON_CUP_SUPERMINI}),this.cup.setWorldSize(11.5,12.5),this.add(this.cup),Phaser.Display.Align.In.Center(this.cup,this.background,-2,8)},t}(Phaser.GameObjects.Container),iA=nA,aA={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},rA=function(e){function t(t){return e.call(this,aA,t)||this}return(0,o.Z)(t,e),t}($a.Z),sA=function(e){function t(t){var n;(n=e.call(this,t,0,0,Ar.Z.PRIMARY.KEY)||this).scene=void 0,n.flickerAnimation=void 0,n.scene=t;var i=n.scene.fontSize(14);return n.setFontSize(i),n.setOrigin(.5,.5),n.setNotifyText("Loading interstitial ad..."),n.setVisible(!1),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(e){this.setText(e)},n.runTextAnimation=function(){var e,t=this;this.flickerAnimation||(this.flickerAnimation=new rA({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){t.setVisible(!0)},onComplete:function(){t.setVisible(!1)}})),null==(e=this.flickerAnimation)||e.play()},t}(Phaser.GameObjects.BitmapText),oA=sA,cA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.theCat=void 0,n.board=void 0,n.levelText=void 0,n.scoreTargetText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new VE({targets:e,duration:300,ease:Phaser.Math.Easing.Back.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+-150}}},onComplete:function(){Phaser.Actions.IncY(e,150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.createBoard(),n.createLevelText(),n.createTargetText(),n.createTheCat(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.levelText.setText(this.scene.lang.Text.MILESTONE+" "+e)},n.setScoreTarget=function(e){this.scoreTargetText.setText(this.scene.lang.Text.TARGET+": "+e)},n.createBoard=function(){this.board=new Du(this.scene,0,0,600,102),this.board.setDepth(Ma.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.theCat=new Uu(this.scene),this.theCat.setDepth(Ma.Z.LOGO),this.add(this.theCat),Phaser.Display.Align.In.Center(this.theCat,this.board,-140,-17)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:Ma.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.levelText),this.levelText.setTint(12010469),Phaser.Display.Align.In.Center(this.levelText,this.board,25,-20)},n.createTargetText=function(){this.scoreTargetText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(26),depth:Ma.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.scoreTargetText),this.scoreTargetText.setTint(11632977),Phaser.Display.Align.In.Center(this.scoreTargetText,this.board,25,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new VE({targets:[this.board],duration:300,props:{y:{start:e+80,to:e}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.theCat.x;this.theCatAnimation=new VE({targets:[this.theCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.75],delay:150,duration:600,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e+-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.levelText.setAlpha(0),this.scoreTargetText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new VE({targets:[this.levelText,this.scoreTargetText],duration:500,delay:this.scene.tweens.stagger(100,{start:200}),props:{x:{start:-200,to:20},alpha:{start:0,from:0,to:1}},completeDelay:600,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),uA=cA,lA=Ga.Z.GAMEPLAY,hA=lA.KEY,dA=lA.FRAME,pA=function(){function e(e){this.scene=void 0,this.header=void 0,this.opponentInfo=void 0,this.showAdNotify=void 0,this.gameOverBoard=void 0,this.startLevelBoard=void 0,this.giftItem=void 0,this.paintItem=void 0,this.hammerItem=void 0,this.shuffleItem=void 0,this.changeColor=void 0,this.gameOverTool=void 0,this.nextLevelTool=void 0,this.group=void 0,this.scene=e,this.createGroup(),this.createObjects()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},t.createObjects=function(){this.createHeader(),this.createOpponentInfo(),this.createShowAdNotify(),this.createGameOverBoard(),this.createStartLevelBoard(),this.createGiftItem(),this.createPaintItem(),this.createHammerItem(),this.createShuffleItem(),this.createDevTools()},t.createHeader=function(){this.header=new vE(this.scene),this.group.add(this.header)},t.createOpponentInfo=function(){this.opponentInfo=new iA(this.scene),this.group.add(this.opponentInfo),this.opponentInfo.setDepth(Ma.Z.ITEM),this.opponentInfo.kill()},t.createShowAdNotify=function(){this.showAdNotify=new oA(this.scene),this.group.add(this.showAdNotify)},t.createGameOverBoard=function(){this.gameOverBoard=new QE(this.scene),this.group.add(this.gameOverBoard),this.gameOverBoard.setDepth(Ma.Z.POPUP)},t.createStartLevelBoard=function(){this.startLevelBoard=new uA(this.scene),this.group.add(this.startLevelBoard),this.startLevelBoard.setDepth(Ma.Z.POPUP)},t.createGiftItem=function(){this.giftItem=new UE(this.scene),this.group.add(this.giftItem)},t.createPaintItem=function(){this.paintItem=new dm(this.scene),this.group.add(this.paintItem)},t.createHammerItem=function(){this.hammerItem=new rm(this.scene),this.group.add(this.hammerItem)},t.createShuffleItem=function(){this.shuffleItem=new HE(this.scene),this.group.add(this.shuffleItem)},t.createDevTools=function(){GameCore.Utils.Valid.isDebugger()&&(this.createChangeColorItem(),this.createGameOverButton(),this.createNextLevelButton())},t.createChangeColorItem=function(){this.changeColor=new DE(this.scene),this.group.add(this.changeColor)},t.createGameOverButton=function(){this.gameOverTool=new pr.Z(this.scene,hA,dA.BUTTON_SETTING),this.group.add(this.gameOverTool),this.gameOverTool.setAlpha(.02),this.gameOverTool.setName("GameOver"),this.gameOverTool.button.setTint(6291256)},t.createNextLevelButton=function(){this.nextLevelTool=new pr.Z(this.scene,hA,dA.BUTTON_PLUS),this.group.add(this.nextLevelTool),this.nextLevelTool.setAlpha(.02),this.nextLevelTool.setName("NextLevel"),this.nextLevelTool.button.setTint(6291256)},e}(),fA=pA,mA=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),gA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.TopCenter(this.objects.opponentInfo,e,0,-115),Phaser.Display.Align.In.TopCenter(this.objects.showAdNotify,e,0,-200),Phaser.Display.Align.In.Center(this.objects.gameOverBoard,e,0,25),Phaser.Display.Align.In.Center(this.objects.startLevelBoard,e,0,25),GameCore.Utils.Valid.isDebugger()&&(Phaser.Display.Align.In.Center(this.objects.changeColor,e,0,-90),Phaser.Display.Align.In.TopCenter(this.objects.gameOverTool,e,-80,-100),Phaser.Display.Align.In.TopCenter(this.objects.nextLevelTool,e,80,-100)),Phaser.Display.Align.In.TopCenter(this.objects.giftItem,e,-148,-50),Phaser.Display.Align.In.TopCenter(this.objects.paintItem,e,-148,-130),Phaser.Display.Align.In.TopCenter(this.objects.hammerItem,e,148,-50),Phaser.Display.Align.In.TopCenter(this.objects.shuffleItem,e,148,-130)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(mA),vA=gA,EA=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone;GameCore.Utils.Valid.isDebugger()&&(Phaser.Display.Align.In.Center(this.objects.changeColor,t,0,-90),Phaser.Display.Align.In.TopCenter(this.objects.gameOverTool,t,-80,-100),Phaser.Display.Align.In.TopCenter(this.objects.nextLevelTool,t,80,-100)),Phaser.Display.Align.In.TopLeft(this.objects.giftItem,this.objects.header,65,0),Phaser.Display.Align.In.TopLeft(this.objects.paintItem,this.objects.header,65,-80),Phaser.Display.Align.In.TopRight(this.objects.hammerItem,this.objects.header,65,0),Phaser.Display.Align.In.TopRight(this.objects.shuffleItem,this.objects.header,65,-80)}},t}(vA),AA=EA,yA=vf.STATUS,SA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new fA(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new AA(this.scene):this.layout=new vA(this.scene),this.layout.setUIObjects(this.objects)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.objects.opponentInfo.kill(),this.setState(yA.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(yA.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(yA.STOPPED)},n.initUILogic=function(){var e=this;GameCore.Utils.Valid.isDebugger()&&(this.objects.gameOverTool.onClick=function(){var t=e.scene.levelHandler.level;e.scene.die(t)},this.objects.nextLevelTool.onClick=function(){var t=e.scene.levelHandler.targetScore;e.scene.setScore(t),e.scene.levelUp()})},n.updateUIState=function(){this.objects.giftItem.checkUseable(),this.scene.gameplayMode===da&&this.showAvatarInChallengeMode()},n.showAvatarInChallengeMode=function(){var e=this.scene,t=e.storage,n=e.player,i=e.layoutManager,a=t.getState(),r=i.objects,s=Ms(a),o=s._id,c=s.whitePlayerId,u=s.whitePlayerScore,l=s.blackPlayerScore,h=s.whitePlayerFinish,d=s.blackPlayerFinish;if(o){var p=n.getPlayerId()===c,f=p?d:h,m=Gs(a),g=p?l:u;r.opponentInfo.revive(),r.opponentInfo.updateInfo(m.playerId,m.name,m.photo,f&&g)}else r.opponentInfo.kill},n.showPauseScreen=function(){var e=this.scene.screen,t=e.get(Na.o4.PAUSE_SCREEN);t||(t=e.add(Na.o4.PAUSE_SCREEN,xv)),e.open(Na.o4.PAUSE_SCREEN)},n.showRewardScreen=function(e){var t=this.scene.screen,n=t.get(Na.o4.REWARD_SCREEN);n||(n=t.add(Na.o4.REWARD_SCREEN,Rr)),t.open(Na.o4.REWARD_SCREEN,{awardDiamonds:e})},n.showRescueScreen=function(){var e=this.scene.screen,t=e.get(Na.o4.RESCUE_SCREEN);t||(t=e.add(Na.o4.RESCUE_SCREEN,Uv)),e.open(Na.o4.RESCUE_SCREEN)},t}(rf),TA=SA,IA=GameCore.Configs,bA=IA.Match,CA=IA.Gameplay,wA=IA.Ads,OA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).prevScore=0,n.gameplayMode=void 0,n.currentScore=0,n.currentDiamond=0,n.prevTargetScore=0,n.isReachTargetScore=!1,n.fireworks=void 0,n.bonusScoreAnimation=void 0,n.totalScoreAnimation=void 0,n.encouragingAnimation=void 0,n.levelHandler=void 0,n.tileManager=void 0,n.modeManager=void 0,n.itemManager=void 0,n.boardManager=void 0,n.layoutManager=void 0,n.tutorialManager=void 0,n.missionsManager=void 0,n.animationManager=void 0,n.saveTimer=void 0,n.create=function(){e.prototype.create.call((0,Ba.Z)(n)),n.createBackground(ua.Z.BACKGROUND.KEY),n.createHandler(),n.createManager(),n.fireworks=n.add.group(),n.createAnimations(),n.listenEvents()},n.run=function(){n.startGame(),n.checkAndAddShortcut(),n.ads.showBannerAdAsync().catch((function(e){}))},n.eatDiamond=function(e){Tc.emit(Pr.COLLECT_DIAMONDS.EVENTS.COLLECT_DIAMONDS,{type:"diamond",value:e}),n.setDiamond(n.currentDiamond+e)},n.eatScore=function(e){n.currentScore+=e;var t=n.levelHandler.targetScore;n.currentScore>=t&&!n.isReachTargetScore&&(n.runEncouragingAnimation(Bh.CONGRATULATION),n.audio.playSound(Ua.Z.CONGRATULATION)),n.setScore(n.currentScore),n.updateMove()},n.die=function(e){n.tileManager.isSelectable=!1,n.tileManager.isUseableItem=!1,n.clearMove(),n.runGameOverAnimation(),n.analytics.levelFail(e,n.currentScore);var t=n.storage.getState(),i=rs(t);i<bA.MaxRescueCount&&n.ads.preloadRewardedVideoAsync(),n.time.addEvent({delay:CA.DelayFinishGame,callback:function(){i<bA.MaxRescueCount&&wA.Enabled?n.layoutManager.showRescueScreen():n.endGame()}})},n.rescued=function(){n.setScore(n.prevScore),n.runStartLevelAnimation(),n.initManager(),n.time.addEvent({delay:CA.DelayStart,callback:function(){n.startManager(),n.updateMove()}})},n.replay=function(){n.startGame()},n.levelUp=function(){n.stopManager();var e=n.levelHandler,t=e.targetScore,i=e.level;if(n.levelHandler.up(n.currentScore)){Tc.emit(Pr.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1}),n.analytics.levelComplete(i,n.currentScore),n.clearMove(),n.prevTargetScore=t,n.prevScore=n.currentScore,n.setScore(n.currentScore),n.fireFireworks(),n.runStartLevelAnimation();var a=i+1;if(n.ads.canbeShowInterstitialAd()&&a>=CA.StartAdAtLevel)n.layoutManager.objects.showAdNotify.show();n.time.addEvent({delay:CA.DelayLevelUp,callback:n.handleNextLevel})}else n.die(i)},n.handleNextLevel=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.handleShowAdWhenNextLevel();case 2:n.initManager(),n.startManager(),n.updateMove(),t=n.levelHandler.level,n.analytics.levelStart(t,n.currentScore);case 7:case"end":return e.stop()}}),e)}))),n.handleShowAdWhenNextLevel=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.levelHandler.level>=CA.StartAdAtLevel)){e.next=20;break}if(n.audio.pauseMusic(),n.audio.muteAll(),!n.ads.canbeShowInterstitialAd()){e.next=17;break}return e.prev=5,n.game.globalScene.screen.open(Na.o4.NOTIFY_SCREEN,{message:n.lang.Text.LOADING,duration:0,loading:!0}),e.next=9,n.ads.showInterstitialAdAsync();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5);case 14:return e.prev=14,n.game.globalScene.screen.close(Na.o4.NOTIFY_SCREEN),e.finish(14);case 17:n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch((function(){}));case 20:n.layoutManager.objects.showAdNotify.setVisible(!1);case 22:case"end":return e.stop()}}),e,null,[[5,11,14,17]])}))),n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){}))},n.updateScore=(0,Qi.D)((function(){n.storage.dispatch(sc({score:n.currentScore,level:n.levelHandler.level}))}),1e3),n.updateMove=function(){var e;bA.ContinueSingleMatchEnabled&&n.gameplayMode===ha&&(null==(e=n.saveTimer)||e.remove(),n.saveTimer=n.time.addEvent({delay:1500,callback:function(){if(n.tileManager.isCanMove()){var e=n.boardManager.tileMap,t=GameCore.Utils.Hash.encodeMap(e,Zp.HASH),i=n.storage.getState(),a=_s(i),r=n.levelHandler.level;n.storage.dispatch(zo(a,{level:r,score:n.currentScore,data:{fen:t,diamond:n.currentDiamond},updateAt:Date.now()}))}}}))},n.clearMove=function(){var e=n.storage.getState(),t=_s(e),i=n.levelHandler.level;n.storage.dispatch(zo(t,{level:i,score:n.currentScore,data:{fen:"",diamond:n.currentDiamond},updateAt:Date.now()}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.handleCloseBannerAds)},n.createHandler=function(){this.levelHandler=new Zm(this)},n.initHandler=function(){this.levelHandler.init()},n.createManager=function(){this.layoutManager=new TA(this),this.tileManager=new $g(this),this.modeManager=new qm(this),this.itemManager=new vm(this),this.boardManager=new Pf(this),this.tutorialManager=new Cv(this),this.missionsManager=new Km(this),this.animationManager=new gf(this)},n.initManager=function(){this.boardManager.init(),this.tileManager.init(),this.modeManager.init(),this.itemManager.init(),this.tutorialManager.init(),this.missionsManager.init(),this.animationManager.init(),this.layoutManager.init()},n.stopManager=function(){this.boardManager.stop(),this.tileManager.stop(),this.modeManager.stop(),this.itemManager.stop(),this.tutorialManager.stop(),this.missionsManager.stop(),this.animationManager.stop(),this.layoutManager.stop()},n.startManager=function(){this.tutorialManager.start(),this.boardManager.start(),this.tileManager.start(),this.modeManager.start(),this.itemManager.start(),this.missionsManager.start(),this.animationManager.start(),this.layoutManager.start()},n.listenEvents=function(){Tc.on(wv.RESCUE,this.rescued),Tc.on(wv.REPLAY,this.replay)},n.startGame=function(){var e=this;this.ads.preloadInterstitialAdAsync().catch((function(){}));var t=this.storage.getState();this.gameplayMode=as(t),this.prevScore=CA.StartScore,this.prevTargetScore=0,this.initHandler(),this.initManager();var n=this.player.getDiamond(),i=CA.StartDiamonds;if("number"===typeof n&&n>CA.StartDiamonds&&(i=n),this.gameplayMode===ha&&bA.ContinueSingleMatchEnabled){var a=Ls(t),r=ks(t);if(a&&r>0){var s=xs(t),o=Ds(t);this.prevScore=s,i=o>i?i:o,this.levelHandler.level=r,this.levelHandler.setConfig(r)}}this.setDiamond(i),this.setScore(this.prevScore),this.runStartLevelAnimation(),this.audio.playSound(Ua.Z.START_GAME),this.time.addEvent({delay:CA.DelayStart,callback:function(){e.startManager();var t=e.levelHandler.level;e.analytics.levelStart(t,e.currentScore),e.checkContinueSingleMatch()}})},n.checkContinueSingleMatch=function(){this.gameplayMode===ha&&(this.tileManager.isCanMove()||this.tileManager.updateFreezeTiles(!0))},n.createAnimations=function(){this.bonusScoreAnimation=new Nh(this),this.totalScoreAnimation=new Hh(this),this.encouragingAnimation=new Fh(this)},n.runStartLevelAnimation=function(){var e=this.levelHandler,t=e.targetScore,n=e.level,i=this.layoutManager.objects.startLevelBoard;i.setLevel(n),i.setScoreTarget(t),n>1&&this.audio.playSound(Ua.Z.START_LEVEL),i.runAnimation()},n.runGameOverAnimation=function(){this.audio.playSound(Ua.Z.YOU_LOSE),this.layoutManager.objects.gameOverBoard.runAnimation()},n.runBonusScoreAnimation=function(e){this.bonusScoreAnimation.setBonusScore(e),this.bonusScoreAnimation.runAnimation()},n.runTotalScoreAnimation=function(e,t,n){this.totalScoreAnimation.setTotalScore(e),this.totalScoreAnimation.runAnimation(t,n),Tc.emit(Pr.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:e})},n.runEncouragingAnimation=function(e){this.encouragingAnimation.runAnimation(e),this.fireFireworks()},n.createFirework=function(){var e=new za(this);return this.fireworks.add(e),e},n.fireFireworks=function(){var e=this,t=this.layoutManager.objects.header.topBar;this.tweens.addCounter({duration:300,repeat:Phaser.Math.RND.between(3,6),onRepeat:function(){var n=e.fireworks.getMatching("visible",!1),i=n[0];n.length<1&&(i=e.createFirework()),i.randomColor();var a=Phaser.Math.RND.between(50,e.gameZone.width-50);i.fire(a,e.gameZone.height,t.y+100)}})},n.setScore=function(e){var t=this.layoutManager.objects.header.topBar,n=t.currentScoreBar,i=t.targetScoreBar;n.setScore(e),this.currentScore=e,this.updateScore();var a=this.levelHandler.targetScore;this.isReachTargetScore=this.currentScore>=a;var r=Phaser.Math.Percent(this.currentScore,this.prevTargetScore,a);i.setProcess(r)},n.useDiamond=function(e){var t=this.currentDiamond-e,n=t<0?0:t;this.setDiamond(n)},n.setDiamond=function(e){this.currentDiamond=e,this.player.setCustomData("diamond",e),this.storage.dispatch(sc({diamond:e}))},n.setTargetScore=function(e){this.layoutManager.objects.header.topBar.targetScoreBar.setScore(e)},n.endGame=function(){this.clearMove(),this.prevTargetScore=0,this.storage.dispatch(gc())},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();ga(e)}},t}(Ic.Z);var RA=OA,PA=n(607);function _A(e,t){var n="undefined"!==typeof eg()&&ng()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return xA(e,t);var i=Ge()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Qm()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xA(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kA=GameCore.Configs.LeadersBoard,DA=kA.UseMock,LA=kA.Limit,MA=function(e,t,n,a){return void 0===n&&(n=LA),void 0===a&&(a=0),function(){var r=(0,s.Z)(u().mark((function r(s){var o,c,l,h,d,p,f,m,g,v,E,A,y,S,T,I,b,C;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,o=window.game.player,c=o.getPlayerId(),s({type:hi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!DA){r.next=11;break}return r.next=7,(0,lt.qZ)(1e3);case 7:return 145,d=me()(l=yo()(h=new Array(n)).call(h,null)).call(l,(function(e,t){var n=(t+1)*(a+1);return{playerId:145===t?c:"0"+n,name:145===t?"Current Player":"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)}})),s(NA(d,t)),r.abrupt("return");case 11:if(p=[],t!==kr){r.next=18;break}return r.next=15,Wr({limit:n,offset:a});case 15:p=r.sent,r.next=26;break;case 18:if(t!==Dr){r.next=26;break}return(f=o.getConnectedPlayerIds(n,a)).push(c),m=GameCore.Utils.Array.unique(f),r.next=24,zr({playerIds:m,limit:m.length});case 24:p=r.sent,m.forEach((function(e){var t=pe()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 26:for(g={},v=_A(p);!(E=v()).done;)A=E.value,y=A.playerId,S=A.score,T=A.rank,I=A.getPlayer(),b=I.getPhoto(),C=I.getName(),g[y]={playerId:y,name:C,photo:b,score:S,rank:T};s(NA(g,t)),r.next=36;break;case 32:r.prev=32,r.t0=r.catch(0),s(NA([],t)),(0,i.tO)(r.t0);case 36:case"end":return r.stop()}}),r,null,[[0,32]])})));return function(e){return r.apply(this,arguments)}}()},NA=function(e,t){return{type:di,payload:{leaders:e,type:t}}},BA=function(e){return e[si]},GA=(0,W.P1)([function(e){return BA(e).leaders}],(function(e){return e})),UA=(0,W.P1)([function(e){return BA(e).isRequesting}],(function(e){return e})),ZA=Ga.Z.DEFAULT,FA=ZA.KEY,YA=ZA.FRAME,HA=function(e){function t(t){var n;return(n=e.call(this,t,FA,YA.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,FA,YA.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(pr.Z),WA=HA,VA=Ga.Z.DEFAULT,KA=VA.KEY,zA=VA.FRAME,jA=function(e){function t(t){var n;return(n=e.call(this,t,KA,zA.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:13,text:this.scene.lang.Text.PLAY}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:9,text:this.scene.lang.Text.WITH_FRIENDS});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(pr.Z),XA=jA,qA=Ga.Z.DEFAULT,JA=qA.KEY,QA=qA.FRAME,$A=function(e){function t(t){var n;return(n=e.call(this,t,JA,QA.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,JA,QA.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(pr.Z),ey=$A,ty=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new WA(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new XA(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new ey(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),ny=ty,iy=n(633),ay=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return pe()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=yo()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&me()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,Z.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(iy.Z)),ry={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},sy=function(e){function t(t){return e.call(this,ry,t)||this}return(0,o.Z)(t,e),t}($a.Z),oy=Ga.Z.DEFAULT,cy=oy.KEY,uy=oy.FRAME,ly=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(pc(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,r.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:cy,frame:uy.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?uy.LEADERBOARD_BG_LIGHT:uy.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new yh(this.scene,{key:cy,frame:uy.AVATAR_FRAME_YELLOW_SMALL,background:uy.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,40)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=uy.ICON_FLAG;switch(e){case 1:t=uy.ICON_CUP_GOLD;break;case 2:t=uy.ICON_CUP_SILVER;break;case 3:t=uy.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:cy,frame:t}),t!=uy.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=uy.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Ar.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:cy,frame:uy.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new pr.Z(this.scene,cy,uy.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.PLAY});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new sy({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Gf({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),hy=ly;function dy(e,t){var n="undefined"!==typeof eg()&&ng()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return py(e,t);var i=Ge()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Qm()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return py(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fy=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new ay(this.scene,{classType:hy,listConfigs:[],width:280,height:370,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ga.Z.DEFAULT.KEY,Ga.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,8),this.add(this.scroller)},n.updateData=function(e){var t=ci()(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.Text.LB_IS_EMPTY);for(var n,i=[],a=dy(li()(t).call(t,(function(e,t){return+t.score-+e.score})));!(n=a()).done;){var r=n.value,s=r.playerId,o=r.photo,c=r.score,u=r.name,l=r.rank;if(s){var h=this.currentPlayerId===s,d={playerId:s,photo:o,name:u,rank:l,score:c,scoreRight:this.scene.tabId===kr,useChallenge:!h&&this.scene.tabId===Dr,isHighlight:h};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.Text.LB_IS_EMPTY);for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),my=fy,gy=Ga.Z.DEFAULT,vy=gy.KEY,Ey=gy.FRAME,Ay=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabWorld(),n}(0,o.Z)(t,e);var n=t.prototype;return n.selectTabWorld=function(){this.tabWorld.button.setFrame(Ey.LEADERBOARD_TAB_ON)},n.createTabWorld=function(){this.tabWorld=new pr.Z(this.scene,vy,Ey.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:9,text:this.scene.lang.Text.WORLD,origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,0),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),yy=Ay,Sy=Ga.Z.DEFAULT,Ty=Sy.KEY,Iy=Sy.FRAME,by=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Du(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new ul.Z(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle()},n.createLeaders=function(){this.leaders=new my(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Ty,frame:Iy.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize("id"===n?25:30),text:this.scene.lang.Text.LEADERBOARDS});Phaser.Display.Align.In.Center(i,t,0,-10),e.add([t,i]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new yy(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new or.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Cy=by,wy=GameCore.Configs.LeadersBoard,Oy=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:UA,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=GA(t);n.board.leaders.updateData(i)}}}];n.handleStateChange(e),n.selectWorldTab()},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handleHomeClick=function(){n.scene.switch(Ta.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.shareAsync({data:"",intent:"SHARE",text:"",image:""});case 2:case"end":return e.stop()}}),e)}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(ua.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectWorldTab=function(){this.tabId=kr,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.storage.dispatch(MA(wy.LeaderboardId,kr,wy.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=wy.Limit,this.storage.dispatch(MA(wy.LeaderboardId,Dr,wy.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=wy.Limit,this.storage.dispatch(MA(wy.LeaderboardId,kr,wy.Limit,this.offset)))},n.createBoard=function(){this.board=new Cy(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20)},n.createFooterBar=function(){this.footerBar=new ny(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},t}(Ic.Z);var Ry=Oy,Py=GameCore.Configs.Notification.ApiUrl,_y=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,At("players/"+n,t,{},Py,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xy=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,R.Z)(Error)),ky=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==_t()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var r=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=Xu();if(GameCore.Utils.Valid.isObject(a)){var r=a;GameCore.Utils.Object.hasOwn(r,e)&&(r[e].rewarded||(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r}),i({type:Oi,payload:{id:e,type:t,value:n}})))}}}(n.id,i,r)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:_i,payload:{id:e}}),Tc.emit(Pr.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=wc(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:cl()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=Q()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=Oc(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var r=a[e];"number"===typeof r&&(i.value=r)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,r=t;return i+t>a&&(r=a-i),Math.round(r)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),Dy=ky,Ly=Pr.COLLECT_DIAMONDS,My=Ly.ID,Ny=Ly.EVENTS,By=function(e){function t(t){return e.call(this,t,My)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(Ny.COLLECT_DIAMONDS,this.process),Tc.on(Ny.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(Dy),Gy=By,Uy=Pr.PASS_LEVELS,Zy=Uy.ID,Fy=Uy.EVENTS,Yy=function(e){function t(t){return e.call(this,t,Zy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(Fy.PASS_LEVEL,this.process),Tc.on(Fy.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(Dy),Hy=Yy,Wy=Pr.REACH_SCORE,Vy=Wy.ID,Ky=Wy.EVENTS,zy=function(e){function t(t){var n;return(n=e.call(this,t,Vy)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(Ky.ADD_SCORE,this.process),Tc.on(Ky.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(Dy),jy=zy,Xy=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Rc(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:bi,payload:{}}),e.next=7,Fu();case 7:for(a=e.sent,r=window.game.globalScene.lang,s=0;s<a.length;s++)"pass-levels"===(o=a[s]).id?a[s].title=r.Text.PASS_10_LEVELS:"collect-diamonds"===o.id?a[s].title=r.Text.COLLECT_300:"reach-score"===o.id&&(a[s].title=r.Text.REACH_TOTAL);t(Hu(a));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[Pr.PASS_LEVELS.ID]=new Hy(this.game),this.eventsListener[Pr.REACH_SCORE.ID]=new jy(this.game),this.eventsListener[Pr.COLLECT_DIAMONDS.ID]=new Gy(this.game)},e}(),qy=Xy,Jy=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],Qy=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jy);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$y=function(e){return{type:vi,payload:{missions:e}}},eS=function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:Ai,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Tc.emit(pm.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:yi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Fm(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Fm(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return Q()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}(),tS=eS,nS=pm.EVENTS,iS=pm.TYPES,aS=function(e){function t(t,n){return e.call(this,t,iS.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(nS.MISSION_UPDATE,this.process),Tc.on(nS.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(tS),rS=aS,sS=pm.EVENTS,oS=pm.TYPES,cS=function(e){function t(t,n){return e.call(this,t,oS.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(sS.MISSION_UPDATE,this.process),Tc.on(sS.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(tS),uS=cS,lS=pm.EVENTS,hS=pm.TYPES,dS=function(e){function t(t,n){return e.call(this,t,hS.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Tc.off(lS.MISSION_UPDATE,this.process),Tc.on(lS.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(tS),pS=dS,fS=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Hm(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:gi,payload:{}}),e.next=7,Qy();case 7:a=e.sent,t($y(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Ym(t);n&&Q()(n).forEach((function(t){switch(n[t].id){case pm.TYPES.COLLECT_GEMS:e.listener[t]=new rS(e.game,t);break;case pm.TYPES.COMBO:e.listener[t]=new uS(e.game,t);break;case pm.TYPES.USE_ITEM:e.listener[t]=new pS(e.game,t)}}))},t.initEvents=function(){Tc.off(pm.EVENTS.MISSION_START,this.startListener),Tc.on(pm.EVENTS.MISSION_START,this.startListener)},e}(),mS=fS,gS=function(e){try{var t=ma(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,r=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===a?la:new Me.Z(a,r,s).toObject()}catch(o){return la}},vS=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(vs(n))})).catch((function(e){})),e(lc())}catch(t){}}},ES=function(){return function(e,t){try{var n=t(),i=ma(n),a=window.game.player,r=a.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=r.playerId===o,u=gS(n);c||a.updateConnectedPlayers([u]);var l=u.playerId;e(fc(s,l,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},AS=function(){return function(e,t){try{var n=t(),i=ma(n),a=window.game.player.getPlayer(),r=i.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId,u=a.playerId===c;e(mc(s,u?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},yS=function(){return function(e,t){try{var n=t(),a=ma(n).entryPointData||{},o=a.playerId,c=a.playerScore;e(rc(o,{score:c,level:0}));var l=gS(n);e(function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var a,r,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.facebook,s=a.globalScene,o=a.analytics,s.screen.open(Na.o4.NOTIFY_SCREEN,{message:s.lang.Text.LOADING,loading:!0}),c=r.getContextID(),oc({contextId:c}),o.event(Ht._.JOIN_GROUP,{group_id:c}),t.next=8,n(Ec(pa,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof xr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,uc(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,r.Z)({},l,{score:c})))}catch(h){throw new Error("processMatchingGroupMode: "+h)}}},SS=function(){return function(e){try{e(hc())}catch(t){throw new Error("processNewUserMode: "+t)}}},TS=n(603),IS={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json"}},bS=GameCore.Configs.AppId,CS=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,E()(t=[this]).call(t,a))||this).handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){},n.startGame=function(){n.analytics.event(Ht._.APP_READY),n.storage.dispatch((0,TS.I)(Ta.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,r=n.globalScene;try{var s=t(),o=ma(s),c=ga(s),u=i.getPlayer(),l=(o.entryPointData||{}).type;if(u.isUserNew&&a.event(Ht._.NEW_USER),c===fa)return void e(vS());if(c===da){if(l===ra)return void e(ES());if(l===oa)return void e(AS())}if(c===pa)return void e(yS());if(u.isUserNew)return void e(SS());r.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE)}catch(h){r.events.emit(Ta.K.SWITCH,Ta.C.DASHBOARD_SCENE)}}))},n.subscribebot=function(){n.facebook.attemptToSubscribeBot()},n.handleLoadSoundCompleted=function(){n.audio.initSound(IS.EFFECTS.KEY)},n.handleLoadMusicCompleted=function(){n.audio.initMusic(IS.BACKGROUND.KEY),n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Ht._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new xy("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})}));var t=this.lang.getCurrentLanguage();this.load.bitmapFont(Ar.Z.PRIMARY.KEY,Ar.Z.PRIMARY.TEXTURE[t],Ar.Z.PRIMARY.DATA[t]),this.load.image(ua.Z.AVATAR.KEY,ua.Z.AVATAR.FILE),this.load.image(ua.Z.BACKGROUND.KEY,ua.Z.BACKGROUND.FILE),this.load.atlas({key:Ga.Z.DEFAULT.KEY,textureURL:Ga.Z.DEFAULT.TEXTURE,atlasURL:Ga.Z.DEFAULT.JSON}),this.load.atlas({key:Ga.Z.GAMEPLAY.KEY,textureURL:Ga.Z.GAMEPLAY.TEXTURE,atlasURL:Ga.Z.GAMEPLAY.JSON}),this.load.multiatlas({key:Ga.Z.EFFECTS.KEY,path:Ga.Z.EFFECTS.PATH,atlasURL:Ga.Z.EFFECTS.JSON}),this.load.atlas({key:Ga.Z.TUTORIAL.KEY,textureURL:Ga.Z.TUTORIAL.TEXTURE,atlasURL:Ga.Z.TUTORIAL.JSON}),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){this.analytics.event(Ht._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID;_y({appId:bS,playerId:t,name:n,photo:i,locale:a,ASID:r})},n.sendNotificationForNewUser=function(){if(this.player.getPlayerIsNew()){var e=this.player.getPlayerASID();e&&this.facebook.sendNotificationAsync({message:"Hi @["+e+"] your friends are waiting to play with you, play now!",delayTime:3600})}},n.setupGlobalScene=function(){var e=this.scene.get(Ta.C.GLOBAL_SCENE);e instanceof PA.Z&&e.setup()},n.initModules=function(){new mS(this.game),new qy(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+IS.EFFECTS.KEY,this.handleLoadSoundCompleted),this.load.once(e+"audio-"+IS.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(IS.BACKGROUND.KEY,IS.BACKGROUND.FILE),this.load.audioSprite(IS.EFFECTS.KEY,IS.EFFECTS.JSON,IS.EFFECTS.FILE),this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.png","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.png"})},t}(Phaser.Scene),wS=CS,OS=Ga.Z.DEFAULT,RS=OS.KEY,PS=OS.FRAME,_S=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?(this.avatar.setFrame(PS.AVATAR_FRAME_YELLOW_BIG),this.avatar.setBackground(PS.AVATAR_BG_YELLOW_BIG)):(this.avatar.setFrame(PS.AVATAR_FRAME_BLUE_BIG),this.avatar.setBackground(PS.AVATAR_BG_BLUE_BIG))},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new yh(this.scene,{key:RS,frame:PS.AVATAR_FRAME_BLUE_BIG,background:PS.AVATAR_BG_BLUE_BIG,width:89,height:89,radius:60}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:RS,frame:PS.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,25),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Ar.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:Ar.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),xS=_S,kS=Ga.Z.DEFAULT,DS=kS.KEY,LS=kS.FRAME,MS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Du(this.scene,0,0,600,340),this.board.setDepth(Ma.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:DS,frame:LS.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new pr.Z(this.scene,DS,LS.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(Ma.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:Ar.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(Ma.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new xS(this.scene),this.playerScore.setDepth(Ma.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new xS(this.scene),this.opponentScore.setDepth(Ma.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Sh.Z(this.scene,{key:DS,button:LS.BUTTON_GREEN,icon:LS.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(Ma.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Sh.Z(this.scene,{key:DS,button:LS.BUTTON_BLUE,icon:LS.ICON_FLAT_SHARE,text:this.scene.lang.Text.SHARE},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(Ma.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),NS=MS,BS=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,E()(t=[this]).call(t,r))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(Ta.C.RESULT_MATCH_SCENE),n.scene.run(Ta.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var a,r,s,o,c,l,h,d,p,f,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,r=a.player,s=a.analytics,o=a.facebook,c=a.globalScene,e.prev=1,c.screen.open(Na.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=n(),e.next=6,$s(l);case 6:return h=e.sent,Xs(h),d=r.getPlayer(),p=d.playerId,f=d.name,m=d.photo,e.next=12,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:h||"",data:{playerId:p,playerName:f,playerPhoto:m,type:ra}});case 12:s.event(Ht._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),s.event(Ht._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 19:return e.prev=19,c.screen.close(Na.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}())},n.handleRestartMatch=function(){n.storage.dispatch(dc()),n.scene.sleep(Ta.C.RESULT_MATCH_SCENE),n.scene.sleep(Ta.C.GAME_OVER_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=Hs(e),n=as(e),i=this.player.getPlayer(),a=i.photo,r=i.name,s=i.playerId,o=Gs(e),c=o.playerId,u=o.name,l=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,p=(t[c]||{}).score,f=void 0===p?0:p,m=Zs(e,{playerId:s}),g=Fs(e,{opponentId:c});n===pa&&(m=!0,g=!0);var v=m&&g;this.main.playerScore.loadPhoto(s,a),this.main.opponentScore.loadPhoto(c,l),this.main.playerScore.setPlayerName(r),this.main.opponentScore.setPlayerName(u),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(f),this.main.playerScore.showCrown(v&&d>f),this.main.opponentScore.showCrown(v&&f>d),m&&g?d===f?this.main.titleText.setText(this.lang.Text.DRAW):d>f?this.main.titleText.setText(this.lang.Text.YOU_WIN):d<f&&this.main.titleText.setText(this.lang.Text.YOU_LOSE):this.main.titleText.setText(this.lang.Text.WAITING_OPPONENT),m&&g&&(d===f||(d>f?this.audio.playSound(Ua.Z.YOU_WIN):d<f&&this.audio.playSound(Ua.Z.YOU_LOSE)))},n.createMain=function(){this.main=new NS(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Ic.Z);var GS=BS,US=n(634),ZS=["Enable"],FS=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initProfilerPlugin(),this.initAdaptivePerformance();case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new g(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality()},i.addExtraFBInstantFunctions=function(){var e=new l.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new f(this)},i.addPlugins=function(){this.plugins.install("Storage",Vi,!0,"storage"),this.plugins.install("Rollbar",Zt,!0,"rollbar"),this.plugins.install("AdsManager",k,!0,"ads"),this.plugins.install("AuthManager",q,!0,"auth"),this.plugins.install("AudioManager",U,!0,"audio"),this.plugins.install("WorldManager",ea,!0,"world"),this.plugins.install("PlayerManager",rt,!0,"player"),this.plugins.install("LanguageManager",xa,!0,"lang"),this.plugins.install("ProfileManager",Rt,!0,"profile"),this.plugins.install("AnalyticsManager",M,!0,"analytics"),this.plugins.install("AdaptivePerformance",le,!0,"performance"),this.plugins.installScenePlugin("textStyler",Ji,"textStyler"),this.plugins.installScenePlugin("ScreenManager",jt,"screen"),this.plugins.installScenePlugin("FrameCapture",ie,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance")},i.addDevPlugins=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,587));case 4:return t=e.sent.default,e.next=7,n.e(401).then(n.bind(n,588));case 7:return i=e.sent.default,e.next=10,Promise.all([n.e(708),n.e(123)]).then(n.bind(n,589));case 10:a=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Statistics",i,!0,"statistics"),this.plugins.install("Profiler",a,!0,"profiler"),this.eruda=this.plugins.get("Console"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Ta.C.BOOT_SCENE,La,!0),this.scene.add(Ta.C.LOAD_SCENE,wS,!1),this.scene.add(Ta.C.GAME_SCENE,RA,!1),this.scene.add(Ta.C.GAME_OVER_SCENE,Lh,!1),this.scene.add(Ta.C.DASHBOARD_SCENE,Kl,!1),this.scene.add(Ta.C.LEADERBOARD_SCENE,Ry,!1),this.scene.add(Ta.C.RESULT_MATCH_SCENE,GS,!1),this.scene.add(Ta.C.GLOBAL_SCENE,PA.Z,!1)},i.addDevScenes=function(){var e=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,495));case 4:return t=e.sent.default,e.next=7,n.e(997).then(n.bind(n,590));case 7:i=e.sent.default,this.scene.add(Ta.C.TEST_SCENE,t,!1),this.scene.add(Ta.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,US.Z.setGame(this),i=US.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,591));case 6:a=e.sent.default,i=a;case 8:s=(0,r.Z)({},t.InterstitialAdOptions),o=GameSDK.getPlatform(),c=GameSDK.getLocale(),"WEB"===o&&"ru"===c&&(s.secondsFirstTime=60,s.secondsBetweenAds=60),s.showWhenStartGame&&(s.secondsFirstTime=0),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:s,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,r=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,u=e.DisableLandscape,l=e.FullSizeOnLandscape,h=n,d=i,p=a,f=r,m=s,g=o;this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:m,landscapeHeight:g,disableLandscape:u,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Sa(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,ZS);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,document.addEventListener("visibilitychange",(function(){document.hidden?e.audio.pauseMusic():e.audio.playMusic()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),YS=FS,HS=GameCore.Configs.Debugger.ShowInspector,WS={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},audio:{},input:{gamepad:!1,keyboard:HS,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var VS=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(VS),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new YS(WS);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},595:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},502:function(e,t,n){"use strict";var i=n(503),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},601:function(e,t){"use strict";t.Z={OPEN:"open",CLOSE:"close",CREATED:"created"}},603:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(599),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},594:function(e,t,n){"use strict";n.d(t,{F0:function(){return u},Gm:function(){return c},qZ:function(){return o}});var i=n(26),a=n.n(i),r=n(35),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},u=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},500:function(e,t,n){"use strict";n.d(t,{R0:function(){return s},Tv:function(){return r},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(102),n(338),n(52),n(25);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},s=function(e,t){e&&window.Sentry.withScope((function(e){e.setExtras(t)}))},o=function(e){}},504:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var i=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],r=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(497)})),n.O(void 0,[216,630,542],(function(){return n(498)})),n.O(void 0,[216,630,542],(function(){return n(415)})),n.O(void 0,[216,630,542],(function(){return n(505)})),n.O(void 0,[216,630,542],(function(){return n(593)})),n.O(void 0,[216,630,542],(function(){return n(462)}));var i=n.O(void 0,[216,630,542],(function(){return n(554)}));i=n.O(i)})();